function oR(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ls(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function lR(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var Xp={exports:{}},_l={},Zp={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function cR(){if(Sw)return Ze;Sw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function w(R,U,X){this.props=R,this.context=U,this.refs=v,this.updater=X||b}w.prototype.isReactComponent={},w.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function N(){}N.prototype=w.prototype;function P(R,U,X){this.props=R,this.context=U,this.refs=v,this.updater=X||b}var C=P.prototype=new N;C.constructor=P,_(C,w.prototype),C.isPureReactComponent=!0;var A=Array.isArray,k=Object.prototype.hasOwnProperty,M={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(R,U,X){var re,ae={},le=null,Q=null;if(U!=null)for(re in U.ref!==void 0&&(Q=U.ref),U.key!==void 0&&(le=""+U.key),U)k.call(U,re)&&!E.hasOwnProperty(re)&&(ae[re]=U[re]);var se=arguments.length-2;if(se===1)ae.children=X;else if(1<se){for(var xe=Array(se),Pe=0;Pe<se;Pe++)xe[Pe]=arguments[Pe+2];ae.children=xe}if(R&&R.defaultProps)for(re in se=R.defaultProps,se)ae[re]===void 0&&(ae[re]=se[re]);return{$$typeof:n,type:R,key:le,ref:Q,props:ae,_owner:M.current}}function I(R,U){return{$$typeof:n,type:R.type,key:U,ref:R.ref,props:R.props,_owner:R._owner}}function O(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function F(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return U[X]})}var L=/\/+/g;function V(R,U){return typeof R=="object"&&R!==null&&R.key!=null?F(""+R.key):U.toString(36)}function z(R,U,X,re,ae){var le=typeof R;(le==="undefined"||le==="boolean")&&(R=null);var Q=!1;if(R===null)Q=!0;else switch(le){case"string":case"number":Q=!0;break;case"object":switch(R.$$typeof){case n:case e:Q=!0}}if(Q)return Q=R,ae=ae(Q),R=re===""?"."+V(Q,0):re,A(ae)?(X="",R!=null&&(X=R.replace(L,"$&/")+"/"),z(ae,U,X,"",function(Pe){return Pe})):ae!=null&&(O(ae)&&(ae=I(ae,X+(!ae.key||Q&&Q.key===ae.key?"":(""+ae.key).replace(L,"$&/")+"/")+R)),U.push(ae)),1;if(Q=0,re=re===""?".":re+":",A(R))for(var se=0;se<R.length;se++){le=R[se];var xe=re+V(le,se);Q+=z(le,U,X,xe,ae)}else if(xe=y(R),typeof xe=="function")for(R=xe.call(R),se=0;!(le=R.next()).done;)le=le.value,xe=re+V(le,se++),Q+=z(le,U,X,xe,ae);else if(le==="object")throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Q}function W(R,U,X){if(R==null)return R;var re=[],ae=0;return z(R,re,"","",function(le){return U.call(X,le,ae++)}),re}function G(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var K={current:null},$={transition:null},H={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:$,ReactCurrentOwner:M};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:W,forEach:function(R,U,X){W(R,function(){U.apply(this,arguments)},X)},count:function(R){var U=0;return W(R,function(){U++}),U},toArray:function(R){return W(R,function(U){return U})||[]},only:function(R){if(!O(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ze.Component=w,Ze.Fragment=t,Ze.Profiler=i,Ze.PureComponent=P,Ze.StrictMode=s,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Ze.act=ee,Ze.cloneElement=function(R,U,X){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var re=_({},R.props),ae=R.key,le=R.ref,Q=R._owner;if(U!=null){if(U.ref!==void 0&&(le=U.ref,Q=M.current),U.key!==void 0&&(ae=""+U.key),R.type&&R.type.defaultProps)var se=R.type.defaultProps;for(xe in U)k.call(U,xe)&&!E.hasOwnProperty(xe)&&(re[xe]=U[xe]===void 0&&se!==void 0?se[xe]:U[xe])}var xe=arguments.length-2;if(xe===1)re.children=X;else if(1<xe){se=Array(xe);for(var Pe=0;Pe<xe;Pe++)se[Pe]=arguments[Pe+2];re.children=se}return{$$typeof:n,type:R.type,key:ae,ref:le,props:re,_owner:Q}},Ze.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},Ze.createElement=T,Ze.createFactory=function(R){var U=T.bind(null,R);return U.type=R,U},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(R){return{$$typeof:u,render:R}},Ze.isValidElement=O,Ze.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:G}},Ze.memo=function(R,U){return{$$typeof:h,type:R,compare:U===void 0?null:U}},Ze.startTransition=function(R){var U=$.transition;$.transition={};try{R()}finally{$.transition=U}},Ze.unstable_act=ee,Ze.useCallback=function(R,U){return K.current.useCallback(R,U)},Ze.useContext=function(R){return K.current.useContext(R)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(R){return K.current.useDeferredValue(R)},Ze.useEffect=function(R,U){return K.current.useEffect(R,U)},Ze.useId=function(){return K.current.useId()},Ze.useImperativeHandle=function(R,U,X){return K.current.useImperativeHandle(R,U,X)},Ze.useInsertionEffect=function(R,U){return K.current.useInsertionEffect(R,U)},Ze.useLayoutEffect=function(R,U){return K.current.useLayoutEffect(R,U)},Ze.useMemo=function(R,U){return K.current.useMemo(R,U)},Ze.useReducer=function(R,U,X){return K.current.useReducer(R,U,X)},Ze.useRef=function(R){return K.current.useRef(R)},Ze.useState=function(R){return K.current.useState(R)},Ze.useSyncExternalStore=function(R,U,X){return K.current.useSyncExternalStore(R,U,X)},Ze.useTransition=function(){return K.current.useTransition()},Ze.version="18.3.1",Ze}var _w;function nc(){return _w||(_w=1,Zp.exports=cR()),Zp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function uR(){if(Cw)return _l;Cw=1;var n=nc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,h){var p,m={},y=null,b=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(b=d.ref);for(p in d)s.call(d,p)&&!a.hasOwnProperty(p)&&(m[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:e,type:u,key:y,ref:b,props:m,_owner:i.current}}return _l.Fragment=t,_l.jsx=c,_l.jsxs=c,_l}var jw;function dR(){return jw||(jw=1,Xp.exports=uR()),Xp.exports}var r=dR(),Bu={},Jp={exports:{}},zn={},em={exports:{}},tm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function hR(){return Nw||(Nw=1,(function(n){function e($,H){var ee=$.length;$.push(H);e:for(;0<ee;){var R=ee-1>>>1,U=$[R];if(0<i(U,H))$[R]=H,$[ee]=U,ee=R;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var H=$[0],ee=$.pop();if(ee!==H){$[0]=ee;e:for(var R=0,U=$.length,X=U>>>1;R<X;){var re=2*(R+1)-1,ae=$[re],le=re+1,Q=$[le];if(0>i(ae,ee))le<U&&0>i(Q,ae)?($[R]=Q,$[le]=ee,R=le):($[R]=ae,$[re]=ee,R=re);else if(le<U&&0>i(Q,ee))$[R]=Q,$[le]=ee,R=le;else break e}}return H}function i($,H){var ee=$.sortIndex-H.sortIndex;return ee!==0?ee:$.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],h=[],p=1,m=null,y=3,b=!1,_=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var H=t(h);H!==null;){if(H.callback===null)s(h);else if(H.startTime<=$)s(h),H.sortIndex=H.expirationTime,e(d,H);else break;H=t(h)}}function A($){if(v=!1,C($),!_)if(t(d)!==null)_=!0,G(k);else{var H=t(h);H!==null&&K(A,H.startTime-$)}}function k($,H){_=!1,v&&(v=!1,N(T),T=-1),b=!0;var ee=y;try{for(C(H),m=t(d);m!==null&&(!(m.expirationTime>H)||$&&!F());){var R=m.callback;if(typeof R=="function"){m.callback=null,y=m.priorityLevel;var U=R(m.expirationTime<=H);H=n.unstable_now(),typeof U=="function"?m.callback=U:m===t(d)&&s(d),C(H)}else s(d);m=t(d)}if(m!==null)var X=!0;else{var re=t(h);re!==null&&K(A,re.startTime-H),X=!1}return X}finally{m=null,y=ee,b=!1}}var M=!1,E=null,T=-1,I=5,O=-1;function F(){return!(n.unstable_now()-O<I)}function L(){if(E!==null){var $=n.unstable_now();O=$;var H=!0;try{H=E(!0,$)}finally{H?V():(M=!1,E=null)}}else M=!1}var V;if(typeof P=="function")V=function(){P(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=L,V=function(){W.postMessage(null)}}else V=function(){w(L,0)};function G($){E=$,M||(M=!0,V())}function K($,H){T=w(function(){$(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){_||b||(_=!0,G(k))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var ee=y;y=H;try{return $()}finally{y=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=y;y=$;try{return H()}finally{y=ee}},n.unstable_scheduleCallback=function($,H,ee){var R=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?R+ee:R):ee=R,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ee+U,$={id:p++,callback:H,priorityLevel:$,startTime:ee,expirationTime:U,sortIndex:-1},ee>R?($.sortIndex=ee,e(h,$),t(d)===null&&$===t(h)&&(v?(N(T),T=-1):v=!0,K(A,ee-R))):($.sortIndex=U,e(d,$),_||b||(_=!0,G(k))),$},n.unstable_shouldYield=F,n.unstable_wrapCallback=function($){var H=y;return function(){var ee=y;y=H;try{return $.apply(this,arguments)}finally{y=ee}}}})(tm)),tm}var kw;function fR(){return kw||(kw=1,em.exports=hR()),em.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function pR(){if(Tw)return zn;Tw=1;var n=nc(),e=fR();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(o,l){c(o,l),c(o+"Capture",l)}function c(o,l){for(i[o]=l,o=0;o<l.length;o++)s.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(o){return d.call(m,o)?!0:d.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function b(o,l,f,g){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function _(o,l,f,g){if(l===null||typeof l>"u"||b(o,l,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function v(o,l,f,g,S,j,D){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=o,this.type=l,this.sanitizeURL=j,this.removeEmptyString=D}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new v(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];w[l]=new v(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new v(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new v(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new v(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new v(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function P(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(N,P);w[l]=new v(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(N,P);w[l]=new v(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(N,P);w[l]=new v(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,l,f,g){var S=w.hasOwnProperty(l)?w[l]:null;(S!==null?S.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(_(l,f,S,g)&&(f=null),g||S===null?y(l)&&(f===null?o.removeAttribute(l):o.setAttribute(l,""+f)):S.mustUseProperty?o[S.propertyName]=f===null?S.type===3?!1:"":f:(l=S.attributeName,g=S.attributeNamespace,f===null?o.removeAttribute(l):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,g?o.setAttributeNS(g,l,f):o.setAttribute(l,f))))}var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),M=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),F=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),$=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=$&&o[$]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Object.assign,R;function U(o){if(R===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);R=l&&l[1]||""}return`
`+R+o}var X=!1;function re(o,l){if(!o||X)return"";X=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ie){var g=ie}Reflect.construct(o,[],l)}else{try{l.call()}catch(ie){g=ie}o.call(l.prototype)}else{try{throw Error()}catch(ie){g=ie}o()}}catch(ie){if(ie&&g&&typeof ie.stack=="string"){for(var S=ie.stack.split(`
`),j=g.stack.split(`
`),D=S.length-1,q=j.length-1;1<=D&&0<=q&&S[D]!==j[q];)q--;for(;1<=D&&0<=q;D--,q--)if(S[D]!==j[q]){if(D!==1||q!==1)do if(D--,q--,0>q||S[D]!==j[q]){var Y=`
`+S[D].replace(" at new "," at ");return o.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",o.displayName)),Y}while(1<=D&&0<=q);break}}}finally{X=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?U(o):""}function ae(o){switch(o.tag){case 5:return U(o.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return o=re(o.type,!1),o;case 11:return o=re(o.type.render,!1),o;case 1:return o=re(o.type,!0),o;default:return""}}function le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case M:return"Portal";case I:return"Profiler";case T:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case F:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case W:return l=o.displayName||null,l!==null?l:le(o.type)||"Memo";case G:l=o._payload,o=o._init;try{return le(o(l))}catch{}}return null}function Q(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(l);case 8:return l===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function se(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xe(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Pe(o){var l=xe(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,j=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return S.call(this)},set:function(D){g=""+D,j.call(this,D)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Fe(o){o._valueTracker||(o._valueTracker=Pe(o))}function oe(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return o&&(g=xe(o)?o.checked?"true":"false":o.value),o=g,o!==f?(l.setValue(o),!0):!1}function ke(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Me(o,l){var f=l.checked;return ee({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function ce(o,l){var f=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;f=se(l.value!=null?l.value:f),o._wrapperState={initialChecked:g,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ve(o,l){l=l.checked,l!=null&&C(o,"checked",l,!1)}function Ve(o,l){ve(o,l);var f=se(l.value),g=l.type;if(f!=null)g==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ye(o,l.type,f):l.hasOwnProperty("defaultValue")&&Ye(o,l.type,se(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function We(o,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,f||l===o.value||(o.value=l),o.defaultValue=l}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Ye(o,l,f){(l!=="number"||ke(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var Je=Array.isArray;function Se(o,l,f,g){if(o=o.options,l){l={};for(var S=0;S<f.length;S++)l["$"+f[S]]=!0;for(f=0;f<o.length;f++)S=l.hasOwnProperty("$"+o[f].value),o[f].selected!==S&&(o[f].selected=S),S&&g&&(o[f].defaultSelected=!0)}else{for(f=""+se(f),l=null,S=0;S<o.length;S++){if(o[S].value===f){o[S].selected=!0,g&&(o[S].defaultSelected=!0);return}l!==null||o[S].disabled||(l=o[S])}l!==null&&(l.selected=!0)}}function ct(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Rn(o,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(Je(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}o._wrapperState={initialValue:se(f)}}function Dr(o,l){var f=se(l.value),g=se(l.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),l.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),g!=null&&(o.defaultValue=""+g)}function va(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Ec(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lf(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Ec(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ac,Dv=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,g,S){MSApp.execUnsafeLocalFunction(function(){return o(l,f,g,S)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ac.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function zo(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dA=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(o){dA.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Bo[l]=Bo[o]})});function Fv(o,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||Bo.hasOwnProperty(o)&&Bo[o]?(""+l).trim():l+"px"}function Lv(o,l){o=o.style;for(var f in l)if(l.hasOwnProperty(f)){var g=f.indexOf("--")===0,S=Fv(f,l[f],g);f==="float"&&(f="cssFloat"),g?o.setProperty(f,S):o[f]=S}}var hA=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cf(o,l){if(l){if(hA[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function uf(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=null;function hf(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ff=null,ba=null,wa=null;function zv(o){if(o=ll(o)){if(typeof ff!="function")throw Error(t(280));var l=o.stateNode;l&&(l=eu(l),ff(o.stateNode,o.type,l))}}function Bv(o){ba?wa?wa.push(o):wa=[o]:ba=o}function Vv(){if(ba){var o=ba,l=wa;if(wa=ba=null,zv(o),l)for(o=0;o<l.length;o++)zv(l[o])}}function Uv(o,l){return o(l)}function $v(){}var pf=!1;function qv(o,l,f){if(pf)return o(l,f);pf=!0;try{return Uv(o,l,f)}finally{pf=!1,(ba!==null||wa!==null)&&($v(),Vv())}}function Vo(o,l){var f=o.stateNode;if(f===null)return null;var g=eu(f);if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var mf=!1;if(u)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){mf=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{mf=!1}function fA(o,l,f,g,S,j,D,q,Y){var ie=Array.prototype.slice.call(arguments,3);try{l.apply(f,ie)}catch(de){this.onError(de)}}var $o=!1,Mc=null,Rc=!1,gf=null,pA={onError:function(o){$o=!0,Mc=o}};function mA(o,l,f,g,S,j,D,q,Y){$o=!1,Mc=null,fA.apply(pA,arguments)}function gA(o,l,f,g,S,j,D,q,Y){if(mA.apply(this,arguments),$o){if($o){var ie=Mc;$o=!1,Mc=null}else throw Error(t(198));Rc||(Rc=!0,gf=ie)}}function Ti(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function Wv(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Gv(o){if(Ti(o)!==o)throw Error(t(188))}function yA(o){var l=o.alternate;if(!l){if(l=Ti(o),l===null)throw Error(t(188));return l!==o?null:o}for(var f=o,g=l;;){var S=f.return;if(S===null)break;var j=S.alternate;if(j===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===j.child){for(j=S.child;j;){if(j===f)return Gv(S),o;if(j===g)return Gv(S),l;j=j.sibling}throw Error(t(188))}if(f.return!==g.return)f=S,g=j;else{for(var D=!1,q=S.child;q;){if(q===f){D=!0,f=S,g=j;break}if(q===g){D=!0,g=S,f=j;break}q=q.sibling}if(!D){for(q=j.child;q;){if(q===f){D=!0,f=j,g=S;break}if(q===g){D=!0,g=j,f=S;break}q=q.sibling}if(!D)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?o:l}function Hv(o){return o=yA(o),o!==null?Kv(o):null}function Kv(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Kv(o);if(l!==null)return l;o=o.sibling}return null}var Qv=e.unstable_scheduleCallback,Yv=e.unstable_cancelCallback,xA=e.unstable_shouldYield,vA=e.unstable_requestPaint,Lt=e.unstable_now,bA=e.unstable_getCurrentPriorityLevel,yf=e.unstable_ImmediatePriority,Xv=e.unstable_UserBlockingPriority,Ic=e.unstable_NormalPriority,wA=e.unstable_LowPriority,Zv=e.unstable_IdlePriority,Oc=null,qs=null;function SA(o){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Oc,o,void 0,(o.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:jA,_A=Math.log,CA=Math.LN2;function jA(o){return o>>>=0,o===0?32:31-(_A(o)/CA|0)|0}var Dc=64,Fc=4194304;function qo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Lc(o,l){var f=o.pendingLanes;if(f===0)return 0;var g=0,S=o.suspendedLanes,j=o.pingedLanes,D=f&268435455;if(D!==0){var q=D&~S;q!==0?g=qo(q):(j&=D,j!==0&&(g=qo(j)))}else D=f&~S,D!==0?g=qo(D):j!==0&&(g=qo(j));if(g===0)return 0;if(l!==0&&l!==g&&(l&S)===0&&(S=g&-g,j=l&-l,S>=j||S===16&&(j&4194240)!==0))return l;if((g&4)!==0&&(g|=f&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=g;0<l;)f=31-gs(l),S=1<<f,g|=o[f],l&=~S;return g}function NA(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kA(o,l){for(var f=o.suspendedLanes,g=o.pingedLanes,S=o.expirationTimes,j=o.pendingLanes;0<j;){var D=31-gs(j),q=1<<D,Y=S[D];Y===-1?((q&f)===0||(q&g)!==0)&&(S[D]=NA(q,l)):Y<=l&&(o.expiredLanes|=q),j&=~q}}function xf(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Jv(){var o=Dc;return Dc<<=1,(Dc&4194240)===0&&(Dc=64),o}function vf(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function Wo(o,l,f){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-gs(l),o[l]=f}function TA(o,l){var f=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<f;){var S=31-gs(f),j=1<<S;l[S]=0,g[S]=-1,o[S]=-1,f&=~j}}function bf(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var g=31-gs(f),S=1<<g;S&l|o[g]&l&&(o[g]|=l),f&=~S}}var dt=0;function e0(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var t0,wf,n0,s0,r0,Sf=!1,zc=[],Fr=null,Lr=null,zr=null,Go=new Map,Ho=new Map,Br=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i0(o,l){switch(o){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Go.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(l.pointerId)}}function Ko(o,l,f,g,S,j){return o===null||o.nativeEvent!==j?(o={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:j,targetContainers:[S]},l!==null&&(l=ll(l),l!==null&&wf(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),o)}function EA(o,l,f,g,S){switch(l){case"focusin":return Fr=Ko(Fr,o,l,f,g,S),!0;case"dragenter":return Lr=Ko(Lr,o,l,f,g,S),!0;case"mouseover":return zr=Ko(zr,o,l,f,g,S),!0;case"pointerover":var j=S.pointerId;return Go.set(j,Ko(Go.get(j)||null,o,l,f,g,S)),!0;case"gotpointercapture":return j=S.pointerId,Ho.set(j,Ko(Ho.get(j)||null,o,l,f,g,S)),!0}return!1}function a0(o){var l=Pi(o.target);if(l!==null){var f=Ti(l);if(f!==null){if(l=f.tag,l===13){if(l=Wv(f),l!==null){o.blockedOn=l,r0(o.priority,function(){n0(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Bc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Cf(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);df=g,f.target.dispatchEvent(g),df=null}else return l=ll(f),l!==null&&wf(l),o.blockedOn=f,!1;l.shift()}return!0}function o0(o,l,f){Bc(o)&&f.delete(l)}function AA(){Sf=!1,Fr!==null&&Bc(Fr)&&(Fr=null),Lr!==null&&Bc(Lr)&&(Lr=null),zr!==null&&Bc(zr)&&(zr=null),Go.forEach(o0),Ho.forEach(o0)}function Qo(o,l){o.blockedOn===l&&(o.blockedOn=null,Sf||(Sf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,AA)))}function Yo(o){function l(S){return Qo(S,o)}if(0<zc.length){Qo(zc[0],o);for(var f=1;f<zc.length;f++){var g=zc[f];g.blockedOn===o&&(g.blockedOn=null)}}for(Fr!==null&&Qo(Fr,o),Lr!==null&&Qo(Lr,o),zr!==null&&Qo(zr,o),Go.forEach(l),Ho.forEach(l),f=0;f<Br.length;f++)g=Br[f],g.blockedOn===o&&(g.blockedOn=null);for(;0<Br.length&&(f=Br[0],f.blockedOn===null);)a0(f),f.blockedOn===null&&Br.shift()}var Sa=A.ReactCurrentBatchConfig,Vc=!0;function MA(o,l,f,g){var S=dt,j=Sa.transition;Sa.transition=null;try{dt=1,_f(o,l,f,g)}finally{dt=S,Sa.transition=j}}function RA(o,l,f,g){var S=dt,j=Sa.transition;Sa.transition=null;try{dt=4,_f(o,l,f,g)}finally{dt=S,Sa.transition=j}}function _f(o,l,f,g){if(Vc){var S=Cf(o,l,f,g);if(S===null)Vf(o,l,g,Uc,f),i0(o,g);else if(EA(S,o,l,f,g))g.stopPropagation();else if(i0(o,g),l&4&&-1<PA.indexOf(o)){for(;S!==null;){var j=ll(S);if(j!==null&&t0(j),j=Cf(o,l,f,g),j===null&&Vf(o,l,g,Uc,f),j===S)break;S=j}S!==null&&g.stopPropagation()}else Vf(o,l,g,null,f)}}var Uc=null;function Cf(o,l,f,g){if(Uc=null,o=hf(g),o=Pi(o),o!==null)if(l=Ti(o),l===null)o=null;else if(f=l.tag,f===13){if(o=Wv(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Uc=o,null}function l0(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bA()){case yf:return 1;case Xv:return 4;case Ic:case wA:return 16;case Zv:return 536870912;default:return 16}default:return 16}}var Vr=null,jf=null,$c=null;function c0(){if($c)return $c;var o,l=jf,f=l.length,g,S="value"in Vr?Vr.value:Vr.textContent,j=S.length;for(o=0;o<f&&l[o]===S[o];o++);var D=f-o;for(g=1;g<=D&&l[f-g]===S[j-g];g++);return $c=S.slice(o,1<g?1-g:void 0)}function qc(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Wc(){return!0}function u0(){return!1}function Wn(o){function l(f,g,S,j,D){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=j,this.target=D,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(f=o[q],this[q]=f?f(j):j[q]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Wc:u0,this.isPropagationStopped=u0,this}return ee(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),l}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nf=Wn(_a),Xo=ee({},_a,{view:0,detail:0}),IA=Wn(Xo),kf,Tf,Zo,Gc=ee({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ef,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Zo&&(Zo&&o.type==="mousemove"?(kf=o.screenX-Zo.screenX,Tf=o.screenY-Zo.screenY):Tf=kf=0,Zo=o),kf)},movementY:function(o){return"movementY"in o?o.movementY:Tf}}),d0=Wn(Gc),OA=ee({},Gc,{dataTransfer:0}),DA=Wn(OA),FA=ee({},Xo,{relatedTarget:0}),Pf=Wn(FA),LA=ee({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),zA=Wn(LA),BA=ee({},_a,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),VA=Wn(BA),UA=ee({},_a,{data:0}),h0=Wn(UA),$A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GA(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=WA[o])?!!l[o]:!1}function Ef(){return GA}var HA=ee({},Xo,{key:function(o){if(o.key){var l=$A[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=qc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?qA[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ef,charCode:function(o){return o.type==="keypress"?qc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?qc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),KA=Wn(HA),QA=ee({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f0=Wn(QA),YA=ee({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ef}),XA=Wn(YA),ZA=ee({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),JA=Wn(ZA),eM=ee({},Gc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),tM=Wn(eM),nM=[9,13,27,32],Af=u&&"CompositionEvent"in window,Jo=null;u&&"documentMode"in document&&(Jo=document.documentMode);var sM=u&&"TextEvent"in window&&!Jo,p0=u&&(!Af||Jo&&8<Jo&&11>=Jo),m0=" ",g0=!1;function y0(o,l){switch(o){case"keyup":return nM.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ca=!1;function rM(o,l){switch(o){case"compositionend":return x0(l);case"keypress":return l.which!==32?null:(g0=!0,m0);case"textInput":return o=l.data,o===m0&&g0?null:o;default:return null}}function iM(o,l){if(Ca)return o==="compositionend"||!Af&&y0(o,l)?(o=c0(),$c=jf=Vr=null,Ca=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return p0&&l.locale!=="ko"?null:l.data;default:return null}}var aM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!aM[o.type]:l==="textarea"}function b0(o,l,f,g){Bv(g),l=Xc(l,"onChange"),0<l.length&&(f=new Nf("onChange","change",null,f,g),o.push({event:f,listeners:l}))}var el=null,tl=null;function oM(o){L0(o,0)}function Hc(o){var l=Pa(o);if(oe(l))return o}function lM(o,l){if(o==="change")return l}var w0=!1;if(u){var Mf;if(u){var Rf="oninput"in document;if(!Rf){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Rf=typeof S0.oninput=="function"}Mf=Rf}else Mf=!1;w0=Mf&&(!document.documentMode||9<document.documentMode)}function _0(){el&&(el.detachEvent("onpropertychange",C0),tl=el=null)}function C0(o){if(o.propertyName==="value"&&Hc(tl)){var l=[];b0(l,tl,o,hf(o)),qv(oM,l)}}function cM(o,l,f){o==="focusin"?(_0(),el=l,tl=f,el.attachEvent("onpropertychange",C0)):o==="focusout"&&_0()}function uM(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Hc(tl)}function dM(o,l){if(o==="click")return Hc(l)}function hM(o,l){if(o==="input"||o==="change")return Hc(l)}function fM(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var ys=typeof Object.is=="function"?Object.is:fM;function nl(o,l){if(ys(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!d.call(l,S)||!ys(o[S],l[S]))return!1}return!0}function j0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function N0(o,l){var f=j0(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=l&&g>=l)return{node:f,offset:l-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=j0(f)}}function k0(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?k0(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function T0(){for(var o=window,l=ke();l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=ke(o.document)}return l}function If(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function pM(o){var l=T0(),f=o.focusedElem,g=o.selectionRange;if(l!==f&&f&&f.ownerDocument&&k0(f.ownerDocument.documentElement,f)){if(g!==null&&If(f)){if(l=g.start,o=g.end,o===void 0&&(o=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(o,f.value.length);else if(o=(l=f.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var S=f.textContent.length,j=Math.min(g.start,S);g=g.end===void 0?j:Math.min(g.end,S),!o.extend&&j>g&&(S=g,g=j,j=S),S=N0(f,j);var D=N0(f,g);S&&D&&(o.rangeCount!==1||o.anchorNode!==S.node||o.anchorOffset!==S.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),o.removeAllRanges(),j>g?(o.addRange(l),o.extend(D.node,D.offset)):(l.setEnd(D.node,D.offset),o.addRange(l)))}}for(l=[],o=f;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)o=l[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var mM=u&&"documentMode"in document&&11>=document.documentMode,ja=null,Of=null,sl=null,Df=!1;function P0(o,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Df||ja==null||ja!==ke(g)||(g=ja,"selectionStart"in g&&If(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sl&&nl(sl,g)||(sl=g,g=Xc(Of,"onSelect"),0<g.length&&(l=new Nf("onSelect","select",null,l,f),o.push({event:l,listeners:g}),l.target=ja)))}function Kc(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var Na={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionend:Kc("Transition","TransitionEnd")},Ff={},E0={};u&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Qc(o){if(Ff[o])return Ff[o];if(!Na[o])return o;var l=Na[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in E0)return Ff[o]=l[f];return o}var A0=Qc("animationend"),M0=Qc("animationiteration"),R0=Qc("animationstart"),I0=Qc("transitionend"),O0=new Map,D0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(o,l){O0.set(o,l),a(l,[o])}for(var Lf=0;Lf<D0.length;Lf++){var zf=D0[Lf],gM=zf.toLowerCase(),yM=zf[0].toUpperCase()+zf.slice(1);Ur(gM,"on"+yM)}Ur(A0,"onAnimationEnd"),Ur(M0,"onAnimationIteration"),Ur(R0,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(I0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xM=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function F0(o,l,f){var g=o.type||"unknown-event";o.currentTarget=f,gA(g,l,void 0,o),o.currentTarget=null}function L0(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],S=g.event;g=g.listeners;e:{var j=void 0;if(l)for(var D=g.length-1;0<=D;D--){var q=g[D],Y=q.instance,ie=q.currentTarget;if(q=q.listener,Y!==j&&S.isPropagationStopped())break e;F0(S,q,ie),j=Y}else for(D=0;D<g.length;D++){if(q=g[D],Y=q.instance,ie=q.currentTarget,q=q.listener,Y!==j&&S.isPropagationStopped())break e;F0(S,q,ie),j=Y}}}if(Rc)throw o=gf,Rc=!1,gf=null,o}function vt(o,l){var f=l[Hf];f===void 0&&(f=l[Hf]=new Set);var g=o+"__bubble";f.has(g)||(z0(l,o,2,!1),f.add(g))}function Bf(o,l,f){var g=0;l&&(g|=4),z0(f,o,g,l)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function il(o){if(!o[Yc]){o[Yc]=!0,s.forEach(function(f){f!=="selectionchange"&&(xM.has(f)||Bf(f,!1,o),Bf(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Yc]||(l[Yc]=!0,Bf("selectionchange",!1,l))}}function z0(o,l,f,g){switch(l0(l)){case 1:var S=MA;break;case 4:S=RA;break;default:S=_f}f=S.bind(null,l,f,o),S=void 0,!mf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),g?S!==void 0?o.addEventListener(l,f,{capture:!0,passive:S}):o.addEventListener(l,f,!0):S!==void 0?o.addEventListener(l,f,{passive:S}):o.addEventListener(l,f,!1)}function Vf(o,l,f,g,S){var j=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var q=g.stateNode.containerInfo;if(q===S||q.nodeType===8&&q.parentNode===S)break;if(D===4)for(D=g.return;D!==null;){var Y=D.tag;if((Y===3||Y===4)&&(Y=D.stateNode.containerInfo,Y===S||Y.nodeType===8&&Y.parentNode===S))return;D=D.return}for(;q!==null;){if(D=Pi(q),D===null)return;if(Y=D.tag,Y===5||Y===6){g=j=D;continue e}q=q.parentNode}}g=g.return}qv(function(){var ie=j,de=hf(f),he=[];e:{var ue=O0.get(o);if(ue!==void 0){var be=Nf,Te=o;switch(o){case"keypress":if(qc(f)===0)break e;case"keydown":case"keyup":be=KA;break;case"focusin":Te="focus",be=Pf;break;case"focusout":Te="blur",be=Pf;break;case"beforeblur":case"afterblur":be=Pf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=d0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=DA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=XA;break;case A0:case M0:case R0:be=zA;break;case I0:be=JA;break;case"scroll":be=IA;break;case"wheel":be=tM;break;case"copy":case"cut":case"paste":be=VA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=f0}var Ee=(l&4)!==0,zt=!Ee&&o==="scroll",J=Ee?ue!==null?ue+"Capture":null:ue;Ee=[];for(var Z=ie,ne;Z!==null;){ne=Z;var ge=ne.stateNode;if(ne.tag===5&&ge!==null&&(ne=ge,J!==null&&(ge=Vo(Z,J),ge!=null&&Ee.push(al(Z,ge,ne)))),zt)break;Z=Z.return}0<Ee.length&&(ue=new be(ue,Te,null,f,de),he.push({event:ue,listeners:Ee}))}}if((l&7)===0){e:{if(ue=o==="mouseover"||o==="pointerover",be=o==="mouseout"||o==="pointerout",ue&&f!==df&&(Te=f.relatedTarget||f.fromElement)&&(Pi(Te)||Te[fr]))break e;if((be||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,be?(Te=f.relatedTarget||f.toElement,be=ie,Te=Te?Pi(Te):null,Te!==null&&(zt=Ti(Te),Te!==zt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(be=null,Te=ie),be!==Te)){if(Ee=d0,ge="onMouseLeave",J="onMouseEnter",Z="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=f0,ge="onPointerLeave",J="onPointerEnter",Z="pointer"),zt=be==null?ue:Pa(be),ne=Te==null?ue:Pa(Te),ue=new Ee(ge,Z+"leave",be,f,de),ue.target=zt,ue.relatedTarget=ne,ge=null,Pi(de)===ie&&(Ee=new Ee(J,Z+"enter",Te,f,de),Ee.target=ne,Ee.relatedTarget=zt,ge=Ee),zt=ge,be&&Te)t:{for(Ee=be,J=Te,Z=0,ne=Ee;ne;ne=ka(ne))Z++;for(ne=0,ge=J;ge;ge=ka(ge))ne++;for(;0<Z-ne;)Ee=ka(Ee),Z--;for(;0<ne-Z;)J=ka(J),ne--;for(;Z--;){if(Ee===J||J!==null&&Ee===J.alternate)break t;Ee=ka(Ee),J=ka(J)}Ee=null}else Ee=null;be!==null&&B0(he,ue,be,Ee,!1),Te!==null&&zt!==null&&B0(he,zt,Te,Ee,!0)}}e:{if(ue=ie?Pa(ie):window,be=ue.nodeName&&ue.nodeName.toLowerCase(),be==="select"||be==="input"&&ue.type==="file")var Ae=lM;else if(v0(ue))if(w0)Ae=hM;else{Ae=uM;var Le=cM}else(be=ue.nodeName)&&be.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Ae=dM);if(Ae&&(Ae=Ae(o,ie))){b0(he,Ae,f,de);break e}Le&&Le(o,ue,ie),o==="focusout"&&(Le=ue._wrapperState)&&Le.controlled&&ue.type==="number"&&Ye(ue,"number",ue.value)}switch(Le=ie?Pa(ie):window,o){case"focusin":(v0(Le)||Le.contentEditable==="true")&&(ja=Le,Of=ie,sl=null);break;case"focusout":sl=Of=ja=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,P0(he,f,de);break;case"selectionchange":if(mM)break;case"keydown":case"keyup":P0(he,f,de)}var ze;if(Af)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ca?y0(o,f)&&(Ue="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ue="onCompositionStart");Ue&&(p0&&f.locale!=="ko"&&(Ca||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ca&&(ze=c0()):(Vr=de,jf="value"in Vr?Vr.value:Vr.textContent,Ca=!0)),Le=Xc(ie,Ue),0<Le.length&&(Ue=new h0(Ue,o,null,f,de),he.push({event:Ue,listeners:Le}),ze?Ue.data=ze:(ze=x0(f),ze!==null&&(Ue.data=ze)))),(ze=sM?rM(o,f):iM(o,f))&&(ie=Xc(ie,"onBeforeInput"),0<ie.length&&(de=new h0("onBeforeInput","beforeinput",null,f,de),he.push({event:de,listeners:ie}),de.data=ze))}L0(he,l)})}function al(o,l,f){return{instance:o,listener:l,currentTarget:f}}function Xc(o,l){for(var f=l+"Capture",g=[];o!==null;){var S=o,j=S.stateNode;S.tag===5&&j!==null&&(S=j,j=Vo(o,f),j!=null&&g.unshift(al(o,j,S)),j=Vo(o,l),j!=null&&g.push(al(o,j,S))),o=o.return}return g}function ka(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function B0(o,l,f,g,S){for(var j=l._reactName,D=[];f!==null&&f!==g;){var q=f,Y=q.alternate,ie=q.stateNode;if(Y!==null&&Y===g)break;q.tag===5&&ie!==null&&(q=ie,S?(Y=Vo(f,j),Y!=null&&D.unshift(al(f,Y,q))):S||(Y=Vo(f,j),Y!=null&&D.push(al(f,Y,q)))),f=f.return}D.length!==0&&o.push({event:l,listeners:D})}var vM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function V0(o){return(typeof o=="string"?o:""+o).replace(vM,`
`).replace(bM,"")}function Zc(o,l,f){if(l=V0(l),V0(o)!==l&&f)throw Error(t(425))}function Jc(){}var Uf=null,$f=null;function qf(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,SM=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(o){return U0.resolve(null).then(o).catch(_M)}:Wf;function _M(o){setTimeout(function(){throw o})}function Gf(o,l){var f=l,g=0;do{var S=f.nextSibling;if(o.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(g===0){o.removeChild(S),Yo(l);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=S}while(f);Yo(l)}function $r(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function $0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Ta,ol="__reactProps$"+Ta,fr="__reactContainer$"+Ta,Hf="__reactEvents$"+Ta,CM="__reactListeners$"+Ta,jM="__reactHandles$"+Ta;function Pi(o){var l=o[Ws];if(l)return l;for(var f=o.parentNode;f;){if(l=f[fr]||f[Ws]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=$0(o);o!==null;){if(f=o[Ws])return f;o=$0(o)}return l}o=f,f=o.parentNode}return null}function ll(o){return o=o[Ws]||o[fr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Pa(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function eu(o){return o[ol]||null}var Kf=[],Ea=-1;function qr(o){return{current:o}}function bt(o){0>Ea||(o.current=Kf[Ea],Kf[Ea]=null,Ea--)}function gt(o,l){Ea++,Kf[Ea]=o.current,o.current=l}var Wr={},mn=qr(Wr),In=qr(!1),Ei=Wr;function Aa(o,l){var f=o.type.contextTypes;if(!f)return Wr;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var S={},j;for(j in f)S[j]=l[j];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=S),S}function On(o){return o=o.childContextTypes,o!=null}function tu(){bt(In),bt(mn)}function q0(o,l,f){if(mn.current!==Wr)throw Error(t(168));gt(mn,l),gt(In,f)}function W0(o,l,f){var g=o.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var S in g)if(!(S in l))throw Error(t(108,Q(o)||"Unknown",S));return ee({},f,g)}function nu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Wr,Ei=mn.current,gt(mn,o),gt(In,In.current),!0}function G0(o,l,f){var g=o.stateNode;if(!g)throw Error(t(169));f?(o=W0(o,l,Ei),g.__reactInternalMemoizedMergedChildContext=o,bt(In),bt(mn),gt(mn,o)):bt(In),gt(In,f)}var pr=null,su=!1,Qf=!1;function H0(o){pr===null?pr=[o]:pr.push(o)}function NM(o){su=!0,H0(o)}function Gr(){if(!Qf&&pr!==null){Qf=!0;var o=0,l=dt;try{var f=pr;for(dt=1;o<f.length;o++){var g=f[o];do g=g(!0);while(g!==null)}pr=null,su=!1}catch(S){throw pr!==null&&(pr=pr.slice(o+1)),Qv(yf,Gr),S}finally{dt=l,Qf=!1}}return null}var Ma=[],Ra=0,ru=null,iu=0,ns=[],ss=0,Ai=null,mr=1,gr="";function Mi(o,l){Ma[Ra++]=iu,Ma[Ra++]=ru,ru=o,iu=l}function K0(o,l,f){ns[ss++]=mr,ns[ss++]=gr,ns[ss++]=Ai,Ai=o;var g=mr;o=gr;var S=32-gs(g)-1;g&=~(1<<S),f+=1;var j=32-gs(l)+S;if(30<j){var D=S-S%5;j=(g&(1<<D)-1).toString(32),g>>=D,S-=D,mr=1<<32-gs(l)+S|f<<S|g,gr=j+o}else mr=1<<j|f<<S|g,gr=o}function Yf(o){o.return!==null&&(Mi(o,1),K0(o,1,0))}function Xf(o){for(;o===ru;)ru=Ma[--Ra],Ma[Ra]=null,iu=Ma[--Ra],Ma[Ra]=null;for(;o===Ai;)Ai=ns[--ss],ns[ss]=null,gr=ns[--ss],ns[ss]=null,mr=ns[--ss],ns[ss]=null}var Gn=null,Hn=null,_t=!1,xs=null;function Q0(o,l){var f=os(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=o,l=o.deletions,l===null?(o.deletions=[f],o.flags|=16):l.push(f)}function Y0(o,l){switch(o.tag){case 5:var f=o.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Gn=o,Hn=$r(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Gn=o,Hn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=Ai!==null?{id:mr,overflow:gr}:null,o.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=os(18,null,null,0),f.stateNode=l,f.return=o,o.child=f,Gn=o,Hn=null,!0):!1;default:return!1}}function Zf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Jf(o){if(_t){var l=Hn;if(l){var f=l;if(!Y0(o,l)){if(Zf(o))throw Error(t(418));l=$r(f.nextSibling);var g=Gn;l&&Y0(o,l)?Q0(g,f):(o.flags=o.flags&-4097|2,_t=!1,Gn=o)}}else{if(Zf(o))throw Error(t(418));o.flags=o.flags&-4097|2,_t=!1,Gn=o}}}function X0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Gn=o}function au(o){if(o!==Gn)return!1;if(!_t)return X0(o),_t=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!qf(o.type,o.memoizedProps)),l&&(l=Hn)){if(Zf(o))throw Z0(),Error(t(418));for(;l;)Q0(o,l),l=$r(l.nextSibling)}if(X0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(l===0){Hn=$r(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}o=o.nextSibling}Hn=null}}else Hn=Gn?$r(o.stateNode.nextSibling):null;return!0}function Z0(){for(var o=Hn;o;)o=$r(o.nextSibling)}function Ia(){Hn=Gn=null,_t=!1}function ep(o){xs===null?xs=[o]:xs.push(o)}var kM=A.ReactCurrentBatchConfig;function cl(o,l,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,o));var S=g,j=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===j?l.ref:(l=function(D){var q=S.refs;D===null?delete q[j]:q[j]=D},l._stringRef=j,l)}if(typeof o!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,o))}return o}function ou(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function J0(o){var l=o._init;return l(o._payload)}function eb(o){function l(J,Z){if(o){var ne=J.deletions;ne===null?(J.deletions=[Z],J.flags|=16):ne.push(Z)}}function f(J,Z){if(!o)return null;for(;Z!==null;)l(J,Z),Z=Z.sibling;return null}function g(J,Z){for(J=new Map;Z!==null;)Z.key!==null?J.set(Z.key,Z):J.set(Z.index,Z),Z=Z.sibling;return J}function S(J,Z){return J=ei(J,Z),J.index=0,J.sibling=null,J}function j(J,Z,ne){return J.index=ne,o?(ne=J.alternate,ne!==null?(ne=ne.index,ne<Z?(J.flags|=2,Z):ne):(J.flags|=2,Z)):(J.flags|=1048576,Z)}function D(J){return o&&J.alternate===null&&(J.flags|=2),J}function q(J,Z,ne,ge){return Z===null||Z.tag!==6?(Z=Wp(ne,J.mode,ge),Z.return=J,Z):(Z=S(Z,ne),Z.return=J,Z)}function Y(J,Z,ne,ge){var Ae=ne.type;return Ae===E?de(J,Z,ne.props.children,ge,ne.key):Z!==null&&(Z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===G&&J0(Ae)===Z.type)?(ge=S(Z,ne.props),ge.ref=cl(J,Z,ne),ge.return=J,ge):(ge=Au(ne.type,ne.key,ne.props,null,J.mode,ge),ge.ref=cl(J,Z,ne),ge.return=J,ge)}function ie(J,Z,ne,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=Gp(ne,J.mode,ge),Z.return=J,Z):(Z=S(Z,ne.children||[]),Z.return=J,Z)}function de(J,Z,ne,ge,Ae){return Z===null||Z.tag!==7?(Z=Bi(ne,J.mode,ge,Ae),Z.return=J,Z):(Z=S(Z,ne),Z.return=J,Z)}function he(J,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Wp(""+Z,J.mode,ne),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case k:return ne=Au(Z.type,Z.key,Z.props,null,J.mode,ne),ne.ref=cl(J,null,Z),ne.return=J,ne;case M:return Z=Gp(Z,J.mode,ne),Z.return=J,Z;case G:var ge=Z._init;return he(J,ge(Z._payload),ne)}if(Je(Z)||H(Z))return Z=Bi(Z,J.mode,ne,null),Z.return=J,Z;ou(J,Z)}return null}function ue(J,Z,ne,ge){var Ae=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Ae!==null?null:q(J,Z,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return ne.key===Ae?Y(J,Z,ne,ge):null;case M:return ne.key===Ae?ie(J,Z,ne,ge):null;case G:return Ae=ne._init,ue(J,Z,Ae(ne._payload),ge)}if(Je(ne)||H(ne))return Ae!==null?null:de(J,Z,ne,ge,null);ou(J,ne)}return null}function be(J,Z,ne,ge,Ae){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return J=J.get(ne)||null,q(Z,J,""+ge,Ae);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case k:return J=J.get(ge.key===null?ne:ge.key)||null,Y(Z,J,ge,Ae);case M:return J=J.get(ge.key===null?ne:ge.key)||null,ie(Z,J,ge,Ae);case G:var Le=ge._init;return be(J,Z,ne,Le(ge._payload),Ae)}if(Je(ge)||H(ge))return J=J.get(ne)||null,de(Z,J,ge,Ae,null);ou(Z,ge)}return null}function Te(J,Z,ne,ge){for(var Ae=null,Le=null,ze=Z,Ue=Z=0,an=null;ze!==null&&Ue<ne.length;Ue++){ze.index>Ue?(an=ze,ze=null):an=ze.sibling;var at=ue(J,ze,ne[Ue],ge);if(at===null){ze===null&&(ze=an);break}o&&ze&&at.alternate===null&&l(J,ze),Z=j(at,Z,Ue),Le===null?Ae=at:Le.sibling=at,Le=at,ze=an}if(Ue===ne.length)return f(J,ze),_t&&Mi(J,Ue),Ae;if(ze===null){for(;Ue<ne.length;Ue++)ze=he(J,ne[Ue],ge),ze!==null&&(Z=j(ze,Z,Ue),Le===null?Ae=ze:Le.sibling=ze,Le=ze);return _t&&Mi(J,Ue),Ae}for(ze=g(J,ze);Ue<ne.length;Ue++)an=be(ze,J,Ue,ne[Ue],ge),an!==null&&(o&&an.alternate!==null&&ze.delete(an.key===null?Ue:an.key),Z=j(an,Z,Ue),Le===null?Ae=an:Le.sibling=an,Le=an);return o&&ze.forEach(function(ti){return l(J,ti)}),_t&&Mi(J,Ue),Ae}function Ee(J,Z,ne,ge){var Ae=H(ne);if(typeof Ae!="function")throw Error(t(150));if(ne=Ae.call(ne),ne==null)throw Error(t(151));for(var Le=Ae=null,ze=Z,Ue=Z=0,an=null,at=ne.next();ze!==null&&!at.done;Ue++,at=ne.next()){ze.index>Ue?(an=ze,ze=null):an=ze.sibling;var ti=ue(J,ze,at.value,ge);if(ti===null){ze===null&&(ze=an);break}o&&ze&&ti.alternate===null&&l(J,ze),Z=j(ti,Z,Ue),Le===null?Ae=ti:Le.sibling=ti,Le=ti,ze=an}if(at.done)return f(J,ze),_t&&Mi(J,Ue),Ae;if(ze===null){for(;!at.done;Ue++,at=ne.next())at=he(J,at.value,ge),at!==null&&(Z=j(at,Z,Ue),Le===null?Ae=at:Le.sibling=at,Le=at);return _t&&Mi(J,Ue),Ae}for(ze=g(J,ze);!at.done;Ue++,at=ne.next())at=be(ze,J,Ue,at.value,ge),at!==null&&(o&&at.alternate!==null&&ze.delete(at.key===null?Ue:at.key),Z=j(at,Z,Ue),Le===null?Ae=at:Le.sibling=at,Le=at);return o&&ze.forEach(function(aR){return l(J,aR)}),_t&&Mi(J,Ue),Ae}function zt(J,Z,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===E&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:e:{for(var Ae=ne.key,Le=Z;Le!==null;){if(Le.key===Ae){if(Ae=ne.type,Ae===E){if(Le.tag===7){f(J,Le.sibling),Z=S(Le,ne.props.children),Z.return=J,J=Z;break e}}else if(Le.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===G&&J0(Ae)===Le.type){f(J,Le.sibling),Z=S(Le,ne.props),Z.ref=cl(J,Le,ne),Z.return=J,J=Z;break e}f(J,Le);break}else l(J,Le);Le=Le.sibling}ne.type===E?(Z=Bi(ne.props.children,J.mode,ge,ne.key),Z.return=J,J=Z):(ge=Au(ne.type,ne.key,ne.props,null,J.mode,ge),ge.ref=cl(J,Z,ne),ge.return=J,J=ge)}return D(J);case M:e:{for(Le=ne.key;Z!==null;){if(Z.key===Le)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){f(J,Z.sibling),Z=S(Z,ne.children||[]),Z.return=J,J=Z;break e}else{f(J,Z);break}else l(J,Z);Z=Z.sibling}Z=Gp(ne,J.mode,ge),Z.return=J,J=Z}return D(J);case G:return Le=ne._init,zt(J,Z,Le(ne._payload),ge)}if(Je(ne))return Te(J,Z,ne,ge);if(H(ne))return Ee(J,Z,ne,ge);ou(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Z!==null&&Z.tag===6?(f(J,Z.sibling),Z=S(Z,ne),Z.return=J,J=Z):(f(J,Z),Z=Wp(ne,J.mode,ge),Z.return=J,J=Z),D(J)):f(J,Z)}return zt}var Oa=eb(!0),tb=eb(!1),lu=qr(null),cu=null,Da=null,tp=null;function np(){tp=Da=cu=null}function sp(o){var l=lu.current;bt(lu),o._currentValue=l}function rp(o,l,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===f)break;o=o.return}}function Fa(o,l){cu=o,tp=Da=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Dn=!0),o.firstContext=null)}function rs(o){var l=o._currentValue;if(tp!==o)if(o={context:o,memoizedValue:l,next:null},Da===null){if(cu===null)throw Error(t(308));Da=o,cu.dependencies={lanes:0,firstContext:o}}else Da=Da.next=o;return l}var Ri=null;function ip(o){Ri===null?Ri=[o]:Ri.push(o)}function nb(o,l,f,g){var S=l.interleaved;return S===null?(f.next=f,ip(l)):(f.next=S.next,S.next=f),l.interleaved=f,yr(o,g)}function yr(o,l){o.lanes|=l;var f=o.alternate;for(f!==null&&(f.lanes|=l),f=o,o=o.return;o!==null;)o.childLanes|=l,f=o.alternate,f!==null&&(f.childLanes|=l),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Hr=!1;function ap(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function xr(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Kr(o,l,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(nt&2)!==0){var S=g.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),g.pending=l,yr(o,f)}return S=g.interleaved,S===null?(l.next=l,ip(g)):(l.next=S.next,S.next=l),g.interleaved=l,yr(o,f)}function uu(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var g=l.lanes;g&=o.pendingLanes,f|=g,l.lanes=f,bf(o,f)}}function rb(o,l){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,j=null;if(f=f.firstBaseUpdate,f!==null){do{var D={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};j===null?S=j=D:j=j.next=D,f=f.next}while(f!==null);j===null?S=j=l:j=j.next=l}else S=j=l;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:j,shared:g.shared,effects:g.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}function du(o,l,f,g){var S=o.updateQueue;Hr=!1;var j=S.firstBaseUpdate,D=S.lastBaseUpdate,q=S.shared.pending;if(q!==null){S.shared.pending=null;var Y=q,ie=Y.next;Y.next=null,D===null?j=ie:D.next=ie,D=Y;var de=o.alternate;de!==null&&(de=de.updateQueue,q=de.lastBaseUpdate,q!==D&&(q===null?de.firstBaseUpdate=ie:q.next=ie,de.lastBaseUpdate=Y))}if(j!==null){var he=S.baseState;D=0,de=ie=Y=null,q=j;do{var ue=q.lane,be=q.eventTime;if((g&ue)===ue){de!==null&&(de=de.next={eventTime:be,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Te=o,Ee=q;switch(ue=l,be=f,Ee.tag){case 1:if(Te=Ee.payload,typeof Te=="function"){he=Te.call(be,he,ue);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ee.payload,ue=typeof Te=="function"?Te.call(be,he,ue):Te,ue==null)break e;he=ee({},he,ue);break e;case 2:Hr=!0}}q.callback!==null&&q.lane!==0&&(o.flags|=64,ue=S.effects,ue===null?S.effects=[q]:ue.push(q))}else be={eventTime:be,lane:ue,tag:q.tag,payload:q.payload,callback:q.callback,next:null},de===null?(ie=de=be,Y=he):de=de.next=be,D|=ue;if(q=q.next,q===null){if(q=S.shared.pending,q===null)break;ue=q,q=ue.next,ue.next=null,S.lastBaseUpdate=ue,S.shared.pending=null}}while(!0);if(de===null&&(Y=he),S.baseState=Y,S.firstBaseUpdate=ie,S.lastBaseUpdate=de,l=S.shared.interleaved,l!==null){S=l;do D|=S.lane,S=S.next;while(S!==l)}else j===null&&(S.shared.lanes=0);Di|=D,o.lanes=D,o.memoizedState=he}}function ib(o,l,f){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var g=o[l],S=g.callback;if(S!==null){if(g.callback=null,g=f,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var ul={},Gs=qr(ul),dl=qr(ul),hl=qr(ul);function Ii(o){if(o===ul)throw Error(t(174));return o}function op(o,l){switch(gt(hl,l),gt(dl,o),gt(Gs,ul),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:lf(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=lf(l,o)}bt(Gs),gt(Gs,l)}function La(){bt(Gs),bt(dl),bt(hl)}function ab(o){Ii(hl.current);var l=Ii(Gs.current),f=lf(l,o.type);l!==f&&(gt(dl,o),gt(Gs,f))}function lp(o){dl.current===o&&(bt(Gs),bt(dl))}var kt=qr(0);function hu(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var cp=[];function up(){for(var o=0;o<cp.length;o++)cp[o]._workInProgressVersionPrimary=null;cp.length=0}var fu=A.ReactCurrentDispatcher,dp=A.ReactCurrentBatchConfig,Oi=0,Tt=null,Jt=null,sn=null,pu=!1,fl=!1,pl=0,TM=0;function gn(){throw Error(t(321))}function hp(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!ys(o[f],l[f]))return!1;return!0}function fp(o,l,f,g,S,j){if(Oi=j,Tt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,fu.current=o===null||o.memoizedState===null?MM:RM,o=f(g,S),fl){j=0;do{if(fl=!1,pl=0,25<=j)throw Error(t(301));j+=1,sn=Jt=null,l.updateQueue=null,fu.current=IM,o=f(g,S)}while(fl)}if(fu.current=yu,l=Jt!==null&&Jt.next!==null,Oi=0,sn=Jt=Tt=null,pu=!1,l)throw Error(t(300));return o}function pp(){var o=pl!==0;return pl=0,o}function Hs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Tt.memoizedState=sn=o:sn=sn.next=o,sn}function is(){if(Jt===null){var o=Tt.alternate;o=o!==null?o.memoizedState:null}else o=Jt.next;var l=sn===null?Tt.memoizedState:sn.next;if(l!==null)sn=l,Jt=o;else{if(o===null)throw Error(t(310));Jt=o,o={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},sn===null?Tt.memoizedState=sn=o:sn=sn.next=o}return sn}function ml(o,l){return typeof l=="function"?l(o):l}function mp(o){var l=is(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=Jt,S=g.baseQueue,j=f.pending;if(j!==null){if(S!==null){var D=S.next;S.next=j.next,j.next=D}g.baseQueue=S=j,f.pending=null}if(S!==null){j=S.next,g=g.baseState;var q=D=null,Y=null,ie=j;do{var de=ie.lane;if((Oi&de)===de)Y!==null&&(Y=Y.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),g=ie.hasEagerState?ie.eagerState:o(g,ie.action);else{var he={lane:de,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};Y===null?(q=Y=he,D=g):Y=Y.next=he,Tt.lanes|=de,Di|=de}ie=ie.next}while(ie!==null&&ie!==j);Y===null?D=g:Y.next=q,ys(g,l.memoizedState)||(Dn=!0),l.memoizedState=g,l.baseState=D,l.baseQueue=Y,f.lastRenderedState=g}if(o=f.interleaved,o!==null){S=o;do j=S.lane,Tt.lanes|=j,Di|=j,S=S.next;while(S!==o)}else S===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function gp(o){var l=is(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=o;var g=f.dispatch,S=f.pending,j=l.memoizedState;if(S!==null){f.pending=null;var D=S=S.next;do j=o(j,D.action),D=D.next;while(D!==S);ys(j,l.memoizedState)||(Dn=!0),l.memoizedState=j,l.baseQueue===null&&(l.baseState=j),f.lastRenderedState=j}return[j,g]}function ob(){}function lb(o,l){var f=Tt,g=is(),S=l(),j=!ys(g.memoizedState,S);if(j&&(g.memoizedState=S,Dn=!0),g=g.queue,yp(db.bind(null,f,g,o),[o]),g.getSnapshot!==l||j||sn!==null&&sn.memoizedState.tag&1){if(f.flags|=2048,gl(9,ub.bind(null,f,g,S,l),void 0,null),rn===null)throw Error(t(349));(Oi&30)!==0||cb(f,l,S)}return S}function cb(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=Tt.updateQueue,l===null?(l={lastEffect:null,stores:null},Tt.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function ub(o,l,f,g){l.value=f,l.getSnapshot=g,hb(l)&&fb(o)}function db(o,l,f){return f(function(){hb(l)&&fb(o)})}function hb(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!ys(o,f)}catch{return!0}}function fb(o){var l=yr(o,1);l!==null&&Ss(l,o,1,-1)}function pb(o){var l=Hs();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:o},l.queue=o,o=o.dispatch=AM.bind(null,Tt,o),[l.memoizedState,o]}function gl(o,l,f,g){return o={tag:o,create:l,destroy:f,deps:g,next:null},l=Tt.updateQueue,l===null?(l={lastEffect:null,stores:null},Tt.updateQueue=l,l.lastEffect=o.next=o):(f=l.lastEffect,f===null?l.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,l.lastEffect=o)),o}function mb(){return is().memoizedState}function mu(o,l,f,g){var S=Hs();Tt.flags|=o,S.memoizedState=gl(1|l,f,void 0,g===void 0?null:g)}function gu(o,l,f,g){var S=is();g=g===void 0?null:g;var j=void 0;if(Jt!==null){var D=Jt.memoizedState;if(j=D.destroy,g!==null&&hp(g,D.deps)){S.memoizedState=gl(l,f,j,g);return}}Tt.flags|=o,S.memoizedState=gl(1|l,f,j,g)}function gb(o,l){return mu(8390656,8,o,l)}function yp(o,l){return gu(2048,8,o,l)}function yb(o,l){return gu(4,2,o,l)}function xb(o,l){return gu(4,4,o,l)}function vb(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function bb(o,l,f){return f=f!=null?f.concat([o]):null,gu(4,4,vb.bind(null,l,o),f)}function xp(){}function wb(o,l){var f=is();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&hp(l,g[1])?g[0]:(f.memoizedState=[o,l],o)}function Sb(o,l){var f=is();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&hp(l,g[1])?g[0]:(o=o(),f.memoizedState=[o,l],o)}function _b(o,l,f){return(Oi&21)===0?(o.baseState&&(o.baseState=!1,Dn=!0),o.memoizedState=f):(ys(f,l)||(f=Jv(),Tt.lanes|=f,Di|=f,o.baseState=!0),l)}function PM(o,l){var f=dt;dt=f!==0&&4>f?f:4,o(!0);var g=dp.transition;dp.transition={};try{o(!1),l()}finally{dt=f,dp.transition=g}}function Cb(){return is().memoizedState}function EM(o,l,f){var g=Zr(o);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},jb(o))Nb(l,f);else if(f=nb(o,l,f,g),f!==null){var S=jn();Ss(f,o,g,S),kb(f,l,g)}}function AM(o,l,f){var g=Zr(o),S={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(jb(o))Nb(l,S);else{var j=o.alternate;if(o.lanes===0&&(j===null||j.lanes===0)&&(j=l.lastRenderedReducer,j!==null))try{var D=l.lastRenderedState,q=j(D,f);if(S.hasEagerState=!0,S.eagerState=q,ys(q,D)){var Y=l.interleaved;Y===null?(S.next=S,ip(l)):(S.next=Y.next,Y.next=S),l.interleaved=S;return}}catch{}finally{}f=nb(o,l,S,g),f!==null&&(S=jn(),Ss(f,o,g,S),kb(f,l,g))}}function jb(o){var l=o.alternate;return o===Tt||l!==null&&l===Tt}function Nb(o,l){fl=pu=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function kb(o,l,f){if((f&4194240)!==0){var g=l.lanes;g&=o.pendingLanes,f|=g,l.lanes=f,bf(o,f)}}var yu={readContext:rs,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},MM={readContext:rs,useCallback:function(o,l){return Hs().memoizedState=[o,l===void 0?null:l],o},useContext:rs,useEffect:gb,useImperativeHandle:function(o,l,f){return f=f!=null?f.concat([o]):null,mu(4194308,4,vb.bind(null,l,o),f)},useLayoutEffect:function(o,l){return mu(4194308,4,o,l)},useInsertionEffect:function(o,l){return mu(4,2,o,l)},useMemo:function(o,l){var f=Hs();return l=l===void 0?null:l,o=o(),f.memoizedState=[o,l],o},useReducer:function(o,l,f){var g=Hs();return l=f!==void 0?f(l):l,g.memoizedState=g.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},g.queue=o,o=o.dispatch=EM.bind(null,Tt,o),[g.memoizedState,o]},useRef:function(o){var l=Hs();return o={current:o},l.memoizedState=o},useState:pb,useDebugValue:xp,useDeferredValue:function(o){return Hs().memoizedState=o},useTransition:function(){var o=pb(!1),l=o[0];return o=PM.bind(null,o[1]),Hs().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,f){var g=Tt,S=Hs();if(_t){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),rn===null)throw Error(t(349));(Oi&30)!==0||cb(g,l,f)}S.memoizedState=f;var j={value:f,getSnapshot:l};return S.queue=j,gb(db.bind(null,g,j,o),[o]),g.flags|=2048,gl(9,ub.bind(null,g,j,f,l),void 0,null),f},useId:function(){var o=Hs(),l=rn.identifierPrefix;if(_t){var f=gr,g=mr;f=(g&~(1<<32-gs(g)-1)).toString(32)+f,l=":"+l+"R"+f,f=pl++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=TM++,l=":"+l+"r"+f.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},RM={readContext:rs,useCallback:wb,useContext:rs,useEffect:yp,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:xb,useMemo:Sb,useReducer:mp,useRef:mb,useState:function(){return mp(ml)},useDebugValue:xp,useDeferredValue:function(o){var l=is();return _b(l,Jt.memoizedState,o)},useTransition:function(){var o=mp(ml)[0],l=is().memoizedState;return[o,l]},useMutableSource:ob,useSyncExternalStore:lb,useId:Cb,unstable_isNewReconciler:!1},IM={readContext:rs,useCallback:wb,useContext:rs,useEffect:yp,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:xb,useMemo:Sb,useReducer:gp,useRef:mb,useState:function(){return gp(ml)},useDebugValue:xp,useDeferredValue:function(o){var l=is();return Jt===null?l.memoizedState=o:_b(l,Jt.memoizedState,o)},useTransition:function(){var o=gp(ml)[0],l=is().memoizedState;return[o,l]},useMutableSource:ob,useSyncExternalStore:lb,useId:Cb,unstable_isNewReconciler:!1};function vs(o,l){if(o&&o.defaultProps){l=ee({},l),o=o.defaultProps;for(var f in o)l[f]===void 0&&(l[f]=o[f]);return l}return l}function vp(o,l,f,g){l=o.memoizedState,f=f(g,l),f=f==null?l:ee({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var xu={isMounted:function(o){return(o=o._reactInternals)?Ti(o)===o:!1},enqueueSetState:function(o,l,f){o=o._reactInternals;var g=jn(),S=Zr(o),j=xr(g,S);j.payload=l,f!=null&&(j.callback=f),l=Kr(o,j,S),l!==null&&(Ss(l,o,S,g),uu(l,o,S))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var g=jn(),S=Zr(o),j=xr(g,S);j.tag=1,j.payload=l,f!=null&&(j.callback=f),l=Kr(o,j,S),l!==null&&(Ss(l,o,S,g),uu(l,o,S))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=jn(),g=Zr(o),S=xr(f,g);S.tag=2,l!=null&&(S.callback=l),l=Kr(o,S,g),l!==null&&(Ss(l,o,g,f),uu(l,o,g))}};function Tb(o,l,f,g,S,j,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,j,D):l.prototype&&l.prototype.isPureReactComponent?!nl(f,g)||!nl(S,j):!0}function Pb(o,l,f){var g=!1,S=Wr,j=l.contextType;return typeof j=="object"&&j!==null?j=rs(j):(S=On(l)?Ei:mn.current,g=l.contextTypes,j=(g=g!=null)?Aa(o,S):Wr),l=new l(f,j),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=xu,o.stateNode=l,l._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=S,o.__reactInternalMemoizedMaskedChildContext=j),l}function Eb(o,l,f,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==o&&xu.enqueueReplaceState(l,l.state,null)}function bp(o,l,f,g){var S=o.stateNode;S.props=f,S.state=o.memoizedState,S.refs={},ap(o);var j=l.contextType;typeof j=="object"&&j!==null?S.context=rs(j):(j=On(l)?Ei:mn.current,S.context=Aa(o,j)),S.state=o.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(vp(o,l,j,f),S.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&xu.enqueueReplaceState(S,S.state,null),du(o,f,S,g),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308)}function za(o,l){try{var f="",g=l;do f+=ae(g),g=g.return;while(g);var S=f}catch(j){S=`
Error generating stack: `+j.message+`
`+j.stack}return{value:o,source:l,stack:S,digest:null}}function wp(o,l,f){return{value:o,source:null,stack:f??null,digest:l??null}}function Sp(o,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var OM=typeof WeakMap=="function"?WeakMap:Map;function Ab(o,l,f){f=xr(-1,f),f.tag=3,f.payload={element:null};var g=l.value;return f.callback=function(){ju||(ju=!0,Fp=g),Sp(o,l)},f}function Mb(o,l,f){f=xr(-1,f),f.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var S=l.value;f.payload=function(){return g(S)},f.callback=function(){Sp(o,l)}}var j=o.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(f.callback=function(){Sp(o,l),typeof g!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})}),f}function Rb(o,l,f){var g=o.pingCache;if(g===null){g=o.pingCache=new OM;var S=new Set;g.set(l,S)}else S=g.get(l),S===void 0&&(S=new Set,g.set(l,S));S.has(f)||(S.add(f),o=QM.bind(null,o,l,f),l.then(o,o))}function Ib(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Ob(o,l,f,g,S){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=xr(-1,1),l.tag=2,Kr(f,l,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=S,o)}var DM=A.ReactCurrentOwner,Dn=!1;function Cn(o,l,f,g){l.child=o===null?tb(l,null,f,g):Oa(l,o.child,f,g)}function Db(o,l,f,g,S){f=f.render;var j=l.ref;return Fa(l,S),g=fp(o,l,f,g,j,S),f=pp(),o!==null&&!Dn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~S,vr(o,l,S)):(_t&&f&&Yf(l),l.flags|=1,Cn(o,l,g,S),l.child)}function Fb(o,l,f,g,S){if(o===null){var j=f.type;return typeof j=="function"&&!qp(j)&&j.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=j,Lb(o,l,j,g,S)):(o=Au(f.type,null,g,l,l.mode,S),o.ref=l.ref,o.return=l,l.child=o)}if(j=o.child,(o.lanes&S)===0){var D=j.memoizedProps;if(f=f.compare,f=f!==null?f:nl,f(D,g)&&o.ref===l.ref)return vr(o,l,S)}return l.flags|=1,o=ei(j,g),o.ref=l.ref,o.return=l,l.child=o}function Lb(o,l,f,g,S){if(o!==null){var j=o.memoizedProps;if(nl(j,g)&&o.ref===l.ref)if(Dn=!1,l.pendingProps=g=j,(o.lanes&S)!==0)(o.flags&131072)!==0&&(Dn=!0);else return l.lanes=o.lanes,vr(o,l,S)}return _p(o,l,f,g,S)}function zb(o,l,f){var g=l.pendingProps,S=g.children,j=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Va,Kn),Kn|=f;else{if((f&1073741824)===0)return o=j!==null?j.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,gt(Va,Kn),Kn|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=j!==null?j.baseLanes:f,gt(Va,Kn),Kn|=g}else j!==null?(g=j.baseLanes|f,l.memoizedState=null):g=f,gt(Va,Kn),Kn|=g;return Cn(o,l,S,f),l.child}function Bb(o,l){var f=l.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function _p(o,l,f,g,S){var j=On(f)?Ei:mn.current;return j=Aa(l,j),Fa(l,S),f=fp(o,l,f,g,j,S),g=pp(),o!==null&&!Dn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~S,vr(o,l,S)):(_t&&g&&Yf(l),l.flags|=1,Cn(o,l,f,S),l.child)}function Vb(o,l,f,g,S){if(On(f)){var j=!0;nu(l)}else j=!1;if(Fa(l,S),l.stateNode===null)bu(o,l),Pb(l,f,g),bp(l,f,g,S),g=!0;else if(o===null){var D=l.stateNode,q=l.memoizedProps;D.props=q;var Y=D.context,ie=f.contextType;typeof ie=="object"&&ie!==null?ie=rs(ie):(ie=On(f)?Ei:mn.current,ie=Aa(l,ie));var de=f.getDerivedStateFromProps,he=typeof de=="function"||typeof D.getSnapshotBeforeUpdate=="function";he||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==g||Y!==ie)&&Eb(l,D,g,ie),Hr=!1;var ue=l.memoizedState;D.state=ue,du(l,g,D,S),Y=l.memoizedState,q!==g||ue!==Y||In.current||Hr?(typeof de=="function"&&(vp(l,f,de,g),Y=l.memoizedState),(q=Hr||Tb(l,f,q,g,ue,Y,ie))?(he||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Y),D.props=g,D.state=Y,D.context=ie,g=q):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{D=l.stateNode,sb(o,l),q=l.memoizedProps,ie=l.type===l.elementType?q:vs(l.type,q),D.props=ie,he=l.pendingProps,ue=D.context,Y=f.contextType,typeof Y=="object"&&Y!==null?Y=rs(Y):(Y=On(f)?Ei:mn.current,Y=Aa(l,Y));var be=f.getDerivedStateFromProps;(de=typeof be=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==he||ue!==Y)&&Eb(l,D,g,Y),Hr=!1,ue=l.memoizedState,D.state=ue,du(l,g,D,S);var Te=l.memoizedState;q!==he||ue!==Te||In.current||Hr?(typeof be=="function"&&(vp(l,f,be,g),Te=l.memoizedState),(ie=Hr||Tb(l,f,ie,g,ue,Te,Y)||!1)?(de||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(g,Te,Y),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(g,Te,Y)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||q===o.memoizedProps&&ue===o.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&ue===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Te),D.props=g,D.state=Te,D.context=Y,g=ie):(typeof D.componentDidUpdate!="function"||q===o.memoizedProps&&ue===o.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&ue===o.memoizedState||(l.flags|=1024),g=!1)}return Cp(o,l,f,g,j,S)}function Cp(o,l,f,g,S,j){Bb(o,l);var D=(l.flags&128)!==0;if(!g&&!D)return S&&G0(l,f,!1),vr(o,l,j);g=l.stateNode,DM.current=l;var q=D&&typeof f.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,o!==null&&D?(l.child=Oa(l,o.child,null,j),l.child=Oa(l,null,q,j)):Cn(o,l,q,j),l.memoizedState=g.state,S&&G0(l,f,!0),l.child}function Ub(o){var l=o.stateNode;l.pendingContext?q0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&q0(o,l.context,!1),op(o,l.containerInfo)}function $b(o,l,f,g,S){return Ia(),ep(S),l.flags|=256,Cn(o,l,f,g),l.child}var jp={dehydrated:null,treeContext:null,retryLane:0};function Np(o){return{baseLanes:o,cachePool:null,transitions:null}}function qb(o,l,f){var g=l.pendingProps,S=kt.current,j=!1,D=(l.flags&128)!==0,q;if((q=D)||(q=o!==null&&o.memoizedState===null?!1:(S&2)!==0),q?(j=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(S|=1),gt(kt,S&1),o===null)return Jf(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(D=g.children,o=g.fallback,j?(g=l.mode,j=l.child,D={mode:"hidden",children:D},(g&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=D):j=Mu(D,g,0,null),o=Bi(o,g,f,null),j.return=l,o.return=l,j.sibling=o,l.child=j,l.child.memoizedState=Np(f),l.memoizedState=jp,o):kp(l,D));if(S=o.memoizedState,S!==null&&(q=S.dehydrated,q!==null))return FM(o,l,D,g,q,S,f);if(j){j=g.fallback,D=l.mode,S=o.child,q=S.sibling;var Y={mode:"hidden",children:g.children};return(D&1)===0&&l.child!==S?(g=l.child,g.childLanes=0,g.pendingProps=Y,l.deletions=null):(g=ei(S,Y),g.subtreeFlags=S.subtreeFlags&14680064),q!==null?j=ei(q,j):(j=Bi(j,D,f,null),j.flags|=2),j.return=l,g.return=l,g.sibling=j,l.child=g,g=j,j=l.child,D=o.child.memoizedState,D=D===null?Np(f):{baseLanes:D.baseLanes|f,cachePool:null,transitions:D.transitions},j.memoizedState=D,j.childLanes=o.childLanes&~f,l.memoizedState=jp,g}return j=o.child,o=j.sibling,g=ei(j,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=f),g.return=l,g.sibling=null,o!==null&&(f=l.deletions,f===null?(l.deletions=[o],l.flags|=16):f.push(o)),l.child=g,l.memoizedState=null,g}function kp(o,l){return l=Mu({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function vu(o,l,f,g){return g!==null&&ep(g),Oa(l,o.child,null,f),o=kp(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function FM(o,l,f,g,S,j,D){if(f)return l.flags&256?(l.flags&=-257,g=wp(Error(t(422))),vu(o,l,D,g)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(j=g.fallback,S=l.mode,g=Mu({mode:"visible",children:g.children},S,0,null),j=Bi(j,S,D,null),j.flags|=2,g.return=l,j.return=l,g.sibling=j,l.child=g,(l.mode&1)!==0&&Oa(l,o.child,null,D),l.child.memoizedState=Np(D),l.memoizedState=jp,j);if((l.mode&1)===0)return vu(o,l,D,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var q=g.dgst;return g=q,j=Error(t(419)),g=wp(j,g,void 0),vu(o,l,D,g)}if(q=(D&o.childLanes)!==0,Dn||q){if(g=rn,g!==null){switch(D&-D){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|D))!==0?0:S,S!==0&&S!==j.retryLane&&(j.retryLane=S,yr(o,S),Ss(g,o,S,-1))}return $p(),g=wp(Error(t(421))),vu(o,l,D,g)}return S.data==="$?"?(l.flags|=128,l.child=o.child,l=YM.bind(null,o),S._reactRetry=l,null):(o=j.treeContext,Hn=$r(S.nextSibling),Gn=l,_t=!0,xs=null,o!==null&&(ns[ss++]=mr,ns[ss++]=gr,ns[ss++]=Ai,mr=o.id,gr=o.overflow,Ai=l),l=kp(l,g.children),l.flags|=4096,l)}function Wb(o,l,f){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),rp(o.return,l,f)}function Tp(o,l,f,g,S){var j=o.memoizedState;j===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=g,j.tail=f,j.tailMode=S)}function Gb(o,l,f){var g=l.pendingProps,S=g.revealOrder,j=g.tail;if(Cn(o,l,g.children,f),g=kt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Wb(o,f,l);else if(o.tag===19)Wb(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(gt(kt,g),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(f=l.child,S=null;f!==null;)o=f.alternate,o!==null&&hu(o)===null&&(S=f),f=f.sibling;f=S,f===null?(S=l.child,l.child=null):(S=f.sibling,f.sibling=null),Tp(l,!1,S,f,j);break;case"backwards":for(f=null,S=l.child,l.child=null;S!==null;){if(o=S.alternate,o!==null&&hu(o)===null){l.child=S;break}o=S.sibling,S.sibling=f,f=S,S=o}Tp(l,!0,f,null,j);break;case"together":Tp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function bu(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function vr(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),Di|=l.lanes,(f&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,f=ei(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=ei(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function LM(o,l,f){switch(l.tag){case 3:Ub(l),Ia();break;case 5:ab(l);break;case 1:On(l.type)&&nu(l);break;case 4:op(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,S=l.memoizedProps.value;gt(lu,g._currentValue),g._currentValue=S;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(gt(kt,kt.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?qb(o,l,f):(gt(kt,kt.current&1),o=vr(o,l,f),o!==null?o.sibling:null);gt(kt,kt.current&1);break;case 19:if(g=(f&l.childLanes)!==0,(o.flags&128)!==0){if(g)return Gb(o,l,f);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),gt(kt,kt.current),g)break;return null;case 22:case 23:return l.lanes=0,zb(o,l,f)}return vr(o,l,f)}var Hb,Pp,Kb,Qb;Hb=function(o,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Pp=function(){},Kb=function(o,l,f,g){var S=o.memoizedProps;if(S!==g){o=l.stateNode,Ii(Gs.current);var j=null;switch(f){case"input":S=Me(o,S),g=Me(o,g),j=[];break;case"select":S=ee({},S,{value:void 0}),g=ee({},g,{value:void 0}),j=[];break;case"textarea":S=ct(o,S),g=ct(o,g),j=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Jc)}cf(f,g);var D;f=null;for(ie in S)if(!g.hasOwnProperty(ie)&&S.hasOwnProperty(ie)&&S[ie]!=null)if(ie==="style"){var q=S[ie];for(D in q)q.hasOwnProperty(D)&&(f||(f={}),f[D]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(i.hasOwnProperty(ie)?j||(j=[]):(j=j||[]).push(ie,null));for(ie in g){var Y=g[ie];if(q=S?.[ie],g.hasOwnProperty(ie)&&Y!==q&&(Y!=null||q!=null))if(ie==="style")if(q){for(D in q)!q.hasOwnProperty(D)||Y&&Y.hasOwnProperty(D)||(f||(f={}),f[D]="");for(D in Y)Y.hasOwnProperty(D)&&q[D]!==Y[D]&&(f||(f={}),f[D]=Y[D])}else f||(j||(j=[]),j.push(ie,f)),f=Y;else ie==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,q=q?q.__html:void 0,Y!=null&&q!==Y&&(j=j||[]).push(ie,Y)):ie==="children"?typeof Y!="string"&&typeof Y!="number"||(j=j||[]).push(ie,""+Y):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(i.hasOwnProperty(ie)?(Y!=null&&ie==="onScroll"&&vt("scroll",o),j||q===Y||(j=[])):(j=j||[]).push(ie,Y))}f&&(j=j||[]).push("style",f);var ie=j;(l.updateQueue=ie)&&(l.flags|=4)}},Qb=function(o,l,f,g){f!==g&&(l.flags|=4)};function yl(o,l){if(!_t)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function yn(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(l)for(var S=o.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=g,o.childLanes=f,l}function zM(o,l,f){var g=l.pendingProps;switch(Xf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(l),null;case 1:return On(l.type)&&tu(),yn(l),null;case 3:return g=l.stateNode,La(),bt(In),bt(mn),up(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(au(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,xs!==null&&(Bp(xs),xs=null))),Pp(o,l),yn(l),null;case 5:lp(l);var S=Ii(hl.current);if(f=l.type,o!==null&&l.stateNode!=null)Kb(o,l,f,g,S),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return yn(l),null}if(o=Ii(Gs.current),au(l)){g=l.stateNode,f=l.type;var j=l.memoizedProps;switch(g[Ws]=l,g[ol]=j,o=(l.mode&1)!==0,f){case"dialog":vt("cancel",g),vt("close",g);break;case"iframe":case"object":case"embed":vt("load",g);break;case"video":case"audio":for(S=0;S<rl.length;S++)vt(rl[S],g);break;case"source":vt("error",g);break;case"img":case"image":case"link":vt("error",g),vt("load",g);break;case"details":vt("toggle",g);break;case"input":ce(g,j),vt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!j.multiple},vt("invalid",g);break;case"textarea":Rn(g,j),vt("invalid",g)}cf(f,j),S=null;for(var D in j)if(j.hasOwnProperty(D)){var q=j[D];D==="children"?typeof q=="string"?g.textContent!==q&&(j.suppressHydrationWarning!==!0&&Zc(g.textContent,q,o),S=["children",q]):typeof q=="number"&&g.textContent!==""+q&&(j.suppressHydrationWarning!==!0&&Zc(g.textContent,q,o),S=["children",""+q]):i.hasOwnProperty(D)&&q!=null&&D==="onScroll"&&vt("scroll",g)}switch(f){case"input":Fe(g),We(g,j,!0);break;case"textarea":Fe(g),va(g);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(g.onclick=Jc)}g=S,l.updateQueue=g,g!==null&&(l.flags|=4)}else{D=S.nodeType===9?S:S.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ec(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=D.createElement(f,{is:g.is}):(o=D.createElement(f),f==="select"&&(D=o,g.multiple?D.multiple=!0:g.size&&(D.size=g.size))):o=D.createElementNS(o,f),o[Ws]=l,o[ol]=g,Hb(o,l,!1,!1),l.stateNode=o;e:{switch(D=uf(f,g),f){case"dialog":vt("cancel",o),vt("close",o),S=g;break;case"iframe":case"object":case"embed":vt("load",o),S=g;break;case"video":case"audio":for(S=0;S<rl.length;S++)vt(rl[S],o);S=g;break;case"source":vt("error",o),S=g;break;case"img":case"image":case"link":vt("error",o),vt("load",o),S=g;break;case"details":vt("toggle",o),S=g;break;case"input":ce(o,g),S=Me(o,g),vt("invalid",o);break;case"option":S=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},S=ee({},g,{value:void 0}),vt("invalid",o);break;case"textarea":Rn(o,g),S=ct(o,g),vt("invalid",o);break;default:S=g}cf(f,S),q=S;for(j in q)if(q.hasOwnProperty(j)){var Y=q[j];j==="style"?Lv(o,Y):j==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Dv(o,Y)):j==="children"?typeof Y=="string"?(f!=="textarea"||Y!=="")&&zo(o,Y):typeof Y=="number"&&zo(o,""+Y):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?Y!=null&&j==="onScroll"&&vt("scroll",o):Y!=null&&C(o,j,Y,D))}switch(f){case"input":Fe(o),We(o,g,!1);break;case"textarea":Fe(o),va(o);break;case"option":g.value!=null&&o.setAttribute("value",""+se(g.value));break;case"select":o.multiple=!!g.multiple,j=g.value,j!=null?Se(o,!!g.multiple,j,!1):g.defaultValue!=null&&Se(o,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(o.onclick=Jc)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return yn(l),null;case 6:if(o&&l.stateNode!=null)Qb(o,l,o.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(f=Ii(hl.current),Ii(Gs.current),au(l)){if(g=l.stateNode,f=l.memoizedProps,g[Ws]=l,(j=g.nodeValue!==f)&&(o=Gn,o!==null))switch(o.tag){case 3:Zc(g.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Zc(g.nodeValue,f,(o.mode&1)!==0)}j&&(l.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Ws]=l,l.stateNode=g}return yn(l),null;case 13:if(bt(kt),g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_t&&Hn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Z0(),Ia(),l.flags|=98560,j=!1;else if(j=au(l),g!==null&&g.dehydrated!==null){if(o===null){if(!j)throw Error(t(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[Ws]=l}else Ia(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;yn(l),j=!1}else xs!==null&&(Bp(xs),xs=null),j=!0;if(!j)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(kt.current&1)!==0?en===0&&(en=3):$p())),l.updateQueue!==null&&(l.flags|=4),yn(l),null);case 4:return La(),Pp(o,l),o===null&&il(l.stateNode.containerInfo),yn(l),null;case 10:return sp(l.type._context),yn(l),null;case 17:return On(l.type)&&tu(),yn(l),null;case 19:if(bt(kt),j=l.memoizedState,j===null)return yn(l),null;if(g=(l.flags&128)!==0,D=j.rendering,D===null)if(g)yl(j,!1);else{if(en!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(D=hu(o),D!==null){for(l.flags|=128,yl(j,!1),g=D.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=f,f=l.child;f!==null;)j=f,o=g,j.flags&=14680066,D=j.alternate,D===null?(j.childLanes=0,j.lanes=o,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=D.childLanes,j.lanes=D.lanes,j.child=D.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=D.memoizedProps,j.memoizedState=D.memoizedState,j.updateQueue=D.updateQueue,j.type=D.type,o=D.dependencies,j.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return gt(kt,kt.current&1|2),l.child}o=o.sibling}j.tail!==null&&Lt()>Ua&&(l.flags|=128,g=!0,yl(j,!1),l.lanes=4194304)}else{if(!g)if(o=hu(D),o!==null){if(l.flags|=128,g=!0,f=o.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),yl(j,!0),j.tail===null&&j.tailMode==="hidden"&&!D.alternate&&!_t)return yn(l),null}else 2*Lt()-j.renderingStartTime>Ua&&f!==1073741824&&(l.flags|=128,g=!0,yl(j,!1),l.lanes=4194304);j.isBackwards?(D.sibling=l.child,l.child=D):(f=j.last,f!==null?f.sibling=D:l.child=D,j.last=D)}return j.tail!==null?(l=j.tail,j.rendering=l,j.tail=l.sibling,j.renderingStartTime=Lt(),l.sibling=null,f=kt.current,gt(kt,g?f&1|2:f&1),l):(yn(l),null);case 22:case 23:return Up(),g=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Kn&1073741824)!==0&&(yn(l),l.subtreeFlags&6&&(l.flags|=8192)):yn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function BM(o,l){switch(Xf(l),l.tag){case 1:return On(l.type)&&tu(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return La(),bt(In),bt(mn),up(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return lp(l),null;case 13:if(bt(kt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ia()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return bt(kt),null;case 4:return La(),null;case 10:return sp(l.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var wu=!1,xn=!1,VM=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Ba(o,l){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Rt(o,l,g)}else f.current=null}function Ep(o,l,f){try{f()}catch(g){Rt(o,l,g)}}var Yb=!1;function UM(o,l){if(Uf=Vc,o=T0(),If(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,j=g.focusNode;g=g.focusOffset;try{f.nodeType,j.nodeType}catch{f=null;break e}var D=0,q=-1,Y=-1,ie=0,de=0,he=o,ue=null;t:for(;;){for(var be;he!==f||S!==0&&he.nodeType!==3||(q=D+S),he!==j||g!==0&&he.nodeType!==3||(Y=D+g),he.nodeType===3&&(D+=he.nodeValue.length),(be=he.firstChild)!==null;)ue=he,he=be;for(;;){if(he===o)break t;if(ue===f&&++ie===S&&(q=D),ue===j&&++de===g&&(Y=D),(be=he.nextSibling)!==null)break;he=ue,ue=he.parentNode}he=be}f=q===-1||Y===-1?null:{start:q,end:Y}}else f=null}f=f||{start:0,end:0}}else f=null;for($f={focusedElem:o,selectionRange:f},Vc=!1,Ne=l;Ne!==null;)if(l=Ne,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ne=o;else for(;Ne!==null;){l=Ne;try{var Te=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ee=Te.memoizedProps,zt=Te.memoizedState,J=l.stateNode,Z=J.getSnapshotBeforeUpdate(l.elementType===l.type?Ee:vs(l.type,Ee),zt);J.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ne=l.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Rt(l,l.return,ge)}if(o=l.sibling,o!==null){o.return=l.return,Ne=o;break}Ne=l.return}return Te=Yb,Yb=!1,Te}function xl(o,l,f){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&o)===o){var j=S.destroy;S.destroy=void 0,j!==void 0&&Ep(l,f,j)}S=S.next}while(S!==g)}}function Su(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&o)===o){var g=f.create;f.destroy=g()}f=f.next}while(f!==l)}}function Ap(o){var l=o.ref;if(l!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof l=="function"?l(o):l.current=o}}function Xb(o){var l=o.alternate;l!==null&&(o.alternate=null,Xb(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ws],delete l[ol],delete l[Hf],delete l[CM],delete l[jM])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Zb(o){return o.tag===5||o.tag===3||o.tag===4}function Jb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Zb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Mp(o,l,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(o,l):f.insertBefore(o,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(o,f)):(l=f,l.appendChild(o)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Jc));else if(g!==4&&(o=o.child,o!==null))for(Mp(o,l,f),o=o.sibling;o!==null;)Mp(o,l,f),o=o.sibling}function Rp(o,l,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Rp(o,l,f),o=o.sibling;o!==null;)Rp(o,l,f),o=o.sibling}var hn=null,bs=!1;function Qr(o,l,f){for(f=f.child;f!==null;)ew(o,l,f),f=f.sibling}function ew(o,l,f){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Oc,f)}catch{}switch(f.tag){case 5:xn||Ba(f,l);case 6:var g=hn,S=bs;hn=null,Qr(o,l,f),hn=g,bs=S,hn!==null&&(bs?(o=hn,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):hn.removeChild(f.stateNode));break;case 18:hn!==null&&(bs?(o=hn,f=f.stateNode,o.nodeType===8?Gf(o.parentNode,f):o.nodeType===1&&Gf(o,f),Yo(o)):Gf(hn,f.stateNode));break;case 4:g=hn,S=bs,hn=f.stateNode.containerInfo,bs=!0,Qr(o,l,f),hn=g,bs=S;break;case 0:case 11:case 14:case 15:if(!xn&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var j=S,D=j.destroy;j=j.tag,D!==void 0&&((j&2)!==0||(j&4)!==0)&&Ep(f,l,D),S=S.next}while(S!==g)}Qr(o,l,f);break;case 1:if(!xn&&(Ba(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(q){Rt(f,l,q)}Qr(o,l,f);break;case 21:Qr(o,l,f);break;case 22:f.mode&1?(xn=(g=xn)||f.memoizedState!==null,Qr(o,l,f),xn=g):Qr(o,l,f);break;default:Qr(o,l,f)}}function tw(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new VM),l.forEach(function(g){var S=XM.bind(null,o,g);f.has(g)||(f.add(g),g.then(S,S))})}}function ws(o,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];try{var j=o,D=l,q=D;e:for(;q!==null;){switch(q.tag){case 5:hn=q.stateNode,bs=!1;break e;case 3:hn=q.stateNode.containerInfo,bs=!0;break e;case 4:hn=q.stateNode.containerInfo,bs=!0;break e}q=q.return}if(hn===null)throw Error(t(160));ew(j,D,S),hn=null,bs=!1;var Y=S.alternate;Y!==null&&(Y.return=null),S.return=null}catch(ie){Rt(S,l,ie)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)nw(l,o),l=l.sibling}function nw(o,l){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ws(l,o),Ks(o),g&4){try{xl(3,o,o.return),Su(3,o)}catch(Ee){Rt(o,o.return,Ee)}try{xl(5,o,o.return)}catch(Ee){Rt(o,o.return,Ee)}}break;case 1:ws(l,o),Ks(o),g&512&&f!==null&&Ba(f,f.return);break;case 5:if(ws(l,o),Ks(o),g&512&&f!==null&&Ba(f,f.return),o.flags&32){var S=o.stateNode;try{zo(S,"")}catch(Ee){Rt(o,o.return,Ee)}}if(g&4&&(S=o.stateNode,S!=null)){var j=o.memoizedProps,D=f!==null?f.memoizedProps:j,q=o.type,Y=o.updateQueue;if(o.updateQueue=null,Y!==null)try{q==="input"&&j.type==="radio"&&j.name!=null&&ve(S,j),uf(q,D);var ie=uf(q,j);for(D=0;D<Y.length;D+=2){var de=Y[D],he=Y[D+1];de==="style"?Lv(S,he):de==="dangerouslySetInnerHTML"?Dv(S,he):de==="children"?zo(S,he):C(S,de,he,ie)}switch(q){case"input":Ve(S,j);break;case"textarea":Dr(S,j);break;case"select":var ue=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!j.multiple;var be=j.value;be!=null?Se(S,!!j.multiple,be,!1):ue!==!!j.multiple&&(j.defaultValue!=null?Se(S,!!j.multiple,j.defaultValue,!0):Se(S,!!j.multiple,j.multiple?[]:"",!1))}S[ol]=j}catch(Ee){Rt(o,o.return,Ee)}}break;case 6:if(ws(l,o),Ks(o),g&4){if(o.stateNode===null)throw Error(t(162));S=o.stateNode,j=o.memoizedProps;try{S.nodeValue=j}catch(Ee){Rt(o,o.return,Ee)}}break;case 3:if(ws(l,o),Ks(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Yo(l.containerInfo)}catch(Ee){Rt(o,o.return,Ee)}break;case 4:ws(l,o),Ks(o);break;case 13:ws(l,o),Ks(o),S=o.child,S.flags&8192&&(j=S.memoizedState!==null,S.stateNode.isHidden=j,!j||S.alternate!==null&&S.alternate.memoizedState!==null||(Dp=Lt())),g&4&&tw(o);break;case 22:if(de=f!==null&&f.memoizedState!==null,o.mode&1?(xn=(ie=xn)||de,ws(l,o),xn=ie):ws(l,o),Ks(o),g&8192){if(ie=o.memoizedState!==null,(o.stateNode.isHidden=ie)&&!de&&(o.mode&1)!==0)for(Ne=o,de=o.child;de!==null;){for(he=Ne=de;Ne!==null;){switch(ue=Ne,be=ue.child,ue.tag){case 0:case 11:case 14:case 15:xl(4,ue,ue.return);break;case 1:Ba(ue,ue.return);var Te=ue.stateNode;if(typeof Te.componentWillUnmount=="function"){g=ue,f=ue.return;try{l=g,Te.props=l.memoizedProps,Te.state=l.memoizedState,Te.componentWillUnmount()}catch(Ee){Rt(g,f,Ee)}}break;case 5:Ba(ue,ue.return);break;case 22:if(ue.memoizedState!==null){iw(he);continue}}be!==null?(be.return=ue,Ne=be):iw(he)}de=de.sibling}e:for(de=null,he=o;;){if(he.tag===5){if(de===null){de=he;try{S=he.stateNode,ie?(j=S.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(q=he.stateNode,Y=he.memoizedProps.style,D=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,q.style.display=Fv("display",D))}catch(Ee){Rt(o,o.return,Ee)}}}else if(he.tag===6){if(de===null)try{he.stateNode.nodeValue=ie?"":he.memoizedProps}catch(Ee){Rt(o,o.return,Ee)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===o)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===o)break e;for(;he.sibling===null;){if(he.return===null||he.return===o)break e;de===he&&(de=null),he=he.return}de===he&&(de=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ws(l,o),Ks(o),g&4&&tw(o);break;case 21:break;default:ws(l,o),Ks(o)}}function Ks(o){var l=o.flags;if(l&2){try{e:{for(var f=o.return;f!==null;){if(Zb(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(zo(S,""),g.flags&=-33);var j=Jb(o);Rp(o,j,S);break;case 3:case 4:var D=g.stateNode.containerInfo,q=Jb(o);Mp(o,q,D);break;default:throw Error(t(161))}}catch(Y){Rt(o,o.return,Y)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function $M(o,l,f){Ne=o,sw(o)}function sw(o,l,f){for(var g=(o.mode&1)!==0;Ne!==null;){var S=Ne,j=S.child;if(S.tag===22&&g){var D=S.memoizedState!==null||wu;if(!D){var q=S.alternate,Y=q!==null&&q.memoizedState!==null||xn;q=wu;var ie=xn;if(wu=D,(xn=Y)&&!ie)for(Ne=S;Ne!==null;)D=Ne,Y=D.child,D.tag===22&&D.memoizedState!==null?aw(S):Y!==null?(Y.return=D,Ne=Y):aw(S);for(;j!==null;)Ne=j,sw(j),j=j.sibling;Ne=S,wu=q,xn=ie}rw(o)}else(S.subtreeFlags&8772)!==0&&j!==null?(j.return=S,Ne=j):rw(o)}}function rw(o){for(;Ne!==null;){var l=Ne;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:xn||Su(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!xn)if(f===null)g.componentDidMount();else{var S=l.elementType===l.type?f.memoizedProps:vs(l.type,f.memoizedProps);g.componentDidUpdate(S,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var j=l.updateQueue;j!==null&&ib(l,j,g);break;case 3:var D=l.updateQueue;if(D!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}ib(l,D,f)}break;case 5:var q=l.stateNode;if(f===null&&l.flags&4){f=q;var Y=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&f.focus();break;case"img":Y.src&&(f.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ie=l.alternate;if(ie!==null){var de=ie.memoizedState;if(de!==null){var he=de.dehydrated;he!==null&&Yo(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xn||l.flags&512&&Ap(l)}catch(ue){Rt(l,l.return,ue)}}if(l===o){Ne=null;break}if(f=l.sibling,f!==null){f.return=l.return,Ne=f;break}Ne=l.return}}function iw(o){for(;Ne!==null;){var l=Ne;if(l===o){Ne=null;break}var f=l.sibling;if(f!==null){f.return=l.return,Ne=f;break}Ne=l.return}}function aw(o){for(;Ne!==null;){var l=Ne;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Su(4,l)}catch(Y){Rt(l,f,Y)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var S=l.return;try{g.componentDidMount()}catch(Y){Rt(l,S,Y)}}var j=l.return;try{Ap(l)}catch(Y){Rt(l,j,Y)}break;case 5:var D=l.return;try{Ap(l)}catch(Y){Rt(l,D,Y)}}}catch(Y){Rt(l,l.return,Y)}if(l===o){Ne=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Ne=q;break}Ne=l.return}}var qM=Math.ceil,_u=A.ReactCurrentDispatcher,Ip=A.ReactCurrentOwner,as=A.ReactCurrentBatchConfig,nt=0,rn=null,Ht=null,fn=0,Kn=0,Va=qr(0),en=0,vl=null,Di=0,Cu=0,Op=0,bl=null,Fn=null,Dp=0,Ua=1/0,br=null,ju=!1,Fp=null,Yr=null,Nu=!1,Xr=null,ku=0,wl=0,Lp=null,Tu=-1,Pu=0;function jn(){return(nt&6)!==0?Lt():Tu!==-1?Tu:Tu=Lt()}function Zr(o){return(o.mode&1)===0?1:(nt&2)!==0&&fn!==0?fn&-fn:kM.transition!==null?(Pu===0&&(Pu=Jv()),Pu):(o=dt,o!==0||(o=window.event,o=o===void 0?16:l0(o.type)),o)}function Ss(o,l,f,g){if(50<wl)throw wl=0,Lp=null,Error(t(185));Wo(o,f,g),((nt&2)===0||o!==rn)&&(o===rn&&((nt&2)===0&&(Cu|=f),en===4&&Jr(o,fn)),Ln(o,g),f===1&&nt===0&&(l.mode&1)===0&&(Ua=Lt()+500,su&&Gr()))}function Ln(o,l){var f=o.callbackNode;kA(o,l);var g=Lc(o,o===rn?fn:0);if(g===0)f!==null&&Yv(f),o.callbackNode=null,o.callbackPriority=0;else if(l=g&-g,o.callbackPriority!==l){if(f!=null&&Yv(f),l===1)o.tag===0?NM(lw.bind(null,o)):H0(lw.bind(null,o)),SM(function(){(nt&6)===0&&Gr()}),f=null;else{switch(e0(g)){case 1:f=yf;break;case 4:f=Xv;break;case 16:f=Ic;break;case 536870912:f=Zv;break;default:f=Ic}f=gw(f,ow.bind(null,o))}o.callbackPriority=l,o.callbackNode=f}}function ow(o,l){if(Tu=-1,Pu=0,(nt&6)!==0)throw Error(t(327));var f=o.callbackNode;if($a()&&o.callbackNode!==f)return null;var g=Lc(o,o===rn?fn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||l)l=Eu(o,g);else{l=g;var S=nt;nt|=2;var j=uw();(rn!==o||fn!==l)&&(br=null,Ua=Lt()+500,Li(o,l));do try{HM();break}catch(q){cw(o,q)}while(!0);np(),_u.current=j,nt=S,Ht!==null?l=0:(rn=null,fn=0,l=en)}if(l!==0){if(l===2&&(S=xf(o),S!==0&&(g=S,l=zp(o,S))),l===1)throw f=vl,Li(o,0),Jr(o,g),Ln(o,Lt()),f;if(l===6)Jr(o,g);else{if(S=o.current.alternate,(g&30)===0&&!WM(S)&&(l=Eu(o,g),l===2&&(j=xf(o),j!==0&&(g=j,l=zp(o,j))),l===1))throw f=vl,Li(o,0),Jr(o,g),Ln(o,Lt()),f;switch(o.finishedWork=S,o.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:zi(o,Fn,br);break;case 3:if(Jr(o,g),(g&130023424)===g&&(l=Dp+500-Lt(),10<l)){if(Lc(o,0)!==0)break;if(S=o.suspendedLanes,(S&g)!==g){jn(),o.pingedLanes|=o.suspendedLanes&S;break}o.timeoutHandle=Wf(zi.bind(null,o,Fn,br),l);break}zi(o,Fn,br);break;case 4:if(Jr(o,g),(g&4194240)===g)break;for(l=o.eventTimes,S=-1;0<g;){var D=31-gs(g);j=1<<D,D=l[D],D>S&&(S=D),g&=~j}if(g=S,g=Lt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*qM(g/1960))-g,10<g){o.timeoutHandle=Wf(zi.bind(null,o,Fn,br),g);break}zi(o,Fn,br);break;case 5:zi(o,Fn,br);break;default:throw Error(t(329))}}}return Ln(o,Lt()),o.callbackNode===f?ow.bind(null,o):null}function zp(o,l){var f=bl;return o.current.memoizedState.isDehydrated&&(Li(o,l).flags|=256),o=Eu(o,l),o!==2&&(l=Fn,Fn=f,l!==null&&Bp(l)),o}function Bp(o){Fn===null?Fn=o:Fn.push.apply(Fn,o)}function WM(o){for(var l=o;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var S=f[g],j=S.getSnapshot;S=S.value;try{if(!ys(j(),S))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Jr(o,l){for(l&=~Op,l&=~Cu,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var f=31-gs(l),g=1<<f;o[f]=-1,l&=~g}}function lw(o){if((nt&6)!==0)throw Error(t(327));$a();var l=Lc(o,0);if((l&1)===0)return Ln(o,Lt()),null;var f=Eu(o,l);if(o.tag!==0&&f===2){var g=xf(o);g!==0&&(l=g,f=zp(o,g))}if(f===1)throw f=vl,Li(o,0),Jr(o,l),Ln(o,Lt()),f;if(f===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,zi(o,Fn,br),Ln(o,Lt()),null}function Vp(o,l){var f=nt;nt|=1;try{return o(l)}finally{nt=f,nt===0&&(Ua=Lt()+500,su&&Gr())}}function Fi(o){Xr!==null&&Xr.tag===0&&(nt&6)===0&&$a();var l=nt;nt|=1;var f=as.transition,g=dt;try{if(as.transition=null,dt=1,o)return o()}finally{dt=g,as.transition=f,nt=l,(nt&6)===0&&Gr()}}function Up(){Kn=Va.current,bt(Va)}function Li(o,l){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,wM(f)),Ht!==null)for(f=Ht.return;f!==null;){var g=f;switch(Xf(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&tu();break;case 3:La(),bt(In),bt(mn),up();break;case 5:lp(g);break;case 4:La();break;case 13:bt(kt);break;case 19:bt(kt);break;case 10:sp(g.type._context);break;case 22:case 23:Up()}f=f.return}if(rn=o,Ht=o=ei(o.current,null),fn=Kn=l,en=0,vl=null,Op=Cu=Di=0,Fn=bl=null,Ri!==null){for(l=0;l<Ri.length;l++)if(f=Ri[l],g=f.interleaved,g!==null){f.interleaved=null;var S=g.next,j=f.pending;if(j!==null){var D=j.next;j.next=S,g.next=D}f.pending=g}Ri=null}return o}function cw(o,l){do{var f=Ht;try{if(np(),fu.current=yu,pu){for(var g=Tt.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}pu=!1}if(Oi=0,sn=Jt=Tt=null,fl=!1,pl=0,Ip.current=null,f===null||f.return===null){en=1,vl=l,Ht=null;break}e:{var j=o,D=f.return,q=f,Y=l;if(l=fn,q.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ie=Y,de=q,he=de.tag;if((de.mode&1)===0&&(he===0||he===11||he===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var be=Ib(D);if(be!==null){be.flags&=-257,Ob(be,D,q,j,l),be.mode&1&&Rb(j,ie,l),l=be,Y=ie;var Te=l.updateQueue;if(Te===null){var Ee=new Set;Ee.add(Y),l.updateQueue=Ee}else Te.add(Y);break e}else{if((l&1)===0){Rb(j,ie,l),$p();break e}Y=Error(t(426))}}else if(_t&&q.mode&1){var zt=Ib(D);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),Ob(zt,D,q,j,l),ep(za(Y,q));break e}}j=Y=za(Y,q),en!==4&&(en=2),bl===null?bl=[j]:bl.push(j),j=D;do{switch(j.tag){case 3:j.flags|=65536,l&=-l,j.lanes|=l;var J=Ab(j,Y,l);rb(j,J);break e;case 1:q=Y;var Z=j.type,ne=j.stateNode;if((j.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Yr===null||!Yr.has(ne)))){j.flags|=65536,l&=-l,j.lanes|=l;var ge=Mb(j,q,l);rb(j,ge);break e}}j=j.return}while(j!==null)}hw(f)}catch(Ae){l=Ae,Ht===f&&f!==null&&(Ht=f=f.return);continue}break}while(!0)}function uw(){var o=_u.current;return _u.current=yu,o===null?yu:o}function $p(){(en===0||en===3||en===2)&&(en=4),rn===null||(Di&268435455)===0&&(Cu&268435455)===0||Jr(rn,fn)}function Eu(o,l){var f=nt;nt|=2;var g=uw();(rn!==o||fn!==l)&&(br=null,Li(o,l));do try{GM();break}catch(S){cw(o,S)}while(!0);if(np(),nt=f,_u.current=g,Ht!==null)throw Error(t(261));return rn=null,fn=0,en}function GM(){for(;Ht!==null;)dw(Ht)}function HM(){for(;Ht!==null&&!xA();)dw(Ht)}function dw(o){var l=mw(o.alternate,o,Kn);o.memoizedProps=o.pendingProps,l===null?hw(o):Ht=l,Ip.current=null}function hw(o){var l=o;do{var f=l.alternate;if(o=l.return,(l.flags&32768)===0){if(f=zM(f,l,Kn),f!==null){Ht=f;return}}else{if(f=BM(f,l),f!==null){f.flags&=32767,Ht=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{en=6,Ht=null;return}}if(l=l.sibling,l!==null){Ht=l;return}Ht=l=o}while(l!==null);en===0&&(en=5)}function zi(o,l,f){var g=dt,S=as.transition;try{as.transition=null,dt=1,KM(o,l,f,g)}finally{as.transition=S,dt=g}return null}function KM(o,l,f,g){do $a();while(Xr!==null);if((nt&6)!==0)throw Error(t(327));f=o.finishedWork;var S=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var j=f.lanes|f.childLanes;if(TA(o,j),o===rn&&(Ht=rn=null,fn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Nu||(Nu=!0,gw(Ic,function(){return $a(),null})),j=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||j){j=as.transition,as.transition=null;var D=dt;dt=1;var q=nt;nt|=4,Ip.current=null,UM(o,f),nw(f,o),pM($f),Vc=!!Uf,$f=Uf=null,o.current=f,$M(f),vA(),nt=q,dt=D,as.transition=j}else o.current=f;if(Nu&&(Nu=!1,Xr=o,ku=S),j=o.pendingLanes,j===0&&(Yr=null),SA(f.stateNode),Ln(o,Lt()),l!==null)for(g=o.onRecoverableError,f=0;f<l.length;f++)S=l[f],g(S.value,{componentStack:S.stack,digest:S.digest});if(ju)throw ju=!1,o=Fp,Fp=null,o;return(ku&1)!==0&&o.tag!==0&&$a(),j=o.pendingLanes,(j&1)!==0?o===Lp?wl++:(wl=0,Lp=o):wl=0,Gr(),null}function $a(){if(Xr!==null){var o=e0(ku),l=as.transition,f=dt;try{if(as.transition=null,dt=16>o?16:o,Xr===null)var g=!1;else{if(o=Xr,Xr=null,ku=0,(nt&6)!==0)throw Error(t(331));var S=nt;for(nt|=4,Ne=o.current;Ne!==null;){var j=Ne,D=j.child;if((Ne.flags&16)!==0){var q=j.deletions;if(q!==null){for(var Y=0;Y<q.length;Y++){var ie=q[Y];for(Ne=ie;Ne!==null;){var de=Ne;switch(de.tag){case 0:case 11:case 15:xl(8,de,j)}var he=de.child;if(he!==null)he.return=de,Ne=he;else for(;Ne!==null;){de=Ne;var ue=de.sibling,be=de.return;if(Xb(de),de===ie){Ne=null;break}if(ue!==null){ue.return=be,Ne=ue;break}Ne=be}}}var Te=j.alternate;if(Te!==null){var Ee=Te.child;if(Ee!==null){Te.child=null;do{var zt=Ee.sibling;Ee.sibling=null,Ee=zt}while(Ee!==null)}}Ne=j}}if((j.subtreeFlags&2064)!==0&&D!==null)D.return=j,Ne=D;else e:for(;Ne!==null;){if(j=Ne,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:xl(9,j,j.return)}var J=j.sibling;if(J!==null){J.return=j.return,Ne=J;break e}Ne=j.return}}var Z=o.current;for(Ne=Z;Ne!==null;){D=Ne;var ne=D.child;if((D.subtreeFlags&2064)!==0&&ne!==null)ne.return=D,Ne=ne;else e:for(D=Z;Ne!==null;){if(q=Ne,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Su(9,q)}}catch(Ae){Rt(q,q.return,Ae)}if(q===D){Ne=null;break e}var ge=q.sibling;if(ge!==null){ge.return=q.return,Ne=ge;break e}Ne=q.return}}if(nt=S,Gr(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Oc,o)}catch{}g=!0}return g}finally{dt=f,as.transition=l}}return!1}function fw(o,l,f){l=za(f,l),l=Ab(o,l,1),o=Kr(o,l,1),l=jn(),o!==null&&(Wo(o,1,l),Ln(o,l))}function Rt(o,l,f){if(o.tag===3)fw(o,o,f);else for(;l!==null;){if(l.tag===3){fw(l,o,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Yr===null||!Yr.has(g))){o=za(f,o),o=Mb(l,o,1),l=Kr(l,o,1),o=jn(),l!==null&&(Wo(l,1,o),Ln(l,o));break}}l=l.return}}function QM(o,l,f){var g=o.pingCache;g!==null&&g.delete(l),l=jn(),o.pingedLanes|=o.suspendedLanes&f,rn===o&&(fn&f)===f&&(en===4||en===3&&(fn&130023424)===fn&&500>Lt()-Dp?Li(o,0):Op|=f),Ln(o,l)}function pw(o,l){l===0&&((o.mode&1)===0?l=1:(l=Fc,Fc<<=1,(Fc&130023424)===0&&(Fc=4194304)));var f=jn();o=yr(o,l),o!==null&&(Wo(o,l,f),Ln(o,f))}function YM(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),pw(o,f)}function XM(o,l){var f=0;switch(o.tag){case 13:var g=o.stateNode,S=o.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),pw(o,f)}var mw;mw=function(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps||In.current)Dn=!0;else{if((o.lanes&f)===0&&(l.flags&128)===0)return Dn=!1,LM(o,l,f);Dn=(o.flags&131072)!==0}else Dn=!1,_t&&(l.flags&1048576)!==0&&K0(l,iu,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;bu(o,l),o=l.pendingProps;var S=Aa(l,mn.current);Fa(l,f),S=fp(null,l,g,o,S,f);var j=pp();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,On(g)?(j=!0,nu(l)):j=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,ap(l),S.updater=xu,l.stateNode=S,S._reactInternals=l,bp(l,g,o,f),l=Cp(null,l,g,!0,j,f)):(l.tag=0,_t&&j&&Yf(l),Cn(null,l,S,f),l=l.child),l;case 16:g=l.elementType;e:{switch(bu(o,l),o=l.pendingProps,S=g._init,g=S(g._payload),l.type=g,S=l.tag=JM(g),o=vs(g,o),S){case 0:l=_p(null,l,g,o,f);break e;case 1:l=Vb(null,l,g,o,f);break e;case 11:l=Db(null,l,g,o,f);break e;case 14:l=Fb(null,l,g,vs(g.type,o),f);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:vs(g,S),_p(o,l,g,S,f);case 1:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:vs(g,S),Vb(o,l,g,S,f);case 3:e:{if(Ub(l),o===null)throw Error(t(387));g=l.pendingProps,j=l.memoizedState,S=j.element,sb(o,l),du(l,g,null,f);var D=l.memoizedState;if(g=D.element,j.isDehydrated)if(j={element:g,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},l.updateQueue.baseState=j,l.memoizedState=j,l.flags&256){S=za(Error(t(423)),l),l=$b(o,l,g,f,S);break e}else if(g!==S){S=za(Error(t(424)),l),l=$b(o,l,g,f,S);break e}else for(Hn=$r(l.stateNode.containerInfo.firstChild),Gn=l,_t=!0,xs=null,f=tb(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ia(),g===S){l=vr(o,l,f);break e}Cn(o,l,g,f)}l=l.child}return l;case 5:return ab(l),o===null&&Jf(l),g=l.type,S=l.pendingProps,j=o!==null?o.memoizedProps:null,D=S.children,qf(g,S)?D=null:j!==null&&qf(g,j)&&(l.flags|=32),Bb(o,l),Cn(o,l,D,f),l.child;case 6:return o===null&&Jf(l),null;case 13:return qb(o,l,f);case 4:return op(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Oa(l,null,g,f):Cn(o,l,g,f),l.child;case 11:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:vs(g,S),Db(o,l,g,S,f);case 7:return Cn(o,l,l.pendingProps,f),l.child;case 8:return Cn(o,l,l.pendingProps.children,f),l.child;case 12:return Cn(o,l,l.pendingProps.children,f),l.child;case 10:e:{if(g=l.type._context,S=l.pendingProps,j=l.memoizedProps,D=S.value,gt(lu,g._currentValue),g._currentValue=D,j!==null)if(ys(j.value,D)){if(j.children===S.children&&!In.current){l=vr(o,l,f);break e}}else for(j=l.child,j!==null&&(j.return=l);j!==null;){var q=j.dependencies;if(q!==null){D=j.child;for(var Y=q.firstContext;Y!==null;){if(Y.context===g){if(j.tag===1){Y=xr(-1,f&-f),Y.tag=2;var ie=j.updateQueue;if(ie!==null){ie=ie.shared;var de=ie.pending;de===null?Y.next=Y:(Y.next=de.next,de.next=Y),ie.pending=Y}}j.lanes|=f,Y=j.alternate,Y!==null&&(Y.lanes|=f),rp(j.return,f,l),q.lanes|=f;break}Y=Y.next}}else if(j.tag===10)D=j.type===l.type?null:j.child;else if(j.tag===18){if(D=j.return,D===null)throw Error(t(341));D.lanes|=f,q=D.alternate,q!==null&&(q.lanes|=f),rp(D,f,l),D=j.sibling}else D=j.child;if(D!==null)D.return=j;else for(D=j;D!==null;){if(D===l){D=null;break}if(j=D.sibling,j!==null){j.return=D.return,D=j;break}D=D.return}j=D}Cn(o,l,S.children,f),l=l.child}return l;case 9:return S=l.type,g=l.pendingProps.children,Fa(l,f),S=rs(S),g=g(S),l.flags|=1,Cn(o,l,g,f),l.child;case 14:return g=l.type,S=vs(g,l.pendingProps),S=vs(g.type,S),Fb(o,l,g,S,f);case 15:return Lb(o,l,l.type,l.pendingProps,f);case 17:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:vs(g,S),bu(o,l),l.tag=1,On(g)?(o=!0,nu(l)):o=!1,Fa(l,f),Pb(l,g,S),bp(l,g,S,f),Cp(null,l,g,!0,o,f);case 19:return Gb(o,l,f);case 22:return zb(o,l,f)}throw Error(t(156,l.tag))};function gw(o,l){return Qv(o,l)}function ZM(o,l,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(o,l,f,g){return new ZM(o,l,f,g)}function qp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function JM(o){if(typeof o=="function")return qp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===L)return 11;if(o===W)return 14}return 2}function ei(o,l){var f=o.alternate;return f===null?(f=os(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Au(o,l,f,g,S,j){var D=2;if(g=o,typeof o=="function")qp(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case E:return Bi(f.children,S,j,l);case T:D=8,S|=8;break;case I:return o=os(12,f,l,S|2),o.elementType=I,o.lanes=j,o;case V:return o=os(13,f,l,S),o.elementType=V,o.lanes=j,o;case z:return o=os(19,f,l,S),o.elementType=z,o.lanes=j,o;case K:return Mu(f,S,j,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:D=10;break e;case F:D=9;break e;case L:D=11;break e;case W:D=14;break e;case G:D=16,g=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=os(D,f,l,S),l.elementType=o,l.type=g,l.lanes=j,l}function Bi(o,l,f,g){return o=os(7,o,g,l),o.lanes=f,o}function Mu(o,l,f,g){return o=os(22,o,g,l),o.elementType=K,o.lanes=f,o.stateNode={isHidden:!1},o}function Wp(o,l,f){return o=os(6,o,null,l),o.lanes=f,o}function Gp(o,l,f){return l=os(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function eR(o,l,f,g,S){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vf(0),this.expirationTimes=vf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vf(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Hp(o,l,f,g,S,j,D,q,Y){return o=new eR(o,l,f,q,Y),l===1?(l=1,j===!0&&(l|=8)):l=0,j=os(3,null,null,l),o.current=j,j.stateNode=o,j.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ap(j),o}function tR(o,l,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:g==null?null:""+g,children:o,containerInfo:l,implementation:f}}function yw(o){if(!o)return Wr;o=o._reactInternals;e:{if(Ti(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(On(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var f=o.type;if(On(f))return W0(o,f,l)}return l}function xw(o,l,f,g,S,j,D,q,Y){return o=Hp(f,g,!0,o,S,j,D,q,Y),o.context=yw(null),f=o.current,g=jn(),S=Zr(f),j=xr(g,S),j.callback=l??null,Kr(f,j,S),o.current.lanes=S,Wo(o,S,g),Ln(o,g),o}function Ru(o,l,f,g){var S=l.current,j=jn(),D=Zr(S);return f=yw(f),l.context===null?l.context=f:l.pendingContext=f,l=xr(j,D),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=Kr(S,l,D),o!==null&&(Ss(o,S,D,j),uu(o,S,D)),D}function Iu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function vw(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function Kp(o,l){vw(o,l),(o=o.alternate)&&vw(o,l)}function nR(){return null}var bw=typeof reportError=="function"?reportError:function(o){console.error(o)};function Qp(o){this._internalRoot=o}Ou.prototype.render=Qp.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Ru(o,l,null,null)},Ou.prototype.unmount=Qp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Fi(function(){Ru(null,o,null,null)}),l[fr]=null}};function Ou(o){this._internalRoot=o}Ou.prototype.unstable_scheduleHydration=function(o){if(o){var l=s0();o={blockedOn:null,target:o,priority:l};for(var f=0;f<Br.length&&l!==0&&l<Br[f].priority;f++);Br.splice(f,0,o),f===0&&a0(o)}};function Yp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Du(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ww(){}function sR(o,l,f,g,S){if(S){if(typeof g=="function"){var j=g;g=function(){var ie=Iu(D);j.call(ie)}}var D=xw(l,g,o,0,null,!1,!1,"",ww);return o._reactRootContainer=D,o[fr]=D.current,il(o.nodeType===8?o.parentNode:o),Fi(),D}for(;S=o.lastChild;)o.removeChild(S);if(typeof g=="function"){var q=g;g=function(){var ie=Iu(Y);q.call(ie)}}var Y=Hp(o,0,!1,null,null,!1,!1,"",ww);return o._reactRootContainer=Y,o[fr]=Y.current,il(o.nodeType===8?o.parentNode:o),Fi(function(){Ru(l,Y,f,g)}),Y}function Fu(o,l,f,g,S){var j=f._reactRootContainer;if(j){var D=j;if(typeof S=="function"){var q=S;S=function(){var Y=Iu(D);q.call(Y)}}Ru(l,D,o,S)}else D=sR(f,l,o,S,g);return Iu(D)}t0=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var f=qo(l.pendingLanes);f!==0&&(bf(l,f|1),Ln(l,Lt()),(nt&6)===0&&(Ua=Lt()+500,Gr()))}break;case 13:Fi(function(){var g=yr(o,1);if(g!==null){var S=jn();Ss(g,o,1,S)}}),Kp(o,1)}},wf=function(o){if(o.tag===13){var l=yr(o,134217728);if(l!==null){var f=jn();Ss(l,o,134217728,f)}Kp(o,134217728)}},n0=function(o){if(o.tag===13){var l=Zr(o),f=yr(o,l);if(f!==null){var g=jn();Ss(f,o,l,g)}Kp(o,l)}},s0=function(){return dt},r0=function(o,l){var f=dt;try{return dt=o,l()}finally{dt=f}},ff=function(o,l,f){switch(l){case"input":if(Ve(o,f),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==o&&g.form===o.form){var S=eu(g);if(!S)throw Error(t(90));oe(g),Ve(g,S)}}}break;case"textarea":Dr(o,f);break;case"select":l=f.value,l!=null&&Se(o,!!f.multiple,l,!1)}},Uv=Vp,$v=Fi;var rR={usingClientEntryPoint:!1,Events:[ll,Pa,eu,Bv,Vv,Vp]},Sl={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iR={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Hv(o),o===null?null:o.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||nR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Oc=Lu.inject(iR),qs=Lu}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rR,zn.createPortal=function(o,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yp(l))throw Error(t(200));return tR(o,l,null,f)},zn.createRoot=function(o,l){if(!Yp(o))throw Error(t(299));var f=!1,g="",S=bw;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Hp(o,1,!1,null,null,f,!1,g,S),o[fr]=l.current,il(o.nodeType===8?o.parentNode:o),new Qp(l)},zn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Hv(l),o=o===null?null:o.stateNode,o},zn.flushSync=function(o){return Fi(o)},zn.hydrate=function(o,l,f){if(!Du(l))throw Error(t(200));return Fu(null,o,l,!0,f)},zn.hydrateRoot=function(o,l,f){if(!Yp(o))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,S=!1,j="",D=bw;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(j=f.identifierPrefix),f.onRecoverableError!==void 0&&(D=f.onRecoverableError)),l=xw(l,null,o,1,f??null,S,!1,j,D),o[fr]=l.current,il(o),g)for(o=0;o<g.length;o++)f=g[o],S=f._getVersion,S=S(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,S]:l.mutableSourceEagerHydrationData.push(f,S);return new Ou(l)},zn.render=function(o,l,f){if(!Du(l))throw Error(t(200));return Fu(null,o,l,!1,f)},zn.unmountComponentAtNode=function(o){if(!Du(o))throw Error(t(40));return o._reactRootContainer?(Fi(function(){Fu(null,null,o,!1,function(){o._reactRootContainer=null,o[fr]=null})}),!0):!1},zn.unstable_batchedUpdates=Vp,zn.unstable_renderSubtreeIntoContainer=function(o,l,f,g){if(!Du(f))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Fu(o,l,f,!1,g)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var Pw;function lC(){if(Pw)return Jp.exports;Pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=pR(),Jp.exports}var Ew;function mR(){if(Ew)return Bu;Ew=1;var n=lC();return Bu.createRoot=n.createRoot,Bu.hydrateRoot=n.hydrateRoot,Bu}var gR=mR();function yR(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,i,a,c=[],u="",d=n.split("/");for(d[0]||d.shift();i=d.shift();)t=i[0],t==="*"?(c.push(t),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),c.push(i.substring(1,~s?s:~a?a:i.length)),u+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(u+=(~s?"?":"")+"\\"+i.substring(a))):u+="/"+i;return{keys:c,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var x=nc();const mt=Ls(x),vy=oR({__proto__:null,default:mt},[x]);var nm={exports:{}},sm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function xR(){if(Aw)return sm;Aw=1;var n=nc();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(m,y){var b=y(),_=s({inst:{value:b,getSnapshot:y}}),v=_[0].inst,w=_[1];return a(function(){v.value=b,v.getSnapshot=y,d(v)&&w({inst:v})},[m,b,y]),i(function(){return d(v)&&w({inst:v}),m(function(){d(v)&&w({inst:v})})},[m]),c(b),b}function d(m){var y=m.getSnapshot;m=m.value;try{var b=y();return!t(m,b)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return sm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,sm}var Mw;function vR(){return Mw||(Mw=1,nm.exports=xR()),nm.exports}var cC=vR();const bR=vy.useInsertionEffect,wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SR=wR?x.useLayoutEffect:x.useEffect,_R=bR||SR,uC=n=>{const e=x.useRef([n,(...t)=>e[0](...t)]).current;return _R(()=>{e[0]=n}),e[1]},CR="popstate",by="pushState",wy="replaceState",jR="hashchange",Rw=[CR,by,wy,jR],NR=n=>{for(const e of Rw)addEventListener(e,n);return()=>{for(const e of Rw)removeEventListener(e,n)}},dC=(n,e)=>cC.useSyncExternalStore(NR,n,e),kR=()=>location.search,TR=({ssrSearch:n=""}={})=>dC(kR,()=>n),Iw=()=>location.pathname,PR=({ssrPath:n}={})=>dC(Iw,n?()=>n:Iw),ER=(n,{replace:e=!1,state:t=null}={})=>history[e?wy:by](t,"",n),AR=(n={})=>[PR(n),ER],Ow=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ow]>"u"){for(const n of[by,wy]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,Ow,{value:!0})}const MR=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",hC=(n="")=>n==="/"?"":n,RR=(n,e)=>n[0]==="~"?n.slice(1):hC(e)+n,IR=(n="",e)=>MR(Dw(hC(n)),Dw(e)),Dw=n=>{try{return decodeURI(n)}catch{return n}},fC={hook:AR,searchHook:TR,parser:yR,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n},pC=x.createContext(fC),sc=()=>x.useContext(pC),mC={},gC=x.createContext(mC),OR=()=>x.useContext(gC),ch=n=>{const[e,t]=n.hook(n);return[IR(n.base,e),uC((s,i)=>t(RR(s,n.base),i))]},vo=()=>ch(sc()),yC=(n,e,t,s)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),c=i.exec(t)||[],[u,...d]=c;return u!==void 0?[!0,(()=>{const h=a!==!1?Object.fromEntries(a.map((m,y)=>[m,d[y]])):c.groups;let p={...d};return h&&Object.assign(p,h),p})(),...s?[u]:[]]:[!1,null]},DR=({children:n,...e})=>{const t=sc(),s=e.hook?fC:t;let i=s;const[a,c]=e.ssrPath?.split("?")??[];c&&(e.ssrSearch=c,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let u=x.useRef({}),d=u.current,h=d;for(let p in s){const m=p==="base"?s[p]+(e[p]||""):e[p]||s[p];d===h&&m!==h[p]&&(u.current=h={...h}),h[p]=m,(m!==s[p]||m!==i[p])&&(i=h)}return x.createElement(pC.Provider,{value:i,children:n})},Fw=({children:n,component:e},t)=>e?x.createElement(e,{params:t}):typeof n=="function"?n(t):n,FR=n=>{let e=x.useRef(mC);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([s,i])=>i!==t[s])?n:t},$e=({path:n,nest:e,match:t,...s})=>{const i=sc(),[a]=ch(i),[c,u,d]=t??yC(i.parser,n,a,e),h=FR({...OR(),...u});if(!c)return null;const p=d?x.createElement(DR,{base:d},Fw(s,h)):Fw(s,h);return x.createElement(gC.Provider,{value:h,children:p})},Nr=x.forwardRef((n,e)=>{const t=sc(),[s,i]=ch(t),{to:a="",href:c=a,onClick:u,asChild:d,children:h,className:p,replace:m,state:y,...b}=n,_=uC(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(u?.(w),w.defaultPrevented||(w.preventDefault(),i(c,n)))}),v=t.hrefs(c[0]==="~"?c.slice(1):t.base+c,t);return d&&x.isValidElement(h)?x.cloneElement(h,{onClick:_,href:v}):x.createElement("a",{...b,onClick:_,href:v,className:p?.call?p(s===c):p,children:h,ref:e})}),xC=n=>Array.isArray(n)?n.flatMap(e=>xC(e&&e.type===x.Fragment?e.props.children:e)):[n],vC=({children:n,location:e})=>{const t=sc(),[s]=ch(t);for(const i of xC(n)){let a=0;if(x.isValidElement(i)&&(a=yC(t.parser,i.props.path,e||s,i.props.nest))[0])return x.cloneElement(i,{match:a})}return null};var bo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xi=typeof window>"u"||"Deno"in globalThis;function kn(){}function LR(n,e){return typeof n=="function"?n(e):n}function jg(n){return typeof n=="number"&&n>=0&&n!==1/0}function bC(n,e){return Math.max(n+(e||0)-Date.now(),0)}function di(n,e){return typeof n=="function"?n(e):n}function cs(n,e){return typeof n=="function"?n(e):n}function Lw(n,e){const{type:t="all",exact:s,fetchStatus:i,predicate:a,queryKey:c,stale:u}=n;if(c){if(s){if(e.queryHash!==Sy(c,e.options))return!1}else if(!Bl(e.queryKey,c))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||a&&!a(e))}function zw(n,e){const{exact:t,status:s,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Zi(e.options.mutationKey)!==Zi(a))return!1}else if(!Bl(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function Sy(n,e){return(e?.queryKeyHashFn||Zi)(n)}function Zi(n){return JSON.stringify(n,(e,t)=>Ng(t)?Object.keys(t).sort().reduce((s,i)=>(s[i]=t[i],s),{}):t)}function Bl(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Bl(n[t],e[t])):!1}function wC(n,e){if(n===e)return n;const t=Bw(n)&&Bw(e);if(t||Ng(n)&&Ng(e)){const s=t?n:Object.keys(n),i=s.length,a=t?e:Object.keys(e),c=a.length,u=t?[]:{},d=new Set(s);let h=0;for(let p=0;p<c;p++){const m=t?p:a[p];(!t&&d.has(m)||t)&&n[m]===void 0&&e[m]===void 0?(u[m]=void 0,h++):(u[m]=wC(n[m],e[m]),u[m]===n[m]&&n[m]!==void 0&&h++)}return i===c&&h===i?n:u}return e}function Ed(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Bw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Ng(n){if(!Vw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Vw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Vw(n){return Object.prototype.toString.call(n)==="[object Object]"}function zR(n){return new Promise(e=>{setTimeout(e,n)})}function kg(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?wC(n,e):e}function BR(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function VR(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var _y=Symbol();function SC(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===_y?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function _C(n,e){return typeof n=="function"?n(...e):!!n}var UR=class extends bo{#t;#e;#n;constructor(){super(),this.#n=n=>{if(!Xi&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#t!==n&&(this.#t=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Cy=new UR,$R=class extends bo{#t=!0;#e;#n;constructor(){super(),this.#n=n=>{if(!Xi&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(this.setOnline.bind(this))}setOnline(n){this.#t!==n&&(this.#t=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#t}},Ad=new $R;function Tg(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function s(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},t.reject=i=>{s({status:"rejected",reason:i}),e(i)},t}function qR(n){return Math.min(1e3*2**n,3e4)}function CC(n){return(n??"online")==="online"?Ad.isOnline():!0}var Pg=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function jC(n){let e=!1,t=0,s;const i=Tg(),a=()=>i.status!=="pending",c=v=>{if(!a()){const w=new Pg(v);y(w),n.onCancel?.(w)}},u=()=>{e=!0},d=()=>{e=!1},h=()=>Cy.isFocused()&&(n.networkMode==="always"||Ad.isOnline())&&n.canRun(),p=()=>CC(n.networkMode)&&n.canRun(),m=v=>{a()||(s?.(),i.resolve(v))},y=v=>{a()||(s?.(),i.reject(v))},b=()=>new Promise(v=>{s=w=>{(a()||h())&&v(w)},n.onPause?.()}).then(()=>{s=void 0,a()||n.onContinue?.()}),_=()=>{if(a())return;let v;const w=t===0?n.initialPromise:void 0;try{v=w??n.fn()}catch(N){v=Promise.reject(N)}Promise.resolve(v).then(m).catch(N=>{if(a())return;const P=n.retry??(Xi?0:3),C=n.retryDelay??qR,A=typeof C=="function"?C(t,N):C,k=P===!0||typeof P=="number"&&t<P||typeof P=="function"&&P(t,N);if(e||!k){y(N);return}t++,n.onFail?.(t,N),zR(A).then(()=>h()?void 0:b()).then(()=>{e?y(N):_()})})};return{promise:i,status:()=>i.status,cancel:c,continue:()=>(s?.(),i),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?_():b().then(_),i)}}var WR=n=>setTimeout(n,0);function GR(){let n=[],e=0,t=u=>{u()},s=u=>{u()},i=WR;const a=u=>{e?n.push(u):i(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&i(()=>{s(()=>{u.forEach(d=>{t(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||c()}return d},batchCalls:u=>(...d)=>{a(()=>{u(...d)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{i=u}}}var tn=GR(),NC=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jg(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Xi?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},HR=class extends NC{#t;#e;#n;#s;#r;#a;#o;constructor(n){super(),this.#o=!1,this.#a=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#s=n.client,this.#n=this.#s.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#t=KR(this.options),this.state=n.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){this.options={...this.#a,...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=kg(this.state.data,n,this.options);return this.#i({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#i({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#r?.promise;return this.#r?.cancel(n),e?e.then(kn).catch(kn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(n=>cs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_y||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>di(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!bC(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const t=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,t.signal)})},i=()=>{const u=SC(this.options,e),h=(()=>{const p={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(p),p})();return this.#o=!1,this.options.persister?this.options.persister(u,h,this):u(h)},c=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return s(u),u})();this.options.behavior?.onFetch(c,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#i({type:"fetch",meta:c.fetchOptions?.meta}),this.#r=jC({initialPromise:e?.initialPromise,fn:c.fetchFn,onCancel:u=>{u instanceof Pg&&u.revert&&this.setState({...this.#e,fetchStatus:"idle"}),t.abort()},onFail:(u,d)=>{this.#i({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const u=await this.#r.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Pg){if(u.silent)return this.#r.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#i({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...kC(t.data,this.options),fetchMeta:n.meta??null};case"success":const s={...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=n.manual?s:void 0,s;case"error":const i=n.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),tn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function kC(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:CC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function KR(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var QR=class extends bo{constructor(n={}){super(),this.config=n,this.#t=new Map}#t;build(n,e,t){const s=e.queryKey,i=e.queryHash??Sy(s,e);let a=this.get(i);return a||(a=new HR({client:n,queryKey:s,queryHash:i,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(s)}),this.add(a)),a}add(n){this.#t.has(n.queryHash)||(this.#t.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#t.get(n.queryHash);e&&(n.destroy(),e===n&&this.#t.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){tn.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#t.get(n)}getAll(){return[...this.#t.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Lw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Lw(n,t)):e}notify(n){tn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},YR=class extends NC{#t;#e;#n;constructor(n){super(),this.mutationId=n.mutationId,this.#e=n.mutationCache,this.#t=[],this.state=n.state||TC(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#s({type:"continue"})};this.#n=jC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#s({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const t=this.state.status==="pending",s=!this.#n.canStart();try{if(t)e();else{this.#s({type:"pending",variables:n,isPaused:s}),await this.#e.config.onMutate?.(n,this);const a=await this.options.onMutate?.(n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:n,isPaused:s})}const i=await this.#n.start();return await this.#e.config.onSuccess?.(i,n,this.state.context,this),await this.options.onSuccess?.(i,n,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,n,this.state.context),this.#s({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,n,this.state.context,this),await this.options.onError?.(i,n,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,n,this.state.context),i}finally{this.#s({type:"error",error:i})}}finally{this.#e.runNext(this)}}#s(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),tn.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#e.notify({mutation:this,type:"updated",action:n})})}};function TC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var XR=class extends bo{constructor(n={}){super(),this.config=n,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(n,e,t){const s=new YR({mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(s),s}add(n){this.#t.add(n);const e=Vu(n);if(typeof e=="string"){const t=this.#e.get(e);t?t.push(n):this.#e.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#t.delete(n)){const e=Vu(n);if(typeof e=="string"){const t=this.#e.get(e);if(t)if(t.length>1){const s=t.indexOf(n);s!==-1&&t.splice(s,1)}else t[0]===n&&this.#e.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Vu(n);if(typeof e=="string"){const s=this.#e.get(e)?.find(i=>i.state.status==="pending");return!s||s===n}else return!0}runNext(n){const e=Vu(n);return typeof e=="string"?this.#e.get(e)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){tn.batch(()=>{this.#t.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>zw(e,t))}findAll(n={}){return this.getAll().filter(e=>zw(n,e))}notify(n){tn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return tn.batch(()=>Promise.all(n.map(e=>e.continue().catch(kn))))}};function Vu(n){return n.options.scope?.id}function Uw(n){return{onFetch:(e,t)=>{const s=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],c=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let p=!1;const m=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=SC(e.options,e.fetchOptions),b=async(_,v,w)=>{if(p)return Promise.reject();if(v==null&&_.pages.length)return Promise.resolve(_);const P=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:v,direction:w?"backward":"forward",meta:e.options.meta};return m(M),M})(),C=await y(P),{maxPages:A}=e.options,k=w?VR:BR;return{pages:k(_.pages,C,A),pageParams:k(_.pageParams,v,A)}};if(i&&a.length){const _=i==="backward",v=_?ZR:$w,w={pages:a,pageParams:c},N=v(s,w);u=await b(w,N,_)}else{const _=n??a.length;do{const v=d===0?c[0]??s.initialPageParam:$w(s,u);if(d>0&&v==null)break;u=await b(u,v),d++}while(d<_)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function $w(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function ZR(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var JR=class{#t;#e;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#t=n.queryCache||new QR,this.#e=n.mutationCache||new XR,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Cy.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#i=Ad.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#t.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#e.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#t.build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(di(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return this.#t.findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),a=this.#t.get(s.queryHash)?.state.data,c=LR(e,a);if(c!==void 0)return this.#t.build(this,s).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return tn.batch(()=>this.#t.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#t.get(e.queryHash)?.state}removeQueries(n){const e=this.#t;tn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#t;return tn.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=tn.batch(()=>this.#t.findAll(n).map(i=>i.cancel(t)));return Promise.all(s).then(kn).catch(kn)}invalidateQueries(n,e={}){return tn.batch(()=>(this.#t.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=tn.batch(()=>this.#t.findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(kn)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(kn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#t.build(this,e);return t.isStaleByTime(di(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(kn).catch(kn)}fetchInfiniteQuery(n){return n.behavior=Uw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(kn).catch(kn)}ensureInfiniteQueryData(n){return n.behavior=Uw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Ad.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(Zi(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(s=>{Bl(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(Zi(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(s=>{Bl(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Sy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_y&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},eI=class extends bo{constructor(n,e){super(),this.options=e,this.#t=n,this.#i=null,this.#o=Tg(),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#c;#f;#u;#d;#l;#h;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),qw(this.#e,this.options)?this.#m():this.updateResult(),this.#S())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Eg(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Eg(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#e.removeObserver(this)}setOptions(n){const e=this.options,t=this.#e;if(this.options=this.#t.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof cs(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),e._defaulted&&!Ed(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&Ww(this.#e,t,this.options,e)&&this.#m(),this.updateResult(),s&&(this.#e!==t||cs(this.options.enabled,this.#e)!==cs(e.enabled,this.#e)||di(this.options.staleTime,this.#e)!==di(e.staleTime,this.#e))&&this.#g();const i=this.#x();s&&(this.#e!==t||cs(this.options.enabled,this.#e)!==cs(e.enabled,this.#e)||i!==this.#h)&&this.#y(i)}getOptimisticResult(n){const e=this.#t.getQueryCache().build(this.#t,n),t=this.createResult(e,n);return nI(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#e.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,s)=>(this.trackProp(s),e?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,s))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#e}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#t.defaultQueryOptions(n),t=this.#t.getQueryCache().build(this.#t,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#m({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#m(n){this.#w();let e=this.#e.fetch(this.options,n);return n?.throwOnError||(e=e.catch(kn)),e}#g(){this.#_();const n=di(this.options.staleTime,this.#e);if(Xi||this.#s.isStale||!jg(n))return;const t=bC(this.#s.dataUpdatedAt,n)+1;this.#d=setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(n){this.#v(),this.#h=n,!(Xi||cs(this.options.enabled,this.#e)===!1||!jg(this.#h)||this.#h===0)&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||Cy.isFocused())&&this.#m()},this.#h))}#S(){this.#g(),this.#y(this.#x())}#_(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#v(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(n,e){const t=this.#e,s=this.options,i=this.#s,a=this.#r,c=this.#a,d=n!==t?n.state:this.#n,{state:h}=n;let p={...h},m=!1,y;if(e._optimisticResults){const T=this.hasListeners(),I=!T&&qw(n,e),O=T&&Ww(n,t,e,s);(I||O)&&(p={...p,...kC(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:_,status:v}=p;y=p.data;let w=!1;if(e.placeholderData!==void 0&&y===void 0&&v==="pending"){let T;i?.isPlaceholderData&&e.placeholderData===c?.placeholderData?(T=i.data,w=!0):T=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,T!==void 0&&(v="success",y=kg(i?.data,T,e),m=!0)}if(e.select&&y!==void 0&&!w)if(i&&y===a?.data&&e.select===this.#c)y=this.#f;else try{this.#c=e.select,y=e.select(y),y=kg(i?.data,y,e),this.#f=y,this.#i=null}catch(T){this.#i=T}this.#i&&(b=this.#i,y=this.#f,_=Date.now(),v="error");const N=p.fetchStatus==="fetching",P=v==="pending",C=v==="error",A=P&&N,k=y!==void 0,E={status:v,fetchStatus:p.fetchStatus,isPending:P,isSuccess:v==="success",isError:C,isInitialLoading:A,isLoading:A,data:y,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:N,isRefetching:N&&!P,isLoadingError:C&&!k,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:C&&k,isStale:jy(n,e),refetch:this.refetch,promise:this.#o,isEnabled:cs(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const T=F=>{E.status==="error"?F.reject(E.error):E.data!==void 0&&F.resolve(E.data)},I=()=>{const F=this.#o=E.promise=Tg();T(F)},O=this.#o;switch(O.status){case"pending":n.queryHash===t.queryHash&&T(O);break;case"fulfilled":(E.status==="error"||E.data!==O.value)&&I();break;case"rejected":(E.status!=="error"||E.error!==O.reason)&&I();break}}return E}updateResult(){const n=this.#s,e=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#a=this.options,this.#r.data!==void 0&&(this.#u=this.#e),Ed(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(c=>{const u=c;return this.#s[u]!==n[u]&&a.has(u)})};this.#b({listeners:t()})}#w(){const n=this.#t.getQueryCache().build(this.#t,this.options);if(n===this.#e)return;const e=this.#e;this.#e=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#S()}#b(n){tn.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function tI(n,e){return cs(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function qw(n,e){return tI(n,e)||n.state.data!==void 0&&Eg(n,e,e.refetchOnMount)}function Eg(n,e,t){if(cs(e.enabled,n)!==!1&&di(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&jy(n,e)}return!1}function Ww(n,e,t,s){return(n!==e||cs(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&jy(n,t)}function jy(n,e){return cs(e.enabled,n)!==!1&&n.isStaleByTime(di(e.staleTime,n))}function nI(n,e){return!Ed(n.getCurrentResult(),e)}var sI=class extends bo{#t;#e=void 0;#n;#s;constructor(e,t){super(),this.#t=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#t.defaultMutationOptions(e),Ed(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&Zi(t.mutationKey)!==Zi(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,t){return this.#s=t,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??TC();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){tn.batch(()=>{if(this.#s&&this.hasListeners()){const t=this.#e.variables,s=this.#e.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,s),this.#s.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,s),this.#s.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(t=>{t(this.#e)})})}},PC=x.createContext(void 0),Ny=n=>{const e=x.useContext(PC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},rI=({client:n,children:e})=>(x.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),r.jsx(PC.Provider,{value:n,children:e})),EC=x.createContext(!1),iI=()=>x.useContext(EC);EC.Provider;function aI(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var oI=x.createContext(aI()),lI=()=>x.useContext(oI),cI=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},uI=n=>{x.useEffect(()=>{n.clearReset()},[n])},dI=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(i&&n.data===void 0||_C(t,[n.error,s])),hI=n=>{if(n.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},fI=(n,e)=>n.isLoading&&n.isFetching&&!e,pI=(n,e)=>n?.suspense&&e.isPending,Gw=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function mI(n,e,t){const s=iI(),i=lI(),a=Ny(),c=a.defaultQueryOptions(n);a.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=s?"isRestoring":"optimistic",hI(c),cI(c,i),uI(i);const u=!a.getQueryCache().get(c.queryHash),[d]=x.useState(()=>new e(a,c)),h=d.getOptimisticResult(c),p=!s&&n.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(m=>{const y=p?d.subscribe(tn.batchCalls(m)):kn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),x.useEffect(()=>{d.setOptions(c)},[c,d]),pI(c,h))throw Gw(c,d,i);if(dI({result:h,errorResetBoundary:i,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw h.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(c,h),c.experimental_prefetchInRender&&!Xi&&fI(h,s)&&(u?Gw(c,d,i):a.getQueryCache().get(c.queryHash)?.promise)?.catch(kn).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?h:d.trackResult(h)}function wo(n,e){return mI(n,eI)}function Et(n,e){const t=Ny(),[s]=x.useState(()=>new sI(t,n));x.useEffect(()=>{s.setOptions(n)},[s,n]);const i=x.useSyncExternalStore(x.useCallback(c=>s.subscribe(tn.batchCalls(c)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=x.useCallback((c,u)=>{s.mutate(c,u).catch(kn)},[s]);if(i.error&&_C(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function AC(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function yt(n,e,t){const s=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await AC(s),s}const gI=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return await AC(t),await t.json()},ky=new JR({defaultOptions:{queries:{queryFn:gI({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),yI=1,xI=1e6;let rm=0;function vI(){return rm=(rm+1)%Number.MAX_SAFE_INTEGER,rm.toString()}const im=new Map,Hw=n=>{if(im.has(n))return;const e=setTimeout(()=>{im.delete(n),Dl({type:"REMOVE_TOAST",toastId:n})},xI);im.set(n,e)},bI=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,yI)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Hw(t):n.toasts.forEach(s=>{Hw(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},md=[];let gd={toasts:[]};function Dl(n){gd=bI(gd,n),md.forEach(e=>{e(gd)})}function wI({...n}){const e=vI(),t=i=>Dl({type:"UPDATE_TOAST",toast:{...i,id:e}}),s=()=>Dl({type:"DISMISS_TOAST",toastId:e});return Dl({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||s()}}}),{id:e,dismiss:s,update:t}}function $t(){const[n,e]=x.useState(gd);return x.useEffect(()=>(md.push(e),()=>{const t=md.indexOf(e);t>-1&&md.splice(t,1)}),[n]),{...n,toast:wI,dismiss:t=>Dl({type:"DISMISS_TOAST",toastId:t})}}var So=lC();const SI=Ls(So);function me(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Kw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function uh(...n){return e=>{let t=!1;const s=n.map(i=>{const a=Kw(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():Kw(n[i],null)}}}}function qe(...n){return x.useCallback(uh(...n),n)}function _I(n,e){const t=x.createContext(e),s=a=>{const{children:c,...u}=a,d=x.useMemo(()=>u,Object.values(u));return r.jsx(t.Provider,{value:d,children:c})};s.displayName=n+"Provider";function i(a){const c=x.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[s,i]}function wn(n,e=[]){let t=[];function s(a,c){const u=x.createContext(c),d=t.length;t=[...t,c];const h=m=>{const{scope:y,children:b,..._}=m,v=y?.[n]?.[d]||u,w=x.useMemo(()=>_,Object.values(_));return r.jsx(v.Provider,{value:w,children:b})};h.displayName=a+"Provider";function p(m,y){const b=y?.[n]?.[d]||u,_=x.useContext(b);if(_)return _;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[h,p]}const i=()=>{const a=t.map(c=>x.createContext(c));return function(u){const d=u?.[n]||a;return x.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[s,CI(i,...e)]}function CI(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=s.reduce((u,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...u,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function Ji(n){const e=NI(n),t=x.forwardRef((s,i)=>{const{children:a,...c}=s,u=x.Children.toArray(a),d=u.find(TI);if(d){const h=d.props.children,p=u.map(m=>m===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return r.jsx(e,{...c,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,p):null})}return r.jsx(e,{...c,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}var jI=Ji("Slot");function NI(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const c=EI(i),u=PI(a,i.props);return i.type!==x.Fragment&&(u.ref=s?uh(s,c):c),x.cloneElement(i,u)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var MC=Symbol("radix.slottable");function kI(n){const e=({children:t})=>r.jsx(r.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=MC,e}function TI(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===MC}function PI(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...u)=>{const d=a(...u);return i(...u),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function EI(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function rc(n){const e=n+"CollectionProvider",[t,s]=wn(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=v=>{const{scope:w,children:N}=v,P=mt.useRef(null),C=mt.useRef(new Map).current;return r.jsx(i,{scope:w,itemMap:C,collectionRef:P,children:N})};c.displayName=e;const u=n+"CollectionSlot",d=Ji(u),h=mt.forwardRef((v,w)=>{const{scope:N,children:P}=v,C=a(u,N),A=qe(w,C.collectionRef);return r.jsx(d,{ref:A,children:P})});h.displayName=u;const p=n+"CollectionItemSlot",m="data-radix-collection-item",y=Ji(p),b=mt.forwardRef((v,w)=>{const{scope:N,children:P,...C}=v,A=mt.useRef(null),k=qe(w,A),M=a(p,N);return mt.useEffect(()=>(M.itemMap.set(A,{ref:A,...C}),()=>void M.itemMap.delete(A))),r.jsx(y,{[m]:"",ref:k,children:P})});b.displayName=p;function _(v){const w=a(n+"CollectionConsumer",v);return mt.useCallback(()=>{const P=w.collectionRef.current;if(!P)return[];const C=Array.from(P.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((M,E)=>C.indexOf(M.ref.current)-C.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:c,Slot:h,ItemSlot:b},_,s]}var AI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=AI.reduce((n,e)=>{const t=Ji(`Primitive.${e}`),s=x.forwardRef((i,a)=>{const{asChild:c,...u}=i,d=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(d,{...u,ref:a})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function Ty(n,e){n&&So.flushSync(()=>n.dispatchEvent(e))}function Dt(n){const e=x.useRef(n);return x.useEffect(()=>{e.current=n}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}function MI(n,e=globalThis?.document){const t=Dt(n);x.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var RI="DismissableLayer",Ag="dismissableLayer.update",II="dismissableLayer.pointerDownOutside",OI="dismissableLayer.focusOutside",Qw,RC=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_o=x.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...d}=n,h=x.useContext(RC),[p,m]=x.useState(null),y=p?.ownerDocument??globalThis?.document,[,b]=x.useState({}),_=qe(e,E=>m(E)),v=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),N=v.indexOf(w),P=p?v.indexOf(p):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,A=P>=N,k=FI(E=>{const T=E.target,I=[...h.branches].some(O=>O.contains(T));!A||I||(i?.(E),c?.(E),E.defaultPrevented||u?.())},y),M=LI(E=>{const T=E.target;[...h.branches].some(O=>O.contains(T))||(a?.(E),c?.(E),E.defaultPrevented||u?.())},y);return MI(E=>{P===h.layers.size-1&&(s?.(E),!E.defaultPrevented&&u&&(E.preventDefault(),u()))},y),x.useEffect(()=>{if(p)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Qw=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),Yw(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Qw)}},[p,y,t,h]),x.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),Yw())},[p,h]),x.useEffect(()=>{const E=()=>b({});return document.addEventListener(Ag,E),()=>document.removeEventListener(Ag,E)},[]),r.jsx(je.div,{...d,ref:_,style:{pointerEvents:C?A?"auto":"none":void 0,...n.style},onFocusCapture:me(n.onFocusCapture,M.onFocusCapture),onBlurCapture:me(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:me(n.onPointerDownCapture,k.onPointerDownCapture)})});_o.displayName=RI;var DI="DismissableLayerBranch",IC=x.forwardRef((n,e)=>{const t=x.useContext(RC),s=x.useRef(null),i=qe(e,s);return x.useEffect(()=>{const a=s.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),r.jsx(je.div,{...n,ref:i})});IC.displayName=DI;function FI(n,e=globalThis?.document){const t=Dt(n),s=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=u=>{if(u.target&&!s.current){let d=function(){OC(II,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);s.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function LI(n,e=globalThis?.document){const t=Dt(n),s=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!s.current&&OC(OI,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Yw(){const n=new CustomEvent(Ag);document.dispatchEvent(n)}function OC(n,e,t,{discrete:s}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?Ty(i,a):i.dispatchEvent(a)}var zI=_o,BI=IC,Ut=globalThis?.document?x.useLayoutEffect:()=>{},VI="Portal",ic=x.forwardRef((n,e)=>{const{container:t,...s}=n,[i,a]=x.useState(!1);Ut(()=>a(!0),[]);const c=t||i&&globalThis?.document?.body;return c?SI.createPortal(r.jsx(je.div,{...s,ref:e}),c):null});ic.displayName=VI;function UI(n,e){return x.useReducer((t,s)=>e[t][s]??t,n)}var Sn=n=>{const{present:e,children:t}=n,s=$I(e),i=typeof t=="function"?t({present:s.isPresent}):x.Children.only(t),a=qe(s.ref,qI(i));return typeof t=="function"||s.isPresent?x.cloneElement(i,{ref:a}):null};Sn.displayName="Presence";function $I(n){const[e,t]=x.useState(),s=x.useRef(null),i=x.useRef(n),a=x.useRef("none"),c=n?"mounted":"unmounted",[u,d]=UI(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=Uu(s.current);a.current=u==="mounted"?h:"none"},[u]),Ut(()=>{const h=s.current,p=i.current;if(p!==n){const y=a.current,b=Uu(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(p&&y!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Ut(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,m=b=>{const v=Uu(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&v&&(d("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},y=b=>{b.target===e&&(a.current=Uu(s.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:x.useCallback(h=>{s.current=h?getComputedStyle(h):null,t(h)},[])}}function Uu(n){return n?.animationName||"none"}function qI(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var WI=vy[" useInsertionEffect ".trim().toString()]||Ut;function nr({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,a,c]=GI({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const p=x.useRef(n!==void 0);x.useEffect(()=>{const m=p.current;m!==u&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,s])}const h=x.useCallback(p=>{if(u){const m=HI(p)?p(n):p;m!==n&&c.current?.(m)}else a(p)},[u,n,a,c]);return[d,h]}function GI({defaultProp:n,onChange:e}){const[t,s]=x.useState(n),i=x.useRef(t),a=x.useRef(e);return WI(()=>{a.current=e},[e]),x.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,s,a]}function HI(n){return typeof n=="function"}var DC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),KI="VisuallyHidden",dh=x.forwardRef((n,e)=>r.jsx(je.span,{...n,ref:e,style:{...DC,...n.style}}));dh.displayName=KI;var QI=dh,Py="ToastProvider",[Ey,YI,XI]=rc("Toast"),[FC,FH]=wn("Toast",[XI]),[ZI,hh]=FC(Py),LC=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:c}=n,[u,d]=x.useState(null),[h,p]=x.useState(0),m=x.useRef(!1),y=x.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Py}\`. Expected non-empty \`string\`.`),r.jsx(Ey.Provider,{scope:e,children:r.jsx(ZI,{scope:e,label:t,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:x.useCallback(()=>p(b=>b+1),[]),onToastRemove:x.useCallback(()=>p(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y,children:c})})};LC.displayName=Py;var zC="ToastViewport",JI=["F8"],Mg="toast.viewportPause",Rg="toast.viewportResume",BC=x.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=JI,label:i="Notifications ({hotkey})",...a}=n,c=hh(zC,t),u=YI(t),d=x.useRef(null),h=x.useRef(null),p=x.useRef(null),m=x.useRef(null),y=qe(e,m,c.onViewportChange),b=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=c.toastCount>0;x.useEffect(()=>{const w=N=>{s.length!==0&&s.every(C=>N[C]||N.code===C)&&m.current?.focus()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),x.useEffect(()=>{const w=d.current,N=m.current;if(_&&w&&N){const P=()=>{if(!c.isClosePausedRef.current){const M=new CustomEvent(Mg);N.dispatchEvent(M),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const M=new CustomEvent(Rg);N.dispatchEvent(M),c.isClosePausedRef.current=!1}},A=M=>{!w.contains(M.relatedTarget)&&C()},k=()=>{w.contains(document.activeElement)||C()};return w.addEventListener("focusin",P),w.addEventListener("focusout",A),w.addEventListener("pointermove",P),w.addEventListener("pointerleave",k),window.addEventListener("blur",P),window.addEventListener("focus",C),()=>{w.removeEventListener("focusin",P),w.removeEventListener("focusout",A),w.removeEventListener("pointermove",P),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",P),window.removeEventListener("focus",C)}}},[_,c.isClosePausedRef]);const v=x.useCallback(({tabbingDirection:w})=>{const P=u().map(C=>{const A=C.ref.current,k=[A,...hO(A)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?P.reverse():P).flat()},[u]);return x.useEffect(()=>{const w=m.current;if(w){const N=P=>{const C=P.altKey||P.ctrlKey||P.metaKey;if(P.key==="Tab"&&!C){const k=document.activeElement,M=P.shiftKey;if(P.target===w&&M){h.current?.focus();return}const I=v({tabbingDirection:M?"backwards":"forwards"}),O=I.findIndex(F=>F===k);am(I.slice(O+1))?P.preventDefault():M?h.current?.focus():p.current?.focus()}};return w.addEventListener("keydown",N),()=>w.removeEventListener("keydown",N)}},[u,v]),r.jsxs(BI,{ref:d,role:"region","aria-label":i.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&r.jsx(Ig,{ref:h,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});am(w)}}),r.jsx(Ey.Slot,{scope:t,children:r.jsx(je.ol,{tabIndex:-1,...a,ref:y})}),_&&r.jsx(Ig,{ref:p,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});am(w)}})]})});BC.displayName=zC;var VC="ToastFocusProxy",Ig=x.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...i}=n,a=hh(VC,t);return r.jsx(dh,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:c=>{const u=c.relatedTarget;!a.viewport?.contains(u)&&s()}})});Ig.displayName=VC;var ac="Toast",eO="toast.swipeStart",tO="toast.swipeMove",nO="toast.swipeCancel",sO="toast.swipeEnd",UC=x.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:i,onOpenChange:a,...c}=n,[u,d]=nr({prop:s,defaultProp:i??!0,onChange:a,caller:ac});return r.jsx(Sn,{present:t||u,children:r.jsx(aO,{open:u,...c,ref:e,onClose:()=>d(!1),onPause:Dt(n.onPause),onResume:Dt(n.onResume),onSwipeStart:me(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(n.onSwipeMove,h=>{const{x:p,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:me(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(n.onSwipeEnd,h=>{const{x:p,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});UC.displayName=ac;var[rO,iO]=FC(ac,{onClose(){}}),aO=x.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:i,open:a,onClose:c,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:p,onSwipeMove:m,onSwipeCancel:y,onSwipeEnd:b,..._}=n,v=hh(ac,t),[w,N]=x.useState(null),P=qe(e,z=>N(z)),C=x.useRef(null),A=x.useRef(null),k=i||v.duration,M=x.useRef(0),E=x.useRef(k),T=x.useRef(0),{onToastAdd:I,onToastRemove:O}=v,F=Dt(()=>{w?.contains(document.activeElement)&&v.viewport?.focus(),c()}),L=x.useCallback(z=>{!z||z===1/0||(window.clearTimeout(T.current),M.current=new Date().getTime(),T.current=window.setTimeout(F,z))},[F]);x.useEffect(()=>{const z=v.viewport;if(z){const W=()=>{L(E.current),h?.()},G=()=>{const K=new Date().getTime()-M.current;E.current=E.current-K,window.clearTimeout(T.current),d?.()};return z.addEventListener(Mg,G),z.addEventListener(Rg,W),()=>{z.removeEventListener(Mg,G),z.removeEventListener(Rg,W)}}},[v.viewport,k,d,h,L]),x.useEffect(()=>{a&&!v.isClosePausedRef.current&&L(k)},[a,k,v.isClosePausedRef,L]),x.useEffect(()=>(I(),()=>O()),[I,O]);const V=x.useMemo(()=>w?QC(w):null,[w]);return v.viewport?r.jsxs(r.Fragment,{children:[V&&r.jsx(oO,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:V}),r.jsx(rO,{scope:t,onClose:F,children:So.createPortal(r.jsx(Ey.ItemSlot,{scope:t,children:r.jsx(zI,{asChild:!0,onEscapeKeyDown:me(u,()=>{v.isFocusedToastEscapeKeyDownRef.current||F(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(je.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,..._,ref:P,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:me(n.onKeyDown,z=>{z.key==="Escape"&&(u?.(z.nativeEvent),z.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:me(n.onPointerDown,z=>{z.button===0&&(C.current={x:z.clientX,y:z.clientY})}),onPointerMove:me(n.onPointerMove,z=>{if(!C.current)return;const W=z.clientX-C.current.x,G=z.clientY-C.current.y,K=!!A.current,$=["left","right"].includes(v.swipeDirection),H=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ee=$?H(0,W):0,R=$?0:H(0,G),U=z.pointerType==="touch"?10:2,X={x:ee,y:R},re={originalEvent:z,delta:X};K?(A.current=X,$u(tO,m,re,{discrete:!1})):Xw(X,v.swipeDirection,U)?(A.current=X,$u(eO,p,re,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(W)>U||Math.abs(G)>U)&&(C.current=null)}),onPointerUp:me(n.onPointerUp,z=>{const W=A.current,G=z.target;if(G.hasPointerCapture(z.pointerId)&&G.releasePointerCapture(z.pointerId),A.current=null,C.current=null,W){const K=z.currentTarget,$={originalEvent:z,delta:W};Xw(W,v.swipeDirection,v.swipeThreshold)?$u(sO,b,$,{discrete:!0}):$u(nO,y,$,{discrete:!0}),K.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),oO=n=>{const{__scopeToast:e,children:t,...s}=n,i=hh(ac,e),[a,c]=x.useState(!1),[u,d]=x.useState(!1);return uO(()=>c(!0)),x.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:r.jsx(ic,{asChild:!0,children:r.jsx(dh,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",t]})})})},lO="ToastTitle",$C=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return r.jsx(je.div,{...s,ref:e})});$C.displayName=lO;var cO="ToastDescription",qC=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return r.jsx(je.div,{...s,ref:e})});qC.displayName=cO;var WC="ToastAction",GC=x.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?r.jsx(KC,{altText:t,asChild:!0,children:r.jsx(Ay,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${WC}\`. Expected non-empty \`string\`.`),null)});GC.displayName=WC;var HC="ToastClose",Ay=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,i=iO(HC,t);return r.jsx(KC,{asChild:!0,children:r.jsx(je.button,{type:"button",...s,ref:e,onClick:me(n.onClick,i.onClose)})})});Ay.displayName=HC;var KC=x.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...i}=n;return r.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function QC(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),dO(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const c=s.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...QC(s))}}),e}function $u(n,e,t,{discrete:s}){const i=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?Ty(i,a):i.dispatchEvent(a)}var Xw=(n,e,t=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),a=s>i;return e==="left"||e==="right"?a&&s>t:!a&&i>t};function uO(n=()=>{}){const e=Dt(n);Ut(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function dO(n){return n.nodeType===n.ELEMENT_NODE}function hO(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function am(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var fO=LC,YC=BC,XC=UC,ZC=$C,JC=qC,ej=GC,tj=Ay;function nj(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=nj(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function sj(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=nj(n))&&(s&&(s+=" "),s+=e);return s}const Zw=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Jw=sj,fh=(n,e)=>t=>{var s;if(e?.variants==null)return Jw(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,c=Object.keys(i).map(h=>{const p=t?.[h],m=a?.[h];if(p===null)return null;const y=Zw(p)||Zw(m);return i[h][y]}),u=t&&Object.entries(t).reduce((h,p)=>{let[m,y]=p;return y===void 0||(h[m]=y),h},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,p)=>{let{class:m,className:y,...b}=p;return Object.entries(b).every(_=>{let[v,w]=_;return Array.isArray(w)?w.includes({...a,...u}[v]):{...a,...u}[v]===w})?[...h,m,y]:h},[]);return Jw(n,c,d,t?.class,t?.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rj=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=x.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:c,...u},d)=>x.createElement("svg",{ref:d,...mO,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:rj("lucide",i),...u},[...c.map(([h,p])=>x.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(n,e)=>{const t=x.forwardRef(({className:s,...i},a)=>x.createElement(gO,{ref:a,iconNode:e,className:rj(`lucide-${pO(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=Ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=Ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=Ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=Ie("Dice1",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Ie("Drum",[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=Ie("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=Ie("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Ie("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=Ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Ie("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=Ie("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=Ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ie("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=Ie("Piano",[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=Ie("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=Ie("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Ie("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Ie("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=Ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Ie("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=Ie("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Ie("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),By="-",LO=n=>{const e=BO(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:c=>{const u=c.split(By);return u[0]===""&&u.length!==1&&u.shift(),fj(u,e)||zO(c)},getConflictingClassGroupIds:(c,u)=>{const d=t[c]||[];return u&&s[c]?[...d,...s[c]]:d}}},fj=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?fj(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(By);return e.validators.find(({validator:c})=>c(a))?.classGroupId},t1=/^\[(.+)\]$/,zO=n=>{if(t1.test(n)){const e=t1.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},BO=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return UO(Object.entries(n.classGroups),t).forEach(([a,c])=>{Dg(c,s,a,e)}),s},Dg=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:n1(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(VO(i)){Dg(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,c])=>{Dg(c,n1(e,a),t,s)})})},n1=(n,e)=>{let t=n;return e.split(By).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},VO=n=>n.isThemeGetter,UO=(n,e)=>e?n.map(([t,s])=>{const i=s.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[t,i]}):n,$O=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,s=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=s.get(a))!==void 0)return i(a,c),c},set(a,c){t.has(a)?t.set(a,c):i(a,c)}}},pj="!",qO=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,i=e[0],a=e.length,c=u=>{const d=[];let h=0,p=0,m;for(let w=0;w<u.length;w++){let N=u[w];if(h===0){if(N===i&&(s||u.slice(w,w+a)===e)){d.push(u.slice(p,w)),p=w+a;continue}if(N==="/"){m=w;continue}}N==="["?h++:N==="]"&&h--}const y=d.length===0?u:u.substring(p),b=y.startsWith(pj),_=b?y.substring(1):y,v=m&&m>p?m-p:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:v}};return t?u=>t({className:u,parseClassName:c}):c},WO=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},GO=n=>({cache:$O(n.cacheSize),parseClassName:qO(n),...LO(n)}),HO=/\s+/,KO=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i}=e,a=[],c=n.trim().split(HO);let u="";for(let d=c.length-1;d>=0;d-=1){const h=c[d],{modifiers:p,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:b}=t(h);let _=!!b,v=s(_?y.substring(0,b):y);if(!v){if(!_){u=h+(u.length>0?" "+u:u);continue}if(v=s(y),!v){u=h+(u.length>0?" "+u:u);continue}_=!1}const w=WO(p).join(":"),N=m?w+pj:w,P=N+v;if(a.includes(P))continue;a.push(P);const C=i(v,_);for(let A=0;A<C.length;++A){const k=C[A];a.push(N+k)}u=h+(u.length>0?" "+u:u)}return u};function QO(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=mj(e))&&(s&&(s+=" "),s+=t);return s}const mj=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=mj(n[s]))&&(t&&(t+=" "),t+=e);return t};function YO(n,...e){let t,s,i,a=c;function c(d){const h=e.reduce((p,m)=>m(p),n());return t=GO(h),s=t.cache.get,i=t.cache.set,a=u,u(d)}function u(d){const h=s(d);if(h)return h;const p=KO(d,t);return i(d,p),p}return function(){return a(QO.apply(null,arguments))}}const wt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},gj=/^\[(?:([a-z-]+):)?(.+)\]$/i,XO=/^\d+\/\d+$/,ZO=new Set(["px","full","screen"]),JO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wr=n=>ro(n)||ZO.has(n)||XO.test(n),ni=n=>Co(n,"length",d4),ro=n=>!!n&&!Number.isNaN(Number(n)),om=n=>Co(n,"number",ro),Cl=n=>!!n&&Number.isInteger(Number(n)),r4=n=>n.endsWith("%")&&ro(n.slice(0,-1)),Ke=n=>gj.test(n),si=n=>JO.test(n),i4=new Set(["length","size","percentage"]),a4=n=>Co(n,i4,yj),o4=n=>Co(n,"position",yj),l4=new Set(["image","url"]),c4=n=>Co(n,l4,f4),u4=n=>Co(n,"",h4),jl=()=>!0,Co=(n,e,t)=>{const s=gj.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},d4=n=>e4.test(n)&&!t4.test(n),yj=()=>!1,h4=n=>n4.test(n),f4=n=>s4.test(n),p4=()=>{const n=wt("colors"),e=wt("spacing"),t=wt("blur"),s=wt("brightness"),i=wt("borderColor"),a=wt("borderRadius"),c=wt("borderSpacing"),u=wt("borderWidth"),d=wt("contrast"),h=wt("grayscale"),p=wt("hueRotate"),m=wt("invert"),y=wt("gap"),b=wt("gradientColorStops"),_=wt("gradientColorStopPositions"),v=wt("inset"),w=wt("margin"),N=wt("opacity"),P=wt("padding"),C=wt("saturate"),A=wt("scale"),k=wt("sepia"),M=wt("skew"),E=wt("space"),T=wt("translate"),I=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ke,e],L=()=>[Ke,e],V=()=>["",wr,ni],z=()=>["auto",ro,Ke],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Ke],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>[ro,Ke];return{cacheSize:500,separator:":",theme:{colors:[jl],spacing:[wr,ni],blur:["none","",si,Ke],brightness:R(),borderColor:[n],borderRadius:["none","","full",si,Ke],borderSpacing:L(),borderWidth:V(),contrast:R(),grayscale:H(),hueRotate:R(),invert:H(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[r4,ni],inset:F(),margin:F(),opacity:R(),padding:L(),saturate:R(),scale:R(),sepia:H(),skew:R(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[si]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ke]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cl,Ke]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Cl,Ke]}],"grid-cols":[{"grid-cols":[jl]}],"col-start-end":[{col:["auto",{span:["full",Cl,Ke]},Ke]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[jl]}],"row-start-end":[{row:["auto",{span:[Cl,Ke]},Ke]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[si]},si]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",si,ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",om]}],"font-family":[{font:[jl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",ro,om]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wr,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wr,ni]}],"underline-offset":[{"underline-offset":["auto",wr,Ke]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),o4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c4]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[wr,Ke]}],"outline-w":[{outline:[wr,ni]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[wr,ni]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",si,u4]}],"shadow-color":[{shadow:[jl]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",si,Ke]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Cl,Ke]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[wr,ni,om]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},m4=YO(p4);function Re(...n){return m4(sj(n))}const g4=fO,xj=x.forwardRef(({className:n,...e},t)=>r.jsx(YC,{ref:t,className:Re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));xj.displayName=YC.displayName;const y4=fh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),vj=x.forwardRef(({className:n,variant:e,...t},s)=>r.jsx(XC,{ref:s,className:Re(y4({variant:e}),n),...t}));vj.displayName=XC.displayName;const x4=x.forwardRef(({className:n,...e},t)=>r.jsx(ej,{ref:t,className:Re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));x4.displayName=ej.displayName;const bj=x.forwardRef(({className:n,...e},t)=>r.jsx(tj,{ref:t,className:Re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:r.jsx(hj,{className:"h-4 w-4"})}));bj.displayName=tj.displayName;const wj=x.forwardRef(({className:n,...e},t)=>r.jsx(ZC,{ref:t,className:Re("text-sm font-semibold",n),...e}));wj.displayName=ZC.displayName;const Sj=x.forwardRef(({className:n,...e},t)=>r.jsx(JC,{ref:t,className:Re("text-sm opacity-90",n),...e}));Sj.displayName=JC.displayName;function v4(){const{toasts:n}=$t();return r.jsxs(g4,{children:[n.map(function({id:e,title:t,description:s,action:i,...a}){return r.jsxs(vj,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[t&&r.jsx(wj,{children:t}),s&&r.jsx(Sj,{children:s})]}),i,r.jsx(bj,{})]},e)}),r.jsx(xj,{})]})}var b4=vy[" useId ".trim().toString()]||(()=>{}),w4=0;function er(n){const[e,t]=x.useState(b4());return Ut(()=>{t(s=>s??String(w4++))},[n]),e?`radix-${e}`:""}const S4=["top","right","bottom","left"],xi=Math.min,Yn=Math.max,Rd=Math.round,qu=Math.floor,tr=n=>({x:n,y:n}),_4={left:"right",right:"left",bottom:"top",top:"bottom"},C4={start:"end",end:"start"};function Fg(n,e,t){return Yn(n,xi(e,t))}function Tr(n,e){return typeof n=="function"?n(e):n}function Pr(n){return n.split("-")[0]}function jo(n){return n.split("-")[1]}function Vy(n){return n==="x"?"y":"x"}function Uy(n){return n==="y"?"height":"width"}const j4=new Set(["top","bottom"]);function Zs(n){return j4.has(Pr(n))?"y":"x"}function $y(n){return Vy(Zs(n))}function N4(n,e,t){t===void 0&&(t=!1);const s=jo(n),i=$y(n),a=Uy(i);let c=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Id(c)),[c,Id(c)]}function k4(n){const e=Id(n);return[Lg(n),e,Lg(e)]}function Lg(n){return n.replace(/start|end/g,e=>C4[e])}const s1=["left","right"],r1=["right","left"],T4=["top","bottom"],P4=["bottom","top"];function E4(n,e,t){switch(n){case"top":case"bottom":return t?e?r1:s1:e?s1:r1;case"left":case"right":return e?T4:P4;default:return[]}}function A4(n,e,t,s){const i=jo(n);let a=E4(Pr(n),t==="start",s);return i&&(a=a.map(c=>c+"-"+i),e&&(a=a.concat(a.map(Lg)))),a}function Id(n){return n.replace(/left|right|bottom|top/g,e=>_4[e])}function M4(n){return{top:0,right:0,bottom:0,left:0,...n}}function _j(n){return typeof n!="number"?M4(n):{top:n,right:n,bottom:n,left:n}}function Od(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function i1(n,e,t){let{reference:s,floating:i}=n;const a=Zs(e),c=$y(e),u=Uy(c),d=Pr(e),h=a==="y",p=s.x+s.width/2-i.width/2,m=s.y+s.height/2-i.height/2,y=s[u]/2-i[u]/2;let b;switch(d){case"top":b={x:p,y:s.y-i.height};break;case"bottom":b={x:p,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:m};break;case"left":b={x:s.x-i.width,y:m};break;default:b={x:s.x,y:s.y}}switch(jo(e)){case"start":b[c]-=y*(t&&h?-1:1);break;case"end":b[c]+=y*(t&&h?-1:1);break}return b}const R4=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:p,y:m}=i1(h,s,d),y=s,b={},_=0;for(let v=0;v<u.length;v++){const{name:w,fn:N}=u[v],{x:P,y:C,data:A,reset:k}=await N({x:p,y:m,initialPlacement:s,placement:y,strategy:i,middlewareData:b,rects:h,platform:c,elements:{reference:n,floating:e}});p=P??p,m=C??m,b={...b,[w]:{...b[w],...A}},k&&_<=50&&(_++,typeof k=="object"&&(k.placement&&(y=k.placement),k.rects&&(h=k.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):k.rects),{x:p,y:m}=i1(h,y,d)),v=-1)}return{x:p,y:m,placement:y,strategy:i,middlewareData:b}};async function Vl(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:c,elements:u,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:b=0}=Tr(e,n),_=_j(b),w=u[y?m==="floating"?"reference":"floating":m],N=Od(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:d})),P=m==="floating"?{x:s,y:i,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),A=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},k=Od(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:P,offsetParent:C,strategy:d}):P);return{top:(N.top-k.top+_.top)/A.y,bottom:(k.bottom-N.bottom+_.bottom)/A.y,left:(N.left-k.left+_.left)/A.x,right:(k.right-N.right+_.right)/A.x}}const I4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:a,platform:c,elements:u,middlewareData:d}=e,{element:h,padding:p=0}=Tr(n,e)||{};if(h==null)return{};const m=_j(p),y={x:t,y:s},b=$y(i),_=Uy(b),v=await c.getDimensions(h),w=b==="y",N=w?"top":"left",P=w?"bottom":"right",C=w?"clientHeight":"clientWidth",A=a.reference[_]+a.reference[b]-y[b]-a.floating[_],k=y[b]-a.reference[b],M=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let E=M?M[C]:0;(!E||!await(c.isElement==null?void 0:c.isElement(M)))&&(E=u.floating[C]||a.floating[_]);const T=A/2-k/2,I=E/2-v[_]/2-1,O=xi(m[N],I),F=xi(m[P],I),L=O,V=E-v[_]-F,z=E/2-v[_]/2+T,W=Fg(L,z,V),G=!d.arrow&&jo(i)!=null&&z!==W&&a.reference[_]/2-(z<L?O:F)-v[_]/2<0,K=G?z<L?z-L:z-V:0;return{[b]:y[b]+K,data:{[b]:W,centerOffset:z-W-K,...G&&{alignmentOffset:K}},reset:G}}}),O4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:a,rects:c,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:v=!0,...w}=Tr(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const N=Pr(i),P=Zs(u),C=Pr(u)===u,A=await(d.isRTL==null?void 0:d.isRTL(h.floating)),k=y||(C||!v?[Id(u)]:k4(u)),M=_!=="none";!y&&M&&k.push(...A4(u,v,_,A));const E=[u,...k],T=await Vl(e,w),I=[];let O=((s=a.flip)==null?void 0:s.overflows)||[];if(p&&I.push(T[N]),m){const z=N4(i,c,A);I.push(T[z[0]],T[z[1]])}if(O=[...O,{placement:i,overflows:I}],!I.every(z=>z<=0)){var F,L;const z=(((F=a.flip)==null?void 0:F.index)||0)+1,W=E[z];if(W&&(!(m==="alignment"?P!==Zs(W):!1)||O.every($=>Zs($.placement)===P?$.overflows[0]>0:!0)))return{data:{index:z,overflows:O},reset:{placement:W}};let G=(L=O.filter(K=>K.overflows[0]<=0).sort((K,$)=>K.overflows[1]-$.overflows[1])[0])==null?void 0:L.placement;if(!G)switch(b){case"bestFit":{var V;const K=(V=O.filter($=>{if(M){const H=Zs($.placement);return H===P||H==="y"}return!0}).map($=>[$.placement,$.overflows.filter(H=>H>0).reduce((H,ee)=>H+ee,0)]).sort(($,H)=>$[1]-H[1])[0])==null?void 0:V[0];K&&(G=K);break}case"initialPlacement":G=u;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function a1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function o1(n){return S4.some(e=>n[e]>=0)}const D4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=Tr(n,e);switch(s){case"referenceHidden":{const a=await Vl(e,{...i,elementContext:"reference"}),c=a1(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:o1(c)}}}case"escaped":{const a=await Vl(e,{...i,altBoundary:!0}),c=a1(a,t.floating);return{data:{escapedOffsets:c,escaped:o1(c)}}}default:return{}}}}},Cj=new Set(["left","top"]);async function F4(n,e){const{placement:t,platform:s,elements:i}=n,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),c=Pr(t),u=jo(t),d=Zs(t)==="y",h=Cj.has(c)?-1:1,p=a&&d?-1:1,m=Tr(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:_}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof _=="number"&&(b=u==="end"?_*-1:_),d?{x:b*p,y:y*h}:{x:y*h,y:b*p}}const L4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:a,placement:c,middlewareData:u}=e,d=await F4(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:c}}}}},z4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:w=>{let{x:N,y:P}=w;return{x:N,y:P}}},...d}=Tr(n,e),h={x:t,y:s},p=await Vl(e,d),m=Zs(Pr(i)),y=Vy(m);let b=h[y],_=h[m];if(a){const w=y==="y"?"top":"left",N=y==="y"?"bottom":"right",P=b+p[w],C=b-p[N];b=Fg(P,b,C)}if(c){const w=m==="y"?"top":"left",N=m==="y"?"bottom":"right",P=_+p[w],C=_-p[N];_=Fg(P,_,C)}const v=u.fn({...e,[y]:b,[m]:_});return{...v,data:{x:v.x-t,y:v.y-s,enabled:{[y]:a,[m]:c}}}}}},B4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=Tr(n,e),p={x:t,y:s},m=Zs(i),y=Vy(m);let b=p[y],_=p[m];const v=Tr(u,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const C=y==="y"?"height":"width",A=a.reference[y]-a.floating[C]+w.mainAxis,k=a.reference[y]+a.reference[C]-w.mainAxis;b<A?b=A:b>k&&(b=k)}if(h){var N,P;const C=y==="y"?"width":"height",A=Cj.has(Pr(i)),k=a.reference[m]-a.floating[C]+(A&&((N=c.offset)==null?void 0:N[m])||0)+(A?0:w.crossAxis),M=a.reference[m]+a.reference[C]+(A?0:((P=c.offset)==null?void 0:P[m])||0)-(A?w.crossAxis:0);_<k?_=k:_>M&&(_=M)}return{[y]:b,[m]:_}}}},V4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:a,platform:c,elements:u}=e,{apply:d=()=>{},...h}=Tr(n,e),p=await Vl(e,h),m=Pr(i),y=jo(i),b=Zs(i)==="y",{width:_,height:v}=a.floating;let w,N;m==="top"||m==="bottom"?(w=m,N=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(N=m,w=y==="end"?"top":"bottom");const P=v-p.top-p.bottom,C=_-p.left-p.right,A=xi(v-p[w],P),k=xi(_-p[N],C),M=!e.middlewareData.shift;let E=A,T=k;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=C),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(E=P),M&&!y){const O=Yn(p.left,0),F=Yn(p.right,0),L=Yn(p.top,0),V=Yn(p.bottom,0);b?T=_-2*(O!==0||F!==0?O+F:Yn(p.left,p.right)):E=v-2*(L!==0||V!==0?L+V:Yn(p.top,p.bottom))}await d({...e,availableWidth:T,availableHeight:E});const I=await c.getDimensions(u.floating);return _!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function xh(){return typeof window<"u"}function No(n){return jj(n)?(n.nodeName||"").toLowerCase():"#document"}function es(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function lr(n){var e;return(e=(jj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function jj(n){return xh()?n instanceof Node||n instanceof es(n).Node:!1}function Rs(n){return xh()?n instanceof Element||n instanceof es(n).Element:!1}function rr(n){return xh()?n instanceof HTMLElement||n instanceof es(n).HTMLElement:!1}function l1(n){return!xh()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof es(n).ShadowRoot}const U4=new Set(["inline","contents"]);function oc(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=Is(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!U4.has(i)}const $4=new Set(["table","td","th"]);function q4(n){return $4.has(No(n))}const W4=[":popover-open",":modal"];function vh(n){return W4.some(e=>{try{return n.matches(e)}catch{return!1}})}const G4=["transform","translate","scale","rotate","perspective"],H4=["transform","translate","scale","rotate","perspective","filter"],K4=["paint","layout","strict","content"];function qy(n){const e=Wy(),t=Rs(n)?Is(n):n;return G4.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||H4.some(s=>(t.willChange||"").includes(s))||K4.some(s=>(t.contain||"").includes(s))}function Q4(n){let e=vi(n);for(;rr(e)&&!co(e);){if(qy(e))return e;if(vh(e))return null;e=vi(e)}return null}function Wy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Y4=new Set(["html","body","#document"]);function co(n){return Y4.has(No(n))}function Is(n){return es(n).getComputedStyle(n)}function bh(n){return Rs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function vi(n){if(No(n)==="html")return n;const e=n.assignedSlot||n.parentNode||l1(n)&&n.host||lr(n);return l1(e)?e.host:e}function Nj(n){const e=vi(n);return co(e)?n.ownerDocument?n.ownerDocument.body:n.body:rr(e)&&oc(e)?e:Nj(e)}function Ul(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Nj(n),a=i===((s=n.ownerDocument)==null?void 0:s.body),c=es(i);if(a){const u=zg(c);return e.concat(c,c.visualViewport||[],oc(i)?i:[],u&&t?Ul(u):[])}return e.concat(i,Ul(i,[],t))}function zg(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function kj(n){const e=Is(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=rr(n),a=i?n.offsetWidth:t,c=i?n.offsetHeight:s,u=Rd(t)!==a||Rd(s)!==c;return u&&(t=a,s=c),{width:t,height:s,$:u}}function Gy(n){return Rs(n)?n:n.contextElement}function io(n){const e=Gy(n);if(!rr(e))return tr(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:a}=kj(e);let c=(a?Rd(t.width):t.width)/s,u=(a?Rd(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const X4=tr(0);function Tj(n){const e=es(n);return!Wy()||!e.visualViewport?X4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==es(n)?!1:e}function sa(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=Gy(n);let c=tr(1);e&&(s?Rs(s)&&(c=io(s)):c=io(n));const u=Z4(a,t,s)?Tj(a):tr(0);let d=(i.left+u.x)/c.x,h=(i.top+u.y)/c.y,p=i.width/c.x,m=i.height/c.y;if(a){const y=es(a),b=s&&Rs(s)?es(s):s;let _=y,v=zg(_);for(;v&&s&&b!==_;){const w=io(v),N=v.getBoundingClientRect(),P=Is(v),C=N.left+(v.clientLeft+parseFloat(P.paddingLeft))*w.x,A=N.top+(v.clientTop+parseFloat(P.paddingTop))*w.y;d*=w.x,h*=w.y,p*=w.x,m*=w.y,d+=C,h+=A,_=es(v),v=zg(_)}}return Od({width:p,height:m,x:d,y:h})}function wh(n,e){const t=bh(n).scrollLeft;return e?e.left+t:sa(lr(n)).left+t}function Pj(n,e){const t=n.getBoundingClientRect(),s=t.left+e.scrollLeft-wh(n,t),i=t.top+e.scrollTop;return{x:s,y:i}}function J4(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const a=i==="fixed",c=lr(s),u=e?vh(e.floating):!1;if(s===c||u&&a)return t;let d={scrollLeft:0,scrollTop:0},h=tr(1);const p=tr(0),m=rr(s);if((m||!m&&!a)&&((No(s)!=="body"||oc(c))&&(d=bh(s)),rr(s))){const b=sa(s);h=io(s),p.x=b.x+s.clientLeft,p.y=b.y+s.clientTop}const y=c&&!m&&!a?Pj(c,d):tr(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+p.x+y.x,y:t.y*h.y-d.scrollTop*h.y+p.y+y.y}}function eD(n){return Array.from(n.getClientRects())}function tD(n){const e=lr(n),t=bh(n),s=n.ownerDocument.body,i=Yn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=Yn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let c=-t.scrollLeft+wh(n);const u=-t.scrollTop;return Is(s).direction==="rtl"&&(c+=Yn(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:c,y:u}}const c1=25;function nD(n,e){const t=es(n),s=lr(n),i=t.visualViewport;let a=s.clientWidth,c=s.clientHeight,u=0,d=0;if(i){a=i.width,c=i.height;const p=Wy();(!p||p&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}const h=wh(s);if(h<=0){const p=s.ownerDocument,m=p.body,y=getComputedStyle(m),b=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,_=Math.abs(s.clientWidth-m.clientWidth-b);_<=c1&&(a-=_)}else h<=c1&&(a+=h);return{width:a,height:c,x:u,y:d}}const sD=new Set(["absolute","fixed"]);function rD(n,e){const t=sa(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,a=rr(n)?io(n):tr(1),c=n.clientWidth*a.x,u=n.clientHeight*a.y,d=i*a.x,h=s*a.y;return{width:c,height:u,x:d,y:h}}function u1(n,e,t){let s;if(e==="viewport")s=nD(n,t);else if(e==="document")s=tD(lr(n));else if(Rs(e))s=rD(e,t);else{const i=Tj(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Od(s)}function Ej(n,e){const t=vi(n);return t===e||!Rs(t)||co(t)?!1:Is(t).position==="fixed"||Ej(t,e)}function iD(n,e){const t=e.get(n);if(t)return t;let s=Ul(n,[],!1).filter(u=>Rs(u)&&No(u)!=="body"),i=null;const a=Is(n).position==="fixed";let c=a?vi(n):n;for(;Rs(c)&&!co(c);){const u=Is(c),d=qy(c);!d&&u.position==="fixed"&&(i=null),(a?!d&&!i:!d&&u.position==="static"&&!!i&&sD.has(i.position)||oc(c)&&!d&&Ej(n,c))?s=s.filter(p=>p!==c):i=u,c=vi(c)}return e.set(n,s),s}function aD(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const c=[...t==="clippingAncestors"?vh(e)?[]:iD(e,this._c):[].concat(t),s],u=c[0],d=c.reduce((h,p)=>{const m=u1(e,p,i);return h.top=Yn(m.top,h.top),h.right=xi(m.right,h.right),h.bottom=xi(m.bottom,h.bottom),h.left=Yn(m.left,h.left),h},u1(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function oD(n){const{width:e,height:t}=kj(n);return{width:e,height:t}}function lD(n,e,t){const s=rr(e),i=lr(e),a=t==="fixed",c=sa(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=tr(0);function h(){d.x=wh(i)}if(s||!s&&!a)if((No(e)!=="body"||oc(i))&&(u=bh(e)),s){const b=sa(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&h();a&&!s&&i&&h();const p=i&&!s&&!a?Pj(i,u):tr(0),m=c.left+u.scrollLeft-d.x-p.x,y=c.top+u.scrollTop-d.y-p.y;return{x:m,y,width:c.width,height:c.height}}function lm(n){return Is(n).position==="static"}function d1(n,e){if(!rr(n)||Is(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return lr(n)===t&&(t=t.ownerDocument.body),t}function Aj(n,e){const t=es(n);if(vh(n))return t;if(!rr(n)){let i=vi(n);for(;i&&!co(i);){if(Rs(i)&&!lm(i))return i;i=vi(i)}return t}let s=d1(n,e);for(;s&&q4(s)&&lm(s);)s=d1(s,e);return s&&co(s)&&lm(s)&&!qy(s)?t:s||Q4(n)||t}const cD=async function(n){const e=this.getOffsetParent||Aj,t=this.getDimensions,s=await t(n.floating);return{reference:lD(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function uD(n){return Is(n).direction==="rtl"}const dD={convertOffsetParentRelativeRectToViewportRelativeRect:J4,getDocumentElement:lr,getClippingRect:aD,getOffsetParent:Aj,getElementRects:cD,getClientRects:eD,getDimensions:oD,getScale:io,isElement:Rs,isRTL:uD};function Mj(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function hD(n,e){let t=null,s;const i=lr(n);function a(){var u;clearTimeout(s),(u=t)==null||u.disconnect(),t=null}function c(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const h=n.getBoundingClientRect(),{left:p,top:m,width:y,height:b}=h;if(u||e(),!y||!b)return;const _=qu(m),v=qu(i.clientWidth-(p+y)),w=qu(i.clientHeight-(m+b)),N=qu(p),C={rootMargin:-_+"px "+-v+"px "+-w+"px "+-N+"px",threshold:Yn(0,xi(1,d))||1};let A=!0;function k(M){const E=M[0].intersectionRatio;if(E!==d){if(!A)return c();E?c(!1,E):s=setTimeout(()=>{c(!1,1e-7)},1e3)}E===1&&!Mj(h,n.getBoundingClientRect())&&c(),A=!1}try{t=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{t=new IntersectionObserver(k,C)}t.observe(n)}return c(!0),a}function fD(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=Gy(n),p=i||a?[...h?Ul(h):[],...Ul(e)]:[];p.forEach(N=>{i&&N.addEventListener("scroll",t,{passive:!0}),a&&N.addEventListener("resize",t)});const m=h&&u?hD(h,t):null;let y=-1,b=null;c&&(b=new ResizeObserver(N=>{let[P]=N;P&&P.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),h&&!d&&b.observe(h),b.observe(e));let _,v=d?sa(n):null;d&&w();function w(){const N=sa(n);v&&!Mj(v,N)&&t(),v=N,_=requestAnimationFrame(w)}return t(),()=>{var N;p.forEach(P=>{i&&P.removeEventListener("scroll",t),a&&P.removeEventListener("resize",t)}),m?.(),(N=b)==null||N.disconnect(),b=null,d&&cancelAnimationFrame(_)}}const pD=L4,mD=z4,gD=O4,yD=V4,xD=D4,h1=I4,vD=B4,bD=(n,e,t)=>{const s=new Map,i={platform:dD,...t},a={...i.platform,_c:s};return R4(n,e,{...i,platform:a})};var wD=typeof document<"u",SD=function(){},xd=wD?x.useLayoutEffect:SD;function Dd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!Dd(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const a=i[s];if(!(a==="_owner"&&n.$$typeof)&&!Dd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function Rj(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function f1(n,e){const t=Rj(n);return Math.round(e*t)/t}function cm(n){const e=x.useRef(n);return xd(()=>{e.current=n}),e}function _D(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:d,open:h}=n,[p,m]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=x.useState(s);Dd(y,s)||b(s);const[_,v]=x.useState(null),[w,N]=x.useState(null),P=x.useCallback($=>{$!==M.current&&(M.current=$,v($))},[]),C=x.useCallback($=>{$!==E.current&&(E.current=$,N($))},[]),A=a||_,k=c||w,M=x.useRef(null),E=x.useRef(null),T=x.useRef(p),I=d!=null,O=cm(d),F=cm(i),L=cm(h),V=x.useCallback(()=>{if(!M.current||!E.current)return;const $={placement:e,strategy:t,middleware:y};F.current&&($.platform=F.current),bD(M.current,E.current,$).then(H=>{const ee={...H,isPositioned:L.current!==!1};z.current&&!Dd(T.current,ee)&&(T.current=ee,So.flushSync(()=>{m(ee)}))})},[y,e,t,F,L]);xd(()=>{h===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[h]);const z=x.useRef(!1);xd(()=>(z.current=!0,()=>{z.current=!1}),[]),xd(()=>{if(A&&(M.current=A),k&&(E.current=k),A&&k){if(O.current)return O.current(A,k,V);V()}},[A,k,V,O,I]);const W=x.useMemo(()=>({reference:M,floating:E,setReference:P,setFloating:C}),[P,C]),G=x.useMemo(()=>({reference:A,floating:k}),[A,k]),K=x.useMemo(()=>{const $={position:t,left:0,top:0};if(!G.floating)return $;const H=f1(G.floating,p.x),ee=f1(G.floating,p.y);return u?{...$,transform:"translate("+H+"px, "+ee+"px)",...Rj(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:ee}},[t,u,G.floating,p.x,p.y]);return x.useMemo(()=>({...p,update:V,refs:W,elements:G,floatingStyles:K}),[p,V,W,G,K])}const CD=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?h1({element:s.current,padding:i}).fn(t):{}:s?h1({element:s,padding:i}).fn(t):{}}}},jD=(n,e)=>({...pD(n),options:[n,e]}),ND=(n,e)=>({...mD(n),options:[n,e]}),kD=(n,e)=>({...vD(n),options:[n,e]}),TD=(n,e)=>({...gD(n),options:[n,e]}),PD=(n,e)=>({...yD(n),options:[n,e]}),ED=(n,e)=>({...xD(n),options:[n,e]}),AD=(n,e)=>({...CD(n),options:[n,e]});var MD="Arrow",Ij=x.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...a}=n;return r.jsx(je.svg,{...a,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ij.displayName=MD;var RD=Ij;function Sh(n){const[e,t]=x.useState(void 0);return Ut(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let c,u;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;c=h.inlineSize,u=h.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var Hy="Popper",[Oj,ko]=wn(Hy),[ID,Dj]=Oj(Hy),Fj=n=>{const{__scopePopper:e,children:t}=n,[s,i]=x.useState(null);return r.jsx(ID,{scope:e,anchor:s,onAnchorChange:i,children:t})};Fj.displayName=Hy;var Lj="PopperAnchor",zj=x.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,a=Dj(Lj,t),c=x.useRef(null),u=qe(e,c),d=x.useRef(null);return x.useEffect(()=>{const h=d.current;d.current=s?.current||c.current,h!==d.current&&a.onAnchorChange(d.current)}),s?null:r.jsx(je.div,{...i,ref:u})});zj.displayName=Lj;var Ky="PopperContent",[OD,DD]=Oj(Ky),Bj=x.forwardRef((n,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:_,...v}=n,w=Dj(Ky,t),[N,P]=x.useState(null),C=qe(e,Q=>P(Q)),[A,k]=x.useState(null),M=Sh(A),E=M?.width??0,T=M?.height??0,I=s+(a!=="center"?"-"+a:""),O=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},F=Array.isArray(h)?h:[h],L=F.length>0,V={padding:O,boundary:F.filter(LD),altBoundary:L},{refs:z,floatingStyles:W,placement:G,isPositioned:K,middlewareData:$}=_D({strategy:"fixed",placement:I,whileElementsMounted:(...Q)=>fD(...Q,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[jD({mainAxis:i+T,alignmentAxis:c}),d&&ND({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?kD():void 0,...V}),d&&TD({...V}),PD({...V,apply:({elements:Q,rects:se,availableWidth:xe,availableHeight:Pe})=>{const{width:Fe,height:oe}=se.reference,ke=Q.floating.style;ke.setProperty("--radix-popper-available-width",`${xe}px`),ke.setProperty("--radix-popper-available-height",`${Pe}px`),ke.setProperty("--radix-popper-anchor-width",`${Fe}px`),ke.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),A&&AD({element:A,padding:u}),zD({arrowWidth:E,arrowHeight:T}),y&&ED({strategy:"referenceHidden",...V})]}),[H,ee]=$j(G),R=Dt(_);Ut(()=>{K&&R?.()},[K,R]);const U=$.arrow?.x,X=$.arrow?.y,re=$.arrow?.centerOffset!==0,[ae,le]=x.useState();return Ut(()=>{N&&le(window.getComputedStyle(N).zIndex)},[N]),r.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:K?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:r.jsx(OD,{scope:t,placedSide:H,onArrowChange:k,arrowX:U,arrowY:X,shouldHideArrow:re,children:r.jsx(je.div,{"data-side":H,"data-align":ee,...v,ref:C,style:{...v.style,animation:K?void 0:"none"}})})})});Bj.displayName=Ky;var Vj="PopperArrow",FD={top:"bottom",right:"left",bottom:"top",left:"right"},Uj=x.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,a=DD(Vj,s),c=FD[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(RD,{...i,ref:t,style:{...i.style,display:"block"}})})});Uj.displayName=Vj;function LD(n){return n!==null}var zD=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:s,middlewareData:i}=e,c=i.arrow?.centerOffset!==0,u=c?0:n.arrowWidth,d=c?0:n.arrowHeight,[h,p]=$j(t),m={start:"0%",center:"50%",end:"100%"}[p],y=(i.arrow?.x??0)+u/2,b=(i.arrow?.y??0)+d/2;let _="",v="";return h==="bottom"?(_=c?m:`${y}px`,v=`${-d}px`):h==="top"?(_=c?m:`${y}px`,v=`${s.floating.height+d}px`):h==="right"?(_=`${-d}px`,v=c?m:`${b}px`):h==="left"&&(_=`${s.floating.width+d}px`,v=c?m:`${b}px`),{data:{x:_,y:v}}}});function $j(n){const[e,t="center"]=n.split("-");return[e,t]}var qj=Fj,Qy=zj,Yy=Bj,Xy=Uj,[_h,LH]=wn("Tooltip",[ko]),Zy=ko(),Wj="TooltipProvider",BD=700,p1="tooltip.open",[VD,Gj]=_h(Wj),Hj=n=>{const{__scopeTooltip:e,delayDuration:t=BD,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=n,c=x.useRef(!0),u=x.useRef(!1),d=x.useRef(0);return x.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),r.jsx(VD,{scope:e,isOpenDelayedRef:c,delayDuration:t,onOpen:x.useCallback(()=>{window.clearTimeout(d.current),c.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.current=!0,s)},[s]),isPointerInTransitRef:u,onPointerInTransitChange:x.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:a})};Hj.displayName=Wj;var Kj="Tooltip",[zH,Ch]=_h(Kj),Bg="TooltipTrigger",UD=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=Ch(Bg,t),a=Gj(Bg,t),c=Zy(t),u=x.useRef(null),d=qe(e,u,i.onTriggerChange),h=x.useRef(!1),p=x.useRef(!1),m=x.useCallback(()=>h.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx(Qy,{asChild:!0,...c,children:r.jsx(je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:d,onPointerMove:me(n.onPointerMove,y=>{y.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),p.current=!0)}),onPointerLeave:me(n.onPointerLeave,()=>{i.onTriggerLeave(),p.current=!1}),onPointerDown:me(n.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:me(n.onFocus,()=>{h.current||i.onOpen()}),onBlur:me(n.onBlur,i.onClose),onClick:me(n.onClick,i.onClose)})})});UD.displayName=Bg;var $D="TooltipPortal",[BH,qD]=_h($D,{forceMount:void 0}),uo="TooltipContent",Qj=x.forwardRef((n,e)=>{const t=qD(uo,n.__scopeTooltip),{forceMount:s=t.forceMount,side:i="top",...a}=n,c=Ch(uo,n.__scopeTooltip);return r.jsx(Sn,{present:s||c.open,children:c.disableHoverableContent?r.jsx(Yj,{side:i,...a,ref:e}):r.jsx(WD,{side:i,...a,ref:e})})}),WD=x.forwardRef((n,e)=>{const t=Ch(uo,n.__scopeTooltip),s=Gj(uo,n.__scopeTooltip),i=x.useRef(null),a=qe(e,i),[c,u]=x.useState(null),{trigger:d,onClose:h}=t,p=i.current,{onPointerInTransitChange:m}=s,y=x.useCallback(()=>{u(null),m(!1)},[m]),b=x.useCallback((_,v)=>{const w=_.currentTarget,N={x:_.clientX,y:_.clientY},P=YD(N,w.getBoundingClientRect()),C=XD(N,P),A=ZD(v.getBoundingClientRect()),k=e5([...C,...A]);u(k),m(!0)},[m]);return x.useEffect(()=>()=>y(),[y]),x.useEffect(()=>{if(d&&p){const _=w=>b(w,p),v=w=>b(w,d);return d.addEventListener("pointerleave",_),p.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",_),p.removeEventListener("pointerleave",v)}}},[d,p,b,y]),x.useEffect(()=>{if(c){const _=v=>{const w=v.target,N={x:v.clientX,y:v.clientY},P=d?.contains(w)||p?.contains(w),C=!JD(N,c);P?y():C&&(y(),h())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[d,p,c,h,y]),r.jsx(Yj,{...n,ref:a})}),[GD,HD]=_h(Kj,{isInside:!1}),KD=kI("TooltipContent"),Yj=x.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=n,d=Ch(uo,t),h=Zy(t),{onClose:p}=d;return x.useEffect(()=>(document.addEventListener(p1,p),()=>document.removeEventListener(p1,p)),[p]),x.useEffect(()=>{if(d.trigger){const m=y=>{y.target?.contains(d.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,p]),r.jsx(_o,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:r.jsxs(Yy,{"data-state":d.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(KD,{children:s}),r.jsx(GD,{scope:t,isInside:!0,children:r.jsx(QI,{id:d.contentId,role:"tooltip",children:i||s})})]})})});Qj.displayName=uo;var Xj="TooltipArrow",QD=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=Zy(t);return HD(Xj,t).isInside?null:r.jsx(Xy,{...i,...s,ref:e})});QD.displayName=Xj;function YD(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,s,i,a)){case a:return"left";case i:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function XD(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function ZD(n){const{top:e,right:t,bottom:s,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:s},{x:i,y:s}]}function JD(n,e){const{x:t,y:s}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a],d=e[c],h=u.x,p=u.y,m=d.x,y=d.y;p>s!=y>s&&t<(m-h)*(s-p)/(y-p)+h&&(i=!i)}return i}function e5(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),t5(e)}function t5(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const i=n[s];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const i=n[s];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var n5=Hj,Zj=Qj;const s5=n5,r5=x.forwardRef(({className:n,sideOffset:e=4,...t},s)=>r.jsx(Zj,{ref:s,sideOffset:e,className:Re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));r5.displayName=Zj.displayName;const i5=fh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=x.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},a)=>{const c=s?jI:"button";return r.jsx(c,{className:Re(i5({variant:e,size:t,className:n})),ref:a,...i})});te.displayName="Button";function a5(){return cC.useSyncExternalStore(o5,()=>!0,()=>!1)}function o5(){return()=>{}}var Jy="Avatar",[l5,VH]=wn(Jy),[c5,Jj]=l5(Jy),eN=x.forwardRef((n,e)=>{const{__scopeAvatar:t,...s}=n,[i,a]=x.useState("idle");return r.jsx(c5,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(je.span,{...s,ref:e})})});eN.displayName=Jy;var tN="AvatarImage",nN=x.forwardRef((n,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:i=()=>{},...a}=n,c=Jj(tN,t),u=u5(s,a),d=Dt(h=>{i(h),c.onImageLoadingStatusChange(h)});return Ut(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?r.jsx(je.img,{...a,ref:e,src:s}):null});nN.displayName=tN;var sN="AvatarFallback",rN=x.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:s,...i}=n,a=Jj(sN,t),[c,u]=x.useState(s===void 0);return x.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(d)}},[s]),c&&a.imageLoadingStatus!=="loaded"?r.jsx(je.span,{...i,ref:e}):null});rN.displayName=sN;function m1(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function u5(n,{referrerPolicy:e,crossOrigin:t}){const s=a5(),i=x.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[c,u]=x.useState(()=>m1(a,n));return Ut(()=>{u(m1(a,n))},[a,n]),Ut(()=>{const d=m=>()=>{u(m)};if(!a)return;const h=d("loaded"),p=d("error");return a.addEventListener("load",h),a.addEventListener("error",p),e&&(a.referrerPolicy=e),typeof t=="string"&&(a.crossOrigin=t),()=>{a.removeEventListener("load",h),a.removeEventListener("error",p)}},[a,t,e]),c}var iN=eN,aN=nN,oN=rN;const lN=x.forwardRef(({className:n,...e},t)=>r.jsx(iN,{ref:t,className:Re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));lN.displayName=iN.displayName;const d5=x.forwardRef(({className:n,...e},t)=>r.jsx(aN,{ref:t,className:Re("aspect-square h-full w-full",n),...e}));d5.displayName=aN.displayName;const cN=x.forwardRef(({className:n,...e},t)=>r.jsx(oN,{ref:t,className:Re("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));cN.displayName=oN.displayName;var h5=x.createContext(void 0);function To(n){const e=x.useContext(h5);return n||e||"ltr"}var um=0;function ex(){x.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??g1()),document.body.insertAdjacentElement("beforeend",n[1]??g1()),um++,()=>{um===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),um--}},[])}function g1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var dm="focusScope.autoFocusOnMount",hm="focusScope.autoFocusOnUnmount",y1={bubbles:!1,cancelable:!0},f5="FocusScope",jh=x.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...c}=n,[u,d]=x.useState(null),h=Dt(i),p=Dt(a),m=x.useRef(null),y=qe(e,v=>d(v)),b=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let v=function(C){if(b.paused||!u)return;const A=C.target;u.contains(A)?m.current=A:ii(m.current,{select:!0})},w=function(C){if(b.paused||!u)return;const A=C.relatedTarget;A!==null&&(u.contains(A)||ii(m.current,{select:!0}))},N=function(C){if(document.activeElement===document.body)for(const k of C)k.removedNodes.length>0&&ii(u)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const P=new MutationObserver(N);return u&&P.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),P.disconnect()}}},[s,u,b.paused]),x.useEffect(()=>{if(u){v1.add(b);const v=document.activeElement;if(!u.contains(v)){const N=new CustomEvent(dm,y1);u.addEventListener(dm,h),u.dispatchEvent(N),N.defaultPrevented||(p5(v5(uN(u)),{select:!0}),document.activeElement===v&&ii(u))}return()=>{u.removeEventListener(dm,h),setTimeout(()=>{const N=new CustomEvent(hm,y1);u.addEventListener(hm,p),u.dispatchEvent(N),N.defaultPrevented||ii(v??document.body,{select:!0}),u.removeEventListener(hm,p),v1.remove(b)},0)}}},[u,h,p,b]);const _=x.useCallback(v=>{if(!t&&!s||b.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,N=document.activeElement;if(w&&N){const P=v.currentTarget,[C,A]=m5(P);C&&A?!v.shiftKey&&N===A?(v.preventDefault(),t&&ii(C,{select:!0})):v.shiftKey&&N===C&&(v.preventDefault(),t&&ii(A,{select:!0})):N===P&&v.preventDefault()}},[t,s,b.paused]);return r.jsx(je.div,{tabIndex:-1,...c,ref:y,onKeyDown:_})});jh.displayName=f5;function p5(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(ii(s,{select:e}),document.activeElement!==t)return}function m5(n){const e=uN(n),t=x1(e,n),s=x1(e.reverse(),n);return[t,s]}function uN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function x1(n,e){for(const t of n)if(!g5(t,{upTo:e}))return t}function g5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function y5(n){return n instanceof HTMLInputElement&&"select"in n}function ii(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&y5(n)&&e&&n.select()}}var v1=x5();function x5(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=b1(n,e),n.unshift(e)},remove(e){n=b1(n,e),n[0]?.resume()}}}function b1(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function v5(n){return n.filter(e=>e.tagName!=="A")}var fm="rovingFocusGroup.onEntryFocus",b5={bubbles:!1,cancelable:!0},lc="RovingFocusGroup",[Vg,dN,w5]=rc(lc),[S5,Nh]=wn(lc,[w5]),[_5,C5]=S5(lc),hN=x.forwardRef((n,e)=>r.jsx(Vg.Provider,{scope:n.__scopeRovingFocusGroup,children:r.jsx(Vg.Slot,{scope:n.__scopeRovingFocusGroup,children:r.jsx(j5,{...n,ref:e})})}));hN.displayName=lc;var j5=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...m}=n,y=x.useRef(null),b=qe(e,y),_=To(a),[v,w]=nr({prop:c,defaultProp:u??null,onChange:d,caller:lc}),[N,P]=x.useState(!1),C=Dt(h),A=dN(t),k=x.useRef(!1),[M,E]=x.useState(0);return x.useEffect(()=>{const T=y.current;if(T)return T.addEventListener(fm,C),()=>T.removeEventListener(fm,C)},[C]),r.jsx(_5,{scope:t,orientation:s,dir:_,loop:i,currentTabStopId:v,onItemFocus:x.useCallback(T=>w(T),[w]),onItemShiftTab:x.useCallback(()=>P(!0),[]),onFocusableItemAdd:x.useCallback(()=>E(T=>T+1),[]),onFocusableItemRemove:x.useCallback(()=>E(T=>T-1),[]),children:r.jsx(je.div,{tabIndex:N||M===0?-1:0,"data-orientation":s,...m,ref:b,style:{outline:"none",...n.style},onMouseDown:me(n.onMouseDown,()=>{k.current=!0}),onFocus:me(n.onFocus,T=>{const I=!k.current;if(T.target===T.currentTarget&&I&&!N){const O=new CustomEvent(fm,b5);if(T.currentTarget.dispatchEvent(O),!O.defaultPrevented){const F=A().filter(G=>G.focusable),L=F.find(G=>G.active),V=F.find(G=>G.id===v),W=[L,V,...F].filter(Boolean).map(G=>G.ref.current);mN(W,p)}}k.current=!1}),onBlur:me(n.onBlur,()=>P(!1))})})}),fN="RovingFocusGroupItem",pN=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:a,children:c,...u}=n,d=er(),h=a||d,p=C5(fN,t),m=p.currentTabStopId===h,y=dN(t),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:v}=p;return x.useEffect(()=>{if(s)return b(),()=>_()},[s,b,_]),r.jsx(Vg.ItemSlot,{scope:t,id:h,focusable:s,active:i,children:r.jsx(je.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:me(n.onMouseDown,w=>{s?p.onItemFocus(h):w.preventDefault()}),onFocus:me(n.onFocus,()=>p.onItemFocus(h)),onKeyDown:me(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){p.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const N=T5(w,p.orientation,p.dir);if(N!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let C=y().filter(A=>A.focusable).map(A=>A.ref.current);if(N==="last")C.reverse();else if(N==="prev"||N==="next"){N==="prev"&&C.reverse();const A=C.indexOf(w.currentTarget);C=p.loop?P5(C,A+1):C.slice(A+1)}setTimeout(()=>mN(C))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:v!=null}):c})})});pN.displayName=fN;var N5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k5(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function T5(n,e,t){const s=k5(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return N5[s]}function mN(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function P5(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var gN=hN,yN=pN,E5=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},qa=new WeakMap,Wu=new WeakMap,Gu={},pm=0,xN=function(n){return n&&(n.host||xN(n.parentNode))},A5=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=xN(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},M5=function(n,e,t,s){var i=A5(e,Array.isArray(n)?n:[n]);Gu[t]||(Gu[t]=new WeakMap);var a=Gu[t],c=[],u=new Set,d=new Set(i),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};i.forEach(h);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(u.has(y))p(y);else try{var b=y.getAttribute(s),_=b!==null&&b!=="false",v=(qa.get(y)||0)+1,w=(a.get(y)||0)+1;qa.set(y,v),a.set(y,w),c.push(y),v===1&&_&&Wu.set(y,!0),w===1&&y.setAttribute(t,"true"),_||y.setAttribute(s,"true")}catch(N){console.error("aria-hidden: cannot operate on ",y,N)}})};return p(e),u.clear(),pm++,function(){c.forEach(function(m){var y=qa.get(m)-1,b=a.get(m)-1;qa.set(m,y),a.set(m,b),y||(Wu.has(m)||m.removeAttribute(s),Wu.delete(m)),b||m.removeAttribute(t)}),pm--,pm||(qa=new WeakMap,qa=new WeakMap,Wu=new WeakMap,Gu={})}},tx=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=E5(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),M5(s,i,t,"aria-hidden")):function(){return null}},Xs=function(){return Xs=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xs.apply(this,arguments)};function vN(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function zs(n,e,t,s){var i=arguments.length,a=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,s);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(i<3?c(a):i>3?c(e,t,a):c(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function Zt(n,e,t,s){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(p){try{h(s.next(p))}catch(m){c(m)}}function d(p){try{h(s.throw(p))}catch(m){c(m)}}function h(p){p.done?a(p.value):i(p.value).then(u,d)}h((s=s.apply(n,e||[])).next())})}function R5(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return n.concat(a||Array.prototype.slice.call(e))}var vd="right-scroll-bar-position",bd="width-before-scroll-bar",I5="with-scroll-bars-hidden",O5="--removed-body-scroll-bar-size";function mm(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function D5(n,e){var t=x.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var F5=typeof window<"u"?x.useLayoutEffect:x.useEffect,w1=new WeakMap;function L5(n,e){var t=D5(null,function(s){return n.forEach(function(i){return mm(i,s)})});return F5(function(){var s=w1.get(t);if(s){var i=new Set(s),a=new Set(n),c=t.current;i.forEach(function(u){a.has(u)||mm(u,null)}),a.forEach(function(u){i.has(u)||mm(u,c)})}w1.set(t,n)},[n]),t}function z5(n){return n}function B5(n,e){e===void 0&&(e=z5);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,s);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(s=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){s=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(a),c=t}var d=function(){var p=c;c=[],p.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(p){c.push(p),h()},filter:function(p){return c=c.filter(p),t}}}};return i}function V5(n){n===void 0&&(n={});var e=B5(null);return e.options=Xs({async:!0,ssr:!1},n),e}var bN=function(n){var e=n.sideCar,t=vN(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,Xs({},t))};bN.isSideCarExport=!0;function U5(n,e){return n.useMedium(e),bN}var wN=V5(),gm=function(){},kh=x.forwardRef(function(n,e){var t=x.useRef(null),s=x.useState({onScrollCapture:gm,onWheelCapture:gm,onTouchMoveCapture:gm}),i=s[0],a=s[1],c=n.forwardProps,u=n.children,d=n.className,h=n.removeScrollBar,p=n.enabled,m=n.shards,y=n.sideCar,b=n.noRelative,_=n.noIsolation,v=n.inert,w=n.allowPinchZoom,N=n.as,P=N===void 0?"div":N,C=n.gapMode,A=vN(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=y,M=L5([t,e]),E=Xs(Xs({},A),i);return x.createElement(x.Fragment,null,p&&x.createElement(k,{sideCar:wN,removeScrollBar:h,shards:m,noRelative:b,noIsolation:_,inert:v,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:C}),c?x.cloneElement(x.Children.only(u),Xs(Xs({},E),{ref:M})):x.createElement(P,Xs({},E,{className:d,ref:M}),u))});kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kh.classNames={fullWidth:bd,zeroRight:vd};var $5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=$5();return e&&n.setAttribute("nonce",e),n}function W5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function G5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var H5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=q5())&&(W5(e,t),G5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},K5=function(){var n=H5();return function(e,t){x.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},SN=function(){var n=K5(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},Q5={left:0,top:0,right:0,gap:0},ym=function(n){return parseInt(n||"",10)||0},Y5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[ym(t),ym(s),ym(i)]},X5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Q5;var e=Y5(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},Z5=SN(),ao="data-scroll-locked",J5=function(n,e,t,s){var i=n.left,a=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(I5,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(ao,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vd,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(bd,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(bd," .").concat(bd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ao,`] {
    `).concat(O5,": ").concat(u,`px;
  }
`)},S1=function(){var n=parseInt(document.body.getAttribute(ao)||"0",10);return isFinite(n)?n:0},eF=function(){x.useEffect(function(){return document.body.setAttribute(ao,(S1()+1).toString()),function(){var n=S1()-1;n<=0?document.body.removeAttribute(ao):document.body.setAttribute(ao,n.toString())}},[])},tF=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;eF();var a=x.useMemo(function(){return X5(i)},[i]);return x.createElement(Z5,{styles:J5(a,!e,i,t?"":"!important")})},Ug=!1;if(typeof window<"u")try{var Hu=Object.defineProperty({},"passive",{get:function(){return Ug=!0,!0}});window.addEventListener("test",Hu,Hu),window.removeEventListener("test",Hu,Hu)}catch{Ug=!1}var Wa=Ug?{passive:!1}:!1,nF=function(n){return n.tagName==="TEXTAREA"},_N=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!nF(n)&&t[e]==="visible")},sF=function(n){return _N(n,"overflowY")},rF=function(n){return _N(n,"overflowX")},_1=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=CN(n,s);if(i){var a=jN(n,s),c=a[1],u=a[2];if(c>u)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},iF=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},aF=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},CN=function(n,e){return n==="v"?sF(e):rF(e)},jN=function(n,e){return n==="v"?iF(e):aF(e)},oF=function(n,e){return n==="h"&&e==="rtl"?-1:1},lF=function(n,e,t,s,i){var a=oF(n,window.getComputedStyle(e).direction),c=a*s,u=t.target,d=e.contains(u),h=!1,p=c>0,m=0,y=0;do{if(!u)break;var b=jN(n,u),_=b[0],v=b[1],w=b[2],N=v-w-a*_;(_||N)&&CN(n,u)&&(m+=N,y+=_);var P=u.parentNode;u=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(p&&Math.abs(m)<1||!p&&Math.abs(y)<1)&&(h=!0),h},Ku=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},C1=function(n){return[n.deltaX,n.deltaY]},j1=function(n){return n&&"current"in n?n.current:n},cF=function(n,e){return n[0]===e[0]&&n[1]===e[1]},uF=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},dF=0,Ga=[];function hF(n){var e=x.useRef([]),t=x.useRef([0,0]),s=x.useRef(),i=x.useState(dF++)[0],a=x.useState(SN)[0],c=x.useRef(n);x.useEffect(function(){c.current=n},[n]),x.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var v=R5([n.lockRef.current],(n.shards||[]).map(j1),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var u=x.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!c.current.allowPinchZoom;var N=Ku(v),P=t.current,C="deltaX"in v?v.deltaX:P[0]-N[0],A="deltaY"in v?v.deltaY:P[1]-N[1],k,M=v.target,E=Math.abs(C)>Math.abs(A)?"h":"v";if("touches"in v&&E==="h"&&M.type==="range")return!1;var T=_1(E,M);if(!T)return!0;if(T?k=E:(k=E==="v"?"h":"v",T=_1(E,M)),!T)return!1;if(!s.current&&"changedTouches"in v&&(C||A)&&(s.current=k),!k)return!0;var I=s.current||k;return lF(I,w,v,I==="h"?C:A)},[]),d=x.useCallback(function(v){var w=v;if(!(!Ga.length||Ga[Ga.length-1]!==a)){var N="deltaY"in w?C1(w):Ku(w),P=e.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&cF(k.delta,N)})[0];if(P&&P.should){w.cancelable&&w.preventDefault();return}if(!P){var C=(c.current.shards||[]).map(j1).filter(Boolean).filter(function(k){return k.contains(w.target)}),A=C.length>0?u(w,C[0]):!c.current.noIsolation;A&&w.cancelable&&w.preventDefault()}}},[]),h=x.useCallback(function(v,w,N,P){var C={name:v,delta:w,target:N,should:P,shadowParent:fF(N)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(A){return A!==C})},1)},[]),p=x.useCallback(function(v){t.current=Ku(v),s.current=void 0},[]),m=x.useCallback(function(v){h(v.type,C1(v),v.target,u(v,n.lockRef.current))},[]),y=x.useCallback(function(v){h(v.type,Ku(v),v.target,u(v,n.lockRef.current))},[]);x.useEffect(function(){return Ga.push(a),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,Wa),document.addEventListener("touchmove",d,Wa),document.addEventListener("touchstart",p,Wa),function(){Ga=Ga.filter(function(v){return v!==a}),document.removeEventListener("wheel",d,Wa),document.removeEventListener("touchmove",d,Wa),document.removeEventListener("touchstart",p,Wa)}},[]);var b=n.removeScrollBar,_=n.inert;return x.createElement(x.Fragment,null,_?x.createElement(a,{styles:uF(i)}):null,b?x.createElement(tF,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function fF(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const pF=U5(wN,hF);var Th=x.forwardRef(function(n,e){return x.createElement(kh,Xs({},n,{ref:e,sideCar:pF}))});Th.classNames=kh.classNames;var $g=["Enter"," "],mF=["ArrowDown","PageUp","Home"],NN=["ArrowUp","PageDown","End"],gF=[...mF,...NN],yF={ltr:[...$g,"ArrowRight"],rtl:[...$g,"ArrowLeft"]},xF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cc="Menu",[$l,vF,bF]=rc(cc),[da,kN]=wn(cc,[bF,ko,Nh]),Ph=ko(),TN=Nh(),[wF,ha]=da(cc),[SF,uc]=da(cc),PN=n=>{const{__scopeMenu:e,open:t=!1,children:s,dir:i,onOpenChange:a,modal:c=!0}=n,u=Ph(e),[d,h]=x.useState(null),p=x.useRef(!1),m=Dt(a),y=To(i);return x.useEffect(()=>{const b=()=>{p.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>p.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),r.jsx(qj,{...u,children:r.jsx(wF,{scope:e,open:t,onOpenChange:m,content:d,onContentChange:h,children:r.jsx(SF,{scope:e,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:p,dir:y,modal:c,children:s})})})};PN.displayName=cc;var _F="MenuAnchor",nx=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Ph(t);return r.jsx(Qy,{...i,...s,ref:e})});nx.displayName=_F;var sx="MenuPortal",[CF,EN]=da(sx,{forceMount:void 0}),AN=n=>{const{__scopeMenu:e,forceMount:t,children:s,container:i}=n,a=ha(sx,e);return r.jsx(CF,{scope:e,forceMount:t,children:r.jsx(Sn,{present:t||a.open,children:r.jsx(ic,{asChild:!0,container:i,children:s})})})};AN.displayName=sx;var ds="MenuContent",[jF,rx]=da(ds),MN=x.forwardRef((n,e)=>{const t=EN(ds,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=ha(ds,n.__scopeMenu),c=uc(ds,n.__scopeMenu);return r.jsx($l.Provider,{scope:n.__scopeMenu,children:r.jsx(Sn,{present:s||a.open,children:r.jsx($l.Slot,{scope:n.__scopeMenu,children:c.modal?r.jsx(NF,{...i,ref:e}):r.jsx(kF,{...i,ref:e})})})})}),NF=x.forwardRef((n,e)=>{const t=ha(ds,n.__scopeMenu),s=x.useRef(null),i=qe(e,s);return x.useEffect(()=>{const a=s.current;if(a)return tx(a)},[]),r.jsx(ix,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:me(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),kF=x.forwardRef((n,e)=>{const t=ha(ds,n.__scopeMenu);return r.jsx(ix,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),TF=Ji("MenuContent.ScrollLock"),ix=x.forwardRef((n,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:y,onDismiss:b,disableOutsideScroll:_,...v}=n,w=ha(ds,t),N=uc(ds,t),P=Ph(t),C=TN(t),A=vF(t),[k,M]=x.useState(null),E=x.useRef(null),T=qe(e,E,w.onContentChange),I=x.useRef(0),O=x.useRef(""),F=x.useRef(0),L=x.useRef(null),V=x.useRef("right"),z=x.useRef(0),W=_?Th:x.Fragment,G=_?{as:TF,allowPinchZoom:!0}:void 0,K=H=>{const ee=O.current+H,R=A().filter(Q=>!Q.disabled),U=document.activeElement,X=R.find(Q=>Q.ref.current===U)?.textValue,re=R.map(Q=>Q.textValue),ae=BF(re,ee,X),le=R.find(Q=>Q.textValue===ae)?.ref.current;(function Q(se){O.current=se,window.clearTimeout(I.current),se!==""&&(I.current=window.setTimeout(()=>Q(""),1e3))})(ee),le&&setTimeout(()=>le.focus())};x.useEffect(()=>()=>window.clearTimeout(I.current),[]),ex();const $=x.useCallback(H=>V.current===L.current?.side&&UF(H,L.current?.area),[]);return r.jsx(jF,{scope:t,searchRef:O,onItemEnter:x.useCallback(H=>{$(H)&&H.preventDefault()},[$]),onItemLeave:x.useCallback(H=>{$(H)||(E.current?.focus(),M(null))},[$]),onTriggerLeave:x.useCallback(H=>{$(H)&&H.preventDefault()},[$]),pointerGraceTimerRef:F,onPointerGraceIntentChange:x.useCallback(H=>{L.current=H},[]),children:r.jsx(W,{...G,children:r.jsx(jh,{asChild:!0,trapped:i,onMountAutoFocus:me(a,H=>{H.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:r.jsx(_o,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:y,onDismiss:b,children:r.jsx(gN,{asChild:!0,...C,dir:N.dir,orientation:"vertical",loop:s,currentTabStopId:k,onCurrentTabStopIdChange:M,onEntryFocus:me(d,H=>{N.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Yy,{role:"menu","aria-orientation":"vertical","data-state":KN(w.open),"data-radix-menu-content":"",dir:N.dir,...P,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:me(v.onKeyDown,H=>{const R=H.target.closest("[data-radix-menu-content]")===H.currentTarget,U=H.ctrlKey||H.altKey||H.metaKey,X=H.key.length===1;R&&(H.key==="Tab"&&H.preventDefault(),!U&&X&&K(H.key));const re=E.current;if(H.target!==re||!gF.includes(H.key))return;H.preventDefault();const le=A().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);NN.includes(H.key)&&le.reverse(),LF(le)}),onBlur:me(n.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(I.current),O.current="")}),onPointerMove:me(n.onPointerMove,ql(H=>{const ee=H.target,R=z.current!==H.clientX;if(H.currentTarget.contains(ee)&&R){const U=H.clientX>z.current?"right":"left";V.current=U,z.current=H.clientX}}))})})})})})})});MN.displayName=ds;var PF="MenuGroup",ax=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(je.div,{role:"group",...s,ref:e})});ax.displayName=PF;var EF="MenuLabel",RN=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(je.div,{...s,ref:e})});RN.displayName=EF;var Fd="MenuItem",N1="menu.itemSelect",Eh=x.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:s,...i}=n,a=x.useRef(null),c=uc(Fd,n.__scopeMenu),u=rx(Fd,n.__scopeMenu),d=qe(e,a),h=x.useRef(!1),p=()=>{const m=a.current;if(!t&&m){const y=new CustomEvent(N1,{bubbles:!0,cancelable:!0});m.addEventListener(N1,b=>s?.(b),{once:!0}),Ty(m,y),y.defaultPrevented?h.current=!1:c.onClose()}};return r.jsx(IN,{...i,ref:d,disabled:t,onClick:me(n.onClick,p),onPointerDown:m=>{n.onPointerDown?.(m),h.current=!0},onPointerUp:me(n.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:me(n.onKeyDown,m=>{const y=u.searchRef.current!=="";t||y&&m.key===" "||$g.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Eh.displayName=Fd;var IN=x.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:i,...a}=n,c=rx(Fd,t),u=TN(t),d=x.useRef(null),h=qe(e,d),[p,m]=x.useState(!1),[y,b]=x.useState("");return x.useEffect(()=>{const _=d.current;_&&b((_.textContent??"").trim())},[a.children]),r.jsx($l.ItemSlot,{scope:t,disabled:s,textValue:i??y,children:r.jsx(yN,{asChild:!0,...u,focusable:!s,children:r.jsx(je.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:h,onPointerMove:me(n.onPointerMove,ql(_=>{s?c.onItemLeave(_):(c.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(n.onPointerLeave,ql(_=>c.onItemLeave(_))),onFocus:me(n.onFocus,()=>m(!0)),onBlur:me(n.onBlur,()=>m(!1))})})})}),AF="MenuCheckboxItem",ON=x.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:s,...i}=n;return r.jsx(BN,{scope:n.__scopeMenu,checked:t,children:r.jsx(Eh,{role:"menuitemcheckbox","aria-checked":Ld(t)?"mixed":t,...i,ref:e,"data-state":lx(t),onSelect:me(i.onSelect,()=>s?.(Ld(t)?!0:!t),{checkForDefaultPrevented:!1})})})});ON.displayName=AF;var DN="MenuRadioGroup",[MF,RF]=da(DN,{value:void 0,onValueChange:()=>{}}),FN=x.forwardRef((n,e)=>{const{value:t,onValueChange:s,...i}=n,a=Dt(s);return r.jsx(MF,{scope:n.__scopeMenu,value:t,onValueChange:a,children:r.jsx(ax,{...i,ref:e})})});FN.displayName=DN;var LN="MenuRadioItem",zN=x.forwardRef((n,e)=>{const{value:t,...s}=n,i=RF(LN,n.__scopeMenu),a=t===i.value;return r.jsx(BN,{scope:n.__scopeMenu,checked:a,children:r.jsx(Eh,{role:"menuitemradio","aria-checked":a,...s,ref:e,"data-state":lx(a),onSelect:me(s.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});zN.displayName=LN;var ox="MenuItemIndicator",[BN,IF]=da(ox,{checked:!1}),VN=x.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:s,...i}=n,a=IF(ox,t);return r.jsx(Sn,{present:s||Ld(a.checked)||a.checked===!0,children:r.jsx(je.span,{...i,ref:e,"data-state":lx(a.checked)})})});VN.displayName=ox;var OF="MenuSeparator",UN=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});UN.displayName=OF;var DF="MenuArrow",$N=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Ph(t);return r.jsx(Xy,{...i,...s,ref:e})});$N.displayName=DF;var FF="MenuSub",[UH,qN]=da(FF),Al="MenuSubTrigger",WN=x.forwardRef((n,e)=>{const t=ha(Al,n.__scopeMenu),s=uc(Al,n.__scopeMenu),i=qN(Al,n.__scopeMenu),a=rx(Al,n.__scopeMenu),c=x.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=a,h={__scopeMenu:n.__scopeMenu},p=x.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return x.useEffect(()=>p,[p]),x.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),d(null)}},[u,d]),r.jsx(nx,{asChild:!0,...h,children:r.jsx(IN,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":KN(t.open),...n,ref:uh(e,i.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:me(n.onPointerMove,ql(m=>{a.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),p()},100))})),onPointerLeave:me(n.onPointerLeave,ql(m=>{p();const y=t.content?.getBoundingClientRect();if(y){const b=t.content?.dataset.side,_=b==="right",v=_?-5:5,w=y[_?"left":"right"],N=y[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+v,y:m.clientY},{x:w,y:y.top},{x:N,y:y.top},{x:N,y:y.bottom},{x:w,y:y.bottom}],side:b}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:me(n.onKeyDown,m=>{const y=a.searchRef.current!=="";n.disabled||y&&m.key===" "||yF[s.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});WN.displayName=Al;var GN="MenuSubContent",HN=x.forwardRef((n,e)=>{const t=EN(ds,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=ha(ds,n.__scopeMenu),c=uc(ds,n.__scopeMenu),u=qN(GN,n.__scopeMenu),d=x.useRef(null),h=qe(e,d);return r.jsx($l.Provider,{scope:n.__scopeMenu,children:r.jsx(Sn,{present:s||a.open,children:r.jsx($l.Slot,{scope:n.__scopeMenu,children:r.jsx(ix,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:h,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{c.isUsingKeyboardRef.current&&d.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:me(n.onFocusOutside,p=>{p.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:me(n.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:me(n.onKeyDown,p=>{const m=p.currentTarget.contains(p.target),y=xF[c.dir].includes(p.key);m&&y&&(a.onOpenChange(!1),u.trigger?.focus(),p.preventDefault())})})})})})});HN.displayName=GN;function KN(n){return n?"open":"closed"}function Ld(n){return n==="indeterminate"}function lx(n){return Ld(n)?"indeterminate":n?"checked":"unchecked"}function LF(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function zF(n,e){return n.map((t,s)=>n[(e+s)%n.length])}function BF(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=zF(n,Math.max(a,0));i.length===1&&(c=c.filter(h=>h!==t));const d=c.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function VF(n,e){const{x:t,y:s}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a],d=e[c],h=u.x,p=u.y,m=d.x,y=d.y;p>s!=y>s&&t<(m-h)*(s-p)/(y-p)+h&&(i=!i)}return i}function UF(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return VF(t,e)}function ql(n){return e=>e.pointerType==="mouse"?n(e):void 0}var $F=PN,qF=nx,WF=AN,GF=MN,HF=ax,KF=RN,QF=Eh,YF=ON,XF=FN,ZF=zN,JF=VN,e3=UN,t3=$N,n3=WN,s3=HN,Ah="DropdownMenu",[r3,$H]=wn(Ah,[kN]),An=kN(),[i3,QN]=r3(Ah),YN=n=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:i,defaultOpen:a,onOpenChange:c,modal:u=!0}=n,d=An(e),h=x.useRef(null),[p,m]=nr({prop:i,defaultProp:a??!1,onChange:c,caller:Ah});return r.jsx(i3,{scope:e,triggerId:er(),triggerRef:h,contentId:er(),open:p,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(y=>!y),[m]),modal:u,children:r.jsx($F,{...d,open:p,onOpenChange:m,dir:s,modal:u,children:t})})};YN.displayName=Ah;var XN="DropdownMenuTrigger",ZN=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...i}=n,a=QN(XN,t),c=An(t);return r.jsx(qF,{asChild:!0,...c,children:r.jsx(je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:uh(e,a.triggerRef),onPointerDown:me(n.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:me(n.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});ZN.displayName=XN;var a3="DropdownMenuPortal",JN=n=>{const{__scopeDropdownMenu:e,...t}=n,s=An(e);return r.jsx(WF,{...s,...t})};JN.displayName=a3;var e2="DropdownMenuContent",t2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=QN(e2,t),a=An(t),c=x.useRef(!1);return r.jsx(GF,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:e,onCloseAutoFocus:me(n.onCloseAutoFocus,u=>{c.current||i.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:me(n.onInteractOutside,u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;(!i.modal||p)&&(c.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});t2.displayName=e2;var o3="DropdownMenuGroup",l3=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(HF,{...i,...s,ref:e})});l3.displayName=o3;var c3="DropdownMenuLabel",n2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(KF,{...i,...s,ref:e})});n2.displayName=c3;var u3="DropdownMenuItem",s2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(QF,{...i,...s,ref:e})});s2.displayName=u3;var d3="DropdownMenuCheckboxItem",r2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(YF,{...i,...s,ref:e})});r2.displayName=d3;var h3="DropdownMenuRadioGroup",f3=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(XF,{...i,...s,ref:e})});f3.displayName=h3;var p3="DropdownMenuRadioItem",i2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(ZF,{...i,...s,ref:e})});i2.displayName=p3;var m3="DropdownMenuItemIndicator",a2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(JF,{...i,...s,ref:e})});a2.displayName=m3;var g3="DropdownMenuSeparator",o2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(e3,{...i,...s,ref:e})});o2.displayName=g3;var y3="DropdownMenuArrow",x3=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(t3,{...i,...s,ref:e})});x3.displayName=y3;var v3="DropdownMenuSubTrigger",l2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(n3,{...i,...s,ref:e})});l2.displayName=v3;var b3="DropdownMenuSubContent",c2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=An(t);return r.jsx(s3,{...i,...s,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});c2.displayName=b3;var w3=YN,S3=ZN,_3=JN,u2=t2,d2=n2,h2=s2,f2=r2,p2=i2,m2=a2,g2=o2,y2=l2,x2=c2;const C3=w3,j3=S3,N3=x.forwardRef(({className:n,inset:e,children:t,...s},i)=>r.jsxs(y2,{ref:i,className:Re("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...s,children:[t,r.jsx(vO,{className:"ml-auto"})]}));N3.displayName=y2.displayName;const k3=x.forwardRef(({className:n,...e},t)=>r.jsx(x2,{ref:t,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));k3.displayName=x2.displayName;const v2=x.forwardRef(({className:n,sideOffset:e=4,...t},s)=>r.jsx(_3,{children:r.jsx(u2,{ref:s,sideOffset:e,className:Re("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));v2.displayName=u2.displayName;const wd=x.forwardRef(({className:n,inset:e,...t},s)=>r.jsx(h2,{ref:s,className:Re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));wd.displayName=h2.displayName;const T3=x.forwardRef(({className:n,children:e,checked:t,...s},i)=>r.jsxs(f2,{ref:i,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(m2,{children:r.jsx(Ry,{className:"h-4 w-4"})})}),e]}));T3.displayName=f2.displayName;const P3=x.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(p2,{ref:s,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(m2,{children:r.jsx(SO,{className:"h-2 w-2 fill-current"})})}),e]}));P3.displayName=p2.displayName;const E3=x.forwardRef(({className:n,inset:e,...t},s)=>r.jsx(d2,{ref:s,className:Re("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));E3.displayName=d2.displayName;const b2=x.forwardRef(({className:n,...e},t)=>r.jsx(g2,{ref:t,className:Re("-mx-1 my-1 h-px bg-muted",n),...e}));b2.displayName=g2.displayName;function A3(){return r.jsx("nav",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx(Nr,{href:"/",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-purple-600 to-blue-600"}),r.jsx("span",{className:"text-xl font-bold",children:"CodedSwitch"})]})})}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(C3,{children:[r.jsx(j3,{asChild:!0,children:r.jsx(te,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:r.jsx(lN,{className:"h-8 w-8",children:r.jsx(cN,{children:"CS"})})})}),r.jsxs(v2,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(wd,{asChild:!0,children:r.jsxs(Nr,{href:"/billing",className:"flex items-center",children:[r.jsx(Iy,{className:"mr-2 h-4 w-4"}),"Billing"]})}),r.jsx(wd,{asChild:!0,children:r.jsxs(Nr,{href:"/settings",className:"flex items-center",children:[r.jsx(ta,{className:"mr-2 h-4 w-4"}),"Settings"]})}),r.jsx(b2,{}),r.jsxs(wd,{children:[r.jsx(kO,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})})}const M3=[{name:"Dashboard",href:"/dashboard",icon:My},{name:"Music Studio",href:"/music-studio",icon:PO},{name:"Mix Studio",href:"/mix-studio",icon:ea},{name:"Pro Console",href:"/pro-console",icon:zy},{name:"MIDI Controller",href:"/midi-controller",icon:NO},{name:"Song Uploader",href:"/song-uploader",icon:fi},{name:"Beat Maker",href:"/beat-studio",icon:mh},{name:"Melody Composer",href:"/melody-composer",icon:Pn},{name:"Code Translator",href:"/code-translator",icon:hi},{name:"Code to Music",href:"/codebeat-studio",icon:fs},{name:"Lyric Lab",href:"/lyric-lab",icon:uj},{name:"Vulnerability Scanner",href:"/vulnerability-scanner",icon:Fy},{name:"AI Assistant",href:"/ai-assistant",icon:gh},{name:"Pack Generator",href:"/pack-generator",icon:dj},{name:"Advanced Sequencer",href:"/advanced-sequencer",icon:ea},{name:"Granular Engine",href:"/granular-engine",icon:na},{name:"Wavetable Synth",href:"/wavetable-oscillator",icon:Md},{name:"Song Structure",href:"/song-structure",icon:Oy},{name:"Pro Audio",href:"/pro-audio",icon:FO}],R3=[{name:"Billing",href:"/billing",icon:Iy},{name:"Settings",href:"/settings",icon:ta}];function I3(){const[n]=vo();return r.jsxs("div",{className:"flex h-screen w-64 flex-col bg-background border-r",children:[r.jsx("div",{className:"flex-1 space-y-1 px-3 py-4",children:M3.map(e=>{const t=n===e.href;return r.jsx(Nr,{href:e.href,children:r.jsxs("div",{className:Re("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[r.jsx(e.icon,{className:Re("mr-3 h-4 w-4 flex-shrink-0",t?"text-primary-foreground":"text-muted-foreground")}),e.name]})},e.name)})}),r.jsx("div",{className:"border-t px-3 py-4 space-y-1",children:R3.map(e=>{const t=n===e.href;return r.jsx(Nr,{href:e.href,children:r.jsxs("div",{className:Re("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[r.jsx(e.icon,{className:Re("mr-3 h-4 w-4 flex-shrink-0",t?"text-primary-foreground":"text-muted-foreground")}),e.name]})},e.name)})})]})}const ye=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ye.displayName="Card";const _e=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("flex flex-col space-y-1.5 p-6",n),...e}));_e.displayName="CardHeader";const Ce=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ce.displayName="CardTitle";const Yt=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("text-sm text-muted-foreground",n),...e}));Yt.displayName="CardDescription";const we=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("p-6 pt-0",n),...e}));we.displayName="CardContent";const O3=x.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Re("flex items-center p-6 pt-0",n),...e}));O3.displayName="CardFooter";function D3(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(ye,{className:"w-full max-w-md mx-4",children:r.jsxs(we,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(wO,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function w2(){const n=[{icon:hi,title:"Code Translation",description:"Translate code between 14+ programming languages with AI assistance"},{icon:Pn,title:"Professional Music Studio",description:"Create music with multi-instrument orchestral compositions and MIDI support"},{icon:fi,title:"Song Analysis",description:"Upload songs for AI-powered analysis and intelligent music insights"},{icon:mh,title:"Beat Studio",description:"Professional drum synthesis with real-time pattern editing"},{icon:fs,title:"Code to Music",description:"Revolutionary bidirectional translation between code and musical compositions"},{icon:Fy,title:"Security Scanner",description:"AI-powered code vulnerability detection and security analysis"},{icon:gh,title:"AI Assistant",description:"24/7 intelligent help with multiple AI providers (Grok, Gemini, OpenAI)"}];return r.jsx("div",{className:"min-h-screen min-w-[1400px] bg-gradient-to-br from-background to-secondary/20",children:r.jsxs("div",{className:"container mx-auto px-4 py-16 w-full",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"h-16 w-16 mx-auto mb-8 rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center",children:r.jsx(Pn,{className:"h-8 w-8 text-white"})}),r.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"CodedSwitch"}),r.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"The world's first AI-powered bidirectional translation platform that bridges code development with music creation"}),r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsx(Nr,{href:"/dashboard",children:r.jsx(te,{size:"lg",className:"text-lg px-8",children:"Get Started"})}),r.jsx(Nr,{href:"/music-studio",children:r.jsx(te,{variant:"outline",size:"lg",className:"text-lg px-8",children:"Try Music Studio"})})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:n.map((e,t)=>r.jsxs(ye,{className:"transition-transform hover:scale-105",children:[r.jsxs(_e,{children:[r.jsx(e.icon,{className:"h-8 w-8 text-primary mb-2"}),r.jsx(Ce,{children:e.title})]}),r.jsx(we,{children:r.jsx(Yt,{children:e.description})})]},t))}),r.jsxs("div",{className:"text-center bg-card rounded-2xl p-12 border",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Workflow?"}),r.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Experience the future of creative development with AI-powered tools that bridge the gap between code and music."}),r.jsx(Nr,{href:"/dashboard",children:r.jsx(te,{size:"lg",className:"text-lg px-8",children:"Start Creating Now"})})]})]})})}function F3(){const n=[{title:"Music Studio",description:"Professional multi-instrument composition",icon:Pn,href:"/music-studio",color:"bg-purple-500"},{title:"Song Uploader",description:"Upload and analyze audio files",icon:fi,href:"/song-uploader",color:"bg-blue-500"},{title:"Code Translator",description:"Translate between programming languages",icon:hi,href:"/code-translator",color:"bg-green-500"},{title:"Beat Maker",description:"Create professional drum patterns",icon:mh,href:"/beat-studio",color:"bg-orange-500"},{title:"Code to Music",description:"Transform code into musical compositions",icon:fs,href:"/codebeat-studio",color:"bg-yellow-500"},{title:"AI Assistant",description:"Get help with coding and music",icon:gh,href:"/ai-assistant",color:"bg-pink-500"},{title:"Advanced Sequencer",description:"Professional multi-layered beat production",icon:ea,href:"/advanced-sequencer",color:"bg-orange-500"},{title:"Granular Engine",description:"Advanced texture manipulation & synthesis",icon:na,href:"/granular-engine",color:"bg-purple-500"},{title:"Pack Generator",description:"AI-powered sample pack creation from prompts",icon:Pn,href:"/pack-generator",color:"bg-emerald-500"}];return r.jsx("div",{className:"p-6 space-y-6 min-w-[1400px]",children:r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Welcome to your creative workspace"})]}),r.jsx(My,{className:"h-8 w-8 text-muted-foreground"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ye,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium",children:"Projects Created"}),r.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(we,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"12"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last week"})]})]}),r.jsxs(ye,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium",children:"Code Translations"}),r.jsx(hi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(we,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"48"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+12 from last week"})]})]}),r.jsxs(ye,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium",children:"Songs Analyzed"}),r.jsx(fi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(we,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"24"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+8 from last week"})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,t)=>r.jsx(Nr,{href:e.href,children:r.jsxs(ye,{className:"transition-transform hover:scale-105 cursor-pointer h-full",children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:r.jsx(e.icon,{className:"h-4 w-4 text-white"})}),r.jsx(Ce,{className:"text-lg",children:e.title})]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsx(Yt,{children:e.description}),r.jsx(te,{className:"w-full",children:"Open"})]})]})},t))})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Recent Activity"})}),r.jsx(we,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Pn,{className:"h-4 w-4 text-purple-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:'Created "Electronic Symphony"'}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(hi,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Translated Python to JavaScript"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"4 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(fi,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:'Analyzed "Summer Vibes.mp3"'}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"1 day ago"})]})]})]})})]})]})})}const L3=fh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:n,variant:e,...t}){return r.jsx("div",{className:Re(L3({variant:e}),n),...t})}function z3(){const[,n]=vo(),{data:e,isLoading:t}=wo({queryKey:["/api/subscription-status"],queryFn:()=>yt("GET","/api/subscription-status").then(i=>i.json()),refetchInterval:3e4}),s=()=>{n("/subscribe")};if(t)return r.jsxs(te,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-subscription-loading",children:[r.jsx(lo,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]});if(e?.hasActiveSubscription){const i=e.tier==="basic"?"Basic":"Pro",a=e.tier==="basic"?"bg-gradient-to-r from-blue-600 to-cyan-600":"bg-gradient-to-r from-purple-600 to-blue-600";return r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(Oe,{variant:"secondary",className:`${a} text-white`,"data-testid":"badge-subscription-active",children:[r.jsx(lj,{className:"h-3 w-3 mr-1"}),"CodedSwitch ",i]})})}return r.jsxs(te,{onClick:s,size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700","data-testid":"button-upgrade-pro",children:[r.jsx(fs,{className:"h-4 w-4 mr-2"}),"Choose Plan"]})}function B3(){return r.jsxs("div",{className:"bg-studio-panel border-b border-gray-700 px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 relative",children:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("defs",{children:r.jsx("style",{children:`
                    .draw-line {
                      stroke-dasharray: 200;
                      stroke-dashoffset: 200;
                      animation: draw 3s ease-in-out forwards;
                    }
                    .draw-circle {
                      stroke-dasharray: 60;
                      stroke-dashoffset: 60;
                      animation: draw-circle 2s ease-in-out forwards;
                    }
                    .draw-eye {
                      stroke-dasharray: 100;
                      stroke-dashoffset: 100;
                      animation: draw-eye 2.5s ease-in-out forwards;
                    }
                    @keyframes draw {
                      to { stroke-dashoffset: 0; }
                    }
                    @keyframes draw-circle {
                      to { stroke-dashoffset: 0; }
                    }
                    @keyframes draw-eye {
                      to { stroke-dashoffset: 0; }
                    }
                    .fade-in {
                      opacity: 0;
                      animation: fadeIn 1s ease-in-out 2s forwards;
                    }
                    @keyframes fadeIn {
                      to { opacity: 1; }
                    }
                  `})}),r.jsx("path",{d:"M15 25 L15 15 L25 15",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0s"}}),r.jsx("path",{d:"M75 15 L85 15 L85 25",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.2s"}}),r.jsx("path",{d:"M85 75 L85 85 L75 85",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.4s"}}),r.jsx("path",{d:"M25 85 L15 85 L15 75",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.6s"}}),r.jsx("line",{x1:"25",y1:"15",x2:"40",y2:"30",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"0.8s"}}),r.jsx("line",{x1:"75",y1:"15",x2:"60",y2:"30",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1s"}}),r.jsx("line",{x1:"85",y1:"75",x2:"70",y2:"60",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1.2s"}}),r.jsx("line",{x1:"15",y1:"75",x2:"30",y2:"60",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1.4s"}}),r.jsx("ellipse",{cx:"50",cy:"50",rx:"20",ry:"12",fill:"none",stroke:"#3b82f6",strokeWidth:"2",className:"draw-eye",style:{animationDelay:"1.6s"}}),r.jsx("circle",{cx:"50",cy:"50",r:"6",fill:"none",stroke:"#60a5fa",strokeWidth:"2",className:"draw-circle",style:{animationDelay:"2s"}}),r.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#3b82f6",className:"fade-in"}),r.jsx("circle",{cx:"20",cy:"20",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.2s"}}),r.jsx("circle",{cx:"80",cy:"20",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.4s"}}),r.jsx("circle",{cx:"80",cy:"80",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.6s"}}),r.jsx("circle",{cx:"20",cy:"80",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.8s"}}),r.jsx("circle",{cx:"20",cy:"20",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.2s"}}),r.jsx("circle",{cx:"80",cy:"20",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.4s"}}),r.jsx("circle",{cx:"80",cy:"80",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.6s"}}),r.jsx("circle",{cx:"20",cy:"80",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.8s"}})]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-heading font-bold text-white",children:"CodedSwitch"}),r.jsx("p",{className:"text-xs text-blue-400 -mt-1 font-medium",children:"AI Godfather"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full animate-pulse"}),r.jsx("span",{children:"AI Engine Active"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(z3,{}),r.jsxs(te,{className:"bg-studio-accent hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[r.jsx("i",{className:"fas fa-save mr-2"}),"Save Project"]}),r.jsxs(te,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[r.jsx("i",{className:"fas fa-share mr-2"}),"Export"]}),r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold",children:"CT"})})]})]})}function Mh(n){const e=x.useRef({value:n,previous:n});return x.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Rh="Switch",[V3,qH]=wn(Rh),[U3,$3]=V3(Rh),S2=x.forwardRef((n,e)=>{const{__scopeSwitch:t,name:s,checked:i,defaultChecked:a,required:c,disabled:u,value:d="on",onCheckedChange:h,form:p,...m}=n,[y,b]=x.useState(null),_=qe(e,C=>b(C)),v=x.useRef(!1),w=y?p||!!y.closest("form"):!0,[N,P]=nr({prop:i,defaultProp:a??!1,onChange:h,caller:Rh});return r.jsxs(U3,{scope:t,checked:N,disabled:u,children:[r.jsx(je.button,{type:"button",role:"switch","aria-checked":N,"aria-required":c,"data-state":N2(N),"data-disabled":u?"":void 0,disabled:u,value:d,...m,ref:_,onClick:me(n.onClick,C=>{P(A=>!A),w&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),w&&r.jsx(j2,{control:y,bubbles:!v.current,name:s,value:d,checked:N,required:c,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});S2.displayName=Rh;var _2="SwitchThumb",C2=x.forwardRef((n,e)=>{const{__scopeSwitch:t,...s}=n,i=$3(_2,t);return r.jsx(je.span,{"data-state":N2(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});C2.displayName=_2;var q3="SwitchBubbleInput",j2=x.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:s=!0,...i},a)=>{const c=x.useRef(null),u=qe(c,a),d=Mh(t),h=Sh(e);return x.useEffect(()=>{const p=c.current;if(!p)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==t&&b){const _=new Event("click",{bubbles:s});b.call(p,t),p.dispatchEvent(_)}},[d,t,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:u,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});j2.displayName=q3;function N2(n){return n?"checked":"unchecked"}var k2=S2,W3=C2;const oi=x.forwardRef(({className:n,...e},t)=>r.jsx(k2,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:r.jsx(W3,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));oi.displayName=k2.displayName;function Wl(n,[e,t]){return Math.min(t,Math.max(e,n))}var G3=[" ","Enter","ArrowUp","ArrowDown"],H3=[" ","Enter"],ra="Select",[Ih,Oh,K3]=rc(ra),[Po,WH]=wn(ra,[K3,ko]),Dh=ko(),[Q3,Ci]=Po(ra),[Y3,X3]=Po(ra),T2=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:a,value:c,defaultValue:u,onValueChange:d,dir:h,name:p,autoComplete:m,disabled:y,required:b,form:_}=n,v=Dh(e),[w,N]=x.useState(null),[P,C]=x.useState(null),[A,k]=x.useState(!1),M=To(h),[E,T]=nr({prop:s,defaultProp:i??!1,onChange:a,caller:ra}),[I,O]=nr({prop:c,defaultProp:u,onChange:d,caller:ra}),F=x.useRef(null),L=w?_||!!w.closest("form"):!0,[V,z]=x.useState(new Set),W=Array.from(V).map(G=>G.props.value).join(";");return r.jsx(qj,{...v,children:r.jsxs(Q3,{required:b,scope:e,trigger:w,onTriggerChange:N,valueNode:P,onValueNodeChange:C,valueNodeHasChildren:A,onValueNodeHasChildrenChange:k,contentId:er(),value:I,onValueChange:O,open:E,onOpenChange:T,dir:M,triggerPointerDownPosRef:F,disabled:y,children:[r.jsx(Ih.Provider,{scope:e,children:r.jsx(Y3,{scope:n.__scopeSelect,onNativeOptionAdd:x.useCallback(G=>{z(K=>new Set(K).add(G))},[]),onNativeOptionRemove:x.useCallback(G=>{z(K=>{const $=new Set(K);return $.delete(G),$})},[]),children:t})}),L?r.jsxs(Z2,{"aria-hidden":!0,required:b,tabIndex:-1,name:p,autoComplete:m,value:I,onChange:G=>O(G.target.value),disabled:y,form:_,children:[I===void 0?r.jsx("option",{value:""}):null,Array.from(V)]},W):null]})})};T2.displayName=ra;var P2="SelectTrigger",E2=x.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,a=Dh(t),c=Ci(P2,t),u=c.disabled||s,d=qe(e,c.onTriggerChange),h=Oh(t),p=x.useRef("touch"),[m,y,b]=ek(v=>{const w=h().filter(C=>!C.disabled),N=w.find(C=>C.value===c.value),P=tk(w,v,N);P!==void 0&&c.onValueChange(P.value)}),_=v=>{u||(c.onOpenChange(!0),b()),v&&(c.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return r.jsx(Qy,{asChild:!0,...a,children:r.jsx(je.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":J2(c.value)?"":void 0,...i,ref:d,onClick:me(i.onClick,v=>{v.currentTarget.focus(),p.current!=="mouse"&&_(v)}),onPointerDown:me(i.onPointerDown,v=>{p.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(_(v),v.preventDefault())}),onKeyDown:me(i.onKeyDown,v=>{const w=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&y(v.key),!(w&&v.key===" ")&&G3.includes(v.key)&&(_(),v.preventDefault())})})})});E2.displayName=P2;var A2="SelectValue",M2=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:a,placeholder:c="",...u}=n,d=Ci(A2,t),{onValueNodeHasChildrenChange:h}=d,p=a!==void 0,m=qe(e,d.onValueNodeChange);return Ut(()=>{h(p)},[h,p]),r.jsx(je.span,{...u,ref:m,style:{pointerEvents:"none"},children:J2(d.value)?r.jsx(r.Fragment,{children:c}):a})});M2.displayName=A2;var Z3="SelectIcon",R2=x.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return r.jsx(je.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});R2.displayName=Z3;var J3="SelectPortal",I2=n=>r.jsx(ic,{asChild:!0,...n});I2.displayName=J3;var ia="SelectContent",O2=x.forwardRef((n,e)=>{const t=Ci(ia,n.__scopeSelect),[s,i]=x.useState();if(Ut(()=>{i(new DocumentFragment)},[]),!t.open){const a=s;return a?So.createPortal(r.jsx(D2,{scope:n.__scopeSelect,children:r.jsx(Ih.Slot,{scope:n.__scopeSelect,children:r.jsx("div",{children:n.children})})}),a):null}return r.jsx(F2,{...n,ref:e})});O2.displayName=ia;var Cs=10,[D2,ji]=Po(ia),e6="SelectContentImpl",t6=Ji("SelectContent.RemoveScroll"),F2=x.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:b,sticky:_,hideWhenDetached:v,avoidCollisions:w,...N}=n,P=Ci(ia,t),[C,A]=x.useState(null),[k,M]=x.useState(null),E=qe(e,Q=>A(Q)),[T,I]=x.useState(null),[O,F]=x.useState(null),L=Oh(t),[V,z]=x.useState(!1),W=x.useRef(!1);x.useEffect(()=>{if(C)return tx(C)},[C]),ex();const G=x.useCallback(Q=>{const[se,...xe]=L().map(oe=>oe.ref.current),[Pe]=xe.slice(-1),Fe=document.activeElement;for(const oe of Q)if(oe===Fe||(oe?.scrollIntoView({block:"nearest"}),oe===se&&k&&(k.scrollTop=0),oe===Pe&&k&&(k.scrollTop=k.scrollHeight),oe?.focus(),document.activeElement!==Fe))return},[L,k]),K=x.useCallback(()=>G([T,C]),[G,T,C]);x.useEffect(()=>{V&&K()},[V,K]);const{onOpenChange:$,triggerPointerDownPosRef:H}=P;x.useEffect(()=>{if(C){let Q={x:0,y:0};const se=Pe=>{Q={x:Math.abs(Math.round(Pe.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(Pe.pageY)-(H.current?.y??0))}},xe=Pe=>{Q.x<=10&&Q.y<=10?Pe.preventDefault():C.contains(Pe.target)||$(!1),document.removeEventListener("pointermove",se),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",xe,{capture:!0})}}},[C,$,H]),x.useEffect(()=>{const Q=()=>$(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[$]);const[ee,R]=ek(Q=>{const se=L().filter(Fe=>!Fe.disabled),xe=se.find(Fe=>Fe.ref.current===document.activeElement),Pe=tk(se,Q,xe);Pe&&setTimeout(()=>Pe.ref.current.focus())}),U=x.useCallback((Q,se,xe)=>{const Pe=!W.current&&!xe;(P.value!==void 0&&P.value===se||Pe)&&(I(Q),Pe&&(W.current=!0))},[P.value]),X=x.useCallback(()=>C?.focus(),[C]),re=x.useCallback((Q,se,xe)=>{const Pe=!W.current&&!xe;(P.value!==void 0&&P.value===se||Pe)&&F(Q)},[P.value]),ae=s==="popper"?qg:L2,le=ae===qg?{side:u,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:b,sticky:_,hideWhenDetached:v,avoidCollisions:w}:{};return r.jsx(D2,{scope:t,content:C,viewport:k,onViewportChange:M,itemRefCallback:U,selectedItem:T,onItemLeave:X,itemTextRefCallback:re,focusSelectedItem:K,selectedItemText:O,position:s,isPositioned:V,searchRef:ee,children:r.jsx(Th,{as:t6,allowPinchZoom:!0,children:r.jsx(jh,{asChild:!0,trapped:P.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:me(i,Q=>{P.trigger?.focus({preventScroll:!0}),Q.preventDefault()}),children:r.jsx(_o,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:r.jsx(ae,{role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:Q=>Q.preventDefault(),...N,...le,onPlaced:()=>z(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:me(N.onKeyDown,Q=>{const se=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!se&&Q.key.length===1&&R(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Pe=L().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Fe=Q.target,oe=Pe.indexOf(Fe);Pe=Pe.slice(oe+1)}setTimeout(()=>G(Pe)),Q.preventDefault()}})})})})})})});F2.displayName=e6;var n6="SelectItemAlignedPosition",L2=x.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,a=Ci(ia,t),c=ji(ia,t),[u,d]=x.useState(null),[h,p]=x.useState(null),m=qe(e,E=>p(E)),y=Oh(t),b=x.useRef(!1),_=x.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:N,focusSelectedItem:P}=c,C=x.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&h&&v&&w&&N){const E=a.trigger.getBoundingClientRect(),T=h.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),O=N.getBoundingClientRect();if(a.dir!=="rtl"){const Fe=O.left-T.left,oe=I.left-Fe,ke=E.left-oe,Me=E.width+ke,ce=Math.max(Me,T.width),ve=window.innerWidth-Cs,Ve=Wl(oe,[Cs,Math.max(Cs,ve-ce)]);u.style.minWidth=Me+"px",u.style.left=Ve+"px"}else{const Fe=T.right-O.right,oe=window.innerWidth-I.right-Fe,ke=window.innerWidth-E.right-oe,Me=E.width+ke,ce=Math.max(Me,T.width),ve=window.innerWidth-Cs,Ve=Wl(oe,[Cs,Math.max(Cs,ve-ce)]);u.style.minWidth=Me+"px",u.style.right=Ve+"px"}const F=y(),L=window.innerHeight-Cs*2,V=v.scrollHeight,z=window.getComputedStyle(h),W=parseInt(z.borderTopWidth,10),G=parseInt(z.paddingTop,10),K=parseInt(z.borderBottomWidth,10),$=parseInt(z.paddingBottom,10),H=W+G+V+$+K,ee=Math.min(w.offsetHeight*5,H),R=window.getComputedStyle(v),U=parseInt(R.paddingTop,10),X=parseInt(R.paddingBottom,10),re=E.top+E.height/2-Cs,ae=L-re,le=w.offsetHeight/2,Q=w.offsetTop+le,se=W+G+Q,xe=H-se;if(se<=re){const Fe=F.length>0&&w===F[F.length-1].ref.current;u.style.bottom="0px";const oe=h.clientHeight-v.offsetTop-v.offsetHeight,ke=Math.max(ae,le+(Fe?X:0)+oe+K),Me=se+ke;u.style.height=Me+"px"}else{const Fe=F.length>0&&w===F[0].ref.current;u.style.top="0px";const ke=Math.max(re,W+v.offsetTop+(Fe?U:0)+le)+xe;u.style.height=ke+"px",v.scrollTop=se-re+v.offsetTop}u.style.margin=`${Cs}px 0`,u.style.minHeight=ee+"px",u.style.maxHeight=L+"px",s?.(),requestAnimationFrame(()=>b.current=!0)}},[y,a.trigger,a.valueNode,u,h,v,w,N,a.dir,s]);Ut(()=>C(),[C]);const[A,k]=x.useState();Ut(()=>{h&&k(window.getComputedStyle(h).zIndex)},[h]);const M=x.useCallback(E=>{E&&_.current===!0&&(C(),P?.(),_.current=!1)},[C,P]);return r.jsx(r6,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:M,children:r.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:r.jsx(je.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});L2.displayName=n6;var s6="SelectPopperPosition",qg=x.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=Cs,...a}=n,c=Dh(t);return r.jsx(Yy,{...c,...a,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qg.displayName=s6;var[r6,cx]=Po(ia,{}),Wg="SelectViewport",z2=x.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,a=ji(Wg,t),c=cx(Wg,t),u=qe(e,a.onViewportChange),d=x.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Ih.Slot,{scope:t,children:r.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:me(i.onScroll,h=>{const p=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=c;if(y?.current&&m){const b=Math.abs(d.current-p.scrollTop);if(b>0){const _=window.innerHeight-Cs*2,v=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),N=Math.max(v,w);if(N<_){const P=N+b,C=Math.min(_,P),A=P-C;m.style.height=C+"px",m.style.bottom==="0px"&&(p.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});z2.displayName=Wg;var B2="SelectGroup",[i6,a6]=Po(B2),o6=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=er();return r.jsx(i6,{scope:t,id:i,children:r.jsx(je.div,{role:"group","aria-labelledby":i,...s,ref:e})})});o6.displayName=B2;var V2="SelectLabel",U2=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=a6(V2,t);return r.jsx(je.div,{id:i.id,...s,ref:e})});U2.displayName=V2;var zd="SelectItem",[l6,$2]=Po(zd),q2=x.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:a,...c}=n,u=Ci(zd,t),d=ji(zd,t),h=u.value===s,[p,m]=x.useState(a??""),[y,b]=x.useState(!1),_=qe(e,P=>d.itemRefCallback?.(P,s,i)),v=er(),w=x.useRef("touch"),N=()=>{i||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(l6,{scope:t,value:s,disabled:i,textId:v,isSelected:h,onItemTextChange:x.useCallback(P=>{m(C=>C||(P?.textContent??"").trim())},[]),children:r.jsx(Ih.ItemSlot,{scope:t,value:s,disabled:i,textValue:p,children:r.jsx(je.div,{role:"option","aria-labelledby":v,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:_,onFocus:me(c.onFocus,()=>b(!0)),onBlur:me(c.onBlur,()=>b(!1)),onClick:me(c.onClick,()=>{w.current!=="mouse"&&N()}),onPointerUp:me(c.onPointerUp,()=>{w.current==="mouse"&&N()}),onPointerDown:me(c.onPointerDown,P=>{w.current=P.pointerType}),onPointerMove:me(c.onPointerMove,P=>{w.current=P.pointerType,i?d.onItemLeave?.():w.current==="mouse"&&P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(c.onPointerLeave,P=>{P.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:me(c.onKeyDown,P=>{d.searchRef?.current!==""&&P.key===" "||(H3.includes(P.key)&&N(),P.key===" "&&P.preventDefault())})})})})});q2.displayName=zd;var Ml="SelectItemText",W2=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...a}=n,c=Ci(Ml,t),u=ji(Ml,t),d=$2(Ml,t),h=X3(Ml,t),[p,m]=x.useState(null),y=qe(e,N=>m(N),d.onItemTextChange,N=>u.itemTextRefCallback?.(N,d.value,d.disabled)),b=p?.textContent,_=x.useMemo(()=>r.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=h;return Ut(()=>(v(_),()=>w(_)),[v,w,_]),r.jsxs(r.Fragment,{children:[r.jsx(je.span,{id:d.textId,...a,ref:y}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?So.createPortal(a.children,c.valueNode):null]})});W2.displayName=Ml;var G2="SelectItemIndicator",H2=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return $2(G2,t).isSelected?r.jsx(je.span,{"aria-hidden":!0,...s,ref:e}):null});H2.displayName=G2;var Gg="SelectScrollUpButton",K2=x.forwardRef((n,e)=>{const t=ji(Gg,n.__scopeSelect),s=cx(Gg,n.__scopeSelect),[i,a]=x.useState(!1),c=qe(e,s.onScrollButtonChange);return Ut(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollTop>0;a(h)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?r.jsx(Y2,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});K2.displayName=Gg;var Hg="SelectScrollDownButton",Q2=x.forwardRef((n,e)=>{const t=ji(Hg,n.__scopeSelect),s=cx(Hg,n.__scopeSelect),[i,a]=x.useState(!1),c=qe(e,s.onScrollButtonChange);return Ut(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<h;a(p)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?r.jsx(Y2,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});Q2.displayName=Hg;var Y2=x.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,a=ji("SelectScrollButton",t),c=x.useRef(null),u=Oh(t),d=x.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),Ut(()=>{u().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),r.jsx(je.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:me(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:me(i.onPointerMove,()=>{a.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:me(i.onPointerLeave,()=>{d()})})}),c6="SelectSeparator",X2=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return r.jsx(je.div,{"aria-hidden":!0,...s,ref:e})});X2.displayName=c6;var Kg="SelectArrow",u6=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=Dh(t),a=Ci(Kg,t),c=ji(Kg,t);return a.open&&c.position==="popper"?r.jsx(Xy,{...i,...s,ref:e}):null});u6.displayName=Kg;var d6="SelectBubbleInput",Z2=x.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const i=x.useRef(null),a=qe(s,i),c=Mh(e);return x.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==e&&p){const m=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(m)}},[c,e]),r.jsx(je.select,{...t,style:{...DC,...t.style},ref:a,defaultValue:e})});Z2.displayName=d6;function J2(n){return n===""||n===void 0}function ek(n){const e=Dt(n),t=x.useRef(""),s=x.useRef(0),i=x.useCallback(c=>{const u=t.current+c;e(u),(function d(h){t.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))})(u)},[e]),a=x.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,a]}function tk(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=h6(n,Math.max(a,0));i.length===1&&(c=c.filter(h=>h!==t));const d=c.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function h6(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var f6=T2,nk=E2,p6=M2,m6=R2,g6=I2,sk=O2,y6=z2,rk=U2,ik=q2,x6=W2,v6=H2,ak=K2,ok=Q2,lk=X2;const rt=f6,it=p6,et=x.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(nk,{ref:s,className:Re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,r.jsx(m6,{asChild:!0,children:r.jsx(ij,{className:"h-4 w-4 opacity-50"})})]}));et.displayName=nk.displayName;const ck=x.forwardRef(({className:n,...e},t)=>r.jsx(ak,{ref:t,className:Re("flex cursor-default items-center justify-center py-1",n),...e,children:r.jsx(bO,{className:"h-4 w-4"})}));ck.displayName=ak.displayName;const uk=x.forwardRef(({className:n,...e},t)=>r.jsx(ok,{ref:t,className:Re("flex cursor-default items-center justify-center py-1",n),...e,children:r.jsx(ij,{className:"h-4 w-4"})}));uk.displayName=ok.displayName;const tt=x.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>r.jsx(g6,{children:r.jsxs(sk,{ref:i,className:Re("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[r.jsx(ck,{}),r.jsx(y6,{className:Re("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),r.jsx(uk,{})]})}));tt.displayName=sk.displayName;const b6=x.forwardRef(({className:n,...e},t)=>r.jsx(rk,{ref:t,className:Re("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));b6.displayName=rk.displayName;const fe=x.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(ik,{ref:s,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(v6,{children:r.jsx(Ry,{className:"h-4 w-4"})})}),r.jsx(x6,{children:e})]}));fe.displayName=ik.displayName;const w6=x.forwardRef(({className:n,...e},t)=>r.jsx(lk,{ref:t,className:Re("-mx-1 my-1 h-px bg-muted",n),...e}));w6.displayName=lk.displayName;var Fh="Dialog",[dk,GH]=wn(Fh),[S6,Bs]=dk(Fh),hk=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:i,onOpenChange:a,modal:c=!0}=n,u=x.useRef(null),d=x.useRef(null),[h,p]=nr({prop:s,defaultProp:i??!1,onChange:a,caller:Fh});return r.jsx(S6,{scope:e,triggerRef:u,contentRef:d,contentId:er(),titleId:er(),descriptionId:er(),open:h,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(m=>!m),[p]),modal:c,children:t})};hk.displayName=Fh;var fk="DialogTrigger",pk=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Bs(fk,t),a=qe(e,i.triggerRef);return r.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":hx(i.open),...s,ref:a,onClick:me(n.onClick,i.onOpenToggle)})});pk.displayName=fk;var ux="DialogPortal",[_6,mk]=dk(ux,{forceMount:void 0}),gk=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:i}=n,a=Bs(ux,e);return r.jsx(_6,{scope:e,forceMount:t,children:x.Children.map(s,c=>r.jsx(Sn,{present:t||a.open,children:r.jsx(ic,{asChild:!0,container:i,children:c})}))})};gk.displayName=ux;var Bd="DialogOverlay",yk=x.forwardRef((n,e)=>{const t=mk(Bd,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=Bs(Bd,n.__scopeDialog);return a.modal?r.jsx(Sn,{present:s||a.open,children:r.jsx(j6,{...i,ref:e})}):null});yk.displayName=Bd;var C6=Ji("DialogOverlay.RemoveScroll"),j6=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Bs(Bd,t);return r.jsx(Th,{as:C6,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(je.div,{"data-state":hx(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),aa="DialogContent",xk=x.forwardRef((n,e)=>{const t=mk(aa,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=Bs(aa,n.__scopeDialog);return r.jsx(Sn,{present:s||a.open,children:a.modal?r.jsx(N6,{...i,ref:e}):r.jsx(k6,{...i,ref:e})})});xk.displayName=aa;var N6=x.forwardRef((n,e)=>{const t=Bs(aa,n.__scopeDialog),s=x.useRef(null),i=qe(e,t.contentRef,s);return x.useEffect(()=>{const a=s.current;if(a)return tx(a)},[]),r.jsx(vk,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(n.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:me(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:me(n.onFocusOutside,a=>a.preventDefault())})}),k6=x.forwardRef((n,e)=>{const t=Bs(aa,n.__scopeDialog),s=x.useRef(!1),i=x.useRef(!1);return r.jsx(vk,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||t.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{n.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=a.target;t.triggerRef.current?.contains(c)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),vk=x.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...c}=n,u=Bs(aa,t),d=x.useRef(null),h=qe(e,d);return ex(),r.jsxs(r.Fragment,{children:[r.jsx(jh,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(_o,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":hx(u.open),...c,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(T6,{titleId:u.titleId}),r.jsx(E6,{contentRef:d,descriptionId:u.descriptionId})]})]})}),dx="DialogTitle",bk=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Bs(dx,t);return r.jsx(je.h2,{id:i.titleId,...s,ref:e})});bk.displayName=dx;var wk="DialogDescription",Sk=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Bs(wk,t);return r.jsx(je.p,{id:i.descriptionId,...s,ref:e})});Sk.displayName=wk;var _k="DialogClose",Ck=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Bs(_k,t);return r.jsx(je.button,{type:"button",...s,ref:e,onClick:me(n.onClick,()=>i.onOpenChange(!1))})});Ck.displayName=_k;function hx(n){return n?"open":"closed"}var jk="DialogTitleWarning",[HH,Nk]=_I(jk,{contentName:aa,titleName:dx,docsSlug:"dialog"}),T6=({titleId:n})=>{const e=Nk(jk),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},P6="DialogDescriptionWarning",E6=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nk(P6).contentName}}.`;return x.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},A6=hk,M6=pk,R6=gk,kk=yk,Tk=xk,Pk=bk,Ek=Sk,I6=Ck;const Ak=A6,Mk=M6,O6=R6,Rk=x.forwardRef(({className:n,...e},t)=>r.jsx(kk,{ref:t,className:Re("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Rk.displayName=kk.displayName;const fx=x.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(O6,{children:[r.jsx(Rk,{}),r.jsxs(Tk,{ref:s,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,r.jsxs(I6,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(hj,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fx.displayName=Tk.displayName;const px=({className:n,...e})=>r.jsx("div",{className:Re("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});px.displayName="DialogHeader";const mx=x.forwardRef(({className:n,...e},t)=>r.jsx(Pk,{ref:t,className:Re("text-lg font-semibold leading-none tracking-tight",n),...e}));mx.displayName=Pk.displayName;const D6=x.forwardRef(({className:n,...e},t)=>r.jsx(Ek,{ref:t,className:Re("text-sm text-muted-foreground",n),...e}));D6.displayName=Ek.displayName;const Bt=x.forwardRef(({className:n,type:e,...t},s)=>r.jsx("input",{type:e,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));Bt.displayName="Input";class F6{constructor(){this.audioContext=null,this.isInitialized=!1,this.currentSequence=null,this.masterGain=null}async initialize(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.masterGain=this.audioContext.createGain(),this.masterGain.connect(this.audioContext.destination),this.masterGain.gain.value=.7,this.isInitialized=!0,console.log("Audio engine initialized successfully")}catch(e){throw console.error("Failed to initialize audio engine:",e),e}}async playNote(e,t,s,i,a){if(!(!this.audioContext||!this.masterGain))try{const c=this.audioContext.createOscillator(),u=this.audioContext.createGain();c.frequency.value=e,c.type="sine",u.gain.setValueAtTime(0,this.audioContext.currentTime),u.gain.linearRampToValueAtTime(s,this.audioContext.currentTime+.01),u.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),c.connect(u),u.connect(this.masterGain),c.start(),c.stop(this.audioContext.currentTime+t)}catch(c){console.error("Failed to play note:",c)}}playDrum(e,t=.7){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.currentTime;switch(e){case"kick":this.playKick(s,t);break;case"snare":this.playSnare(s,t);break;case"hihat":this.playHihat(s,t);break;case"openhat":this.playOpenHat(s,t);break;case"clap":this.playClap(s,t);break;case"crash":this.playCrash(s,t);break;case"tom":this.playTom(s,t);break}}catch(s){console.error("Failed to play drum:",s)}}playKick(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createOscillator(),i=this.audioContext.createGain();s.frequency.setValueAtTime(60,e),s.frequency.exponentialRampToValueAtTime(30,e+.1),s.type="sine",i.gain.setValueAtTime(t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),s.connect(i),i.connect(this.masterGain),s.start(e),s.stop(e+.3)}playSnare(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createBuffer(1,this.audioContext.sampleRate*.1,this.audioContext.sampleRate),i=s.getChannelData(0);for(let u=0;u<i.length;u++)i[u]=(Math.random()*2-1)*Math.pow(1-u/i.length,2);const a=this.audioContext.createBufferSource();a.buffer=s;const c=this.audioContext.createGain();c.gain.setValueAtTime(t*.3,e),c.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(c),c.connect(this.masterGain),a.start(e)}playHihat(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createBuffer(1,this.audioContext.sampleRate*.05,this.audioContext.sampleRate),i=s.getChannelData(0);for(let d=0;d<i.length;d++)i[d]=(Math.random()*2-1)*Math.pow(1-d/i.length,4);const a=this.audioContext.createBufferSource();a.buffer=s;const c=this.audioContext.createBiquadFilter();c.type="highpass",c.frequency.value=8e3;const u=this.audioContext.createGain();u.gain.setValueAtTime(t*.2,e),u.gain.exponentialRampToValueAtTime(.01,e+.05),a.connect(c),c.connect(u),u.connect(this.masterGain),a.start(e)}playOpenHat(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createBuffer(1,this.audioContext.sampleRate*.3,this.audioContext.sampleRate),i=s.getChannelData(0);for(let d=0;d<i.length;d++)i[d]=(Math.random()*2-1)*Math.pow(1-d/i.length,1.5);const a=this.audioContext.createBufferSource();a.buffer=s;const c=this.audioContext.createBiquadFilter();c.type="highpass",c.frequency.value=6e3;const u=this.audioContext.createGain();u.gain.setValueAtTime(t*.3,e),u.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(c),c.connect(u),u.connect(this.masterGain),a.start(e)}playClap(e,t){if(!(!this.audioContext||!this.masterGain))for(let s=0;s<3;s++){const i=s*.01,a=this.audioContext.createBuffer(1,this.audioContext.sampleRate*.1,this.audioContext.sampleRate),c=a.getChannelData(0);for(let h=0;h<c.length;h++)c[h]=(Math.random()*2-1)*Math.pow(1-h/c.length,3);const u=this.audioContext.createBufferSource();u.buffer=a;const d=this.audioContext.createGain();d.gain.setValueAtTime(t*.2,e+i),d.gain.exponentialRampToValueAtTime(.01,e+i+.1),u.connect(d),d.connect(this.masterGain),u.start(e+i)}}playCrash(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createBuffer(1,this.audioContext.sampleRate*2,this.audioContext.sampleRate),i=s.getChannelData(0);for(let d=0;d<i.length;d++)i[d]=(Math.random()*2-1)*Math.pow(1-d/i.length,.5);const a=this.audioContext.createBufferSource();a.buffer=s;const c=this.audioContext.createBiquadFilter();c.type="bandpass",c.frequency.value=5e3,c.Q.value=.5;const u=this.audioContext.createGain();u.gain.setValueAtTime(t*.4,e),u.gain.exponentialRampToValueAtTime(.01,e+2),a.connect(c),c.connect(u),u.connect(this.masterGain),a.start(e)}playTom(e,t){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.createOscillator(),i=this.audioContext.createGain();s.frequency.setValueAtTime(120,e),s.frequency.exponentialRampToValueAtTime(80,e+.3),s.type="sine",i.gain.setValueAtTime(t*.6,e),i.gain.exponentialRampToValueAtTime(.01,e+.4),s.connect(i),i.connect(this.masterGain),s.start(e),s.stop(e+.4)}async playBeat(e,t,s){if(!this.audioContext)return;const i=60/s/4*1e3;let a=0;const c=()=>{e.kick&&e.kick[a%16]&&this.playDrum("kick"),e.snare&&e.snare[a%16]&&this.playDrum("snare"),e.hihat&&e.hihat[a%16]&&this.playDrum("hihat"),e.openhat&&e.openhat[a%16]&&this.playDrum("openhat"),a++,a<16&&setTimeout(c,i)};c()}async playSequencer(e){console.log("Playing sequencer state:",e)}setBpm(e){console.log("Setting BPM to:",e)}setMasterVolume(e){this.masterGain&&(this.masterGain.gain.value=Math.max(0,Math.min(1,e)))}stop(){console.log("Stopping audio engine")}stopAllInstruments(){console.log("Stopping all instruments")}}const Xa=new F6,Qu=Xa;var xm={exports:{}},vm={exports:{}},bm,k1;function L6(){if(k1)return bm;k1=1;function n(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:t===43?62:t===47?63:0}function e(t,s){for(var i=t.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,c=s?Math.ceil((a*3+1>>2)/s)*s:a*3+1>>2,u=new Uint8Array(c),d,h,p=0,m=0,y=0;y<a;y++)if(h=y&3,p|=n(i.charCodeAt(y))<<18-6*h,h===3||a-y===1){for(d=0;d<3&&m<c;d++,m++)u[m]=p>>>(16>>>d&24)&255;p=0}return u}return bm={decode:e},bm}var wm,T1;function z6(){return T1||(T1=1,wm=function(n,e){return new Promise(function(t,s){var i=new XMLHttpRequest;e&&(i.responseType=e),i.open("GET",n),i.onload=function(){i.status===200?t(i.response):s(Error(i.statusText))},i.onerror=function(){s(Error("Network Error"))},i.send()})}),wm}var P1;function B6(){return P1||(P1=1,(function(n){var e=L6(),t=z6();function s(E){return function(T){return typeof T=="string"&&E.test(T)}}function i(E,T){return typeof E=="string"?E+T:typeof E=="function"?E(T):T}function a(E,T,I,O){var F=c(T)?u:d(T)?h:p(T)?m:y(T)?b:_(T)?v:w(T)?N:P(T)?C:A(T)?k:null,L=I||{};return F?F(E,T,L):O?Promise.resolve(O):Promise.reject("Source not valid ("+T+")")}a.fetch=t;function c(E){return E instanceof ArrayBuffer}function u(E,T,I){return new Promise(function(O,F){E.decodeAudioData(T,function(L){O(L)},function(){F("Can't decode audio data ("+T.slice(0,30)+"...)")})})}var d=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function h(E,T,I){var O=i(I.from,T);return a(E,a.fetch(O,"arraybuffer"),I)}function p(E){return E&&typeof E.then=="function"}function m(E,T,I){return T.then(function(O){return a(E,O,I)})}var y=Array.isArray;function b(E,T,I){return Promise.all(T.map(function(O){return a(E,O,I,O)}))}function _(E){return E&&typeof E=="object"}function v(E,T,I){var O={},F=Object.keys(T).map(function(L){if(I.only&&I.only.indexOf(L)===-1)return null;var V=T[L];return a(E,V,I,V).then(function(z){O[L]=z})});return Promise.all(F).then(function(){return O})}var w=s(/\.json(\?.*)?$/i);function N(E,T,I){var O=i(I.from,T);return a(E,a.fetch(O,"text").then(JSON.parse),I)}var P=s(/^data:audio/);function C(E,T,I){var O=T.indexOf(",");return a(E,e.decode(T.slice(O+1)).buffer,I)}var A=s(/\.js(\?.*)?$/i);function k(E,T,I){var O=i(I.from,T);return a(E,a.fetch(O,"text").then(M),I)}function M(E){var T=E.indexOf("MIDI.Soundfont.");if(T<0)throw Error("Invalid MIDI.js Soundfont format");T=E.indexOf("=",T)+2;var I=E.lastIndexOf(",");return JSON.parse(E.slice(T,I)+"}")}n.exports&&(n.exports=a),typeof window<"u"&&(window.loadAudio=a)})(vm)),vm.exports}var Sm={exports:{}},_m,E1;function V6(){if(E1)return _m;E1=1,_m=n;function n(u){var d=u.createGain(),h=d._voltage=s(u),p=i(h),m=i(h),y=i(h);return d._startAmount=i(m),d._endAmount=i(y),d._multiplier=i(p),d._multiplier.connect(d),d._startAmount.connect(d),d._endAmount.connect(d),d.value=p.gain,d.startValue=m.gain,d.endValue=y.gain,d.startValue.value=0,d.endValue.value=0,Object.defineProperties(d,e),d}var e={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(u){var d=this._multiplier.gain,h=this._startAmount.gain,p=this._endAmount.gain;this._voltage.start(u),this._decayFrom=this._decayFrom=u+this.attack,this._startedAt=u;var m=this.sustain;d.cancelScheduledValues(u),h.cancelScheduledValues(u),p.cancelScheduledValues(u),p.setValueAtTime(0,u),this.attack?(d.setValueAtTime(0,u),d.linearRampToValueAtTime(1,u+this.attack),h.setValueAtTime(1,u),h.linearRampToValueAtTime(0,u+this.attack)):(d.setValueAtTime(1,u),h.setValueAtTime(0,u)),this.decay&&d.setTargetAtTime(m,this._decayFrom,a(this.decay))}},stop:{value:function(u,d){d&&(u=u-this.release);var h=u+this.release;if(this.release){var p=this._multiplier.gain,m=this._startAmount.gain,y=this._endAmount.gain;p.cancelScheduledValues(u),m.cancelScheduledValues(u),y.cancelScheduledValues(u);var b=a(this.release);if(this.attack&&u<this._decayFrom){var _=c(0,1,this._startedAt,this._decayFrom,u);p.linearRampToValueAtTime(_,u),m.linearRampToValueAtTime(1-_,u),m.setTargetAtTime(0,u,b)}y.setTargetAtTime(1,u,b),p.setTargetAtTime(0,u,b)}return this._voltage.stop(h),h}},onended:{get:function(){return this._voltage.onended},set:function(u){this._voltage.onended=u}}},t=new Float32Array([1,1]);function s(u){var d=u.createBufferSource(),h=u.createBuffer(1,2,u.sampleRate);return h.getChannelData(0).set(t),d.buffer=h,d.loop=!0,d}function i(u){var d=u.context.createGain();return u.connect(d),d}function a(u){return Math.log(u+1)/Math.log(100)}function c(u,d,h,p,m){var y=d-u,b=p-h,_=m-h,v=_/b,w=u+v*y;return w<=u&&(w=u),w>=d&&(w=d),w}return _m}var Cm,A1;function U6(){if(A1)return Cm;A1=1;var n=V6(),e={},t={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(d,h,p){var m=!1,y=0,b={},_=d.createGain();_.gain.value=1;var v=Object.assign({},t,p),w={context:d,out:_,opts:v};return h instanceof AudioBuffer?w.buffer=h:w.buffers=h,w.start=function(C,A,k){if(w.buffer&&C!==null)return w.start(null,C,A);var M=C?w.buffers[C]:w.buffer;if(M){if(!m){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+C+" not found.");return}var E=k||e;A=Math.max(d.currentTime,A||0),w.emit("start",A,C,E);var T=P(C,M,E);return T.id=N(C,T),T.env.start(A),T.source.start(A),w.emit("started",A,T.id,T),E.duration&&T.stop(A+E.duration),T},w.play=function(C,A,k){return w.start(C,A,k)},w.stop=function(C,A){var k;return A=A||Object.keys(b),A.map(function(M){return k=b[M],k?(k.stop(C),k.id):null})},w.connect=function(C){return m=!0,_.connect(C),w},w.emit=function(C,A,k,M){w.onevent&&w.onevent(C,A,k,M);var E=w["on"+C];E&&E(A,k,M)},w;function N(C,A){return A.id=y++,b[A.id]=A,A.source.onended=function(){var k=d.currentTime;A.source.disconnect(),A.env.disconnect(),A.disconnect(),w.emit("ended",k,A.id,A)},A.id}function P(C,A,k){var M=d.createGain();return M.gain.value=0,M.connect(_),M.env=c(d,k,v),M.env.connect(M.gain),M.source=d.createBufferSource(),M.source.buffer=A,M.source.connect(M),M.source.loop=k.loop||v.loop,M.source.playbackRate.value=u(k.cents||v.cents),M.source.loopStart=k.loopStart||v.loopStart,M.source.loopEnd=k.loopEnd||v.loopEnd,M.stop=function(E){var T=E||d.currentTime;w.emit("stop",T,C);var I=M.env.stop(T);M.source.stop(I)},M}}function i(d){return typeof d=="number"}var a=["attack","decay","sustain","release"];function c(d,h,p){var m=n(d),y=h.adsr||p.adsr;return a.forEach(function(b,_){y?m[b]=y[_]:m[b]=h[b]||p[b]}),m.value.value=i(h.gain)?h.gain:i(p.gain)?p.gain:1,m}function u(d){return d?Math.pow(2,d/1200):1}return Cm=s,Cm}var jm,M1;function $6(){if(M1)return jm;M1=1,jm=function(e){return e.on=function(t,s){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var i="on"+t,a=e[i];return e[i]=a?n(a,s):s,e},e};function n(e,t){return function(s,i,a,c){e(s,i,a,c),t(s,i,a,c)}}return jm}var Nm,R1;function q6(){if(R1)return Nm;R1=1;var n=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function e(){return n}var t=[0,2,4,5,7,9,11];function s(u,d,h){if(typeof u!="string")return null;var p=n.exec(u);if(!p||!d&&p[4])return null;var m={letter:p[1].toUpperCase(),acc:p[2].replace(/x/g,"##")};return m.pc=m.letter+m.acc,m.step=(m.letter.charCodeAt(0)+3)%7,m.alt=m.acc[0]==="b"?-m.acc.length:m.acc.length,m.chroma=t[m.step]+m.alt,p[3]&&(m.oct=+p[3],m.midi=m.chroma+12*(m.oct+1),m.freq=i(m.midi,h)),d&&(m.tonicOf=p[4]),m}function i(u,d){return Math.pow(2,(u-69)/12)*(d||440)}var a={parse:s,regex:e,midiToFreq:i},c=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return c.forEach(function(u){a[u]=function(d){var h=s(d);return h&&typeof h[u]<"u"?h[u]:null}}),Nm=a,Nm}var km,I1;function W6(){if(I1)return km;I1=1;var n=q6(),e=function(i){return i!==null&&i!==[]&&i>=0&&i<129},t=function(i){return e(i)?+i:n.midi(i)};km=function(i){if(i.buffers){var a=i.opts.map,c=typeof a=="function"?a:t,u=function(h){return h?c(h)||h:null};i.buffers=s(i.buffers,u);var d=i.start;i.start=function(h,p,m){var y=u(h),b=y%1;return b&&(y=Math.floor(y),m=Object.assign(m||{},{cents:Math.floor(b*100)})),d(y,p,m)}}return i};function s(i,a){return Object.keys(i).reduce(function(c,u){return c[a(u)]=i[u],c},{})}return km}var Tm,O1;function G6(){if(O1)return Tm;O1=1;var n=Array.isArray,e=function(s){return s&&typeof s=="object"},t={};return Tm=function(s){return s.schedule=function(i,a){var c=s.context.currentTime,u=i<c?c:i;s.emit("schedule",u,a);var d,h,p,m;return a.map(function(y){if(y)n(y)?(d=y[0],h=y[1]):(d=y.time,h=y);else return null;return e(h)?(p=h.name||h.key||h.note||h.midi||null,m=h):(p=h,m=t),s.start(p,u+(d||0),m)})},s},Tm}function Yu(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pm={exports:{}},D1;function H6(){return D1||(D1=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(s,i,a){function c(h,p){if(!i[h]){if(!s[h]){var m=typeof Yu=="function"&&Yu;if(!p&&m)return m(h,!0);if(u)return u(h,!0);var y=new Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}var b=i[h]={exports:{}};s[h][0].call(b.exports,function(_){var v=s[h][1][_];return c(v||_)},b,b.exports,t,s,i,a)}return i[h].exports}for(var u=typeof Yu=="function"&&Yu,d=0;d<a.length;d++)c(a[d]);return c})({1:[function(t,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a){function c(u){if(this._event=u,this._data=u.data,this.receivedTime=u.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=u.data[0]&240,this.channel=u.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=u.data[1]&127,this.velocity=u.data[2]&127;break;case 144:this.messageType="noteon",this.key=u.data[1]&127,this.velocity=u.data[2]&127;break;case 160:this.messageType="keypressure",this.key=u.data[1]&127,this.pressure=u.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=u.data[1]&127,this.controllerValue=u.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=u.data[1];break;case 208:this.messageType="channelpressure",this.pressure=u.data[1]&127;break;case 224:this.messageType="pitchbendchange";var d=u.data[2]&127,h=u.data[1]&127;this.pitchBend=(d<<8)+h;break}}return new c(a)},s.exports=i.default},{}]},{},[1])(1)})})(Pm)),Pm.exports}var Em,F1;function K6(){if(F1)return Em;F1=1;var n=H6();return Em=function(e){return e.listenToMidi=function(t,s){var i={},a=s||{},c=a.gain||function(u){return u/127};return t.onmidimessage=function(u){var d=u.messageType?u:n(u);if(d.messageType==="noteon"&&d.velocity===0&&(d.messageType="noteoff"),!(a.channel&&d.channel!==a.channel))switch(d.messageType){case"noteon":i[d.key]=e.play(d.key,0,{gain:c(d.velocity)});break;case"noteoff":i[d.key]&&(i[d.key].stop(),delete i[d.key]);break}},e},e},Em}var L1;function Q6(){return L1||(L1=1,(function(n){var e=U6(),t=$6(),s=W6(),i=G6(),a=K6();function c(u,d,h){return a(i(s(t(e(u,d,h)))))}n.exports&&(n.exports=c),typeof window<"u"&&(window.SamplePlayer=c)})(Sm)),Sm.exports}function z1(n,e){return Array(e+1).join(n)}function gx(n){return typeof n=="number"}function Y6(n){return typeof n=="string"}function X6(n){return typeof n<"u"}function Ik(n,e){return Math.pow(2,(n-69)/12)*(e||440)}var Ok=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Z6(){return Ok}var J6=[0,2,4,5,7,9,11];function Ar(n,e,t){if(typeof n!="string")return null;var s=Ok.exec(n);if(!s||!e&&s[4])return null;var i={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt=i.acc[0]==="b"?-i.acc.length:i.acc.length;var a=J6[i.step]+i.alt;return i.chroma=a<0?12+a:a%12,s[3]&&(i.oct=+s[3],i.midi=a+12*(i.oct+1),i.freq=Ik(i.midi,t)),e&&(i.tonicOf=s[4]),i}var eL="CDEFGAB";function tL(n){return gx(n)?n<0?z1("b",-n):z1("#",n):""}function nL(n){return gx(n)?""+n:""}function Dk(n,e,t){return n===null||typeof n>"u"?null:n.step?Dk(n.step,n.alt,n.oct):n<0||n>6?null:eL.charAt(n)+tL(e)+nL(t)}function Fk(n){if((gx(n)||Y6(n))&&n>=0&&n<128)return+n;var e=Ar(n);return e&&X6(e.midi)?e.midi:null}function sL(n,e){var t=Fk(n);return t===null?null:Ik(t,e)}function rL(n){return(Ar(n)||{}).letter}function iL(n){return(Ar(n)||{}).acc}function aL(n){return(Ar(n)||{}).pc}function oL(n){return(Ar(n)||{}).step}function lL(n){return(Ar(n)||{}).alt}function cL(n){return(Ar(n)||{}).chroma}function uL(n){return(Ar(n)||{}).oct}const dL=Object.freeze(Object.defineProperty({__proto__:null,acc:iL,alt:lL,build:Dk,chroma:cL,freq:sL,letter:rL,midi:Fk,oct:uL,parse:Ar,pc:aL,regex:Z6,step:oL},Symbol.toStringTag,{value:"Module"})),hL=lR(dL);var Am,B1;function fL(){if(B1)return Am;B1=1;var n=hL;function e(i,a){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(i);this.nameToUrl=a||e.nameToUrl,this.ctx=i,this.instruments={},this.promises=[]}e.prototype.onready=function(i){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(i)},e.prototype.instrument=function(i,a){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(i=i||"default",i in this.instruments)return this.instruments[i];var u={name:i,play:s(c,a)};if(this.instruments[i]=u,i!=="default"){var d=e.instrument(c,i,a).then(function(h){return u.play=h.play,u});this.promises.push(d),u.onready=function(h){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),d.then(h)}}else u.onready=function(h){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),h()};return u};function t(i,a,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(i,a,c).then(function(u){return u.buffers})}e.loadBuffers=t;function s(i,a){return a=a||{},function(c,u,d,h){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var p=c>0&&c<129?+c:n.midi(c),m=p?n.midiToFreq(p,440):null;if(m){d=d||.2,h=h||{};var y=h.destination||a.destination||i.destination,b=h.vcoType||a.vcoType||"sine",_=h.gain||a.gain||.4,v=i.createOscillator();v.type=b,v.frequency.value=m;var w=i.createGain();return w.gain.value=_,v.connect(w),w.connect(y),v.start(u),d>0&&v.stop(u+d),v}}}return e.noteToMidi=n.midi,Am=e,Am}var V1;function pL(){return V1||(V1=1,(function(n){var e=B6(),t=Q6();function s(u,d,h){if(arguments.length===1)return function(_,v){return s(u,_,v)};var p=h||{},m=p.isSoundfontURL||i,y=p.nameToUrl||a,b=m(d)?d:y(d,p.soundfont,p.format);return e(u,b,{only:p.only||p.notes}).then(function(_){var v=t(u,_,p).connect(p.destination?p.destination:u.destination);return v.url=b,v.name=d,v})}function i(u){return/\.js(\?.*)?$/i.test(u)}function a(u,d,h){return h=h==="ogg"?h:"mp3",d=d==="FluidR3_GM"?d:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+d+"/"+u+"-"+h+".js"}var c=fL();c.instrument=s,c.nameToUrl=a,n.exports&&(n.exports=c),typeof window<"u"&&(window.Soundfont=c)})(xm)),xm.exports}var mL=pL();const U1=Ls(mL);class Lk{constructor(){this.instruments={},this.audioContext=null,this.isInitialized=!1,this.isLoading=!1,this.bassDrumDuration=.8,this.instrumentLibrary={piano:"acoustic_grand_piano","piano-keyboard":"acoustic_grand_piano","piano-grand":"acoustic_grand_piano","piano-organ":"church_organ",guitar:"acoustic_guitar_steel","strings-guitar":"acoustic_guitar_steel","guitar-acoustic":"acoustic_guitar_steel","guitar-electric":"electric_guitar_clean","guitar-distorted":"distortion_guitar","guitar-nylon":"acoustic_guitar_nylon","strings-violin":"violin","strings-ukulele":"acoustic_guitar_nylon","flute-recorder":"recorder","flute-indian":"flute","flute-concert":"flute","horns-trumpet":"trumpet","horns-trombone":"trombone","horns-french":"french_horn","synth-analog":"electric_piano_1","synth-digital":"electric_piano_2","synth-fm":"electric_piano_1","bass-electric":"electric_bass_finger","bass-upright":"acoustic_bass","bass-synth":"synth_bass_1","pads-warm":"pad_2_warm","pads-strings":"string_ensemble_1","pads-choir":"choir_aahs","leads-square":"lead_1_square","leads-saw":"lead_2_sawtooth","leads-pluck":"lead_6_voice",bass:"electric_bass_finger",violin:"violin",organ:"church_organ",synth:"lead_1_square",strings:"string_ensemble_1",flute:"flute",trumpet:"trumpet"}}async initialize(){if(!(this.isInitialized||this.isLoading)){this.isLoading=!0;try{if(this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log(" Realistic audio context created, state:",this.audioContext.state),console.log(" Environment:","production"),this.audioContext.state==="suspended"){console.log(" Audio context suspended, attempting to resume...");const e=async()=>{if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume(),console.log(" Audio context resumed successfully")}catch(t){console.error(" Failed to resume audio context:",t)}document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0),document.removeEventListener("touchstart",e,!0)};document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),document.addEventListener("touchstart",e,!0);try{await this.audioContext.resume(),console.log(" Audio context resumed immediately")}catch{console.log(" Audio context needs user interaction to resume")}}console.log(" Realistic audio context started, final state:",this.audioContext.state),await this.loadInstruments(["piano","guitar","strings-guitar","violin","flute","trumpet","piano-organ","bass-electric","strings-violin"]),this.isInitialized=!0,this.isLoading=!1,console.log("Realistic audio engine initialized with sampled instruments")}catch(e){throw console.error("Failed to initialize realistic audio engine:",e),this.isLoading=!1,e}}}async loadInstruments(e){if(!this.audioContext)throw new Error("Audio context not initialized");const t=e.map(async s=>{if(!(this.instruments[s]||!(s in this.instrumentLibrary)))try{const i=this.instrumentLibrary[s];console.log(` Loading realistic ${s} instrument (${i})`);const a=await U1.instrument(this.audioContext,i,{format:"mp3",soundfont:"MusyngKite",nameToUrl:(c,u,d)=>`${`https://gleitz.github.io/midi-js-soundfonts/${u}`}/${c}-${d}.js`});this.instruments[s]=a,console.log(` Loaded realistic ${s} instrument successfully`)}catch(i){console.error(` Failed to load ${s} instrument:`,i)}});await Promise.all(t)}async loadAdditionalInstrument(e){if(!(this.instruments[e]||!(e in this.instrumentLibrary)||!this.audioContext))try{console.log(`Loading additional realistic ${e} instrument`);const t=this.instrumentLibrary[e],s=await U1.instrument(this.audioContext,t,{format:"mp3",soundfont:"MusyngKite",nameToUrl:(i,a,c)=>`${`https://gleitz.github.io/midi-js-soundfonts/${a}`}/${i}-${c}.js`});this.instruments[e]=s,console.log(`Loaded additional realistic ${e} instrument successfully`)}catch(t){console.error(`Failed to load additional ${e} instrument:`,t)}}async playNote(e,t,s,i="piano",a=.7,c=!0){this.isInitialized||await this.initialize(),console.log(` DEBUG playNote called with: note=${e}, octave=${t}, duration=${s}, instrument=${i}, velocity=${a}`);let u=t;u<2&&(u=2),u>7&&(u=7),t!==u&&console.log(` Clamped octave from ${t} to ${u} for note ${e}`);let d=i;if(!(d in this.instrumentLibrary)){const p=String(i||"piano").toLowerCase();p.includes("piano")||p.includes("keyboard")?d="piano":p.includes("guitar")||p.includes("string")?d="guitar":p.includes("violin")?d="strings-violin":p.includes("flute")?d="flute-concert":p.includes("trumpet")||p.includes("horn")?d="horns-trumpet":p.includes("bass")?d="bass-electric":p.includes("organ")?d="piano-organ":p.includes("synth")?d="synth-analog":p.includes("lead")?d="leads-square":p.includes("pad")?d="pads-warm":d="piano"}const h=this.instruments[d];if(!h){console.error(`Instrument ${d} not loaded`);return}try{const p=`${e}${u}`;console.log(` Attempting to play realistic ${d}: ${p} for ${s}s at velocity ${a}`),h.play(p,this.audioContext.currentTime,{duration:s,gain:a})?console.log(` Successfully triggered realistic ${d}: ${p}`):console.error(` Failed to play realistic ${d}: ${p} - instrumentSampler.play returned null`)}catch(p){console.error(` Error playing realistic ${d}:`,p)}}async playDrumSound(e,t=.7){if(this.isInitialized||await this.initialize(),console.log(`Playing synthetic drum in realistic mode: ${e}`),!this.audioContext){console.error("AudioContext not available for synthetic drums");return}const s=this.audioContext.currentTime;try{switch(e){case"kick":this.playSyntheticKick(s,t);break;case"bass":this.playSyntheticBassDrum(s,t);break;case"snare":this.playSyntheticSnare(s,t);break;case"hihat":this.playSyntheticHihat(s,t);break;case"openhat":this.playSyntheticOpenHat(s,t);break;case"tom":this.playSyntheticTom(s,t);break;case"clap":this.playSyntheticClap(s,t);break;case"crash":this.playSyntheticCrash(s,t);break;default:console.warn(` Unknown drum type: ${e}`)}}catch(i){console.error(" Failed to play synthetic drum:",i)}}stopAllSounds(){Object.values(this.instruments).forEach(e=>{e&&e.stop&&e.stop()})}setMasterVolume(e){if(this.audioContext){const t=Math.max(0,Math.min(1,e));console.log(`Setting master volume to ${t}`)}}getAvailableInstruments(){return Object.keys(this.instrumentLibrary)}isReady(){return this.isInitialized&&!this.isLoading}playSyntheticKick(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),c=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(65,e),s.frequency.exponentialRampToValueAtTime(35,e+.15),i.type="triangle",i.frequency.setValueAtTime(1200,e),i.frequency.exponentialRampToValueAtTime(800,e+.01),u.type="lowpass",u.frequency.setValueAtTime(120,e),u.Q.setValueAtTime(8,e);const d=Math.max(.001,t*1.8);a.gain.setValueAtTime(d,e),a.gain.exponentialRampToValueAtTime(d*.6,e+.08),a.gain.exponentialRampToValueAtTime(.001,e+.4);const h=Math.max(.001,t*.15);c.gain.setValueAtTime(.001,e),c.gain.exponentialRampToValueAtTime(h,e+.003),c.gain.exponentialRampToValueAtTime(.001,e+.02),s.connect(u),u.connect(a),a.connect(this.audioContext.destination),i.connect(c),c.connect(this.audioContext.destination),s.start(e),i.start(e),s.stop(e+.4),i.stop(e+.015)}catch(s){console.error(" Kick drum error:",s)}}playSyntheticSnare(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),c=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.sampleRate*.12,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),p=h.getChannelData(0);for(let b=0;b<d;b++){const _=Math.pow(1-b/d,2);p[b]=(Math.random()*2-1)*_}s.buffer=h,i.type="triangle",i.frequency.setValueAtTime(240,e),i.frequency.exponentialRampToValueAtTime(180,e+.08),u.type="bandpass",u.frequency.setValueAtTime(2500,e),u.Q.setValueAtTime(2.5,e);const m=Math.max(.001,t*1.4);a.gain.setValueAtTime(m,e),a.gain.exponentialRampToValueAtTime(.001,e+.12);const y=Math.max(.001,t*.6);c.gain.setValueAtTime(y,e),c.gain.exponentialRampToValueAtTime(.001,e+.08),s.connect(u),u.connect(a),a.connect(this.audioContext.destination),i.connect(c),c.connect(this.audioContext.destination),s.start(e),i.start(e),i.stop(e+.08)}catch(s){console.error(" Snare drum error:",s)}}playSyntheticHihat(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),c=.05,u=this.audioContext.sampleRate*c,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const y=Math.pow(1-m/u,4);h[m]=(Math.random()*2-1)*y}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(1e4,e),a.Q.setValueAtTime(1,e);const p=Math.max(.001,t*1.2);i.gain.setValueAtTime(p,e),i.gain.exponentialRampToValueAtTime(.001,e+c),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Hi-hat error:",s)}}playSyntheticTom(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(120,e),s.frequency.exponentialRampToValueAtTime(80,e+.3),a.type="lowpass",a.frequency.setValueAtTime(600,e),a.Q.setValueAtTime(3,e);const c=Math.max(.001,t*1.4);i.gain.setValueAtTime(c,e),i.gain.exponentialRampToValueAtTime(c*.5,e+.1),i.gain.exponentialRampToValueAtTime(.001,e+.4),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e),s.stop(e+.4)}catch(s){console.error(" Tom drum error:",s)}}playSyntheticOpenHat(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),c=.25,u=this.audioContext.sampleRate*c,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const y=Math.pow(1-m/u,2);h[m]=(Math.random()*2-1)*y}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(8e3,e),a.Q.setValueAtTime(1,e);const p=Math.max(.001,t*1.2);i.gain.setValueAtTime(p,e),i.gain.exponentialRampToValueAtTime(.001,e+c),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Open hi-hat error:",s)}}playSyntheticClap(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),c=this.audioContext.createBiquadFilter(),u=.08,d=this.audioContext.sampleRate*u,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),p=h.getChannelData(0);for(let y=0;y<d;y++){const b=y<d*.1?1:Math.pow(1-(y-d*.1)/(d*.9),4);p[y]=(Math.random()*2-1)*b}s.buffer=h,a.type="highpass",a.frequency.setValueAtTime(800,e),a.Q.setValueAtTime(1,e),c.type="bandpass",c.frequency.setValueAtTime(2200,e),c.Q.setValueAtTime(3,e);const m=Math.max(.001,t*1.3);i.gain.setValueAtTime(m,e),i.gain.exponentialRampToValueAtTime(m*.3,e+.01),i.gain.exponentialRampToValueAtTime(.001,e+u),s.connect(a),a.connect(c),c.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Clap error:",s)}}playSyntheticCrash(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),c=1.2,u=this.audioContext.sampleRate*c,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const y=Math.pow(1-m/u,.3);h[m]=(Math.random()*2-1)*y}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(4e3,e),a.Q.setValueAtTime(.3,e);const p=Math.max(.001,t*1);i.gain.setValueAtTime(p,e),i.gain.exponentialRampToValueAtTime(p*.4,e+.2),i.gain.exponentialRampToValueAtTime(.001,e+c),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Crash cymbal error:",s)}}playSyntheticBassDrum(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(50,e),s.frequency.exponentialRampToValueAtTime(35,e+.2),a.type="lowpass",a.frequency.setValueAtTime(100,e),a.Q.setValueAtTime(2,e);const c=this.bassDrumDuration,u=Math.max(.001,t*1.1);i.gain.setValueAtTime(u,e),i.gain.exponentialRampToValueAtTime(u*.6,e+.15),i.gain.exponentialRampToValueAtTime(u*.2,e+c*.6),i.gain.exponentialRampToValueAtTime(.001,e+c),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e),s.stop(e+c)}catch(s){console.error(" Bass drum error:",s)}}}const Xt=new Lk;let Ha=!1;const Ja=[];let _s=null,Vd=!1;function Sd(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}async function $1(){if(!(!Sd()||Vd))try{_s||(_s=new(window.AudioContext||window.webkitAudioContext)),_s.state==="suspended"&&await _s.resume();const n=_s.createOscillator(),e=_s.createGain();n.connect(e),e.connect(_s.destination),e.gain.setValueAtTime(0,_s.currentTime),n.frequency.setValueAtTime(440,_s.currentTime),n.start(_s.currentTime),n.stop(_s.currentTime+.1),Vd=!0,console.log(" iOS audio enabled successfully"),Ja.forEach(t=>t()),Ja.length=0}catch(n){console.error("Failed to enable iOS audio:",n)}}function gL(n,e=4){const s={C:0,"C#":1,DB:1,D:2,"D#":3,EB:3,E:4,F:5,"F#":6,GB:6,G:7,"G#":8,AB:8,A:9,"A#":10,BB:10,B:11}[n.toUpperCase()];return s===void 0?(console.warn(`Unknown note: ${n}`),440):440*Math.pow(2,e-4+(s-9)/12)}function yL(){const{playDrumSound:n}=qn();let e=[],t=!1;return{playPattern:(s,i=120)=>{if(e.forEach(a=>clearTimeout(a)),e=[],t=!0,Array.isArray(s))s.forEach((a,c)=>{if(a.active){const u=setTimeout(()=>{t&&n(a.sound||"kick",a.velocity||.7)},c*(6e4/(i*4)));e.push(u)}});else if(s&&typeof s=="object"){const a=6e4/(i*4),c=16;for(let u=0;u<c;u++){const d=setTimeout(()=>{t&&Object.entries(s).forEach(([h,p])=>{Array.isArray(p)&&p[u]&&n(h,.7)})},u*a);e.push(d)}}},stopPattern:()=>{t=!1,e.forEach(s=>clearTimeout(s)),e=[]},isPlaying:t}}function qn(){const[n,e]=x.useState(Ha),[t,s]=x.useState(!0),{toast:i}=$t(),a=x.useCallback(async()=>{if(!Ha)try{await Xa.initialize(),await Xt.initialize(),typeof window<"u"&&(window.syntheticAudioEngine=Xa),Ha=!0,e(!0),Ja.forEach(p=>p()),i({title:"Audio System Ready",description:"Realistic and synthetic audio engines initialized successfully."})}catch(p){console.error("Failed to initialize audio:",p),i({title:"Audio Initialization Failed",description:"Could not initialize audio system. Some features may not work.",variant:"destructive"})}},[i]);x.useEffect(()=>{const p=()=>e(!0);return Ja.push(p),()=>{const m=Ja.indexOf(p);m>-1&&Ja.splice(m,1)}},[]);const c=x.useCallback(async(p,m=4,y=.5,b="piano",_=.7,v=!0)=>{try{Ha||await a();let w;if(typeof p=="number"){const N=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],P=Math.floor(p/12)-1,C=p%12;w=N[C],m=P}else w=p;if(console.log(`Audio Mode Check: useRealisticSounds=${t}, realisticAudio.isReady()=${Xt.isReady()}`),t&&Xt.isReady())console.log(`Playing REALISTIC ${b}: ${w}${m}`),await Xt.playNote(w,m,y,b,_,v);else{console.log(`Playing SYNTHETIC ${b}: ${w}${m}`);const N=gL(w,m);await Xa.playNote(N,y,_,b,v)}}catch(w){console.error("Failed to play note:",w)}},[a,t]),u=x.useCallback(async(p,m=.5)=>{try{Ha||await a(),t&&Xt.isReady()?await Xt.playDrumSound(p,m):Xa.playDrum(p,m)}catch(y){console.error("Failed to play drum sound:",y)}},[a,t]),d=x.useCallback(p=>{try{Xa.setMasterVolume(p/100)}catch(m){console.error("Failed to set master volume:",m)}},[]);x.useEffect(()=>{const p=async()=>{Sd()&&!Vd&&await $1(),Ha||await a(),document.removeEventListener("click",p),document.removeEventListener("keydown",p),document.removeEventListener("touchstart",p)};return document.addEventListener("click",p),document.addEventListener("keydown",p),document.addEventListener("touchstart",p),()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",p),document.removeEventListener("touchstart",p)}},[a]);const h=x.useCallback(()=>{s(p=>{const m=!p;return console.log(` Audio Mode Toggled: ${p?"REALISTIC":"SYNTHETIC"}  ${m?"REALISTIC":"SYNTHETIC"}`),m})},[]);return{playNote:c,playDrumSound:u,setMasterVolume:d,isInitialized:n,initialize:a,useRealisticSounds:t,toggleRealisticSounds:h,isIOSDevice:Sd(),needsIOSAudioEnable:Sd()&&!Vd,enableIOSAudio:$1}}function xL({currentTool:n="Beat Maker",activeTab:e="beatmaker"}){const[t,s]=x.useState(!1),[i,a]=x.useState("00:00"),[c]=x.useState("02:45"),[u]=x.useState(120),[d]=x.useState(1),[h]=x.useState(1),[p,m]=x.useState(75),[y,b]=x.useState(""),[_,v]=x.useState(!1),[w,N]=x.useState(!1),[P,C]=x.useState(!0),[A,k]=x.useState(!1),[M,E]=x.useState(!1),[T,I]=x.useState({x:50,y:50}),[O,F]=x.useState(!1),[L,V]=x.useState({x:0,y:0}),[z,W]=x.useState(!1),{setMasterVolume:G,initialize:K,isInitialized:$}=qn(),{playPattern:H,stopPattern:ee}=yL(),R=x.useContext($s),{toast:U}=$t(),{data:X}=wo({queryKey:["/api/playlists"],initialData:[]}),re=Et({mutationFn:async Se=>(await yt("POST","/api/playlists",{name:Se,description:`Playlist created on ${new Date().toLocaleDateString()}`,isPublic:!1})).json(),onSuccess:Se=>{ky.invalidateQueries({queryKey:["/api/playlists"]}),b(""),v(!1),U({title:"Playlist Created",description:`${Se.name} has been created!`})}}),ae=async()=>{try{if($||(console.log(" Initializing audio..."),await K()),t)console.log(" Stopping playback..."),ee(),R.stopFullSong(),s(!1);else{console.log(` Starting playback - Mode: ${R.playMode}, Tool: ${e}`);const Se=R.currentPattern&&Object.keys(R.currentPattern).length>0?R.currentPattern:{kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]};if(console.log(" Playing pattern:",Se),H(Se,R.bpm||120),R.currentPlaylist?.songs?.length>0)console.log(" Playing from active playlist"),await R.playFullSong();else{console.log(" No playlist selected - main transport is for playlist playback only"),U({title:"No Playlist Selected",description:"Main transport controls are for playlist playback. Select a playlist or use tool-specific play buttons.",variant:"default"}),s(!1);return}s(!0)}}catch(Se){console.error(" Play button error:",Se),s(!1)}},le=()=>{ee(),s(!1),a("00:00")},Q=Se=>{const ct=Number(Se.target.value);m(ct),G(ct)},se=()=>{if(R.currentPlaylist&&R.currentPlaylist.songs){const Se=R.currentPlaylistIndex>0?R.currentPlaylistIndex-1:R.currentPlaylist.songs.length-1;R.setCurrentPlaylistIndex(Se),console.log(` Previous track: ${Se+1}/${R.currentPlaylist.songs.length}`)}else U({title:"No Playlist Active",description:"Previous/Next buttons work with playlists only.",variant:"default"})},xe=()=>{if(R.currentPlaylist&&R.currentPlaylist.songs){const Se=R.currentPlaylistIndex<R.currentPlaylist.songs.length-1?R.currentPlaylistIndex+1:0;R.setCurrentPlaylistIndex(Se),console.log(` Next track: ${Se+1}/${R.currentPlaylist.songs.length}`)}else U({title:"No Playlist Active",description:"Previous/Next buttons work with playlists only.",variant:"default"})},Pe=async Se=>{try{const Rn=await(await yt("GET",`/api/playlists/${Se.id}/songs`,{})).json();R.setCurrentPlaylist({...Se,songs:Rn}),R.setCurrentPlaylistIndex(0),U({title:"Active Playlist Set",description:`${Se.name} is now active. Use play button to start.`})}catch{U({title:"Error",description:"Failed to set active playlist.",variant:"destructive"})}},Fe=()=>{if(!y.trim()){U({title:"Invalid Name",description:"Please enter a playlist name.",variant:"destructive"});return}re.mutate(y.trim())},oe=async()=>{try{if($||(console.log(" Initializing audio for tool..."),await K()),z)console.log(" Stopping tool audio..."),ee(),W(!1);else{console.log(` Playing ${e} tool audio - Mode: ${R.playMode}`);const Se=R.currentPattern&&Object.keys(R.currentPattern).length>0?R.currentPattern:{kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]};H(Se,R.bpm||120),R.playMode==="all"?(console.log(" Playing ALL tools combined"),await R.playFullSong()):(console.log(` Playing current tool only: ${e}`),await R.playCurrentAudio()),W(!0)}}catch(Se){console.error(" Tool play button error:",Se),W(!1)}},ke=()=>{C(!1),k(!0),E(!1);const Se=window.innerWidth/2-400,ct=window.innerHeight/2-100;I({x:Math.max(0,Se),y:Math.max(0,ct)})},Me=()=>{k(!1),C(!0),E(!1)},ce=()=>{E(!M)},ve=Se=>{if(!A)return;const ct=Se.target;ct.closest("button")||ct.closest('[role="button"]')||(F(!0),V({x:Se.clientX-T.x,y:Se.clientY-T.y}))},Ve=Se=>{if(!O||!A)return;const ct=Se.clientX-L.x,Rn=Se.clientY-L.y,Dr=window.innerWidth-800,va=window.innerHeight-200;I({x:Math.max(0,Math.min(ct,Dr)),y:Math.max(0,Math.min(Rn,va))})},We=()=>{F(!1)};x.useEffect(()=>{if(O)return document.addEventListener("mousemove",Ve),document.addEventListener("mouseup",We),()=>{document.removeEventListener("mousemove",Ve),document.removeEventListener("mouseup",We)}},[O,L]);const Ye=A?`fixed bg-studio-panel border border-gray-600 rounded-lg shadow-2xl px-6 z-50 ${O?"cursor-grabbing":""} ${M?"h-auto pb-2 min-w-[400px]":"py-4 min-w-[800px]"}`:"bg-studio-panel border-t border-gray-700 px-6 py-4",Je=A?{left:`${T.x}px`,top:`${T.y}px`,transform:"none"}:{};return r.jsxs("div",{className:Ye,style:Je,onMouseDown:A?ve:void 0,children:[A&&r.jsxs("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gray-700 rounded-t-lg flex items-center justify-between px-3 cursor-grab hover:bg-gray-600 transition-colors",onMouseDown:ve,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]}),r.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Transport Controls"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(te,{onClick:ce,size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-xs hover:bg-yellow-600 bg-yellow-500 border border-yellow-400",title:M?"Expand controls":"Minimize controls",children:r.jsx("span",{className:"text-black text-lg font-bold leading-none",children:M?"+":""})}),r.jsx(te,{onClick:Me,size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-xs hover:bg-red-600 bg-red-500 border border-red-400",title:"Close floating window - Dock to bottom",children:r.jsx("span",{className:"text-white text-lg font-bold leading-none",children:""})})]})]}),A&&M&&r.jsxs("div",{className:"mt-8 flex items-center justify-between gap-4 px-4 py-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{onClick:se,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-8 h-8 rounded-full flex items-center justify-center transition-colors",title:"Previous Song",children:r.jsx("i",{className:"fas fa-step-backward text-xs"})}),r.jsx(te,{onClick:ae,variant:"default",className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${t?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,title:t?"Stop":"Play",children:r.jsx("i",{className:`fas ${t?"fa-stop":"fa-play"} text-white`})}),r.jsx(te,{onClick:xe,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-8 h-8 rounded-full flex items-center justify-center transition-colors",title:"Next Song",children:r.jsx("i",{className:"fas fa-step-forward text-xs"})})]}),r.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[r.jsx("i",{className:"fas fa-volume-down text-gray-400 text-xs"}),r.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:Se=>{const ct=parseInt(Se.target.value);m(ct),G(ct/100)},className:"flex-1 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer slider","aria-label":`Master volume control: ${p}%`,title:`Volume: ${p}%`}),r.jsxs("span",{className:"text-xs text-gray-300 w-8",children:[p,"%"]})]})]}),(!A||!M)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-3 flex items-center justify-between gap-4 p-3 bg-gray-800 rounded-lg relative mt-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xs font-medium text-gray-300",children:"Tool Audio:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Current"}),r.jsx(oi,{checked:R.playMode==="all",onCheckedChange:Se=>R.setPlayMode(Se?"all":"current"),className:"data-[state=checked]:bg-studio-accent","aria-label":"Toggle between current tool audio and all tools audio"}),r.jsx("span",{className:"text-xs text-gray-400",children:"All"})]}),A?r.jsx(te,{onClick:Me,size:"sm",variant:"outline",className:"h-6 w-12 text-xs bg-blue-600 hover:bg-blue-500 text-white border-blue-500",title:"Dock to bottom",children:"Dock"}):r.jsx(te,{onClick:ke,size:"sm",variant:"outline",className:"h-6 w-12 text-xs bg-green-600 hover:bg-green-500 text-white border-green-500",title:"Float controls",children:"Float"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(te,{onClick:oe,className:`h-8 w-16 text-xs ${z?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,children:[z?"Stop":"Play"," Tool"]})})]}),r.jsx("div",{className:"mb-2 text-xs text-gray-400 text-center",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-900/30 p-2 rounded",children:[r.jsx("strong",{children:"Playlist Controls:"})," ",R.currentPlaylist?.songs?.length>0?`"${R.currentPlaylist.name}" (${R.currentPlaylist.songs.length} songs)`:"No playlist selected",r.jsxs("div",{className:"text-xs mt-1 text-blue-300",children:["Status: ",t?"Playing":"Ready"]})]}),r.jsxs("div",{className:"bg-green-900/30 p-2 rounded",children:[r.jsx("strong",{children:"Tool Audio:"})," ",R.playMode==="current"?`${n} only`:"All tools combined",r.jsxs("div",{className:"text-xs mt-1 text-green-300",children:["Status: ",z?"Playing":"Ready"]})]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(te,{onClick:se,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Previous Song in Playlist",children:r.jsx("i",{className:"fas fa-step-backward"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Previous"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(te,{onClick:ae,className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${t?"bg-red-600 hover:bg-red-500":"bg-studio-success hover:bg-green-500"}`,title:t?"Pause - Stop playing current beat":"Play - Start playing your beat pattern",children:r.jsx("i",{className:`fas ${t?"fa-pause":"fa-play"} text-lg`})}),r.jsx("span",{className:"text-xs text-gray-300 font-medium",children:t?"Pause":"Play"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(te,{onClick:le,className:"bg-red-600 hover:bg-red-500 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Stop - Stop playback and reset to beginning",children:r.jsx("i",{className:"fas fa-stop"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Stop"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(te,{onClick:xe,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Next Song in Playlist",children:r.jsx("i",{className:"fas fa-step-forward"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Next"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(te,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Loop - Repeat current pattern continuously",children:r.jsx("i",{className:"fas fa-redo"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Loop"})]})]})}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-mono text-lg",children:i}),r.jsxs("span",{className:"text-gray-400 ml-2",children:["/ ",c]})]}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"font-mono",children:["Bar ",d]}),r.jsxs("span",{className:"text-gray-400 ml-2",children:["Beat ",h]})]}),r.jsx("div",{className:"text-sm",children:r.jsxs("span",{className:"font-mono",children:[u," BPM"]})})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Playlists:"}),r.jsxs(rt,{value:R.currentPlaylist?.id||"",onValueChange:Se=>{const ct=X?.find(Rn=>Rn.id===Se);ct&&Pe(ct)},children:[r.jsx(et,{className:"w-32 h-8 bg-gray-700 border-gray-600 text-xs","aria-label":"Select playlist",children:r.jsx(it,{placeholder:"Select..."})}),r.jsx(tt,{className:"bg-gray-800 border-gray-600",children:X?.map(Se=>r.jsx(fe,{value:Se.id,children:Se.name},Se.id))})]})]}),r.jsxs(Ak,{open:_,onOpenChange:v,children:[r.jsx(Mk,{asChild:!0,children:r.jsxs(te,{variant:"secondary",size:"sm",className:"h-8 bg-gray-700 hover:bg-gray-600 text-xs",children:[r.jsx("i",{className:"fas fa-plus mr-1"}),"New"]})}),r.jsxs(fx,{className:"bg-gray-800 border-gray-600",children:[r.jsx(px,{children:r.jsx(mx,{children:"Create New Playlist"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Bt,{placeholder:"Enter playlist name...",value:y,onChange:Se=>b(Se.target.value),onKeyPress:Se=>Se.key==="Enter"&&Fe(),className:"bg-gray-700 border-gray-600","aria-label":"New playlist name"}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(te,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),r.jsx(te,{onClick:Fe,disabled:re.isPending,children:re.isPending?"Creating...":"Create"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-volume-up text-gray-400"}),r.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:Q,className:"w-20 h-2 bg-gray-700 rounded-lg appearance-none slider","aria-label":`Playlist volume control: ${p}%`,title:`Playlist volume: ${p}%`}),r.jsxs("span",{className:"text-sm text-gray-400 w-8",children:[p,"%"]})]})]})]})]})]})}const Mr=x.forwardRef(({className:n,...e},t)=>r.jsx("textarea",{className:Re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Mr.displayName="Textarea";function fa({value:n,onValueChange:e,className:t}){const{data:s=[]}=wo({queryKey:["/api/ai/providers"]}),i=s.filter(u=>u.available);x.useEffect(()=>{i.length>0&&!i.some(u=>u.id===n)&&e(i[0].id)},[i,n,e]);const a=u=>{switch(u){case"openai":return r.jsx(e1,{className:"h-4 w-4"});case"gemini":return r.jsx(na,{className:"h-4 w-4"});case"grok":return r.jsx(fs,{className:"h-4 w-4"});case"structure":return r.jsx(Oy,{className:"h-4 w-4"});case"musicgen":return r.jsx(Pn,{className:"h-4 w-4"});default:return r.jsx(fs,{className:"h-4 w-4"})}},c=u=>{switch(u){case"openai":return"text-emerald-400";case"gemini":return"text-blue-400";case"grok":return"text-purple-400";case"structure":return"text-orange-400";case"musicgen":return"text-pink-400";default:return"text-purple-400"}};return i.length===0?r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(e1,{className:"h-4 w-4"}),r.jsx("span",{children:"No AI providers available"})]}):r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{className:`w-48 ${t}`,children:r.jsx(it,{children:i.find(u=>u.id===n)&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:c(n),children:a(n)}),r.jsx("span",{children:i.find(u=>u.id===n)?.name})]})})}),r.jsx(tt,{children:i.map(u=>r.jsx(fe,{value:u.id,children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:c(u.id),children:a(u.id)}),r.jsx("span",{className:"font-medium",children:u.name}),r.jsx(Oe,{variant:"outline",className:"text-xs",children:"Available"})]}),r.jsx("p",{className:"text-xs text-muted-foreground max-w-64",children:u.description})]})},u.id))})]})}function vL(){const[n,e]=x.useState("javascript"),[t,s]=x.useState("python"),[i,a]=x.useState("grok"),[c,u]=x.useState(`function fibonacci(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// Generate first 10 fibonacci numbers
for (let i = 0; i < 10; i++) {
    console.log(fibonacci(i));
}`),[d,h]=x.useState(""),{toast:p}=$t(),m=Et({mutationFn:async v=>(await yt("POST","/api/code/translate",v)).json(),onSuccess:v=>{h(v.translatedCode),p({title:"Translation Complete",description:"Code has been successfully translated."})},onError:v=>{p({title:"Translation Failed",description:"Failed to translate code. Please try again.",variant:"destructive"})}}),y=()=>{if(!c.trim()){p({title:"No Code Provided",description:"Please enter some code to translate.",variant:"destructive"});return}m.mutate({sourceCode:c,sourceLanguage:n,targetLanguage:t,aiProvider:i})},b=()=>{navigator.clipboard.writeText(d),p({title:"Copied to Clipboard",description:"Translated code has been copied to clipboard."})},_=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"csharp",label:"C#"}];return r.jsxs("div",{className:"h-full p-6 flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Code Translator"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(fa,{value:i,onValueChange:a}),r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{className:"w-32",children:r.jsx(it,{})}),r.jsx(tt,{children:_.map(v=>r.jsx(fe,{value:v.value,children:v.label},v.value))})]}),r.jsx("i",{className:"fas fa-arrow-right text-studio-accent"}),r.jsxs(rt,{value:t,onValueChange:s,children:[r.jsx(et,{className:"w-32",children:r.jsx(it,{})}),r.jsx(tt,{children:_.map(v=>r.jsx(fe,{value:v.value,children:v.label},v.value))})]}),r.jsx(te,{onClick:y,disabled:m.isPending,className:"bg-studio-accent hover:bg-blue-500",children:m.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Translating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Translate"]})})]})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Source Code"}),r.jsx("span",{className:"text-sm text-gray-400 capitalize",children:n})]}),r.jsx(Mr,{value:c,onChange:v=>u(v.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Enter your source code here..."})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Translated Code"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-400 capitalize",children:t}),d&&r.jsxs(te,{onClick:b,variant:"ghost",size:"sm",className:"text-studio-accent hover:text-blue-300",children:[r.jsx("i",{className:"fas fa-copy mr-1"}),"Copy"]})]})]}),r.jsx("div",{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap h-full overflow-auto",children:d||"Translated code will appear here..."})})]})]}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsx("div",{className:"flex items-center space-x-4",children:m.isSuccess?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full"}),r.jsx("span",{className:"text-sm",children:"Translation completed successfully with high accuracy"})]}):m.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-studio-warning rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm",children:"Translating code using AI..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Ready to translate code"})]})})})]})}function yx(){const[n,e]=x.useState(null),[t,s]=x.useState([]),[i,a]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(null),[p,m]=x.useState(new Set),[y,b]=x.useState({inputDevice:"all",velocitySensitivity:[100],channelMode:"multi",activeChannel:1,noteRange:{min:21,max:108},sustainPedal:!0,pitchBend:!0,modulation:!0,autoConnect:!0,currentInstrument:"piano"}),{playNote:_}=qn(),v=x.useCallback(I=>{b(O=>({...O,...I}))},[]),w=x.useCallback(I=>{const O=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],F=Math.floor(I/12)-1;return{note:O[I%12],octave:F}},[]),N=x.useCallback(I=>({piano:"piano-keyboard",guitar:"strings-guitar",bass:"bass-electric",violin:"strings-violin",flute:"flute-concert",trumpet:"horns-trumpet",organ:"piano-organ"})[y.currentInstrument||"piano"]||"piano-keyboard",[y.currentInstrument]),P=x.useCallback((I,O,F)=>{const{note:L,octave:V}=w(I),z=O/127;m(K=>new Set(Array.from(K).concat(I))),h({note:I,velocity:O,channel:F});const W=N(F);_(L,V,2,W,z,!0)},[w,_,N]),C=x.useCallback((I,O)=>{m(F=>{const L=new Set(Array.from(F));return L.delete(I),L})},[]),A=x.useCallback(I=>{const[O,F,L]=I.data,V=O&15,z=O&240;if(z===144||z===128)z===144&&L>0?P(F,L,V):C(F,V);else if(z===176){const W=F,G=L;switch(console.log(` MIDI Control Change: CC${W} = ${G} (Channel ${V+1})`),W){case 1:console.log(` Modulation: ${Math.round(G/127*100)}%`);break;case 7:console.log(` Volume: ${Math.round(G/127*100)}%`);break;case 10:console.log(` Pan: ${Math.round(G/127*100)}%`);break;case 11:console.log(` Expression: ${Math.round(G/127*100)}%`);break;case 64:console.log(` Sustain: ${G>63?"ON":"OFF"}`);break;case 74:console.log(` Filter: ${Math.round(G/127*100)}%`);break;default:console.log(` Custom Control CC${W}: ${G}`);break}}else if(z===224){const G=((L<<7|F)-8192)/8192*2;console.log(` Pitch Bend: ${G.toFixed(2)} semitones`)}},[P,C]),k=x.useCallback(I=>{for(const O of I.inputs.values())O.onmidimessage=A},[A]),M=x.useCallback(I=>{const O=[];for(const F of I.inputs.values())O.push({id:F.id,name:F.name||"Unknown Input",manufacturer:F.manufacturer||"Unknown",connection:"input",state:F.state});for(const F of I.outputs.values())O.push({id:F.id,name:F.name||"Unknown Output",manufacturer:F.manufacturer||"Unknown",connection:"output",state:F.state});s(O)},[]),E=x.useCallback(async()=>{if(!navigator.requestMIDIAccess){a(!1);return}try{a(!0);const I=await navigator.requestMIDIAccess();e(I),u(!0),I.onstatechange=()=>{M(I)},M(I),k(I)}catch{a(!1)}},[M,k]),T=x.useCallback(()=>{n&&M(n)},[n,M]);return x.useEffect(()=>{E()},[E]),{isSupported:i,isConnected:c,connectedDevices:t,lastNote:d,activeNotes:p,initializeMIDI:E,refreshDevices:T,settings:y,updateSettings:v}}var zk=["PageUp","PageDown"],Bk=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Vk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Eo="Slider",[Qg,bL,wL]=rc(Eo),[Uk,KH]=wn(Eo,[wL]),[SL,Lh]=Uk(Eo),$k=x.forwardRef((n,e)=>{const{name:t,min:s=0,max:i=100,step:a=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[s],value:p,onValueChange:m=()=>{},onValueCommit:y=()=>{},inverted:b=!1,form:_,...v}=n,w=x.useRef(new Set),N=x.useRef(0),C=c==="horizontal"?_L:CL,[A=[],k]=nr({prop:p,defaultProp:h,onChange:F=>{[...w.current][N.current]?.focus(),m(F)}}),M=x.useRef(A);function E(F){const L=PL(A,F);O(F,L)}function T(F){O(F,N.current)}function I(){const F=M.current[N.current];A[N.current]!==F&&y(A)}function O(F,L,{commit:V}={commit:!1}){const z=RL(a),W=IL(Math.round((F-s)/a)*a+s,z),G=Wl(W,[s,i]);k((K=[])=>{const $=kL(K,G,L);if(ML($,d*a)){N.current=$.indexOf(G);const H=String($)!==String(K);return H&&V&&y($),H?$:K}else return K})}return r.jsx(SL,{scope:n.__scopeSlider,name:t,disabled:u,min:s,max:i,valueIndexToChangeRef:N,thumbs:w.current,values:A,orientation:c,form:_,children:r.jsx(Qg.Provider,{scope:n.__scopeSlider,children:r.jsx(Qg.Slot,{scope:n.__scopeSlider,children:r.jsx(C,{"aria-disabled":u,"data-disabled":u?"":void 0,...v,ref:e,onPointerDown:me(v.onPointerDown,()=>{u||(M.current=A)}),min:s,max:i,inverted:b,onSlideStart:u?void 0:E,onSlideMove:u?void 0:T,onSlideEnd:u?void 0:I,onHomeKeyDown:()=>!u&&O(s,0,{commit:!0}),onEndKeyDown:()=>!u&&O(i,A.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:L})=>{if(!u){const W=zk.includes(F.key)||F.shiftKey&&Bk.includes(F.key)?10:1,G=N.current,K=A[G],$=a*W*L;O(K+$,G,{commit:!0})}}})})})})});$k.displayName=Eo;var[qk,Wk]=Uk(Eo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_L=x.forwardRef((n,e)=>{const{min:t,max:s,dir:i,inverted:a,onSlideStart:c,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...p}=n,[m,y]=x.useState(null),b=qe(e,C=>y(C)),_=x.useRef(void 0),v=To(i),w=v==="ltr",N=w&&!a||!w&&a;function P(C){const A=_.current||m.getBoundingClientRect(),k=[0,A.width],E=xx(k,N?[t,s]:[s,t]);return _.current=A,E(C-A.left)}return r.jsx(qk,{scope:n.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:r.jsx(Gk,{dir:v,"data-orientation":"horizontal",...p,ref:b,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const A=P(C.clientX);c?.(A)},onSlideMove:C=>{const A=P(C.clientX);u?.(A)},onSlideEnd:()=>{_.current=void 0,d?.()},onStepKeyDown:C=>{const k=Vk[N?"from-left":"from-right"].includes(C.key);h?.({event:C,direction:k?-1:1})}})})}),CL=x.forwardRef((n,e)=>{const{min:t,max:s,inverted:i,onSlideStart:a,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...h}=n,p=x.useRef(null),m=qe(e,p),y=x.useRef(void 0),b=!i;function _(v){const w=y.current||p.current.getBoundingClientRect(),N=[0,w.height],C=xx(N,b?[s,t]:[t,s]);return y.current=w,C(v-w.top)}return r.jsx(qk,{scope:n.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:r.jsx(Gk,{"data-orientation":"vertical",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const w=_(v.clientY);a?.(w)},onSlideMove:v=>{const w=_(v.clientY);c?.(w)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:v=>{const N=Vk[b?"from-bottom":"from-top"].includes(v.key);d?.({event:v,direction:N?-1:1})}})})}),Gk=x.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:d,...h}=n,p=Lh(Eo,t);return r.jsx(je.span,{...h,ref:e,onKeyDown:me(n.onKeyDown,m=>{m.key==="Home"?(c(m),m.preventDefault()):m.key==="End"?(u(m),m.preventDefault()):zk.concat(Bk).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:me(n.onPointerDown,m=>{const y=m.target;y.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(y)?y.focus():s(m)}),onPointerMove:me(n.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&i(m)}),onPointerUp:me(n.onPointerUp,m=>{const y=m.target;y.hasPointerCapture(m.pointerId)&&(y.releasePointerCapture(m.pointerId),a(m))})})}),Hk="SliderTrack",Kk=x.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=Lh(Hk,t);return r.jsx(je.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});Kk.displayName=Hk;var Yg="SliderRange",Qk=x.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=Lh(Yg,t),a=Wk(Yg,t),c=x.useRef(null),u=qe(e,c),d=i.values.length,h=i.values.map(y=>Zk(y,i.min,i.max)),p=d>1?Math.min(...h):0,m=100-Math.max(...h);return r.jsx(je.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:u,style:{...n.style,[a.startEdge]:p+"%",[a.endEdge]:m+"%"}})});Qk.displayName=Yg;var Xg="SliderThumb",Yk=x.forwardRef((n,e)=>{const t=bL(n.__scopeSlider),[s,i]=x.useState(null),a=qe(e,u=>i(u)),c=x.useMemo(()=>s?t().findIndex(u=>u.ref.current===s):-1,[t,s]);return r.jsx(jL,{...n,ref:a,index:c})}),jL=x.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:i,...a}=n,c=Lh(Xg,t),u=Wk(Xg,t),[d,h]=x.useState(null),p=qe(e,P=>h(P)),m=d?c.form||!!d.closest("form"):!0,y=Sh(d),b=c.values[s],_=b===void 0?0:Zk(b,c.min,c.max),v=TL(s,c.values.length),w=y?.[u.size],N=w?EL(w,_,u.direction):0;return x.useEffect(()=>{if(d)return c.thumbs.add(d),()=>{c.thumbs.delete(d)}},[d,c.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${_}% + ${N}px)`},children:[r.jsx(Qg.ItemSlot,{scope:n.__scopeSlider,children:r.jsx(je.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":c.min,"aria-valuenow":b,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...a,ref:p,style:b===void 0?{display:"none"}:n.style,onFocus:me(n.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),m&&r.jsx(Xk,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:b},s)]})});Yk.displayName=Xg;var NL="RadioBubbleInput",Xk=x.forwardRef(({__scopeSlider:n,value:e,...t},s)=>{const i=x.useRef(null),a=qe(i,s),c=Mh(e);return x.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==e&&p){const m=new Event("input",{bubbles:!0});p.call(u,e),u.dispatchEvent(m)}},[c,e]),r.jsx(je.input,{style:{display:"none"},...t,ref:a,defaultValue:e})});Xk.displayName=NL;function kL(n=[],e,t){const s=[...n];return s[t]=e,s.sort((i,a)=>i-a)}function Zk(n,e,t){const a=100/(t-e)*(n-e);return Wl(a,[0,100])}function TL(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function PL(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),s=Math.min(...t);return t.indexOf(s)}function EL(n,e,t){const s=n/2,a=xx([0,50],[0,s]);return(s-a(e)*t)*t}function AL(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function ML(n,e){if(e>0){const t=AL(n);return Math.min(...t)>=e}return!0}function xx(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function RL(n){return(String(n).split(".")[1]||"").length}function IL(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var Jk=$k,OL=Kk,DL=Qk,FL=Yk;const pe=x.forwardRef(({className:n,...e},t)=>r.jsxs(Jk,{ref:t,className:Re("relative flex w-full touch-none select-none items-center",n),...e,children:[r.jsx(OL,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(DL,{className:"absolute h-full bg-primary"})}),r.jsx(FL,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));pe.displayName=Jk.displayName;var zh="Tabs",[LL,QH]=wn(zh,[Nh]),eT=Nh(),[zL,vx]=LL(zh),tT=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:i,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:d="automatic",...h}=n,p=To(u),[m,y]=nr({prop:s,onChange:i,defaultProp:a??"",caller:zh});return r.jsx(zL,{scope:t,baseId:er(),value:m,onValueChange:y,orientation:c,dir:p,activationMode:d,children:r.jsx(je.div,{dir:p,"data-orientation":c,...h,ref:e})})});tT.displayName=zh;var nT="TabsList",sT=x.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...i}=n,a=vx(nT,t),c=eT(t);return r.jsx(gN,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(je.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});sT.displayName=nT;var rT="TabsTrigger",iT=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:i=!1,...a}=n,c=vx(rT,t),u=eT(t),d=lT(c.baseId,s),h=cT(c.baseId,s),p=s===c.value;return r.jsx(yN,{asChild:!0,...u,focusable:!i,active:p,children:r.jsx(je.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:me(n.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?c.onValueChange(s):m.preventDefault()}),onKeyDown:me(n.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(s)}),onFocus:me(n.onFocus,()=>{const m=c.activationMode!=="manual";!p&&!i&&m&&c.onValueChange(s)})})})});iT.displayName=rT;var aT="TabsContent",oT=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:i,children:a,...c}=n,u=vx(aT,t),d=lT(u.baseId,s),h=cT(u.baseId,s),p=s===u.value,m=x.useRef(p);return x.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),r.jsx(Sn,{present:i||p,children:({present:y})=>r.jsx(je.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:m.current?"0s":void 0},children:y&&a})})});oT.displayName=aT;function lT(n,e){return`${n}-trigger-${e}`}function cT(n,e){return`${n}-content-${e}`}var BL=tT,uT=sT,dT=iT,hT=oT;const Ao=BL,pa=x.forwardRef(({className:n,...e},t)=>r.jsx(uT,{ref:t,className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));pa.displayName=uT.displayName;const At=x.forwardRef(({className:n,...e},t)=>r.jsx(dT,{ref:t,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));At.displayName=dT.displayName;const Mt=x.forwardRef(({className:n,...e},t)=>r.jsx(hT,{ref:t,className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Mt.displayName=hT.displayName;const VL=[{id:"kick",name:"Kick",volume:.8,muted:!1,solo:!1,effects:{filter:{cutoff:100,resonance:0,type:"lowpass"},distortion:{drive:0,tone:50},reverb:{size:30,decay:40,wet:0},delay:{time:.25,feedback:0,wet:0}}},{id:"snare",name:"Snare",volume:.7,muted:!1,solo:!1,effects:{filter:{cutoff:80,resonance:10,type:"highpass"},distortion:{drive:15,tone:60},reverb:{size:50,decay:60,wet:20},delay:{time:.125,feedback:0,wet:0}}},{id:"hhc",name:"Hi-Hat C",volume:.6,muted:!1,solo:!1,effects:{filter:{cutoff:90,resonance:5,type:"highpass"},distortion:{drive:0,tone:70},reverb:{size:20,decay:30,wet:10},delay:{time:.125,feedback:0,wet:0}}},{id:"hho",name:"Hi-Hat O",volume:.5,muted:!1,solo:!1,effects:{filter:{cutoff:85,resonance:8,type:"highpass"},distortion:{drive:0,tone:75},reverb:{size:40,decay:50,wet:15},delay:{time:.25,feedback:0,wet:0}}},{id:"clap",name:"Clap",volume:.6,muted:!1,solo:!1,effects:{filter:{cutoff:70,resonance:5,type:"bandpass"},distortion:{drive:10,tone:55},reverb:{size:60,decay:70,wet:25},delay:{time:.25,feedback:10,wet:5}}},{id:"crash",name:"Crash",volume:.4,muted:!1,solo:!1,effects:{filter:{cutoff:95,resonance:2,type:"highpass"},distortion:{drive:0,tone:80},reverb:{size:80,decay:90,wet:40},delay:{time:.5,feedback:15,wet:10}}},{id:"tom",name:"Tom",volume:.7,muted:!1,solo:!1,effects:{filter:{cutoff:60,resonance:15,type:"lowpass"},distortion:{drive:5,tone:45},reverb:{size:40,decay:50,wet:15},delay:{time:.25,feedback:0,wet:0}}},{id:"perc",name:"Perc",volume:.5,muted:!1,solo:!1,effects:{filter:{cutoff:75,resonance:8,type:"bandpass"},distortion:{drive:8,tone:65},reverb:{size:30,decay:40,wet:12},delay:{time:.375,feedback:8,wet:3}}}];function bx(){const[n,e]=x.useState(!1),[t,s]=x.useState(120),[i,a]=x.useState(0),[c,u]=x.useState(16),[d,h]=x.useState(0),[p,m]=x.useState(0),[y,b]=x.useState(()=>VL.map(E=>({...E,pattern:Array(16).fill(null).map(()=>({active:!1,velocity:100,probability:100,swing:0,retrigger:1,filter:50,distortion:0}))}))),[_,v]=x.useState({compressor:{threshold:-12,ratio:4,attack:3,release:100},eq:{low:0,mid:0,high:0},reverb:{size:50,decay:50,wet:20},limiter:{threshold:-1,release:50}}),w=x.useRef(),{toast:N}=$t(),P=async()=>{try{if(await Qu.initialize(),n)Qu.stop(),e(!1),w.current&&clearInterval(w.current);else{const E={kick:y[0].pattern.map(T=>T.active),snare:y[1].pattern.map(T=>T.active),hihat:y[2].pattern.map(T=>T.active),openhat:y[3].pattern.map(T=>T.active),clap:y[4].pattern.map(T=>T.active),crash:y[5].pattern.map(T=>T.active),tom:y[6].pattern.map(T=>T.active),perc:y[7].pattern.map(T=>T.active)};await Qu.playBeat(E,[],t),e(!0),w.current=setInterval(()=>{h(T=>(T+1)%c)},60/t/4*1e3)}}catch{N({title:"Playback Error",description:"Failed to start audio playback",variant:"destructive"})}},C=(E,T)=>{b(I=>I.map((O,F)=>F===E?{...O,pattern:O.pattern.map((L,V)=>V===T?{...L,active:!L.active}:L)}:O))},A=(E,T,I)=>{b(O=>O.map((F,L)=>L===E?{...F,pattern:F.pattern.map((V,z)=>z===T?{...V,velocity:I}:V)}:F))},k=E=>{b(T=>T.map((I,O)=>O===E?{...I,pattern:I.pattern.map(F=>({...F,active:Math.random()>.7,velocity:60+Math.random()*40,probability:70+Math.random()*30}))}:I))},M=E=>{b(T=>T.map((I,O)=>O===E?{...I,pattern:I.pattern.map(F=>({...F,active:!1}))}:I))};return x.useEffect(()=>()=>{w.current&&clearInterval(w.current)},[]),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:r.jsx(ea,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Advanced Sequencer"}),r.jsx("p",{className:"text-muted-foreground",children:"Professional multi-layered beat production"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Oe,{variant:"secondary",className:"bg-orange-500/10 text-orange-500",children:[r.jsx(fs,{className:"h-3 w-3 mr-1"}),"CO Producer"]}),r.jsx(Oe,{variant:"secondary",children:"32-Step"}),r.jsx(Oe,{variant:"secondary",children:"Multi-FX"})]})]}),r.jsxs(Ao,{defaultValue:"sequencer",className:"w-full",children:[r.jsxs(pa,{className:"grid w-full grid-cols-4",children:[r.jsx(At,{value:"sequencer",children:"Sequencer"}),r.jsx(At,{value:"modulation",children:"Modulation"}),r.jsx(At,{value:"effects",children:"Effects"}),r.jsx(At,{value:"mixer",children:"Mixer"})]}),r.jsxs(Mt,{value:"sequencer",children:[r.jsxs(ye,{className:"mb-6",children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(sr,{className:"h-5 w-5"}),"Transport"]})}),r.jsx(we,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{onClick:P,className:`w-16 h-16 rounded-full ${n?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:n?r.jsx(ua,{className:"h-6 w-6"}):r.jsx(sr,{className:"h-6 w-6"})}),r.jsx(te,{variant:"outline",onClick:()=>{Qu.stop(),e(!1)},children:r.jsx(yh,{className:"h-4 w-4"})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["BPM: ",t]}),r.jsx(pe,{value:[t],onValueChange:E=>s(E[0]),min:60,max:200,step:1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Swing: ",i,"%"]}),r.jsx(pe,{value:[i],onValueChange:E=>a(E[0]),min:0,max:50,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Pattern Length"}),r.jsxs(rt,{value:c.toString(),onValueChange:E=>u(parseInt(E)),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"8",children:"8 Steps"}),r.jsx(fe,{value:"16",children:"16 Steps"}),r.jsx(fe,{value:"32",children:"32 Steps"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{variant:"outline",size:"sm",onClick:()=>k(p),children:r.jsx(Ly,{className:"h-4 w-4"})}),r.jsx(te,{variant:"outline",size:"sm",onClick:()=>M(p),children:r.jsx(Dy,{className:"h-4 w-4"})})]})]})})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(Og,{className:"h-5 w-5"}),"Step Sequencer Matrix"]})}),r.jsx(we,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-17 gap-1",children:[r.jsx("div",{className:"text-xs text-center font-medium",children:"Track"}),Array.from({length:16},(E,T)=>r.jsx("div",{className:`text-xs text-center font-medium p-1 rounded ${d===T&&n?"bg-orange-500 text-white":T%4===0?"bg-primary/20":"bg-secondary/50"}`,children:T+1},T))]}),y.map((E,T)=>r.jsxs("div",{className:"grid grid-cols-17 gap-1 items-center",children:[r.jsx(te,{variant:p===T?"default":"outline",size:"sm",className:"text-xs justify-start",onClick:()=>m(T),children:E.name}),E.pattern.slice(0,c).map((I,O)=>r.jsx(te,{size:"sm",className:`w-8 h-8 p-0 relative ${I.active?"bg-orange-500 hover:bg-orange-600":"bg-secondary hover:bg-secondary/80"}`,onClick:()=>C(T,O),onContextMenu:F=>{F.preventDefault()},children:I.active&&r.jsx("div",{className:"absolute inset-0 bg-white/20 rounded",style:{height:`${I.velocity}%`}})},O))]},E.id))]})})]})]}),r.jsx(Mt,{value:"modulation",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Step Modulation"})}),r.jsx(we,{children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-4",children:"Velocity Modulation"}),r.jsx("div",{className:"grid grid-cols-16 gap-1",children:y[p]?.pattern.slice(0,c).map((E,T)=>r.jsxs("div",{className:"space-y-1",children:[r.jsx(pe,{orientation:"vertical",value:[E.velocity],onValueChange:I=>A(p,T,I[0]),min:0,max:127,step:1,className:"h-16"}),r.jsx("div",{className:"text-xs text-center",children:T+1})]},T))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-4",children:"Probability"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(pe,{value:[y[p]?.pattern[0]?.probability||100],min:0,max:100,step:1,className:"w-full"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Per-step probability controls coming soon"})]})]})]})})})]})}),r.jsx(Mt,{value:"effects",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(cj,{className:"h-5 w-5"}),"Track Effects"]})}),r.jsx(we,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:[y[p]?.name," Effects"]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Filter Cutoff"}),r.jsx(pe,{value:[y[p]?.effects.filter.cutoff||50],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Distortion Drive"}),r.jsx(pe,{value:[y[p]?.effects.distortion.drive||0],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Reverb Send"}),r.jsx(pe,{value:[y[p]?.effects.reverb.wet||0],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Delay Send"}),r.jsx(pe,{value:[y[p]?.effects.delay.wet||0],min:0,max:100,step:1})]})]})]})})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(zy,{className:"h-5 w-5"}),"Master Effects"]})}),r.jsx(we,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Compressor Threshold"}),r.jsx(pe,{value:[_.compressor.threshold+40],min:0,max:40,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ Low"}),r.jsx(pe,{value:[_.eq.low+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ Mid"}),r.jsx(pe,{value:[_.eq.mid+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ High"}),r.jsx(pe,{value:[_.eq.high+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Master Reverb"}),r.jsx(pe,{value:[_.reverb.wet],min:0,max:100,step:1})]})]})})]})]})}),r.jsx(Mt,{value:"mixer",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(yi,{className:"h-5 w-5"}),"Mixer Console"]})}),r.jsx(we,{children:r.jsx("div",{className:"grid grid-cols-8 gap-4",children:y.map((E,T)=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-xs font-medium text-center",children:E.name}),r.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx(te,{size:"sm",variant:E.solo?"default":"outline",className:"w-8 h-6 text-xs",onClick:()=>{b(I=>I.map((O,F)=>F===T?{...O,solo:!O.solo}:O))},children:"S"}),r.jsx(te,{size:"sm",variant:E.muted?"destructive":"outline",className:"w-8 h-6 text-xs",onClick:()=>{b(I=>I.map((O,F)=>F===T?{...O,muted:!O.muted}:O))},children:"M"}),r.jsx(pe,{orientation:"vertical",value:[E.volume*100],onValueChange:I=>{b(O=>O.map((F,L)=>L===T?{...F,volume:I[0]/100}:F))},min:0,max:100,step:1,className:"h-32"}),r.jsx("div",{className:"text-xs text-center",children:Math.round(E.volume*100)})]})]},E.id))})})]})})]})]})}const UL={acoustic:{name:"Acoustic",sounds:[{id:"kick",name:"Kick",color:"bg-red-500"},{id:"bass",name:"Bass Drum",color:"bg-red-700"},{id:"tom",name:"Tom",color:"bg-purple-600"},{id:"snare",name:"Snare",color:"bg-blue-500"},{id:"hihat",name:"Hi-Hat",color:"bg-yellow-500"},{id:"openhat",name:"Open Hat",color:"bg-green-500"},{id:"clap",name:"Clap",color:"bg-pink-500"},{id:"crash",name:"Crash",color:"bg-orange-500"}]}},$L=[{id:"kick",name:"Kick",color:"bg-red-500"},{id:"snare",name:"Snare",color:"bg-blue-500"},{id:"hihat",name:"Hi-hat (Closed)",color:"bg-yellow-500"},{id:"openhat",name:"Hi-hat (Open)",color:"bg-green-500"},{id:"tom1",name:"Tom 1",color:"bg-purple-600"},{id:"tom2",name:"Tom 2",color:"bg-purple-700"},{id:"tom3",name:"Tom 3",color:"bg-purple-800"},{id:"ride",name:"Ride",color:"bg-orange-500"}];function q1({onBeatGenerated:n}){const e=x.useContext($s),[t,s]=x.useState(120),[i,a]=x.useState(0),[c,u]=x.useState(!1),[d,h]=x.useState("acoustic"),[p,m]=x.useState(.8),[y,b]=x.useState([5]),[_,v]=x.useState(8),[w,N]=x.useState(4),[P,C]=x.useState("generate"),[A,k]=x.useState("grok"),[M,E]=x.useState(()=>{if(e.currentPattern&&Object.keys(e.currentPattern).length>0)return{kick:e.currentPattern.kick||Array(16).fill(!1),snare:e.currentPattern.snare||Array(16).fill(!1),hihat:e.currentPattern.hihat||Array(16).fill(!1),openhat:e.currentPattern.openhat||Array(16).fill(!1),tom1:e.currentPattern.tom1||Array(16).fill(!1),tom2:e.currentPattern.tom2||Array(16).fill(!1),tom3:e.currentPattern.tom3||Array(16).fill(!1),ride:e.currentPattern.ride||Array(16).fill(!1)};const X=localStorage.getItem("generatedMusicData");if(X)try{const re=JSON.parse(X);if(re.beatPattern)return{kick:re.beatPattern.kick||Array(16).fill(!1),snare:re.beatPattern.snare||Array(16).fill(!1),hihat:re.beatPattern.hihat||Array(16).fill(!1),openhat:re.beatPattern.openhat||Array(16).fill(!1),tom1:re.beatPattern.tom1||Array(16).fill(!1),tom2:re.beatPattern.tom2||Array(16).fill(!1),tom3:re.beatPattern.tom3||Array(16).fill(!1),ride:re.beatPattern.ride||Array(16).fill(!1)}}catch(re){console.error("Error loading stored pattern:",re)}return{kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),openhat:Array(16).fill(!1),tom1:Array(16).fill(!1),tom2:Array(16).fill(!1),tom3:Array(16).fill(!1),ride:Array(16).fill(!1)}}),{toast:T}=$t(),{playDrumSound:I,initialize:O,isInitialized:F}=qn();yx();const L=x.useRef(null),V=x.useRef(0);x.useEffect(()=>{F||O()},[O,F]),x.useEffect(()=>()=>{L.current&&clearInterval(L.current)},[]);const z=Et({mutationFn:async()=>{const X=await yt("POST","/api/beat/generate",{genre:"trap",bpm:t,complexity:y[0],pattern_length:16,instruments:["kick","snare","hihat","openhat","tom1","tom2","tom3","ride"],aiProvider:A});if(!X.ok)throw new Error("Failed to generate beat");return X.json()},onSuccess:X=>{X.beat_pattern&&(E(X.beat_pattern),e.setCurrentPattern&&e.setCurrentPattern(X.beat_pattern),n&&n(X.beat_pattern),T({title:"Beat Generated!",description:"Your AI-powered beat is ready to play"}))},onError:X=>{T({title:"Generation Failed",description:X.message||"Failed to generate beat",variant:"destructive"})}}),W=Et({mutationFn:async()=>{const X=await yt("POST","/api/beat/save",{pattern:M,bpm:t,name:`Beat_${new Date().toISOString().slice(0,10)}_${t}BPM`});if(!X.ok)throw new Error("Failed to save beat");return X.json()},onSuccess:()=>{T({title:"Beat Saved!",description:"Your beat has been saved successfully"})},onError:X=>{T({title:"Save Failed",description:X.message||"Failed to save beat",variant:"destructive"})}}),G=()=>{z.mutate()},K=()=>{W.mutate()},$=(X,re)=>{E(ae=>{const le={...ae,[X]:ae[X].map((Q,se)=>se===re?!Q:Q)};return e.setCurrentPattern&&e.setCurrentPattern(le),le})},H=async()=>{if(F||await O(),c){ee();return}u(!0),V.current=0;const X=60/t/4*1e3;L.current=setInterval(()=>{const re=V.current%16;a(re),Object.entries(M).forEach(([ae,le])=>{le[re]&&I(ae)}),V.current++},X)},ee=()=>{u(!1),L.current&&(clearInterval(L.current),L.current=null),a(0),V.current=0},U=UL[d]?.sounds||$L;return r.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:r.jsxs("div",{className:"p-6 border-b border-gray-600 flex-shrink-0",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"text-2xl mr-3",children:""}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beat Studio"}),r.jsx("p",{className:"text-gray-400",children:"Create and edit professional beats with AI assistance"})]})]}),r.jsxs("div",{className:"flex space-x-8 border-b border-gray-700 mb-6",children:[r.jsx("button",{onClick:()=>C("generate"),className:`px-6 py-3 border-b-2 transition-colors ${P==="generate"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Generate Beat"}),r.jsx("button",{onClick:()=>C("edit"),className:`px-6 py-3 border-b-2 transition-colors ${P==="edit"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Edit Pattern"}),r.jsx("button",{onClick:()=>C("sequencer"),className:`px-6 py-3 border-b-2 transition-colors ${P==="sequencer"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Pro Sequencer"})]})]}),P==="generate"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-400",children:"AI Beat Generation"}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx(fa,{value:A,onValueChange:k})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-sm whitespace-nowrap",children:"AI Complexity:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(pe,{value:y,onValueChange:b,max:10,min:1,step:1,className:"w-24","aria-label":"AI complexity level control"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]}),r.jsxs("span",{className:"text-xs text-studio-accent font-mono",children:[y[0],"/10"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm",children:"BPM:"}),r.jsx(Bt,{type:"number",value:t,onChange:X=>s(Number(X.target.value)),className:"w-16 text-sm",min:"60",max:"200","aria-label":"BPM tempo control"})]}),r.jsx(te,{onClick:G,disabled:z.isPending,className:"bg-studio-accent hover:bg-blue-500",children:z.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Generate Beat"]})})]})})]})}),P==="edit"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Drum Pattern Sequencer"}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-3",children:[r.jsx("span",{children:"Click squares to add drum hits  16 steps per pattern"}),r.jsxs("span",{children:["BPM: ",t]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsxs(te,{onClick:O,disabled:F,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),F?"Audio Ready":"Start Audio"]}),r.jsxs(te,{onClick:H,className:`${c?"bg-red-600 hover:bg-red-500":"bg-studio-success hover:bg-green-500"}`,children:[r.jsx("i",{className:`fas ${c?"fa-stop":"fa-play"} mr-2`}),c?"Stop":"Play"]}),r.jsx(te,{onClick:K,disabled:W.isPending,className:"bg-gray-600 hover:bg-gray-500",children:W.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-save mr-2"}),"Save Beat"]})})]}),c&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-1",children:[r.jsx("span",{children:"Beat Progress"}),r.jsxs("span",{children:["Step ",i%16+1," of 16"]})]}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-75 relative",style:{width:`${(i%16+1)/16*100}%`},children:r.jsx("div",{className:"absolute right-0 top-0 w-1 h-2 bg-yellow-300 animate-pulse rounded-full"})})}),r.jsx("div",{className:"grid grid-cols-16 gap-px",children:Array.from({length:16},(X,re)=>r.jsx("div",{className:`h-1 rounded-sm transition-all duration-75 ${re===i%16?"bg-yellow-400 animate-pulse":re<i%16?"bg-yellow-600":"bg-gray-600"}`},re))})]}),r.jsx("div",{className:"space-y-4",children:U.map(X=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"w-24 text-sm font-medium flex items-center space-x-2",children:[r.jsx("div",{className:`w-5 h-5 rounded ${X.color} flex items-center justify-center text-xs font-bold text-white shadow-lg`,children:X.name[0]}),r.jsx("span",{className:"text-gray-200",children:X.name})]}),r.jsx("div",{className:"flex space-x-1",children:(M[X.id]||Array(16).fill(!1)).map((re,ae)=>r.jsxs("button",{onClick:()=>{$(X.id,ae),!re&&F&&I(X.id)},className:`beat-pad w-10 h-10 rounded border-2 transition-all relative flex items-center justify-center text-xs font-bold ${re?`${X.color} shadow-lg transform scale-105 border-gray-300 text-white`:"bg-gray-700 hover:bg-gray-600 border-gray-500 text-gray-400 hover:border-gray-400"} ${c&&i%16===ae?"ring-4 ring-yellow-400 ring-opacity-100 shadow-lg shadow-yellow-400/50 animate-pulse scale-110":""}`,title:`${X.name} - Step ${ae+1} (Click to toggle)`,children:[r.jsx("span",{className:"opacity-70",children:ae+1}),ae%4===0&&r.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-yellow-400 font-bold bg-gray-800 px-1 rounded",children:["Beat ",ae/4+1]})]},ae))})]},X.id))})]})}),P==="sequencer"&&r.jsx("div",{className:"space-y-6",children:r.jsx(bx,{})})]})})}const Rl=[];for(let n=8;n>=0;n--){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(const t of e)Rl.push({note:t,octave:n,isBlack:t.includes("#"),key:`${t}${n}`})}const Mm=32,W1=20,G1=25,Rm=[{id:"classic",name:"Classic (I-V-vi-IV)",chords:["I","V","vi","IV"],key:"C"},{id:"jazz",name:"Jazz (ii-V-I)",chords:["ii","V","I"],key:"C"},{id:"pop",name:"Pop (vi-IV-I-V)",chords:["vi","IV","I","V"],key:"C"},{id:"electronic",name:"Electronic (i-VII-VI-VII)",chords:["vi","V","IV","V"],key:"C"}],qL=["C","G","D","A","E","B","F#","C#","G#","D#","A#","F"];function fT(){const[n,e]=x.useState(!1),[t,s]=x.useState(0),[i,a]=x.useState(120),[c,u]=x.useState(0),[d,h]=x.useState(1),[p,m]=x.useState([{id:"track1",name:"Piano",color:"bg-blue-500",notes:[],muted:!1,volume:80}]),[y,b]=x.useState("C"),[_,v]=x.useState(Rm[0]),[w,N]=x.useState(!1),[P,C]=x.useState(!1),[A,k]=x.useState(0),[M,E]=x.useState([]),[T,I]=x.useState(!1),[O,F]=x.useState(0),[L,V]=x.useState({C:{name:"C Major",notes:["C","D","E","F","G","A","B"],chords:{I:["C","E","G"],ii:["D","F","A"],iii:["E","G","B"],IV:["F","A","C"],V:["G","B","D"],vi:["A","C","E"],"vii":["B","D","F"]}},G:{name:"G Major",notes:["G","A","B","C","D","E","F#"],chords:{I:["G","B","D"],ii:["A","C","E"],iii:["B","D","F#"],IV:["C","E","G"],V:["D","F#","A"],vi:["E","G","B"],"vii":["F#","A","C"]}},F:{name:"F Major",notes:["F","G","A","Bb","C","D","E"],chords:{I:["F","A","C"],ii:["G","Bb","D"],iii:["A","C","E"],IV:["Bb","D","F"],V:["C","E","G"],vi:["D","F","A"],"vii":["E","G","Bb"]}}}),z=()=>{if(!K||!H)return;const oe=H.split(",").map(Me=>Me.trim());if(oe.length!==7){R({title:"Error",description:"Please enter exactly 7 notes separated by commas"});return}const ke={name:K,notes:oe,chords:{I:[oe[0],oe[2],oe[4]],ii:[oe[1],oe[3],oe[5]],iii:[oe[2],oe[4],oe[6]],IV:[oe[3],oe[5],oe[0]],V:[oe[4],oe[6],oe[1]],vi:[oe[5],oe[0],oe[2]],"vii":[oe[6],oe[1],oe[3]]}};V(Me=>({...Me,[K.charAt(0).toUpperCase()]:ke})),$(""),ee(""),G(!1),R({title:"Success",description:`Added custom key: ${K}`})},[W,G]=x.useState(!1),[K,$]=x.useState(""),[H,ee]=x.useState(""),{toast:R}=$t(),U=x.useRef(new Lk),X=x.useRef(null);x.useEffect(()=>()=>{X.current&&clearInterval(X.current)},[]);const re=async()=>{try{if(await U.current.initialize(),n)X.current&&clearInterval(X.current),e(!1),s(0);else{e(!0);const oe=60/i/4*1e3;X.current=setInterval(()=>{s(ke=>{const Me=(ke+1)%Mm;return p.forEach(ce=>{ce.muted||ce.notes.filter(Ve=>Ve.step===Me).forEach(Ve=>{U.current.playNote(Ve.note,Ve.octave,Ve.velocity/127,.25)})}),Me})},oe)}}catch{R({title:"Audio Error",description:"Failed to initialize audio",variant:"destructive"})}},ae=()=>{X.current&&clearInterval(X.current),e(!1),s(0)},le=(oe,ke)=>{const Me=Rl[oe],ce={id:`${Me.key}-${ke}-${Date.now()}`,note:Me.note,octave:Me.octave,step:ke,velocity:100,length:1};m(ve=>ve.map((Ve,We)=>We===c?{...Ve,notes:[...Ve.notes,ce]}:Ve)),U.current.playNote(Me.note,Me.octave,.8,.25)},Q=oe=>{m(ke=>ke.map((Me,ce)=>ce===c?{...Me,notes:Me.notes.filter(ve=>ve.id!==oe)}:Me))},se=()=>{m(oe=>oe.map((ke,Me)=>Me===c?{...ke,notes:[]}:ke))},xe=(oe,ke=4)=>{oe.forEach((Me,ce)=>{setTimeout(()=>{U.current.playNote(Me,ke,.6,1)},ce*50)})},Pe=oe=>{let ke,Me;T&&M.length>0?(ke=M[O%M.length],Me=L[y].chords[ke],F(ce=>(ce+1)%M.length)):(ke=_.chords[A],Me=L[y].chords[ke],k(ce=>(ce+1)%_.chords.length)),Me.forEach((ce,ve)=>{const Ve=Rl.findIndex(We=>We.note===ce&&We.octave===4);Ve!==-1&&le(Ve,oe+ve*.1)})},Fe=()=>{let oe=0;_.chords.forEach((ke,Me)=>{L[y].chords[ke].forEach((ve,Ve)=>{const We={id:`${ve}-${oe}-${Date.now()}-${Ve}`,note:ve,octave:4,step:oe+Me*8,velocity:100,length:8};m(Ye=>Ye.map((Je,Se)=>Se===c?{...Je,notes:[...Je.notes,We]}:Je))})})};return r.jsx("div",{className:"h-full w-full bg-gray-900 text-white",children:r.jsxs(ye,{className:"h-full bg-gray-800 border-gray-700",children:[r.jsx(_e,{className:"pb-4",children:r.jsxs(Ce,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xl",children:" Vertical Piano Roll"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(te,{onClick:re,className:`${n?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,children:[n?r.jsx(ua,{className:"h-4 w-4"}):r.jsx(sr,{className:"h-4 w-4"}),n?"Pause":"Play"]}),r.jsxs(te,{onClick:ae,variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx(yh,{className:"h-4 w-4"}),"Stop"]}),r.jsxs(te,{onClick:se,variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx(Dy,{className:"h-4 w-4"}),"Clear"]}),r.jsx(te,{onClick:()=>N(!w),variant:w?"default":"outline",className:w?"bg-purple-600 hover:bg-purple-500":"bg-gray-700 hover:bg-gray-600",children:" Chord Mode"}),r.jsx(te,{onClick:Fe,variant:"outline",className:"bg-green-700 hover:bg-green-600",children:"Generate Progression"}),r.jsx(te,{onClick:()=>G(!0),variant:"outline",className:"bg-blue-700 hover:bg-blue-600",children:"+ Add Custom Key"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Key:"}),r.jsx("select",{value:y,onChange:oe=>b(oe.target.value),className:"bg-gray-700 text-white px-2 py-1 rounded text-sm",children:Object.keys(L).map(oe=>r.jsx("option",{value:oe,children:L[oe].name},oe))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Progression:"}),r.jsx("select",{value:_.id,onChange:oe=>{const ke=Rm.find(Me=>Me.id===oe.target.value);ke&&v(ke)},className:"bg-gray-700 text-white px-2 py-1 rounded text-sm",children:Rm.map(oe=>r.jsx("option",{value:oe.id,children:oe.name},oe.id))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"BPM:"}),r.jsx(pe,{value:[i],onValueChange:oe=>a(oe[0]),min:60,max:200,step:1,className:"w-20"}),r.jsx("span",{className:"text-sm w-8",children:i})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Zoom:"}),r.jsx(pe,{value:[d],onValueChange:oe=>h(oe[0]),min:.5,max:3,step:.25,className:"w-20"}),r.jsxs("span",{className:"text-sm w-8",children:[d,"x"]})]})]})]})}),r.jsxs(we,{className:"h-full overflow-hidden",children:[r.jsxs("div",{className:"flex h-full",children:[r.jsx("div",{className:"w-20 bg-gray-800 border-r border-gray-600 overflow-y-auto",children:r.jsx("div",{className:"relative",children:Rl.map((oe,ke)=>r.jsx("button",{className:`
                      w-full text-xs font-mono border-b border-gray-600 hover:bg-gray-600 transition-colors
                      ${oe.isBlack?"bg-gray-900 text-gray-300 border-l-4 border-l-gray-700":"bg-gray-700 text-white"}
                      ${w?"ring-2 ring-purple-500 ring-opacity-50":""}
                    `,style:{height:`${W1}px`},onClick:()=>{try{if(w){const Me=_.chords[A],ce=L[y].chords[Me];xe(ce,oe.octave)}else U.current.playNote(oe.note,oe.octave,.8,.25)}catch(Me){console.error("Audio playback error:",Me)}},children:oe.key},oe.key))})}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"relative bg-gray-900",children:[r.jsx("div",{className:"flex sticky top-0 bg-gray-800 border-b border-gray-600 z-10",children:Array.from({length:Mm},(oe,ke)=>r.jsx("div",{className:`
                        flex items-center justify-center text-xs font-mono border-r border-gray-600
                        ${t===ke?"bg-red-600 text-white":"text-gray-400"}
                        ${ke%4===0?"bg-gray-700":""}
                      `,style:{width:`${G1*d}px`,height:"30px"},children:ke+1},ke))}),r.jsx("div",{className:"relative",children:Rl.map((oe,ke)=>r.jsx("div",{className:"flex border-b border-gray-700",children:Array.from({length:Mm},(Me,ce)=>{const ve=p[c]?.notes.some(We=>We.note===oe.note&&We.octave===oe.octave&&We.step===ce),Ve=p[c]?.notes.find(We=>We.note===oe.note&&We.octave===oe.octave&&We.step===ce);return r.jsx("div",{className:`
                              border-r border-gray-700 cursor-pointer transition-colors relative
                              ${ve?"bg-blue-500 hover:bg-blue-400":"hover:bg-gray-700"}
                              ${ce%4===0?"border-r-gray-500":""}
                              ${t===ce?"bg-red-900 bg-opacity-50":""}
                            `,style:{width:`${G1*d}px`,height:`${W1}px`},onClick:()=>{ve&&Ve?Q(Ve.id):w?Pe(ce):le(ke,ce)},children:ve&&r.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-sm m-0.5 flex items-center justify-center",children:r.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})},ce)})},oe.key))})]})})]}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm font-medium",children:" Chord Progression"}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Key: ",L[y].name]}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Current: ",_.chords[A]," (",A+1,"/",_.chords.length,")"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(te,{onClick:()=>C(!P),variant:P?"default":"outline",className:`text-xs ${P?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:"Scale Lock"})})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-xs text-gray-400 mb-2 block",children:"Circle of Fifths:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:qL.map((oe,ke)=>r.jsx("button",{onClick:()=>b(oe),className:`px-2 py-1 text-xs rounded transition-colors ${y===oe?"bg-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:oe},oe))})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("span",{className:"text-xs text-gray-400 mb-2 block",children:["Current Progression (",_.name,"):"]}),r.jsx("div",{className:"flex gap-2",children:_.chords.map((oe,ke)=>{const Me=L[y].chords[oe];return r.jsxs("button",{onClick:()=>{k(ke),xe(Me)},className:`px-3 py-2 text-sm rounded transition-colors ${A===ke?"bg-green-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:[r.jsx("div",{className:"font-medium",children:oe}),r.jsx("div",{className:"text-xs opacity-75",children:Me.join("-")})]},ke)})})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Track: ",p[c]?.name]}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Notes: ",p[c]?.notes.length||0]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Volume:"}),r.jsx(pe,{value:[p[c]?.volume||80],onValueChange:oe=>{m(ke=>ke.map((Me,ce)=>ce===c?{...Me,volume:oe[0]}:Me))},min:0,max:100,step:1,className:"w-20"}),r.jsxs("span",{className:"text-sm w-8",children:[p[c]?.volume,"%"]})]})]})})]}),W&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-600 w-96",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Custom Key"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Key Name:"}),r.jsx("input",{type:"text",value:K,onChange:oe=>$(oe.target.value),placeholder:"e.g., D Minor, A Harmonic",className:"w-full bg-gray-700 text-white px-3 py-2 rounded border border-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"7 Notes (comma separated):"}),r.jsx("input",{type:"text",value:H,onChange:oe=>ee(oe.target.value),placeholder:"e.g., D, E, F, G, A, Bb, C",className:"w-full bg-gray-700 text-white px-3 py-2 rounded border border-gray-600"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter exactly 7 notes for the scale"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx(te,{onClick:z,className:"bg-blue-600 hover:bg-blue-500",children:"Add Key"}),r.jsx(te,{onClick:()=>G(!1),variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:"Cancel"})]})]})})]})})}function WL(n,e){return x.useReducer((t,s)=>e[t][s]??t,n)}var wx="ScrollArea",[pT,YH]=wn(wx),[GL,ms]=pT(wx),mT=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:i,scrollHideDelay:a=600,...c}=n,[u,d]=x.useState(null),[h,p]=x.useState(null),[m,y]=x.useState(null),[b,_]=x.useState(null),[v,w]=x.useState(null),[N,P]=x.useState(0),[C,A]=x.useState(0),[k,M]=x.useState(!1),[E,T]=x.useState(!1),I=qe(e,F=>d(F)),O=To(i);return r.jsx(GL,{scope:t,type:s,dir:O,scrollHideDelay:a,scrollArea:u,viewport:h,onViewportChange:p,content:m,onContentChange:y,scrollbarX:b,onScrollbarXChange:_,scrollbarXEnabled:k,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:P,onCornerHeightChange:A,children:r.jsx(je.div,{dir:O,...c,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...n.style}})})});mT.displayName=wx;var gT="ScrollAreaViewport",yT=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:s,nonce:i,...a}=n,c=ms(gT,t),u=x.useRef(null),d=qe(e,u,c.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(je.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...n.style},children:r.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});yT.displayName=gT;var cr="ScrollAreaScrollbar",Sx=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=ms(cr,n.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:c}=i,u=n.orientation==="horizontal";return x.useEffect(()=>(u?a(!0):c(!0),()=>{u?a(!1):c(!1)}),[u,a,c]),i.type==="hover"?r.jsx(HL,{...s,ref:e,forceMount:t}):i.type==="scroll"?r.jsx(KL,{...s,ref:e,forceMount:t}):i.type==="auto"?r.jsx(xT,{...s,ref:e,forceMount:t}):i.type==="always"?r.jsx(_x,{...s,ref:e}):null});Sx.displayName=cr;var HL=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=ms(cr,n.__scopeScrollArea),[a,c]=x.useState(!1);return x.useEffect(()=>{const u=i.scrollArea;let d=0;if(u){const h=()=>{window.clearTimeout(d),c(!0)},p=()=>{d=window.setTimeout(()=>c(!1),i.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",p)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(Sn,{present:t||a,children:r.jsx(xT,{"data-state":a?"visible":"hidden",...s,ref:e})})}),KL=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=ms(cr,n.__scopeScrollArea),a=n.orientation==="horizontal",c=Vh(()=>d("SCROLL_END"),100),[u,d]=WL("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,i.scrollHideDelay,d]),x.useEffect(()=>{const h=i.viewport,p=a?"scrollLeft":"scrollTop";if(h){let m=h[p];const y=()=>{const b=h[p];m!==b&&(d("SCROLL"),c()),m=b};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[i.viewport,a,d,c]),r.jsx(Sn,{present:t||u!=="hidden",children:r.jsx(_x,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:me(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:me(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),xT=x.forwardRef((n,e)=>{const t=ms(cr,n.__scopeScrollArea),{forceMount:s,...i}=n,[a,c]=x.useState(!1),u=n.orientation==="horizontal",d=Vh(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;c(u?h:p)}},10);return ho(t.viewport,d),ho(t.content,d),r.jsx(Sn,{present:s||a,children:r.jsx(_x,{"data-state":a?"visible":"hidden",...i,ref:e})})}),_x=x.forwardRef((n,e)=>{const{orientation:t="vertical",...s}=n,i=ms(cr,n.__scopeScrollArea),a=x.useRef(null),c=x.useRef(0),[u,d]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=_T(u.viewport,u.content),p={...s,sizes:u,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:y=>a.current=y,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:y=>c.current=y};function m(y,b){return e8(y,c.current,u,b)}return t==="horizontal"?r.jsx(QL,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollLeft,b=H1(y,u,i.dir);a.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollLeft=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollLeft=m(y,i.dir))}}):t==="vertical"?r.jsx(YL,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const y=i.viewport.scrollTop,b=H1(y,u);a.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:y=>{i.viewport&&(i.viewport.scrollTop=y)},onDragScroll:y=>{i.viewport&&(i.viewport.scrollTop=m(y))}}):null}),QL=x.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...i}=n,a=ms(cr,n.__scopeScrollArea),[c,u]=x.useState(),d=x.useRef(null),h=qe(e,d,a.onScrollbarXChange);return x.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),r.jsx(bT,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bh(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.x),onDragScroll:p=>n.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(a.viewport){const y=a.viewport.scrollLeft+p.deltaX;n.onWheelScroll(y),jT(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:$d(c.paddingLeft),paddingEnd:$d(c.paddingRight)}})}})}),YL=x.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...i}=n,a=ms(cr,n.__scopeScrollArea),[c,u]=x.useState(),d=x.useRef(null),h=qe(e,d,a.onScrollbarYChange);return x.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),r.jsx(bT,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bh(t)+"px",...n.style},onThumbPointerDown:p=>n.onThumbPointerDown(p.y),onDragScroll:p=>n.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(a.viewport){const y=a.viewport.scrollTop+p.deltaY;n.onWheelScroll(y),jT(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:$d(c.paddingTop),paddingEnd:$d(c.paddingBottom)}})}})}),[XL,vT]=pT(cr),bT=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:p,onResize:m,...y}=n,b=ms(cr,t),[_,v]=x.useState(null),w=qe(e,I=>v(I)),N=x.useRef(null),P=x.useRef(""),C=b.viewport,A=s.content-s.viewport,k=Dt(p),M=Dt(d),E=Vh(m,10);function T(I){if(N.current){const O=I.clientX-N.current.left,F=I.clientY-N.current.top;h({x:O,y:F})}}return x.useEffect(()=>{const I=O=>{const F=O.target;_?.contains(F)&&k(O,A)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[C,_,A,k]),x.useEffect(M,[s,M]),ho(_,E),ho(b.content,E),r.jsx(XL,{scope:t,scrollbar:_,hasThumb:i,onThumbChange:Dt(a),onThumbPointerUp:Dt(c),onThumbPositionChange:M,onThumbPointerDown:Dt(u),children:r.jsx(je.div,{...y,ref:w,style:{position:"absolute",...y.style},onPointerDown:me(n.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),N.current=_.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),T(I))}),onPointerMove:me(n.onPointerMove,T),onPointerUp:me(n.onPointerUp,I=>{const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=P.current,b.viewport&&(b.viewport.style.scrollBehavior=""),N.current=null})})})}),Ud="ScrollAreaThumb",wT=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=vT(Ud,n.__scopeScrollArea);return r.jsx(Sn,{present:t||i.hasThumb,children:r.jsx(ZL,{ref:e,...s})})}),ZL=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:s,...i}=n,a=ms(Ud,t),c=vT(Ud,t),{onThumbPositionChange:u}=c,d=qe(e,m=>c.onThumbChange(m)),h=x.useRef(void 0),p=Vh(()=>{h.current&&(h.current(),h.current=void 0)},100);return x.useEffect(()=>{const m=a.viewport;if(m){const y=()=>{if(p(),!h.current){const b=t8(m,u);h.current=b,u()}};return u(),m.addEventListener("scroll",y),()=>m.removeEventListener("scroll",y)}},[a.viewport,p,u]),r.jsx(je.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:me(n.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),_=m.clientX-b.left,v=m.clientY-b.top;c.onThumbPointerDown({x:_,y:v})}),onPointerUp:me(n.onPointerUp,c.onThumbPointerUp)})});wT.displayName=Ud;var Cx="ScrollAreaCorner",ST=x.forwardRef((n,e)=>{const t=ms(Cx,n.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?r.jsx(JL,{...n,ref:e}):null});ST.displayName=Cx;var JL=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,...s}=n,i=ms(Cx,t),[a,c]=x.useState(0),[u,d]=x.useState(0),h=!!(a&&u);return ho(i.scrollbarX,()=>{const p=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(p),d(p)}),ho(i.scrollbarY,()=>{const p=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(p),c(p)}),h?r.jsx(je.div,{...s,ref:e,style:{width:a,height:u,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function $d(n){return n?parseInt(n,10):0}function _T(n,e){const t=n/e;return isNaN(t)?0:t}function Bh(n){const e=_T(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,s=(n.scrollbar.size-t)*e;return Math.max(s,18)}function e8(n,e,t,s="ltr"){const i=Bh(t),a=i/2,c=e||a,u=i-c,d=t.scrollbar.paddingStart+c,h=t.scrollbar.size-t.scrollbar.paddingEnd-u,p=t.content-t.viewport,m=s==="ltr"?[0,p]:[p*-1,0];return CT([d,h],m)(n)}function H1(n,e,t="ltr"){const s=Bh(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,c=e.content-e.viewport,u=a-s,d=t==="ltr"?[0,c]:[c*-1,0],h=Wl(n,d);return CT([0,c],[0,u])(h)}function CT(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function jT(n,e){return n>0&&n<e}var t8=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},s=0;return(function i(){const a={left:n.scrollLeft,top:n.scrollTop},c=t.left!==a.left,u=t.top!==a.top;(c||u)&&e(),t=a,s=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(s)};function Vh(n,e){const t=Dt(n),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function ho(n,e){const t=Dt(e);Ut(()=>{let s=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(s),i.unobserve(n)}}},[n,t])}var NT=mT,n8=yT,s8=ST;const ps=x.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(NT,{ref:s,className:Re("relative overflow-hidden",n),...t,children:[r.jsx(n8,{className:"h-full w-full rounded-[inherit]",children:e}),r.jsx(kT,{}),r.jsx(s8,{})]}));ps.displayName=NT.displayName;const kT=x.forwardRef(({className:n,orientation:e="vertical",...t},s)=>r.jsx(Sx,{ref:s,orientation:e,className:Re("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:r.jsx(wT,{className:"relative flex-1 rounded-full bg-border"})}));kT.displayName=Sx.displayName;var r8="Label",TT=x.forwardRef((n,e)=>r.jsx(je.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));TT.displayName=r8;var PT=TT;const i8=fh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=x.forwardRef(({className:n,...e},t)=>r.jsx(PT,{ref:t,className:Re(i8(),n),...e}));Be.displayName=PT.displayName;function ET(){const[n,e]=x.useState("javascript"),[t,s]=x.useState(`class MelodyGenerator {
    constructor(tempo = 120) {
        this.tempo = tempo;
        this.notes = [];
    }

    addNote(pitch, duration) {
        this.notes.push({
            pitch: pitch,
            duration: duration,
            velocity: Math.random() * 0.5 + 0.5
        });
    }

    generateScale() {
        const scales = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
        for (let i = 0; i < scales.length; i++) {
            this.addNote(scales[i] + '4', 0.25);
        }
    }

    play() {
        console.log('Playing melody...');
        return this.notes;
    }
}`),[i,a]=x.useState(null),[c,u]=x.useState([5]),{toast:d}=$t(),{initialize:h,isInitialized:p,playNote:m}=qn(),y=x.useContext($s),b=Et({mutationFn:async w=>(await yt("POST","/api/code-to-music",w)).json(),onSuccess:w=>{a(w),w.melody&&y.setCurrentMelody(w.melody);const N={kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],bass:[!0,!1,!0,!1,!1,!1,!0,!1,!0,!1,!0,!1,!1,!1,!0,!1],tom:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],openhat:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],crash:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]};y.setCurrentPattern(N),y.setCurrentCodeMusic(w),d({title:"Compilation Complete",description:"Code has been converted to music successfully."})},onError:()=>{d({title:"Compilation Failed",description:"Failed to convert code to music. Please try again.",variant:"destructive"})}}),_=()=>{if(!t.trim()){d({title:"No Code Provided",description:"Please enter some code to convert.",variant:"destructive"});return}b.mutate({code:t,language:n,complexity:c[0]})},v=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Code to Music Compiler"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(te,{onClick:()=>{h(),d({title:"Audio Initialized",description:"The audio engine has started."})},disabled:p,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),p?"Audio Ready":"Start Audio"]}),r.jsx(te,{onClick:_,disabled:b.isPending,className:"bg-studio-accent hover:bg-blue-500",children:b.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Compiling..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-exchange-alt mr-2"}),"Compile to Music"]})}),r.jsxs(te,{onClick:async()=>{if(i&&p)if(console.log("Playing music data:",i),i.melody&&Array.isArray(i.melody)&&i.melody.length>0){let w=0;const N=()=>{if(w<i.melody.length){const C=i.melody[w];if(C&&C.note){const A=C.note.replace(/\d/,""),k=parseInt(C.note.replace(/[A-G]#?/,""))||4,M=C.instrument||"piano";console.log(`Playing note ${C.note} -> ${A}${k} on ${M} for ${C.duration||.5}s`),m(A,k,C.duration||.5,M,.7)}w++,w<i.melody.length&&setTimeout(N,(i.melody[w-1]?.duration||.5)*1e3)}};N(),i.drumPattern&&(y.setCurrentPattern(i.drumPattern),await y.playFullSong());const P=[...new Set(i.melody.map(C=>C.instrument||"piano"))].length;d({title:"Playing Multi-Instrument Arrangement",description:`Playing ${i.melody.length} notes across ${P} instruments plus drums.`})}else console.log("No playable melody found, playing drum pattern only"),await y.playFullSong(),d({title:"Playing Rhythm",description:"Playing drum pattern from compiled code."});else d(i?{title:"Audio Not Ready",description:"Please start audio first.",variant:"destructive"}:{title:"No Music",description:"Please compile code first.",variant:"destructive"})},disabled:!i||!p,className:"bg-studio-success hover:bg-green-500",children:[r.jsx("i",{className:"fas fa-play mr-2"}),"Play Result"]}),r.jsxs(te,{onClick:()=>{a(null),y.setCurrentCodeMusic({}),y.setCurrentMelody([]);const w={kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),bass:Array(16).fill(!1),tom:Array(16).fill(!1),openhat:Array(16).fill(!1),clap:Array(16).fill(!1),crash:Array(16).fill(!1)};y.setCurrentPattern(w),d({title:"Music Cleared",description:"All compiled music data has been cleared."})},disabled:!i,className:"bg-gray-600 hover:bg-gray-500",children:[r.jsx("i",{className:"fas fa-trash mr-2"}),"Clear Music"]})]})]})}),r.jsx(ps,{className:"flex-1 p-6",children:r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Source Code"}),r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{className:"w-32",children:r.jsx(it,{})}),r.jsx(tt,{children:v.map(w=>r.jsx(fe,{value:w.value,children:w.label},w.value))})]})]}),r.jsx(Mr,{value:t,onChange:w=>s(w.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Enter your code here..."}),r.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full"}),r.jsx("span",{children:"Code analysis complete"}),r.jsx("div",{className:"flex-1"}),r.jsx("span",{className:"text-gray-400",children:"25 lines  3 functions  1 class"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{className:"text-sm",children:["AI Complexity: ",c[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(pe,{value:c,onValueChange:u,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Controls how intricate the musical arrangement will be"})]})]})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Generated Music"}),r.jsx("div",{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4",children:i?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"Algorithmic Composition Based on Code Structure"}),r.jsxs("svg",{className:"w-full h-32",viewBox:"0 0 400 120",children:[[20,35,50,65,80].map(w=>r.jsx("line",{x1:"20",y1:w,x2:"380",y2:w,stroke:"#666",strokeWidth:"1"},w)),[{x:50,y:35},{x:90,y:50},{x:130,y:35},{x:170,y:20},{x:210,y:35},{x:250,y:50},{x:290,y:35},{x:330,y:20}].map((w,N)=>r.jsx("circle",{cx:w.x,cy:w.y,r:"4",fill:"hsl(203, 100%, 55%)"},N))]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Classes  Piano"}),r.jsx("div",{className:"w-16 h-2 bg-blue-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Functions  Strings"}),r.jsx("div",{className:"w-12 h-2 bg-green-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Loops  Drums"}),r.jsx("div",{className:"w-8 h-2 bg-yellow-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Variables  Bass"}),r.jsx("div",{className:"w-20 h-2 bg-purple-500 rounded"})]})]})]}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"fas fa-music text-4xl mb-4"}),r.jsx("p",{children:"Generated music will appear here after compilation"})]})})}),r.jsx("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-music text-studio-accent"}),r.jsx("span",{children:"Key: C Major"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-clock text-studio-accent"}),r.jsx("span",{children:"Duration: 32 beats"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-layer-group text-studio-accent"}),r.jsx("span",{children:"4 tracks"})]})]})})]})]})})]})}function AT(){const[n,e]=x.useState("javascript"),[t,s]=x.useState("functional"),[i,a]=x.useState([5]),[c,u]=x.useState(null),[d,h]=x.useState(null),[p,m]=x.useState(null),[y,b]=x.useState(!1),{toast:_}=$t(),{playNote:v,playDrumSound:w,initialize:N,isInitialized:P}=qn(),C=x.useContext($s),A=Et({mutationFn:async I=>{const O=new FormData;return I.audioFile&&O.append("audio",I.audioFile),I.musicData&&O.append("musicData",JSON.stringify(I.musicData)),O.append("language",I.language),O.append("codeStyle",I.codeStyle),O.append("complexity",I.complexity.toString()),(await yt("POST","/api/music-to-code",O)).json()},onSuccess:I=>{u(I.analysis),I.code&&typeof I.code=="object"&&h({language:String(I.code.language||"javascript"),code:String(I.code.code||""),description:String(I.code.description||"Generated code"),framework:String(I.code.framework||"Unknown"),functionality:Array.isArray(I.code.functionality)?I.code.functionality:[]}),_({title:"Music Analysis Complete!",description:`Generated ${I.code?.language||"JavaScript"} code from musical composition.`})},onError:I=>{_({title:"Analysis Failed",description:I.message||"Failed to analyze music and generate code.",variant:"destructive"})}}),k=Et({mutationFn:async()=>(await yt("POST","/api/test-circular-translation",{sourceCode:"CodedSwitch"})).json(),onSuccess:I=>{u(I.originalAnalysis);const O=I.regeneratedCode;h(O&&typeof O=="object"?{language:String(O.language||"javascript"),code:String(O.code||""),description:String(O.description||"Generated from circular translation"),framework:String(O.framework||"Unknown"),functionality:Array.isArray(O.functionality)?O.functionality.map(String):[]}:{language:"javascript",code:String(O||""),description:"Generated from circular translation",framework:"Unknown",functionality:[]}),_({title:"Circular Translation Test Complete!",description:`Match accuracy: ${I.accuracy}%`})}}),M=I=>{m(I)},E=()=>{const I=d?.code||"",O=document.getElementById("code-test-results");if(O){O.innerHTML='<span class="text-yellow-600">Testing code...</span>';try{I.includes("class ")&&I.includes("constructor")?setTimeout(()=>{O.innerHTML=`
            <div class="text-green-600"> Code syntax valid</div>
            <div class="text-green-600"> Class structure detected</div>
            <div class="text-green-600"> Constructor methods found</div>
            <div class="text-green-600"> Functions properly defined</div>
            <div class="text-blue-600 mt-1">Code appears functional and ready to use!</div>
          `},1500):O.innerHTML='<div class="text-orange-600"> Code structure may need refinement</div>'}catch{O.innerHTML='<div class="text-red-600"> Syntax errors detected</div>'}}},T=()=>{if(y){const I={pattern:C.currentPattern,melody:C.currentMelody,lyrics:C.currentLyrics,codeMusic:C.currentCodeMusic};A.mutate({musicData:I,language:n,codeStyle:t,complexity:i[0]})}else p?A.mutate({audioFile:p,language:n,codeStyle:t,complexity:i[0]}):_({title:"No Music Selected",description:"Please upload an audio file or select current composition.",variant:"destructive"})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Music  Code Converter"}),r.jsx("p",{className:"text-muted-foreground",children:"Transform musical compositions into functional code"})]}),r.jsxs(Ao,{defaultValue:"upload",className:"w-full",children:[r.jsxs(pa,{className:"grid w-full grid-cols-3",children:[r.jsx(At,{value:"upload",children:"Upload Music"}),r.jsx(At,{value:"current",children:"Current Composition"}),r.jsx(At,{value:"circular",children:"Circular Test"})]}),r.jsx(Mt,{value:"upload",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Audio File Upload"}),r.jsx(Yt,{children:"Upload an audio file to analyze and convert to code"})]}),r.jsxs(we,{children:[r.jsx("div",{className:"space-y-4",children:r.jsx("input",{type:"file",accept:"audio/*",onChange:I=>{const O=I.target.files?.[0];O&&M(O)},className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-violet-50 file:text-violet-700
                    hover:file:bg-violet-100`})}),p&&r.jsx("div",{className:"mt-2 p-2 bg-muted rounded",children:r.jsxs("span",{className:"text-sm",children:["Selected: ",p.name]})})]})]})}),r.jsx(Mt,{value:"current",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Current Studio Composition"}),r.jsx(Yt,{children:"Use the music you've created in CodedSwitch"})]}),r.jsxs(we,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Pattern:"})," ",C.currentPattern?"Available":"None"]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Melody:"})," ",C.currentMelody?.length||0," notes"]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Lyrics:"})," ",C.currentLyrics?"Available":"None"]})]}),r.jsx(te,{onClick:()=>b(!0),className:"mt-4",disabled:!C.currentPattern&&!C.currentMelody,children:"Use Current Composition"})]})]})}),r.jsx(Mt,{value:"circular",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Circular Translation Test"}),r.jsx(Yt,{children:"Test perfect round-trip: CodedSwitch  Music  CodedSwitch"})]}),r.jsxs(we,{children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"This will take our own source code, convert it to music, then convert that music back to code. Perfect accuracy would mean we get identical code back!"}),r.jsx(te,{onClick:()=>k.mutate(),disabled:k.isPending,className:"bg-gradient-to-r from-purple-500 to-pink-500",children:k.isPending?"Testing...":"Run Circular Test"})]})]})})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Code Generation Settings"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{htmlFor:"language",children:"Target Language"}),r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"javascript",children:"JavaScript"}),r.jsx(fe,{value:"python",children:"Python"}),r.jsx(fe,{value:"react",children:"React Component"}),r.jsx(fe,{value:"css",children:"CSS/HTML"}),r.jsx(fe,{value:"java",children:"Java"}),r.jsx(fe,{value:"csharp",children:"C#"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{htmlFor:"style",children:"Code Style"}),r.jsxs(rt,{value:t,onValueChange:s,children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"functional",children:"Functional"}),r.jsx(fe,{value:"object-oriented",children:"Object-Oriented"}),r.jsx(fe,{value:"procedural",children:"Procedural"}),r.jsx(fe,{value:"declarative",children:"Declarative"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{children:["Code Complexity: ",i[0]]}),r.jsx(pe,{value:i,onValueChange:a,min:1,max:10,step:1,className:"w-full"})]}),r.jsx(te,{onClick:T,disabled:A.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500",children:A.isPending?"Analyzing...":"Convert Music to Code"})]})]}),(c||d)&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c&&r.jsxs(ye,{children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Music Analysis"}),r.jsx(Yt,{children:"Generated musical composition from your code"})]}),r.jsxs(we,{children:[r.jsx(ps,{className:"h-64",children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Tempo:"})," ",String(c.tempo||120)," BPM"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Key:"})," ",String(c.key||"C Major")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Time Signature:"})," ",String(c.timeSignature||"4/4")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Mood:"})," ",String(c.mood||"neutral")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Complexity:"})," ",String(c.complexity||5),"/10"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Structure:"})," ",Array.isArray(c.structure)?c.structure.join("  "):"No structure data"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Instruments:"})," ",Array.isArray(c.instruments)?c.instruments.join(", "):"No instrument data"]})]})}),r.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(te,{variant:"outline",onClick:async()=>{console.log("Testing basic audio..."),P||await N(),v("C",4,1,"piano",.8),w("kick",.8),_({title:"Audio Test",description:"Playing test note and kick drum"})},children:[r.jsx(yi,{className:"h-4 w-4 mr-2"}),"Test Audio"]}),r.jsx(te,{onClick:async()=>{if(console.log(" Starting Play Music - Full composition playback"),!c){console.log(" No music analysis available");return}try{P||(console.log(" Initializing audio system..."),await N(),console.log(" Audio system initialized successfully"),_({title:"Audio System Ready",description:"Professional audio engine initialized"})),console.log(" Testing basic note..."),v("C",4,.5,"piano",.8),setTimeout(async()=>{console.log(" Starting full composition...");const I={Intro:["C","E","G","E"],Verse:["C","G","Am","F","C","G"],Chorus:["F","G","Am","C","F","G","C"],Bridge:["Am","F","C","G","Am"],Outro:["F","C","G","C"]};let O=0;const F=60/(c.tempo||120)*1e3,L=Array.isArray(c.structure)?c.structure:["Verse","Chorus"];for(const V of L){const z=I[V]||["C","E","G","C"];console.log(` Playing section: ${V}`);for(let W=0;W<z.length;W++){const G=z[W],K=O+W*F;setTimeout(()=>{console.log(` Playing note: ${G}`);const $=Array.isArray(c.instruments)?c.instruments:["piano"];$.includes("piano")&&v(G,4,F/1e3,"piano",.7),$.includes("strings")&&v(G,5,F/1e3*1.5,"strings",.5),$.includes("bass")&&v(G,2,F/1e3*2,"bass",.8),!$.includes("piano")&&!$.includes("strings")&&!$.includes("bass")&&v(G,4,F/1e3,"piano",.7)},K)}O+=z.length*F+500}if((c.complexity||5)>=5){const V=60/(c.tempo||120)*1e3/4;console.log(` Adding drum pattern at ${V}ms intervals`);for(let z=0;z<16;z++)setTimeout(()=>{z%4===0&&w("kick",.8),z%4===2&&w("snare",.7),z%2===1&&w("hihat",.4)},z*V)}},600)}catch(I){console.error(" Audio initialization failed:",I),_({title:"Audio Error",description:"Failed to initialize audio. Please check browser permissions.",variant:"destructive"});return}_({title:"Playing Complete Composition",description:`${Array.isArray(c.instruments)?c.instruments.join(", "):"Multiple instruments"} with ${String(c.mood)} beat at ${String(c.tempo)} BPM`})},className:"bg-green-600 hover:bg-green-700",children:" Play Music"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Listen to the musical composition generated from your code"})]})})]})]}),d&&r.jsxs(ye,{children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Generated Code"}),r.jsxs(Yt,{children:[String(d?.framework||"Unknown Framework")," - ",String(d?.description||"Generated code")]})]}),r.jsxs(we,{children:[r.jsx(ps,{className:"h-64",children:r.jsx("pre",{className:"text-xs bg-muted p-4 rounded overflow-x-auto",children:r.jsx("code",{children:typeof d?.code=="string"?d.code:typeof d?.code=="object"?JSON.stringify(d.code,null,2):String(d?.code||"No code generated")})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsx("div",{className:"text-sm font-medium",children:"Functionality:"}),r.jsx("ul",{className:"text-sm text-muted-foreground list-disc pl-4",children:Array.isArray(d.functionality)?d.functionality.map((I,O)=>r.jsx("li",{children:String(I)},O)):r.jsx("li",{children:"No functionality data available"})}),r.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Code Verification"}),r.jsx(te,{onClick:()=>E(),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:" Test Code"})]}),r.jsx("div",{className:"text-xs text-blue-600",children:"Verify that the regenerated code actually works and compiles correctly"}),r.jsx("div",{id:"code-test-results",className:"mt-2 p-2 bg-gray-100 rounded text-xs font-mono min-h-[40px]",children:r.jsx("span",{className:"text-gray-500",children:'Click "Test Code" to verify functionality...'})})]})]})]})]})]})]})}const MT=x.createContext(void 0);function a8({children:n}){const[e,t]=x.useState([]),s=x.useCallback((a,c)=>{const u={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,content:a,timestamp:new Date,source:c};console.log(" Adding AI message via context:",u.id,c),t(d=>[...d,u])},[]),i=x.useCallback(()=>{t([])},[]);return r.jsx(MT.Provider,{value:{addMessage:s,messages:e,clearMessages:i},children:n})}function o8(){const n=x.useContext(MT);if(n===void 0)throw new Error("useAIMessages must be used within an AIMessageProvider");return n}function l8(n,e,t){const s=[];return n.forEach(i=>typeof i!="string"?s.push(i):e[Symbol.split](i).forEach((a,c,u)=>{a!==""&&s.push(a),c<u.length-1&&s.push(t)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function K1(n,e){const t=/\$/g,s="$$$$";let i=[n];if(e==null)return i;for(const a of Object.keys(e))if(a!=="_"){let c=e[a];typeof c=="string"&&(c=t[Symbol.replace](c,s)),i=l8(i,new RegExp(`%\\{${a}\\}`,"g"),c)}return i}const c8=n=>{throw new Error(`missing string: ${n}`)};class RT{locale;constructor(e,{onMissingKey:t=c8}={}){this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(e)?e.forEach(this.#e,this):this.#e(e),this.#t=t}#t;#e(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let s=this.locale.strings[e];if(s==null&&(this.#t(e),s=e),typeof s=="object"){if(t&&typeof t.smart_count<"u"){const a=this.locale.pluralize(t.smart_count);return K1(s[a],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return K1(s,t)}}class IT{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new RT([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Im(n){return n<10?`0${n}`:n.toString()}function _d(){const n=new Date,e=Im(n.getHours()),t=Im(n.getMinutes()),s=Im(n.getSeconds());return`${e}:${t}:${s}`}const u8={debug:()=>{},warn:()=>{},error:(...n)=>console.error(`[Uppy] [${_d()}]`,...n)},d8={debug:(...n)=>console.debug(`[Uppy] [${_d()}]`,...n),warn:(...n)=>console.warn(`[Uppy] [${_d()}]`,...n),error:(...n)=>console.error(`[Uppy] [${_d()}]`,...n)};function OT(n){return typeof n!="object"||n===null||!("nodeType"in n)?!1:n.nodeType===Node.ELEMENT_NODE}function h8(n,e=document){return typeof n=="string"?e.querySelector(n):OT(n)?n:null}function DT(n){for(;n&&!n.dir;)n=n.parentNode;return n?.dir}var dc,Qe,FT,Ui,Q1,LT,zT,BT,jx,Zg,Jg,Gl={},VT=[],f8=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hc=Array.isArray;function Js(n,e){for(var t in e)n[t]=e[t];return n}function Nx(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Hl(n,e,t){var s,i,a,c={};for(a in e)a=="key"?s=e[a]:a=="ref"?i=e[a]:c[a]=e[a];if(arguments.length>2&&(c.children=arguments.length>3?dc.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)c[a]===void 0&&(c[a]=n.defaultProps[a]);return Fl(n,c,s,i,null)}function Fl(n,e,t,s,i){var a={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++FT,__i:-1,__u:0};return i==null&&Qe.vnode!=null&&Qe.vnode(a),a}function p8(){return{current:null}}function Es(n){return n.children}function Vn(n,e){this.props=n,this.context=e}function fo(n,e){if(e==null)return n.__?fo(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?fo(n):null}function UT(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return UT(n)}}function Y1(n){(!n.__d&&(n.__d=!0)&&Ui.push(n)&&!qd.__r++||Q1!=Qe.debounceRendering)&&((Q1=Qe.debounceRendering)||LT)(qd)}function qd(){for(var n,e,t,s,i,a,c,u=1;Ui.length;)Ui.length>u&&Ui.sort(zT),n=Ui.shift(),u=Ui.length,n.__d&&(t=void 0,i=(s=(e=n).__v).__e,a=[],c=[],e.__P&&((t=Js({},s)).__v=s.__v+1,Qe.vnode&&Qe.vnode(t),kx(e.__P,t,s,e.__n,e.__P.namespaceURI,32&s.__u?[i]:null,a,i??fo(s),!!(32&s.__u),c),t.__v=s.__v,t.__.__k[t.__i]=t,WT(a,t,c),t.__e!=i&&UT(t)));qd.__r=0}function $T(n,e,t,s,i,a,c,u,d,h,p){var m,y,b,_,v,w,N,P=s&&s.__k||VT,C=e.length;for(d=m8(t,e,P,d,C),m=0;m<C;m++)(b=t.__k[m])!=null&&(y=b.__i==-1?Gl:P[b.__i]||Gl,b.__i=m,w=kx(n,b,y,i,a,c,u,d,h,p),_=b.__e,b.ref&&y.ref!=b.ref&&(y.ref&&Tx(y.ref,null,b),p.push(b.ref,b.__c||_,b)),v==null&&_!=null&&(v=_),(N=!!(4&b.__u))||y.__k===b.__k?d=qT(b,d,n,N):typeof b.type=="function"&&w!==void 0?d=w:_&&(d=_.nextSibling),b.__u&=-7);return t.__e=v,d}function m8(n,e,t,s,i){var a,c,u,d,h,p=t.length,m=p,y=0;for(n.__k=new Array(i),a=0;a<i;a++)(c=e[a])!=null&&typeof c!="boolean"&&typeof c!="function"?(d=a+y,(c=n.__k[a]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?Fl(null,c,null,null,null):hc(c)?Fl(Es,{children:c},null,null,null):c.constructor==null&&c.__b>0?Fl(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=n,c.__b=n.__b+1,u=null,(h=c.__i=g8(c,t,d,m))!=-1&&(m--,(u=t[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(i>p?y--:i<p&&y++),typeof c.type!="function"&&(c.__u|=4)):h!=d&&(h==d-1?y--:h==d+1?y++:(h>d?y--:y++,c.__u|=4))):n.__k[a]=null;if(m)for(a=0;a<p;a++)(u=t[a])!=null&&(2&u.__u)==0&&(u.__e==s&&(s=fo(u)),HT(u,u));return s}function qT(n,e,t,s){var i,a;if(typeof n.type=="function"){for(i=n.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=n,e=qT(i[a],e,t,s));return e}n.__e!=e&&(s&&(e&&n.type&&!e.parentNode&&(e=fo(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ks(n,e){return e=e||[],n==null||typeof n=="boolean"||(hc(n)?n.some(function(t){ks(t,e)}):e.push(n)),e}function g8(n,e,t,s){var i,a,c,u=n.key,d=n.type,h=e[t],p=h!=null&&(2&h.__u)==0;if(h===null&&n.key==null||p&&u==h.key&&d==h.type)return t;if(s>(p?1:0)){for(i=t-1,a=t+1;i>=0||a<e.length;)if((h=e[c=i>=0?i--:a++])!=null&&(2&h.__u)==0&&u==h.key&&d==h.type)return c}return-1}function X1(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||f8.test(e)?t:t+"px"}function Xu(n,e,t,s,i){var a,c;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||X1(n.style,e,"");if(t)for(e in t)s&&t[e]==s[e]||X1(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(BT,"$1")),c=e.toLowerCase(),e=c in n||e=="onFocusOut"||e=="onFocusIn"?c.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=t,t?s?t.u=s.u:(t.u=jx,n.addEventListener(e,a?Jg:Zg,a)):n.removeEventListener(e,a?Jg:Zg,a);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Z1(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=jx++;else if(e.t<t.u)return;return t(Qe.event?Qe.event(e):e)}}}function kx(n,e,t,s,i,a,c,u,d,h){var p,m,y,b,_,v,w,N,P,C,A,k,M,E,T,I,O,F=e.type;if(e.constructor!=null)return null;128&t.__u&&(d=!!(32&t.__u),a=[u=e.__e=t.__e]),(p=Qe.__b)&&p(e);e:if(typeof F=="function")try{if(N=e.props,P="prototype"in F&&F.prototype.render,C=(p=F.contextType)&&s[p.__c],A=p?C?C.props.value:p.__:s,t.__c?w=(m=e.__c=t.__c).__=m.__E:(P?e.__c=m=new F(N,A):(e.__c=m=new Vn(N,A),m.constructor=F,m.render=x8),C&&C.sub(m),m.props=N,m.state||(m.state={}),m.context=A,m.__n=s,y=m.__d=!0,m.__h=[],m._sb=[]),P&&m.__s==null&&(m.__s=m.state),P&&F.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Js({},m.__s)),Js(m.__s,F.getDerivedStateFromProps(N,m.__s))),b=m.props,_=m.state,m.__v=e,y)P&&F.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),P&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(P&&F.getDerivedStateFromProps==null&&N!==b&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(N,A),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(N,m.__s,A)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(m.props=N,m.state=m.__s,m.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(L){L&&(L.__=e)}),k=0;k<m._sb.length;k++)m.__h.push(m._sb[k]);m._sb=[],m.__h.length&&c.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(N,m.__s,A),P&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(b,_,v)})}if(m.context=A,m.props=N,m.__P=n,m.__e=!1,M=Qe.__r,E=0,P){for(m.state=m.__s,m.__d=!1,M&&M(e),p=m.render(m.props,m.state,m.context),T=0;T<m._sb.length;T++)m.__h.push(m._sb[T]);m._sb=[]}else do m.__d=!1,M&&M(e),p=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++E<25);m.state=m.__s,m.getChildContext!=null&&(s=Js(Js({},s),m.getChildContext())),P&&!y&&m.getSnapshotBeforeUpdate!=null&&(v=m.getSnapshotBeforeUpdate(b,_)),I=p,p!=null&&p.type===Es&&p.key==null&&(I=GT(p.props.children)),u=$T(n,hc(I)?I:[I],e,t,s,i,a,c,u,d,h),m.base=e.__e,e.__u&=-161,m.__h.length&&c.push(m),w&&(m.__E=m.__=null)}catch(L){if(e.__v=null,d||a!=null)if(L.then){for(e.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,e.__e=u}else{for(O=a.length;O--;)Nx(a[O]);ey(e)}else e.__e=t.__e,e.__k=t.__k,L.then||ey(e);Qe.__e(L,e,t)}else a==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):u=e.__e=y8(t.__e,e,t,s,i,a,c,d,h);return(p=Qe.diffed)&&p(e),128&e.__u?void 0:u}function ey(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(ey)}function WT(n,e,t){for(var s=0;s<t.length;s++)Tx(t[s],t[++s],t[++s]);Qe.__c&&Qe.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(a){a.call(i)})}catch(a){Qe.__e(a,i.__v)}})}function GT(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:hc(n)?n.map(GT):Js({},n)}function y8(n,e,t,s,i,a,c,u,d){var h,p,m,y,b,_,v,w=t.props,N=e.props,P=e.type;if(P=="svg"?i="http://www.w3.org/2000/svg":P=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(h=0;h<a.length;h++)if((b=a[h])&&"setAttribute"in b==!!P&&(P?b.localName==P:b.nodeType==3)){n=b,a[h]=null;break}}if(n==null){if(P==null)return document.createTextNode(N);n=document.createElementNS(i,P,N.is&&N),u&&(Qe.__m&&Qe.__m(e,a),u=!1),a=null}if(P==null)w===N||u&&n.data==N||(n.data=N);else{if(a=a&&dc.call(n.childNodes),w=t.props||Gl,!u&&a!=null)for(w={},h=0;h<n.attributes.length;h++)w[(b=n.attributes[h]).name]=b.value;for(h in w)if(b=w[h],h!="children"){if(h=="dangerouslySetInnerHTML")m=b;else if(!(h in N)){if(h=="value"&&"defaultValue"in N||h=="checked"&&"defaultChecked"in N)continue;Xu(n,h,null,b,i)}}for(h in N)b=N[h],h=="children"?y=b:h=="dangerouslySetInnerHTML"?p=b:h=="value"?_=b:h=="checked"?v=b:u&&typeof b!="function"||w[h]===b||Xu(n,h,b,w[h],i);if(p)u||m&&(p.__html==m.__html||p.__html==n.innerHTML)||(n.innerHTML=p.__html),e.__k=[];else if(m&&(n.innerHTML=""),$T(e.type=="template"?n.content:n,hc(y)?y:[y],e,t,s,P=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,c,a?a[0]:t.__k&&fo(t,0),u,d),a!=null)for(h=a.length;h--;)Nx(a[h]);u||(h="value",P=="progress"&&_==null?n.removeAttribute("value"):_!=null&&(_!==n[h]||P=="progress"&&!_||P=="option"&&_!=w[h])&&Xu(n,h,_,w[h],i),h="checked",v!=null&&v!=n[h]&&Xu(n,h,v,w[h],i))}return n}function Tx(n,e,t){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&e==null||(n.__u=n(e))}else n.current=e}catch(i){Qe.__e(i,t)}}function HT(n,e,t){var s,i;if(Qe.unmount&&Qe.unmount(n),(s=n.ref)&&(s.current&&s.current!=n.__e||Tx(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){Qe.__e(a,e)}s.base=s.__P=null}if(s=n.__k)for(i=0;i<s.length;i++)s[i]&&HT(s[i],e,t||typeof n.type!="function");t||Nx(n.__e),n.__c=n.__=n.__e=void 0}function x8(n,e,t){return this.constructor(n,t)}function v8(n,e,t){var s,i,a,c;e==document&&(e=document.documentElement),Qe.__&&Qe.__(n,e),i=(s=!1)?null:e.__k,a=[],c=[],kx(e,n=e.__k=Hl(Es,null,[n]),i||Gl,Gl,e.namespaceURI,i?null:e.firstChild?dc.call(e.childNodes):null,a,i?i.__e:e.firstChild,s,c),WT(a,n,c)}function KT(n,e,t){var s,i,a,c,u=Js({},n.props);for(a in n.type&&n.type.defaultProps&&(c=n.type.defaultProps),e)a=="key"?s=e[a]:a=="ref"?i=e[a]:u[a]=e[a]===void 0&&c!=null?c[a]:e[a];return arguments.length>2&&(u.children=arguments.length>3?dc.call(arguments,2):t),Fl(n.type,u,s||n.key,i||n.ref,null)}dc=VT.slice,Qe={__e:function(n,e,t,s){for(var i,a,c;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(n)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,s||{}),c=i.__d),c)return i.__E=i}catch(u){n=u}throw n}},FT=0,Vn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Js({},this.state),typeof n=="function"&&(n=n(Js({},t),this.props)),n&&Js(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Y1(this))},Vn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Y1(this))},Vn.prototype.render=Es,Ui=[],LT=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zT=function(n,e){return n.__v.__b-e.__v.__b},qd.__r=0,BT=/(PointerCapture)$|Capture$/i,jx=0,Zg=Z1(!1),Jg=Z1(!0);var Kl,Vt,Om,J1,Ql=0,QT=[],Qt=Qe,eS=Qt.__b,tS=Qt.__r,nS=Qt.diffed,sS=Qt.__c,rS=Qt.unmount,iS=Qt.__;function Px(n,e){Qt.__h&&Qt.__h(Vt,n,Ql||e),Ql=0;var t=Vt.__H||(Vt.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function Wd(n){return Ql=1,b8(XT,n)}function b8(n,e,t){var s=Px(Kl++,2);if(s.t=n,!s.__c&&(s.__=[t?t(e):XT(void 0,e),function(u){var d=s.__N?s.__N[0]:s.__[0],h=s.t(d,u);d!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=Vt,!Vt.__f)){var i=function(u,d,h){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(y){return!!y.__c});if(p.every(function(y){return!y.__N}))return!a||a.call(this,u,d,h);var m=s.__c.props!==u;return p.forEach(function(y){if(y.__N){var b=y.__[0];y.__=y.__N,y.__N=void 0,b!==y.__[0]&&(m=!0)}}),a&&a.call(this,u,d,h)||m};Vt.__f=!0;var a=Vt.shouldComponentUpdate,c=Vt.componentWillUpdate;Vt.componentWillUpdate=function(u,d,h){if(this.__e){var p=a;a=void 0,i(u,d,h),a=p}c&&c.call(this,u,d,h)},Vt.shouldComponentUpdate=i}return s.__N||s.__}function ty(n,e){var t=Px(Kl++,3);!Qt.__s&&YT(t.__H,e)&&(t.__=n,t.u=e,Vt.__H.__h.push(t))}function Cd(n){return Ql=5,Ex(function(){return{current:n}},[])}function Ex(n,e){var t=Px(Kl++,7);return YT(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function w8(n,e){return Ql=8,Ex(function(){return n},e)}function S8(){for(var n;n=QT.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(jd),n.__H.__h.forEach(ny),n.__H.__h=[]}catch(e){n.__H.__h=[],Qt.__e(e,n.__v)}}Qt.__b=function(n){Vt=null,eS&&eS(n)},Qt.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),iS&&iS(n,e)},Qt.__r=function(n){tS&&tS(n),Kl=0;var e=(Vt=n.__c).__H;e&&(Om===Vt?(e.__h=[],Vt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(jd),e.__h.forEach(ny),e.__h=[],Kl=0)),Om=Vt},Qt.diffed=function(n){nS&&nS(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(QT.push(e)!==1&&J1===Qt.requestAnimationFrame||((J1=Qt.requestAnimationFrame)||_8)(S8)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Om=Vt=null},Qt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(jd),t.__h=t.__h.filter(function(s){return!s.__||ny(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Qt.__e(s,t.__v)}}),sS&&sS(n,e)},Qt.unmount=function(n){rS&&rS(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{jd(s)}catch(i){e=i}}),t.__H=void 0,e&&Qt.__e(e,t.__v))};var aS=typeof requestAnimationFrame=="function";function _8(n){var e,t=function(){clearTimeout(s),aS&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,35);aS&&(e=requestAnimationFrame(t))}function jd(n){var e=Vt,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Vt=e}function ny(n){var e=Vt;n.__c=n.__(),Vt=e}function YT(n,e){return!n||n.length!==e.length||e.some(function(t,s){return t!==n[s]})}function XT(n,e){return typeof e=="function"?e(n):e}function C8(n,e){for(var t in e)n[t]=e[t];return n}function oS(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function lS(n,e){this.props=n,this.context=e}(lS.prototype=new Vn).isPureReactComponent=!0,lS.prototype.shouldComponentUpdate=function(n,e){return oS(this.props,n)||oS(this.state,e)};var cS=Qe.__b;Qe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),cS&&cS(n)};var j8=Qe.__e;Qe.__e=function(n,e,t,s){if(n.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}j8(n,e,t,s)};var uS=Qe.unmount;function ZT(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=C8({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return ZT(s,e,t)})),n}function JT(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return JT(s,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function Dm(){this.__u=0,this.o=null,this.__b=null}function eP(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Zu(){this.i=null,this.l=null}Qe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),uS&&uS(n)},(Dm.prototype=new Vn).__c=function(n,e){var t=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(t);var i=eP(s.__v),a=!1,c=function(){a||(a=!0,t.__R=null,i?i(u):u())};t.__R=c;var u=function(){if(!--s.__u){if(s.state.__a){var d=s.state.__a;s.__v.__k[0]=JT(d,d.__c.__P,d.__c.__O)}var h;for(s.setState({__a:s.__b=null});h=s.o.pop();)h.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(c,c)},Dm.prototype.componentWillUnmount=function(){this.o=[]},Dm.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=ZT(this.__b,t,s.__O=s.__P)}this.__b=null}var i=e.__a&&Hl(Es,null,n.fallback);return i&&(i.__u&=-33),[Hl(Es,null,e.__a?null:n.children),i]};var dS=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(Zu.prototype=new Vn).__a=function(n){var e=this,t=eP(e.__v),s=e.l.get(n);return s[0]++,function(i){var a=function(){e.props.revealOrder?(s.push(i),dS(e,n,s)):i()};t?t(a):a()}},Zu.prototype.render=function(n){this.i=null,this.l=new Map;var e=ks(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},Zu.prototype.componentDidUpdate=Zu.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){dS(n,t,e)})};var N8=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,k8=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,T8=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,P8=/[A-Z0-9]/g,E8=typeof document<"u",A8=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function hS(n,e,t){return e.__k==null&&(e.textContent=""),v8(n,e),typeof t=="function"&&t(),n?n.__c:null}Vn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Vn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var fS=Qe.event;function M8(){}function R8(){return this.cancelBubble}function I8(){return this.defaultPrevented}Qe.event=function(n){return fS&&(n=fS(n)),n.persist=M8,n.isPropagationStopped=R8,n.isDefaultPrevented=I8,n.nativeEvent=n};var O8={enumerable:!1,configurable:!0,get:function(){return this.class}},pS=Qe.vnode;Qe.vnode=function(n){typeof n.type=="string"&&(function(e){var t=e.props,s=e.type,i={},a=s.indexOf("-")===-1;for(var c in t){var u=t[c];if(!(c==="value"&&"defaultValue"in t&&u==null||E8&&c==="children"&&s==="noscript"||c==="class"||c==="className")){var d=c.toLowerCase();c==="defaultValue"&&"value"in t&&t.value==null?c="value":c==="download"&&u===!0?u="":d==="translate"&&u==="no"?u=!1:d[0]==="o"&&d[1]==="n"?d==="ondoubleclick"?c="ondblclick":d!=="onchange"||s!=="input"&&s!=="textarea"||A8(t.type)?d==="onfocus"?c="onfocusin":d==="onblur"?c="onfocusout":T8.test(c)&&(c=d):d=c="oninput":a&&k8.test(c)?c=c.replace(P8,"-$&").toLowerCase():u===null&&(u=void 0),d==="oninput"&&i[c=d]&&(c="oninputCapture"),i[c]=u}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ks(t.children).forEach(function(h){h.props.selected=i.value.indexOf(h.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=ks(t.children).forEach(function(h){h.props.selected=i.multiple?i.defaultValue.indexOf(h.props.value)!=-1:i.defaultValue==h.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",O8)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i})(n),n.$$typeof=N8,pS&&pS(n)};var mS=Qe.__r;Qe.__r=function(n){mS&&mS(n),n.__c};var gS=Qe.diffed;Qe.diffed=function(n){gS&&gS(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function D8(n){let e=null,t;return(...s)=>(t=s,e||(e=Promise.resolve().then(()=>(e=null,n(...t)))),e)}class oa extends IT{#t;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof oa||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:oa}}));else if(typeof e=="function"){const s=e;this.uppy.iteratePlugins(i=>{i instanceof s&&(t=i)})}return t}mount(e,t){const s=t.id,i=h8(e);if(i){this.isTargetDOMEl=!0;const u=document.createElement("div");return u.classList.add("uppy-Root"),this.#t=D8(d=>{this.uppy.getPlugin(this.id)&&(hS(this.render(d,u),u),this.afterUpdate())}),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),hS(this.render(this.uppy.getState(),u),u),this.el=u,i.appendChild(u),u.dir=this.opts.direction||DT(u)||"ltr",this.onMount(),this.el}const a=this.getTargetPlugin(e);if(a)return this.uppy.log(`Installing ${s} to ${a.id}`),this.parent=a,this.el=a.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let c=`Invalid target option given to ${s}.`;throw typeof e=="function"?c+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":c+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#t?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}}const F8="4.3.2",L8={version:F8};class z8{static VERSION=L8.version;state={};#t=new Set;getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,this.#e(t,s,e)}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}#e(...e){this.#t.forEach(t=>{t(...e)})}}function tP(n){const e=n.lastIndexOf(".");return e===-1||e===n.length-1?{name:n,extension:void 0}:{name:n.slice(0,e),extension:n.slice(e+1)}}const yS={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function nP(n){if(n.type)return n.type;const e=n.name?tP(n.name).extension?.toLowerCase():null;return e&&e in yS?yS[e]:"application/octet-stream"}function B8(n){return n.charCodeAt(0).toString(32)}function xS(n){let e="";return n.replace(/[^A-Z0-9]/gi,t=>(e+=`-${B8(t)}`,"/"))+e}function V8(n,e){let t=e||"uppy";return typeof n.name=="string"&&(t+=`-${xS(n.name.toLowerCase())}`),n.type!==void 0&&(t+=`-${n.type}`),n.meta&&typeof n.meta.relativePath=="string"&&(t+=`-${xS(n.meta.relativePath.toLowerCase())}`),n.data.size!==void 0&&(t+=`-${n.data.size}`),n.data.lastModified!==void 0&&(t+=`-${n.data.lastModified}`),t}function U8(n){return!n.isRemote||!n.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(n.remote.provider)}function $8(n,e){if(U8(n))return n.id;const t=nP(n);return V8({...n,type:t},e)}var Fm,vS;function Ax(){if(vS)return Fm;vS=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Fm=n,Fm}var Lm,bS;function q8(){if(bS)return Lm;bS=1;var n=typeof zu=="object"&&zu&&zu.Object===Object&&zu;return Lm=n,Lm}var zm,wS;function sP(){if(wS)return zm;wS=1;var n=q8(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return zm=t,zm}var Bm,SS;function W8(){if(SS)return Bm;SS=1;var n=sP(),e=function(){return n.Date.now()};return Bm=e,Bm}var Vm,_S;function G8(){if(_S)return Vm;_S=1;var n=/\s/;function e(t){for(var s=t.length;s--&&n.test(t.charAt(s)););return s}return Vm=e,Vm}var Um,CS;function H8(){if(CS)return Um;CS=1;var n=G8(),e=/^\s+/;function t(s){return s&&s.slice(0,n(s)+1).replace(e,"")}return Um=t,Um}var $m,jS;function rP(){if(jS)return $m;jS=1;var n=sP(),e=n.Symbol;return $m=e,$m}var qm,NS;function K8(){if(NS)return qm;NS=1;var n=rP(),e=Object.prototype,t=e.hasOwnProperty,s=e.toString,i=n?n.toStringTag:void 0;function a(c){var u=t.call(c,i),d=c[i];try{c[i]=void 0;var h=!0}catch{}var p=s.call(c);return h&&(u?c[i]=d:delete c[i]),p}return qm=a,qm}var Wm,kS;function Q8(){if(kS)return Wm;kS=1;var n=Object.prototype,e=n.toString;function t(s){return e.call(s)}return Wm=t,Wm}var Gm,TS;function Y8(){if(TS)return Gm;TS=1;var n=rP(),e=K8(),t=Q8(),s="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function c(u){return u==null?u===void 0?i:s:a&&a in Object(u)?e(u):t(u)}return Gm=c,Gm}var Hm,PS;function X8(){if(PS)return Hm;PS=1;function n(e){return e!=null&&typeof e=="object"}return Hm=n,Hm}var Km,ES;function Z8(){if(ES)return Km;ES=1;var n=Y8(),e=X8(),t="[object Symbol]";function s(i){return typeof i=="symbol"||e(i)&&n(i)==t}return Km=s,Km}var Qm,AS;function J8(){if(AS)return Qm;AS=1;var n=H8(),e=Ax(),t=Z8(),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;function d(h){if(typeof h=="number")return h;if(t(h))return s;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=n(h);var m=a.test(h);return m||c.test(h)?u(h.slice(2),m?2:8):i.test(h)?s:+h}return Qm=d,Qm}var Ym,MS;function iP(){if(MS)return Ym;MS=1;var n=Ax(),e=W8(),t=J8(),s="Expected a function",i=Math.max,a=Math.min;function c(u,d,h){var p,m,y,b,_,v,w=0,N=!1,P=!1,C=!0;if(typeof u!="function")throw new TypeError(s);d=t(d)||0,n(h)&&(N=!!h.leading,P="maxWait"in h,y=P?i(t(h.maxWait)||0,d):y,C="trailing"in h?!!h.trailing:C);function A(V){var z=p,W=m;return p=m=void 0,w=V,b=u.apply(W,z),b}function k(V){return w=V,_=setTimeout(T,d),N?A(V):b}function M(V){var z=V-v,W=V-w,G=d-z;return P?a(G,y-W):G}function E(V){var z=V-v,W=V-w;return v===void 0||z>=d||z<0||P&&W>=y}function T(){var V=e();if(E(V))return I(V);_=setTimeout(T,M(V))}function I(V){return _=void 0,C&&p?A(V):(p=m=void 0,b)}function O(){_!==void 0&&clearTimeout(_),w=0,p=v=m=_=void 0}function F(){return _===void 0?b:I(e())}function L(){var V=e(),z=E(V);if(p=arguments,m=this,v=V,z){if(_===void 0)return k(v);if(P)return clearTimeout(_),_=setTimeout(T,d),A(v)}return _===void 0&&(_=setTimeout(T,d)),b}return L.cancel=O,L.flush=F,L}return Ym=c,Ym}var Xm,RS;function ez(){if(RS)return Xm;RS=1;var n=iP(),e=Ax(),t="Expected a function";function s(i,a,c){var u=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(c)&&(u="leading"in c?!!c.leading:u,d="trailing"in c?!!c.trailing:d),n(i,a,{leading:u,maxWait:a,trailing:d})}return Xm=s,Xm}var tz=ez();const nz=Ls(tz);var Zm,IS;function sz(){return IS||(IS=1,Zm=function(){var e={},t=e._fns={};e.emit=function(c,u,d,h,p,m,y){var b=s(c);b.length&&i(c,b,[u,d,h,p,m,y])},e.on=function(c,u){t[c]||(t[c]=[]),t[c].push(u)},e.once=function(c,u){function d(){u.apply(this,arguments),e.off(c,d)}this.on(c,d)},e.off=function(c,u){var d=[];if(c&&u){var h=this._fns[c],p=0,m=h?h.length:0;for(p;p<m;p++)h[p]!==u&&d.push(h[p])}d.length?this._fns[c]=d:delete this._fns[c]};function s(a){var c=t[a]?t[a]:[],u=a.indexOf(":"),d=u===-1?[a]:[a.substring(0,u),a.substring(u+1)],h=Object.keys(t),p=0,m=h.length;for(p;p<m;p++){var y=h[p];if(y==="*"&&(c=c.concat(t[y])),d.length===2&&d[0]===y){c=c.concat(t[y]);break}}return c}function i(a,c,u){var d=0,h=c.length;for(d;d<h&&c[d];d++)c[d].event=a,c[d].apply(c[d],u)}return e}),Zm}var rz=sz();const iz=Ls(rz);let az="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Mx=(n=21)=>{let e="",t=n|0;for(;t--;)e+=az[Math.random()*64|0];return e};const oz="4.5.3",lz={version:oz};function cz(n,e){return e.name?e.name:n.split("/")[0]==="image"?`${n.split("/")[0]}.${n.split("/")[1]}`:"noname"}const uz={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var Jm,OS;function dz(){return OS||(OS=1,Jm=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let s=Math.abs(e);if(t&&(s=-s),s===0)return"0 B";const i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(s)/Math.log(1024)),i.length-1),c=Number(s/1024**a),u=i[a];return`${c>=10||c%1===0?Math.round(c):c.toFixed(1)} ${u}`}),Jm}var hz=dz();const qi=Ls(hz);var eg,DS;function fz(){if(DS)return eg;DS=1;function n(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}return n.prototype.match=function(e){var t=!0,s=this.parts,i,a=s.length,c;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(c=(e||"").split(this.separator),i=0;t&&i<a;i++)s[i]!=="*"&&(i<c.length?t=s[i]===c[i]:t=!1);t=t&&c}else if(typeof e.splice=="function")for(t=[],i=e.length;i--;)this.match(e[i])&&(t[t.length]=e[i]);else if(typeof e=="object"){t={};for(var u in e)this.match(u)&&(t[u]=e[u])}return t},eg=function(e,t,s){var i=new n(e,s||/[\/\.]/);return typeof t<"u"?i.match(t):i},eg}var tg,FS;function pz(){if(FS)return tg;FS=1;var n=fz(),e=/[\/\+\.]/;return tg=function(t,s){function i(a){var c=n(a,t,e);return c&&c.length>=2}return s?i(s.split(";")[0]):i},tg}var mz=pz();const gz=Ls(mz),yz={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class js extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0}class xz{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{const s=e();if(s.restrictions?.allowedFileTypes!=null&&!Array.isArray(s.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return s}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:s,maxNumberOfFiles:i}=this.getOpts().restrictions;if(i&&e.filter(c=>!c.isGhost).length+t.length>i)throw new js(`${this.getI18n()("youCanOnlyUploadX",{smart_count:i})}`);if(s){const a=[...e,...t].reduce((c,u)=>c+(u.size??0),0);if(a>s)throw new js(this.getI18n()("aggregateExceedsSize",{sizeAllowed:qi(s),size:qi(a)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:s,allowedFileTypes:i}=this.getOpts().restrictions;if(i&&!i.some(c=>c.includes("/")?e.type?gz(e.type.replace(/;.*?$/,""),c):!1:c[0]==="."&&e.extension?e.extension.toLowerCase()===c.slice(1).toLowerCase():!1)){const c=i.join(", ");throw new js(this.getI18n()("youCanOnlyUploadFileTypes",{types:c}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new js(this.getI18n()("exceedsSize",{size:qi(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(s&&e.size!=null&&e.size<s)throw new js(this.getI18n()("inferiorSize",{size:qi(s)}),{file:e})}validate(e,t){t.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new js(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new js(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:s}=this.getOpts().restrictions,i=[];for(const a of s)(!Object.hasOwn(e.meta,a)||e.meta[a]==="")&&i.push(a);return{missingFields:i,error:t}}}function vz(n){if(n==null&&typeof navigator<"u"&&(n=navigator.userAgent),!n)return!0;const e=/Edge\/(\d+\.\d+)/.exec(n);if(!e)return!0;const s=e[1].split(".",2),i=parseInt(s[0],10),a=parseInt(s[1],10);return i<15||i===15&&a<15063||i>18||i===18&&a>=18218}const Ju={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};class Rx{static VERSION=lz.version;#t=Object.create(null);#e;#n;#s=iz();#r=new Set;#a=new Set;#o=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=uz;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:yz,meta:{},onBeforeFileAdded:(i,a)=>!Object.hasOwn(a,i.id),onBeforeUpload:i=>i,store:new z8,logger:u8,infoTimeout:5e3},s={...t,...e};this.opts={...s,restrictions:{...t.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=d8),this.log(`Using Core v${Rx.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Ju,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:vz(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#e=new xz(()=>this.opts,()=>this.i18n),this.#n=this.store.subscribe((i,a,c)=>{this.emit("state-update",i,a,c),this.updateAll(a)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#_()}emit(e,...t){this.#s.emit(e,...t)}on(e,t){return this.#s.on(e,t),this}once(e,t){return this.#s.once(e,t),this}off(e,t){return this.#s.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([s,i])=>[s,{...t[s],...i}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Cant set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),t=new RT([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s=Object.create(null);Object.keys(t).forEach(i=>{s[i]={...t[i],progress:{...t[i].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:s,...Ju})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Ju,files:{}})}addPreProcessor(e){this.#r.add(e)}removePreProcessor(e){return this.#r.delete(e)}addPostProcessor(e){this.#o.add(e)}removePostProcessor(e){return this.#o.delete(e)}addUploader(e){this.#a.add(e)}removeUploader(e){return this.#a.delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(i=>{s[i]={...s[i],meta:{...s[i].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const i={...s[e].meta,...t};s[e]={...s[e],meta:i},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),i=Object.values(e),a=[],c=[],u=[],d=[],h=[],p=[],m=[],y=[],b=[];for(const _ of i){const{progress:v}=_;!v.uploadComplete&&v.uploadStarted&&(a.push(_),_.isPaused||y.push(_)),v.uploadStarted||c.push(_),(v.uploadStarted||v.preprocess||v.postprocess)&&u.push(_),v.uploadStarted&&d.push(_),_.isPaused&&h.push(_),v.uploadComplete&&p.push(_),_.error&&m.push(_),(v.preprocess||v.postprocess)&&b.push(_)}return{newFiles:c,startedFiles:u,uploadStartedFiles:d,pausedFiles:h,completeFiles:p,erroredFiles:m,inProgressFiles:a,inProgressNotPausedFiles:y,processingFiles:b,isUploadStarted:d.length>0,isAllComplete:t===100&&p.length===i.length&&b.length===0,isAllErrored:!!s&&m.length===i.length,isAllPaused:a.length!==0&&h.length===a.length,isUploadInProgress:a.length>0,isSomeGhost:i.some(_=>_.isGhost)}}#i(e){for(const c of e)c.isRestriction?this.emit("restriction-failed",c.file,c):this.emit("error",c,c.file),this.log(c,"warning");const t=e.filter(c=>c.isUserFacing),s=4,i=t.slice(0,s),a=t.slice(s);i.forEach(({message:c,details:u=""})=>{this.info({message:c,details:u},"error",this.opts.infoTimeout)}),a.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:a.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#e.validate(t,[e])}catch(s){return s}return null}validateSingleFile(e){try{this.#e.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{this.#e.validateAggregateRestrictions(t,e)}catch(s){return s.message}return null}#c(e){const{missingFields:t,error:s}=this.#e.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:s.message}),this.log(s.message),this.emit("restriction-failed",e,s),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#f(e){let t=!0;for(const s of Object.values(e))this.#c(s)||(t=!1);return t}#u(e){const{allowNewUpload:t}=this.getState();if(t===!1){const s=new js(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#i([s]),s}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}#d(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,s=nP(t),i=cz(s,t),a=tP(i).extension,c=$8(t,this.getID()),u=t.meta||{};u.name=i,u.type=s;const d=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:c,name:i,extension:a||"",meta:{...this.getState().meta,...u},type:s,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}#l(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#h(e){let{files:t}=this.getState(),s={...t};const i=[],a=[];for(const c of e)try{let u=this.#d(c);const d=t[u.id]?.isGhost;d&&(u={...t[u.id],isGhost:!1,data:c.data},this.log(`Replaced the blob in the restored ghost file: ${u.name}, ${u.id}`));const h=this.opts.onBeforeFileAdded(u,s);if(t=this.getState().files,s={...t,...s},!h&&this.checkIfFileAlreadyExists(u.id))throw new js(this.i18n("noDuplicates",{fileName:u.name??this.i18n("unnamed")}),{file:c});if(h===!1&&!d)throw new js("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:c});typeof h=="object"&&h!==null&&(u=h),this.#e.validateSingleFile(u),s[u.id]=u,i.push(u)}catch(u){a.push(u)}try{this.#e.validateAggregateRestrictions(Object.values(t),i)}catch(c){return a.push(c),{nextFilesState:t,validFilesToAdd:[],errors:a}}return{nextFilesState:s,validFilesToAdd:i,errors:a}}addFile(e){this.#u(e);const{nextFilesState:t,validFilesToAdd:s,errors:i}=this.#h([e]),a=i.filter(u=>u.isRestriction);if(this.#i(a),i.length>0)throw i[0];this.setState({files:t});const[c]=s;return this.emit("file-added",c),this.emit("files-added",s),this.log(`Added file: ${c.name}, ${c.id}, mime type: ${c.type}`),this.#l(),c.id}addFiles(e){this.#u();const{nextFilesState:t,validFilesToAdd:s,errors:i}=this.#h(e),a=i.filter(u=>u.isRestriction);this.#i(a);const c=i.filter(u=>!u.isRestriction);if(c.length>0){let u=`Multiple errors occurred while adding files:
`;if(c.forEach(d=>{u+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:c.length}),details:u},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(c,u);{const d=new Error(u);throw d.errors=c,d}}this.setState({files:t}),s.forEach(u=>{this.emit("file-added",u)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(u=>{this.log(`Added file: ${u.name}
 id: ${u.id}
 type: ${u.type}`)}),s.length>0&&this.#l()}removeFiles(e){const{files:t,currentUploads:s}=this.getState(),i={...t},a={...s},c=Object.create(null);e.forEach(p=>{t[p]&&(c[p]=t[p],delete i[p])});function u(p){return c[p]===void 0}Object.keys(a).forEach(p=>{const m=s[p].fileIDs.filter(u);if(m.length===0){delete a[p];return}const{capabilities:y}=this.getState();if(m.length!==s[p].fileIDs.length&&!y.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");a[p]={...s[p],fileIDs:m}});const d={currentUploads:a,files:i};Object.keys(i).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),this.#y();const h=Object.keys(c);h.forEach(p=>{this.emit("file-removed",c[p])}),h.length>5?this.log(`Removed ${h.length} files`):this.log(`Removed files: ${h.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),i=!(t.isPaused||!1);return this.setFileState(e,{isPaused:i}),this.emit("upload-pause",t,i),i}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const i={...e[s],isPaused:!0};e[s]=i}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const i={...e[s],isPaused:!1,error:null};e[s]=i}),this.setState({files:e}),this.emit("resume-all")}#p(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const s=e[t];return s.error&&(!s.missingRequiredMetaFields||s.missingRequiredMetaFields.length===0)})}async#m(){const e=this.#p(),t={...this.getState().files};if(e.forEach(i=>{t[i]={...t[i],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const s=this.#b(e,{forceAllowNewUpload:!0});return this.#C(s)}async retryAll(){const e=await this.#m();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Ju)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=this.#b([e],{forceAllowNewUpload:!0});return this.#C(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#g=(e,t)=>{const s=e?this.getFile(e.id):void 0;if(e==null||!s){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const i={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};s.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...s.progress,...i,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...s.progress,...i}}),this.#y()};#x(){const e=this.#S();let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#y=nz(()=>this.#x(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#x()}#S(){const t=this.getFiles().filter(d=>d.progress.uploadStarted||d.progress.preprocess||d.progress.postprocess);if(t.length===0)return 0;if(t.every(d=>d.progress.uploadComplete))return 1;const s=d=>d.progress.bytesTotal!=null&&d.progress.bytesTotal!==0,i=t.filter(s),a=t.filter(d=>!s(d));if(i.every(d=>d.progress.uploadComplete)&&a.length>0&&!a.every(d=>d.progress.uploadComplete))return null;const c=i.reduce((d,h)=>d+(h.progress.bytesTotal??0),0),u=i.reduce((d,h)=>d+(h.progress.bytesUploaded||0),0);return c===0?0:u/c}#_(){const e=(i,a,c)=>{let u=i.message||"Unknown error";i.details&&(u+=` ${i.details}`),this.setState({error:u}),a!=null&&a.id in this.getState().files&&this.setFileState(a.id,{error:u,response:c})};this.on("error",e),this.on("upload-error",(i,a,c)=>{if(e(a,i,c),typeof a=="object"&&a.message){this.log(a.message,"error");const u=new Error(this.i18n("failedToUpload",{file:i?.name??""}));u.isUserFacing=!0,u.details=a.message,a.details&&(u.details+=` ${a.details}`),this.#i([u])}else this.#i([a])});let t=null;this.on("upload-stalled",(i,a)=>{const{message:c}=i,u=a.map(d=>d.meta.name).join(", ");t||(this.info({message:c,details:u},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${c} ${u}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const s=i=>{const a=i.filter(u=>{const d=u!=null&&this.getFile(u.id);return d||this.log(`Not setting progress for a file that has been removed: ${u?.id}`),d}),c=Object.fromEntries(a.map(u=>[u.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:u.size}}]));this.patchFilesState(c)};this.on("upload-start",s),this.on("upload-progress",this.#g),this.on("upload-success",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const c=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...c,postprocess:this.#o.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:c.bytesTotal},response:a,uploadURL:a.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:a.bytesUploaded||c.bytesTotal}),this.#y()}),this.on("preprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:a}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.preprocess,this.setState({files:a})}),this.on("postprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:a}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.postprocess,this.setState({files:a})}),this.on("restored",()=>{this.#y()}),this.on("dashboard:file-edit-complete",i=>{i&&this.#c(i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#v),window.addEventListener("offline",this.#v),setTimeout(this.#v,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#v=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const c=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(c)}const s=new e(this,...t),i=s.id;if(!i)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const a=this.getPlugin(i);if(a){const c=`Already found a plugin named '${a.id}'. Tried to use: '${i}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(c)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),s.type in this.#t?this.#t[s.type].push(s):this.#t[s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(const t of Object.values(this.#t)){const s=t.find(i=>i.id===e);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](e){return this.#t[e]}iteratePlugins(e){Object.values(this.#t).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=this.#t[e.type],s=t.findIndex(c=>c.id===e.id);s!==-1&&t.splice(s,1);const a={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(a)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#n(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#v),window.removeEventListener("offline",this.#v))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",s=3e3){const i=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}#w=new Map;registerRequestClient(e,t){this.#w.set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=this.#w.get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?this.#C(e):(this.#j(e),Promise.reject(new Error("Nonexistent upload")))}#b(e,t={}){const{forceAllowNewUpload:s=!1}=t,{allowNewUpload:i,currentUploads:a}=this.getState();if(!i&&!s)throw new Error("Cannot create a new upload: already uploading.");const c=Mx();return this.emit("upload",c,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...a,[c]:{fileIDs:e,step:0,result:{}}}}),c}[Symbol.for("uppy test: createUpload")](...e){return this.#b(...e)}#N(e){const{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#N(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),i={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:i}})}#j(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async#C(e){const t=()=>{const{currentUploads:c}=this.getState();return c[e]};let s=t();const i=[...this.#r,...this.#a,...this.#o];try{for(let c=s.step||0;c<i.length&&s;c++){const u=i[c];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...s,step:c}}});const{fileIDs:d}=s;await u(d,e),s=t()}}catch(c){throw this.#j(e),c}if(s){s.fileIDs.forEach(h=>{const p=this.getFile(h);p?.progress.postprocess&&this.emit("postprocess-complete",p)});const c=s.fileIDs.map(h=>this.getFile(h)),u=c.filter(h=>!h.error),d=c.filter(h=>h.error);this.addResultData(e,{successful:u,failed:d,uploadID:e}),s=t()}let a;return s&&(a=s.result,this.#j(e)),a==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),a={successful:[],failed:[],uploadID:e}),a}async upload(){this.#t.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#p().length>0){const i=await this.#m();if(!(this.getFiles().filter(c=>c.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:e}=this.getState())}const s=this.opts.onBeforeUpload(e);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(e=s,this.setState({files:e})),Promise.resolve().then(()=>this.#e.validateMinNumberOfFiles(e)).catch(i=>{throw this.#i([i]),i}).then(()=>{if(!this.#f(e))throw new js(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),a=Object.values(i).flatMap(h=>h.fileIDs),c=[];Object.keys(e).forEach(h=>{const p=this.getFile(h);!p.progress.uploadStarted&&a.indexOf(h)===-1&&c.push(p.id)});const u=this.#b(c),d=await this.#C(u);return this.emit("complete",d),d}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}}var bz=0;function B(n,e,t,s,i,a){e||(e={});var c,u,d=e;if("ref"in d)for(u in d={},e)u=="ref"?c=e[u]:d[u]=e[u];var h={type:n,props:d,key:t,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--bz,__i:-1,__u:0,__source:i,__self:a};if(typeof n=="function"&&(c=n.defaultProps))for(u in c)d[u]===void 0&&(d[u]=c[u]);return Qe.vnode&&Qe.vnode(h),h}const wz="4.3.2",Sz={version:wz},LS=300;class _z extends Vn{ref=p8();componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,LS)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,LS)}render(){const{children:e}=this.props;return B("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}}function Cz(n,e){return Object.assign(n,e)}function jz(n,e){return n?.key??e}function Nz(n,e){const t=n._ptgLinkedRefs||(n._ptgLinkedRefs={});return t[e]||(t[e]=s=>{n.refs[e]=s})}function Nl(n){const e={};for(let t=0;t<n.length;t++)if(n[t]!=null){const s=jz(n[t],t.toString(36));e[s]=n[t]}return e}function kz(n,e){n=n||{},e=e||{};const t=c=>Object.hasOwn(e,c)?e[c]:n[c],s={};let i=[];for(const c in n)Object.hasOwn(e,c)?i.length&&(s[c]=i,i=[]):i.push(c);const a={};for(const c in e){if(Object.hasOwn(s,c))for(let u=0;u<s[c].length;u++){const d=s[c][u];a[s[c][u]]=t(d)}a[c]=t(c)}for(let c=0;c<i.length;c++)a[i[c]]=t(i[c]);return a}const Tz=n=>n;class aP extends Vn{constructor(e,t){super(e,t),this.refs={},this.state={children:Nl(ks(ks(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=Nl(ks(e.children)||[]),s=this.state.children;this.setState(a=>({children:kz(a.children,t)}));let i;for(i in t)if(Object.hasOwn(t,i)){const a=s&&Object.hasOwn(s,i);t[i]&&a&&this.currentlyTransitioningKeys[i]?(this.keysToEnter.push(i),this.keysToAbortLeave.push(i)):t[i]&&!a&&!this.currentlyTransitioningKeys[i]&&this.keysToEnter.push(i)}for(i in s)if(Object.hasOwn(s,i)){const a=t&&Object.hasOwn(t,i);s[i]&&!a&&!this.currentlyTransitioningKeys[i]&&this.keysToLeave.push(i)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Nl(ks(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Nl(ks(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s?.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const s=this.refs[e];s?.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const i=Nl(ks(this.props.children)||[]);if(i&&Object.hasOwn(i,e))this.performEnter(e);else{const a=Cz({},this.state.children);delete a[e],this.setState({children:a})}}render({childFactory:e,transitionLeave:t,transitionName:s,transitionAppear:i,transitionEnter:a,transitionLeaveTimeout:c,transitionEnterTimeout:u,transitionAppearTimeout:d,component:h,...p},{children:m}){const y=Object.entries(m).map(([b,_])=>{if(!_)return;const v=Nz(this,b);return KT(e(_),{ref:v,key:b})}).filter(Boolean);return Hl(h,p,y)}}aP.defaultProps={component:"span",childFactory:Tz};class Pz extends oa{static VERSION=Sz.version;constructor(e,t){super(e,t),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}render=e=>B("div",{className:"uppy uppy-Informer",children:B(aP,{children:e.info.map(t=>B(_z,{children:B("p",{role:"alert",children:[t.message," ",t.details&&B("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})});install(){const{target:e}=this.opts;e&&this.mount(e,this)}}var ng={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var zS;function Ez(){return zS||(zS=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(a=i(a,s(u)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var u in a)e.call(a,u)&&a[u]&&(c=i(c,u));return c}function i(a,c){return c?a?a+" "+c:a+c:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(ng)),ng.exports}var Az=Ez();const Os=Ls(Az),Mz={position:"relative",width:"100%",minHeight:"100%"},Rz={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class Iz extends Vn{constructor(e){super(e),this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}handleScroll=()=>{this.setState({offset:this.base.scrollTop})};handleResize=()=>{this.resize()};resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:e,rowHeight:t,renderRow:s,overscanCount:i=10,...a}){const{offset:c,height:u}=this.state;let d=Math.floor(c/t),h=Math.floor(u/t);i&&(d=Math.max(0,d-d%i),h+=i);const p=d+h+4,m=e.slice(d,p),y={...Mz,height:e.length*t},b={...Rz,top:d*t};return B("div",{onScroll:this.handleScroll,...a,children:B("div",{role:"presentation",style:y,children:B("div",{role:"presentation",style:b,children:m.map(s)})})})}}function Oz(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:B("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function BS(n,e,t,s){return n===e?n:s===0?e:n+(e-n)*2**(-s/t)}const Dz="4.2.3",Fz={version:Dz},Lz={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},Ys={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function zz(n){const e=Math.floor(n/3600)%24,t=Math.floor(n/60)%60,s=Math.floor(n%60);return{hours:e,minutes:t,seconds:s}}function Bz(n){const e=zz(n),t=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,i=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${s}${i}`}const Vz="",VS=()=>` ${Vz} `;function Uz(n){const{newFiles:e,isUploadStarted:t,recoveredState:s,i18n:i,uploadState:a,isSomeGhost:c,startUpload:u}=n,d=Os("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":a===Ys.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":c}),h=e&&t&&!s?i("uploadXNewFiles",{smart_count:e}):i("uploadXFiles",{smart_count:e});return B("button",{type:"button",className:d,"aria-label":i("uploadXFiles",{smart_count:e}),onClick:u,disabled:c,"data-uppy-super-focusable":!0,children:h})}function $z(n){const{i18n:e,uppy:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:B("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function qz(n){const{i18n:e,uppy:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:B("g",{fill:"none",fillRule:"evenodd",children:[B("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),B("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function Wz(n){const{isAllPaused:e,i18n:t,isAllComplete:s,resumableUploads:i,uppy:a}=n,c=t(e?"resume":"pause");function u(){if(!s){if(!i){a.cancelAll();return}if(e){a.resumeAll();return}a.pauseAll()}}return B("button",{title:c,"aria-label":c,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:u,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:B("g",{fill:"none",fillRule:"evenodd",children:[B("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),B("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function Gz(n){const{i18n:e,doneButtonHandler:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function oP(){return B("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:B("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function Hz(n){const{progress:e}=n,{value:t,mode:s,message:i}=e;return B("div",{className:"uppy-StatusBar-content",children:[B(oP,{}),s==="determinate"?`${Math.round(t*100)}%  `:"",i]})}function Kz(n){const{numUploads:e,complete:t,totalUploadedSize:s,totalSize:i,totalETA:a,i18n:c}=n,u=e>1,d=qi(s);return B("div",{className:"uppy-StatusBar-statusSecondary",children:[u&&c("filesUploadedOfTotal",{complete:t,smart_count:e}),B("span",{className:"uppy-StatusBar-additionalInfo",children:[u&&VS(),i!=null?c("dataUploadedOfTotal",{complete:d,total:qi(i)}):c("dataUploadedOfUnknown",{complete:d}),VS(),a!=null&&c("xTimeLeft",{time:Bz(a)})]})]})}function lP(n){const{i18n:e,complete:t,numUploads:s}=n;return B("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:s})})}function Qz(n){const{i18n:e,newFiles:t,startUpload:s}=n,i=Os("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return B("div",{className:"uppy-StatusBar-statusSecondary",children:[B("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),B("button",{type:"button",className:i,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:s,children:e("upload")})]})}function Yz(n){const{i18n:e,supportsUploadProgress:t,totalProgress:s,showProgressDetails:i,isUploadStarted:a,isAllComplete:c,isAllPaused:u,newFiles:d,numUploads:h,complete:p,totalUploadedSize:m,totalSize:y,totalETA:b,startUpload:_}=n,v=d&&a;if(!a||c)return null;const w=e(u?"paused":"uploading");function N(){return!u&&!v&&i?t?B(Kz,{numUploads:h,complete:p,totalUploadedSize:m,totalSize:y,totalETA:b,i18n:e}):B(lP,{i18n:e,complete:p,numUploads:h}):null}return B("div",{className:"uppy-StatusBar-content",title:w,children:[u?null:B(oP,{}),B("div",{className:"uppy-StatusBar-status",children:[B("div",{className:"uppy-StatusBar-statusPrimary",children:t&&s!==0?`${w}: ${s}%`:w}),N(),v?B(Qz,{i18n:e,newFiles:d,startUpload:_}):null]})]})}function Xz(n){const{i18n:e}=n;return B("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:B("div",{className:"uppy-StatusBar-status",children:B("div",{className:"uppy-StatusBar-statusPrimary",children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:B("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function Zz(n){const{error:e,i18n:t,complete:s,numUploads:i}=n;function a(){const c=`${t("uploadFailed")} 

 ${e}`;alert(c)}return B("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:B("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),B("div",{className:"uppy-StatusBar-status",children:[B("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),B("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:a,type:"button",children:"?"})]}),B(lP,{i18n:t,complete:s,numUploads:i})]})]})}function sg(n){const e=[];let t="indeterminate",s;for(const{progress:a}of Object.values(n)){const{preprocess:c,postprocess:u}=a;s==null&&(c||u)&&({mode:t,message:s}=c||u),c?.mode==="determinate"&&e.push(c.value),u?.mode==="determinate"&&e.push(u.value)}const i=e.reduce((a,c)=>a+c/e.length,0);return{mode:t,message:s,value:i}}const{STATE_ERROR:US,STATE_WAITING:Jz,STATE_PREPROCESSING:rg,STATE_UPLOADING:ed,STATE_POSTPROCESSING:ig,STATE_COMPLETE:td}=Ys;function eB({newFiles:n,allowNewUpload:e,isUploadInProgress:t,isAllPaused:s,resumableUploads:i,error:a,hideUploadButton:c=void 0,hidePauseResumeButton:u=!1,hideCancelButton:d=!1,hideRetryButton:h=!1,recoveredState:p,uploadState:m,totalProgress:y,files:b,supportsUploadProgress:_,hideAfterFinish:v=!1,isSomeGhost:w,doneButtonHandler:N=void 0,isUploadStarted:P,i18n:C,startUpload:A,uppy:k,isAllComplete:M,showProgressDetails:E=void 0,numUploads:T,complete:I,totalSize:O,totalETA:F,totalUploadedSize:L}){function V(){switch(m){case ig:case rg:{const se=sg(b);return se.mode==="determinate"?se.value*100:y}case US:return null;case ed:return _?y:null;default:return y}}function z(){switch(m){case ig:case rg:{const{mode:se}=sg(b);return se==="indeterminate"}case ed:return!_;default:return!1}}const W=V(),G=W??100,K=!a&&n&&(!t&&!s||p)&&e&&!c,$=!d&&m!==Jz&&m!==td,H=i&&!u&&m===ed,ee=a&&!M&&!h,R=N&&m===td,U=Os("uppy-StatusBar-progress",{"is-indeterminate":z()}),X=Os("uppy-StatusBar",`is-${m}`,{"has-ghosts":w}),re=(()=>{switch(m){case rg:case ig:return B(Hz,{progress:sg(b)});case td:return B(Xz,{i18n:C});case US:return B(Zz,{error:a,i18n:C,numUploads:T,complete:I});case ed:return B(Yz,{i18n:C,supportsUploadProgress:_,totalProgress:y,showProgressDetails:E,isUploadStarted:P,isAllComplete:M,isAllPaused:s,newFiles:n,numUploads:T,complete:I,totalUploadedSize:L,totalSize:O,totalETA:F,startUpload:A});default:return null}})();return!(K||ee||H||$||R)&&!re||m===td&&v?null:B("div",{className:X,children:[B("div",{className:U,style:{width:`${G}%`},role:"progressbar","aria-label":`${G}%`,"aria-valuetext":`${G}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":W}),re,B("div",{className:"uppy-StatusBar-actions",children:[K?B(Uz,{newFiles:n,isUploadStarted:P,recoveredState:p,i18n:C,isSomeGhost:w,startUpload:A,uploadState:m}):null,ee?B($z,{i18n:C,uppy:k}):null,H?B(Wz,{isAllPaused:s,i18n:C,isAllComplete:M,resumableUploads:i,uppy:k}):null,$?B(qz,{i18n:C,uppy:k}):null,R?B(Gz,{i18n:C,doneButtonHandler:N}):null]})]})}const tB=2e3,nB=2e3;function sB(n,e,t,s){if(n)return Ys.STATE_ERROR;if(e)return Ys.STATE_COMPLETE;if(t)return Ys.STATE_WAITING;let i=Ys.STATE_WAITING;const a=Object.keys(s);for(let c=0;c<a.length;c++){const{progress:u}=s[a[c]];if(u.uploadStarted&&!u.uploadComplete)return Ys.STATE_UPLOADING;u.preprocess&&(i=Ys.STATE_PREPROCESSING),u.postprocess&&i!==Ys.STATE_PREPROCESSING&&(i=Ys.STATE_POSTPROCESSING)}return i}const rB={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};let iB=class extends oa{static VERSION=Fz.version;#t;#e;#n;#s;constructor(e,t){super(e,{...rB,...t}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Lz,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}#r(e){if(e.total==null||e.total===0)return null;const t=e.total-e.uploaded;if(t<=0)return null;this.#t??=performance.now();const s=performance.now()-this.#t;if(s===0)return Math.round((this.#s??0)/100)/10;const i=e.uploaded-this.#e;if(this.#e=e.uploaded,i<=0)return Math.round((this.#s??0)/100)/10;const a=i/s,c=this.#n==null?a:BS(a,this.#n,tB,s);this.#n=c;const u=t/c,d=Math.max(this.#s-s,0),h=this.#s==null?u:BS(u,d,nB,s);return this.#s=h,this.#t=performance.now(),Math.round(h/100)/10}startUpload=()=>this.uppy.upload().catch((()=>{}));render(e){const{capabilities:t,files:s,allowNewUpload:i,totalProgress:a,error:c,recoveredState:u}=e,{newFiles:d,startedFiles:h,completeFiles:p,isUploadStarted:m,isAllComplete:y,isAllPaused:b,isUploadInProgress:_,isSomeGhost:v}=this.uppy.getObjectOfFilesPerState(),w=u?Object.values(s):d,N=!!t.resumableUploads,P=t.uploadProgress!==!1;let C=null,A=0;h.every(M=>M.progress.bytesTotal!=null&&M.progress.bytesTotal!==0)?(C=0,h.forEach(M=>{C+=M.progress.bytesTotal||0,A+=M.progress.bytesUploaded||0})):h.forEach(M=>{A+=M.progress.bytesUploaded||0});const k=this.#r({uploaded:A,total:C});return eB({error:c,uploadState:sB(c,y,u,e.files||{}),allowNewUpload:i,totalProgress:a,totalSize:C,totalUploadedSize:A,isAllComplete:!1,isAllPaused:b,isUploadStarted:m,isUploadInProgress:_,isSomeGhost:v,recoveredState:u,complete:p.length,newFiles:w.length,numUploads:h.length,totalETA:k,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:N,supportsUploadProgress:P,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const e=this.el;DT(e)||(e.dir="ltr")}#a=()=>{const{recoveredState:e}=this.uppy.getState();if(this.#n=null,this.#s=null,e){this.#e=Object.values(e.files).reduce((t,{progress:s})=>t+s.bytesUploaded,0),this.uppy.emit("restore-confirmed");return}this.#t=performance.now(),this.#e=0};install(){const{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",this.#a),this.#t=performance.now(),this.#e=this.uppy.getFiles().reduce((t,s)=>t+s.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",this.#a)}};const aB=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function oB(n,e,t){const s=aB.exec(n),i=e.mimeType??s?.[1]??"plain/text";let a;if(s?.[2]!=null){const c=atob(decodeURIComponent(s[3])),u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d);a=[u]}else s?.[3]!=null&&(a=[decodeURIComponent(s[3])]);return new Blob(a,{type:i})}function $S(n){return n.startsWith("blob:")}function qS(n){return n?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(n):!1}function ut(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var cP=typeof self<"u"?self:global;const Yl=typeof navigator<"u",lB=Yl&&typeof HTMLImageElement>"u",WS=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),uP=cP.Buffer,dP=!!uP,cB=n=>n!==void 0;function hP(n){return n===void 0||(n instanceof Map?n.size===0:Object.values(n).filter(cB).length===0)}function cn(n){let e=new Error(n);throw delete e.stack,e}function GS(n){let e=(function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048})(n);return n.jfif.enabled&&(e+=50),n.xmp.enabled&&(e+=2e4),n.iptc.enabled&&(e+=14e3),n.icc.enabled&&(e+=6e3),e}const ag=n=>String.fromCharCode.apply(null,n),HS=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Ps{static from(e,t){return e instanceof this&&e.le===t?e:new Ps(e,void 0,void 0,t)}constructor(e,t=0,s,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){s===void 0&&(s=e.byteLength-t);let a=new DataView(e,t,s);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ps){s===void 0&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&cn("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,t,s);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else cn("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=Ps){return e instanceof DataView||e instanceof Ps?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||cn("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Ps(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return i=this.getUint8Array(e,t),HS?HS.decode(i):dP?Buffer.from(i).toString("utf8"):decodeURIComponent(escape(ag(i)));var i}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return ag(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)s.push(this.getUint16(e+i));return ag(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function sy(n,e){cn(`${n} '${e}' was not loaded, try using full build of exifr.`)}class Ix extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||sy(this.kind,e),t&&(e in t||(function(s,i){cn(`Unknown ${s} '${i}'.`)})(this.kind,e),t[e].enabled||sy(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var fP=new Ix("file parser"),Ns=new Ix("segment parser"),Ox=new Ix("file reader");let uB=cP.fetch;function KS(n,e){return(t=n).startsWith("data:")||t.length>1e4?iy(n,e,"base64"):WS&&n.includes("://")?ry(n,e,"url",QS):WS?iy(n,e,"fs"):Yl?ry(n,e,"url",QS):void cn("Invalid input argument");var t}async function ry(n,e,t,s){return Ox.has(t)?iy(n,e,t):s?(async function(i,a){let c=await a(i);return new Ps(c)})(n,s):void cn(`Parser ${t} is not loaded`)}async function iy(n,e,t){let s=new(Ox.get(t))(n,e);return await s.read(),s}const QS=n=>uB(n).then((e=>e.arrayBuffer())),ay=n=>new Promise(((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result||new ArrayBuffer),s.onerror=t,s.readAsArrayBuffer(n)})),Dx=new Map,dB=new Map,hB=new Map,nd=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],pP=["jfif","xmp","icc","iptc","ihdr"],oy=["tiff",...pP],ln=["ifd0","ifd1","exif","gps","interop"],sd=[...oy,...ln],rd=["makerNote","userComment"],mP=["translateKeys","translateValues","reviveValues","multiSegment"],id=[...mP,"sanitize","mergeOutput","silentErrors"];class gP{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class kl extends gP{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,s,i){if(super(),ut(this,"enabled",!1),ut(this,"skip",new Set),ut(this,"pick",new Set),ut(this,"deps",new Set),ut(this,"translateKeys",!1),ut(this,"translateValues",!1),ut(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=ln.includes(e),this.canBeFiltered&&(this.dict=Dx.get(e)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:a,skip:c}=s;a&&a.length>0&&this.translateTagSet(a,this.pick),c&&c.length>0&&this.translateTagSet(c,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:cn(`Invalid options argument: ${s}`)}applyInheritables(e){let t,s;for(t of mP)s=e[t],s!==void 0&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,i,{tagKeys:a,tagValues:c}=this.dict;for(s of e)typeof s=="string"?(i=c.indexOf(s),i===-1&&(i=a.indexOf(Number(s))),i!==-1&&t.add(Number(a[i]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Gd(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Gd(this.pick,this.deps)}}var Nn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},YS=new Map;class Fx extends gP{static useCached(e){let t=YS.get(e);return t!==void 0||(t=new this(e),YS.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):cn(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Yl?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of nd)this[e]=Nn[e];for(e of id)this[e]=Nn[e];for(e of rd)this[e]=Nn[e];for(e of sd)this[e]=new kl(e,Nn[e],void 0,this)}setupFromTrue(){let e;for(e of nd)this[e]=Nn[e];for(e of id)this[e]=Nn[e];for(e of rd)this[e]=!0;for(e of sd)this[e]=new kl(e,!0,void 0,this)}setupFromArray(e){let t;for(t of nd)this[t]=Nn[t];for(t of id)this[t]=Nn[t];for(t of rd)this[t]=Nn[t];for(t of sd)this[t]=new kl(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ln)}setupFromObject(e){let t;for(t of(ln.ifd0=ln.ifd0||ln.image,ln.ifd1=ln.ifd1||ln.thumbnail,Object.assign(this,e),nd))this[t]=og(e[t],Nn[t]);for(t of id)this[t]=og(e[t],Nn[t]);for(t of rd)this[t]=og(e[t],Nn[t]);for(t of oy)this[t]=new kl(t,Nn[t],e[t],this);for(t of ln)this[t]=new kl(t,Nn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ln,sd),e.tiff===!0?this.batchEnableWithBool(ln,!0):e.tiff===!1?this.batchEnableWithUserValue(ln,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ln):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ln)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let i=t[s];this[s].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,t,s,i=s){if(e&&e.length){for(let c of i)this[c].enabled=!1;let a=XS(e,s);for(let[c,u]of a)Gd(this[c].pick,u),this[c].enabled=!0}else if(t&&t.length){let a=XS(t,s);for(let[c,u]of a)Gd(this[c].skip,u)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:i,icc:a}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=ln.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of ln)this[a].finalizeFilters()}get onlyTiff(){return!pP.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of oy)this[e].enabled&&!Ns.has(e)&&sy("segment parser",e)}}function XS(n,e){let t,s,i,a,c=[];for(i of e){for(a of(t=Dx.get(i),s=[],t))(n.includes(a[0])||n.includes(a[1]))&&s.push(a[0]);s.length&&c.push([i,s])}return c}function og(n,e){return n!==void 0?n:e!==void 0?e:void 0}function Gd(n,e){for(let t of e)n.add(t)}ut(Fx,"default",Nn);class fB{constructor(e){ut(this,"parsers",{}),ut(this,"output",{}),ut(this,"errors",[]),ut(this,"pushToErrors",(t=>this.errors.push(t))),this.options=Fx.useCached(e)}async read(e){this.file=await(function(t,s){return typeof t=="string"?KS(t,s):Yl&&!lB&&t instanceof HTMLImageElement?KS(t.src,s):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Ps(t):Yl&&t instanceof Blob?ry(t,s,"blob",ay):void cn("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,i]of fP)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),cn("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),hP(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async s=>{let i=await s.parse();s.assignToOutput(e,i)}));this.options.silentErrors&&(t=t.map((s=>s.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=Ns.get("tiff",e);var i;if(t.tiff?i={start:0,type:"tiff"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),c=this.parsers.tiff=new s(a,e,t),u=await c.extractThumbnail();return t.close&&t.close(),u}}class eo{static findPosition(e,t){let s=e.getUint16(t+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,t,s):this.headerLength,a=t+i,c=s-i;return{offset:t,length:s,headerLength:i,start:a,size:c,end:a+c}}static parse(e,t={}){return new this(e,new Fx({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Ps?e:new Ps(e)}constructor(e,t={},s){ut(this,"errors",[]),ut(this,"raw",new Map),ut(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=hB.get(t),i=dB.get(t),a=Dx.get(t),c=this.options[t],u=c.reviveValues&&!!s,d=c.translateValues&&!!i,h=c.translateKeys&&!!a,p={};for(let[m,y]of e)u&&s.has(m)?y=s.get(m)(y):d&&i.has(m)&&(y=this.translateValue(y,i.get(m))),h&&a.has(m)&&(m=a.get(m)||m),p[m]=y;return p}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}ut(eo,"headerLength",4),ut(eo,"type",void 0),ut(eo,"multiSegment",!1),ut(eo,"canHandle",(()=>!1));function pB(n){return n===192||n===194||n===196||n===219||n===221||n===218||n===254}function mB(n){return n>=224&&n<=239}function gB(n,e,t){for(let[s,i]of Ns)if(i.canHandle(n,e,t))return s}class ZS extends class{constructor(e,t,s){ut(this,"errors",[]),ut(this,"ensureSegmentChunk",(async i=>{let a=i.start,c=i.size||65536;if(this.file.chunked)if(this.file.available(a,c))i.chunk=this.file.subarray(a,c);else try{i.chunk=await this.file.readChunk(a,c)}catch(u){cn(`Couldn't read segment: ${JSON.stringify(i)}. ${u.message}`)}else this.file.byteLength>a+c?i.chunk=this.file.subarray(a,c):i.size===void 0?i.chunk=this.file.subarray(a):cn("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=s}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(Ns.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:s,chunk:i}=t,a=this.options[s];if(a&&a.enabled){let c=this.parsers[s];c&&c.append||c||this.createParser(s,i)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),ut(this,"appSegments",[]),ut(this,"jpegSegments",[]),ut(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ns.keyList())):(e=e===void 0?Ns.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&Ns.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:i,wanted:a,remaining:c}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((u=>{let d=Ns.get(u),h=this.options[u];return d.multiSegment&&h.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let u=!1;for(;c.size>0&&!u&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=s,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(u=e>d&&!h?!await s.readNextChunk(e):!await s.readNextChunk(d),(e=this.findAppSegmentsInRange(e,s.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let s,i,a,c,u,d,{file:h,findAll:p,wanted:m,remaining:y,options:b}=this;for(;e<t;e++)if(h.getUint8(e)===255){if(s=h.getUint8(e+1),mB(s)){if(i=h.getUint16(e+2),a=gB(h,e,i),a&&m.has(a)&&(c=Ns.get(a),u=c.findPosition(h,e),d=b[a],u.type=a,this.appSegments.push(u),!p&&(c.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=u.chunkNumber<u.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(u=eo.findPosition(h,e),u.marker=s,this.unknownSegments.push(u)),e+=i+1}else if(pB(s)){if(i=h.getUint16(e+2),s===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:s}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,s){let i,a,c,u=new Map;for(let d=0;d<t.length;d++)i=t[d],a=i[s],u.has(a)?c=u.get(a):u.set(a,c=[]),c.push(i);return Array.from(u)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,s])=>{let i=Ns.get(t,this.options);return i.handleMultiSegments?{type:t,chunk:i.handleMultiSegments(s)}:s[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}ut(ZS,"type","jpeg"),fP.set("jpeg",ZS);const yB=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class xB extends eo{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:i,skip:a}=this.options[t];i=new Set(i);let c=i.size>0,u=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(c){if(i.has(p)&&(s.set(p,this.parseTag(e,p,t)),i.delete(p),i.size===0))break}else!u&&a.has(p)||s.set(p,this.parseTag(e,p,t));e+=12}return s}parseTag(e,t,s){let{chunk:i}=this,a=i.getUint16(e+2),c=i.getUint32(e+4),u=yB[a];if(u*c<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&cn(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&cn(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,c);if(a===2)return(d=(function(h){for(;h.endsWith("\0");)h=h.slice(0,-1);return h})(d=i.getString(e,c)).trim())===""?void 0:d;var d;if(a===7)return i.getUint8Array(e,c);if(c===1)return this.parseTagValue(a,e);{let h=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(c),p=u;for(let m=0;m<c;m++)h[m]=this.parseTagValue(a,e),e+=p;return h}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:cn(`Invalid tiff type ${e}`)}}}class lg extends xB{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&cn("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&cn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,GS(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,GS(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&s.length===1&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",JS(...e.get(2),e.get(1))),e.set("longitude",JS(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,i={};for(t of ln)if(e=this[t],!hP(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(i,s)}else i[t]=s;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,i]of Object.entries(t))this.assignObjectToOutput(e,s,i)}}function JS(n,e,t,s){var i=n+e/60+t/3600;return s!=="S"&&s!=="W"||(i*=-1),i}ut(lg,"type","tiff"),ut(lg,"headerLength",10),Ns.set("tiff",lg);const Lx={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Lx,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Lx,{tiff:!1,ifd1:!0,mergeOutput:!1});const vB=Object.assign({},Lx,{firstChunkSize:4e4,ifd0:[274]});async function bB(n){let e=new fB(vB);await e.read(n);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const wB=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Il=!0,Ol=!0;if(typeof navigator=="object"){let n=navigator.userAgent;if(n.includes("iPad")||n.includes("iPhone")){let e=n.match(/OS (\d+)_(\d+)/);if(e){let[,t,s]=e;Il=Number(t)+.1*Number(s)<13.4,Ol=!1}}else if(n.includes("OS X 10")){let[,e]=n.match(/OS X 10[_.](\d+)/);Il=Ol=Number(e)<15}if(n.includes("Chrome/")){let[,e]=n.match(/Chrome\/(\d+)/);Il=Ol=Number(e)<81}else if(n.includes("Firefox/")){let[,e]=n.match(/Firefox\/(\d+)/);Il=Ol=Number(e)<77}}async function SB(n){let e=await bB(n);return Object.assign({canvas:Il,css:Ol},wB[e])}class _B extends Ps{constructor(...e){super(...e),ut(this,"ranges",new CB),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(e===0&&this.byteLength===0&&s){let i=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(i)}else{let i=e+t;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let t;t=dP?uP.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class CB{constructor(){ut(this,"list",[])}get length(){return this.list.length}add(e,t,s=0){let i=e+t,a=this.list.filter((c=>e_(e,c.offset,i)||e_(e,c.end,i)));if(a.length>0){e=Math.min(e,...a.map((u=>u.offset))),i=Math.max(i,...a.map((u=>u.end))),t=i-e;let c=a.shift();c.offset=e,c.length=t,c.end=i,this.list=this.list.filter((u=>!a.includes(u)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let s=e+t;return this.list.some((i=>i.offset<=e&&s<=i.end))}}function e_(n,e,t){return n<=e&&e<=t}class jB extends _B{constructor(e,t){super(0),ut(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Ox.set("blob",class extends jB{async readWhole(){this.chunked=!1;let n=await ay(this.input);this._swapArrayBuffer(n)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(n,e){let t=e?n+e:void 0,s=this.input.slice(n,t),i=await ay(s);return this.set(i,n,!0)}});const NB="4.2.3",kB={version:NB},TB={strings:{generatingThumbnails:"Generating thumbnails..."}};function PB(n,e,t){try{n.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return n.toBlob?new Promise(s=>{n.toBlob(s,e,t)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>oB(n.toDataURL(e,t),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function EB(n,e){let t=n.width,s=n.height;(e.deg===90||e.deg===270)&&(t=n.height,s=n.width);const i=document.createElement("canvas");i.width=t,i.height=s;const a=i.getContext("2d");return a.translate(t/2,s/2),e.canvas&&(a.rotate(e.rad),a.scale(e.scaleX,e.scaleY)),a.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),i}function AB(n){const e=n.width/n.height,t=5e6,s=4096;let i=Math.floor(Math.sqrt(t*e)),a=Math.floor(t/Math.sqrt(t*e));if(i>s&&(i=s,a=Math.round(i/e)),a>s&&(a=s,i=Math.round(e*a)),n.width>i){const c=document.createElement("canvas");return c.width=i,c.height=a,c.getContext("2d").drawImage(n,0,0,i,a),c}return n}const MB={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class RB extends oa{static VERSION=kB.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(e,t){if(super(e,{...MB,...t}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=TB,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,s){const i=URL.createObjectURL(e.data),a=new Promise((u,d)=>{const h=new Image;h.src=i,h.addEventListener("load",()=>{URL.revokeObjectURL(i),u(h)}),h.addEventListener("error",p=>{URL.revokeObjectURL(i),d(p.error||new Error("Could not create thumbnail"))})}),c=SB(e.data).catch(()=>1);return Promise.all([a,c]).then(([u,d])=>{const h=this.getProportionalDimensions(u,t,s,d.deg),p=EB(u,d),m=this.resizeImage(p,h.width,h.height);return PB(m,this.thumbnailType,80)}).then(u=>URL.createObjectURL(u))}getProportionalDimensions(e,t,s,i){let a=e.width/e.height;if((i===90||i===270)&&(a=e.height/e.width),t!=null){let c=t;return e.width<t&&(c=e.width),{width:c,height:Math.round(c/a)}}if(s!=null){let c=s;return e.height<s&&(c=e.height),{width:Math.round(c*a),height:c}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/a)}}resizeImage(e,t,s){let i=AB(e),a=Math.ceil(Math.log2(i.width/t));a<1&&(a=1);let c=t*2**(a-1),u=s*2**(a-1);const d=2;for(;a--;){const h=document.createElement("canvas");h.width=c,h.height=u,h.getContext("2d").drawImage(i,0,0,c,u),i=h,c=Math.round(c/d),u=Math.round(u/d)}return i}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return qS(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}onFileAdded=e=>{!e.preview&&e.data&&qS(e.type)&&!e.isRemote&&this.addToQueue(e.id)};onCancelRequest=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1)};onFileRemoved=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1),e.preview&&$S(e.preview)&&URL.revokeObjectURL(e.preview)};onRestored=()=>{this.uppy.getFiles().filter(t=>t.isRestored).forEach(t=>{(!t.preview||$S(t.preview))&&this.addToQueue(t.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=e=>{e.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",i,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const t=()=>{e.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",i)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),s()}):(t(),s())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}function t_(n){if(typeof n=="string"){const e=document.querySelectorAll(n);return e.length===0?null:Array.from(e)}return typeof n=="object"&&OT(n)?[n]:null}const Ll=Array.from;function IB(n){const e=Ll(n.files);return Promise.resolve(e)}function yP(n,e,t,{onSuccess:s}){n.readEntries(i=>{const a=[...e,...i];i.length?queueMicrotask(()=>{yP(n,a,t,{onSuccess:s})}):s(a)},i=>{t(i),s(e)})}function xP(n,e){return n==null?n:{kind:n.isFile?"file":n.isDirectory?"directory":void 0,name:n.name,getFile(){return new Promise((t,s)=>n.file(t,s))},async*values(){const t=n.createReader();yield*await new Promise(i=>{yP(t,[],e,{onSuccess:a=>i(a.map(c=>xP(c,e)))})})},isSameEntry:void 0}}async function*vP(n,e,t=void 0){const s=()=>`${e}/${n.name}`;if(n.kind==="file"){const i=await n.getFile();i!=null?(i.relativePath=e?s():null,yield i):t!=null&&(yield t)}else if(n.kind==="directory")for await(const i of n.values())yield*vP(i,e?s():n.name);else t!=null&&(yield t)}async function*OB(n,e){const t=await Promise.all(Array.from(n.items,async s=>{let i;return i??=xP(typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry(),e),{fileSystemHandle:i,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:i}of t)if(i!=null)try{yield*vP(i,"",s)}catch(a){s!=null?yield s:e(a)}else s!=null&&(yield s)}async function DB(n,e){const t=e?.logDropError??Function.prototype;try{const s=[];for await(const i of OB(n,t))s.push(i);return s}catch{return IB(n)}}const FB="4.4.3",LB={version:FB};function zB(){const n=document.body;return!(!("draggable"in n)||!("ondragstart"in n&&"ondrop"in n)||!("FormData"in window)||!("FileReader"in window))}class bP extends Vn{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""};renderHiddenInput=(e,t)=>B("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t});renderHiddenCameraInput=(e,t,s)=>{const a={photo:"image/*",video:"video/*"}[e];return B("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t===""?"environment":t,accept:a,ref:s})};renderMyDeviceAcquirer=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(e,t)=>{const s=this.props.acquirers.length;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":s===0,children:e})};renderDropPasteBrowseTagline=e=>{const t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),i=this.props.fileManagerSelectionType,a=i.charAt(0).toUpperCase()+i.slice(1);return B("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${a}`,{browseFiles:t,browseFolders:s,browse:t}):this.props.i18nArray(`dropPaste${a}`,{browseFiles:t,browseFolders:s,browse:t})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=e=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[B("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),B("div",{className:"uppy-DashboardTab-name",children:e.name})]})});renderAcquirers=e=>{const t=[...e],s=t.splice(e.length-2,e.length);return B(Es,{children:[t.map(i=>this.renderAcquirer(i)),B("span",{role:"presentation",style:{"white-space":"nowrap"},children:s.map(i=>this.renderAcquirer(i))})]})};renderSourcesList=(e,t)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:i}=this.props;let a=[];const c="myDevice";t||a.push({key:c,elements:this.renderMyDeviceAcquirer()}),s&&a.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),i&&a.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),a.push(...e.map(p=>({key:p.id,elements:this.renderAcquirer(p)}))),a.length===1&&a[0].key===c&&(a=[]);const d=[...a],h=d.splice(a.length-2,a.length);return B(Es,{children:[this.renderDropPasteBrowseTagline(a.length),B("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:p,elements:m})=>B(Es,{children:m},p)),B("span",{role:"presentation",style:{"white-space":"nowrap"},children:h.map(({key:p,elements:m})=>B(Es,{children:m},p))})]})]})};renderPoweredByUppy(){const{i18nArray:e}=this.props,t=B("span",{children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:B("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),B("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),s=e("poweredBy",{uppy:t});return B("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:s})}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:s}=this.props;return B("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,i=>{this.fileInput=i}),this.renderHiddenInput(!0,i=>{this.folderInput=i}),e&&this.renderHiddenCameraInput("photo",s,i=>{this.mobilePhotoFileInput=i}),t&&this.renderHiddenCameraInput("video",s,i=>{this.mobileVideoFileInput=i}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),B("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&B("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const BB=n=>B("div",{className:Os("uppy-Dashboard-AddFilesPanel",n.className),"data-uppy-panelType":"AddFiles","aria-hidden":!n.showAddFilesPanel,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18n("addingMoreFiles")}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>n.toggleAddFilesPanel(!1),children:n.i18n("back")})]}),B(bP,{...n})]});function VB(n){const e=n.files[n.fileCardFor],t=()=>{n.uppy.emit("file-editor:cancel",e),n.closeFileEditor()};return B("div",{className:Os("uppy-DashboardContent-panel",n.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18nArray("editing",{file:B("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:n.i18n("cancel")}),B("button",{className:"uppy-DashboardContent-save",type:"button",onClick:n.saveFileEditor,children:n.i18n("save")})]}),B("div",{className:"uppy-DashboardContent-panelBody",children:n.editors.map(s=>n.uppy.getPlugin(s.id).render(n.state))})]})}function UB(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:B("g",{fill:"#686DE0",fillRule:"evenodd",children:[B("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),B("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),B("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function $B(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function qB(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function WB(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function GB(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function HB(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[B("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),B("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function KB(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function zx(n){const e={color:"#838999",icon:HB()};if(!n)return e;const t=n.split("/")[0],s=n.split("/")[1];return t==="text"?{color:"#5a5e69",icon:KB()}:t==="image"?{color:"#686de0",icon:UB()}:t==="audio"?{color:"#068dbb",icon:$B()}:t==="video"?{color:"#19af67",icon:qB()}:t==="application"&&s==="pdf"?{color:"#e25149",icon:WB()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:GB()}:e}function li(n){const{tagName:e}=n.target;if(e==="INPUT"||e==="TEXTAREA"){n.stopPropagation();return}n.preventDefault(),n.stopPropagation()}function wP(n){const{file:e}=n;if(e.preview)return B("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:s}=zx(e.type);return B("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[B("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:s}),B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:B("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function QB(n){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:s,form:i,formState:a}=n,c={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(u=>{const d=`uppy-Dashboard-FileCard-input-${u.id}`,h=t.includes(u.id);return B("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[B("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d,children:u.name}),u.render!==void 0?u.render({value:a[u.id],onChange:p=>s(p,u.id),fieldCSSClasses:c,required:h,form:i.id},Hl):B("input",{className:c.text,id:d,form:i.id,type:u.type||"text",required:h,value:a[u.id],placeholder:u.placeholder,onInput:p=>s(p.target.value,u.id),"data-uppy-super-focusable":!0})]},u.id)})}function YB(n){const{files:e,fileCardFor:t,toggleFileCard:s,saveFileCard:i,metaFields:a,requiredMetaFields:c,openFileEditor:u,i18n:d,i18nArray:h,className:p,canEditFile:m}=n,y=()=>typeof a=="function"?a(e[t]):a,b=e[t],_=y()??[],v=m(b),w={};_.forEach(E=>{w[E.id]=b.meta[E.id]??""});const[N,P]=Wd(w),C=w8(E=>{E.preventDefault(),i(N,t)},[i,N,t]),A=(E,T)=>{P({...N,[T]:E})},k=()=>{s(!1)},[M]=Wd(()=>{const E=document.createElement("form");return E.setAttribute("tabindex","-1"),E.id=Mx(),E});return ty(()=>(document.body.appendChild(M),M.addEventListener("submit",C),()=>{M.removeEventListener("submit",C),document.body.removeChild(M)}),[M,C]),B("div",{className:Os("uppy-Dashboard-FileCard",p),"data-uppy-panelType":"FileCard",onDragOver:li,onDragLeave:li,onDrop:li,onPaste:li,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:h("editing",{file:B("span",{className:"uppy-DashboardContent-titleFile",children:b.meta?b.meta.name:b.name})})}),B("button",{className:"uppy-DashboardContent-back",type:"button",form:M.id,title:d("finishEditingFile"),onClick:k,children:d("cancel")})]}),B("div",{className:"uppy-Dashboard-FileCard-inner",children:[B("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:zx(b.type).color},children:[B(wP,{file:b}),v&&B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:E=>{C(E),u(b)},children:d("editImage")})]}),B("div",{className:"uppy-Dashboard-FileCard-info",children:B(QB,{computedMetaFields:_,requiredMetaFields:c,updateMeta:A,form:M,formState:N})}),B("div",{className:"uppy-Dashboard-FileCard-actions",children:[B("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:M.id,children:d("saveChanges")}),B("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:k,form:M.id,children:d("cancel")})]})]})]})}function XB(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),s=Object.keys(e),i=t.length;if(s.length!==i)return!1;for(let a=0;a<i;a++){const c=t[a];if(n[c]!==e[c]||!Object.prototype.hasOwnProperty.call(e,c))return!1}return!0}function ZB(n,e="Copy the URL below"){return new Promise(t=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=n,document.body.appendChild(s),s.select();const i=()=>{document.body.removeChild(s),window.prompt(e,n),t()};try{return document.execCommand("copy")?(document.body.removeChild(s),t()):i()}catch{return document.body.removeChild(s),i()}})}function JB({file:n,uploadInProgressOrComplete:e,metaFields:t,canEditFile:s,i18n:i,onClick:a}){return!e&&t&&t.length>0||!e&&s(n)?B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":i("editFileWithFilename",{file:n.meta.name}),title:i("editFileWithFilename",{file:n.meta.name}),onClick:()=>a(),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:B("g",{fillRule:"evenodd",children:[B("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),B("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),B("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function eV({i18n:n,onClick:e,file:t}){return B("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":n("removeFile",{file:t.meta.name}),title:n("removeFile",{file:t.meta.name}),onClick:()=>e(),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[B("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),B("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function tV({file:n,uppy:e,i18n:t}){const s=i=>{ZB(n.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>i.target.focus({preventScroll:!0}))};return B("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:i=>s(i),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:B("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function nV(n){const{uppy:e,file:t,uploadInProgressOrComplete:s,canEditFile:i,metaFields:a,showLinkToFileUploadResult:c,showRemoveButton:u,i18n:d,toggleFileCard:h,openFileEditor:p}=n;return B("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[B(JB,{i18n:d,file:t,uploadInProgressOrComplete:s,canEditFile:i,metaFields:a,onClick:()=>{a&&a.length>0?h(!0,t.id):p(t)}}),c&&t.uploadURL?B(tV,{file:t,uppy:e,i18n:d}):null,u?B(eV,{i18n:d,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const cg="...";function SP(n,e){if(e===0)return"";if(n.length<=e)return n;if(e<=cg.length+1)return`${n.slice(0,e-1)}`;const t=e-cg.length,s=Math.ceil(t/2),i=Math.floor(t/2);return n.slice(0,s)+cg+n.slice(-i)}const sV=(n,e)=>(typeof e=="function"?e():e).filter(i=>i.id===n)[0].name;function _P(n){const{file:e,toggleFileCard:t,i18n:s,metaFields:i}=n,{missingRequiredMetaFields:a}=e;if(!a?.length)return null;const c=a.map(u=>sV(u,i)).join(", ");return B("div",{className:"uppy-Dashboard-Item-errorMessage",children:[s("missingRequiredMetaFields",{smart_count:a.length,fields:c})," ",B("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:s("editFile")})]})}const rV=n=>{const{author:e,name:t}=n.file.meta;function s(){return n.isSingleFile&&n.containerHeight>=350?90:n.containerWidth<=352?35:n.containerWidth<=576?60:e?20:30}return B("div",{className:"uppy-Dashboard-Item-name",title:t,children:SP(t,s())})},iV=n=>{const{author:e}=n.file.meta,t=n.file.remote?.providerName,s="";return e?B("div",{className:"uppy-Dashboard-Item-author",children:[B("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:SP(e.name,13)}),t?B(Es,{children:[` ${s} `,t,` ${s} `]}):null]}):null},aV=n=>n.file.size&&B("div",{className:"uppy-Dashboard-Item-statusSize",children:qi(n.file.size)}),oV=n=>n.file.isGhost&&B("span",{children:["  ",B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>n.toggleAddFilesPanel(!0),children:n.i18n("reSelect")})]}),lV=({file:n,onClick:e})=>n.error?B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":n.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function cV(n){const{file:e,i18n:t,toggleFileCard:s,metaFields:i,toggleAddFilesPanel:a,isSingleFile:c,containerHeight:u,containerWidth:d}=n;return B("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[B("div",{className:"uppy-Dashboard-Item-fileName",children:[rV({file:e,isSingleFile:c,containerHeight:u,containerWidth:d}),B(lV,{file:e,onClick:()=>alert(e.error)})]}),B("div",{className:"uppy-Dashboard-Item-status",children:[iV({file:e}),aV({file:e}),oV({file:e,toggleAddFilesPanel:a,i18n:t})]}),B(_P,{file:e,i18n:t,toggleFileCard:s,metaFields:i})]})}function uV(n){const{file:e,i18n:t,toggleFileCard:s,metaFields:i,showLinkToFileUploadResult:a}=n,u=e.preview?"rgba(255, 255, 255, 0.5)":zx(e.type).color;return B("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:u},children:[a&&e.uploadURL&&B("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:B("span",{hidden:!0,children:e.meta.name})}),B(wP,{file:e}),B(_P,{file:e,i18n:t,toggleFileCard:s,metaFields:i})]})}function dV(n){if(!n.isUploaded){if(n.error&&!n.hideRetryButton){n.uppy.retryUpload(n.file.id);return}n.resumableUploads&&!n.hidePauseResumeButton?n.uppy.pauseResume(n.file.id):n.individualCancellation&&!n.hideCancelButton&&n.uppy.removeFile(n.file.id)}}function n_(n){return n.isUploaded?n.i18n("uploadComplete"):n.error?n.i18n("retryUpload"):n.resumableUploads?n.file.isPaused?n.i18n("resumeUpload"):n.i18n("pauseUpload"):n.individualCancellation?n.i18n("cancelUpload"):""}function ug(n){return B("div",{className:"uppy-Dashboard-Item-progress",children:B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":n_(n),title:n_(n),onClick:()=>dV(n),children:n.children})})}function ad({children:n}){return B("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:n})}function dg({progress:n}){const e=2*Math.PI*15;return B("g",{children:[B("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),B("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*n})]})}function hV(n){return!n.file.progress.uploadStarted||n.file.progress.percentage===void 0?null:n.isUploaded?B("div",{className:"uppy-Dashboard-Item-progress",children:B("div",{className:"uppy-Dashboard-Item-progressIndicator",children:B(ad,{children:[B("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),B("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):n.recoveredState?null:n.error&&!n.hideRetryButton?B(ug,{...n,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[B("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),B("path",{d:"M7.9 3H10v2H7.9z"}),B("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),B("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):n.resumableUploads&&!n.hidePauseResumeButton?B(ug,{...n,children:B(ad,{children:[B(dg,{progress:n.file.progress.percentage}),n.file.isPaused?B("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):B("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[B("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),B("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!n.resumableUploads&&n.individualCancellation&&!n.hideCancelButton?B(ug,{...n,children:B(ad,{children:[B(dg,{progress:n.file.progress.percentage}),B("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):B("div",{className:"uppy-Dashboard-Item-progress",children:B("div",{className:"uppy-Dashboard-Item-progressIndicator",children:B(ad,{children:B(dg,{progress:n.file.progress.percentage})})})})}class fV extends Vn{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!XB(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,s=!!e.progress.uploadComplete&&!t&&!e.error,i=!!e.progress.uploadStarted||!!t,a=e.progress.uploadStarted&&!e.progress.uploadComplete||t,c=e.error||!1,{isGhost:u}=e;let d=(this.props.individualCancellation||!a)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(d=!0);const h=Os({"uppy-Dashboard-Item":!0,"is-inprogress":a&&!this.props.recoveredState,"is-processing":t,"is-complete":s,"is-error":!!c,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":u});return B("div",{className:h,id:`uppy_${e.id}`,role:this.props.role,children:[B("div",{className:"uppy-Dashboard-Item-preview",children:[B(uV,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),B(hV,{uppy:this.props.uppy,file:e,error:c,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),B("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[B(cV,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),B(nV,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:i,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function pV(n,e){const t=[];let s=[];return n.forEach(i=>{s.length<e?s.push(i):(t.push(s),s=[i])}),s.length&&t.push(s),t}function mV({id:n,i18n:e,uppy:t,files:s,resumableUploads:i,hideRetryButton:a,hidePauseResumeButton:c,hideCancelButton:u,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:p,isSingleFile:m,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:_,recoveredState:v,individualCancellation:w,itemsPerRow:N,openFileEditor:P,canEditFile:C,toggleAddFilesPanel:A,containerWidth:k,containerHeight:M}){const E=N===1?71:200,T=Ex(()=>{const O=(L,V)=>Number(s[V].isGhost)-Number(s[L].isGhost),F=Object.keys(s);return v&&F.sort(O),pV(F,N)},[s,N,v]),I=O=>B("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:O.map(F=>B(fV,{uppy:t,id:n,i18n:e,resumableUploads:i,individualCancellation:w,hideRetryButton:a,hidePauseResumeButton:c,hideCancelButton:u,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:p,recoveredState:v,isSingleFile:m,containerWidth:k,containerHeight:M,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:_,role:"listitem",openFileEditor:P,canEditFile:C,toggleAddFilesPanel:A,file:s[F]},F))},O[0]);return m?B("div",{class:"uppy-Dashboard-files",children:I(T[0])}):B(Iz,{class:"uppy-Dashboard-files",role:"list",data:T,renderRow:I,rowHeight:E})}function gV({activePickerPanel:n,className:e,hideAllPanels:t,i18n:s,state:i,uppy:a}){const c=Cd(null);return B("div",{className:Os("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${n.id}`,onDragOver:li,onDragLeave:li,onDrop:li,onPaste:li,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s("importFrom",{name:n.name})}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:s("cancel")})]}),B("div",{ref:c,className:"uppy-DashboardContent-panelBody",children:a.getPlugin(n.id).render(i,c.current)})]})}const Qs={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function yV(n,e,t,s={}){if(n)return Qs.STATE_ERROR;if(e)return Qs.STATE_COMPLETE;if(t)return Qs.STATE_PAUSED;let i=Qs.STATE_WAITING;const a=Object.keys(s);for(let c=0;c<a.length;c++){const{progress:u}=s[a[c]];if(u.uploadStarted&&!u.uploadComplete)return Qs.STATE_UPLOADING;u.preprocess&&i!==Qs.STATE_UPLOADING&&(i=Qs.STATE_PREPROCESSING),u.postprocess&&i!==Qs.STATE_UPLOADING&&i!==Qs.STATE_PREPROCESSING&&(i=Qs.STATE_POSTPROCESSING)}return i}function xV({files:n,i18n:e,isAllComplete:t,isAllErrored:s,isAllPaused:i,inProgressNotPausedFiles:a,newFiles:c,processingFiles:u}){switch(yV(s,t,i,n)){case"uploading":return e("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:u.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:c.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function vV(n){const{i18n:e,isAllComplete:t,hideCancelButton:s,maxNumberOfFiles:i,toggleAddFilesPanel:a,uppy:c}=n;let{allowNewUpload:u}=n;return u&&i&&(u=n.totalFileCount<n.maxNumberOfFiles),B("div",{className:"uppy-DashboardContent-bar",children:[!t&&!s?B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>c.cancelAll(),children:e("cancel")}):B("div",{}),B("div",{className:"uppy-DashboardContent-title",children:B(xV,{...n})}),u?B("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>a(!0),children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:B("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),B("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):B("div",{})]})}const Ka="uppy-transition-slideDownUp",s_=250;function od({children:n}){const[e,t]=Wd(null),[s,i]=Wd(""),a=Cd(),c=Cd(),u=Cd(),d=()=>{i(`${Ka}-enter`),cancelAnimationFrame(u.current),clearTimeout(c.current),c.current=void 0,u.current=requestAnimationFrame(()=>{i(`${Ka}-enter ${Ka}-enter-active`),a.current=setTimeout(()=>{i("")},s_)})},h=()=>{i(`${Ka}-leave`),cancelAnimationFrame(u.current),clearTimeout(a.current),a.current=void 0,u.current=requestAnimationFrame(()=>{i(`${Ka}-leave ${Ka}-leave-active`),c.current=setTimeout(()=>{t(null),i("")},s_)})};return ty(()=>{const p=ks(n)[0];e!==p&&(p&&!e?d():e&&!p&&!c.current&&h(),t(p))},[n,e]),ty(()=>()=>{clearTimeout(a.current),clearTimeout(c.current),cancelAnimationFrame(u.current)},[]),e?KT(e,{className:Os(s,e.props.className)}):null}const r_=900,i_=700,hg=576,a_=330;function bV(n){const e=n.totalFileCount===0,t=n.totalFileCount===1,s=n.containerWidth>hg,i=n.containerHeight>a_,a=Os({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":n.disabled,"uppy-Dashboard--animateOpenClose":n.animateOpenClose,"uppy-Dashboard--isClosing":n.isClosing,"uppy-Dashboard--isDraggingOver":n.isDraggingOver,"uppy-Dashboard--modal":!n.inline,"uppy-size--md":n.containerWidth>hg,"uppy-size--lg":n.containerWidth>i_,"uppy-size--xl":n.containerWidth>r_,"uppy-size--height-md":n.containerHeight>a_,"uppy-Dashboard--isAddFilesPanelVisible":n.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":n.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":n.singleFileFullScreen&&t&&i});let c=1;n.containerWidth>r_?c=5:n.containerWidth>i_?c=4:n.containerWidth>hg&&(c=3);const u=n.showSelectedFiles&&!e,d=n.recoveredState?Object.keys(n.recoveredState.files).length:null,h=n.files?Object.keys(n.files).filter(y=>n.files[y].isGhost).length:0,p=()=>h>0?n.i18n("recoveredXFiles",{smart_count:h}):n.i18n("recoveredAllFiles");return B("div",{className:a,"data-uppy-theme":n.theme,"data-uppy-num-acquirers":n.acquirers.length,"data-uppy-drag-drop-supported":!n.disableLocalFiles&&zB(),"aria-hidden":n.inline?"false":n.isHidden,"aria-disabled":n.disabled,"aria-label":n.inline?n.i18n("dashboardTitle"):n.i18n("dashboardWindowTitle"),onPaste:n.handlePaste,onDragOver:n.handleDragOver,onDragLeave:n.handleDragLeave,onDrop:n.handleDrop,children:[B("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:n.handleClickOutside}),B("div",{className:"uppy-Dashboard-inner",role:n.inline?void 0:"dialog",style:{width:n.inline&&n.width?n.width:"",height:n.inline&&n.height?n.height:""},children:[n.inline?null:B("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":n.i18n("closeModal"),title:n.i18n("closeModal"),onClick:n.closeModal,children:B("span",{"aria-hidden":"true",children:""})}),B("div",{className:"uppy-Dashboard-innerWrap",children:[B("div",{className:"uppy-Dashboard-dropFilesHereHint",children:n.i18n("dropHint")}),u&&B(vV,{...n}),d&&B("div",{className:"uppy-Dashboard-serviceMsg",children:[B("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:B("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[B("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),B("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),B("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),B("strong",{className:"uppy-Dashboard-serviceMsg-title",children:n.i18n("sessionRestored")}),B("div",{className:"uppy-Dashboard-serviceMsg-text",children:p()})]}),u?B(mV,{id:n.id,i18n:n.i18n,uppy:n.uppy,files:n.files,resumableUploads:n.resumableUploads,hideRetryButton:n.hideRetryButton,hidePauseResumeButton:n.hidePauseResumeButton,hideCancelButton:n.hideCancelButton,showLinkToFileUploadResult:n.showLinkToFileUploadResult,showRemoveButtonAfterComplete:n.showRemoveButtonAfterComplete,metaFields:n.metaFields,toggleFileCard:n.toggleFileCard,handleRequestThumbnail:n.handleRequestThumbnail,handleCancelThumbnail:n.handleCancelThumbnail,recoveredState:n.recoveredState,individualCancellation:n.individualCancellation,openFileEditor:n.openFileEditor,canEditFile:n.canEditFile,toggleAddFilesPanel:n.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:c,containerWidth:n.containerWidth,containerHeight:n.containerHeight}):B(bP,{i18n:n.i18n,i18nArray:n.i18nArray,acquirers:n.acquirers,handleInputChange:n.handleInputChange,maxNumberOfFiles:n.maxNumberOfFiles,allowedFileTypes:n.allowedFileTypes,showNativePhotoCameraButton:n.showNativePhotoCameraButton,showNativeVideoCameraButton:n.showNativeVideoCameraButton,nativeCameraFacingMode:n.nativeCameraFacingMode,showPanel:n.showPanel,activePickerPanel:n.activePickerPanel,disableLocalFiles:n.disableLocalFiles,fileManagerSelectionType:n.fileManagerSelectionType,note:n.note,proudlyDisplayPoweredByUppy:n.proudlyDisplayPoweredByUppy}),B(od,{children:n.showAddFilesPanel?B(BB,{...n,isSizeMD:s},"AddFiles"):null}),B(od,{children:n.fileCardFor?B(YB,{...n},"FileCard"):null}),B(od,{children:n.activePickerPanel?B(gV,{...n},"Picker"):null}),B(od,{children:n.showFileEditor?B(VB,{...n},"Editor"):null}),B("div",{className:"uppy-Dashboard-progressindicators",children:n.progressindicators.map(y=>n.uppy.getPlugin(y.id).render(n.state))})]})]})]})}const wV={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},CP=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var SV=iP();const _V=Ls(SV);function jP(n,e){if(e){const t=n.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return n}function CV(){let n=!1;return _V((t,s)=>{const i=jP(t,s),a=i.contains(document.activeElement);if(a&&n)return;const c=i.querySelector("[data-uppy-super-focusable]");a&&!c||(c?(c.focus({preventScroll:!0}),n=!0):(i.querySelector(CP)?.focus({preventScroll:!0}),n=!1))},260)}function o_(n,e){const t=e[0];t&&(t.focus(),n.preventDefault())}function jV(n,e){const t=e[e.length-1];t&&(t.focus(),n.preventDefault())}function NV(n){return n.contains(document.activeElement)}function NP(n,e,t){const s=jP(t,e),i=Ll(s.querySelectorAll(CP)),a=i.indexOf(document.activeElement);NV(s)?n.shiftKey&&a===0?jV(n,i):!n.shiftKey&&a===i.length-1&&o_(n,i):o_(n,i)}function kV(n,e,t){e===null||NP(n,e,t)}const l_=9,TV=27;function c_(){const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}const PV={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Oz,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};let EV=class extends oa{static VERSION=LB.version;#t;modalName=`uppy-Dashboard-${Mx()}`;superFocus=CV();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(e,t){const s=t?.autoOpen??null;super(e,{...PV,...t,autoOpen:s}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=wV,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=e=>{const s=this.getPluginState().targets.filter(i=>i.id!==e.id);this.setPluginState({targets:s})};addTarget=e=>{const t=e.id||e.constructor.name,s=e.title||t,i=e.type;if(i!=="acquirer"&&i!=="progressindicator"&&i!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const a={id:t,name:s,type:i},u=this.getPluginState().targets.slice();return u.push(a),this.setPluginState({targets:u}),this.el};hideAllPanels=()=>{const e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))};showPanel=e=>{const{targets:t}=this.getPluginState(),s=t.find(i=>i.type==="acquirer"&&i.id===e);this.setPluginState({activePickerPanel:s,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)};canEditFile=e=>{const{targets:t}=this.getPluginState();return this.#i(t).some(i=>this.uppy.getPlugin(i.id).canEditFile(e))};openFileEditor=e=>{const{targets:t}=this.getPluginState(),s=this.#i(t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),s.forEach(i=>{this.uppy.getPlugin(i.id).selectFile(e)})};closeFileEditor=()=>{const{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{const{targets:e}=this.getPluginState();this.#i(e).forEach(s=>{this.uppy.getPlugin(s.id).save()}),this.closeFileEditor()};openModal=()=>{const{promise:e,resolve:t}=c_();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const s=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",s,!1),t()};this.el.addEventListener("animationend",s,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e};closeModal=e=>{const t=e?.manualClose??!0,{isHidden:s,isClosing:i}=this.getPluginState();if(s||i)return;const{promise:a,resolve:c}=c_();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const u=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",u,!1),c()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),c();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),a};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})};handleSystemDarkModeChange=e=>{const t=e.matches;this.uppy.log(`[Dashboard] Dark mode is ${t?"on":"off"}`),this.setDarkModeCapability(t)};toggleFileCard=(e,t)=>{const s=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",s):this.uppy.emit("dashboard:file-edit-complete",s),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};addFiles=e=>{const t=e.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||s.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(s){this.uppy.log(s)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(e=>{const t=e[0],{width:s,height:i}=t.contentRect;this.setPluginState({containerWidth:s,containerHeight:i,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;!e.areInsidesReadyToBeVisible&&!t&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=e=>{const t=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],s=this.#t??Ll(this.el.querySelectorAll(t)).filter(i=>!i.classList.contains("uppy-Dashboard-close"));for(const i of s)i.tagName==="A"?i.setAttribute("aria-disabled",e):i.disabled=e;e?this.#t=s:this.#t=null,this.dashboardIsDisabled=e};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=e=>{this.isModalOpen()&&(!e.state||!e.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()};handleKeyDownInModal=e=>{e.keyCode===TV&&this.requestCloseModal(),e.keyCode===l_&&NP(e,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=e=>{this.uppy.iteratePlugins(s=>{s.type==="acquirer"&&s.handleRootPaste?.(e)});const t=Ll(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))};handleInputChange=e=>{e.preventDefault();const t=Ll(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))};handleDragOver=e=>{e.preventDefault(),e.stopPropagation();const t=()=>{let c=!0;return this.uppy.iteratePlugins(u=>{u.canHandleRootDrop?.(e)&&(c=!0)}),c},s=()=>{const{types:c}=e.dataTransfer;return c.some(u=>u==="Files")},i=t(),a=s();if(!i&&!a||this.opts.disabled||this.opts.disableLocalFiles&&(a||!i)||!this.uppy.getState().allowNewUpload){e.dataTransfer.dropEffect="none";return}e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e)};handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)};handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(a=>{a.type==="acquirer"&&a.handleRootDrop?.(e)});let t=!1;const s=a=>{this.uppy.log(a,"error"),t||(this.uppy.info(a.message,"error"),t=!0)};this.uppy.log("[Dashboard] Processing dropped files");const i=await DB(e.dataTransfer,{logDropError:s});i.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(i)),this.opts.onDrop(e)};handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};handleKeyDownInInline=e=>{e.keyCode===l_&&kV(e,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)};handleComplete=({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()};handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};#e=()=>{if(this.opts.disableThumbnailGenerator)return;const e=600,t=this.uppy.getFiles();if(t.length===1){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s?.setOptions({thumbnailWidth:e});const i={...t[0],preview:void 0};s?.requestThumbnail(i).then(()=>{s?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#n=e=>{const t=e[0],{metaFields:s}=this.getPluginState(),i=s&&s.length>0,a=this.canEditFile(t);i&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,t.id):a&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const e=t_(this.opts.trigger);e?e.forEach(t=>t.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#u),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#e),this.uppy.on("file-removed",this.#e),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#n)};removeEvents=()=>{const e=t_(this.opts.trigger);!this.opts.inline&&e&&e.forEach(t=>t.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#u),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#e),this.uppy.off("file-removed",this.#e),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#n)};superFocusOnEachUpdate=()=>{const e=this.el.contains(document.activeElement),t=document.activeElement===document.body||document.activeElement===null,s=this.uppy.getState().info.length===0,i=!this.opts.inline;s&&(i||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)};#s=e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}};#r=e=>{const t=this.uppy.getPlugin(e.id);return typeof t.isSupported!="function"?!0:t.isSupported()};#a=e=>e.filter(t=>t.type==="acquirer"&&this.#r(t)).map(this.#s);#o=e=>e.filter(t=>t.type==="progressindicator").map(this.#s);#i=e=>e.filter(t=>t.type==="editor").map(this.#s);render=e=>{const t=this.getPluginState(),{files:s,capabilities:i,allowNewUpload:a}=e,{newFiles:c,uploadStartedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:p,inProgressNotPausedFiles:m,processingFiles:y,isUploadStarted:b,isAllComplete:_,isAllPaused:v}=this.uppy.getObjectOfFilesPerState(),w=this.#a(t.targets),N=this.#o(t.targets),P=this.#i(t.targets);let C;return this.opts.theme==="auto"?C=i.darkMode?"dark":"light":C=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),bV({state:e,isHidden:t.isHidden,files:s,newFiles:c,uploadStartedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:p,inProgressNotPausedFiles:m,processingFiles:y,isUploadStarted:b,isAllComplete:_,isAllPaused:v,totalFileCount:Object.keys(s).length,totalProgress:e.totalProgress,allowNewUpload:a,acquirers:w,theme:C,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:N,editors:P,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})};#c=()=>{const{plugins:e}=this.opts;e.forEach(t=>{const s=this.uppy.getPlugin(t);s?s.mount(this,s):this.uppy.log(`[Uppy] Dashboard could not find plugin '${t}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#f=()=>{this.uppy.iteratePlugins(this.#u)};#u=e=>{const t=["acquirer","editor"];e&&!e.opts?.target&&t.includes(e.type)&&(this.getPluginState().targets.some(i=>e.id===i.id)||e.mount(this,e))};#d(){const{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:s,hideCancelButton:i,showProgressDetails:a,hideProgressAfterFinish:c,locale:u,doneButtonHandler:d}=this.opts;return{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:s,hideCancelButton:i,showProgressDetails:a,hideAfterFinish:c,locale:u,doneButtonHandler:d}}#l(){const{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:s,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:s,waitForThumbnailsBeforeUpload:i,lazy:!i}}#h(){return{}}setOptions(e){super.setOptions(e),this.uppy.getPlugin(this.#p())?.setOptions(this.#d()),this.uppy.getPlugin(this.#m())?.setOptions(this.#l())}#p(){return`${this.id}:StatusBar`}#m(){return`${this.id}:ThumbnailGenerator`}#g(){return`${this.id}:Informer`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:s,allowMultipleUploadBatches:i}=this.uppy.opts;(s||i)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:a}=this.opts;a&&this.mount(a,this),this.opts.disableStatusBar||this.uppy.use(iB,{id:this.#p(),target:this,...this.#d()}),this.opts.disableInformer||this.uppy.use(Pz,{id:this.#g(),target:this,...this.#h()}),this.opts.disableThumbnailGenerator||this.uppy.use(RB,{id:this.#m(),...this.#l()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const c=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${c?"on":"off"}`),this.setDarkModeCapability(c),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#c(),this.#f(),this.initEvents()};uninstall=()=>{if(!this.opts.disableInformer){const t=this.uppy.getPlugin(`${this.id}:Informer`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableStatusBar){const t=this.uppy.getPlugin(`${this.id}:StatusBar`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableThumbnailGenerator){const t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t&&this.uppy.removePlugin(t)}const{plugins:e}=this.opts;e.forEach(t=>{const s=this.uppy.getPlugin(t);s&&s.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}};const AV=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],MV=/^(aria-|data-)/,kP=n=>Object.fromEntries(Object.entries(n).filter(([e])=>MV.test(e)||AV.includes(e)));function RV(n,e){const t=kP(n);return Object.keys(n).some(s=>!Object.hasOwn(t,s)&&n[s]!==e[s])}class IV extends x.Component{static defaultProps={open:void 0,onRequestClose:void 0};container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(e){const{uppy:t,open:s,onRequestClose:i}=this.props;if(e.uppy!==t)this.uninstallPlugin(e),this.installPlugin();else if(RV(this.props,e)){const{uppy:a,...c}={...this.props,inline:!1,onRequestCloseModal:i};this.plugin.setOptions(c)}e.open&&!s?this.plugin.closeModal():!e.open&&s&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:e=this.container,open:t,onRequestClose:s,uppy:i,...a}=this.props,c={id:"DashboardModal",...a,inline:!1,target:e,open:t,onRequestCloseModal:s};i.use(EV,c),this.plugin=i.getPlugin(c.id),t&&this.plugin.openModal()}uninstallPlugin(e=this.props){const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return x.createElement("div",{className:"uppy-Container",ref:e=>{this.container=e},...kP(this.props)})}}x.createContext({uppy:void 0,status:"init",progress:0});var fg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function OV(){if(u_)return pg;u_=1;var n=nc();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,s=n.useSyncExternalStore,i=n.useRef,a=n.useEffect,c=n.useMemo,u=n.useDebugValue;return pg.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var b=i(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=c(function(){function w(k){if(!N){if(N=!0,P=k,k=m(k),y!==void 0&&_.hasValue){var M=_.value;if(y(M,k))return C=M}return C=k}if(M=C,t(P,k))return M;var E=m(k);return y!==void 0&&y(M,E)?(P=k,M):(P=k,C=E)}var N=!1,P,C,A=p===void 0?null:p;return[function(){return w(h())},A===null?void 0:function(){return w(A())}]},[h,p,m,y]);var v=s(d,b[0],b[1]);return a(function(){_.hasValue=!0,_.value=v},[v]),u(v),v},pg}var d_;function DV(){return d_||(d_=1,fg.exports=OV()),fg.exports}DV();function TP(n,e){return Object.hasOwn(n,e)}class FV extends Error{isNetworkError;cause;constructor(e,t){super(e),this.cause=t?.cause,this.cause&&TP(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class LV extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function zV(...n){return fetch(...n).catch(e=>{throw e.name==="AbortError"?e:new LV(e)})}function BV(n){const t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(n)?.[1];return`${/^http:\/\//i.test(n)?"ws":"wss"}://${t}`}class VV extends Error{name="UserFacingApiError"}var mg={},gg,h_;function UV(){if(h_)return gg;h_=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return gg=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var s=this._timeouts.shift();if(s===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),s=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},s),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var s=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){s._operationTimeoutCb()},s._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,s=0,i=0;i<this._errors.length;i++){var a=this._errors[i],c=a.message,u=(e[c]||0)+1;e[c]=u,u>=s&&(t=a,s=u)}return t},gg}var f_;function $V(){return f_||(f_=1,(function(n){var e=UV();n.operation=function(t){var s=n.timeouts(t);return new e(s,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)s[i]=t[i];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],c=0;c<s.retries;c++)a.push(this.createTimeout(c,s));return t&&t.forever&&!a.length&&a.push(this.createTimeout(c,s)),a.sort(function(u,d){return u-d}),a},n.createTimeout=function(t,s){var i=s.randomize?Math.random()+1:1,a=Math.round(i*Math.max(s.minTimeout,1)*Math.pow(s.factor,t));return a=Math.min(a,s.maxTimeout),a},n.wrap=function(t,s,i){if(s instanceof Array&&(i=s,s=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var c=0;c<i.length;c++){var u=i[c],d=t[u];t[u]=(function(p){var m=n.operation(s),y=Array.prototype.slice.call(arguments,1),b=y.pop();y.push(function(_){m.retry(_)||(_&&(arguments[0]=m.mainError()),b.apply(this,arguments))}),m.attempt(function(){p.apply(t,y)})}).bind(t,d),t[u].options=s}}})(mg)),mg}var yg,p_;function qV(){return p_||(p_=1,yg=$V()),yg}var WV=qV();const GV=Ls(WV),HV=Object.prototype.toString,KV=n=>HV.call(n)==="[object Error]",QV=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function YV(n){return n&&KV(n)&&n.name==="TypeError"&&typeof n.message=="string"?n.message==="Load failed"?n.stack===void 0:QV.has(n.message):!1}class ly extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const m_=(n,e,t)=>{const s=t.retries-(e-1);return n.attemptNumber=e,n.retriesLeft=s,n};async function g_(n,e){return new Promise((t,s)=>{e={...e},e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.retries??=10;const i=GV.operation(e),a=()=>{i.stop(),s(e.signal?.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",a,{once:!0});const c=()=>{e.signal?.removeEventListener("abort",a),i.stop()};i.attempt(async u=>{try{const d=await n(u);c(),t(d)}catch(d){try{if(!(d instanceof Error))throw new TypeError(`Non-error was thrown: "${d}". You should only throw errors.`);if(d instanceof ly)throw d.originalError;if(d instanceof TypeError&&!YV(d))throw d;if(m_(d,u,e),await e.shouldRetry(d)||(i.stop(),s(d)),await e.onFailedAttempt(d),!i.retry(d))throw i.mainError()}catch(h){m_(h,u,e),c(),s(h)}}})})}const XV="4.5.2",ZV={version:XV};class JV extends Error{isAuthError;constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}function eU(n){return n.replace(/\/$/,"")}const y_=10,tU=300*1e3,nU=401;class sU extends Error{statusCode;constructor({statusCode:e,message:t}){super(t),this.name="HttpError",this.statusCode=e}}async function rU(n){if(n.status===nU)throw new JV;if(n.ok)return n.json();let e=`Failed request with status: ${n.status}. ${n.statusText}`,t;try{t=await n.json(),t.message&&(e=`${e} message: ${t.message}`),t.requestId&&(e=`${e} request-Id: ${t.requestId}`)}catch(s){throw new Error(e,{cause:s})}throw n.status>=400&&n.status<=499&&t.message?new VV(t.message):new sU({statusCode:n.status,message:e})}function iU(n,e,t){const{progress:s,bytesUploaded:i,bytesTotal:a}=e;s&&(n.uppy.log(`Upload progress: ${s}`),n.uppy.emit("upload-progress",t,{uploadStarted:t.progress.uploadStarted??0,bytesUploaded:i,bytesTotal:a}))}class aU{static VERSION=ZV.version;#t;uppy;opts;constructor(e,t){this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.#t=t.companionHeaders}setCompanionHeaders(e){this.#t=e}[Symbol.for("uppy test: getCompanionHeaders")](){return this.#t}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return eU(e?.[t]?e[t]:t)}async headers(e=!1){return{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...this.#t}}onReceiveResponse(e){const{headers:t}=e,i=this.uppy.getState().companion||{},a=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==i[a]&&this.uppy.setState({companion:{...i,[a]:t.get("i-am")}})}#e(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}async request({path:e,method:t="GET",data:s,skipPostResponse:i,signal:a}){try{const c=await this.headers(!s),u=await zV(this.#e(e),{method:t,signal:a,headers:c,credentials:this.opts.companionCookiesRule||"same-origin",body:s?JSON.stringify(s):null});return i||this.onReceiveResponse(u),await rU(u)}catch(c){throw c.isAuthError||c.name==="UserFacingApiError"||c.name==="AbortError"?c:new FV(`Could not ${t} ${this.#e(e)}`,{cause:c})}}async get(e,t){return this.request({...t,path:e})}async post(e,t,s){return this.request({...s,path:e,method:"POST",data:t})}async delete(e,t,s){return this.request({...s,path:e,method:"DELETE",data:t})}async uploadRemoteFile(e,t,s){try{const{signal:i,getQueue:a}=s||{};return await g_(async()=>{const c=this.uppy.getFile(e.id)?.serverToken;if(c!=null)return this.uppy.log(`Connecting to exiting websocket ${c}`),this.#s({file:e,queue:a(),signal:i});const d=await a().wrapPromiseFunction(async(...h)=>{try{return await this.#n(...h)}catch(p){if(p.isAuthError)throw new ly(p);if(p.cause==null)throw p;const m=p.cause,y=()=>[408,409,429,418,423].includes(m.statusCode)||m.statusCode>=500&&m.statusCode<=599&&![501,505].includes(m.statusCode);throw m.name==="HttpError"&&!y()?new ly(m):m}},{priority:-1})({file:e,postBody:t,signal:i}).abortOn(i);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:d}),this.#s({file:this.uppy.getFile(e.id),queue:a(),signal:i})},{retries:y_,signal:i,onFailedAttempt:c=>this.uppy.log(`Retrying upload due to: ${c.message}`,"warning")})}catch(i){if(i.name==="AbortError")return;throw this.uppy.emit("upload-error",e,i),i}}#n=async({file:e,postBody:t,signal:s})=>{if(e.remote?.url==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(e.remote.url,{...e.remote.body,...t},{signal:s})).token};async#s({file:e,queue:t,signal:s}){let i;const{capabilities:a}=this.uppy.getState();try{return await new Promise((c,u)=>{const d=e.serverToken,h=BV(e.remote.companionUrl);let p,m,y,{isPaused:b}=e;const _=(E,T)=>{if(p==null||p.readyState!==p.OPEN){this.uppy.log(`Cannot send "${E}" to socket ${e.id} because the socket state was ${String(p?.readyState)}`,"warning");return}p.send(JSON.stringify({action:E,payload:T??{}}))};function v(){a.resumableUploads&&_(b?"pause":"resume")}const w=async()=>{m&&m.abort(),m=new AbortController;const E=I=>{this.uppy.setFileState(e.id,{serverToken:null}),m?.abort?.(),u(I)};function T(){clearTimeout(y),!b&&(y=setTimeout(()=>E(new Error("Timeout waiting for message from Companion socket")),tU))}try{await t.wrapPromiseFunction(async()=>{await g_(async()=>new Promise((O,F)=>{p=new WebSocket(`${h}/api/${d}`),T(),p.addEventListener("close",()=>{p=void 0,F(new Error("Socket closed unexpectedly"))}),p.addEventListener("error",V=>{this.uppy.log(`Companion socket error ${JSON.stringify(V)}, closing socket`,"warning"),p?.close()}),p.addEventListener("open",()=>{v()}),p.addEventListener("message",V=>{T();try{const{action:z,payload:W}=JSON.parse(V.data);switch(z){case"progress":{iU(this,W,this.uppy.getFile(e.id));break}case"success":{const G=W.response?.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:W.url,status:W.response?.status??200,body:G?JSON.parse(G):void 0}),m?.abort?.(),c();break}case"error":{const{message:G}=W.error;throw Object.assign(new Error(G),{cause:W.error})}default:this.uppy.log(`Companion socket unknown action ${z}`,"warning")}}catch(z){E(z)}});const L=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(y),p&&p.close(),p=void 0};m.signal.addEventListener("abort",()=>{L()})}),{retries:y_,signal:m.signal,onFailedAttempt:()=>{m.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(m.signal)}catch(I){if(m.signal.aborted)return;E(I)}},N=E=>{a.resumableUploads&&(b=E,p&&v())},P=E=>{a.individualCancellation&&E.id===e.id&&(_("cancel"),m?.abort?.(),this.uppy.log(`upload ${e.id} was removed`),c())},C=()=>{_("cancel"),m?.abort?.(),this.uppy.log(`upload ${e.id} was canceled`),c()},A=(E,T)=>{E?.id===e.id&&N(T)},k=()=>N(!0),M=()=>N(!1);this.uppy.on("file-removed",P),this.uppy.on("cancel-all",C),this.uppy.on("upload-pause",A),this.uppy.on("pause-all",k),this.uppy.on("resume-all",M),i=()=>{this.uppy.off("file-removed",P),this.uppy.off("cancel-all",C),this.uppy.off("upload-pause",A),this.uppy.off("pause-all",k),this.uppy.off("resume-all",M)},s.addEventListener("abort",()=>{m?.abort()}),w()})}finally{i?.()}}}class oU{#t;#e=[];constructor(e){this.#t=e}on(e,t){return this.#e.push([e,t]),this.#t.on(e,t)}remove(){for(const[e,t]of this.#e.splice(0))this.#t.off(e,t)}onFilePause(e,t){this.on("upload-pause",(s,i)=>{e===s?.id&&t(i)})}onFileRemove(e,t){this.on("file-removed",s=>{e===s.id&&t(s.id)})}onPause(e,t){this.on("upload-pause",(s,i)=>{e===s?.id&&t(i)})}onRetry(e,t){this.on("upload-retry",s=>{e===s?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#t.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#t.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...s)=>{this.#t.getFile(e)&&t(...s)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#t.getFile(e)&&t()})}}const{AbortController:xg}=globalThis,PP=(n="Aborted",e)=>{const t=new DOMException(n,"AbortError");return e!=null&&TP(e,"cause")&&Object.defineProperty(t,"cause",{__proto__:null,configurable:!0,writable:!0,value:e.cause}),t};function lU(n){const e=t=>"error"in t&&!!t.error;return n.filter(t=>!e(t))}function cU(n){return n.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function x_(n,e){return n===!0?Object.keys(e):Array.isArray(n)?n:[]}function uU(n){return new Error("Cancelled",{cause:n})}function v_(n){if(n!=null){const e=()=>this.abort(n.reason);n.addEventListener("abort",e,{once:!0});const t=()=>{n.removeEventListener("abort",e)};this.then?.(t,t)}return this}class dU{#t=0;#e=[];#n=!1;#s;#r=1;#a;#o;limit;constructor(e){typeof e!="number"||e===0?this.limit=1/0:this.limit=e}#i(e){this.#t+=1;let t=!1,s;try{s=e()}catch(i){throw this.#t-=1,i}return{abort:i=>{t||(t=!0,this.#t-=1,s?.(i),this.#c())},done:()=>{t||(t=!0,this.#t-=1,this.#c())}}}#c(){queueMicrotask(()=>this.#f())}#f(){if(this.#n||this.#t>=this.limit||this.#e.length===0)return;const e=this.#e.shift();if(e==null)throw new Error("Invariant violation: next is null");const t=this.#i(e.fn);e.abort=t.abort,e.done=t.done}#u(e,t){const s={fn:e,priority:t?.priority||0,abort:()=>{this.#d(s)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=this.#e.findIndex(a=>s.priority>a.priority);return i===-1?this.#e.push(s):this.#e.splice(i,0,s),s}#d(e){const t=this.#e.indexOf(e);t!==-1&&this.#e.splice(t,1)}run(e,t){return!this.#n&&this.#t<this.limit?this.#i(e):this.#u(e,t)}wrapSyncFunction(e,t){return(...s)=>{const i=this.run(()=>(e(...s),queueMicrotask(()=>i.done()),()=>{}),t);return{abortOn:v_,abort(){i.abort()}}}}wrapPromiseFunction(e,t){return(...s)=>{let i;const a=new Promise((c,u)=>{i=this.run(()=>{let d,h;try{h=Promise.resolve(e(...s))}catch(p){h=Promise.reject(p)}return h.then(p=>{d?u(d):(i.done(),c(p))},p=>{d?u(d):(i.done(),u(p))}),p=>{d=uU(p)}},t)});return a.abort=c=>{i.abort(c)},a.abortOn=v_,a}}resume(){this.#n=!1,clearTimeout(this.#s);for(let e=0;e<this.limit;e++)this.#c()}#l=()=>this.resume();pause(e=null){this.#n=!0,clearTimeout(this.#s),e!=null&&(this.#s=setTimeout(this.#l,e))}rateLimit(e){clearTimeout(this.#o),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#a=this.limit-1,this.limit=this.#r,this.#o=setTimeout(this.#h,e))}#h=()=>{if(this.#n){this.#o=setTimeout(this.#h,0);return}this.#r=this.limit,this.limit=Math.ceil((this.#a+this.#r)/2);for(let e=this.#r;e<=this.limit;e++)this.#c();this.#a-this.#r>3?this.#o=setTimeout(this.#h,2e3):this.#r=Math.floor(this.#r/2)};get isPaused(){return this.#n}}const hU="4.3.2",fU={version:hU};function pU({method:n="PUT",CanonicalUri:e="/",CanonicalQueryString:t="",SignedHeaders:s,HashedPayload:i}){const a=Object.keys(s).map(c=>c.toLowerCase()).sort();return[n,e,t,...a.map(c=>`${c}:${s[c]}`),"",a.join(";"),i].join(`
`)}const Bx=new TextEncoder,Vx={name:"HMAC",hash:"SHA-256"};async function mU(n){const{subtle:e}=globalThis.crypto;return e.digest(Vx.hash,Bx.encode(n))}async function gU(n){const{subtle:e}=globalThis.crypto;return e.importKey("raw",typeof n=="string"?Bx.encode(n):n,Vx,!1,["sign"])}function b_(n){const e=new Uint8Array(n);let t="";for(let s=0;s<e.length;s++)t+=e[s].toString(16).padStart(2,"0");return t}async function Tl(n,e){const{subtle:t}=globalThis.crypto;return t.sign(Vx,await gU(n),Bx.encode(e))}async function yU({accountKey:n,accountSecret:e,sessionToken:t,bucketName:s,Key:i,Region:a,expires:c,uploadId:u,partNumber:d}){const p=`s3.${a}.amazonaws.com`,m=`/${s}/${encodeURI(i).replace(/[;?:@&=+$,#!'()*]/g,I=>`%${I.charCodeAt(0).toString(16).toUpperCase()}`)}`,y="UNSIGNED-PAYLOAD",b=new Date().toISOString().replace(/[-:]|\.\d+/g,""),_=b.slice(0,8),v=`${_}/${a}/s3/aws4_request`,w=new URL(`https://${p}${m}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",y),w.searchParams.set("X-Amz-Credential",`${n}/${v}`),w.searchParams.set("X-Amz-Date",b),w.searchParams.set("X-Amz-Expires",c),w.searchParams.set("X-Amz-Security-Token",t),w.searchParams.set("X-Amz-SignedHeaders","host"),d&&w.searchParams.set("partNumber",d),u&&w.searchParams.set("uploadId",u),w.searchParams.set("x-id",d&&u?"UploadPart":"PutObject");const N=pU({CanonicalUri:m,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:p},HashedPayload:y}),P=b_(await mU(N)),C=["AWS4-HMAC-SHA256",b,v,P].join(`
`),A=await Tl(`AWS4${e}`,_),k=await Tl(A,a),M=await Tl(k,"s3"),E=await Tl(M,"aws4_request"),T=b_(await Tl(E,C));return w.searchParams.set("X-Amz-Signature",T),w}const xU=1024*1024,w_={getChunkSize(n){return Math.ceil(n.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(n){throw n}};function vU(n){if(typeof n=="string")return parseInt(n,10);if(typeof n=="number")return n;throw new TypeError("Expected a number")}const Nd=Symbol("pausing upload, not an actual error");class bU{options;#t=new xg;#e=[];#n=[];#s;#r;#a=!1;#o;#i;#c;#f;#u=e=>e?.cause===Nd?null:this.#o(e);#d=1e4;#l=5*xU;constructor(e,t){this.options={...w_,...t},this.options.getChunkSize??=w_.getChunkSize,this.#s=e,this.#r=t.file,this.#i=this.options.onSuccess,this.#o=this.options.onError,this.#c=this.options.shouldUseMultipart,this.#f=t.uploadId&&t.key,this.#h()}#h(){const e=this.#s.size,t=typeof this.#c=="function"?this.#c(this.#r):!!this.#c;if(t&&e>this.#l){let s=Math.max(this.options.getChunkSize(this.#s),this.#l),i=Math.floor(e/s);i>this.#d&&(i=this.#d,s=e/this.#d),this.#e=Array(i);for(let a=0,c=0;a<e;a+=s,c++){const u=Math.min(e,a+s),d=()=>{const h=a;return this.#s.slice(h,u)};if(this.#e[c]={getData:d,onProgress:this.#g(c),onComplete:this.#x(c),shouldUseMultipart:t},this.#f){const h=a+s>e?e-a:s;this.#e[c].setAsUploaded=()=>{this.#e[c]=null,this.#n[c].uploaded=h}}}}else this.#e=[{getData:()=>this.#s,onProgress:this.#g(0),onComplete:this.#x(0),shouldUseMultipart:t}];this.#n=this.#e.map(()=>({uploaded:0}))}#p(){this.options.companionComm.uploadFile(this.#r,this.#e,this.#t.signal).then(this.#i,this.#u),this.#a=!0}#m(){this.options.companionComm.resumeUploadFile(this.#r,this.#e,this.#t.signal).then(this.#i,this.#u)}#g=e=>t=>{if(!t.lengthComputable)return;this.#n[e].uploaded=vU(t.loaded);const s=this.#n.reduce((i,a)=>i+a.uploaded,0);this.options.onProgress(s,this.#s.size)};#x=e=>t=>{this.#e[e]=null,this.#n[e].etag=t,this.#n[e].done=!0;const s={PartNumber:e+1,ETag:t};this.options.onPartComplete(s)};#y(){this.#t.abort(),this.options.companionComm.abortFileUpload(this.#r).catch(e=>this.options.log(e))}start(){this.#a?(this.#t.signal.aborted||this.#t.abort(Nd),this.#t=new xg,this.#m()):this.#f?(this.options.companionComm.restoreUploadFile(this.#r,{uploadId:this.options.uploadId,key:this.options.key}),this.#m()):this.#p()}pause(){this.#t.abort(Nd),this.#t=new xg}abort(e){e?.really?this.#y():this.pause()}[Symbol.for("uppy test: getChunkState")](){return this.#n}}function vn(n){if(n?.aborted)throw PP("The operation was aborted",{cause:n.reason})}function wU(n){const e=new URL(n);return e.search="",e.hash="",e.href}class SU{#t;#e=new WeakMap;#n;#s;#r;#a;#o;#i;#c;#f;#u;#d;#l;constructor(e,t,s,i){this.#i=e,this.#u=s,this.#l=i,this.setOptions(t)}setOptions(e){const t=this.#i;"abortMultipartUpload"in e&&(this.#t=t.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&(this.#n=t.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&(this.#s=t.wrapPromiseFunction(e.signPart)),"listParts"in e&&(this.#a=t.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&(this.#f=t.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e&&(this.#c=e.retryDelays??[]),"uploadPartBytes"in e&&(this.#d=t.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&(this.#r=t.wrapPromiseFunction(e.getUploadParameters))}async#h(e,t){const s=this.#i,i=e?.source?.status;if(i==null)return!1;if(i===403&&e.message==="Request has expired"){if(!s.isPaused){if(s.limit===1||this.#o==null){const a=t.next();if(a==null||a.done)return!1;this.#o=a.value}s.rateLimit(0),await new Promise(a=>setTimeout(a,this.#o))}}else if(i===429){if(!s.isPaused){const a=t.next();if(a==null||a.done)return!1;s.rateLimit(a.value)}}else{if(i>400&&i<500&&i!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)s.isPaused||(s.pause(),window.addEventListener("online",()=>{s.resume()},{once:!0}));else{const a=t.next();if(a==null||a.done)return!1;await new Promise(c=>setTimeout(c,a.value))}}return!0}async getUploadId(e,t){let s;for(;s=this.#e.get(e.data),s!=null;)try{return await s}catch{}const i=this.#n(this.#l(e),t),a=()=>{i.abort(t.reason),this.#e.delete(e.data)};return t.addEventListener("abort",a,{once:!0}),this.#e.set(e.data,i),i.then(async c=>{t.removeEventListener("abort",a),this.#u(e,c),this.#e.set(e.data,c)},()=>{t.removeEventListener("abort",a),this.#e.delete(e.data)}),i}async abortFileUpload(e){const t=this.#e.get(e.data);if(t==null)return;this.#e.delete(e.data),this.#u(e,Object.create(null));let s;try{s=await t}catch{return}await this.#t(this.#l(e),s)}async#p(e,t,s){const{method:i="POST",url:a,fields:c,headers:u}=await this.#r(this.#l(e),{signal:s}).abortOn(s);let d;const h=t.getData();if(i.toUpperCase()==="POST"){const _=new FormData;Object.entries(c).forEach(([v,w])=>_.set(v,w)),_.set("file",h),d=_}else d=h;const{onProgress:p,onComplete:m}=t,y=await this.#d({signature:{url:a,headers:u,method:i},body:d,size:h.size,onProgress:p,onComplete:m,signal:s}).abortOn(s),b=c?.key;return this.#u(e,{key:b}),{...y,location:y.location??wU(a),bucket:c?.bucket,key:b}}async uploadFile(e,t,s){if(vn(s),t.length===1&&!t[0].shouldUseMultipart)return this.#p(e,t[0],s);const{uploadId:i,key:a}=await this.getUploadId(e,s);vn(s);try{const c=await Promise.all(t.map((u,d)=>this.uploadChunk(e,d+1,u,s)));return vn(s),await this.#f(this.#l(e),{key:a,uploadId:i,parts:c,signal:s},s).abortOn(s)}catch(c){throw c?.cause!==Nd&&c?.name!=="AbortError"&&this.abortFileUpload(e),c}}restoreUploadFile(e,t){this.#e.set(e.data,t)}async resumeUploadFile(e,t,s){if(vn(s),t.length===1&&t[0]!=null&&!t[0].shouldUseMultipart)return this.#p(e,t[0],s);const{uploadId:i,key:a}=await this.getUploadId(e,s);vn(s);const c=await this.#a(this.#l(e),{uploadId:i,key:a,signal:s},s).abortOn(s);vn(s);const u=await Promise.all(t.map((d,h)=>{const p=h+1,m=c.find(({PartNumber:y})=>y===p);return m==null?this.uploadChunk(e,p,d,s):(d?.setAsUploaded?.(),{PartNumber:p,ETag:m.ETag})}));return vn(s),this.#f(this.#l(e),{key:a,uploadId:i,parts:u,signal:s},s).abortOn(s)}async uploadChunk(e,t,s,i){vn(i);const{uploadId:a,key:c}=await this.getUploadId(e,i),u=this.#c.values(),d=this.#c.values(),h=()=>{const p=u.next();return p==null||p.done?null:p.value};for(;;){vn(i);const p=s.getData(),{onProgress:m,onComplete:y}=s;let b;try{b=await this.#s(this.#l(e),{uploadId:a,key:c,partNumber:t,body:p,signal:i}).abortOn(i)}catch(_){const v=h();if(v==null||i.aborted)throw _;await new Promise(w=>setTimeout(w,v));continue}vn(i);try{return{PartNumber:t,...await this.#d({signature:b,body:p,size:p.size,onProgress:m,onComplete:y,signal:i}).abortOn(i)}}catch(_){if(!await this.#h(_,d))throw _}}}}function Qa(n){if(n?.error){const e=new Error(n.message);throw Object.assign(e,n.error),e}return n}function S_(n){const e=n.Expiration;if(e){const t=Math.floor((new Date(e)-Date.now())/1e3);if(t>9)return t}}function __({meta:n,allowedMetaFields:e,querify:t=!1}){const s=e??Object.keys(n);return n?Object.fromEntries(s.filter(i=>n[i]!=null).map(i=>{const a=t?`metadata[${i}]`:i,c=String(n[i]);return[a,c]})):{}}const _U={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:(n=>(n.size||0)>100*1024*1024),retryDelays:[0,1e3,3e3,5e3]};class Ux extends IT{static VERSION=fU.version;#t;#e;requests;uploaderEvents;uploaders;constructor(e,t){super(e,{..._U,uploadPartBytes:Ux.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...t}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",this.#n(t);const s={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:t?.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:t?.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(s))this.opts[i]==null&&(this.opts[i]=s[i].bind(this));this.requests=this.opts.rateLimitedQueue??new dU(this.opts.limit),this.#t=new SU(this.requests,this.opts,this.#o,this.#i),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return this.#e}#n(e){e==null||!("endpoint"in e||"companionUrl"in e||"headers"in e||"companionHeaders"in e||"cookiesRule"in e||"companionCookiesRule"in e)||("companionUrl"in e&&!("endpoint"in e)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in e&&!("headers"in e)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in e&&!("cookiesRule"in e)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in e?this.#e=new aU(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule}):("headers"in e&&this.#d(),"cookiesRule"in e&&(this.#e.opts.companionCookiesRule=e.cookiesRule)))}setOptions(e){this.#t.setOptions(e),super.setOptions(e),this.#n(e)}resetUploaderReferences(e,t){this.uploaders[e]&&(this.uploaders[e].abort({really:t?.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}#s(e){if(!this.#e)throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${e}\` implementation.`)}createMultipartUpload(e,t){this.#s("createMultipartUpload"),vn(t);const s=x_(this.opts.allowedMetaFields,e.meta),i=__({meta:e.meta,allowedMetaFields:s});return this.#e.post("s3/multipart",{filename:e.name,type:e.type,metadata:i},{signal:t}).then(Qa)}listParts(e,{key:t,uploadId:s,signal:i},a){i??=a,this.#s("listParts"),vn(i);const c=encodeURIComponent(t);return this.#e.get(`s3/multipart/${encodeURIComponent(s)}?key=${c}`,{signal:i}).then(Qa)}completeMultipartUpload(e,{key:t,uploadId:s,parts:i,signal:a},c){a??=c,this.#s("completeMultipartUpload"),vn(a);const u=encodeURIComponent(t),d=encodeURIComponent(s);return this.#e.post(`s3/multipart/${d}/complete?key=${u}`,{parts:i.map(({ETag:h,PartNumber:p})=>({ETag:h,PartNumber:p}))},{signal:a}).then(Qa)}#r;async#a(e){if(vn(e?.signal),this.#r==null){const{getTemporarySecurityCredentials:t}=this.opts;t===!0?(this.#s("getTemporarySecurityCredentials"),this.#r=this.#e.get("s3/sts",e).then(Qa)):this.#r=t(e),this.#r=await this.#r,setTimeout(()=>{this.#r=null},(S_(this.#r.credentials)||0)*500)}return this.#r}async createSignedURL(e,t){const s=await this.#a(t),i=S_(s.credentials)||604800,{uploadId:a,key:c,partNumber:u}=t;return{method:"PUT",expires:i,fields:{},url:`${await yU({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:i,bucketName:s.bucket,Region:s.region,Key:c??`${crypto.randomUUID()}-${e.name}`,uploadId:a,partNumber:u})}`,headers:{"Content-Type":e.type}}}signPart(e,{uploadId:t,key:s,partNumber:i,signal:a}){if(this.#s("signPart"),vn(a),t==null||s==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const c=encodeURIComponent(s);return this.#e.get(`s3/multipart/${encodeURIComponent(t)}/${i}?key=${c}`,{signal:a}).then(Qa)}abortMultipartUpload(e,{key:t,uploadId:s,signal:i}){this.#s("abortMultipartUpload");const a=encodeURIComponent(t),c=encodeURIComponent(s);return this.#e.delete(`s3/multipart/${c}?key=${a}`,void 0,{signal:i}).then(Qa)}getUploadParameters(e,t){this.#s("getUploadParameters");const{meta:s}=e,{type:i,name:a}=s,c=x_(this.opts.allowedMetaFields,e.meta),u=__({meta:s,allowedMetaFields:c,querify:!0}),d=new URLSearchParams({filename:a,type:i,...u});return this.#e.get(`s3/params?${d}`,t)}static async uploadPartBytes({signature:{url:e,expires:t,headers:s,method:i="PUT"},body:a,size:c=a.size,onProgress:u,onComplete:d,signal:h}){if(vn(h),e==null)throw new Error("Cannot upload to an undefined URL");return new Promise((p,m)=>{const y=new XMLHttpRequest;y.open(i,e,!0),s&&Object.keys(s).forEach(v=>{y.setRequestHeader(v,s[v])}),y.responseType="text",typeof t=="number"&&(y.timeout=t*1e3);function b(){y.abort()}function _(){h?.removeEventListener("abort",b)}h?.addEventListener("abort",b),y.upload.addEventListener("progress",v=>{u(v)}),y.addEventListener("abort",()=>{_(),m(PP())}),y.addEventListener("timeout",()=>{_();const v=new Error("Request has expired");v.source={status:403},m(v)}),y.addEventListener("load",()=>{if(_(),y.status===403&&y.responseText.includes("<Message>Request has expired</Message>")){const C=new Error("Request has expired");C.source=y,m(C);return}if(y.status<200||y.status>=300){const C=new Error("Non 2xx");C.source=y,m(C);return}u?.({loaded:c,lengthComputable:!0});const v=y.getAllResponseHeaders().trim().split(/[\r\n]+/),w={__proto__:null};for(const C of v){const A=C.split(": "),k=A.shift(),M=A.join(": ");w[k]=M}const{etag:N,location:P}=w;if(i.toUpperCase()==="POST"&&P==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),N==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}d?.(N),p({...w,ETag:N})}),y.addEventListener("error",v=>{_();const w=new Error("Unknown error");w.source=v.target,m(w)}),y.send(a)})}#o=(e,{key:t,uploadId:s})=>{const i=this.uppy.getFile(e.id);i!=null&&this.uppy.setFileState(e.id,{s3Multipart:{...i.s3Multipart,key:t,uploadId:s}})};#i=e=>this.uppy.getFile(e.id)||e;#c(e){return new Promise((t,s)=>{const i=(h,p)=>{const m=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",m,{uploadStarted:m.progress.uploadStarted??0,bytesUploaded:h,bytesTotal:p})},a=h=>{this.uppy.log(h),this.uppy.emit("upload-error",e,h),this.resetUploaderReferences(e.id),s(h)},c=h=>{const p={body:{...h},status:200,uploadURL:h.location};this.resetUploaderReferences(e.id),this.uppy.emit("upload-success",this.#i(e),p),h.location&&this.uppy.log(`Download ${e.name} from ${h.location}`),t(void 0)},u=new bU(e.data,{companionComm:this.#t,log:(...h)=>this.uppy.log(...h),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:i,onError:a,onSuccess:c,onPartComplete:h=>{this.uppy.emit("s3-multipart:part-uploaded",this.#i(e),h)},file:e,shouldUseMultipart:this.opts.shouldUseMultipart,...e.s3Multipart});this.uploaders[e.id]=u;const d=new oU(this.uppy);this.uploaderEvents[e.id]=d,d.onFileRemove(e.id,h=>{u.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${h} was removed`)}),d.onCancelAll(e.id,()=>{u.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${e.id} was canceled`)}),d.onFilePause(e.id,h=>{h?u.pause():u.start()}),d.onPauseAll(e.id,()=>{u.pause()}),d.onResumeAll(e.id,()=>{u.start()}),u.start()})}#f(e){return{...e.remote?.body,protocol:"s3-multipart",size:e.data.size,metadata:e.meta}}#u=async e=>{if(e.length===0)return;const t=this.uppy.getFilesByIds(e),s=lU(t),i=cU(s);this.uppy.emit("upload-start",i);const a=s.map(u=>{if(u.isRemote){const d=()=>this.requests;this.#l(!1);const h=new AbortController,p=y=>{y.id===u.id&&h.abort()};this.uppy.on("file-removed",p);const m=this.uppy.getRequestClientForFile(u).uploadRemoteFile(u,this.#f(u),{signal:h.signal,getQueue:d});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",p)},{priority:-1})(),m}return this.#c(u)}),c=await Promise.allSettled(a);return this.#l(!0),c};#d=()=>{this.#e?.setCompanionHeaders(this.opts.headers)};#l=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,resumableUploads:e}})};#h=()=>{this.#l(!0)};install(){this.#l(!0),this.uppy.addPreProcessor(this.#d),this.uppy.addUploader(this.#u),this.uppy.on("cancel-all",this.#h)}uninstall(){this.uppy.removePreProcessor(this.#d),this.uppy.removeUploader(this.#u),this.uppy.off("cancel-all",this.#h)}}function CU({maxNumberOfFiles:n=1,maxFileSize:e=10485760,onGetUploadParameters:t,onComplete:s,buttonClassName:i,children:a}){const[c,u]=x.useState(!1),[d]=x.useState(()=>new Rx({restrictions:{maxNumberOfFiles:n,maxFileSize:e,allowedFileTypes:["audio/*",".mp3",".wav",".m4a",".ogg",".flac"]},autoProceed:!1}).use(Ux,{shouldUseMultipart:!1,getUploadParameters:t}).on("complete",h=>{s?.(h),u(!1)}));return r.jsxs("div",{children:[r.jsx(te,{onClick:()=>u(!0),className:i,children:a}),r.jsx(IV,{uppy:d,open:c,onRequestClose:()=>u(!1),proudlyDisplayPoweredByUppy:!1,note:"Upload audio files (MP3, WAV, M4A, OGG, FLAC) up to 50MB"})]})}function EP(){const[n,e]=x.useState([{id:"1",type:"ai",content:`Hello! I'm your AI assistant for CodedSwitch Studio. I can help you with:
 Code translation and optimization
 Music composition suggestions
 Beat pattern generation
 Vulnerability scanning insights
 Lyric writing assistance
 Song analysis and insights

Upload a song below to get AI-powered analysis, or ask me anything!`,timestamp:new Date(Date.now()-12e4)}]),[t,s]=x.useState(null),[i,a]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState({}),[p,m]=x.useState(0),[y,b]=x.useState(0),[_,v]=x.useState("grok"),{messages:w,addMessage:N}=o8(),P=x.useContext($s);x.useEffect(()=>{if(w.length>0){const R=w[w.length-1];e(U=>{if(!U.some(re=>re.id===R.id)){const re={id:R.id,type:"ai",content:R.content,timestamp:R.timestamp};return[...U,re]}return U})}},[w]);const[C,A]=x.useState(""),{toast:k}=$t(),{initialize:M,isInitialized:E}=qn(),{data:T,isLoading:I}=wo({queryKey:["/api/songs"],initialData:[]}),O=Et({mutationFn:async R=>(await yt("POST","/api/songs/upload",R)).json(),onSuccess:R=>{ky.invalidateQueries({queryKey:["/api/songs"]}),h({}),k({title:"Song Uploaded",description:`${R.name} has been added to your library!`}),G(R)},onError:()=>{k({title:"Upload Failed",description:"Failed to save your song. Please try again.",variant:"destructive"})}}),F=Et({mutationFn:async R=>(await yt("POST","/api/assistant/chat",R)).json(),onSuccess:R=>{const U={id:Date.now().toString(),type:"ai",content:R.response,timestamp:new Date};e(X=>[...X,U])},onError:()=>{k({title:"Failed to Send Message",description:"Unable to get AI response. Please try again.",variant:"destructive"})}}),L=()=>{if(!C.trim())return;const R={id:Date.now().toString(),type:"user",content:C,timestamp:new Date};e(U=>[...U,R]),F.mutate({message:C,context:"CodeTune Studio",aiProvider:_}),A("")},V=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),L())},z=async()=>{try{const R=await yt("POST","/api/objects/upload",{});if(!R.ok){const X=await R.json().catch(()=>({error:"Unknown error",temporary:!1}));if(console.error("Upload URL generation failed:",X),R.status===503||X.temporary){const re=X.retryAfter||300,ae=Math.ceil(re/60);throw k({title:"Upload Service Temporarily Down",description:`The file upload service is temporarily unavailable. Please try again in ${ae} minute${ae>1?"s":""}.`,variant:"destructive",duration:8e3}),new Error(`Service temporarily unavailable (retry in ${ae} minutes)`)}throw k({title:"Upload Service Error",description:"Unable to connect to upload service. Please refresh the page and try again.",variant:"destructive"}),new Error(X.error||"Failed to generate upload URL")}const U=await R.json();if(!U.uploadURL)throw k({title:"Upload Configuration Error",description:"Server did not provide upload URL. Please contact support if this persists.",variant:"destructive"}),new Error("No upload URL received from server");return console.log(" Upload URL received successfully"),{method:"PUT",url:U.uploadURL}}catch(R){throw console.error("Upload parameters error:",R),R instanceof Error&&R.message.includes("temporarily unavailable")||k({title:"Upload Setup Failed",description:"Unable to initialize file upload. Please refresh and try again.",variant:"destructive"}),R}},W=R=>{if(console.log(" Upload complete result:",R),R.successful&&R.successful.length>0){const U=R.successful[0],X=U.uploadURL;console.log(" Uploaded file details:",{name:U.name,size:U.size,type:U.type,uploadURL:X});const re=U.name||`Uploaded Song ${Date.now()}`,ae=re.split(".").pop()?.toLowerCase()||"unknown",le=U.size||0,Q=U.type||"";let se=ae;Q.includes("audio/")&&(se=Q.split("/")[1]||ae);const xe={name:re,fileSize:le,format:se==="unknown"?Q||"audio":se,mimeType:Q};if(console.log(" Processed file info:",xe),h(xe),X){const Pe={songURL:X,name:xe.name,fileSize:xe.fileSize,format:xe.format,mimeType:xe.mimeType};console.log(" Sending song data:",Pe),O.mutate(Pe)}}},G=async R=>{try{const X=await(await yt("POST","/api/songs/analyze",{songId:R.id,songURL:R.originalUrl,songName:R.name})).json();k({title:"Song Analysis Complete",description:`AI analyzed ${R.name} successfully!`}),P.setCurrentCodeMusic?.({...X,source:"uploaded_song",originalSong:R});const re=` **Song Analysis Complete: ${R.name}**

 **Musical Properties:**
 BPM: ${X.estimatedBPM}
 Key: ${X.keySignature} 
 Genre: ${X.genre}
 Mood: ${X.mood}

 **Song Structure:**
${Object.entries(X.structure).map(([le,Q])=>` ${le}: ${Q}`).join(`
`)}

 **Instruments Detected:**
${X.instruments.join(", ")}

 **AI Analysis Notes:**
${X.analysis_notes}

This analysis has been saved and can be used with other studio tools for remixing, layering, and composition inspiration!`,ae={id:Date.now().toString(),type:"ai",content:re,timestamp:new Date};e(le=>[...le,ae])}catch{k({title:"Analysis Failed",description:"Could not analyze the song. Please try again.",variant:"destructive"})}},K=async R=>{c&&(c.pause(),c.src="");try{const U=R.accessibleUrl;console.log(" Using accessible URL:",U);const X=new Audio;X.addEventListener("error",re=>{console.error("Audio playback error:",re),k({title:"Playback Error",description:`Cannot play ${R.name}`,variant:"destructive"}),a(!1),s(null)}),X.addEventListener("loadedmetadata",()=>{console.log(` Song loaded: ${R.name}, duration: ${X.duration}s`),b(X.duration)}),X.addEventListener("timeupdate",()=>{m(X.currentTime)}),X.addEventListener("ended",()=>{a(!1),s(null),m(0)}),X.src=U,X.load(),await new Promise((re,ae)=>{const le=()=>{X.removeEventListener("canplaythrough",le),X.removeEventListener("error",Q),re(void 0)},Q=se=>{X.removeEventListener("canplaythrough",le),X.removeEventListener("error",Q),ae(new Error("Audio loading failed"))};X.addEventListener("canplaythrough",le),X.addEventListener("error",Q)}),await X.play(),u(X),s(R),a(!0),k({title:"Now Playing",description:`Playing ${R.name}`})}catch(U){console.error("Audio playback error:",U instanceof Error?U.message:"Unknown error"),k({title:"Playback Failed",description:`Cannot play ${R.name}. The file may be corrupted or unsupported.`,variant:"destructive"}),a(!1),s(null)}},$=R=>{const U=Math.floor(R/60),X=Math.floor(R%60);return`${U}:${X.toString().padStart(2,"0")}`},H=R=>R<1024?R+" B":R<1024*1024?Math.round(R/1024)+" KB":Math.round(R/(1024*1024))+" MB",ee=[{icon:"fas fa-magic",label:"Generate Beat Pattern",action:"Generate a hip-hop beat pattern for me"},{icon:"fas fa-code",label:"Optimize My Code",action:"Help me optimize this JavaScript code for better performance"},{icon:"fas fa-music",label:"Compose Melody",action:"Compose a melody in C major scale"},{icon:"fas fa-shield-alt",label:"Security Analysis",action:"Analyze my code for security vulnerabilities"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Music & Code Assistant"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(te,{onClick:()=>{M(),k({title:"Audio Initialized",description:"The audio engine has started."})},className:"bg-studio-accent hover:bg-blue-500",disabled:E,children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),E?"Audio Ready":"Start Audio"]})})]}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(fi,{className:"w-5 h-5"}),"Upload Song for AI Analysis"]}),r.jsx("div",{className:"text-xs text-gray-400",children:"Supported: MP3, WAV, M4A, OGG (Max 50MB)"})]}),r.jsx("div",{className:"mb-3",children:r.jsx(fa,{value:_,onValueChange:v})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(CU,{maxNumberOfFiles:1,maxFileSize:50485760,onGetUploadParameters:z,onComplete:W,buttonClassName:"bg-studio-accent hover:bg-blue-500",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fi,{className:"w-4 h-4"}),"Upload Audio File"]})}),O.isPending&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full"}),r.jsx("span",{className:"text-sm",children:"Processing upload..."})]})]})]})]}),r.jsx(ps,{className:"flex-1 p-6",children:r.jsxs("div",{className:"flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(ps,{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"space-y-4",children:[n.map(R=>r.jsxs("div",{className:`flex space-x-3 ${R.type==="user"?"justify-end":""}`,children:[R.type==="ai"&&r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-studio-accent to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-robot text-white text-sm"})}),r.jsxs("div",{className:`flex-1 ${R.type==="user"?"max-w-md":""}`,children:[r.jsx("div",{className:`rounded-lg p-3 ${R.type==="user"?"bg-studio-accent text-white":"bg-gray-700"}`,children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.content})}),r.jsxs("div",{className:`text-xs text-gray-400 mt-1 ${R.type==="user"?"text-right":""}`,children:[R.type==="ai"?"AI Assistant":"You","  ",R.timestamp.toLocaleTimeString()]})]}),R.type==="user"&&r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-xs font-bold text-white",children:"CT"})})]},R.id)),F.isPending&&r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-studio-accent to-blue-500 rounded-full flex items-center justify-center",children:r.jsx("i",{className:"fas fa-robot text-white text-sm"})}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-3",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Bt,{value:C,onChange:R=>A(R.target.value),onKeyDown:V,placeholder:"Ask me anything about music production or coding...",className:"bg-studio-panel border-gray-600 pr-12",disabled:F.isPending}),r.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-studio-accent",children:r.jsx("i",{className:"fas fa-microphone"})})]}),r.jsx(te,{onClick:L,disabled:F.isPending||!C.trim(),className:"bg-studio-accent hover:bg-blue-500",children:r.jsx("i",{className:"fas fa-paper-plane"})})]})]}),T&&T.length>0&&r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsx(_e,{className:"pb-3",children:r.jsxs(Ce,{className:"text-lg flex items-center gap-2",children:[r.jsx(Pn,{className:"w-5 h-5"}),"Uploaded Songs (",T.length,")"]})}),r.jsx(we,{className:"space-y-3",children:T.map(R=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-600",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-sm truncate",children:R.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[r.jsx("span",{children:H(R.fileSize)}),r.jsx("span",{className:"capitalize",children:R.format}),R.duration&&r.jsx("span",{children:$(R.duration)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(te,{onClick:()=>K(R),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-600",disabled:t?.id===R.id&&i,children:t?.id===R.id&&i?r.jsx(ua,{className:"w-3 h-3"}):r.jsx(sr,{className:"w-3 h-3"})}),r.jsx(te,{onClick:()=>G(R),size:"sm",className:"h-8 px-3 bg-studio-accent hover:bg-blue-500",children:"Analyze"})]})]},R.id))})]}),r.jsxs("div",{className:"w-80 space-y-4",children:[r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Quick Actions"}),r.jsx("div",{className:"space-y-2",children:ee.map((R,U)=>r.jsxs("button",{onClick:()=>{A(R.action),setTimeout(()=>L(),100)},className:"w-full bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-sm text-left transition-colors",children:[r.jsx("i",{className:`${R.icon} mr-2 text-studio-accent`}),R.label]},U))})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Recent Suggestions"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Jazz Chord Progression"}),r.jsx("div",{className:"text-gray-400",children:"Cmaj7 - Am7 - Dm7 - G7"})]}),r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Code Refactor"}),r.jsx("div",{className:"text-gray-400",children:"Use array.map() instead of for loop"})]}),r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Drum Fill"}),r.jsx("div",{className:"text-gray-400",children:"32nd note snare roll at bar end"})]})]})]})]})]})})]})}function AP(){const[n,e]=x.useState("javascript"),[t,s]=x.useState("grok"),[i,a]=x.useState(`// Example vulnerable code
const express = require('express');
const app = express();

app.get('/user/:id', (req, res) => {
    const userId = req.params.id;
    // SQL Injection vulnerability
    const query = \`SELECT * FROM users WHERE id = '\${userId}'\`;
    
    // XSS vulnerability
    res.send(\`<h1>Welcome user \${userId}</h1>\`);
});

// Hardcoded credentials
const API_KEY = "sk-1234567890abcdef";

app.listen(3000);`),[c,u]=x.useState(null),{toast:d}=$t(),h=Et({mutationFn:async v=>(await yt("POST","/api/security/scan",v)).json(),onSuccess:v=>{u(v.results),d({title:"Scan Complete",description:`Found ${v.results.vulnerabilities.length} potential issues.`})},onError:()=>{d({title:"Scan Failed",description:"Failed to scan code for vulnerabilities. Please try again.",variant:"destructive"})}}),{data:p}=wo({queryKey:["/api/security/scans"]}),m=()=>{if(!i.trim()){d({title:"No Code Provided",description:"Please enter some code to scan.",variant:"destructive"});return}h.mutate({code:i,language:n,aiProvider:t})},y=v=>{switch(v){case"critical":return"bg-red-600";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},b=v=>{switch(v){case"critical":return"fas fa-skull";case"high":return"fas fa-exclamation-triangle";case"medium":return"fas fa-exclamation";case"low":return"fas fa-info-circle";default:return"fas fa-question"}},_=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"php",label:"PHP"},{value:"cpp",label:"C++"}];return r.jsxs("div",{className:"h-full p-6 flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Code Vulnerability Scanner"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(fa,{value:t,onValueChange:s}),r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{className:"w-32",children:r.jsx(it,{})}),r.jsx(tt,{children:_.map(v=>r.jsx(fe,{value:v.value,children:v.label},v.value))})]}),r.jsx(te,{onClick:m,disabled:h.isPending,className:"bg-studio-accent hover:bg-blue-500",children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-search mr-2"}),"Scan Code"]})}),r.jsxs(te,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx("i",{className:"fas fa-download mr-2"}),"Export Report"]})]})]}),c&&r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-red-400",children:c.vulnerabilities.filter(v=>v.severity==="critical").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Critical"})]}),r.jsx("i",{className:"fas fa-exclamation-triangle text-red-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-400",children:c.vulnerabilities.filter(v=>v.severity==="high").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"High"})]}),r.jsx("i",{className:"fas fa-exclamation-circle text-orange-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:c.vulnerabilities.filter(v=>v.severity==="medium").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Medium"})]}),r.jsx("i",{className:"fas fa-exclamation text-yellow-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-400",children:c.vulnerabilities.filter(v=>v.severity==="low").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Low"})]}),r.jsx("i",{className:"fas fa-info-circle text-green-400 text-xl"})]})})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-6",children:[r.jsxs("div",{className:"col-span-2 flex flex-col space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Code to Scan"}),r.jsx(Mr,{value:i,onChange:v=>a(v.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Paste your code here to scan for vulnerabilities..."})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-4",children:"Detected Vulnerabilities"}),r.jsx(ps,{className:"h-96",children:c?r.jsx("div",{className:"space-y-3",children:c.vulnerabilities.map((v,w)=>r.jsxs("div",{className:`vulnerability-item vulnerability-${v.severity} rounded-lg p-3`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:`${b(v.severity)} text-white`}),r.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${y(v.severity)} text-white`,children:v.severity.toUpperCase()})]}),r.jsxs("span",{className:"text-xs text-gray-300",children:["Line ",v.line]})]}),r.jsx("h4",{className:"font-medium text-white mb-1",children:v.type}),r.jsx("p",{className:"text-sm text-gray-200 mb-2",children:v.description}),r.jsx("p",{className:"text-xs text-gray-300",children:v.recommendation})]},w))}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"fas fa-shield-alt text-4xl mb-4"}),r.jsx("p",{children:"Scan results will appear here"})]})})})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-4",children:"AI Recommendations"}),r.jsxs("div",{className:"space-y-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded",children:[r.jsx("div",{className:"font-medium text-red-400 mb-2",children:"Immediate Action Required"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Implement parameterized queries"}),r.jsx("li",{children:" Add output escaping for XSS protection"}),r.jsx("li",{children:" Remove hardcoded credentials"})]})]}),r.jsxs("div",{className:"p-3 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded",children:[r.jsx("div",{className:"font-medium text-yellow-400 mb-2",children:"Security Improvements"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Upgrade to bcrypt for passwords"}),r.jsx("li",{children:" Implement CSRF protection"}),r.jsx("li",{children:" Add rate limiting"})]})]}),r.jsxs("div",{className:"p-3 bg-blue-900 bg-opacity-30 border border-blue-600 rounded",children:[r.jsx("div",{className:"font-medium text-blue-400 mb-2",children:"Best Practices"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Enable security headers"}),r.jsx("li",{children:" Regular dependency updates"}),r.jsx("li",{children:" Implement logging & monitoring"})]})]}),r.jsxs(te,{className:"w-full bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Auto-Fix Issues"]})]})]})]})]})}function MP(){const n=x.useContext($s),[e,t]=x.useState("My Awesome Track"),[s,i]=x.useState(`[Verse 1]
Started from the bottom of the code base,
Debugging through the night at my own pace,
Functions calling functions in this digital space,
Building something greater than the human race.

[Pre-Chorus]
Binary dreams and electric thoughts,
Creating melodies from the code I've wrought.

[Chorus]
We're translating hearts to algorithms,
Making music from the syntax we're writing,
Every loop and every variable's a rhythm,
In this digital symphony we're designing.

[Verse 2]
Type here or use AI generation...`);x.useEffect(()=>{n.setCurrentLyrics(s)},[s,n]),x.useEffect(()=>{n.currentLyrics&&n.currentLyrics!==s&&i(n.currentLyrics)},[n.currentLyrics]);const[a,c]=x.useState("hip-hop"),[u,d]=x.useState("ABAB"),[h,p]=x.useState("technology, coding"),[m,y]=x.useState("upbeat"),[b,_]=x.useState(""),[v,w]=x.useState([]),[N,P]=x.useState(!1),[C,A]=x.useState([5]),[k,M]=x.useState([5]),[E,T]=x.useState("grok");x.useEffect(()=>{const Q=n.currentPattern&&Object.keys(n.currentPattern).length>0&&Object.values(n.currentPattern).some(Fe=>Array.isArray(Fe)&&Fe.some(oe=>oe===!0)),se=n.currentMelody&&n.currentMelody.length>0,xe=n.currentCodeMusic&&Object.keys(n.currentCodeMusic).length>0;let Pe=!1;try{const Fe=localStorage.getItem("generatedMusicData");if(Fe){const oe=JSON.parse(Fe);Pe=oe?.beatPattern&&Object.values(oe.beatPattern).some(ke=>Array.isArray(ke)&&ke.some(Me=>Me===!0))}}catch{}P(!!(Q||se||xe||Pe))},[n.currentPattern,n.currentMelody,n.currentCodeMusic]);const{toast:I}=$t(),{initialize:O,isInitialized:F}=qn(),L=Et({mutationFn:async Q=>{const se=["hip-hop","pop","rock","country","R&B","folk","reggae","electronic","jazz","blues"],xe=["upbeat","melancholic","energetic","romantic","rebellious","peaceful","intense","nostalgic"],Pe=["love","freedom","success","struggle","dreams","technology","nature","friendship"],Fe=se[Math.floor(Math.random()*se.length)],oe=xe[Math.floor(Math.random()*xe.length)],ke=Pe[Math.floor(Math.random()*Pe.length)];return(await yt("POST","/api/lyrics/generate",{theme:`${Q.theme}, ${ke}`,genre:Fe,mood:oe,complexity:Q.complexity,aiProvider:Q.aiProvider})).json()},onSuccess:Q=>{i(Q.content||Q),t(`${a} Song ${Date.now()}`),n.setCurrentLyrics(Q.content||Q),I({title:"Lyrics Generated",description:"AI has created unique lyrics for you."})},onError:()=>{I({title:"Generation Failed",description:"Failed to generate lyrics. Please try again.",variant:"destructive"})}});Et({mutationFn:async Q=>(await yt("POST","/api/lyrics",Q)).json(),onSuccess:()=>{n.setCurrentLyrics(s),I({title:"Lyrics Saved",description:"Your lyrics have been saved successfully."})}});const V=Et({mutationFn:async Q=>(await yt("POST","/api/music/generate-from-lyrics",Q)).json(),onSuccess:Q=>{console.log(" Music generated from lyrics:",Q),Q.beatPattern&&(console.log(" Setting beat pattern:",Q.beatPattern),n.setCurrentPattern(Q.beatPattern)),Q.melody&&(console.log(" Setting melody:",Q.melody),n.setCurrentMelody(Q.melody)),Q.codeMusic&&(console.log(" Setting code music:",Q.codeMusic),n.setCurrentCodeMusic(Q.codeMusic)),P(!0),localStorage.setItem("generatedMusicData",JSON.stringify({beatPattern:Q.beatPattern,melody:Q.melody,codeMusic:Q.codeMusic,timestamp:Date.now()})),I({title:"Music Generated from Lyrics",description:"Beat pattern and melody created! Check the Beat Maker or Melody Composer tabs to see and edit your generated music."})},onError:()=>{I({title:"Music Generation Failed",description:"Failed to generate music from lyrics. Please try again.",variant:"destructive"})}}),z=Et({mutationFn:async Q=>(await yt("POST","/api/master",Q)).json(),onSuccess:Q=>{I({title:"Song Mastered",description:"Your song has been professionally mastered and optimized!"}),Q.masteredSettings&&console.log("Mastered settings applied:",Q.masteredSettings)},onError:()=>{I({title:"Mastering Failed",description:"Failed to master the song. Please try again.",variant:"destructive"})}}),W=Et({mutationFn:async Q=>(await yt("POST","/api/lyrics/rhymes",Q)).json(),onSuccess:Q=>{const se=Q.rhymes.map(xe=>({word:xe,type:"perfect"}));w(se)}}),G=Et({mutationFn:async Q=>(await yt("POST","/api/lyrics/generate-beat",Q)).json(),onSuccess:Q=>{I({title:"Beat Pattern Generated",description:"AI has analyzed your lyrics and generated a matching beat pattern."}),console.log("Generated beat pattern:",Q.beatPattern)},onError:()=>{I({title:"Beat Generation Failed",description:"Failed to generate beat from lyrics. Please try again.",variant:"destructive"})}}),{data:K}=wo({queryKey:["/api/lyrics"]}),$=()=>{if(!h.trim()){I({title:"No Theme Provided",description:"Please enter a theme for the lyrics.",variant:"destructive"});return}L.mutate({theme:h,genre:a,mood:m,aiProvider:E,complexity:C[0]})},H=()=>{b.trim()&&W.mutate({word:b.trim()})},ee=Q=>{const se=document.querySelector("textarea");if(se){const xe=se.selectionStart,Pe=se.selectionEnd,Fe=s.substring(0,xe)+Q+s.substring(Pe);i(Fe),setTimeout(()=>{se.focus(),se.setSelectionRange(xe+Q.length,xe+Q.length)},0)}},R=Q=>{const se=document.querySelector("textarea");if(se){const xe=s.indexOf(`[${Q.charAt(0).toUpperCase()+Q.slice(1)}]`);xe!==-1&&(se.focus(),se.setSelectionRange(xe,xe),se.scrollTop=xe/s.length*se.scrollHeight)}},U=s.split(/\s+/).filter(Q=>Q.length>0).length,X=s.split(`
`).length,re=[{value:"hip-hop",label:"Hip-Hop"},{value:"pop",label:"Pop"},{value:"rock",label:"Rock"},{value:"r&b",label:"R&B"},{value:"country",label:"Country"},{value:"electronic",label:"Electronic"}],ae=[{value:"upbeat",label:"Upbeat"},{value:"melancholic",label:"Melancholic"},{value:"energetic",label:"Energetic"},{value:"romantic",label:"Romantic"},{value:"introspective",label:"Introspective"}],le=[{value:"AABB",label:"AABB (Couplets)"},{value:"ABAB",label:"ABAB (Alternating)"},{value:"ABCB",label:"ABCB (Ballad)"},{value:"FREE",label:"Free Verse"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Lyric Lab"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(te,{onClick:()=>{O(),I({title:"Audio Initialized",description:"The audio engine has started."})},disabled:F,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),F?"Audio Ready":"Start Audio"]})})]})}),r.jsx(ps,{className:"flex-1 p-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"col-span-2 bg-studio-panel border border-gray-600 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-700 px-4 py-2 border-b border-gray-600 flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Lyric Editor"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[r.jsxs("span",{children:["Words: ",U]}),r.jsxs("span",{children:["Lines: ",X]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(te,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-undo"})}),r.jsx(te,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-redo"})}),r.jsx(te,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-spell-check"})})]})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx(Bt,{value:e,onChange:Q=>t(Q.target.value),placeholder:"Song Title",className:"mb-4 bg-gray-700 border-gray-600 font-semibold text-lg"}),r.jsx(Mr,{value:s,onChange:Q=>i(Q.target.value),className:"h-96 bg-transparent border-none resize-none font-mono text-sm leading-relaxed focus:outline-none",placeholder:"Start writing your lyrics here..."})]}),v.length>0&&r.jsxs("div",{className:"p-4 bg-gray-800 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Rhyme Suggestions"}),r.jsxs("span",{className:"text-xs text-gray-400",children:['For: "',b,'"']})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:v.slice(0,8).map((Q,se)=>r.jsx("button",{onClick:()=>ee(Q.word),className:"px-2 py-1 bg-studio-accent bg-opacity-20 text-studio-accent rounded text-xs hover:bg-opacity-30 transition-colors",children:Q.word},se))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Song Structure"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>R("intro"),children:[r.jsx("span",{children:"Intro"}),r.jsx("span",{className:"text-gray-400",children:"8 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-studio-accent bg-opacity-20 rounded cursor-pointer",onClick:()=>R("verse 1"),children:[r.jsx("span",{children:"Verse 1"}),r.jsx("span",{className:"text-gray-400",children:"16 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>R("pre-chorus"),children:[r.jsx("span",{children:"Pre-Chorus"}),r.jsx("span",{className:"text-gray-400",children:"8 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>R("chorus"),children:[r.jsx("span",{children:"Chorus"}),r.jsx("span",{className:"text-gray-400",children:"16 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600 rounded cursor-pointer hover:bg-gray-500",children:[r.jsx("span",{className:"text-gray-400",children:"+ Add Section"}),r.jsx("i",{className:"fas fa-plus text-gray-400"})]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Rhyme Scheme"}),r.jsx("div",{className:"space-y-3",children:le.map(Q=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",name:"rhyme",value:Q.value,checked:u===Q.value,onChange:se=>d(se.target.value),className:"text-studio-accent"}),r.jsx("label",{className:"text-sm cursor-pointer",onClick:()=>d(Q.value),children:Q.label})]},Q.value))})]}),N&&r.jsxs("div",{className:"bg-green-900 bg-opacity-30 border border-green-500 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-green-400",children:"Generated Music Ready"}),r.jsx("i",{className:"fas fa-check-circle text-green-400"})]}),r.jsx("p",{className:"text-sm text-green-300 mb-3",children:"Your lyrics have been transformed into music! Check these tabs:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(te,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToTab",{detail:"beatmaker"})),size:"sm",className:"bg-green-600 hover:bg-green-500 text-xs",children:[r.jsx("i",{className:"fas fa-drum mr-1"}),"View Beat"]}),r.jsxs(te,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToTab",{detail:"melody"})),size:"sm",className:"bg-blue-600 hover:bg-blue-500 text-xs",children:[r.jsx("i",{className:"fas fa-music mr-1"}),"View Melody"]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"AI Generation"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Bt,{value:h,onChange:Q=>p(Q.target.value),placeholder:"Theme or concept...",className:"bg-gray-700 border-gray-600"}),r.jsxs(rt,{value:a,onValueChange:c,children:[r.jsx(et,{children:r.jsx(it,{placeholder:"Select genre..."})}),r.jsx(tt,{children:re.map(Q=>r.jsx(fe,{value:Q.value,children:Q.label},Q.value))})]}),r.jsxs(rt,{value:m,onValueChange:y,children:[r.jsx(et,{children:r.jsx(it,{placeholder:"Select mood..."})}),r.jsx(tt,{children:ae.map(Q=>r.jsx(fe,{value:Q.value,children:Q.label},Q.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{children:["Lyric Complexity: ",C[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(pe,{value:C,onValueChange:A,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{children:["Beat Complexity: ",k[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(pe,{value:k,onValueChange:M,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]})]}),r.jsx("div",{className:"mb-4",children:r.jsx(fa,{value:E,onValueChange:T})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{onClick:$,disabled:L.isPending,className:"w-full bg-studio-accent hover:bg-blue-500",children:L.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"AI Generate Lyrics"]})}),r.jsx(te,{onClick:()=>V.mutate({lyrics:s,genre:a,mood:m,title:e,complexity:k[0]}),disabled:V.isPending||!s.trim(),className:"w-full bg-purple-600 hover:bg-purple-500",children:V.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Creating Music..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-music mr-2"}),"Generate Music from Lyrics"]})}),r.jsx(te,{onClick:()=>z.mutate({pattern:n.currentPattern,melody:n.currentMelody,lyrics:n.currentLyrics||s,codeMusic:n.currentCodeMusic,bpm:n.bpm,genre:a}),disabled:z.isPending||!n.currentPattern&&!n.currentMelody,className:"w-full bg-orange-600 hover:bg-orange-500",children:z.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Mastering..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-sliders-h mr-2"}),"Master Full Song"]})})]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Rhyme Dictionary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(Bt,{value:b,onChange:Q=>_(Q.target.value),placeholder:"Enter word to find rhymes...",className:"bg-gray-700 border-gray-600",onKeyDown:Q=>Q.key==="Enter"&&H()}),r.jsx(te,{onClick:H,disabled:W.isPending,size:"sm",className:"bg-studio-accent hover:bg-blue-500",children:r.jsx("i",{className:"fas fa-search"})})]}),W.isPending&&r.jsx("div",{className:"text-center py-4",children:r.jsx("i",{className:"fas fa-spinner animate-spin text-studio-accent"})})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Lyric Analysis"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tempo Suggestion:"}),r.jsx("span",{className:"text-studio-accent",children:a==="hip-hop"?"80-90 BPM":a==="pop"?"120-130 BPM":a==="rock"?"110-140 BPM":a==="r&b"?"70-100 BPM":a==="electronic"?"128-140 BPM":"90-120 BPM"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Syllable Density:"}),r.jsxs("span",{className:"text-studio-accent",children:[Math.round(s.split(/\s+/).length/X*10)/10," words/line"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Rhythm Style:"}),r.jsx("span",{className:"text-studio-accent",children:U/X>8?"Fast Flow":U/X>5?"Medium Flow":"Slow Flow"})]}),r.jsxs(te,{onClick:()=>G.mutate({lyrics:s,genre:a}),disabled:G.isPending||!s.trim(),className:"w-full bg-green-600 hover:bg-green-500",size:"sm",children:[r.jsx("i",{className:"fas fa-drum mr-2"}),"Analyze & Generate Beat"]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Word Bank"}),r.jsx("div",{className:"space-y-2 text-xs max-h-32 overflow-y-auto",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:["algorithm","digital","syntax","binary","electric","function","variable","execute"].map(Q=>r.jsx("button",{onClick:()=>ee(Q),className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600 cursor-pointer transition-colors",children:Q},Q))})})]})]})]})})]})}var jU="Separator",C_="horizontal",NU=["horizontal","vertical"],RP=x.forwardRef((n,e)=>{const{decorative:t,orientation:s=C_,...i}=n,a=kU(s)?s:C_,u=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(je.div,{"data-orientation":a,...u,...i,ref:e})});RP.displayName=jU;function kU(n){return NU.includes(n)}var IP=RP;const fc=x.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...s},i)=>r.jsx(IP,{ref:i,decorative:t,orientation:e,className:Re("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...s}));fc.displayName=IP.displayName;const TU={acoustic:{name:"Acoustic",sounds:[{id:"kick",name:"Kick",color:"bg-red-500"},{id:"bass",name:"Bass Drum",color:"bg-red-700"},{id:"tom",name:"Tom",color:"bg-purple-600"},{id:"snare",name:"Snare",color:"bg-blue-500"},{id:"hihat",name:"Hi-Hat",color:"bg-yellow-500"},{id:"openhat",name:"Open Hat",color:"bg-green-500"},{id:"clap",name:"Clap",color:"bg-pink-500"},{id:"crash",name:"Crash",color:"bg-orange-500"}]}},PU=[{id:"kick",name:"Kick",color:"bg-red-500"},{id:"snare",name:"Snare",color:"bg-blue-500"},{id:"hihat",name:"Hi-hat (Closed)",color:"bg-yellow-500"},{id:"openhat",name:"Hi-hat (Open)",color:"bg-green-500"},{id:"tom1",name:"Tom 1",color:"bg-purple-600"},{id:"tom2",name:"Tom 2",color:"bg-purple-700"},{id:"tom3",name:"Tom 3",color:"bg-purple-800"},{id:"ride",name:"Ride",color:"bg-orange-500"}];function j_(){const n=x.useContext($s),[e,t]=x.useState(120),[s,i]=x.useState(0),[a,c]=x.useState(!1),[u,d]=x.useState("acoustic"),[h,p]=x.useState(.8),[m,y]=x.useState([5]),[b,_]=x.useState(8),[v,w]=x.useState(4),[N,P]=x.useState("generate"),[C,A]=x.useState("grok"),[k,M]=x.useState(()=>{if(n.currentPattern&&Object.keys(n.currentPattern).length>0)return{kick:n.currentPattern.kick||Array(16).fill(!1),snare:n.currentPattern.snare||Array(16).fill(!1),hihat:n.currentPattern.hihat||Array(16).fill(!1),openhat:n.currentPattern.openhat||Array(16).fill(!1),tom1:n.currentPattern.tom1||Array(16).fill(!1),tom2:n.currentPattern.tom2||Array(16).fill(!1),tom3:n.currentPattern.tom3||Array(16).fill(!1),ride:n.currentPattern.ride||Array(16).fill(!1)};const U=localStorage.getItem("generatedMusicData");if(U)try{const X=JSON.parse(U);if(X.beatPattern)return{kick:X.beatPattern.kick||Array(16).fill(!1),snare:X.beatPattern.snare||Array(16).fill(!1),hihat:X.beatPattern.hihat||Array(16).fill(!1),openhat:X.beatPattern.openhat||Array(16).fill(!1),tom1:X.beatPattern.tom1||Array(16).fill(!1),tom2:X.beatPattern.tom2||Array(16).fill(!1),tom3:X.beatPattern.tom3||Array(16).fill(!1),ride:X.beatPattern.ride||Array(16).fill(!1)}}catch(X){console.error("Error loading stored pattern:",X)}return{kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),openhat:Array(16).fill(!1),tom1:Array(16).fill(!1),tom2:Array(16).fill(!1),tom3:Array(16).fill(!1),ride:Array(16).fill(!1)}}),{toast:E}=$t(),{playDrumSound:T,initialize:I,isInitialized:O}=qn();yx();const F=x.useRef(null),L=x.useRef(0);x.useEffect(()=>{O||I()},[I,O]),x.useEffect(()=>()=>{F.current&&clearInterval(F.current)},[]);const V=Et({mutationFn:async()=>{const U=await yt("POST","/api/beat/generate",{genre:"trap",bpm:e,complexity:m[0],pattern_length:16,instruments:["kick","snare","hihat","openhat","tom1","tom2","tom3","ride"],aiProvider:C});if(!U.ok)throw new Error("Failed to generate beat");return U.json()},onSuccess:U=>{U.beat_pattern&&(M(U.beat_pattern),n.setCurrentPattern&&n.setCurrentPattern(U.beat_pattern),E({title:"Beat Generated!",description:"Your AI-powered beat is ready to play"}))},onError:U=>{E({title:"Generation Failed",description:U.message||"Failed to generate beat",variant:"destructive"})}}),z=Et({mutationFn:async()=>{const U=await yt("POST","/api/beat/save",{pattern:k,bpm:e,name:`Beat_${new Date().toISOString().slice(0,10)}_${e}BPM`});if(!U.ok)throw new Error("Failed to save beat");return U.json()},onSuccess:()=>{E({title:"Beat Saved!",description:"Your beat has been saved successfully"})},onError:U=>{E({title:"Save Failed",description:U.message||"Failed to save beat",variant:"destructive"})}}),W=()=>{V.mutate()},G=()=>{z.mutate()},K=(U,X)=>{M(re=>{const ae={...re,[U]:re[U].map((le,Q)=>Q===X?!le:le)};return n.setCurrentPattern&&n.setCurrentPattern(ae),ae})},$=async()=>{if(O||await I(),a){H();return}c(!0),L.current=0;const U=60/e/4*1e3;F.current=setInterval(()=>{const X=L.current%16;i(X),Object.entries(k).forEach(([re,ae])=>{ae[X]&&T(re)}),L.current++},U)},H=()=>{c(!1),F.current&&(clearInterval(F.current),F.current=null),i(0),L.current=0},R=TU[u]?.sounds||PU;return r.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:r.jsxs("div",{className:"p-6 border-b border-gray-600 flex-shrink-0",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"text-2xl mr-3",children:""}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beat Studio"}),r.jsx("p",{className:"text-gray-400",children:"Create and edit professional beats with AI assistance"})]})]}),r.jsxs("div",{className:"flex space-x-8 border-b border-gray-700 mb-6",children:[r.jsx("button",{onClick:()=>P("generate"),className:`px-6 py-3 border-b-2 transition-colors ${N==="generate"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Generate Beat"}),r.jsx("button",{onClick:()=>P("edit"),className:`px-6 py-3 border-b-2 transition-colors ${N==="edit"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Edit Pattern"}),r.jsx("button",{onClick:()=>P("sequencer"),className:`px-6 py-3 border-b-2 transition-colors ${N==="sequencer"?"text-blue-400 border-blue-500":"text-gray-400 hover:text-white border-transparent hover:border-blue-500"}`,children:"Pro Sequencer"})]})]}),N==="generate"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-400",children:"AI Beat Generation"}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx(fa,{value:C,onValueChange:A})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-sm whitespace-nowrap",children:"AI Complexity:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(pe,{value:m,onValueChange:y,max:10,min:1,step:1,className:"w-24","aria-label":"AI complexity level control"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]}),r.jsxs("span",{className:"text-xs text-studio-accent font-mono",children:[m[0],"/10"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm",children:"BPM:"}),r.jsx(Bt,{type:"number",value:e,onChange:U=>t(Number(U.target.value)),className:"w-16 text-sm",min:"60",max:"200","aria-label":"BPM tempo control"})]}),r.jsx(te,{onClick:W,disabled:V.isPending,className:"bg-studio-accent hover:bg-blue-500",children:V.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Generate Beat"]})})]})})]})}),N==="edit"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Drum Pattern Sequencer"}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-3",children:[r.jsx("span",{children:"Click squares to add drum hits  16 steps per pattern"}),r.jsxs("span",{children:["BPM: ",e]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsxs(te,{onClick:I,disabled:O,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),O?"Audio Ready":"Start Audio"]}),r.jsxs(te,{onClick:$,className:`${a?"bg-red-600 hover:bg-red-500":"bg-studio-success hover:bg-green-500"}`,children:[r.jsx("i",{className:`fas ${a?"fa-stop":"fa-play"} mr-2`}),a?"Stop":"Play"]}),r.jsx(te,{onClick:G,disabled:z.isPending,className:"bg-gray-600 hover:bg-gray-500",children:z.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-save mr-2"}),"Save Beat"]})})]}),a&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-1",children:[r.jsx("span",{children:"Beat Progress"}),r.jsxs("span",{children:["Step ",s%16+1," of 16"]})]}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-75 relative",style:{width:`${(s%16+1)/16*100}%`},children:r.jsx("div",{className:"absolute right-0 top-0 w-1 h-2 bg-yellow-300 animate-pulse rounded-full"})})}),r.jsx("div",{className:"grid grid-cols-16 gap-px",children:Array.from({length:16},(U,X)=>r.jsx("div",{className:`h-1 rounded-sm transition-all duration-75 ${X===s%16?"bg-yellow-400 animate-pulse":X<s%16?"bg-yellow-600":"bg-gray-600"}`},X))})]}),r.jsx("div",{className:"space-y-4",children:R.map(U=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"w-24 text-sm font-medium flex items-center space-x-2",children:[r.jsx("div",{className:`w-5 h-5 rounded ${U.color} flex items-center justify-center text-xs font-bold text-white shadow-lg`,children:U.name[0]}),r.jsx("span",{className:"text-gray-200",children:U.name})]}),r.jsx("div",{className:"flex space-x-1",children:(k[U.id]||Array(16).fill(!1)).map((X,re)=>r.jsxs("button",{onClick:()=>{K(U.id,re),!X&&O&&T(U.id)},className:`beat-pad w-10 h-10 rounded border-2 transition-all relative flex items-center justify-center text-xs font-bold ${X?`${U.color} shadow-lg transform scale-105 border-gray-300 text-white`:"bg-gray-700 hover:bg-gray-600 border-gray-500 text-gray-400 hover:border-gray-400"} ${a&&s%16===re?"ring-4 ring-yellow-400 ring-opacity-100 shadow-lg shadow-yellow-400/50 animate-pulse scale-110":""}`,title:`${U.name} - Step ${re+1} (Click to toggle)`,children:[r.jsx("span",{className:"opacity-70",children:re+1}),re%4===0&&r.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs text-yellow-400 font-bold bg-gray-800 px-1 rounded",children:["Beat ",re/4+1]})]},re))})]},U.id))})]})}),N==="sequencer"&&r.jsx("div",{className:"space-y-6",children:r.jsx(bx,{})})]})})}function EU(){const n=x.useContext($s),{playDrumSound:e,initialize:t,isInitialized:s}=qn(),{toast:i}=$t(),[a,c]=x.useState(!1),[u,d]=x.useState(0),[h,p]=x.useState(120),[m,y]=x.useState([80]),b=x.useRef(null);x.useRef(null);const _=()=>{if(n.currentPattern&&Object.keys(n.currentPattern).length>0)return Object.values(n.currentPattern).some(W=>Array.isArray(W)&&W.some(G=>G===!0))?n.currentPattern:null;const V=localStorage.getItem("generatedMusicData");return V&&JSON.parse(V).beatPattern||null},v=()=>{if(n.currentMelody&&n.currentMelody.length>0)return n.currentMelody;const V=localStorage.getItem("generatedMusicData");return V?JSON.parse(V).melody||[]:[]},w=()=>{const V=localStorage.getItem("generatedMusicData");return V&&JSON.parse(V).lyrics||""},N=()=>n.currentCodeMusic&&Object.keys(n.currentCodeMusic).length>0?n.currentCodeMusic:{},[P,C]=x.useState(()=>{const V=_(),z=v(),W=w(),G=N();return[{id:"beats",name:"Drum Beats",enabled:!!V,volume:75,data:V,color:"bg-red-500",hasData:!!V},{id:"melody",name:"Melody",enabled:z.length>0,volume:65,data:z,color:"bg-blue-500",hasData:z.length>0},{id:"lyrics",name:"Lyrics",enabled:!!W,volume:70,data:W,color:"bg-green-500",hasData:!!W},{id:"code-music",name:"Code Music",enabled:Object.keys(G).length>0,volume:60,data:G,color:"bg-purple-500",hasData:Object.keys(G).length>0}]}),A=P.filter(V=>V.enabled&&V.hasData),k=P.some(V=>V.hasData),M=async()=>{s||await t()},E=async()=>{await M();const V=60/h/4*1e3;let z=0;b.current=setInterval(()=>{d(z%16);const W=P.find(K=>K.id==="beats"&&K.enabled);W&&W.data&&Object.entries(W.data).forEach(([K,$])=>{Array.isArray($)&&$[z%16]&&e(K)});const G=P.find(K=>K.id==="melody"&&K.enabled);if(G&&G.data&&G.data.length>0){const K=Math.floor(z/4);if(z%4===0&&K<G.data.length){const $=G.data[K];$&&$.note&&e("kick")}}z++,z>=16&&(z=0)},V)},T=()=>{b.current&&(clearInterval(b.current),b.current=null),c(!1),d(0)},I=async()=>{a?T():(c(!0),await E())},O=(V,z)=>{C(W=>W.map(G=>G.id===V?{...G,volume:z}:G))},F=V=>{C(z=>z.map(W=>W.id===V?{...W,enabled:!W.enabled}:W))},L=async()=>{i({title:"Export Started",description:"Your mixed composition is being prepared for download..."}),setTimeout(()=>{i({title:"Export Complete",description:"Your mixed track has been generated successfully!"})},2e3)};return k?r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[r.jsx(ta,{className:"w-6 h-6"}),"Music Mixer"]}),r.jsx("p",{className:"text-muted-foreground",children:"Combine your beats, melodies, and lyrics into a complete song"})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Be,{htmlFor:"bpm",className:"text-sm",children:"BPM:"}),r.jsx("input",{id:"bpm",type:"number",value:h,onChange:V=>p(Number(V.target.value)),className:"w-16 px-2 py-1 text-sm border rounded",min:"60",max:"200","aria-label":"BPM tempo control"})]})})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center justify-between",children:["Transport Controls",r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Oe,{variant:a?"default":"secondary",children:a?`Playing - Step ${u+1}`:"Stopped"})})]})}),r.jsxs(we,{children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(te,{onClick:I,className:"flex items-center gap-2",disabled:A.length===0,children:[a?r.jsx(ua,{className:"w-4 h-4"}):r.jsx(sr,{className:"w-4 h-4"}),a?"Pause":"Play Mixed Song"]}),r.jsxs(te,{onClick:T,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(yh,{className:"w-4 h-4"}),"Stop"]}),r.jsx(fc,{orientation:"vertical",className:"h-8"}),r.jsxs(te,{onClick:L,variant:"outline",className:"flex items-center gap-2",disabled:A.length===0,children:[r.jsx(ph,{className:"w-4 h-4"}),"Export Mix"]})]}),r.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[r.jsx(yi,{className:"w-4 h-4"}),r.jsx(Be,{className:"min-w-0",children:"Master Volume:"}),r.jsx("div",{className:"flex-1 max-w-48",children:r.jsx(pe,{value:m,onValueChange:y,max:100,step:1,className:"w-full"})}),r.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[m[0],"%"]})]})]})]}),r.jsx("div",{className:"grid gap-4",children:P.map(V=>r.jsxs(ye,{className:V.hasData?"border-2":"opacity-50",children:[r.jsx(_e,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${V.color}`}),r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg",children:V.name}),r.jsx(Yt,{children:V.hasData?V.id==="beats"?`${Object.values(V.data||{}).filter(z=>z.some(W=>W)).length} drum tracks`:V.id==="melody"?`${V.data?.length||0} notes`:V.id==="lyrics"?`${(V.data||"").split(" ").length} words`:"Code-generated music":"No data available"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(oi,{checked:V.enabled,onCheckedChange:()=>F(V.id),disabled:!V.hasData,"aria-label":`Toggle ${V.name} track`}),V.hasData&&r.jsx(Oe,{variant:V.enabled?"default":"secondary",children:V.enabled?"Enabled":"Muted"})]})]})}),V.hasData&&V.enabled&&r.jsx(we,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(yi,{className:"w-4 h-4"}),r.jsx("div",{className:"flex-1 max-w-64",children:r.jsx(pe,{value:[V.volume],onValueChange:z=>O(V.id,z[0]),max:100,step:1,className:"w-full","aria-label":`${V.name} track volume control`})}),r.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[V.volume,"%"]})]})})]},V.id))}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Mix Status"})}),r.jsx(we,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Active Tracks:"}),r.jsxs("p",{className:"text-muted-foreground",children:[A.length," of ",P.filter(V=>V.hasData).length]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Tempo:"}),r.jsxs("p",{className:"text-muted-foreground",children:[h," BPM"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Master Volume:"}),r.jsxs("p",{className:"text-muted-foreground",children:[m[0],"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Status:"}),r.jsx("p",{className:"text-muted-foreground",children:a?"Playing":"Stopped"})]})]})})]})]}):r.jsx("div",{className:"p-8 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx(ta,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Music Data Available"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Generate some beats, melodies, or lyrics in other studio tools first, then come back here to mix them together."}),r.jsxs("div",{className:"flex flex-col gap-2 text-sm text-muted-foreground",children:[r.jsx("p",{children:" Use Beat Maker to create drum patterns"}),r.jsx("p",{children:" Use Melody Composer to create musical phrases"}),r.jsx("p",{children:" Use Lyric Lab to generate music from lyrics"}),r.jsx("p",{children:" Use Code Translator to create music from code"})]})]})})}function OP(){const[n,e]=x.useState("electronic"),[t,s]=x.useState([5]),[i,a]=x.useState([]),[c,u]=x.useState(!1),[d,h]=x.useState(null),{toast:p}=$t(),{playNote:m,initialize:y,isInitialized:b}=qn(),_=x.useContext($s),v=k=>{const E=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],T=Math.round(12*Math.log2(k/440)),I=Math.floor((T+9)/12)+4,O=((T+9)%12+12)%12;return{note:E[O],octave:Math.max(0,I)}},w=Et({mutationFn:async k=>{const M=["electronic","orchestral","jazz","rock","ambient","world","cinematic","experimental"],E=[3,4,5,6,7,8],T=M[Math.floor(Math.random()*M.length)],I=E[Math.floor(Math.random()*E.length)];return(await yt("POST","/api/layers/generate",{...k,style:T,complexity:I})).json()},onSuccess:k=>{k.layers&&(a(k.layers),_.setCurrentLayers?.(k.layers)),p({title:"Layers Generated",description:`AI created ${k.layers?.length||0} ${k.approach} ${k.primaryInstrument} layers!`})},onError:()=>{p({title:"Generation Failed",description:"Failed to generate dynamic layers. Please try again.",variant:"destructive"})}}),N=()=>({beatPattern:_.currentPattern,melody:_.currentMelody,lyrics:_.currentLyrics,codeMusic:_.currentCodeMusic,bpm:120,timestamp:Date.now()}),P=()=>{const k=N();w.mutate({arrangement:k,style:n,complexity:t[0]})},C=async k=>{b||await y(),u(!0),h(k.instrument);for(const E of k.notes)setTimeout(()=>{const{note:T,octave:I}=v(E.frequency);m(T,I,E.duration,k.instrument,E.velocity)},E.start*1e3);const M=Math.max(...k.notes.map(E=>E.start+E.duration));setTimeout(()=>{u(!1),h(null)},M*1e3)},A=async()=>{b||await y(),u(!0),i.forEach(M=>{M.notes.forEach(E=>{setTimeout(()=>{const{note:T,octave:I}=v(E.frequency);m(T,I,E.duration,M.instrument,E.velocity*M.volume)},E.start*1e3)})});const k=Math.max(...i.flatMap(M=>M.notes.map(E=>E.start+E.duration)));setTimeout(()=>{u(!1)},k*1e3)};return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-600 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Dynamic Layering"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(te,{onClick:y,disabled:b,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),b?"Audio Ready":"Start Audio"]}),r.jsxs("div",{className:"text-xs text-gray-400 px-2",children:[r.jsx("div",{children:"Intelligent instrument layering"}),r.jsx("div",{children:"Analyzes your arrangement and adds complementary parts"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{children:"Target Style"}),r.jsxs(rt,{value:n,onValueChange:e,children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"orchestral",children:"Orchestral (Strings, Brass, Woodwinds)"}),r.jsx(fe,{value:"electronic",children:"Electronic (Synths, Pads, Piano)"}),r.jsx(fe,{value:"jazz",children:"Jazz (Piano, Trumpet, Saxophone)"}),r.jsx(fe,{value:"rock",children:"Rock (Guitar, Organ, Strings)"}),r.jsx(fe,{value:"ambient",children:"Ambient (Pads, Harp, Choir)"}),r.jsx(fe,{value:"world",children:"World (Ethnic Instruments, Flute)"}),r.jsx(fe,{value:"cinematic",children:"Cinematic (Full Orchestra)"}),r.jsx(fe,{value:"experimental",children:"Experimental (Mixed Instruments)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{children:["Complexity: ",t[0],"/10"]}),r.jsx(pe,{value:t,onValueChange:s,max:10,min:1,step:1,className:"w-full"})]}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx(te,{onClick:P,disabled:w.isPending,className:"bg-studio-accent hover:bg-blue-500 flex-1",children:w.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-layer-group mr-2"}),"Generate Layers"]})}),i.length>0&&r.jsxs(te,{onClick:A,disabled:c||!b,className:"bg-green-600 hover:bg-green-500",children:[r.jsx("i",{className:`fas ${c?"fa-stop":"fa-play"} mr-2`}),c?"Stop":"Play All"]})]})]})]}),r.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-center",children:r.jsxs("div",{className:"max-w-md",children:[r.jsx("i",{className:"fas fa-layer-group text-6xl text-gray-600 mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Layers Generated"}),r.jsx("p",{className:"text-gray-400 mb-6",children:'Click "Generate Layers" to have AI analyze your current arrangement and add intelligent instrumental layers with piano, violin, guitar, flute, trumpet, and other melodic instruments.'}),r.jsxs("div",{className:"text-sm text-gray-500 space-y-2",children:[r.jsx("p",{children:r.jsx("strong",{children:"Current Arrangement:"})}),r.jsxs("p",{children:[" Beats: ",_.currentPattern?"Available":"None"]}),r.jsxs("p",{children:[" Melody: ",_.currentMelody?.length?`${_.currentMelody.length} notes`:"None"]}),r.jsxs("p",{children:[" Lyrics: ",_.currentLyrics?"Available":"None"]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:r.jsx("strong",{children:"Available Instruments:"})}),r.jsx("div",{className:"flex flex-wrap gap-1 text-xs",children:["Piano","Violin","Guitar","Flute","Trumpet","Saxophone","Organ","Harp","Cello","Synthesizer","Ambient Pads","Choir"].map(k=>r.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded",children:k},k))})]})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Generated Layers (",i.length,")"]}),r.jsxs(Oe,{variant:"secondary",children:[n," style"]})]}),r.jsx("div",{className:"grid gap-4",children:i.map((k,M)=>r.jsxs(ye,{className:`border-gray-600 ${d===k.instrument?"ring-2 ring-blue-500":""}`,children:[r.jsx(_e,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{className:"text-base",children:k.instrument}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Oe,{variant:"outline",children:k.type}),r.jsxs(te,{size:"sm",onClick:()=>C(k),disabled:c||!b,className:"bg-green-600 hover:bg-green-500",children:[r.jsx("i",{className:`fas ${c&&d===k.instrument?"fa-stop":"fa-play"} mr-1`}),c&&d===k.instrument?"Stop":"Play"]})]})]})}),r.jsx(we,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Volume:"}),r.jsxs("div",{className:"font-semibold",children:[Math.round(k.volume*100),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Pan:"}),r.jsx("div",{className:"font-semibold",children:k.pan===0?"Center":k.pan>0?`${Math.round(k.pan*100)}% R`:`${Math.round(Math.abs(k.pan)*100)}% L`})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Notes:"}),r.jsx("div",{className:"font-semibold",children:k.notes.length})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Role:"}),r.jsx("div",{className:"font-semibold text-xs",children:k.role})]})]}),(Array.isArray(k.effects)?k.effects.length>0:k.effects)&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Effects:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Array.isArray(k.effects)?k.effects:k.effects?[k.effects]:[]).map((E,T)=>r.jsx(Oe,{variant:"secondary",className:"text-xs",children:E},T))})]}),r.jsx(fc,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Note Preview (first 3):"}),k.notes.slice(0,3).map((E,T)=>r.jsxs("div",{className:"text-xs font-mono bg-gray-800 p-2 rounded",children:[Math.round(E.frequency),"Hz  ",E.start,"s  ",E.duration,"s  ",Math.round(E.velocity*100),"%"]},T)),k.notes.length>3&&r.jsxs("div",{className:"text-xs text-gray-500",children:["+",k.notes.length-3," more notes..."]})]})]})})]},M))})]})})]})}function DP(){const{isSupported:n,isConnected:e,connectedDevices:t,lastNote:s,activeNotes:i,initializeMIDI:a,refreshDevices:c,settings:u,updateSettings:d}=yx(),[h,p]=x.useState(!1),[m,y]=x.useState(!1);return n?r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"text-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"fas fa-keyboard mr-2"}),"MIDI Controller",e&&r.jsx(Oe,{variant:"secondary",className:"ml-2 bg-green-600 text-white",children:"Connected"})]}),r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>p(!h),children:[h?"Hide":"Show"," Details"]})]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-4 mb-4",children:[r.jsxs("h3",{className:"text-green-400 font-semibold mb-2 flex items-center",children:[r.jsx("i",{className:"fas fa-check-circle mr-2"}),"Controller Connected! Quick Setup Guide:"]}),r.jsxs("div",{className:"text-sm text-green-200 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"1. Play Notes:"})," Your controller is already playing piano - try pressing keys!"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"2. Change Instrument:"}),' Click the gear  button below, then use "Current Instrument" dropdown']}),r.jsxs("p",{children:[r.jsx("strong",{children:"3. Record Melodies:"}),' Go to "Melody Composer" tab to record your playing']}),r.jsxs("p",{children:[r.jsx("strong",{children:"4. Control Beats:"}),' Use "Beat Maker" tab - some controllers can trigger drums']}),r.jsxs("p",{children:[r.jsx("strong",{children:"5. Live Performance:"})," All tabs work with your controller for real-time control"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[e?r.jsxs(te,{onClick:c,variant:"outline",className:"flex-1",children:[r.jsx("i",{className:"fas fa-sync mr-2"}),"Refresh Devices"]}):r.jsxs(te,{onClick:a,className:"flex-1 bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-plug mr-2"}),"Connect MIDI"]}),r.jsx(te,{onClick:()=>y(!m),variant:"outline",className:"px-3",children:r.jsx("i",{className:"fas fa-cog"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-300",children:"Status:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-sm",children:e?`Ready (${t.length} devices)`:"Not connected"})]})]}),t.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:["Connected Devices (",t.length,")"]}),r.jsx(ps,{className:"h-24",children:r.jsx("div",{className:"space-y-1",children:t.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-200",children:b.name}),r.jsx("div",{className:"text-gray-400",children:b.manufacturer})]}),r.jsx(Oe,{variant:b.state==="connected"?"default":"secondary",className:"text-xs",children:b.state})]},b.id))})})]}),e&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Activity"}),i.size>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Playing Notes:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:[...i].map(b=>r.jsx(Oe,{variant:"default",className:"bg-studio-accent text-xs",children:b},b))})]}),s&&r.jsx("div",{className:"p-2 bg-gray-800 rounded text-xs",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Last Note:"}),r.jsxs("span",{className:"text-gray-200",children:["Note ",s.note,"  Ch ",s.channel+1,"  Vel ",s.velocity]})]})}),i.size===0&&!s&&r.jsxs("div",{className:"text-center py-3 text-gray-500 text-sm",children:[r.jsx("i",{className:"fas fa-music mb-1"}),r.jsx("div",{children:"Play your MIDI controller to see activity"})]})]}),h&&e&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Channel Mapping"}),r.jsx(ps,{className:"h-32",children:r.jsx("div",{className:"space-y-1 text-xs",children:[{ch:1,instrument:"Piano"},{ch:2,instrument:"Guitar"},{ch:3,instrument:"Bass"},{ch:4,instrument:"Violin"},{ch:5,instrument:"Flute"},{ch:6,instrument:"Trumpet"},{ch:7,instrument:"Organ"},{ch:8,instrument:"Synth"},{ch:10,instrument:"Drums"}].map(b=>r.jsxs("div",{className:"flex justify-between p-1 bg-gray-800 rounded",children:[r.jsxs("span",{className:"text-gray-400",children:["Channel ",b.ch,":"]}),r.jsx("span",{className:"text-gray-200",children:b.instrument})]},b.ch))})}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Set your MIDI controller to different channels to play different instruments"})]}),m&&r.jsxs("div",{className:"space-y-4 border-t border-gray-600 pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center",children:[r.jsx("i",{className:"fas fa-cog mr-2"}),"MIDI Settings"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{className:"text-sm text-gray-300",children:"Input Device"}),r.jsxs(rt,{value:u?.inputDevice,onValueChange:b=>d({inputDevice:b}),children:[r.jsx(et,{className:"bg-gray-800 border-gray-600",children:r.jsx(it,{placeholder:"Select MIDI input device"})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"all",children:"All Connected Devices"}),t.filter(b=>b.connection==="input"||b.connection==="input/output").map(b=>r.jsxs(fe,{value:b.id,children:[b.name," (",b.manufacturer,")"]},b.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{className:"text-sm text-gray-300",children:["Velocity Sensitivity: ",u?.velocitySensitivity?.[0]||100,"%"]}),r.jsx(pe,{value:u?.velocitySensitivity||[100],onValueChange:b=>d({velocitySensitivity:b}),max:200,min:50,step:10,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[r.jsx("span",{children:"Less sensitive"}),r.jsx("span",{children:"More sensitive"})]})]}),r.jsxs("div",{className:"space-y-2 bg-blue-900/20 border border-blue-600 rounded-lg p-3",children:[r.jsx(Be,{className:"text-sm text-blue-300 font-semibold",children:" Current Instrument"}),r.jsxs(rt,{value:u?.currentInstrument||"piano",onValueChange:b=>d({currentInstrument:b}),children:[r.jsx(et,{className:"bg-gray-800 border-gray-600",children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"piano",children:" Piano"}),r.jsx(fe,{value:"guitar",children:" Guitar"}),r.jsx(fe,{value:"violin",children:" Violin"}),r.jsx(fe,{value:"flute",children:" Flute"}),r.jsx(fe,{value:"trumpet",children:" Trumpet"}),r.jsx(fe,{value:"bass",children:" Bass"}),r.jsx(fe,{value:"organ",children:" Organ"})]})]}),r.jsx("div",{className:"text-xs text-blue-200",children:"This changes the instrument sound for your MIDI controller"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{className:"text-sm text-gray-300",children:"MIDI Channel Mode"}),r.jsxs(rt,{value:u?.channelMode,onValueChange:b=>d({channelMode:b}),children:[r.jsx(et,{className:"bg-gray-800 border-gray-600",children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"omni",children:"Omni (All Channels)"}),r.jsx(fe,{value:"multi",children:"Multi-Channel Instruments"}),r.jsx(fe,{value:"single",children:"Single Channel"})]})]})]}),u?.channelMode==="single"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Be,{className:"text-sm text-gray-300",children:["Active Channel: ",u?.activeChannel||1]}),r.jsx(pe,{value:[u?.activeChannel||1],onValueChange:b=>d({activeChannel:b[0]}),max:16,min:1,step:1,className:"w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Be,{className:"text-sm text-gray-300",children:"Note Range"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(Be,{className:"text-xs text-gray-400",children:"Lowest Note"}),r.jsx(pe,{value:[u?.noteRange?.min||21],onValueChange:b=>d({noteRange:{min:b[0],max:u?.noteRange?.max||108}}),max:127,min:0,step:1,className:"w-full","aria-label":"Lowest MIDI note range"}),r.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Note ",u?.noteRange?.min||21]})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"text-xs text-gray-400",children:"Highest Note"}),r.jsx(pe,{value:[u?.noteRange?.max||108],onValueChange:b=>d({noteRange:{min:u?.noteRange?.min||21,max:b[0]}}),max:127,min:0,step:1,className:"w-full","aria-label":"Highest MIDI note range"}),r.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Note ",u?.noteRange?.max||108]})]})]})]}),r.jsx(fc,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Be,{className:"text-sm text-gray-300",children:"Advanced Options"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Be,{className:"text-sm text-gray-400",children:"Enable Sustain Pedal"}),r.jsx(oi,{checked:u?.sustainPedal!==!1,onCheckedChange:b=>d({sustainPedal:b}),"aria-label":"Enable sustain pedal support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Be,{className:"text-sm text-gray-400",children:"Enable Pitch Bend"}),r.jsx(oi,{checked:u?.pitchBend!==!1,onCheckedChange:b=>d({pitchBend:b}),"aria-label":"Enable pitch bend support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Be,{className:"text-sm text-gray-400",children:"Enable Modulation"}),r.jsx(oi,{checked:u?.modulation!==!1,onCheckedChange:b=>d({modulation:b}),"aria-label":"Enable modulation wheel support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Be,{className:"text-sm text-gray-400",children:"Auto-connect New Devices"}),r.jsx(oi,{checked:u?.autoConnect!==!1,onCheckedChange:b=>d({autoConnect:b}),"aria-label":"Auto-connect new MIDI devices"})]})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>d({}),className:"w-full text-xs",children:[r.jsx("i",{className:"fas fa-undo mr-2"}),"Reset to Default Settings"]})]}),e&&t.length===0&&r.jsxs("div",{className:"text-center py-4 text-gray-500",children:[r.jsx("i",{className:"fas fa-search text-2xl mb-2"}),r.jsx("p",{className:"text-sm mb-2",children:"No MIDI devices detected"}),r.jsx("p",{className:"text-xs mb-3",children:"Make sure your MIDI controller is connected and powered on"}),r.jsxs(te,{size:"sm",variant:"outline",onClick:c,children:[r.jsx("i",{className:"fas fa-sync mr-2"}),"Scan for Devices"]})]}),h&&r.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:[r.jsx("i",{className:"fas fa-question-circle mr-2"}),"Troubleshooting"]}),r.jsxs("div",{className:"space-y-2 text-xs text-gray-400",children:[r.jsx("div",{children:" Ensure your MIDI device is connected via USB or MIDI cable"}),r.jsx("div",{children:" Check that your device is powered on and recognized by your system"}),r.jsx("div",{children:" Try refreshing devices if your controller doesn't appear"}),r.jsx("div",{children:" Some devices may require specific drivers or software"}),r.jsx("div",{children:" Web MIDI works best in Chrome, Edge, or Opera browsers"})]})]})]})]}):r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"text-gray-200 flex items-center",children:[r.jsx("i",{className:"fas fa-keyboard mr-2"}),"MIDI Controller"]})}),r.jsx(we,{children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-500 text-2xl mb-2"}),r.jsx("p",{className:"text-gray-400 mb-3",children:"Web MIDI API not supported in this browser"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Try using Chrome, Edge, or Opera for MIDI support"})]})})]})}var $x="Progress",qx=100,[AU,JH]=wn($x),[MU,RU]=AU($x),FP=x.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:i,getValueLabel:a=IU,...c}=n;(i||i===0)&&!N_(i)&&console.error(OU(`${i}`,"Progress"));const u=N_(i)?i:qx;s!==null&&!k_(s,u)&&console.error(DU(`${s}`,"Progress"));const d=k_(s,u)?s:null,h=Hd(d)?a(d,u):void 0;return r.jsx(MU,{scope:t,value:d,max:u,children:r.jsx(je.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Hd(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":BP(d,u),"data-value":d??void 0,"data-max":u,...c,ref:e})})});FP.displayName=$x;var LP="ProgressIndicator",zP=x.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,i=RU(LP,t);return r.jsx(je.div,{"data-state":BP(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});zP.displayName=LP;function IU(n,e){return`${Math.round(n/e*100)}%`}function BP(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Hd(n){return typeof n=="number"}function N_(n){return Hd(n)&&!isNaN(n)&&n>0}function k_(n,e){return Hd(n)&&!isNaN(n)&&n<=e&&n>=0}function OU(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qx}\`.`}function DU(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var VP=FP,FU=zP;const Wx=x.forwardRef(({className:n,value:e,...t},s)=>r.jsx(VP,{ref:s,className:Re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:r.jsx(FU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Wx.displayName=VP.displayName;function UP(){const[n,e]=x.useState([]),[t,s]=x.useState(null);x.useEffect(()=>{const d=localStorage.getItem("codeMusic_metrics");if(d)try{e(JSON.parse(d))}catch(p){console.error("Failed to load metrics:",p)}const h=p=>{const m=p.detail;e(y=>{const b=[m,...y].slice(0,50);return localStorage.setItem("codeMusic_metrics",JSON.stringify(b)),b})};return window.addEventListener("codeMusic_metricsUpdate",h),()=>{window.removeEventListener("codeMusic_metricsUpdate",h)}},[]);const a=(()=>{if(n.length===0)return null;const d=n.length,h=n.reduce((v,w)=>v+w.performance.generationTimeMs,0)/d,p=n.filter(v=>v.performance.fallbackUsed).length/d*100,m=n.reduce((v,w)=>(v[w.language]=(v[w.language]||0)+1,v),{}),y=Object.entries(m).sort((v,w)=>w[1]-v[1])[0],b=n.reduce((v,w)=>v+w.musicGeneration.instruments.length,0)/d,_=n.reduce((v,w)=>(v[w.performance.quality]=(v[w.performance.quality]||0)+1,v),{});return{totalSessions:d,avgGenerationTime:Math.round(h),fallbackRate:Math.round(p*10)/10,topLanguage:y?y[0]:"N/A",avgInstruments:Math.round(b*10)/10,qualityDistribution:_}})(),c=d=>{switch(d){case"excellent":return"bg-green-500";case"good":return"bg-blue-500";case"fair":return"bg-yellow-500";case"poor":return"bg-red-500";default:return"bg-gray-500"}},u=d=>d<1e3?`${d}ms`:`${(d/1e3).toFixed(1)}s`;return r.jsxs("div",{className:"flex flex-col h-full bg-studio-bg text-white",children:[r.jsx("div",{className:"flex-none p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-studio-accent",children:"Performance Metrics"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"AI Code-to-Music generation analytics and performance insights"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Oe,{variant:"outline",className:"border-studio-accent text-studio-accent",children:[n.length," Sessions"]}),r.jsx(Oe,{variant:"outline",className:"border-green-500 text-green-500",children:"Live Tracking"})]})]})}),r.jsx(ps,{className:"flex-1 p-6",children:a?r.jsxs(Ao,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(pa,{className:"grid grid-cols-3 w-full bg-studio-panel",children:[r.jsx(At,{value:"overview",children:"Overview"}),r.jsx(At,{value:"sessions",children:"Sessions"}),r.jsx(At,{value:"analysis",children:"Analysis"})]}),r.jsxs(Mt,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(ye,{className:"bg-studio-panel border-gray-600",children:r.jsxs(_e,{className:"pb-2",children:[r.jsx(Yt,{children:"Total Sessions"}),r.jsx(Ce,{className:"text-2xl text-studio-accent",children:a.totalSessions})]})}),r.jsx(ye,{className:"bg-studio-panel border-gray-600",children:r.jsxs(_e,{className:"pb-2",children:[r.jsx(Yt,{children:"Avg Generation Time"}),r.jsx(Ce,{className:"text-2xl text-blue-400",children:u(a.avgGenerationTime)})]})}),r.jsx(ye,{className:"bg-studio-panel border-gray-600",children:r.jsxs(_e,{className:"pb-2",children:[r.jsx(Yt,{children:"Fallback Rate"}),r.jsxs(Ce,{className:"text-2xl text-yellow-400",children:[a.fallbackRate,"%"]})]})}),r.jsx(ye,{className:"bg-studio-panel border-gray-600",children:r.jsxs(_e,{className:"pb-2",children:[r.jsx(Yt,{children:"Top Language"}),r.jsx(Ce,{className:"text-2xl text-green-400",children:a.topLanguage})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Quality Distribution"}),r.jsx(Yt,{children:"AI generation quality metrics"})]}),r.jsx(we,{className:"space-y-3",children:Object.entries(a.qualityDistribution).map(([d,h])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${c(d)}`}),r.jsx("span",{className:"capitalize",children:d})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-400",children:h}),r.jsx(Wx,{value:h/a.totalSessions*100,className:"w-20 h-2"})]})]},d))})]}),r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Performance Trends"}),r.jsx(Yt,{children:"Recent generation statistics"})]}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Avg Instruments per Track"}),r.jsx("span",{className:"text-studio-accent font-mono",children:a.avgInstruments})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"AI Success Rate"}),r.jsxs("span",{className:"text-green-400 font-mono",children:[Math.round((100-a.fallbackRate)*10)/10,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Most Recent Quality"}),r.jsx(Oe,{className:`${c(n[0]?.performance.quality||"fair")} text-white`,children:n[0]?.performance.quality||"N/A"})]})]})]})]})]}),r.jsx(Mt,{value:"sessions",className:"space-y-4",children:r.jsx("div",{className:"space-y-4",children:n.slice(0,20).map((d,h)=>r.jsx(ye,{className:"bg-studio-panel border-gray-600 cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>s(t?.session===d.session?null:d),children:r.jsxs(we,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${c(d.performance.quality)}`}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[d.language,"  ",d.musicGeneration.instruments.length," instruments"]}),r.jsx("div",{className:"text-sm text-gray-400",children:new Date(d.timestamp).toLocaleString()})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(Oe,{variant:"outline",className:"border-blue-400 text-blue-400",children:[d.musicGeneration.totalNotes," notes"]}),r.jsx("span",{className:"text-sm text-gray-400",children:u(d.performance.generationTimeMs)}),d.performance.fallbackUsed&&r.jsx(Oe,{variant:"outline",className:"border-yellow-400 text-yellow-400",children:"Fallback"})]})]}),t?.session===d.session&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-600 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Code Complexity"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Lines:"}),r.jsx("span",{children:d.codeComplexity.lines})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Functions:"}),r.jsx("span",{children:d.codeComplexity.functions})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Classes:"}),r.jsx("span",{children:d.codeComplexity.classes})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Music Analysis"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Rhythm Complexity:"}),r.jsx("span",{children:d.musicGeneration.rhythmComplexity.toFixed(1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Harmonic Diversity:"}),r.jsx("span",{children:d.musicGeneration.harmonicDiversity.toFixed(1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Avg Note Duration:"}),r.jsxs("span",{children:[d.musicGeneration.averageNoteDuration.toFixed(2),"s"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Instrument Distribution"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(d.musicGeneration.noteDistribution).map(([p,m])=>r.jsxs(Oe,{variant:"outline",className:"border-purple-400 text-purple-400",children:[p,": ",m]},p))})]})]})]})},d.session))})}),r.jsx(Mt,{value:"analysis",className:"space-y-6",children:r.jsxs(ye,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(_e,{children:[r.jsx(Ce,{children:"Advanced Analytics"}),r.jsx(Yt,{children:"Deep insights into code-to-music generation patterns"})]}),r.jsx(we,{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("i",{className:"fas fa-chart-line text-gray-400 text-3xl mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Advanced analytics coming soon..."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Will include trend analysis, pattern recognition, and optimization suggestions"})]})})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-xl"})}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Data Yet"}),r.jsx("p",{className:"text-gray-400",children:"Generate some music from code to see performance metrics here"})]})})]})}function LU(){const[n,e]=x.useState("beatmaker"),[t,s]=x.useState(!1),i=x.useContext($s),{toast:a}=$t(),{initialize:c,isInitialized:u}=qn(),d=[{id:"beatmaker",name:"Beat Maker",icon:mh,color:"bg-red-500"},{id:"melody",name:"Melody Composer",icon:Pn,color:"bg-blue-500"},{id:"codebeat",name:"Code to Music",icon:hi,color:"bg-green-500"},{id:"musiccode",name:"Music to Code",icon:hi,color:"bg-purple-500"},{id:"assistant",name:"AI Assistant",icon:gh,color:"bg-pink-500"},{id:"security",name:"Security Scanner",icon:Fy,color:"bg-orange-500"},{id:"lyrics",name:"Lyric Lab",icon:uj,color:"bg-yellow-500"},{id:"mixer",name:"Music Mixer",icon:ea,color:"bg-cyan-500"},{id:"layers",name:"Dynamic Layering",icon:ea,color:"bg-indigo-500"},{id:"midi",name:"MIDI Controller",icon:ta,color:"bg-gray-500"},{id:"metrics",name:"Performance Metrics",icon:ta,color:"bg-teal-500"}],h=async()=>{try{u||await c(),t?(i.stopFullSong(),s(!1)):(await i.playFullSong(),s(!0))}catch{a({title:"Playback Error",description:"Failed to control audio playback",variant:"destructive"})}},p=()=>{switch(n){case"beatmaker":return r.jsx(j_,{});case"melody":return r.jsx(fT,{});case"codebeat":return r.jsx(ET,{});case"musiccode":return r.jsx(AT,{});case"assistant":return r.jsx(EP,{});case"security":return r.jsx(AP,{});case"lyrics":return r.jsx(MP,{});case"mixer":return r.jsx(EU,{});case"layers":return r.jsx(OP,{});case"midi":return r.jsx(DP,{});case"metrics":return r.jsx(UP,{});default:return r.jsx(j_,{})}};return r.jsxs("div",{className:"h-full flex flex-col bg-gray-900 text-white",children:[r.jsx("div",{className:"flex-shrink-0 p-6 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(Pn,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Professional Music Studio"}),r.jsx("p",{className:"text-gray-400",children:"Complete music production environment"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(te,{onClick:h,className:`${t?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,children:[t?r.jsx(ua,{className:"h-4 w-4 mr-2"}):r.jsx(sr,{className:"h-4 w-4 mr-2"}),t?"Stop All":"Play All"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:"secondary",children:"Professional"}),r.jsx(Oe,{variant:"secondary",children:"Multi-Tool"}),r.jsx(Oe,{variant:"secondary",children:"AI-Powered"})]})]})]})}),r.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-700",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(m=>r.jsxs(te,{onClick:()=>e(m.id),variant:n===m.id?"default":"outline",className:`flex items-center gap-2 ${n===m.id?m.color:"border-gray-600"}`,children:[r.jsx(m.icon,{className:"h-4 w-4"}),m.name]},m.id))})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:p()}),r.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-700 bg-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{children:["Active Tool: ",r.jsx("strong",{children:d.find(m=>m.id===n)?.name})]}),r.jsx(fc,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:["Status: ",t?" Playing":" Stopped"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[r.jsxs("span",{children:["Audio: ",u?"Ready":"Not Ready"]}),r.jsxs("span",{children:["BPM: ",i.bpm||120]}),r.jsxs("span",{children:["Tools: ",d.length]})]})]})})]})}function zU(){const[n,e]=x.useState(75),[t,s]=x.useState([{id:"kick",name:"KICK",volume:80,pan:0,muted:!1,solo:!1,eq:{high:0,mid:2,low:5},sends:{reverb:10,delay:5},level:65},{id:"snare",name:"SNARE",volume:75,pan:0,muted:!1,solo:!1,eq:{high:3,mid:1,low:-2},sends:{reverb:25,delay:15},level:80},{id:"hihat",name:"HI-HAT",volume:60,pan:25,muted:!1,solo:!1,eq:{high:4,mid:0,low:-6},sends:{reverb:20,delay:30},level:45},{id:"melody",name:"MELODY",volume:85,pan:-15,muted:!1,solo:!1,eq:{high:1,mid:3,low:0},sends:{reverb:40,delay:20},level:70},{id:"codebeat",name:"CODEBEAT",volume:70,pan:10,muted:!1,solo:!1,eq:{high:2,mid:1,low:1},sends:{reverb:60,delay:50},level:60}]),[i,a]=x.useState({reverb:{type:"hall",roomSize:35,damping:60,wetDry:25,volume:70},delay:{time:40,feedback:30,mix:20,volume:65},compressor:{threshold:70,ratio:50,attack:30,volume:80}}),{toast:c}=$t(),{initialize:u,isInitialized:d}=qn(),[h,p]=x.useState(!1),m=(C,A)=>{s(k=>k.map(M=>M.id===C?{...M,...A}:M))},y=(C,A,k)=>{s(M=>M.map(E=>E.id===C?{...E,eq:{...E.eq,[A]:k}}:E))},b=(C,A,k)=>{s(M=>M.map(E=>E.id===C?{...E,sends:{...E.sends,[A]:k}}:E))},_=C=>{m(C,{muted:!t.find(A=>A.id===C)?.muted})},v=C=>{const A=t.find(k=>k.id===C);m(C,{solo:!A?.solo})},w=()=>{s(C=>C.map(A=>({...A,volume:Math.max(20,Math.min(100,A.volume+(Math.random()-.5)*10)),pan:Math.max(-50,Math.min(50,A.pan+(Math.random()-.5)*20))})))},N=()=>{e(75),s(t.map(C=>({...C,volume:C.id==="kick"?80:C.id==="snare"?75:C.id==="hihat"?60:C.id==="melody"?70:65,pan:C.id==="hihat"?10:C.id==="melody"?-5:C.id==="codebeat"?5:0,hi:0,mid:0,lo:0,reverb:0,delay:0,muted:!1,solo:!1})))},P=()=>{p(!h)};return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Professional Mixer"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(te,{onClick:()=>{u(),c({title:"Audio Initialized",description:"The audio engine has started."})},className:"bg-studio-accent hover:bg-blue-500",disabled:d,children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),"Start Audio"]}),r.jsxs(te,{onClick:w,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"AI Auto-Mix"]}),r.jsxs(te,{onClick:N,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx("i",{className:"fas fa-undo mr-2"}),"Reset"]}),r.jsx(te,{onClick:P,className:h?"bg-green-500 hover:bg-green-400":"bg-gray-700 hover:bg-gray-600",children:h?"Studio Linked":"Link Studio"})]})]})}),r.jsx(ps,{className:"flex-1 p-6",children:r.jsxs("div",{className:"flex space-x-4 min-w-max pb-4",children:[t.map(C=>r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-3 w-24 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-center",children:C.name}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"EQ"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"HI"}),r.jsx("div",{className:"w-12",children:r.jsx(pe,{value:[C.eq.high],onValueChange:([A])=>y(C.id,"high",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} high EQ control`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"MD"}),r.jsx("div",{className:"w-12",children:r.jsx(pe,{value:[C.eq.mid],onValueChange:([A])=>y(C.id,"mid",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} mid EQ control`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"LO"}),r.jsx("div",{className:"w-12",children:r.jsx(pe,{value:[C.eq.low],onValueChange:([A])=>y(C.id,"low",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} low EQ control`})})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"SEND"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"RV"}),r.jsx("div",{className:"w-12",children:r.jsx(pe,{value:[C.sends.reverb],onValueChange:([A])=>b(C.id,"reverb",A),min:0,max:100,step:1,className:"h-1","aria-label":`${C.name} reverb send level`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"DL"}),r.jsx("div",{className:"w-12",children:r.jsx(pe,{value:[C.sends.delay],onValueChange:([A])=>b(C.id,"delay",A),min:0,max:100,step:1,className:"h-1","aria-label":`${C.name} delay send level`})})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center mb-1",children:"PAN"}),r.jsx(pe,{value:[C.pan],onValueChange:([A])=>m(C.id,{pan:A}),min:-50,max:50,step:1,className:"w-full h-1","aria-label":`${C.name} pan control`}),r.jsx("div",{className:"text-xs text-center mt-1",children:C.pan===0?"CENTER":C.pan>0?`R+${C.pan}`:`L${C.pan}`})]}),r.jsx("div",{className:"flex-1 flex justify-center mb-4",children:r.jsx("div",{className:"w-6 bg-gray-700 rounded-full relative overflow-hidden",children:r.jsx("div",{className:"meter-bar absolute bottom-0 w-full rounded-full transition-all duration-200",style:{height:`${C.level}%`}})})}),r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"VOL"}),r.jsx("div",{className:"relative h-32 w-6 bg-gray-700 rounded-full mx-auto",children:r.jsx("div",{className:"absolute w-6 h-3 bg-studio-accent rounded-full cursor-pointer transition-all",style:{bottom:`${C.volume}%`,transform:"translateY(50%)"},role:"slider","aria-label":`${C.name} volume fader`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":C.volume,tabIndex:0,onMouseDown:A=>{const M=A.currentTarget.parentElement.getBoundingClientRect(),E=I=>{const O=I.clientY-M.top,F=Math.max(0,Math.min(100,100-O/M.height*100));m(C.id,{volume:F})},T=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",T)}})}),r.jsxs("div",{className:"text-xs font-mono mt-2",children:[C.volume>75?`+${Math.round((C.volume-75)/3)}`:`-${Math.round((75-C.volume)/3)}`,"dB"]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(te,{onClick:()=>v(C.id),className:`w-full text-xs py-1 font-bold ${C.solo?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 hover:bg-yellow-500 hover:text-black"}`,children:"SOLO"}),r.jsx(te,{onClick:()=>_(C.id),className:`w-full text-xs py-1 ${C.muted?"bg-red-600 hover:bg-red-500":"bg-gray-700 hover:bg-red-600"}`,children:"MUTE"})]})]},C.id)),r.jsxs("div",{className:"bg-studio-panel border-2 border-studio-accent rounded-lg p-4 w-32 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-sm font-bold mb-4 text-center text-studio-accent",children:"MASTER"}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"MASTER EQ"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"HIGH"}),r.jsx("div",{className:"w-16",children:r.jsx(pe,{value:[1],min:-12,max:12,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"MID"}),r.jsx("div",{className:"w-16",children:r.jsx(pe,{value:[0],min:-12,max:12,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"LOW"}),r.jsx("div",{className:"w-16",children:r.jsx(pe,{value:[2],min:-12,max:12,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"VOLUME"}),r.jsx("div",{className:"relative h-40 w-8 bg-gray-700 rounded-full",children:r.jsx("div",{className:"absolute w-8 h-4 bg-studio-accent rounded-full cursor-pointer transition-all",style:{bottom:`${n}%`,transform:"translateY(50%)"},onMouseDown:C=>{const k=C.currentTarget.parentElement.getBoundingClientRect(),M=T=>{const I=T.clientY-k.top,O=Math.max(0,Math.min(100,100-I/k.height*100));e(O)},E=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",E)}})}),r.jsxs("div",{className:"text-sm font-mono mt-4 text-studio-accent",children:[n>75?`+${Math.round((n-75)/3)}`:`-${Math.round((75-n)/3)}`,"dB"]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center mb-2",children:"VU METER"}),r.jsx("div",{className:"flex justify-center space-x-1",children:[1,1,.8,.6,.6,.4,0,0].map((C,A)=>r.jsx("div",{className:`w-1 h-8 rounded ${A<2?"bg-green-500":A<4?"bg-yellow-400":A<6?"bg-orange-500":"bg-red-500"}`,style:{opacity:C}},A))})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4 w-64 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-sm font-medium mb-4 text-center",children:"Effects Rack"}),r.jsxs("div",{className:"mb-6 p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"REVERB"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Room Size"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.reverb.roomSize],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,roomSize:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Damping"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.reverb.damping],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,damping:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Wet/Dry"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.reverb.wetDry],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,wetDry:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"mb-6 p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"DELAY"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Time"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.delay.time],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,time:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Feedback"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.delay.feedback],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,feedback:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Mix"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.delay.mix],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,mix:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"COMPRESSOR"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Threshold"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.compressor.threshold],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,threshold:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Ratio"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.compressor.ratio],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,ratio:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Attack"}),r.jsx("div",{className:"w-20",children:r.jsx(pe,{value:[i.compressor.attack],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,attack:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]})]})]})})]})}const $P="15.1.22",T_=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),P_=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),cy=(n,e)=>({startTime:e,type:"setValue",value:n}),qP=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),WP=(n,e,{startTime:t,target:s,timeConstant:i})=>s+(e-s)*Math.exp((t-n)/i),to=n=>n.type==="exponentialRampToValue",Kd=n=>n.type==="linearRampToValue",ai=n=>to(n)||Kd(n),Gx=n=>n.type==="setValue",jr=n=>n.type==="setValueCurve",Qd=(n,e,t,s)=>{const i=n[e];return i===void 0?s:ai(i)||Gx(i)?i.value:jr(i)?i.values[i.values.length-1]:WP(t,Qd(n,e-1,i.startTime,s),i)},E_=(n,e,t,s,i)=>t===void 0?[s.insertTime,i]:ai(t)?[t.endTime,t.value]:Gx(t)?[t.startTime,t.value]:jr(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Qd(n,e-1,t.startTime,i)],uy=n=>n.type==="cancelAndHold",dy=n=>n.type==="cancelScheduledValues",ri=n=>uy(n)||dy(n)?n.cancelTime:to(n)||Kd(n)?n.endTime:n.startTime,A_=(n,e,t,{endTime:s,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((n-e)/(s-e)):0,M_=(n,e,t,{endTime:s,value:i})=>t+(n-e)/(s-e)*(i-t),BU=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},VU=(n,{duration:e,startTime:t,values:s})=>{const i=(n-t)/e*(s.length-1);return BU(s,i)},ld=n=>n.type==="setTarget";class UU{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=ri(e);if(uy(e)||dy(e)){const s=this._automationEvents.findIndex(a=>dy(e)&&jr(a)?a.startTime+a.duration>=t:ri(a)>=t),i=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),uy(e)){const a=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&ai(i)){if(a!==void 0&&ld(a))throw new Error("The internal list is malformed.");const c=a===void 0?i.insertTime:jr(a)?a.startTime+a.duration:ri(a),u=a===void 0?this._defaultValue:jr(a)?a.values[a.values.length-1]:a.value,d=to(i)?A_(t,c,u,i):M_(t,c,u,i),h=to(i)?T_(d,t,this._currenTime):P_(d,t,this._currenTime);this._automationEvents.push(h)}if(a!==void 0&&ld(a)&&this._automationEvents.push(cy(this.getValue(t),t)),a!==void 0&&jr(a)&&a.startTime+a.duration>t){const c=t-a.startTime,u=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(c*u)),h=c/(d-1)*u,p=a.values.slice(0,d);if(h<1)for(let m=1;m<d;m+=1){const y=h*m%1;p[m]=a.values[m-1]*(1-y)+a.values[m]*y}this._automationEvents[this._automationEvents.length-1]=qP(p,a.startTime,c)}}}else{const s=this._automationEvents.findIndex(c=>ri(c)>t),i=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(i!==void 0&&jr(i)&&ri(i)+i.duration>t)return!1;const a=to(e)?T_(e.value,e.endTime,this._currenTime):Kd(e)?P_(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(a);else{if(jr(e)&&t+e.duration>ri(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>ri(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),i=s[0];ld(i)&&s.unshift(cy(Qd(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(c=>ri(c)>e),s=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[i];if(a!==void 0&&ld(a)&&(s===void 0||!ai(s)||s.insertTime>e))return WP(e,Qd(this._automationEvents,i-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Gx(a)&&(s===void 0||!ai(s)))return a.value;if(a!==void 0&&jr(a)&&(s===void 0||!ai(s)||a.startTime+a.duration>e))return e<a.startTime+a.duration?VU(e,a):a.values[a.values.length-1];if(a!==void 0&&ai(a)&&(s===void 0||!ai(s)))return a.value;if(s!==void 0&&to(s)){const[c,u]=E_(this._automationEvents,i,a,s,this._defaultValue);return A_(e,c,u,s)}if(s!==void 0&&Kd(s)){const[c,u]=E_(this._automationEvents,i,a,s,this._defaultValue);return M_(e,c,u,s)}return this._defaultValue}}const $U=n=>({cancelTime:n,type:"cancelAndHold"}),qU=n=>({cancelTime:n,type:"cancelScheduledValues"}),WU=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),GU=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),HU=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),KU=()=>new DOMException("","AbortError"),QU=n=>(e,t,[s,i,a],c)=>{n(e[i],[t,s,a],u=>u[0]===t&&u[1]===s,c)},YU=n=>(e,t,s)=>{const i=[];for(let a=0;a<s.numberOfInputs;a+=1)i.push(new Set);n.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},XU=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},po=new WeakSet,GP=new WeakMap,Hx=new WeakMap,HP=new WeakMap,Kx=new WeakMap,Uh=new WeakMap,KP=new WeakMap,hy=new WeakMap,fy=new WeakMap,py=new WeakMap,QP={construct(){return QP}},ZU=n=>{try{const e=new Proxy(n,QP);new e}catch{return!1}return!0},R_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,I_=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),i=s.match(R_);for(;i!==null;){const a=i[1].slice(1,-1),c=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(c),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(R_)}return[t.join(";"),s]},O_=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},D_=n=>{if(!ZU(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},JU=(n,e,t,s,i,a,c,u,d,h,p,m,y)=>{let b=0;return(_,v,w={credentials:"omit"})=>{const N=p.get(_);if(N!==void 0&&N.has(v))return Promise.resolve();const P=h.get(_);if(P!==void 0){const k=P.get(v);if(k!==void 0)return k}const C=a(_),A=C.audioWorklet===void 0?i(v).then(([k,M])=>{const[E,T]=I_(k,M),I=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return t(I)}).then(()=>{const k=y._AWGS.pop();if(k===void 0)throw new SyntaxError;s(C.currentTime,C.sampleRate,()=>k(class{},void 0,(M,E)=>{if(M.trim()==="")throw e();const T=fy.get(C);if(T!==void 0){if(T.has(M))throw e();D_(E),O_(E.parameterDescriptors),T.set(M,E)}else D_(E),O_(E.parameterDescriptors),fy.set(C,new Map([[M,E]]))},C.sampleRate,void 0,void 0))}):Promise.all([i(v),Promise.resolve(n(m,m))]).then(([[k,M],E])=>{const T=b+1;b=T;const[I,O]=I_(k,M),z=`${I};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([z],{type:"application/javascript; charset=utf-8"}),G=URL.createObjectURL(W);return C.audioWorklet.addModule(G,w).then(()=>{if(u(C))return C;const K=c(C);return K.audioWorklet.addModule(G,w).then(()=>K)}).then(K=>{if(d===null)throw new SyntaxError;try{new d(K,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(G))});return P===void 0?h.set(_,new Map([[v,A]])):P.set(v,A),A.then(()=>{const k=p.get(_);k===void 0?p.set(_,new Set([v])):k.add(v)}).finally(()=>{const k=h.get(_);k!==void 0&&k.delete(v)}),A}},Ds=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},$h=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},YP=(n,e,t,s)=>{const i=Ds(n,e),a=$h(i,c=>c[0]===t&&c[1]===s);return i.size===0&&n.delete(e),a},pc=n=>Ds(KP,n),mo=n=>{if(po.has(n))throw new Error("The AudioNode is already stored.");po.add(n),pc(n).forEach(e=>e(!0))},XP=n=>"port"in n,mc=n=>{if(!po.has(n))throw new Error("The AudioNode is not stored.");po.delete(n),pc(n).forEach(e=>e(!1))},my=(n,e)=>{!XP(n)&&e.every(t=>t.size===0)&&mc(n)},e$=(n,e,t,s,i,a,c,u,d,h,p,m,y)=>{const b=new WeakMap;return(_,v,w,N,P)=>{const{activeInputs:C,passiveInputs:A}=a(v),{outputs:k}=a(_),M=u(_),E=T=>{const I=d(v),O=d(_);if(T){const F=YP(A,_,w,N);n(C,_,F,!1),!P&&!m(_)&&t(O,I,w,N),y(v)&&mo(v)}else{const F=s(C,_,w,N);e(A,N,F,!1),!P&&!m(_)&&i(O,I,w,N);const L=c(v);if(L===0)p(v)&&my(v,C);else{const V=b.get(v);V!==void 0&&clearTimeout(V),b.set(v,setTimeout(()=>{p(v)&&my(v,C)},L*1e3))}}};return h(k,[v,w,N],T=>T[0]===v&&T[1]===w&&T[2]===N,!0)?(M.add(E),p(_)?n(C,_,[w,N,E],!0):e(A,N,[_,w,E],!0),!0):!1}},t$=n=>(e,t,[s,i,a],c)=>{const u=e.get(s);u===void 0?e.set(s,new Set([[i,t,a]])):n(u,[i,t,a],d=>d[0]===i&&d[1]===t,c)},n$=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(s),s.disconnect()};t.addEventListener("ended",i)},s$=n=>(e,t)=>{n(e).add(t)},r$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},i$=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),p={...r$,...d},m=s(h,p),y=a(h)?e():null;super(u,!1,m,y),this._nativeAnalyserNode=m}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(u){this._nativeAnalyserNode.fftSize=u}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(u){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=u,!(u>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(u){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=u,!(this._nativeAnalyserNode.maxDecibels>u))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(u){this._nativeAnalyserNode.smoothingTimeConstant=u}getByteFrequencyData(u){this._nativeAnalyserNode.getByteFrequencyData(u)}getByteTimeDomainData(u){this._nativeAnalyserNode.getByteTimeDomainData(u)}getFloatFrequencyData(u){this._nativeAnalyserNode.getFloatFrequencyData(u)}getFloatTimeDomainData(u){this._nativeAnalyserNode.getFloatTimeDomainData(u)}},_n=(n,e)=>n.context===e,a$=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,c)=>{let u=e(a);if(!_n(u,c)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,fftSize:u.fftSize,maxDecibels:u.maxDecibels,minDecibels:u.minDecibels,smoothingTimeConstant:u.smoothingTimeConstant};u=n(c,h)}return s.set(c,u),await t(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}},Yd=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ur=()=>new DOMException("","IndexSizeError"),Qx=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?ur():s}})(n.getChannelData)},o$={numberOfChannels:1},l$=(n,e,t,s,i,a,c,u)=>{let d=null;return class ZP{constructor(p){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:m,numberOfChannels:y,sampleRate:b}={...o$,...p};d===null&&(d=new i(1,1,44100));const _=s!==null&&e(a,a)?new s({length:m,numberOfChannels:y,sampleRate:b}):d.createBuffer(y,m,b);if(_.numberOfChannels===0)throw t();return typeof _.copyFromChannel!="function"?(c(_),Qx(_)):e(Yd,()=>Yd(_))||u(_),n.add(_),_}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===ZP.prototype||n.has(p)}}},Bn=-34028234663852886e22,Tn=-Bn,kr=n=>po.has(n),c$={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},u$=(n,e,t,s,i,a,c,u)=>class extends n{constructor(h,p){const m=a(h),y={...c$,...p},b=i(m,y),_=c(m),v=_?e():null;super(h,!1,b,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,_,b.playbackRate,Tn,Bn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const p=typeof h=="function"?u(this,h):null;this._nativeAudioBufferSourceNode.onended=p;const m=this._nativeAudioBufferSourceNode.onended;this._onended=m!==null&&m===p?h:m}get playbackRate(){return this._playbackRate}start(h=0,p=0,m){if(this._nativeAudioBufferSourceNode.start(h,p,m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=m===void 0?[h,p]:[h,p,m]),this.context.state!=="closed"){mo(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),kr(this)&&mc(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},d$=(n,e,t,s,i)=>()=>{const a=new WeakMap;let c=null,u=null;const d=async(h,p)=>{let m=t(h);const y=_n(m,p);if(!y){const b={buffer:m.buffer,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,loop:m.loop,loopEnd:m.loopEnd,loopStart:m.loopStart,playbackRate:m.playbackRate.value};m=e(p,b),c!==null&&m.start(...c),u!==null&&m.stop(u)}return a.set(p,m),y?await n(p,h.playbackRate,m.playbackRate):await s(p,h.playbackRate,m.playbackRate),await i(h,p,m),m};return{set start(h){c=h},set stop(h){u=h},render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):d(h,p)}}},h$=n=>"playbackRate"in n,f$=n=>"frequency"in n&&"gain"in n,p$=n=>"offset"in n,m$=n=>!("frequency"in n)&&"gain"in n,g$=n=>"detune"in n&&"frequency"in n&&!("gain"in n),y$=n=>"pan"in n,En=n=>Ds(GP,n),gc=n=>Ds(HP,n),gy=(n,e)=>{const{activeInputs:t}=En(n);t.forEach(i=>i.forEach(([a])=>{e.includes(n)||gy(a,[...e,n])}));const s=h$(n)?[n.playbackRate]:XP(n)?Array.from(n.parameters.values()):f$(n)?[n.Q,n.detune,n.frequency,n.gain]:p$(n)?[n.offset]:m$(n)?[n.gain]:g$(n)?[n.detune,n.frequency]:y$(n)?[n.pan]:[];for(const i of s){const a=gc(i);a!==void 0&&a.activeInputs.forEach(([c])=>gy(c,e))}kr(n)&&mc(n)},JP=n=>{gy(n.destination,[])},x$=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),v$=(n,e,t,s,i,a,c,u,d)=>class extends n{constructor(p={}){if(d===null)throw new Error("Missing the native AudioContext constructor.");let m;try{m=new d(p)}catch(_){throw _.code===12&&_.message==="sampleRate is not in range"?t():_}if(m===null)throw s();if(!x$(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&m.sampleRate!==p.sampleRate)throw t();super(m,2);const{latencyHint:y}=p,{sampleRate:b}=m;if(this._baseLatency=typeof m.baseLatency=="number"?m.baseLatency:y==="balanced"?512/b:y==="interactive"||y===void 0?256/b:y==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(y*b/128)))*128/b,this._nativeAudioContext=m,d.name==="webkitAudioContext"?(this._nativeGainNode=m.createGain(),this._nativeOscillatorNode=m.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(m.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,m.state==="running"){this._state="suspended";const _=()=>{this._state==="suspended"&&(this._state=null),m.removeEventListener("statechange",_)};m.addEventListener("statechange",_)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),JP(this)}))}createMediaElementSource(p){return new i(this,{mediaElement:p})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(p){return new c(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new u(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,m)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?p():this.resume().then(p,m)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},b$=(n,e,t,s,i,a,c,u)=>class extends n{constructor(h,p){const m=a(h),y=c(m),b=i(m,p,y),_=y?e(u):null;super(h,!1,b,_),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},w$=n=>{const e=new WeakMap,t=async(s,i)=>{const a=i.destination;return e.set(i,a),await n(s,i,a),a};return{render(s,i){const a=e.get(i);return a!==void 0?Promise.resolve(a):t(s,i)}}},S$=(n,e,t,s,i,a,c,u)=>(d,h)=>{const p=h.listener,m=()=>{const k=new Float32Array(1),M=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=c(h);let T=!1,I=[0,0,-1,0,1,0],O=[0,0,0];const F=()=>{if(T)return;T=!0;const W=s(h,256,9,0);W.onaudioprocess=({inputBuffer:G})=>{const K=[a(G,k,0),a(G,k,1),a(G,k,2),a(G,k,3),a(G,k,4),a(G,k,5)];K.some((H,ee)=>H!==I[ee])&&(p.setOrientation(...K),I=K);const $=[a(G,k,6),a(G,k,7),a(G,k,8)];$.some((H,ee)=>H!==O[ee])&&(p.setPosition(...$),O=$)},M.connect(W)},L=W=>G=>{G!==I[W]&&(I[W]=G,p.setOrientation(...I))},V=W=>G=>{G!==O[W]&&(O[W]=G,p.setPosition(...O))},z=(W,G,K)=>{const $=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:G});$.connect(M,0,W),$.start(),Object.defineProperty($.offset,"defaultValue",{get(){return G}});const H=n({context:d},E,$.offset,Tn,Bn);return u(H,"value",ee=>()=>ee.call(H),ee=>R=>{try{ee.call(H,R)}catch(U){if(U.code!==9)throw U}F(),E&&K(R)}),H.cancelAndHoldAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.cancelAndHoldAtTime),H.cancelScheduledValues=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.cancelScheduledValues),H.exponentialRampToValueAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.exponentialRampToValueAtTime),H.linearRampToValueAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.linearRampToValueAtTime),H.setTargetAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.setTargetAtTime),H.setValueAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.setValueAtTime),H.setValueCurveAtTime=(ee=>E?()=>{throw i()}:(...R)=>{const U=ee.apply(H,R);return F(),U})(H.setValueCurveAtTime),H};return{forwardX:z(0,0,L(0)),forwardY:z(1,0,L(1)),forwardZ:z(2,-1,L(2)),positionX:z(6,0,V(0)),positionY:z(7,0,V(1)),positionZ:z(8,0,V(2)),upX:z(3,0,L(3)),upY:z(4,1,L(4)),upZ:z(5,0,L(5))}},{forwardX:y,forwardY:b,forwardZ:_,positionX:v,positionY:w,positionZ:N,upX:P,upY:C,upZ:A}=p.forwardX===void 0?m():p;return{get forwardX(){return y},get forwardY(){return b},get forwardZ(){return _},get positionX(){return v},get positionY(){return w},get positionZ(){return N},get upX(){return P},get upY(){return C},get upZ(){return A}}},Xd=n=>"context"in n,yc=n=>Xd(n[0]),ma=(n,e,t,s)=>{for(const i of n)if(t(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},F_=(n,e,[t,s],i)=>{ma(n,[e,t,s],a=>a[0]===e&&a[1]===t,i)},L_=(n,[e,t,s],i)=>{const a=n.get(e);a===void 0?n.set(e,new Set([[t,s]])):ma(a,[t,s],c=>c[0]===t,i)},Mo=n=>"inputs"in n,Zd=(n,e,t,s)=>{if(Mo(e)){const i=e.inputs[s];return n.connect(i,t,0),[i,t,0]}return n.connect(e,t,s),[e,t,s]},eE=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},_$=(n,e,t)=>$h(n,s=>s[0]===e&&s[1]===t),tE=(n,e)=>{if(!pc(n).delete(e))throw new Error("Missing the expected event listener.")},nE=(n,e,t)=>{const s=Ds(n,e),i=$h(s,a=>a[0]===t);return s.size===0&&n.delete(e),i},Jd=(n,e,t,s)=>{Mo(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},St=n=>Ds(Hx,n),Xl=n=>Ds(Kx,n),la=n=>hy.has(n),kd=n=>!po.has(n),z_=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),i=n.createGain(),a=n.createBuffer(1,2,44100),c=a.getChannelData(0);c[0]=1,c[1]=1;const u=n.createBufferSource();u.buffer=a,u.loop=!0,u.connect(s).connect(n.destination),u.connect(i),u.disconnect(i),s.onaudioprocess=d=>{const h=d.inputBuffer.getChannelData(0);Array.prototype.some.call(h,p=>p===1)?t(!0):t(!1),u.stop(),s.onaudioprocess=null,u.disconnect(s),s.disconnect(n.destination)},u.start()}}),vg=(n,e)=>{const t=new Map;for(const s of n)for(const i of s){const a=t.get(i);t.set(i,a===void 0?1:a+1)}t.forEach((s,i)=>e(i,s))},eh=n=>"context"in n,C$=n=>{const e=new Map;n.connect=(t=>(s,i=0,a=0)=>{const c=eh(s)?t(s,i,a):t(s,i),u=e.get(s);return u===void 0?e.set(s,[{input:a,output:i}]):u.every(d=>d.input!==a||d.output!==i)&&u.push({input:a,output:i}),c})(n.connect.bind(n)),n.disconnect=(t=>(s,i,a)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[c,u]of e){const d=u.filter(h=>h.output!==s);d.length===0?e.delete(c):e.set(c,d)}else if(e.has(s))if(i===void 0)e.delete(s);else{const c=e.get(s);if(c!==void 0){const u=c.filter(d=>d.output!==i&&(d.input!==a||a===void 0));u.length===0?e.delete(s):e.set(s,u)}}for(const[c,u]of e)u.forEach(d=>{eh(c)?n.connect(c,d.output,d.input):n.connect(c,d.output)})})(n.disconnect)},j$=(n,e,t,s)=>{const{activeInputs:i,passiveInputs:a}=gc(e),{outputs:c}=En(n),u=pc(n),d=h=>{const p=St(n),m=Xl(e);if(h){const y=nE(a,n,t);F_(i,n,y,!1),!s&&!la(n)&&p.connect(m,t)}else{const y=_$(i,n,t);L_(a,y,!1),!s&&!la(n)&&p.disconnect(m,t)}};return ma(c,[e,t],h=>h[0]===e&&h[1]===t,!0)?(u.add(d),kr(n)?F_(i,n,[t,d],!0):L_(a,[n,t,d],!0),!0):!1},N$=(n,e,t,s)=>{const{activeInputs:i,passiveInputs:a}=En(e),c=eE(i[s],n,t);return c===null?[YP(a,n,t,s)[2],!1]:[c[2],!0]},k$=(n,e,t)=>{const{activeInputs:s,passiveInputs:i}=gc(e),a=eE(s,n,t);return a===null?[nE(i,n,t)[1],!1]:[a[2],!0]},Yx=(n,e,t,s,i)=>{const[a,c]=N$(n,t,s,i);if(a!==null&&(tE(n,a),c&&!e&&!la(n)&&Jd(St(n),St(t),s,i)),kr(t)){const{activeInputs:u}=En(t);my(t,u)}},Xx=(n,e,t,s)=>{const[i,a]=k$(n,t,s);i!==null&&(tE(n,i),a&&!e&&!la(n)&&St(n).disconnect(Xl(t),s))},T$=(n,e)=>{const t=En(n),s=[];for(const i of t.outputs)yc(i)?Yx(n,e,...i):Xx(n,e,...i),s.push(i[0]);return t.outputs.clear(),s},P$=(n,e,t)=>{const s=En(n),i=[];for(const a of s.outputs)a[1]===t&&(yc(a)?Yx(n,e,...a):Xx(n,e,...a),i.push(a[0]),s.outputs.delete(a));return i},E$=(n,e,t,s,i)=>{const a=En(n);return Array.from(a.outputs).filter(c=>c[0]===t&&(s===void 0||c[1]===s)&&(i===void 0||c[2]===i)).map(c=>(yc(c)?Yx(n,e,...c):Xx(n,e,...c),a.outputs.delete(c),c[0]))},A$=(n,e,t,s,i,a,c,u,d,h,p,m,y,b,_,v)=>class extends h{constructor(N,P,C,A){super(C),this._context=N,this._nativeAudioNode=C;const k=p(N);m(k)&&t(z_,()=>z_(k,v))!==!0&&C$(C),Hx.set(this,C),KP.set(this,new Set),N.state!=="closed"&&P&&mo(this),n(this,A,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(N){this._nativeAudioNode.channelCount=N}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(N){this._nativeAudioNode.channelCountMode=N}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(N){this._nativeAudioNode.channelInterpretation=N}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(N,P=0,C=0){if(P<0||P>=this._nativeAudioNode.numberOfOutputs)throw i();const A=p(this._context),k=_(A);if(y(N)||b(N))throw a();if(Xd(N)){const T=St(N);try{const O=Zd(this._nativeAudioNode,T,P,C),F=kd(this);(k||F)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!F&&kd(N)&&mo(N)}catch(O){throw O.code===12?a():O}if(e(this,N,P,C,k)){const O=d([this],N);vg(O,s(k))}return N}const M=Xl(N);if(M.name==="playbackRate"&&M.maxValue===1024)throw c();try{this._nativeAudioNode.connect(M,P),(k||kd(this))&&this._nativeAudioNode.disconnect(M,P)}catch(T){throw T.code===12?a():T}if(j$(this,N,P,k)){const T=d([this],N);vg(T,s(k))}}disconnect(N,P,C){let A;const k=p(this._context),M=_(k);if(N===void 0)A=T$(this,M);else if(typeof N=="number"){if(N<0||N>=this.numberOfOutputs)throw i();A=P$(this,M,N)}else{if(P!==void 0&&(P<0||P>=this.numberOfOutputs)||Xd(N)&&C!==void 0&&(C<0||C>=N.numberOfInputs))throw i();if(A=E$(this,M,N,P,C),A.length===0)throw a()}for(const E of A){const T=d([this],E);vg(T,u)}}},M$=(n,e,t,s,i,a,c,u,d,h,p,m,y)=>(b,_,v,w=null,N=null)=>{const P=v.value,C=new UU(P),A=_?s(C):null,k={get defaultValue(){return P},get maxValue(){return w===null?v.maxValue:w},get minValue(){return N===null?v.minValue:N},get value(){return v.value},set value(M){v.value=M,k.setValueAtTime(M,b.context.currentTime)},cancelAndHoldAtTime(M){if(typeof v.cancelAndHoldAtTime=="function")A===null&&C.flush(b.context.currentTime),C.add(i(M)),v.cancelAndHoldAtTime(M);else{const E=Array.from(C).pop();A===null&&C.flush(b.context.currentTime),C.add(i(M));const T=Array.from(C).pop();v.cancelScheduledValues(M),E!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?v.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?v.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&v.setValueCurveAtTime(T.values,T.startTime,T.duration))}return k},cancelScheduledValues(M){return A===null&&C.flush(b.context.currentTime),C.add(a(M)),v.cancelScheduledValues(M),k},exponentialRampToValueAtTime(M,E){if(M===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const T=b.context.currentTime;return A===null&&C.flush(T),Array.from(C).length===0&&(C.add(h(P,T)),v.setValueAtTime(P,T)),C.add(c(M,E)),v.exponentialRampToValueAtTime(M,E),k},linearRampToValueAtTime(M,E){const T=b.context.currentTime;return A===null&&C.flush(T),Array.from(C).length===0&&(C.add(h(P,T)),v.setValueAtTime(P,T)),C.add(u(M,E)),v.linearRampToValueAtTime(M,E),k},setTargetAtTime(M,E,T){return A===null&&C.flush(b.context.currentTime),C.add(d(M,E,T)),v.setTargetAtTime(M,E,T),k},setValueAtTime(M,E){return A===null&&C.flush(b.context.currentTime),C.add(h(M,E)),v.setValueAtTime(M,E),k},setValueCurveAtTime(M,E,T){const I=M instanceof Float32Array?M:new Float32Array(M);if(m!==null&&m.name==="webkitAudioContext"){const O=E+T,F=b.context.sampleRate,L=Math.ceil(E*F),V=Math.floor(O*F),z=V-L,W=new Float32Array(z);for(let K=0;K<z;K+=1){const $=(I.length-1)/T*((L+K)/F-E),H=Math.floor($),ee=Math.ceil($);W[K]=H===ee?I[H]:(1-($-H))*I[H]+(1-(ee-$))*I[ee]}A===null&&C.flush(b.context.currentTime),C.add(p(W,E,T)),v.setValueCurveAtTime(W,E,T);const G=V/F;G<O&&y(k,W[W.length-1],G),y(k,I[I.length-1],O)}else A===null&&C.flush(b.context.currentTime),C.add(p(I,E,T)),v.setValueCurveAtTime(I,E,T);return k}};return t.set(k,v),e.set(k,b),n(k,A),k},R$=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:i}=t;e.exponentialRampToValueAtTime(i,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:i}=t;e.linearRampToValueAtTime(i,s)}else if(t.type==="setTarget"){const{startTime:s,target:i,timeConstant:a}=t;e.setTargetAtTime(i,s,a)}else if(t.type==="setValue"){const{startTime:s,value:i}=t;e.setValueAtTime(i,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:i,values:a}=t;e.setValueCurveAtTime(a,i,s)}else throw new Error("Can't apply an unknown automation.")}});class sE{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,i)=>e.call(t,s,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const I$={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},O$=(n,e,t,s,i,a,c,u,d,h,p,m,y,b)=>class extends e{constructor(v,w,N){var P;const C=u(v),A=d(C),k=p({...I$,...N});y(k);const M=fy.get(C),E=M?.get(w),T=A||C.state!=="closed"?C:(P=c(C))!==null&&P!==void 0?P:C,I=i(T,A?null:v.baseLatency,h,w,E,k),O=A?s(w,k,E):null;super(v,!0,I,O);const F=[];I.parameters.forEach((V,z)=>{const W=t(this,A,V);F.push([z,W])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new sE(F),A&&n(C,this);const{activeInputs:L}=a(this);m(I,L)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){const w=typeof v=="function"?b(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=w;const N=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=N!==null&&N===w?v:N}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function th(n,e,t,s,i){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,i);else{const a=n.getChannelData(s);if(e[t].byteLength===0)e[t]=a.slice(i,i+128);else{const c=new Float32Array(a.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(c)}}}const rE=(n,e,t,s,i)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,i):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],i)},nh=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const i=[],a=typeof e=="number"?e:e[s];for(let c=0;c<a;c+=1)i.push(new Float32Array(128));t.push(i)}return t},D$=(n,e)=>{const t=Ds(py,n),s=St(e);return Ds(t,s)},F$=async(n,e,t,s,i,a,c)=>{const u=e===null?Math.ceil(n.context.length/128)*128:e.length,d=s.channelCount*s.numberOfInputs,h=i.reduce((w,N)=>w+N,0),p=h===0?null:t.createBuffer(h,u,t.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const m=En(n),y=await D$(t,n),b=nh(s.numberOfInputs,s.channelCount),_=nh(s.numberOfOutputs,i),v=Array.from(n.parameters.keys()).reduce((w,N)=>({...w,[N]:new Float32Array(128)}),{});for(let w=0;w<u;w+=128){if(s.numberOfInputs>0&&e!==null)for(let N=0;N<s.numberOfInputs;N+=1)for(let P=0;P<s.channelCount;P+=1)th(e,b[N],P,P,w);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:N},P)=>{th(e,v,N,d+P,w)});for(let N=0;N<s.numberOfInputs;N+=1)for(let P=0;P<i[N];P+=1)_[N][P].byteLength===0&&(_[N][P]=new Float32Array(128));try{const N=b.map((C,A)=>m.activeInputs[A].size===0?[]:C),P=c(w/t.sampleRate,t.sampleRate,()=>y.process(N,_,v));if(p!==null)for(let C=0,A=0;C<s.numberOfOutputs;C+=1){for(let k=0;k<i[C];k+=1)rE(p,_[C],k,A+k,w);A+=i[C]}if(!P)break}catch(N){n.dispatchEvent(new ErrorEvent("processorerror",{colno:N.colno,filename:N.filename,lineno:N.lineno,message:N.message}));break}}return p},L$=(n,e,t,s,i,a,c,u,d,h,p,m,y,b,_,v)=>(w,N,P)=>{const C=new WeakMap;let A=null;const k=async(M,E)=>{let T=p(M),I=null;const O=_n(T,E),F=Array.isArray(N.outputChannelCount)?N.outputChannelCount:Array.from(N.outputChannelCount);if(m===null){const L=F.reduce((G,K)=>G+K,0),V=i(E,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),z=[];for(let G=0;G<M.numberOfOutputs;G+=1)z.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:F[G]}));const W=c(E,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1});W.connect=e.bind(null,z),W.disconnect=d.bind(null,z),I=[V,z,W]}else O||(T=new m(E,w));if(C.set(E,I===null?T:I[2]),I!==null){if(A===null){if(P===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const K=M.channelCount*M.numberOfInputs,$=P.parameterDescriptors===void 0?0:P.parameterDescriptors.length,H=K+$;A=F$(M,H===0?null:await(async()=>{const R=new y(H,Math.ceil(M.context.length/128)*128,E.sampleRate),U=[],X=[];for(let le=0;le<N.numberOfInputs;le+=1)U.push(c(R,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1})),X.push(i(R,{channelCount:N.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:N.channelCount}));const re=await Promise.all(Array.from(M.parameters.values()).map(async le=>{const Q=a(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:le.value});return await b(R,le,Q.offset),Q})),ae=s(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,K+$)});for(let le=0;le<N.numberOfInputs;le+=1){U[le].connect(X[le]);for(let Q=0;Q<N.channelCount;Q+=1)X[le].connect(ae,Q,le*N.channelCount+Q)}for(const[le,Q]of re.entries())Q.connect(ae,0,K+le),Q.start(0);return ae.connect(R.destination),await Promise.all(U.map(le=>_(M,R,le))),v(R)})(),E,N,F,P,h)}const L=await A,V=t(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[z,W,G]=I;L!==null&&(V.buffer=L,V.start(0)),V.connect(z);for(let K=0,$=0;K<M.numberOfOutputs;K+=1){const H=W[K];for(let ee=0;ee<F[K];ee+=1)z.connect(H,$+ee,ee);$+=F[K]}return G}if(O)for(const[L,V]of M.parameters.entries())await n(E,V,T.parameters.get(L));else for(const[L,V]of M.parameters.entries())await b(E,V,T.parameters.get(L));return await _(M,E,T),T};return{render(M,E){u(E,M);const T=C.get(E);return T!==void 0?Promise.resolve(T):k(M,E)}}},z$=(n,e,t,s,i,a,c,u,d,h,p,m,y,b,_,v,w,N,P,C)=>class extends _{constructor(k,M){super(k,M),this._nativeContext=k,this._audioWorklet=n===void 0?void 0:{addModule:(E,T)=>n(this,E,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(k,M,E){return new t({length:M,numberOfChannels:k,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(k=6){return new a(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new c(this,{numberOfOutputs:k})}createConstantSource(){return new u(this)}createConvolver(){return new d(this)}createDelay(k=1){return new p(this,{maxDelayTime:k})}createDynamicsCompressor(){return new m(this)}createGain(){return new y(this)}createIIRFilter(k,M){return new b(this,{feedback:M,feedforward:k})}createOscillator(){return new v(this)}createPanner(){return new w(this)}createPeriodicWave(k,M,E={disableNormalization:!1}){return new N(this,{...E,imag:M,real:k})}createStereoPanner(){return new P(this)}createWaveShaper(){return new C(this)}decodeAudioData(k,M,E){return h(this._nativeContext,k).then(T=>(typeof M=="function"&&M(T),T),T=>{throw typeof E=="function"&&E(T),T})}},B$={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},V$=(n,e,t,s,i,a,c,u)=>class extends n{constructor(h,p){const m=a(h),y={...B$,...p},b=i(m,y),_=c(m),v=_?t():null;super(h,!1,b,v),this._Q=e(this,_,b.Q,Tn,Bn),this._detune=e(this,_,b.detune,1200*Math.log2(Tn),-1200*Math.log2(Tn)),this._frequency=e(this,_,b.frequency,h.sampleRate/2,0),this._gain=e(this,_,b.gain,40*Math.log10(Tn),Bn),this._nativeBiquadFilterNode=b,u(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,p,m){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,p,m)}catch(y){throw y.code===11?s():y}if(h.length!==p.length||p.length!==m.length)throw s()}},U$=(n,e,t,s,i)=>()=>{const a=new WeakMap,c=async(u,d)=>{let h=t(u);const p=_n(h,d);if(!p){const m={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(d,m)}return a.set(d,h),p?(await n(d,u.Q,h.Q),await n(d,u.detune,h.detune),await n(d,u.frequency,h.frequency),await n(d,u.gain,h.gain)):(await s(d,u.Q,h.Q),await s(d,u.detune,h.detune),await s(d,u.frequency,h.frequency),await s(d,u.gain,h.gain)),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},$$=(n,e)=>(t,s)=>{const i=e.get(t);if(i!==void 0)return i;const a=n.get(t);if(a!==void 0)return a;try{const c=s();return c instanceof Promise?(n.set(t,c),c.catch(()=>!1).then(u=>(n.delete(t),e.set(t,u),u))):(e.set(t,c),c)}catch{return e.set(t,!1),!1}},q$={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},W$=(n,e,t,s,i)=>class extends n{constructor(c,u){const d=s(c),h={...q$,...u},p=t(d,h),m=i(d)?e():null;super(c,!1,p,m)}},G$=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,c)=>{let u=e(a);if(!_n(u,c)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=n(c,h)}return s.set(c,u),await t(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}},H$={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},K$=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),p=a({...H$,...d}),m=t(h,p),y=i(h)?e():null;super(u,!1,m,y)}},Q$=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,c)=>{let u=e(a);if(!_n(u,c)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=n(c,h)}return s.set(c,u),await t(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}},Y$=n=>(e,t,s)=>n(t,e,s),X$=n=>(e,t,s=0,i=0)=>{const a=e[s];if(a===void 0)throw n();return eh(t)?a.connect(t,0,i):a.connect(t,0)},Z$=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},J$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},e7=(n,e,t,s,i,a,c)=>class extends n{constructor(d,h){const p=i(d),m={...J$,...h},y=s(p,m),b=a(p),_=b?t():null;super(d,!1,y,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=y,this._offset=e(this,b,y.offset,Tn,Bn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const h=typeof d=="function"?c(this,d):null;this._nativeConstantSourceNode.onended=h;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===h?d:p}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){mo(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),kr(this)&&mc(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},t7=(n,e,t,s,i)=>()=>{const a=new WeakMap;let c=null,u=null;const d=async(h,p)=>{let m=t(h);const y=_n(m,p);if(!y){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,offset:m.offset.value};m=e(p,b),c!==null&&m.start(c),u!==null&&m.stop(u)}return a.set(p,m),y?await n(p,h.offset,m.offset):await s(p,h.offset,m.offset),await i(h,p,m),m};return{set start(h){c=h},set stop(h){u=h},render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):d(h,p)}}},n7=n=>e=>(n[0]=e,n[0]),s7={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},r7=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),p={...s7,...d},m=t(h,p),b=i(h)?e():null;super(u,!1,m,b),this._isBufferNullified=!1,this._nativeConvolverNode=m,p.buffer!==null&&a(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(u){if(this._nativeConvolverNode.buffer=u,u===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(u){this._nativeConvolverNode.normalize=u}},i7=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,c)=>{let u=e(a);if(!_n(u,c)){const h={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize};u=n(c,h)}return s.set(c,u),Mo(u)?await t(a,c,u.inputs[0]):await t(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}},a7=(n,e)=>(t,s,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,i)}catch(a){throw a.name==="SyntaxError"?n():a}},o7=()=>new DOMException("","DataCloneError"),B_=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const i=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>i();try{e.postMessage(n,[n])}catch{}finally{i()}})},l7=(n,e,t,s,i,a,c,u,d,h,p)=>(m,y)=>{const b=c(m)?m:a(m);if(i.has(y)){const _=t();return Promise.reject(_)}try{i.add(y)}catch{}return e(d,()=>d(b))?b.decodeAudioData(y).then(_=>(B_(y).catch(()=>{}),e(u,()=>u(_))||p(_),n.add(_),_)):new Promise((_,v)=>{const w=async()=>{try{await B_(y)}catch{}},N=P=>{v(P),w()};try{b.decodeAudioData(y,P=>{typeof P.copyFromChannel!="function"&&(h(P),Qx(P)),n.add(P),w().then(()=>_(P))},P=>{N(P===null?s():P)})}catch(P){N(P)}})},c7=(n,e,t,s,i,a,c,u)=>(d,h)=>{const p=e.get(d);if(p===void 0)throw new Error("Missing the expected cycle count.");const m=a(d.context),y=u(m);if(p===h){if(e.delete(d),!y&&c(d)){const b=s(d),{outputs:_}=t(d);for(const v of _)if(yc(v)){const w=s(v[0]);n(b,w,v[1],v[2])}else{const w=i(v[0]);b.connect(w,v[1])}}}else e.set(d,p-h)},u7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},d7=(n,e,t,s,i,a,c)=>class extends n{constructor(d,h){const p=i(d),m={...u7,...h},y=s(p,m),b=a(p),_=b?t(m.maxDelayTime):null;super(d,!1,y,_),this._delayTime=e(this,b,y.delayTime),c(this,m.maxDelayTime)}get delayTime(){return this._delayTime}},h7=(n,e,t,s,i)=>a=>{const c=new WeakMap,u=async(d,h)=>{let p=t(d);const m=_n(p,h);if(!m){const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:a};p=e(h,y)}return c.set(h,p),m?await n(h,d.delayTime,p.delayTime):await s(h,d.delayTime,p.delayTime),await i(d,h,p),p};return{render(d,h){const p=c.get(h);return p!==void 0?Promise.resolve(p):u(d,h)}}},f7=n=>(e,t,s,i)=>n(e[i],a=>a[0]===t&&a[1]===s),p7=n=>(e,t)=>{n(e).delete(t)},m7=n=>"delayTime"in n,g7=(n,e,t)=>function s(i,a){const c=Xd(a)?a:t(n,a);if(m7(c))return[];if(i[0]===c)return[i];if(i.includes(c))return[];const{outputs:u}=e(c);return Array.from(u).map(d=>s([...i,c],d[0])).reduce((d,h)=>d.concat(h),[])},cd=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},y7=n=>(e,t=void 0,s=void 0,i=0)=>t===void 0?e.forEach(a=>a.disconnect()):typeof t=="number"?cd(n,e,t).disconnect():eh(t)?s===void 0?e.forEach(a=>a.disconnect(t)):i===void 0?cd(n,e,s).disconnect(t,0):cd(n,e,s).disconnect(t,0,i):s===void 0?e.forEach(a=>a.disconnect(t)):cd(n,e,s).disconnect(t,0),x7={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},v7=(n,e,t,s,i,a,c,u)=>class extends n{constructor(h,p){const m=a(h),y={...x7,...p},b=s(m,y),_=c(m),v=_?t():null;super(h,!1,b,v),this._attack=e(this,_,b.attack),this._knee=e(this,_,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,_,b.ratio),this._release=e(this,_,b.release),this._threshold=e(this,_,b.threshold),u(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=p,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},b7=(n,e,t,s,i)=>()=>{const a=new WeakMap,c=async(u,d)=>{let h=t(u);const p=_n(h,d);if(!p){const m={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(d,m)}return a.set(d,h),p?(await n(d,u.attack,h.attack),await n(d,u.knee,h.knee),await n(d,u.ratio,h.ratio),await n(d,u.release,h.release),await n(d,u.threshold,h.threshold)):(await s(d,u.attack,h.attack),await s(d,u.knee,h.knee),await s(d,u.ratio,h.ratio),await s(d,u.release,h.release),await s(d,u.threshold,h.threshold)),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},w7=()=>new DOMException("","EncodingError"),S7=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const i=n.document.head;if(i===null)s(new SyntaxError);else{const a=n.document.createElement("script"),c=new Blob([e],{type:"application/javascript"}),u=URL.createObjectURL(c),d=n.onerror,h=()=>{n.onerror=d,URL.revokeObjectURL(u)};n.onerror=(p,m,y,b,_)=>{if(m===u||m===n.location.href&&y===1&&b===1)return h(),s(_),!1;if(d!==null)return d(p,m,y,b,_)},a.onerror=()=>{h(),s(new SyntaxError)},a.onload=()=>{h(),t()},a.src=u,a.type="module",i.appendChild(a)}}),_7=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,i){if(s!==null){let a=this._listeners.get(s);a===void 0&&(a=n(this,s),typeof s=="function"&&this._listeners.set(s,a)),this._nativeEventTarget.addEventListener(t,a,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,i){const a=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,i)}},C7=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},j7=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},N7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},k7=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),p={...N7,...d},m=s(h,p),y=a(h),b=y?t():null;super(u,!1,m,b),this._gain=e(this,y,m.gain,Tn,Bn)}get gain(){return this._gain}},T7=(n,e,t,s,i)=>()=>{const a=new WeakMap,c=async(u,d)=>{let h=t(u);const p=_n(h,d);if(!p){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(d,m)}return a.set(d,h),p?await n(d,u.gain,h.gain):await s(d,u.gain,h.gain),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},P7=(n,e)=>t=>e(n,t),E7=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},A7=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},M7=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},R7=n=>e=>n.get(e),un=()=>new DOMException("","InvalidStateError"),I7=n=>e=>{const t=n.get(e);if(t===void 0)throw un();return t},O7=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},D7=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},qh=()=>new DOMException("","InvalidAccessError"),F7=n=>{n.getFrequencyResponse=(e=>(t,s,i)=>{if(t.length!==s.length||s.length!==i.length)throw qh();return e.call(n,t,s,i)})(n.getFrequencyResponse)},L7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},z7=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),p=i(h),m={...L7,...d},y=e(h,p?null:u.baseLatency,m),b=p?t(m.feedback,m.feedforward):null;super(u,!1,y,b),F7(y),this._nativeIIRFilterNode=y,a(this,1)}getFrequencyResponse(u,d,h){return this._nativeIIRFilterNode.getFrequencyResponse(u,d,h)}},iE=(n,e,t,s,i,a,c,u,d,h,p)=>{const m=h.length;let y=u;for(let b=0;b<m;b+=1){let _=t[0]*h[b];for(let v=1;v<i;v+=1){const w=y-v&d-1;_+=t[v]*a[w],_-=n[v]*c[w]}for(let v=i;v<s;v+=1)_+=t[v]*a[y-v&d-1];for(let v=i;v<e;v+=1)_-=n[v]*c[y-v&d-1];a[y]=h[b],c[y]=_,y=y+1&d-1,p[b]=_}return y},B7=(n,e,t,s)=>{const i=t instanceof Float64Array?t:new Float64Array(t),a=s instanceof Float64Array?s:new Float64Array(s),c=i.length,u=a.length,d=Math.min(c,u);if(i[0]!==1){for(let _=0;_<c;_+=1)a[_]/=i[0];for(let _=1;_<u;_+=1)i[_]/=i[0]}const h=32,p=new Float32Array(h),m=new Float32Array(h),y=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let _=0;_<b;_+=1){const v=n.getChannelData(_),w=y.getChannelData(_);p.fill(0),m.fill(0),iE(i,c,a,u,d,p,m,0,h,v,w)}return y},V7=(n,e,t,s,i)=>(a,c)=>{const u=new WeakMap;let d=null;const h=async(p,m)=>{let y=null,b=e(p);const _=_n(b,m);if(m.createIIRFilter===void 0?y=n(m,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):_||(b=m.createIIRFilter(c,a)),u.set(m,y===null?b:y),y!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new t(p.context.destination.channelCount,p.context.length,m.sampleRate);d=(async()=>{await s(p,w,w.destination);const N=await i(w);return B7(N,m,a,c)})()}const v=await d;return y.buffer=v,y.start(0),y}return await s(p,m,b),b};return{render(p,m){const y=u.get(m);return y!==void 0?Promise.resolve(y):h(p,m)}}},U7=(n,e,t,s,i,a)=>c=>(u,d)=>{const h=n.get(u);if(h===void 0){if(!c&&a(u)){const p=s(u),{outputs:m}=t(u);for(const y of m)if(yc(y)){const b=s(y[0]);e(p,b,y[1],y[2])}else{const b=i(y[0]);p.disconnect(b,y[1])}}n.set(u,d)}else n.set(u,h+d)},$7=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},q7=(n,e)=>t=>n.has(t)||e(t),W7=(n,e)=>t=>n.has(t)||e(t),G7=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},H7=n=>e=>n!==null&&e instanceof n,K7=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Q7=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,Y7=(n,e)=>t=>n(t)||e(t),X7=n=>e=>n!==null&&e instanceof n,Z7=n=>n!==null&&n.isSecureContext,J7=(n,e,t,s)=>class extends n{constructor(a,c){const u=t(a),d=e(u,c);if(s(u))throw TypeError();super(a,!0,d,null),this._nativeMediaElementAudioSourceNode=d}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},eq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},tq=(n,e,t,s)=>class extends n{constructor(a,c){const u=t(a);if(s(u))throw new TypeError;const d={...eq,...c},h=e(u,d);super(a,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},nq=(n,e,t,s)=>class extends n{constructor(a,c){const u=t(a),d=e(u,c);if(s(u))throw new TypeError;super(a,!0,d,null),this._nativeMediaStreamAudioSourceNode=d}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},sq=(n,e,t)=>class extends n{constructor(i,a){const c=t(i),u=e(c,a);super(i,!0,u,null)}},rq=(n,e,t,s,i,a)=>class extends t{constructor(u,d){super(u),this._nativeContext=u,Uh.set(this,u),s(u)&&i.set(u,new Set),this._destination=new n(this,d),this._listener=e(this,u),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(u){const d=typeof u=="function"?a(this,u):null;this._nativeContext.onstatechange=d;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===d?u:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Zl=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},iq=(n,e)=>(t,s,i)=>{const a=new Set;return t.connect=(c=>(u,d=0,h=0)=>{const p=a.size===0;if(e(u))return c.call(t,u,d,h),n(a,[u,d,h],m=>m[0]===u&&m[1]===d&&m[2]===h,!0),p&&s(),u;c.call(t,u,d),n(a,[u,d],m=>m[0]===u&&m[1]===d,!0),p&&s()})(t.connect),t.disconnect=(c=>(u,d,h)=>{const p=a.size>0;if(u===void 0)c.apply(t),a.clear();else if(typeof u=="number"){c.call(t,u);for(const y of a)y[1]===u&&a.delete(y)}else{e(u)?c.call(t,u,d,h):c.call(t,u,d);for(const y of a)y[0]===u&&(d===void 0||y[1]===d)&&(h===void 0||y[2]===h)&&a.delete(y)}const m=a.size===0;p&&m&&i()})(t.disconnect),t},Ct=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},nn=(n,e)=>{Ct(n,e,"channelCount"),Ct(n,e,"channelCountMode"),Ct(n,e,"channelInterpretation")},V_=n=>typeof n.getFloatTimeDomainData=="function",aq=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let i=0;i<s;i+=1)e[i]=(t[i]-128)*.0078125;return e}},oq=(n,e)=>(t,s)=>{const i=t.createAnalyser();if(nn(i,s),!(s.maxDecibels>s.minDecibels))throw e();return Ct(i,s,"fftSize"),Ct(i,s,"maxDecibels"),Ct(i,s,"minDecibels"),Ct(i,s,"smoothingTimeConstant"),n(V_,()=>V_(i))||aq(i),i},lq=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ot=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},cq=n=>{n.start=(e=>{let t=!1;return(s=0,i=0,a)=>{if(t)throw un();e.call(n,s,i,a),t=!0}})(n.start)},Zx=n=>{n.start=(e=>(t=0,s=0,i)=>{if(typeof i=="number"&&i<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,i)})(n.start)},Jx=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},uq=(n,e,t,s,i,a,c,u,d,h,p)=>(m,y)=>{const b=m.createBufferSource();return nn(b,y),Ot(b,y,"playbackRate"),Ct(b,y,"buffer"),Ct(b,y,"loop"),Ct(b,y,"loopEnd"),Ct(b,y,"loopStart"),e(t,()=>t(m))||cq(b),e(s,()=>s(m))||d(b),e(i,()=>i(m))||h(b,m),e(a,()=>a(m))||Zx(b),e(c,()=>c(m))||p(b,m),e(u,()=>u(m))||Jx(b),n(m,b),b},dq=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,hq=(n,e)=>(t,s,i)=>{const a=t.destination;if(a.channelCount!==s)try{a.channelCount=s}catch{}i&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:s});const c=n(t,{channelCount:s,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(c,"channelCount",u=>()=>u.call(c),u=>d=>{u.call(c,d);try{a.channelCount=d}catch(h){if(d>a.maxChannelCount)throw h}}),e(c,"channelCountMode",u=>()=>u.call(c),u=>d=>{u.call(c,d),a.channelCountMode=d}),e(c,"channelInterpretation",u=>()=>u.call(c),u=>d=>{u.call(c,d),a.channelInterpretation=d}),Object.defineProperty(c,"maxChannelCount",{get:()=>a.maxChannelCount}),c.connect(a),c},fq=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,pq=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},mq=(n,e,t,s,i)=>(a,c,u,d,h,p)=>{if(u!==null)try{const m=new u(a,d,p),y=new Map;let b=null;if(Object.defineProperties(m,{channelCount:{get:()=>p.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:_=>{typeof b=="function"&&m.removeEventListener("processorerror",b),b=typeof _=="function"?_:null,typeof b=="function"&&m.addEventListener("processorerror",b)}}}),m.addEventListener=(_=>(...v)=>{if(v[0]==="processorerror"){const w=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(w!==null){const N=y.get(v[1]);N!==void 0?v[1]=N:(v[1]=P=>{P.type==="error"?(Object.defineProperties(P,{type:{value:"processorerror"}}),w(P)):w(new ErrorEvent(v[0],{...P}))},y.set(w,v[1]))}}return _.call(m,"error",v[1],v[2]),_.call(m,...v)})(m.addEventListener),m.removeEventListener=(_=>(...v)=>{if(v[0]==="processorerror"){const w=y.get(v[1]);w!==void 0&&(y.delete(v[1]),v[1]=w)}return _.call(m,"error",v[1],v[2]),_.call(m,v[0],v[1],v[2])})(m.removeEventListener),p.numberOfOutputs!==0){const _=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return m.connect(_).connect(a.destination),i(m,()=>_.disconnect(),()=>_.connect(a.destination))}return m}catch(m){throw m.code===11?s():m}if(h===void 0)throw s();return pq(p),e(a,c,h,p)},aE=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),gq=n=>new Promise((e,t)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:a})=>{s.close(),i.close(),e(a)},s.onmessageerror=({data:a})=>{s.close(),i.close(),t(a)},i.postMessage(n)}),yq=async(n,e)=>{const t=await gq(e);return new n(t)},xq=(n,e,t,s)=>{let i=py.get(n);i===void 0&&(i=new WeakMap,py.set(n,i));const a=yq(t,s);return i.set(e,a),a},vq=(n,e,t,s,i,a,c,u,d,h,p,m,y)=>(b,_,v,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw d();const N=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(N.some(ce=>ce<1))throw d();if(N.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw d();const P=w.channelCount*w.numberOfInputs,C=N.reduce((ce,ve)=>ce+ve,0),A=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(P+A>6||C>6)throw d();const k=new MessageChannel,M=[],E=[];for(let ce=0;ce<w.numberOfInputs;ce+=1)M.push(c(b,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),E.push(i(b,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const T=[];if(v.parameterDescriptors!==void 0)for(const{defaultValue:ce,maxValue:ve,minValue:Ve,name:We}of v.parameterDescriptors){const Ye=a(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[We]!==void 0?w.parameterData[We]:ce===void 0?0:ce});Object.defineProperties(Ye.offset,{defaultValue:{get:()=>ce===void 0?0:ce},maxValue:{get:()=>ve===void 0?Tn:ve},minValue:{get:()=>Ve===void 0?Bn:Ve}}),T.push(Ye)}const I=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,P+A)}),O=aE(_,b.sampleRate),F=u(b,O,P+A,Math.max(1,C)),L=i(b,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),V=[];for(let ce=0;ce<w.numberOfOutputs;ce+=1)V.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[ce]}));for(let ce=0;ce<w.numberOfInputs;ce+=1){M[ce].connect(E[ce]);for(let ve=0;ve<w.channelCount;ve+=1)E[ce].connect(I,ve,ce*w.channelCount+ve)}const z=new sE(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:ce},ve)=>{const Ve=T[ve];return Ve.connect(I,0,P+ve),Ve.start(0),[ce,Ve.offset]}));I.connect(F);let W=w.channelInterpretation,G=null;const K=w.numberOfOutputs===0?[F]:V,$={get bufferSize(){return O},get channelCount(){return w.channelCount},set channelCount(ce){throw t()},get channelCountMode(){return w.channelCountMode},set channelCountMode(ce){throw t()},get channelInterpretation(){return W},set channelInterpretation(ce){for(const ve of M)ve.channelInterpretation=ce;W=ce},get context(){return F.context},get inputs(){return M},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return G},set onprocessorerror(ce){typeof G=="function"&&$.removeEventListener("processorerror",G),G=typeof ce=="function"?ce:null,typeof G=="function"&&$.addEventListener("processorerror",G)},get parameters(){return z},get port(){return k.port2},addEventListener(...ce){return F.addEventListener(ce[0],ce[1],ce[2])},connect:n.bind(null,K),disconnect:h.bind(null,K),dispatchEvent(...ce){return F.dispatchEvent(ce[0])},removeEventListener(...ce){return F.removeEventListener(ce[0],ce[1],ce[2])}},H=new Map;k.port1.addEventListener=(ce=>(...ve)=>{if(ve[0]==="message"){const Ve=typeof ve[1]=="function"?ve[1]:typeof ve[1]=="object"&&ve[1]!==null&&typeof ve[1].handleEvent=="function"?ve[1].handleEvent:null;if(Ve!==null){const We=H.get(ve[1]);We!==void 0?ve[1]=We:(ve[1]=Ye=>{p(b.currentTime,b.sampleRate,()=>Ve(Ye))},H.set(Ve,ve[1]))}}return ce.call(k.port1,ve[0],ve[1],ve[2])})(k.port1.addEventListener),k.port1.removeEventListener=(ce=>(...ve)=>{if(ve[0]==="message"){const Ve=H.get(ve[1]);Ve!==void 0&&(H.delete(ve[1]),ve[1]=Ve)}return ce.call(k.port1,ve[0],ve[1],ve[2])})(k.port1.removeEventListener);let ee=null;Object.defineProperty(k.port1,"onmessage",{get:()=>ee,set:ce=>{typeof ee=="function"&&k.port1.removeEventListener("message",ee),ee=typeof ce=="function"?ce:null,typeof ee=="function"&&(k.port1.addEventListener("message",ee),k.port1.start())}}),v.prototype.port=k.port1;let R=null;xq(b,$,v,w).then(ce=>R=ce);const X=nh(w.numberOfInputs,w.channelCount),re=nh(w.numberOfOutputs,N),ae=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce((ce,{name:ve})=>({...ce,[ve]:new Float32Array(128)}),{});let le=!0;const Q=()=>{w.numberOfOutputs>0&&F.disconnect(L);for(let ce=0,ve=0;ce<w.numberOfOutputs;ce+=1){const Ve=V[ce];for(let We=0;We<N[ce];We+=1)L.disconnect(Ve,ve+We,We);ve+=N[ce]}},se=new Map;F.onaudioprocess=({inputBuffer:ce,outputBuffer:ve})=>{if(R!==null){const Ve=m($);for(let We=0;We<O;We+=128){for(let Ye=0;Ye<w.numberOfInputs;Ye+=1)for(let Je=0;Je<w.channelCount;Je+=1)th(ce,X[Ye],Je,Je,We);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:Ye},Je)=>{th(ce,ae,Ye,P+Je,We)});for(let Ye=0;Ye<w.numberOfInputs;Ye+=1)for(let Je=0;Je<N[Ye];Je+=1)re[Ye][Je].byteLength===0&&(re[Ye][Je]=new Float32Array(128));try{const Ye=X.map((Se,ct)=>{if(Ve[ct].size>0)return se.set(ct,O/128),Se;const Dr=se.get(ct);return Dr===void 0?[]:(Se.every(va=>va.every(Ec=>Ec===0))&&(Dr===1?se.delete(ct):se.set(ct,Dr-1)),Se)});le=p(b.currentTime+We/b.sampleRate,b.sampleRate,()=>R.process(Ye,re,ae));for(let Se=0,ct=0;Se<w.numberOfOutputs;Se+=1){for(let Rn=0;Rn<N[Se];Rn+=1)rE(ve,re[Se],Rn,ct+Rn,We);ct+=N[Se]}}catch(Ye){le=!1,$.dispatchEvent(new ErrorEvent("processorerror",{colno:Ye.colno,filename:Ye.filename,lineno:Ye.lineno,message:Ye.message}))}if(!le){for(let Ye=0;Ye<w.numberOfInputs;Ye+=1){M[Ye].disconnect(E[Ye]);for(let Je=0;Je<w.channelCount;Je+=1)E[We].disconnect(I,Je,Ye*w.channelCount+Je)}if(v.parameterDescriptors!==void 0){const Ye=v.parameterDescriptors.length;for(let Je=0;Je<Ye;Je+=1){const Se=T[Je];Se.disconnect(I,0,P+Je),Se.stop()}}I.disconnect(F),F.onaudioprocess=null,xe?Q():oe();break}}}};let xe=!1;const Pe=c(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Fe=()=>F.connect(Pe).connect(b.destination),oe=()=>{F.disconnect(Pe),Pe.disconnect()},ke=()=>{if(le){oe(),w.numberOfOutputs>0&&F.connect(L);for(let ce=0,ve=0;ce<w.numberOfOutputs;ce+=1){const Ve=V[ce];for(let We=0;We<N[ce];We+=1)L.connect(Ve,ve+We,We);ve+=N[ce]}}xe=!0},Me=()=>{le&&(Fe(),Q()),xe=!1};return Fe(),y($,ke,Me)},oE=(n,e)=>{const t=n.createBiquadFilter();return nn(t,e),Ot(t,e,"Q"),Ot(t,e,"detune"),Ot(t,e,"frequency"),Ot(t,e,"gain"),Ct(t,e,"type"),t},bq=(n,e)=>(t,s)=>{const i=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,i),nn(i,s),i},wq=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw un()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw un()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw un()}})},xc=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return nn(t,e),wq(t),t},Sq=(n,e,t,s,i)=>(a,c)=>{if(a.createConstantSource===void 0)return t(a,c);const u=a.createConstantSource();return nn(u,c),Ot(u,c,"offset"),e(s,()=>s(a))||Zx(u),e(i,()=>i(a))||Jx(u),n(a,u),u},Ro=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),_q=(n,e,t,s)=>(i,{offset:a,...c})=>{const u=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(i,{...c,gain:a}),p=u.getChannelData(0);p[0]=1,p[1]=1,d.buffer=u,d.loop=!0;const m={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(_){h.channelCount=_},get channelCountMode(){return h.channelCountMode},set channelCountMode(_){h.channelCountMode=_},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return d.onended},set onended(_){d.onended=_},addEventListener(..._){return d.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return d.dispatchEvent(_[0])},removeEventListener(..._){return d.removeEventListener(_[0],_[1],_[2])},start(_=0){d.start.call(d,_)},stop(_=0){d.stop.call(d,_)}},y=()=>d.connect(h),b=()=>d.disconnect(h);return n(i,d),s(Ro(m,h),y,b)},Cq=(n,e)=>(t,s)=>{const i=t.createConvolver();if(nn(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Ct(i,s,"buffer"),s.channelCount>2||(e(i,"channelCount",a=>()=>a.call(i),a=>c=>{if(c>2)throw n();return a.call(i,c)}),s.channelCountMode==="max"))throw n();return e(i,"channelCountMode",a=>()=>a.call(i),a=>c=>{if(c==="max")throw n();return a.call(i,c)}),i},lE=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return nn(t,e),Ot(t,e,"delayTime"),t},jq=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(nn(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ot(s,t,"attack"),Ot(s,t,"knee"),Ot(s,t,"ratio"),Ot(s,t,"release"),Ot(s,t,"threshold"),s},$n=(n,e)=>{const t=n.createGain();return nn(t,e),Ot(t,e,"gain"),t},Nq=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return nn(i,s),i};function kq(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function Tq(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function U_(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=Tq(t,e),t[0]+=n[s];return t}const Pq=(n,e,t,s)=>(i,a,{channelCount:c,channelCountMode:u,channelInterpretation:d,feedback:h,feedforward:p})=>{const m=aE(a,i.sampleRate),y=h instanceof Float64Array?h:new Float64Array(h),b=p instanceof Float64Array?p:new Float64Array(p),_=y.length,v=b.length,w=Math.min(_,v);if(_===0||_>20)throw s();if(y[0]===0)throw e();if(v===0||v>20)throw s();if(b[0]===0)throw e();if(y[0]!==1){for(let T=0;T<v;T+=1)b[T]/=y[0];for(let T=1;T<_;T+=1)y[T]/=y[0]}const N=t(i,m,c,c);N.channelCount=c,N.channelCountMode=u,N.channelInterpretation=d;const P=32,C=[],A=[],k=[];for(let T=0;T<c;T+=1){C.push(0);const I=new Float32Array(P),O=new Float32Array(P);I.fill(0),O.fill(0),A.push(I),k.push(O)}N.onaudioprocess=T=>{const I=T.inputBuffer,O=T.outputBuffer,F=I.numberOfChannels;for(let L=0;L<F;L+=1){const V=I.getChannelData(L),z=O.getChannelData(L);C[L]=iE(y,_,b,v,w,A[L],k[L],C[L],P,V,z)}};const M=i.sampleRate/2;return Ro({get bufferSize(){return m},get channelCount(){return N.channelCount},set channelCount(T){N.channelCount=T},get channelCountMode(){return N.channelCountMode},set channelCountMode(T){N.channelCountMode=T},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(T){N.channelInterpretation=T},get context(){return N.context},get inputs(){return[N]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},addEventListener(...T){return N.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return N.dispatchEvent(T[0])},getFrequencyResponse(T,I,O){if(T.length!==I.length||I.length!==O.length)throw n();const F=T.length;for(let L=0;L<F;L+=1){const V=-Math.PI*(T[L]/M),z=[Math.cos(V),Math.sin(V)],W=U_(b,z),G=U_(y,z),K=kq(W,G);I[L]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),O[L]=Math.atan2(K[1],K[0])}},removeEventListener(...T){return N.removeEventListener(T[0],T[1],T[2])}},N)},Eq=(n,e)=>n.createMediaElementSource(e.mediaElement),Aq=(n,e)=>{const t=n.createMediaStreamDestination();return nn(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Mq=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((a,c)=>a.id<c.id?-1:a.id>c.id?1:0);const s=t.slice(0,1),i=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i},Rq=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const i=new MediaStream([s]),a=t.createMediaStreamSource(i);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return a},Iq=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,Oq=(n,e,t,s,i,a)=>(c,u)=>{const d=c.createOscillator();return nn(d,u),Ot(d,u,"detune"),Ot(d,u,"frequency"),u.periodicWave!==void 0?d.setPeriodicWave(u.periodicWave):Ct(d,u,"type"),e(t,()=>t(c))||Zx(d),e(s,()=>s(c))||a(d,c),e(i,()=>i(c))||Jx(d),n(c,d),d},Dq=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(nn(s,t),Ot(s,t,"orientationX"),Ot(s,t,"orientationY"),Ot(s,t,"orientationZ"),Ot(s,t,"positionX"),Ot(s,t,"positionY"),Ot(s,t,"positionZ"),Ct(s,t,"coneInnerAngle"),Ct(s,t,"coneOuterAngle"),Ct(s,t,"coneOuterGain"),Ct(s,t,"distanceModel"),Ct(s,t,"maxDistance"),Ct(s,t,"panningModel"),Ct(s,t,"refDistance"),Ct(s,t,"rolloffFactor"),s)},Fq=(n,e,t,s,i,a,c,u,d,h)=>(p,{coneInnerAngle:m,coneOuterAngle:y,coneOuterGain:b,distanceModel:_,maxDistance:v,orientationX:w,orientationY:N,orientationZ:P,panningModel:C,positionX:A,positionY:k,positionZ:M,refDistance:E,rolloffFactor:T,...I})=>{const O=p.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw c();nn(O,I);const F={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L=t(p,{...F,channelInterpretation:"speakers",numberOfInputs:6}),V=s(p,{...I,gain:1}),z=s(p,{...F,gain:1}),W=s(p,{...F,gain:0}),G=s(p,{...F,gain:0}),K=s(p,{...F,gain:0}),$=s(p,{...F,gain:0}),H=s(p,{...F,gain:0}),ee=i(p,256,6,1),R=a(p,{...F,curve:new Float32Array([1,1]),oversample:"none"});let U=[w,N,P],X=[A,k,M];const re=new Float32Array(1);ee.onaudioprocess=({inputBuffer:se})=>{const xe=[d(se,re,0),d(se,re,1),d(se,re,2)];xe.some((Fe,oe)=>Fe!==U[oe])&&(O.setOrientation(...xe),U=xe);const Pe=[d(se,re,3),d(se,re,4),d(se,re,5)];Pe.some((Fe,oe)=>Fe!==X[oe])&&(O.setPosition(...Pe),X=Pe)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0});const ae={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(se){if(se>2)throw c();V.channelCount=se,O.channelCount=se},get channelCountMode(){return O.channelCountMode},set channelCountMode(se){if(se==="max")throw c();V.channelCountMode=se,O.channelCountMode=se},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(se){V.channelInterpretation=se,O.channelInterpretation=se},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(se){O.coneInnerAngle=se},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(se){O.coneOuterAngle=se},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(se){if(se<0||se>1)throw e();O.coneOuterGain=se},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(se){O.distanceModel=se},get inputs(){return[V]},get maxDistance(){return O.maxDistance},set maxDistance(se){if(se<0)throw new RangeError;O.maxDistance=se},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return z.gain},get orientationY(){return W.gain},get orientationZ(){return G.gain},get panningModel(){return O.panningModel},set panningModel(se){O.panningModel=se},get positionX(){return K.gain},get positionY(){return $.gain},get positionZ(){return H.gain},get refDistance(){return O.refDistance},set refDistance(se){if(se<0)throw new RangeError;O.refDistance=se},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(se){if(se<0)throw new RangeError;O.rolloffFactor=se},addEventListener(...se){return V.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return V.dispatchEvent(se[0])},removeEventListener(...se){return V.removeEventListener(se[0],se[1],se[2])}};m!==ae.coneInnerAngle&&(ae.coneInnerAngle=m),y!==ae.coneOuterAngle&&(ae.coneOuterAngle=y),b!==ae.coneOuterGain&&(ae.coneOuterGain=b),_!==ae.distanceModel&&(ae.distanceModel=_),v!==ae.maxDistance&&(ae.maxDistance=v),w!==ae.orientationX.value&&(ae.orientationX.value=w),N!==ae.orientationY.value&&(ae.orientationY.value=N),P!==ae.orientationZ.value&&(ae.orientationZ.value=P),C!==ae.panningModel&&(ae.panningModel=C),A!==ae.positionX.value&&(ae.positionX.value=A),k!==ae.positionY.value&&(ae.positionY.value=k),M!==ae.positionZ.value&&(ae.positionZ.value=M),E!==ae.refDistance&&(ae.refDistance=E),T!==ae.rolloffFactor&&(ae.rolloffFactor=T),(U[0]!==1||U[1]!==0||U[2]!==0)&&O.setOrientation(...U),(X[0]!==0||X[1]!==0||X[2]!==0)&&O.setPosition(...X);const le=()=>{V.connect(O),n(V,R,0,0),R.connect(z).connect(L,0,0),R.connect(W).connect(L,0,1),R.connect(G).connect(L,0,2),R.connect(K).connect(L,0,3),R.connect($).connect(L,0,4),R.connect(H).connect(L,0,5),L.connect(ee).connect(p.destination)},Q=()=>{V.disconnect(O),u(V,R,0,0),R.disconnect(z),z.disconnect(L),R.disconnect(W),W.disconnect(L),R.disconnect(G),G.disconnect(L),R.disconnect(K),K.disconnect(L),R.disconnect($),$.disconnect(L),R.disconnect(H),H.disconnect(L),L.disconnect(ee),ee.disconnect(p.destination)};return h(Ro(ae,O),le,Q)},Lq=n=>(e,{disableNormalization:t,imag:s,real:i})=>{const a=s instanceof Float32Array?s:new Float32Array(s),c=i instanceof Float32Array?i:new Float32Array(i),u=e.createPeriodicWave(c,a,{disableNormalization:t});if(Array.from(s).length<2)throw n();return u},vc=(n,e,t,s)=>n.createScriptProcessor(e,t,s),zq=(n,e)=>(t,s)=>{const i=s.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const a=t.createStereoPanner();return nn(a,s),Ot(a,s,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>i,set:c=>{if(c!==i)throw e()}}),a},Bq=(n,e,t,s,i,a)=>{const u=new Float32Array([1,1]),d=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...h,oversample:"none"},m=(_,v,w,N)=>{const P=new Float32Array(16385),C=new Float32Array(16385);for(let I=0;I<16385;I+=1){const O=I/16384*d;P[I]=Math.cos(O),C[I]=Math.sin(O)}const A=t(_,{...h,gain:0}),k=s(_,{...p,curve:P}),M=s(_,{...p,curve:u}),E=t(_,{...h,gain:0}),T=s(_,{...p,curve:C});return{connectGraph(){v.connect(A),v.connect(M.inputs===void 0?M:M.inputs[0]),v.connect(E),M.connect(w),w.connect(k.inputs===void 0?k:k.inputs[0]),w.connect(T.inputs===void 0?T:T.inputs[0]),k.connect(A.gain),T.connect(E.gain),A.connect(N,0,0),E.connect(N,0,1)},disconnectGraph(){v.disconnect(A),v.disconnect(M.inputs===void 0?M:M.inputs[0]),v.disconnect(E),M.disconnect(w),w.disconnect(k.inputs===void 0?k:k.inputs[0]),w.disconnect(T.inputs===void 0?T:T.inputs[0]),k.disconnect(A.gain),T.disconnect(E.gain),A.disconnect(N,0,0),E.disconnect(N,0,1)}}},y=(_,v,w,N)=>{const P=new Float32Array(16385),C=new Float32Array(16385),A=new Float32Array(16385),k=new Float32Array(16385),M=Math.floor(16385/2);for(let K=0;K<16385;K+=1)if(K>M){const $=(K-M)/(16384-M)*d;P[K]=Math.cos($),C[K]=Math.sin($),A[K]=0,k[K]=1}else{const $=K/(16384-M)*d;P[K]=1,C[K]=0,A[K]=Math.cos($),k[K]=Math.sin($)}const E=e(_,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=t(_,{...h,gain:0}),I=s(_,{...p,curve:P}),O=t(_,{...h,gain:0}),F=s(_,{...p,curve:C}),L=s(_,{...p,curve:u}),V=t(_,{...h,gain:0}),z=s(_,{...p,curve:A}),W=t(_,{...h,gain:0}),G=s(_,{...p,curve:k});return{connectGraph(){v.connect(E),v.connect(L.inputs===void 0?L:L.inputs[0]),E.connect(T,0),E.connect(O,0),E.connect(V,1),E.connect(W,1),L.connect(w),w.connect(I.inputs===void 0?I:I.inputs[0]),w.connect(F.inputs===void 0?F:F.inputs[0]),w.connect(z.inputs===void 0?z:z.inputs[0]),w.connect(G.inputs===void 0?G:G.inputs[0]),I.connect(T.gain),F.connect(O.gain),z.connect(V.gain),G.connect(W.gain),T.connect(N,0,0),V.connect(N,0,0),O.connect(N,0,1),W.connect(N,0,1)},disconnectGraph(){v.disconnect(E),v.disconnect(L.inputs===void 0?L:L.inputs[0]),E.disconnect(T,0),E.disconnect(O,0),E.disconnect(V,1),E.disconnect(W,1),L.disconnect(w),w.disconnect(I.inputs===void 0?I:I.inputs[0]),w.disconnect(F.inputs===void 0?F:F.inputs[0]),w.disconnect(z.inputs===void 0?z:z.inputs[0]),w.disconnect(G.inputs===void 0?G:G.inputs[0]),I.disconnect(T.gain),F.disconnect(O.gain),z.disconnect(V.gain),G.disconnect(W.gain),T.disconnect(N,0,0),V.disconnect(N,0,0),O.disconnect(N,0,1),W.disconnect(N,0,1)}}},b=(_,v,w,N,P)=>{if(v===1)return m(_,w,N,P);if(v===2)return y(_,w,N,P);throw i()};return(_,{channelCount:v,channelCountMode:w,pan:N,...P})=>{if(w==="max")throw i();const C=n(_,{...P,channelCount:1,channelCountMode:w,numberOfInputs:2}),A=t(_,{...P,channelCount:v,channelCountMode:w,gain:1}),k=t(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:N});let{connectGraph:M,disconnectGraph:E}=b(_,v,A,k,C);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(L){A.channelCount!==L&&(I&&E(),{connectGraph:M,disconnectGraph:E}=b(_,L,A,k,C),I&&M()),A.channelCount=L},get channelCountMode(){return A.channelCountMode},set channelCountMode(L){if(L==="clamped-max"||L==="max")throw i();A.channelCountMode=L},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(L){A.channelInterpretation=L},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return k.gain},addEventListener(...L){return A.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return A.dispatchEvent(L[0])},removeEventListener(...L){return A.removeEventListener(L[0],L[1],L[2])}};let I=!1;const O=()=>{M(),I=!0},F=()=>{E(),I=!1};return a(Ro(T,C),O,F)}},Vq=(n,e,t,s,i,a,c)=>(u,d)=>{const h=u.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&u.createGain().gain.automationRate===void 0)return t(u,d);nn(h,d);const p=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(p!==null&&p.length<2)throw e();Ct(h,{curve:p},"curve"),Ct(h,d,"oversample");let m=null,y=!1;return c(h,"curve",v=>()=>v.call(h),v=>w=>(v.call(h,w),y&&(s(w)&&m===null?m=n(u,h):!s(w)&&m!==null&&(m(),m=null)),w)),i(h,()=>{y=!0,s(h.curve)&&(m=n(u,h))},()=>{y=!1,m!==null&&(m(),m=null)})},Uq=(n,e,t,s,i)=>(a,{curve:c,oversample:u,...d})=>{const h=a.createWaveShaper(),p=a.createWaveShaper();nn(h,d),nn(p,d);const m=t(a,{...d,gain:1}),y=t(a,{...d,gain:-1}),b=t(a,{...d,gain:1}),_=t(a,{...d,gain:-1});let v=null,w=!1,N=null;const P={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(k){m.channelCount=k,y.channelCount=k,h.channelCount=k,b.channelCount=k,p.channelCount=k,_.channelCount=k},get channelCountMode(){return h.channelCountMode},set channelCountMode(k){m.channelCountMode=k,y.channelCountMode=k,h.channelCountMode=k,b.channelCountMode=k,p.channelCountMode=k,_.channelCountMode=k},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(k){m.channelInterpretation=k,y.channelInterpretation=k,h.channelInterpretation=k,b.channelInterpretation=k,p.channelInterpretation=k,_.channelInterpretation=k},get context(){return h.context},get curve(){return N},set curve(k){if(k!==null&&k.length<2)throw e();if(k===null)h.curve=k,p.curve=k;else{const M=k.length,E=new Float32Array(M+2-M%2),T=new Float32Array(M+2-M%2);E[0]=k[0],T[0]=-k[M-1];const I=Math.ceil((M+1)/2),O=(M+1)/2-1;for(let F=1;F<I;F+=1){const L=F/I*O,V=Math.floor(L),z=Math.ceil(L);E[F]=V===z?k[V]:(1-(L-V))*k[V]+(1-(z-L))*k[z],T[F]=V===z?-k[M-1-V]:-((1-(L-V))*k[M-1-V])-(1-(z-L))*k[M-1-z]}E[I]=M%2===1?k[I-1]:(k[I-2]+k[I-1])/2,h.curve=E,p.curve=T}N=k,w&&(s(N)&&v===null?v=n(a,m):v!==null&&(v(),v=null))},get inputs(){return[m]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(k){h.oversample=k,p.oversample=k},addEventListener(...k){return m.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return m.dispatchEvent(k[0])},removeEventListener(...k){return m.removeEventListener(k[0],k[1],k[2])}};c!==null&&(P.curve=c instanceof Float32Array?c:new Float32Array(c)),u!==P.oversample&&(P.oversample=u);const C=()=>{m.connect(h).connect(b),m.connect(y).connect(p).connect(_).connect(b),w=!0,s(N)&&(v=n(a,m))},A=()=>{m.disconnect(h),h.disconnect(b),m.disconnect(y),y.disconnect(p),p.disconnect(_),_.disconnect(b),w=!1,v!==null&&(v(),v=null)};return i(Ro(P,b),C,A)},Mn=()=>new DOMException("","NotSupportedError"),$q={numberOfChannels:1},qq=(n,e,t,s,i)=>class extends n{constructor(c,u,d){let h;if(typeof c=="number"&&u!==void 0&&d!==void 0)h={length:u,numberOfChannels:c,sampleRate:d};else if(typeof c=="object")h=c;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:m,sampleRate:y}={...$q,...h},b=s(m,p,y);e(Zl,()=>Zl(b))||b.addEventListener("statechange",(()=>{let _=0;const v=w=>{this._state==="running"&&(_>0?(b.removeEventListener("statechange",v),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):_+=1)};return v})()),super(b,m),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,JP(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},Wq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Gq=(n,e,t,s,i,a,c)=>class extends n{constructor(d,h){const p=i(d),m={...Wq,...h},y=t(p,m),b=a(p),_=b?s():null,v=d.sampleRate/2;super(d,!1,y,_),this._detune=e(this,b,y.detune,153600,-153600),this._frequency=e(this,b,y.frequency,v,-v),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=_,this._oscillatorNodeRenderer!==null&&m.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=m.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const h=typeof d=="function"?c(this,d):null;this._nativeOscillatorNode.onended=h;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===h?d:p}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){mo(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),kr(this)&&mc(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},Hq=(n,e,t,s,i)=>()=>{const a=new WeakMap;let c=null,u=null,d=null;const h=async(p,m)=>{let y=t(p);const b=_n(y,m);if(!b){const _={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:c===null?void 0:c,type:y.type};y=e(m,_),u!==null&&y.start(u),d!==null&&y.stop(d)}return a.set(m,y),b?(await n(m,p.detune,y.detune),await n(m,p.frequency,y.frequency)):(await s(m,p.detune,y.detune),await s(m,p.frequency,y.frequency)),await i(p,m,y),y};return{set periodicWave(p){c=p},set start(p){u=p},set stop(p){d=p},render(p,m){const y=a.get(m);return y!==void 0?Promise.resolve(y):h(p,m)}}},Kq={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Qq=(n,e,t,s,i,a,c)=>class extends n{constructor(d,h){const p=i(d),m={...Kq,...h},y=t(p,m),b=a(p),_=b?s():null;super(d,!1,y,_),this._nativePannerNode=y,this._orientationX=e(this,b,y.orientationX,Tn,Bn),this._orientationY=e(this,b,y.orientationY,Tn,Bn),this._orientationZ=e(this,b,y.orientationZ,Tn,Bn),this._positionX=e(this,b,y.positionX,Tn,Bn),this._positionY=e(this,b,y.positionY,Tn,Bn),this._positionZ=e(this,b,y.positionZ,Tn,Bn),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},Yq=(n,e,t,s,i,a,c,u,d,h)=>()=>{const p=new WeakMap;let m=null;const y=async(b,_)=>{let v=null,w=a(b);const N={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},P={...N,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},C=_n(w,_);if("bufferSize"in w)v=s(_,{...N,gain:1});else if(!C){const A={...P,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=i(_,A)}if(p.set(_,v===null?w:v),v!==null){if(m===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const F=new c(6,b.context.length,_.sampleRate),L=e(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});L.connect(F.destination),m=(async()=>{const V=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(z,W)=>{const G=t(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await u(F,z,G.offset),G}));for(let z=0;z<6;z+=1)V[z].connect(L,0,z),V[z].start(0);return h(F)})()}const A=await m,k=s(_,{...N,gain:1});await d(b,_,k);const M=[];for(let F=0;F<A.numberOfChannels;F+=1)M.push(A.getChannelData(F));let E=[M[0][0],M[1][0],M[2][0]],T=[M[3][0],M[4][0],M[5][0]],I=s(_,{...N,gain:1}),O=i(_,{...P,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]});k.connect(I).connect(O.inputs[0]),O.connect(v);for(let F=128;F<A.length;F+=128){const L=[M[0][F],M[1][F],M[2][F]],V=[M[3][F],M[4][F],M[5][F]];if(L.some((z,W)=>z!==E[W])||V.some((z,W)=>z!==T[W])){E=L,T=V;const z=F/_.sampleRate;I.gain.setValueAtTime(0,z),I=s(_,{...N,gain:0}),O=i(_,{...P,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),I.gain.setValueAtTime(1,z),k.connect(I).connect(O.inputs[0]),O.connect(v)}}return v}return C?(await n(_,b.orientationX,w.orientationX),await n(_,b.orientationY,w.orientationY),await n(_,b.orientationZ,w.orientationZ),await n(_,b.positionX,w.positionX),await n(_,b.positionY,w.positionY),await n(_,b.positionZ,w.positionZ)):(await u(_,b.orientationX,w.orientationX),await u(_,b.orientationY,w.orientationY),await u(_,b.orientationZ,w.orientationZ),await u(_,b.positionX,w.positionX),await u(_,b.positionY,w.positionY),await u(_,b.positionZ,w.positionZ)),Mo(w)?await d(b,_,w.inputs[0]):await d(b,_,w),w};return{render(b,_){const v=p.get(_);return v!==void 0?Promise.resolve(v):y(b,_)}}},Xq={disableNormalization:!1},Zq=(n,e,t,s)=>class cE{constructor(a,c){const u=e(a),d=s({...Xq,...c}),h=n(u,d);return t.add(h),h}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===cE.prototype||t.has(a)}},Jq=(n,e)=>(t,s,i)=>(n(s).replay(i),e(s,t,i)),e9=(n,e,t)=>async(s,i,a)=>{const c=n(s);await Promise.all(c.activeInputs.map((u,d)=>Array.from(u).map(async([h,p])=>{const y=await e(h).render(h,i),b=s.context.destination;!t(h)&&(s!==b||!t(s))&&y.connect(a,p,d)})).reduce((u,d)=>[...u,...d],[]))},t9=(n,e,t)=>async(s,i,a)=>{const c=e(s);await Promise.all(Array.from(c.activeInputs).map(async([u,d])=>{const p=await n(u).render(u,i);t(u)||p.connect(a,d)}))},n9=(n,e,t,s)=>i=>n(Zl,()=>Zl(i))?Promise.resolve(n(s,s)).then(a=>{if(!a){const c=t(i,512,0,1);i.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>i.currentTime,c.connect(i.destination)}return i.startRendering()}):new Promise(a=>{const c=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=u=>{c.disconnect(),a(u.renderedBuffer)},c.connect(i.destination),i.startRendering()}),s9=n=>(e,t)=>{n.set(e,t)},r9=n=>(e,t)=>n.set(e,t),i9=(n,e,t,s,i,a,c,u)=>(d,h)=>t(d).render(d,h).then(()=>Promise.all(Array.from(s(h)).map(p=>t(p).render(p,h)))).then(()=>i(h)).then(p=>(typeof p.copyFromChannel!="function"?(c(p),Qx(p)):e(a,()=>a(p))||u(p),n.add(p),p)),a9={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},o9=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),p={...a9,...d},m=t(h,p),y=a(h),b=y?s():null;super(u,!1,m,b),this._pan=e(this,y,m.pan)}get pan(){return this._pan}},l9=(n,e,t,s,i)=>()=>{const a=new WeakMap,c=async(u,d)=>{let h=t(u);const p=_n(h,d);if(!p){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(d,m)}return a.set(d,h),p?await n(d,u.pan,h.pan):await s(d,u.pan,h.pan),Mo(h)?await i(u,d,h.inputs[0]):await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},c9=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},u9=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(t);let a=!1,c=!1;try{await s.audioWorklet.addModule(i);const u=new n(s,"a",{numberOfOutputs:0}),d=s.createOscillator();u.port.onmessage=()=>a=!0,u.onprocessorerror=()=>c=!0,d.connect(u),d.start(0),await s.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(i)}return a&&!c},d9=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{s.disconnect(),i(t.currentTime!==0)},t.startRendering()})},h9=()=>new DOMException("","UnknownError"),f9={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},p9=(n,e,t,s,i,a,c)=>class extends n{constructor(d,h){const p=i(d),m={...f9,...h},y=t(p,m),_=a(p)?s():null;super(d,!0,y,_),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},m9=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,c)=>{let u=e(a);if(!_n(u,c)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample};u=n(c,h)}return s.set(c,u),Mo(u)?await t(a,c,u.inputs[0]):await t(a,c,u),u};return{render(a,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}},g9=()=>typeof window>"u"?null:window,y9=(n,e)=>t=>{t.copyFromChannel=(s,i,a=0)=>{const c=n(a),u=n(i);if(u>=t.numberOfChannels)throw e();const d=t.length,h=t.getChannelData(u),p=s.length;for(let m=c<0?-c:0;m+c<d&&m<p;m+=1)s[m]=h[m+c]},t.copyToChannel=(s,i,a=0)=>{const c=n(a),u=n(i);if(u>=t.numberOfChannels)throw e();const d=t.length,h=t.getChannelData(u),p=s.length;for(let m=c<0?-c:0;m+c<d&&m<p;m+=1)h[m+c]=s[m]}},x9=n=>e=>{e.copyFromChannel=(t=>(s,i,a=0)=>{const c=n(a),u=n(i);if(c<e.length)return t.call(e,s,u,c)})(e.copyFromChannel),e.copyToChannel=(t=>(s,i,a=0)=>{const c=n(a),u=n(i);if(c<e.length)return t.call(e,s,u,c)})(e.copyToChannel)},v9=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",i=>()=>{const a=i.call(e);return a===s?null:a},i=>a=>i.call(e,a===null?s:a))},b9=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const i=t.createBufferSource();e(s,()=>{const u=s.numberOfInputs;for(let d=0;d<u;d+=1)i.connect(s,0,d)},()=>i.disconnect(s))},uE=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),dE=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},bc=(n,e,t,s)=>{let i=n;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:a,set:c}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,{get:t(a),set:s(c)})},w9=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),S9=n=>({...n,channelCount:n.numberOfOutputs}),_9=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},hE=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;hE(n,e,t+1e-7)}},C9=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},j9=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},N9=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},ev=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},fE=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},tv=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},k9=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},T9=n=>{n.start=(e=>(t=0,s=0,i)=>{const a=n.buffer,c=a===null?s:Math.min(a.duration,s);a!==null&&c>a.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,c,i)})(n.start)},pE=(n,e)=>{const t=e.createGain();n.connect(t);const s=(i=>()=>{i.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ro(n,t),n.stop=(i=>{let a=!1;return(c=0)=>{if(a)try{i.call(n,c)}catch{t.gain.setValueAtTime(0,c)}else i.call(n,c),a=!0}})(n.stop)},Io=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},P9=QU(ma),E9=t$(ma),A9=f7($h),mE=new WeakMap,M9=A7(mE),Vs=$$(new Map,new WeakMap),ir=g9(),gE=oq(Vs,ur),nv=E7(En),pn=e9(En,nv,la),R9=a$(gE,St,pn),xt=I7(Uh),Rr=Iq(ir),pt=X7(Rr),yE=new WeakMap,xE=_7(Io),wc=dq(ir),sv=H7(wc),rv=K7(ir),vE=Q7(ir),Jl=fq(ir),qt=A$(YU(GP),e$(P9,E9,Zd,A9,Jd,En,M9,pc,St,ma,kr,la,kd),Vs,U7(hy,Jd,En,St,Xl,kr),ur,qh,Mn,c7(Zd,hy,En,St,Xl,xt,kr,pt),g7(yE,En,Ds),xE,xt,sv,rv,vE,pt,Jl),I9=i$(qt,R9,ur,gE,xt,pt),iv=new WeakSet,$_=lq(ir),bE=n7(new Uint32Array(1)),av=y9(bE,ur),ov=x9(bE),wE=l$(iv,Vs,Mn,$_,Rr,c9($_),av,ov),Wh=n$($n),SE=t9(nv,gc,la),dr=Y$(SE),Oo=uq(Wh,Vs,C9,j9,N9,ev,fE,tv,T9,v9(bc),pE),hr=Jq(M7(gc),SE),O9=d$(dr,Oo,St,hr,pn),Us=M$(XU(HP),yE,Kx,R$,$U,qU,WU,GU,HU,cy,qP,wc,hE),D9=u$(qt,O9,Us,un,Oo,xt,pt,Io),F9=b$(qt,w$,ur,un,hq($n,bc),xt,pt,pn),L9=U$(dr,oE,St,hr,pn),ga=r9(mE),z9=V$(qt,Us,L9,qh,oE,xt,pt,ga),Ni=iq(ma,rv),B9=b9(un,Ni),ki=bq(wc,B9),V9=G$(ki,St,pn),U9=W$(qt,V9,ki,xt,pt),$9=Q$(xc,St,pn),q9=K$(qt,$9,xc,xt,pt,S9),W9=_q(Wh,Oo,$n,Ni),Do=Sq(Wh,Vs,W9,ev,tv),G9=t7(dr,Do,St,hr,pn),H9=e7(qt,Us,G9,Do,xt,pt,Io),_E=Cq(Mn,bc),K9=i7(_E,St,pn),Q9=r7(qt,K9,_E,xt,pt,ga),Y9=h7(dr,lE,St,hr,pn),X9=d7(qt,Us,Y9,lE,xt,pt,ga),CE=jq(Mn),Z9=b7(dr,CE,St,hr,pn),J9=v7(qt,Us,Z9,CE,Mn,xt,pt,ga),eW=T7(dr,$n,St,hr,pn),tW=k7(qt,Us,eW,$n,xt,pt),nW=Pq(qh,un,vc,Mn),Gh=n9(Vs,$n,vc,d9($n,Rr)),sW=V7(Oo,St,Rr,pn,Gh),rW=Nq(nW),iW=z7(qt,rW,sW,xt,pt,ga),aW=S$(Us,ki,Do,vc,Mn,uE,pt,bc),jE=new WeakMap,oW=rq(F9,aW,xE,pt,jE,Io),NE=Oq(Wh,Vs,ev,fE,tv,pE),lW=Hq(dr,NE,St,hr,pn),cW=Gq(qt,Us,NE,lW,xt,pt,Io),kE=Z$(Oo),uW=Uq(kE,un,$n,dE,Ni),Hh=Vq(kE,un,uW,dE,Ni,wc,bc),dW=Fq(Zd,un,ki,$n,vc,Hh,Mn,Jd,uE,Ni),TE=Dq(dW),hW=Yq(dr,ki,Do,$n,TE,St,Rr,hr,pn,Gh),fW=Qq(qt,Us,TE,hW,xt,pt,ga),pW=Lq(ur),mW=Zq(pW,xt,new WeakSet,_9),gW=Bq(ki,xc,$n,Hh,Mn,Ni),PE=zq(gW,Mn),yW=l9(dr,PE,St,hr,pn),xW=o9(qt,Us,PE,yW,xt,pt),vW=m9(Hh,St,pn),bW=p9(qt,un,Hh,vW,xt,pt,ga),EE=Z7(ir),lv=C7(ir),AE=new WeakMap,wW=O7(AE,Rr),SW=EE?JU(Vs,Mn,S7(ir),lv,j7(KU),xt,wW,pt,Jl,new WeakMap,new WeakMap,u9(Jl,Rr),ir):void 0,_W=Y7(sv,pt),CW=l7(iv,Vs,o7,w7,new WeakSet,xt,_W,Yd,Zl,av,ov),ME=z$(SW,I9,wE,D9,z9,U9,q9,H9,Q9,CW,X9,J9,tW,iW,oW,cW,fW,mW,xW,bW),jW=J7(qt,Eq,xt,pt),NW=tq(qt,Aq,xt,pt),kW=nq(qt,Mq,xt,pt),TW=Rq(un,pt),PW=sq(qt,TW,xt),EW=v$(ME,un,Mn,h9,jW,NW,kW,PW,wc),cv=D7(jE),AW=s$(cv),RE=X$(ur),MW=p7(cv),IE=y7(ur),OE=new WeakMap,RW=P7(OE,Ds),IW=vq(RE,ur,un,ki,xc,Do,$n,vc,Mn,IE,lv,RW,Ni),OW=mq(un,IW,$n,Mn,Ni),DW=L$(dr,RE,Oo,ki,xc,Do,$n,MW,IE,lv,St,Jl,Rr,hr,pn,Gh),FW=R7(AE),LW=s9(OE),q_=EE?O$(AW,qt,Us,DW,OW,En,FW,xt,pt,Jl,w9,LW,k9,Io):void 0,zW=a7(Mn,Rr),BW=i9(iv,Vs,nv,cv,Gh,Yd,av,ov),VW=qq(ME,Vs,un,zW,BW),UW=$7(Uh,sv),$W=q7(Hx,rv),qW=W7(Kx,vE),WW=G7(Uh,pt);function ts(n){return n===void 0}function Xe(n){return n!==void 0}function GW(n){return typeof n=="function"}function ar(n){return typeof n=="number"}function pi(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function DE(n){return typeof n=="boolean"}function Un(n){return Array.isArray(n)}function or(n){return typeof n=="string"}function ud(n){return or(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Ge(n,e){if(!n)throw new Error(e)}function us(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function FE(n){!n.isOffline&&n.state!=="running"&&uv('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let LE=!1,W_=!1;function G_(n){LE=n}function HW(n){ts(n)&&LE&&!W_&&(W_=!0,uv("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let zE=console;function KW(...n){zE.log(...n)}function uv(...n){zE.warn(...n)}function QW(n){return new EW(n)}function YW(n,e,t){return new VW(n,e,t)}const Xn=typeof self=="object"?self:null,XW=Xn&&(Xn.hasOwnProperty("AudioContext")||Xn.hasOwnProperty("webkitAudioContext"));function ZW(n,e,t){return Ge(Xe(q_),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof Xn?.BaseAudioContext?Xn?.AudioWorkletNode:q_)(n,e,t)}class JW{constructor(e,t,s,i){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ca(n){return qW(n)}function mi(n){return $W(n)}function Td(n){return WW(n)}function Za(n){return UW(n)}function eG(n){return n instanceof wE}function tG(n,e){return n==="value"||ca(e)||mi(e)||eG(e)}function Yi(n,...e){if(!e.length)return n;const t=e.shift();if(pi(n)&&pi(t))for(const s in t)tG(s,t[s])?n[s]=t[s]:pi(t[s])?(n[s]||Object.assign(n,{[s]:{}}),Yi(n[s],t[s])):Object.assign(n,{[s]:t[s]});return Yi(n,...e)}function nG(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function De(n,e,t=[],s){const i={},a=Array.from(e);if(pi(a[0])&&s&&!Reflect.has(a[0],s)&&(Object.keys(a[0]).some(u=>Reflect.has(n,u))||(Yi(i,{[s]:a[0]}),t.splice(t.indexOf(s),1),a.shift())),a.length===1&&pi(a[0]))Yi(i,a[0]);else for(let c=0;c<t.length;c++)Xe(a[c])&&(i[t[c]]=a[c]);return Yi(n,i)}function sG(n){return n.constructor.getDefaults()}function Ms(n,e){return ts(n)?e:n}function go(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Ir{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Xn&&this.toString()===Xn.TONE_DEBUG_CLASS)&&KW(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ir.version=$P;const dv=1e-6;function yo(n,e){return n>e+dv}function yy(n,e){return yo(n,e)||Ts(n,e)}function sh(n,e){return n+dv<e}function Ts(n,e){return Math.abs(n-e)<dv}function rG(n,e,t){return Math.max(Math.min(n,t),e)}class hs extends Ir{constructor(){super(),this.name="Timeline",this._timeline=[];const e=De(hs.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ge(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ge(yy(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Ts(this._timeline[t].time,e)){for(let s=t;s>=0&&Ts(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&yy(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const i=this._timeline.length;let a=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;s<a;){let c=Math.floor(s+(a-s)/2);const u=this._timeline[c],d=this._timeline[c+1];if(Ts(u[t],e)){for(let h=c;h<this._timeline.length;h++){const p=this._timeline[h];if(Ts(p[t],e))c=h;else break}return c}else{if(sh(u[t],e)&&yo(d[t],e))return c;yo(u[t],e)?a=c:s=c+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let i=this._search(e),a=this._search(t);return i!==-1&&a!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[a].time===t&&(a-=1),this._iterate(s,i,a)):i===-1&&this._iterate(s,0,a),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Ts(this._timeline[s].time,e)){let i=s;for(let a=s;a>=0&&Ts(this._timeline[a].time,e);a--)i=a;this._iterate(a=>{t(a)},i,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const BE=[];function Kh(n){BE.push(n)}function iG(n){BE.forEach(e=>e(n))}const VE=[];function Qh(n){VE.push(n)}function aG(n){VE.forEach(e=>e(n))}class Sc extends Ir{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(i=>{ts(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(t)}),this}once(e,t){const s=(...i)=>{t(...i),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(i=>{if(ts(this._events)&&(this._events={}),this._events.hasOwnProperty(i))if(ts(t))this._events[i]=[];else{const a=this._events[i];for(let c=a.length-1;c>=0;c--)a[c]===t&&a.splice(c,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let i=0,a=s.length;i<a;i++)s[i].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Sc.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class UE extends Sc{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class _c extends UE{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new hs,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=De(_c.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=QW({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new JW(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(iG(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ge(Za(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ge(Za(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ge(Za(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ge(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ge(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ge(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ge(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return ZW(this.rawContext,e,t)}addAudioWorkletModule(e){return Zt(this,void 0,void 0,function*(){Ge(Xe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Zt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Za(this._context)?this._context.resume():Promise.resolve()}close(){return Zt(this,void 0,void 0,function*(){Za(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&aG(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let a=0;a<s.length;a++)s[a]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,i=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),i()},id:s,time:a+t})};return i(),s}}class oG extends UE{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Zt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Nt(n,e){Un(e)?e.forEach(t=>Nt(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function hv(n,e){Un(e)?e.forEach(t=>hv(n,t)):Object.defineProperty(n,e,{writable:!0})}const lt=()=>{};class ht extends Ir{constructor(){super(),this.name="ToneAudioBuffer",this.onload=lt;const e=De(ht.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,or(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:lt,onload:lt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Zn().sampleRate}set(e){return e instanceof ht?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Zt(this,void 0,void 0,function*(){const t=ht.load(e).then(s=>{this.set(s),this.onload(this)});ht.downloads.push(t);try{yield t}finally{const s=ht.downloads.indexOf(t);ht.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Un(e)&&e[0].length>0,s=t?e.length:1,i=t?e[0].length:e.length,a=Zn(),c=a.createBuffer(s,i,a.sampleRate),u=!t&&s===1?[e]:e;for(let d=0;d<s;d++)c.copyToChannel(u[d],d);return this._buffer=c,this}toMono(e){if(ar(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let i=0;i<s;i++){const a=this.toArray(i);for(let c=0;c<a.length;c++)t[c]+=a[c]}t=t.map(i=>i/s),this.fromArray(t)}return this}toArray(e){if(ar(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ge(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),i=Math.floor(t*this.sampleRate);Ge(s<i,"The start time must be less than the end time");const a=i-s,c=Zn().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let u=0;u<this.numberOfChannels;u++)c.copyToChannel(this.getChannelData(u).subarray(s,i),u);return new ht(c)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ht().fromArray(e)}static fromUrl(e){return Zt(this,void 0,void 0,function*(){return yield new ht().load(e)})}static load(e){return Zt(this,void 0,void 0,function*(){const t=ht.baseUrl===""||ht.baseUrl.endsWith("/")?ht.baseUrl:ht.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield Zn().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Zt(this,void 0,void 0,function*(){for(yield Promise.resolve();ht.downloads.length;)yield ht.downloads[0]})}}ht.baseUrl="";ht.downloads=[];class fv extends _c{constructor(){super({clockSource:"offline",context:Td(arguments[0])?arguments[0]:YW(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Td(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Td(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Zt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(){return Zt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new ht(t)})}close(){return Promise.resolve()}}const $E=new oG;let Wi=$E;function Zn(){return Wi===$E&&XW&&lG(new _c),Wi}function lG(n,e=!1){e&&Wi.dispose(),Za(n)?Wi=new _c(n):Td(n)?Wi=new fv(n):Wi=n}function pv(){return Wi.resume()}if(Xn&&!Xn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${$P} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function cG(n){return Math.pow(10,n/20)}function uG(n){return 20*(Math.log(n)/Math.LN10)}function mv(n){return Math.pow(2,n/12)}let Yh=440;function dG(){return Yh}function hG(n){Yh=n}function xy(n){return Math.round(qE(n))}function qE(n){return 69+12*Math.log2(n/Yh)}function fG(n){return Yh*Math.pow(2,(n-69)/12)}class gv extends Ir{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),i=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/s)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(i+=this._beatsToUnits(parseFloat(s)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof gv&&this.fromType(this._val),ts(this._val))return this._noArg();if(or(this._val)&&ts(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(pi(this._val)){let e=0;for(const t in this._val)if(Xe(this._val[t])){const s=this._val[t],i=new this.constructor(this.context,t).valueOf()*s;e+=i}return e}if(Xe(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return or(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class As extends gv{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new As(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),u=Math.round(i/s)*s-i;return i+u*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let a=1;a<9;a++){const c=Math.pow(2,a);t.push(c+"n."),t.push(c+"n"),t.push(c+"t")}t.push("0");let s=t[0],i=new As(this.context,t[0]).toSeconds();return t.forEach(a=>{const c=new As(this.context,a).toSeconds();Math.abs(c-e)<Math.abs(i-e)&&(s=a,i=c)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let i=t%1*4;t=Math.floor(t)%this._getTimeSignature();const a=i.toString();return a.length>3&&(i=parseFloat(parseFloat(a).toFixed(3))),[s,t,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return xy(this.toFrequency())}_now(){return this.context.now()}}class Jn extends As{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return dG()}static set A4(e){hG(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Jn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const i=pG[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?i:Jn.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(i*=this._beatsToUnits(parseFloat(s)/4)),i}}})}transpose(e){return new Jn(this.context,this.valueOf()*mv(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return xy(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Jn.A4);let s=Math.round(12*t)+57;const i=Math.floor(s/12);return i<0&&(s+=-12*i),mG[s%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return fG(e)}static ftom(e){return xy(e)}}const pG={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},mG=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function gG(n,e){return new Jn(Zn(),n,e)}class oo extends As{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class bn extends Ir{constructor(){super();const e=De(bn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Zn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return HW(e),new As(this.context,e).toSeconds()}toFrequency(e){return new Jn(this.context,e).toFrequency()}toTicks(e){return new oo(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{ts(e[s])&&delete t[s]}),t}get(){const e=sG(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Xe(s)&&Xe(s.value)&&Xe(s.setValueAtTime)?e[t]=s.value:s instanceof bn?e[t]=s._getPartialProperties(e[t]):Un(s)||ar(s)||or(s)||DE(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Xe(this[t])&&(this[t]&&Xe(this[t].value)&&Xe(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof bn?this[t].set(e[t]):this[t]=e[t])}),this}}class Cc extends hs{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return us(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let i=s;i>=0;i--){const a=this._timeline[i];if(a.state===e)return a}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let i=s;i<this._timeline.length;i++){const a=this._timeline[i];if(a.state===e)return a}}}class ot extends bn{constructor(){const e=De(ot.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ge(Xe(e.param)&&(ca(e.param)||e.param instanceof ot),"param must be an AudioParam");!ca(e.param);)e.param=e.param._param;this._swappable=Xe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new hs(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Xe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(bn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Xe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Xe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Xe(this.maxValue)&&Xe(this.minValue)&&us(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?cG(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?uG(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),i=this._fromType(e);return Ge(isFinite(i)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),i=this._events.get(t);let a=this._initialValue;if(i===null)a=this._initialValue;else if(i.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const c=this._events.getBefore(i.time);let u;c===null?u=this._initialValue:u=c.value,i.type==="setTargetAtTime"&&(a=this._exponentialApproach(i.time,u,i.value,i.constant,t))}else if(s===null)a=i.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let c=i.value;if(i.type==="setTargetAtTime"){const u=this._events.getBefore(i.time);u===null?c=this._initialValue:c=u.value}s.type==="linearRampToValueAtTime"?a=this._linearInterpolate(i.time,c,s.time,s.value,t):a=this._exponentialInterpolate(i.time,c,s.time,s.value,t)}else a=i.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),i=this.toSeconds(t);return Ge(isFinite(s)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:i,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(s,i),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Ts(s,0)?this._minOutput:s,this._assertRange(s);const i=this.toSeconds(t);return Ge(isFinite(s)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(s,i),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const i=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const i=this._fromType(e);Ge(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(t);return this._assertRange(i),Ge(isFinite(i)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:a,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,a,s),this._param.setTargetAtTime(i,a,s),this}setValueCurveAtTime(e,t,s,i=1){s=this.toSeconds(s),t=this.toSeconds(t);const a=this._fromType(e[0])*i;this.setValueAtTime(this._toType(a),t);const c=s/(e.length-1);for(let u=1;u<e.length;u++){const d=this._fromType(e[u])*i;this.linearRampToValueAtTime(this._toType(d),t+u*c)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ge(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Ge(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const i=this._events.get(t),a=this._events.getAfter(t);return i&&Ts(i.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const i=this._events.getAfter(s.time),a=i?i.time:t+2,c=(a-t)/10;for(let u=t;u<a;u+=c)e.linearRampToValueAtTime(this.getValueAtTime(u),u)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){Ge(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,i,a){return s+(t-s)*Math.exp(-(a-e)/i)}_linearInterpolate(e,t,s,i,a){return t+(i-t)*((a-e)/(s-e))}_exponentialInterpolate(e,t,s,i,a){return t*Math.pow(i/t,(a-e)/(s-e))}}class He extends bn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Xe(this.input)?ca(this.input)||this.input instanceof ot?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Xe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Xe(e)&&(e instanceof He||mi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ge(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return ya(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return uv("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return WE(this,e,t,s),this}chain(...e){return ec(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Xe(this.input)&&(this.input instanceof He?this.input.dispose():mi(this.input)&&this.input.disconnect()),Xe(this.output)&&(this.output instanceof He?this.output.dispose():mi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ec(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof He?t.connect(s):mi(t)&&ya(t,s),s),e)}function ya(n,e,t=0,s=0){for(Ge(Xe(n),"Cannot connect from undefined node"),Ge(Xe(e),"Cannot connect to undefined node"),(e instanceof He||mi(e))&&Ge(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ge(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof He||e instanceof ot;)Xe(e.input)&&(e=e.input);for(;n instanceof He;)Xe(n.output)&&(n=n.output);ca(e)?n.connect(e,t):n.connect(e,t,s)}function WE(n,e,t=0,s=0){if(Xe(e))for(;e instanceof He;)e=e.input;for(;!mi(n);)Xe(n.output)&&(n=n.output);ca(e)?n.disconnect(e,t):mi(e)?n.disconnect(e,t,s):n.disconnect()}class Ft extends He{constructor(){const e=De(Ft.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ot({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Nt(this,"gain")}static getDefaults(){return Object.assign(He.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class xo extends He{constructor(e){super(e),this.onended=lt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ft({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(He.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:lt})}_startGain(e,t=1){Ge(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ge(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==lt&&(this.onended(this),this.onended=lt,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ge(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=lt,this}}class yv extends xo{constructor(){const e=De(yv.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ya(this._source,this._gainNode),this.offset=new ot({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(xo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ft extends He{constructor(){const e=De(ft.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new yv({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(He.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return Xh(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,i){return this._param.setValueCurveAtTime(e,t,s,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Xh(n,e,t,s){(e instanceof ot||ca(e)||e instanceof ft&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ft&&(e.overridden=!0)),ya(n,e,t,s)}class xv extends ot{constructor(){const e=De(xv.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new hs(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ot.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const i=this._fromType(e),a=this._events.get(t),c=Math.round(Math.max(1/s,1));for(let u=0;u<=c;u++){const d=s*u+t,h=this._exponentialApproach(a.time,a.value,i,s,d);this.linearRampToValueAtTime(this._toType(h),d)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const i=this._events.get(s),a=this._events.previousEvent(i),c=this._getTicksUntilEvent(a,s);return i.ticks=Math.max(c,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const i=this._events.get(s),a=this._events.previousEvent(i),c=this._getTicksUntilEvent(a,s);return i.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),i=this._events.get(t),a=Math.round(Math.max((t-i.time)*10,1)),c=(t-i.time)/a;for(let u=0;u<=a;u++){const d=c*u+i.time,h=this._exponentialInterpolate(i.time,i.value,t,s,d);this.linearRampToValueAtTime(this._toType(h),d)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ts(e.ticks)){const c=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(c,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(t));const a=this._events.get(t);return a&&a.time===t&&a.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+i)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const i=this._fromType(this.getValueAtTime(t.time)),c=(this._fromType(this.getValueAtTime(s.time))-i)/(s.time-t.time),u=Math.sqrt(Math.pow(i,2)-2*c*(t.ticks-e)),d=(-i+u)/c,h=(-i-u)/c;return(d>0?d:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),i=this.toSeconds(e),a=this.getTicksAtTime(s);return this.getTicksAtTime(s+i)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class vv extends ft{constructor(){const e=De(vv.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new xv({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class bv extends bn{constructor(){const e=De(bv.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Cc,this._tickOffset=new hs,this._ticksAtTime=new hs,this._secondsAtTime=new hs,this.frequency=new vv({context:this.context,units:e.units,value:e.frequency}),Nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},bn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Xe(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),i=this._ticksAtTime.get(t),a={state:"paused",time:t};this._state.add(a);let c=i||s,u=i?i.ticks:0,d=null;return this._state.forEachBetween(c.time,t+this.sampleTime,h=>{let p=c.time;const m=this._tickOffset.get(h.time);m&&m.time>=c.time&&(u=m.ticks,p=m.time),c.state==="started"&&h.state!=="started"&&(u+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(p),h.time!==a.time&&(d={state:h.state,time:h.time,ticks:u})),c=h}),this._state.remove(a),d&&this._ticksAtTime.add(d),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const i=this._secondsAtTime.get(e);let a=i||t,c=i?i.seconds:0,u=null;return this._state.forEachBetween(a.time,e+this.sampleTime,d=>{let h=a.time;const p=this._tickOffset.get(d.time);p&&p.time>=a.time&&(c=p.seconds,h=p.time),a.state==="started"&&d.state!=="started"&&(c+=d.time-h,d.time!==s.time&&(u={state:d.state,time:d.time,seconds:c})),a=d}),this._state.remove(s),u&&this._secondsAtTime.add(u),c}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),i=this._state.get(t),a=Math.max(s.time,i.time),c=this.frequency.getTicksAtTime(a)+e-s.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(e,t,s){let i=this._state.get(e);this._state.forEachBetween(e,t,c=>{i&&i.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),c.time-this.sampleTime,s),i=c});let a=null;if(i&&i.state==="started"){const c=Math.max(i.time,e),u=this.frequency.getTicksAtTime(c),d=this.frequency.getTicksAtTime(i.time),h=u-d;let p=Math.ceil(h)-h;p=Ts(p,1)?0:p;let m=this.frequency.getTimeOfTick(u+p);for(;m<t;){try{s(m,Math.round(this.getTicksAtTime(m)))}catch(y){a=y;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class jc extends bn{constructor(){const e=De(jc.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=lt,this._lastUpdate=0,this._state=new Cc("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new bv({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(bn.getDefaults(),{callback:lt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){FE(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const i=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,i);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,i)=>{this.callback(s,i)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Sc.mixin(jc);class Fo extends He{constructor(){const e=De(Fo.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ft({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Nt(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(He.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class wv extends He{constructor(){const e=De(wv.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Fo({context:this.context}),this.output=new Ft({context:this.context}),this.volume=this.input.volume,ec(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(He.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ec(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Kh(n=>{n.destination=new wv({context:n})});Qh(n=>{n.destination.dispose()});class yG extends He{constructor(){super(...arguments),this.name="Listener",this.positionX=new ot({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ot({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ot({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ot({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ot({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ot({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ot({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ot({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ot({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(He.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Kh(n=>{n.listener=new yG({context:n})});Qh(n=>{n.listener.dispose()});class Sv extends Ir{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=De(Sv.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:lt,onload:lt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ge(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=lt,i=lt){return or(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ht(this.baseUrl+t,s,i))):this._buffers.set(e.toString(),new ht(t,s,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class It extends oo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class xG extends bn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new hs,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Kh(n=>{n.draw=new xG({context:n})});Qh(n=>{n.draw.dispose()});class vG extends Ir{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ge(Xe(e.time),"Events must have a time property"),Ge(Xe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new bG(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,i=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,i=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,i=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,i=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,i=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),t!==null?s?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),t!==null?s?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let i=1;i<t.length;i++)t[i].low>s.low&&(s=t[i]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(i=>{i.event&&t(i.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(i=>{i.event&&t(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class bG{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class wG extends Ir{constructor(e){super(),this.name="TimelineValue",this._timeline=new hs({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Er extends He{constructor(){super(De(Er.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return Xh(this,e,t,s),this}}class Nc extends Er{constructor(){const e=De(Nc.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Un(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):GW(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ft.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let i=0,a=t;i<a;i++){const c=i/(a-1)*2-1;s[i]=e(c,i)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Ge(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class _v extends Er{constructor(){const e=De(_v.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Nc({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Er.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class bi{constructor(e,t){this.id=bi._eventId++,this._remainderTime=0;const s=Object.assign(bi.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:lt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}bi._eventId=0;class Cv extends bi{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Cv.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},bi.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return sh(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new It(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){sh(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new It(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);yo(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Zh extends bn{constructor(){const e=De(Zh.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new wG(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new hs,this._repeatedEvents=new vG,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new jc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Nt(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(bn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(s*Math.PI)*this._swingAmount;e+=new It(this.context,this._swingTicks*2/3).toSeconds()*i}G_(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),G_(!1)}schedule(e,t){const s=new bi(this,{callback:e,time:new oo(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,i=1/0){const a=new Cv(this,{callback:e,duration:new As(this.context,i).toTicks(),interval:new As(this.context,t).toTicks(),time:new oo(this.context,s).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,t){const s=new bi(this,{callback:e,once:!0,time:new oo(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new It(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Xe(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Un(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new As(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new As(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new It(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new It(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),i=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),a=t+i;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),i=e-s%e;return this._clock.nextTickTime(i,t)}}syncSignal(e,t){const s=this.now();let i=this.bpm,a=1/(60/i.getValueAtTime(s)/this.PPQ),c=[];if(e.units==="time"){const d=.015625/a,h=new Ft(d),p=new _v(-1),m=new Ft(d);i.chain(h,p,m),i=m,a=1/a,c=[h,p,m]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/a:t=0);const u=new Ft(t);return i.connect(u),u.connect(e._param),c.push(u),this._syncedSignals.push({initial:e.value,nodes:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(i=>i.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),hv(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Sc.mixin(Zh);Kh(n=>{n.transport=new Zh({context:n})});Qh(n=>{n.transport.dispose()});class dn extends He{constructor(e){super(e),this.input=void 0,this._state=new Cc("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=lt,this._syncedStop=lt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Fo({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Nt(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(He.getDefaults(),{mute:!1,onstop:lt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let i=ts(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")Ge(yo(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,s);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const a=this._state.get(i);a&&(a.offset=this.toSeconds(Ms(t,0)),a.duration=s?this.toSeconds(s):void 0);const c=this.context.transport.schedule(u=>{this._start(u,t,s)},i);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else FE(this.context),this._start(i,t,s);return this}stop(e){let t=ts(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Xe(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(yo(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const i=t-this.toSeconds(s.time);let a;s.duration&&(a=this.toSeconds(s.duration)-i),this._start(e,this.toSeconds(s.offset)+i,a)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=lt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Lo extends xo{constructor(){const e=De(Lo.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ya(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ot({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ht(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(xo.getDefaults(),{url:new ht,loop:!1,loopEnd:0,loopStart:0,onload:lt,onerror:lt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,i=1){Ge(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,i),this.loop?t=Ms(t,this.loopStart):t=Ms(t,0);let c=Math.max(this.toSeconds(t),0);if(this.loop){const u=this.toSeconds(this.loopEnd)||this.buffer.duration,d=this.toSeconds(this.loopStart),h=u-d;yy(c,u)&&(c=(c-d)%h+d),Ts(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,sh(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,c)),Xe(s)){let u=this.toSeconds(s);u=Math.max(u,0),this.stop(a+u)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class rh extends dn{constructor(){const e=De(rh.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(dn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ge(e in H_,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=H_[this._type];this._source=new Lo({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Ya=44100*5,bg=2,Sr={brown:null,pink:null,white:null},H_={get brown(){if(!Sr.brown){const n=[];for(let e=0;e<bg;e++){const t=new Float32Array(Ya);n[e]=t;let s=0;for(let i=0;i<Ya;i++){const a=Math.random()*2-1;t[i]=(s+.02*a)/1.02,s=t[i],t[i]*=3.5}}Sr.brown=new ht().fromArray(n)}return Sr.brown},get pink(){if(!Sr.pink){const n=[];for(let e=0;e<bg;e++){const t=new Float32Array(Ya);n[e]=t;let s,i,a,c,u,d,h;s=i=a=c=u=d=h=0;for(let p=0;p<Ya;p++){const m=Math.random()*2-1;s=.99886*s+m*.0555179,i=.99332*i+m*.0750759,a=.969*a+m*.153852,c=.8665*c+m*.3104856,u=.55*u+m*.5329522,d=-.7616*d-m*.016898,t[p]=s+i+a+c+u+d+h+m*.5362,t[p]*=.11,h=m*.115926}}Sr.pink=new ht().fromArray(n)}return Sr.pink},get white(){if(!Sr.white){const n=[];for(let e=0;e<bg;e++){const t=new Float32Array(Ya);n[e]=t;for(let s=0;s<Ya;s++)t[s]=Math.random()*2-1}Sr.white=new ht().fromArray(n)}return Sr.white}};function xa(n,e){return Zt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new fv(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class jv extends xo{constructor(){const e=De(jv.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ya(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ot({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(xo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class jt extends dn{constructor(){const e=De(jt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),Nt(this,"frequency"),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),Nt(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(dn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new jv({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return jt._periodicWaveCache.find(t=>t.phase===this._phase&&nG(t.partials,this._partials));{const e=jt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Xe(s)){const{partials:i,wave:a}=s;this._wave=a,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,a]=this._getRealImaginary(e,this._phase),c=this.context.createPeriodicWave(i,a);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),jt._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),jt._periodicWaveCache.length>100&&jt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){us(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const i=new Float32Array(e);this._partials.forEach((a,c)=>i[c]=a),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(e,t){let i=2048;const a=new Float32Array(i),c=new Float32Array(i);let u=1;if(e==="custom"){if(u=this._partials.length+1,this._partialCount=this._partials.length,i=u,this._partials.length===0)return[a,c]}else{const d=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);d?(u=parseInt(d[2],10)+1,this._partialCount=parseInt(d[2],10),e=d[1],u=Math.max(u,2),i=u):this._partialCount=0,this._partials=[]}for(let d=1;d<i;++d){const h=2/(d*Math.PI);let p;switch(e){case"sine":p=d<=u?1:0,this._partials[d-1]=p;break;case"square":p=d&1?2*h:0,this._partials[d-1]=p;break;case"sawtooth":p=h*(d&1?1:-1),this._partials[d-1]=p;break;case"triangle":d&1?p=2*(h*h)*(d-1>>1&1?-1:1):p=0,this._partials[d-1]=p;break;case"custom":p=this._partials[d-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(a[d]=-p*Math.sin(t*d),c[d]=p*Math.cos(t*d)):(a[d]=0,c[d]=0)}return[a,c]}_inverseFFT(e,t,s){let i=0;const a=e.length;for(let c=0;c<a;c++)i+=e[c]*Math.cos(c*s)+t[c]*Math.sin(c*s);return i}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const i=Math.PI*2,a=32;for(let c=0;c<a;c++)s=Math.max(this._inverseFFT(e,t,c/a*i),s);return rG(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}jt._periodicWaveCache=[];class GE extends Er{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Nc({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class wi extends ft{constructor(){const e=De(wi.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ft({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Jh extends dn{constructor(){const e=De(Jh.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new GE({context:this.context}),this._modulationNode=new Ft({context:this.context}),this._carrier=new jt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new jt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new wi({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Nt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(jt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class kc extends dn{constructor(){const e=De(kc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ft({context:this.context,gain:0}),this._carrier=new jt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new jt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new wi({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new wi({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Nt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(jt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Tc extends dn{constructor(){const e=De(Tc.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ft({context:this.context,gain:0}),this._thresh=new Nc({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new ft({context:this.context,units:"audioRange",value:e.width}),this._triangle=new jt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Nt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(dn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ef extends dn{constructor(){const e=De(ef.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(jt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((i,a)=>i.detune.value=t+s*a)}}get count(){return this._oscillators.length}set count(e){if(us(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new jt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):lt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class tf extends dn{constructor(){const e=De(tf.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new wi({context:this.context,value:2}),this._pulse=new Tc({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new jt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Nt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(dn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const K_={am:Jh,fat:ef,fm:kc,oscillator:jt,pulse:Tc,pwm:tf};class ih extends dn{constructor(){const e=De(ih.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),Nt(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(jt.getDefaults(),kc.getDefaults(),Jh.getDefaults(),ef.getDefaults(),Tc.getDefaults(),tf.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=K_[e],s=this.now();if(this._oscillator){const i=this._oscillator;i.stop(s),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof K_[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&ar(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&ar(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&or(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Zt(this,arguments,void 0,function*(e=1024){return xa(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Nv extends ft{constructor(){super(De(Nv.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Ft({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ec(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class nf extends Er{constructor(){const e=De(nf.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new wi({context:this.context,value:e.max-e.min}),this._add=this.output=new Nv({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Er.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class kv extends Er{constructor(){super(De(kv.getDefaults(),arguments)),this.name="Zero",this._gain=new Ft({context:this.context}),this.output=this._gain,this.input=void 0,ya(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),WE(this.context.getConstant(0),this._gain),this}}class Tv extends He{constructor(){const e=De(Tv.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ot.prototype._fromType,this._toType=ot.prototype._toType,this._is=ot.prototype._is,this._clampValue=ot.prototype._clampValue,this._oscillator=new jt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ft({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new ft({context:this.context,units:"audioRange",value:0}),this._zeros=new kv({context:this.context}),this._a2g=new GE({context:this.context}),this._scaler=this.output=new nf({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Nt(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(jt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,s=this.max;this._units=e,this.min=t,this.max=s}get state(){return this._oscillator.state}connect(e,t,s){return(e instanceof ot||e instanceof ft)&&(this.convert=e.convert,this.units=e.units),Xh(this,e,t,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function HE(n,e=1/0){const t=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){us(a,n,e),t.set(this,a)}})}}function Or(n,e=1/0){const t=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){us(this.toSeconds(a),n,e),t.set(this,a)}})}}class sf extends dn{constructor(){const e=De(sf.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new ht({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(dn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:lt,onerror:lt,playbackRate:1,reverse:!1})}load(e){return Zt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=lt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Ms(t,this._loopStart):t=Ms(t,0);const i=this.toSeconds(t),a=s;s=Ms(s,Math.max(this._buffer.duration-i,0));let c=this.toSeconds(s);c=c/this._playbackRate,e=this.toSeconds(e);const u=new Lo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+c),this._state.setStateAtTime("stopped",e+c,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&ts(a)?u.start(e,i):u.start(e,i,c-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const i=this.toSeconds(e);this._stop(s),this._start(s,i)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&us(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&us(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}zs([Or(0)],sf.prototype,"fadeIn",void 0);zs([Or(0)],sf.prototype,"fadeOut",void 0);class Pv extends dn{constructor(){const e=De(Pv.getDefaults(),arguments,["url","onload"]);super(e),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new ht({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new jc({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(dn.getDefaults(),{onload:lt,onerror:lt,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,t,s){t=Ms(t,0),t=this.toSeconds(t),e=this.toSeconds(e);const i=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,t/i),s&&this.stop(e+this.toSeconds(s))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){this._stop(e),this._start(e,t,s)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(t=>{t.fadeOut=0,t.stop(e)}),this.onstop(this)}_tick(e){const t=this._clock.getTicksAtTime(e),s=t*this._grainSize;if(this.log("offset",s),!this.loop&&s>this.buffer.duration){this.stop(e);return}const i=s<this._overlap?0:this._overlap,a=new Lo({context:this.context,url:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:mv(this.detune/100)}).connect(this.output);a.start(e,this._grainSize*t),a.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(a),a.onended=()=>{const c=this._activeSources.indexOf(a);c!==-1&&this._activeSources.splice(c,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){us(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&us(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&us(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){const t=this.toSeconds(e);us(t,0),this._overlap=t}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class Fs extends He{constructor(){const e=De(Fs.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ft({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(He.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(or(e))return e;{let s;for(s in dd)if(dd[s][t]===e)return s;return e}}_setCurve(e,t,s){if(or(s)&&Reflect.has(dd,s)){const i=dd[s];pi(i)?e!=="_decayCurve"&&(this[e]=i[t]):this[e]=i}else if(Un(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let i=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),c=this.getValueAtTime(e);if(c>0){const u=1/i;i=(1-c)/u}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,i,e);else{this._sig.cancelAndHoldAtTime(e);let u=this._attackCurve;for(let d=1;d<u.length;d++)if(u[d-1]<=c&&c<=u[d]){u=this._attackCurve.slice(d),u[0]=c;break}this._sig.setValueCurveAtTime(u,e,i,t)}if(a&&this.sustain<1){const u=t*this.sustain,d=e+i;this.log("decay",d),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(u,a+d):this._sig.exponentialApproachValueAtTime(u,d,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Ge(Un(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return Xh(this,e,t,s),this}asArray(){return Zt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new fv(1,t,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=i+this.toSeconds(this.release),c=a*.1,u=a+c,d=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/u,decay:t*this.toSeconds(this.decay)/u,release:t*this.toSeconds(this.release)/u,context:s}));return d._sig.toDestination(),d.triggerAttackRelease(t*(i+c)/u,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}zs([Or(0)],Fs.prototype,"attack",void 0);zs([Or(0)],Fs.prototype,"decay",void 0);zs([HE(0,1)],Fs.prototype,"sustain",void 0);zs([Or(0)],Fs.prototype,"release",void 0);const dd=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[],a=6.4;for(e=0;e<127;e++){t=e/127;const y=Math.sin(t*(Math.PI*2)*a-Math.PI/2)+1;i[e]=y/10+t*.83}i[127]=1;const c=[],u=5;for(e=0;e<128;e++)c[e]=Math.ceil(e/127*u)/u;const d=[];for(e=0;e<128;e++)t=e/127,d[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/127;const y=Math.pow(t,3)*4+.2,b=Math.cos(y*Math.PI*2*t);h[e]=Math.abs(b*(1-t))}function p(y){const b=new Array(y.length);for(let _=0;_<y.length;_++)b[_]=1-y[_];return b}function m(y){return y.slice(0).reverse()}return{bounce:{In:p(h),Out:h},cosine:{In:s,Out:m(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:p(i)},sine:{In:d,Out:p(d)},step:{In:c,Out:p(c)}}})();class Si extends He{constructor(){const e=De(Si.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Fo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Nt(this,"volume")}static getDefaults(){return Object.assign(He.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...i)=>{const a=i[t],c=this.context.transport.schedule(u=>{i[t]=u,s.apply(this,i)},a);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,i){const a=this.toSeconds(s),c=this.toSeconds(t);return this.triggerAttack(e,a,i),this.triggerRelease(a+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class _i extends Si{constructor(){const e=De(_i.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Si.getDefaults(),{detune:0,onsilence:lt,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,s),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),i=e instanceof Jn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,a,s)}else this.frequency.setValueAtTime(i,s);return this}}zs([Or(0)],_i.prototype,"portamento",void 0);class Pc extends Fs{constructor(){super(De(Pc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ft({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class tc extends _i{constructor(){const e=De(tc.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new ih(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Pc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Nt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(_i.getDefaults(),{envelope:Object.assign(go(Fs.getDefaults(),Object.keys(He.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(go(ih.getDefaults(),[...Object.keys(dn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ah extends He{constructor(){const e=De(ah.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ot({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new ot({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(He.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Ge(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let c=0;c<e;c++){const d=Math.pow(c/e,2)*19980+20;t[c]=d}const s=new Float32Array(e),i=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(t,s,i),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class rf extends He{constructor(){const e=De(rf.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Ft({context:this.context}),this.output=new Ft({context:this.context}),this._filters=[],this._filters=[],this.Q=new ft({context:this.context,units:"positive",value:e.Q}),this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this.gain=new ft({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Nt(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(He.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Ge(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=ar(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let i=s.indexOf(t);Ge(i!==-1,`rolloff can only be ${s.join(", ")}`),i+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(i);for(let a=0;a<i;a++){const c=new ah({context:this.context});c.type=this._type,this.frequency.connect(c.frequency),this.detune.connect(c.detune),this.Q.connect(c.Q),this.gain.connect(c.gain),this._filters[a]=c}this._internalChannels=this._filters,ec(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new ah({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((a,c)=>s[c]*=a)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),hv(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const Q_=[1,1.483,1.932,2.546,2.63,3.897];class $i extends _i{constructor(){const e=De($i.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new ft({context:this.context,units:"cents",value:e.detune}),this.frequency=new ft({context:this.context,units:"frequency"}),this._amplitude=new Ft({context:this.context,gain:0}).connect(this.output),this._highpass=new rf({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<Q_.length;t++){const s=new kc({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:t===0?()=>this.onsilence(this):lt,type:"square"});s.connect(this._highpass),this._oscillators[t]=s;const i=new wi({context:this.context,value:Q_[t]});this._freqMultipliers[t]=i,this.frequency.chain(i,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new nf({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Fs({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return Yi(_i.getDefaults(),{envelope:Object.assign(go(Fs.getDefaults(),Object.keys(He.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,t=1){return this.envelope.triggerAttack(e,t),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class ci extends tc{constructor(){const e=De(ci.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Nt(this,["oscillator","envelope"])}static getDefaults(){return Yi(_i.getDefaults(),tc.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),i=this.toFrequency(e instanceof Jn?e.toFrequency():e),a=i*this.octaves;return this.oscillator.frequency.setValueAtTime(a,s),this.oscillator.frequency.exponentialRampToValueAtTime(i,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}zs([HE(0)],ci.prototype,"octaves",void 0);zs([Or(0)],ci.prototype,"pitchDecay",void 0);class Ev extends Si{constructor(){const e=De(Ev.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new rh(Object.assign({context:this.context},e.noise)),this.envelope=new Pc(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Si.getDefaults(),{envelope:Object.assign(go(Fs.getDefaults(),Object.keys(He.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(go(rh.getDefaults(),Object.keys(dn.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,s),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const KE=new Set;function Av(n){KE.add(n)}function QE(n,e){const t=`registerProcessor("${n}", ${e})`;KE.add(t)}const SG=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Av(SG);const _G=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Av(_G);const CG=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Av(CG);const jG="feedback-comb-filter",NG=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;QE(jG,NG);class af extends Si{constructor(){const e=De(af.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const i=parseInt(s,10);if(Ge(ud(s)||ar(i)&&isFinite(i),`url key is neither a note or midi pitch: ${s}`),ud(s)){const a=new Jn(this.context,s).toMidi();t[a]=e.urls[s]}else ar(i)&&isFinite(i)&&(t[i]=e.urls[i])}),this._buffers=new Sv({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Si.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:lt,onerror:lt,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=qE(new Jn(this.context,i).toFrequency()),c=Math.round(a),u=a-c,d=this._findClosest(c),h=c-d,p=this._buffers.get(h),m=mv(d+u),y=new Lo({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:m}).connect(this.output);y.start(t,0,p.duration/m,s),Un(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const b=this._activeSources.get(c),_=b.indexOf(y);_!==-1&&b.splice(_,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=new Jn(this.context,s).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const a=this._activeSources.get(i);t=this.toSeconds(t),a.forEach(c=>{c.stop(t)}),this._activeSources.set(i,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,i=1){const a=this.toSeconds(s);return this.triggerAttack(e,a,i),Un(t)?(Ge(Un(e),"notes must be an array when duration is array"),e.forEach((c,u)=>{const d=t[Math.min(u,t.length-1)];this.triggerRelease(c,a+this.toSeconds(d))})):this.triggerRelease(e,a+this.toSeconds(t)),this}add(e,t,s){if(Ge(ud(e)||isFinite(e),`note must be a pitch or midi: ${e}`),ud(e)){const i=new Jn(this.context,e).toMidi();this._buffers.add(i,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}zs([Or(0)],af.prototype,"attack",void 0);zs([Or(0)],af.prototype,"release",void 0);class ui extends bn{constructor(){const e=De(ui.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Cc("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(bn.getDefaults(),{callback:lt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,t=>{let s;if(t.state==="started"){t.id!==-1&&this.context.transport.clear(t.id);const i=t.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||ar(this._loop)&&this._loop>1){s=1/0,ar(this._loop)&&(s=this._loop*this._getLoopDuration());const a=this._state.getAfter(i);a!==null&&(s=Math.min(s,a.time-i)),s!==1/0&&(s=new It(this.context,s));const c=new It(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),c,new It(this.context,i),s)}else t.id=this.context.transport.schedule(this._tick.bind(this),new It(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return this._state.getValueAtTime(t)==="stopped"&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if(this._state.getValueAtTime(t)==="started"){this._state.setStateAtTime("stopped",t,{id:-1});const s=this._state.getBefore(t);let i=t;s!==null&&(i=s.time),this._rescheduleEvents(i)}return this}cancel(e){e=Ms(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,s=>{this.context.transport.clear(s.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(t)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;DE(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new It(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new It(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(t!==null&&t.state==="started"){const s=this._getLoopDuration();return(e-t.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class oh extends ui{constructor(){const e=De(oh.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new Cc("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(t=>{Un(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(ui.getDefaults(),{events:[]})}start(e,t){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){t=Ms(t,this._loop?this._loopStart:0),this._loop?t=Ms(t,this._loopStart):t=Ms(t,0);const i=this.toTicks(t);this._state.add({id:-1,offset:i,state:"started",time:s}),this._forEach(a=>{this._startNote(a,s,i)})}return this}_startNote(e,t,s){t-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(t+=this._getLoopDuration()),e.start(new It(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new It(this.context,t))):e.startOffset>=s&&e.start(new It(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(s=>{s.stop(e)}),this}at(e,t){const s=new oo(this.context,e).toTicks(),i=new It(this.context,1).toSeconds(),a=this._events.values();let c=a.next();for(;!c.done;){const u=c.value;if(Math.abs(s-u.startOffset)<i)return Xe(t)&&(u.value=t),u;c=a.next()}return Xe(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(t=e,e=t.time);const s=this.toTicks(e);let i;return t instanceof ui?(i=t,i.callback=this._tick.bind(this)):i=new ui({callback:this._tick.bind(this),context:this.context,value:t}),i.startOffset=s,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(e){this._state.forEach(t=>{t.state==="started"?this._startNote(e,t.time,t.offset):e.stop(new It(this.context,t.time))})}remove(e,t){return pi(e)&&e.hasOwnProperty("time")&&(t=e,e=t.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(ts(t)||Xe(t)&&s.value===t)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof oh?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(s=>{s[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new It(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new It(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class zl extends ui{constructor(){const e=De(zl.getDefaults(),arguments,["callback","events","subdivision"]);super(e),this.name="Sequence",this._part=new oh({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(go(ui.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,t){t!==null&&!this.mute&&this.callback(e,t)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,t){return this._part.start(e,t&&this._indexTime(t)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new It(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(t,s)=>t[s],set:(t,s,i)=>(or(s)&&isFinite(parseInt(s,10))&&Un(i)?t[s]=this._createSequence(i):t[s]=i,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,t,s){e.forEach((i,a)=>{const c=a*t+s;if(Un(i))this._rescheduleSequence(i,t/i.length,c);else{const u=new It(this.context,c,"i").toSeconds();this._part.add(u,i)}})}_indexTime(e){return new It(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,e===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class Mv extends He{constructor(){const e=De(Mv.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ot({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Nt(this,"pan")}static getDefaults(){return Object.assign(He.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const kG="bit-crusher",TG=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;QE(kG,TG);class Kt extends He{constructor(){const e=De(Kt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ft({context:this.context}),Kt._allSolos.has(this.context)||Kt._allSolos.set(this.context,new Set),Kt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(He.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Kt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Kt._soloed.has(this.context)||Kt._soloed.set(this.context,new Set),Kt._soloed.get(this.context).add(this)}_removeSolo(){Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).delete(this)}_isSoloed(){return Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).has(this)}_noSolos(){return!Kt._soloed.has(this.context)||Kt._soloed.has(this.context)&&Kt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Kt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Kt._allSolos=new Map;Kt._soloed=new Map;class Rv extends He{constructor(){const e=De(Rv.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Mv({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Fo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Nt(this,["pan","volume"])}static getDefaults(){return Object.assign(He.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class no extends He{constructor(){const e=De(no.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Kt({solo:e.solo,context:this.context}),this._panVol=this.output=new Rv({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Nt(this,["pan","volume"])}static getDefaults(){return Object.assign(He.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return no.buses.has(e)||no.buses.set(e,new Ft({context:this.context})),no.buses.get(e)}send(e,t=0){const s=this._getBus(e),i=new Ft({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(s),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}no.buses=new Map;const _r=Zn().transport,PG=Zn().destination;Zn().destination;Zn().listener;Zn().draw;Zn();function EG(){const[n,e]=x.useState(!1),[t,s]=x.useState({grainSize:50,density:70,position:0,pitch:0,reverse:!1,spread:30,shape:"gaussian",texture:40,feedback:20,modulation:0}),[i,a]=x.useState([{id:"granular1",name:"Granular A",type:"granular",params:{...t},active:!0},{id:"wavetable1",name:"Wavetable B",type:"wavetable",params:{waveform:"complex",modulation:30,harmonics:60},active:!1},{id:"fm1",name:"FM Synthesis",type:"fm",params:{carrier:440,modulator:220,index:40,ratio:2},active:!1},{id:"spectral1",name:"Spectral Engine",type:"spectral",params:{bins:64,morph:50,harmonics:80,phase:0},active:!1}]),[c,u]=x.useState(0),[d,h]=x.useState({macro1:50,macro2:30,macro3:70,macro4:20}),p=x.useRef(null),m=x.useRef(null);x.useEffect(()=>((async()=>{await pv(),m.current=new Pv({url:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmMRN2O+5cuZbDMAH4Xa9NWuVg4TCz2nz+eTaSkHMV+0zMx5WQ4SFz5+7diLYCtEpOD98IlZNA8VGj6vy/KHCz4+rNDqYyUFJHjH8N2QQAoUcefzzZfJJGMLZLbvfgf7+9eJzO7P2C9AGDq6o8dIpOD99I5ZNBISEy9uy+eHCz5Fr+Hztm0iGDKy18eLYCtEpOD98IlZNA8VGj6vy/KHCz5fr+LyuWwjGC6t2M1pRA0UImHO8Nt5WwwSFTeqze2MSSUIKHzK8tv0KAW6nOJ5cBoFbr/K8+GPTAsTIGPP8d5/XwsRFTqDzeKQSCYGH4Qz"}).toDestination(),p.current=new jt({type:"sawtooth",frequency:440}).toDestination()})(),()=>{m.current&&m.current.dispose(),p.current&&p.current.dispose()}),[]);const y=async()=>{try{n?(p.current?.stop(),m.current?.stop(),e(!1)):(i[c].type==="granular"?m.current?.start():p.current?.start(),e(!0))}catch(w){console.error("Playback error:",w)}},b=(w,N)=>{if(s(P=>({...P,[w]:N})),m.current)switch(w){case"grainSize":m.current.grainSize=(typeof N=="number"?N:0)/1e3;break;case"position":m.current.loopStart=(typeof N=="number"?N:0)/100;break;case"pitch":m.current.playbackRate=Math.pow(2,(typeof N=="number"?N:0)/12);break;case"reverse":m.current.reverse=N;break}},_=()=>{const w={grainSize:Math.random()*100,density:Math.random()*100,position:Math.random()*100,pitch:(Math.random()-.5)*24,reverse:Math.random()>.5,spread:Math.random()*100,shape:["gaussian","triangle","square"][Math.floor(Math.random()*3)],texture:Math.random()*100,feedback:Math.random()*50,modulation:Math.random()*100};s(w)},v=()=>{s({grainSize:50,density:70,position:0,pitch:0,reverse:!1,spread:30,shape:"gaussian",texture:40,feedback:20,modulation:0})};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center",children:r.jsx(yd,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Granular Engine"}),r.jsx("p",{className:"text-muted-foreground",children:"Advanced synthesis & texture manipulation"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Oe,{variant:"secondary",className:"bg-purple-500/10 text-purple-500",children:[r.jsx(na,{className:"h-3 w-3 mr-1"}),"Spectral"]}),r.jsx(Oe,{variant:"secondary",children:"Multi-Engine"}),r.jsx(Oe,{variant:"secondary",children:"Real-time"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(ea,{className:"h-5 w-5"}),"Synthesis Engines"]})}),r.jsxs(we,{className:"space-y-4",children:[i.map((w,N)=>r.jsx(te,{variant:c===N?"default":"outline",className:"w-full justify-start",onClick:()=>u(N),children:r.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="granular"&&r.jsx(yd,{className:"h-4 w-4"}),w.type==="wavetable"&&r.jsx(Md,{className:"h-4 w-4"}),w.type==="fm"&&r.jsx(TO,{className:"h-4 w-4"}),w.type==="spectral"&&r.jsx(na,{className:"h-4 w-4"}),r.jsx("span",{children:w.name})]})},w.id)),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(te,{onClick:y,className:"w-full",children:[n?"Stop":"Play"," Engine"]})})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(yd,{className:"h-5 w-5"}),"Granular Parameters"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Grain Size: ",t.grainSize.toFixed(1),"ms"]}),r.jsx(pe,{value:[t.grainSize],onValueChange:w=>b("grainSize",w[0]),min:1,max:200,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Density: ",t.density.toFixed(1),"%"]}),r.jsx(pe,{value:[t.density],onValueChange:w=>b("density",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Position: ",t.position.toFixed(1),"%"]}),r.jsx(pe,{value:[t.position],onValueChange:w=>b("position",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Pitch: ",t.pitch>0?"+":"",t.pitch.toFixed(1)," st"]}),r.jsx(pe,{value:[t.pitch],onValueChange:w=>b("pitch",w[0]),min:-24,max:24,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Spread: ",t.spread.toFixed(1),"%"]}),r.jsx(pe,{value:[t.spread],onValueChange:w=>b("spread",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Grain Shape"}),r.jsxs(rt,{value:t.shape,onValueChange:w=>b("shape",w),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"gaussian",children:"Gaussian"}),r.jsx(fe,{value:"triangle",children:"Triangle"}),r.jsx(fe,{value:"square",children:"Square"}),r.jsx(fe,{value:"exponential",children:"Exponential"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:_,children:[r.jsx(Ly,{className:"h-4 w-4 mr-1"}),"Random"]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:v,children:[r.jsx(Dy,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(fs,{className:"h-5 w-5"}),"Macro Controls"]})}),r.jsxs(we,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"X/Y Performance Pad"}),r.jsx("div",{className:"relative w-full h-32 bg-secondary rounded-lg border",children:r.jsx("div",{className:"absolute w-4 h-4 bg-primary rounded-full transform -translate-x-2 -translate-y-2 cursor-pointer",style:{left:`${d.macro1}%`,top:`${100-d.macro2}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:["X: ",d.macro1]}),r.jsxs("span",{children:["Y: ",d.macro2]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 1: Texture"}),r.jsx(pe,{value:[d.macro1],onValueChange:w=>h(N=>({...N,macro1:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 2: Movement"}),r.jsx(pe,{value:[d.macro2],onValueChange:w=>h(N=>({...N,macro2:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 3: Harmonics"}),r.jsx(pe,{value:[d.macro3],onValueChange:w=>h(N=>({...N,macro3:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 4: Chaos"}),r.jsx(pe,{value:[d.macro4],onValueChange:w=>h(N=>({...N,macro4:w[0]})),min:0,max:100,step:1})]})]}),r.jsxs("div",{className:"space-y-3 border-t pt-4",children:[r.jsx("h4",{className:"font-medium",children:"Advanced Effects"}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Spectral Filter"}),r.jsx(pe,{value:[t.texture],onValueChange:w=>b("texture",w[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Feedback"}),r.jsx(pe,{value:[t.feedback],onValueChange:w=>b("feedback",w[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Modulation"}),r.jsx(pe,{value:[t.modulation],onValueChange:w=>b("modulation",w[0]),min:0,max:100,step:1})]})]})]})]})]})]})}function AG(){const[n,e]=x.useState(!1),[t,s]=x.useState({waveform:"sawtooth",position:0,modulation:30,harmonics:60,phase:0,sync:!1,morphing:40,brightness:70,character:50,motion:20}),[i,a]=x.useState([{rate:2,depth:50,shape:"sine",target:"position",sync:!0},{rate:.5,depth:30,shape:"triangle",target:"harmonics",sync:!0},{rate:4,depth:70,shape:"square",target:"brightness",sync:!1},{rate:1,depth:40,shape:"sawtooth",target:"morphing",sync:!0}]),[c,u]=x.useState(0),[d,h]=x.useState({attack:.1,decay:.3,sustain:.7,release:1}),[p,m]=x.useState({type:"lowpass",frequency:2e3,resonance:5,drive:0,slope:24}),y=x.useRef(null),b=x.useRef([]);x.useEffect(()=>((async()=>{await pv(),y.current=new jt(220,t.waveform);const C=new rf({type:"lowpass",frequency:2e3,Q:5}),A=new Pc({attack:.1,decay:.3,sustain:.7,release:1});y.current.chain(C,A,PG),b.current=i.map((k,M)=>{const E=new Tv({frequency:k.rate,type:k.shape,amplitude:k.depth/100});switch(k.target){case"position":E.connect(y.current.frequency);break;case"harmonics":E.connect(C.frequency);break;case"brightness":E.connect(C.Q);break}return k.sync&&E.sync(),E.start(),E})})(),()=>{y.current&&y.current.dispose(),b.current.forEach(C=>C?.dispose())}),[]);const _=async()=>{try{n?(y.current?.stop(),e(!1)):(y.current?.start(),e(!0))}catch(P){console.error("Playback error:",P)}},v=(P,C)=>{if(s(A=>({...A,[P]:C})),y.current)switch(P){case"waveform":y.current.type=C;break;case"harmonics":typeof C=="number"&&(y.current.frequency.value=220*(1+C/1e3));break;case"phase":y.current.phase=typeof C=="number"?C:0;break}},w=(P,C,A)=>{if(a(k=>k.map((M,E)=>E===P?{...M,[C]:A}:M)),b.current[P]){const k=b.current[P];switch(C){case"rate":k.frequency.value=A;break;case"depth":k.amplitude.value=A/100;break;case"shape":k.type=A;break}}},N=()=>{const P=["sine","square","sawtooth","triangle"],C={waveform:P[Math.floor(Math.random()*P.length)],position:Math.random()*100,modulation:Math.random()*100,harmonics:Math.random()*100,phase:Math.random()*360,sync:Math.random()>.5,morphing:Math.random()*100,brightness:Math.random()*100,character:Math.random()*100,motion:Math.random()*100};s(C)};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-lg flex items-center justify-center",children:r.jsx(Md,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Wavetable Oscillator"}),r.jsx("p",{className:"text-muted-foreground",children:"Advanced wavetable synthesis & modulation"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Oe,{variant:"secondary",className:"bg-blue-500/10 text-blue-500",children:[r.jsx(Md,{className:"h-3 w-3 mr-1"}),"Wavetable"]}),r.jsx(Oe,{variant:"secondary",children:"Multi-LFO"}),r.jsx(Oe,{variant:"secondary",children:"Real-time"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(Og,{className:"h-5 w-5"}),"Wavetable Parameters"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Waveform"}),r.jsxs(rt,{value:t.waveform,onValueChange:P=>v("waveform",P),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"sine",children:"Sine Wave"}),r.jsx(fe,{value:"square",children:"Square Wave"}),r.jsx(fe,{value:"sawtooth",children:"Sawtooth"}),r.jsx(fe,{value:"triangle",children:"Triangle"}),r.jsx(fe,{value:"custom",children:"Custom"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Position: ",t.position.toFixed(1),"%"]}),r.jsx(pe,{value:[t.position],onValueChange:P=>v("position",P[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Harmonics: ",t.harmonics.toFixed(1),"%"]}),r.jsx(pe,{value:[t.harmonics],onValueChange:P=>v("harmonics",P[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Morphing: ",t.morphing.toFixed(1),"%"]}),r.jsx(pe,{value:[t.morphing],onValueChange:P=>v("morphing",P[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Brightness: ",t.brightness.toFixed(1),"%"]}),r.jsx(pe,{value:[t.brightness],onValueChange:P=>v("brightness",P[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Character: ",t.character.toFixed(1),"%"]}),r.jsx(pe,{value:[t.character],onValueChange:P=>v("character",P[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(te,{onClick:_,className:"flex-1",children:n?"Stop":"Play"}),r.jsx(te,{variant:"outline",size:"sm",onClick:N,children:r.jsx(Ly,{className:"h-4 w-4"})})]})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(Og,{className:"h-5 w-5"}),"LFO Modulation"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select LFO"}),r.jsx("div",{className:"grid grid-cols-4 gap-1",children:i.map((P,C)=>r.jsx(te,{size:"sm",variant:c===C?"default":"outline",onClick:()=>u(C),children:C+1},C))})]}),i[c]&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Shape"}),r.jsxs(rt,{value:i[c].shape,onValueChange:P=>w(c,"shape",P),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"sine",children:"Sine"}),r.jsx(fe,{value:"triangle",children:"Triangle"}),r.jsx(fe,{value:"square",children:"Square"}),r.jsx(fe,{value:"sawtooth",children:"Sawtooth"}),r.jsx(fe,{value:"noise",children:"Noise"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Rate: ",i[c].rate.toFixed(2)," Hz"]}),r.jsx(pe,{value:[i[c].rate],onValueChange:P=>w(c,"rate",P[0]),min:.1,max:20,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Depth: ",i[c].depth,"%"]}),r.jsx(pe,{value:[i[c].depth],onValueChange:P=>w(c,"depth",P[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Target"}),r.jsxs(rt,{value:i[c].target,onValueChange:P=>w(c,"target",P),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"position",children:"Position"}),r.jsx(fe,{value:"harmonics",children:"Harmonics"}),r.jsx(fe,{value:"brightness",children:"Brightness"}),r.jsx(fe,{value:"morphing",children:"Morphing"}),r.jsx(fe,{value:"character",children:"Character"})]})]})]})]})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(cj,{className:"h-5 w-5"}),"Filter & Effects"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter Type"}),r.jsxs(rt,{value:p.type,onValueChange:P=>m(C=>({...C,type:P})),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"lowpass",children:"Low Pass"}),r.jsx(fe,{value:"highpass",children:"High Pass"}),r.jsx(fe,{value:"bandpass",children:"Band Pass"}),r.jsx(fe,{value:"notch",children:"Notch"}),r.jsx(fe,{value:"allpass",children:"All Pass"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Cutoff: ",p.frequency," Hz"]}),r.jsx(pe,{value:[p.frequency],onValueChange:P=>m(C=>({...C,frequency:P[0]})),min:20,max:2e4,step:1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Resonance: ",p.resonance.toFixed(1)]}),r.jsx(pe,{value:[p.resonance],onValueChange:P=>m(C=>({...C,resonance:P[0]})),min:.1,max:30,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Drive: ",p.drive,"%"]}),r.jsx(pe,{value:[p.drive],onValueChange:P=>m(C=>({...C,drive:P[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Envelope (ADSR)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Attack: ",d.attack,"s"]}),r.jsx(pe,{value:[d.attack],onValueChange:P=>h(C=>({...C,attack:P[0]})),min:.001,max:5,step:.001})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Decay: ",d.decay,"s"]}),r.jsx(pe,{value:[d.decay],onValueChange:P=>h(C=>({...C,decay:P[0]})),min:.001,max:5,step:.001})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Sustain: ",d.sustain]}),r.jsx(pe,{value:[d.sustain],onValueChange:P=>h(C=>({...C,sustain:P[0]})),min:0,max:1,step:.01})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Release: ",d.release,"s"]}),r.jsx(pe,{value:[d.release],onValueChange:P=>h(C=>({...C,release:P[0]})),min:.001,max:10,step:.001})]})]})]})]})]})]})]})}const Y_=["Heavy synths and ambient guitars with a cyberpunk vibe, 100 BPM, C minor.","Intense and suspenseful movie trailer score with big percussion hits and chilling strings.","Dreamy lo-fi hip hop with vinyl crackle, warm pads, and mellow jazz chords, 85 BPM.","Aggressive trap beats with 808s, dark atmosphere, and industrial elements, 140 BPM.","Uplifting house music with piano melodies, vocal chops, and four-on-the-floor kicks, 128 BPM.","Cinematic orchestral composition with epic brass, soaring strings, and thunderous timpani.","Retro synthwave with nostalgic arpeggios, neon atmosphere, and driving basslines, 120 BPM.","Experimental ambient textures with granular synthesis, field recordings, and evolving drones.","Jazzy neo-soul with smooth Rhodes, walking basslines, and laid-back grooves, 90 BPM.","Hard-hitting drill beats with sliding 808s, hi-hat rolls, and menacing melodies, 150 BPM."];function MG(){const[n,e]=x.useState(""),[t,s]=x.useState(4),[i,a]=x.useState([]),[c,u]=x.useState("musicgen"),[d,h]=x.useState(null),[p,m]=x.useState([75]),{toast:y}=$t(),b=Ny(),_=Et({mutationFn:async T=>{const I=await fetch("/api/packs/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:T,count:t,aiProvider:c})});if(!I.ok)throw new Error(`Pack generation failed: ${I.statusText}`);return I.json()},onSuccess:T=>{a(T.packs||[]),y({title:"Sample packs generated!",description:`Created ${T.packs?.length||0} unique sample packs`})},onError:T=>{y({title:"Generation failed",description:T.message,variant:"destructive"})}}),v=Et({mutationFn:async T=>{const I={name:T.title,genre:T.genre,mood:T.metadata.mood,description:T.description,generatedSamples:T.samples.map(F=>({name:F.name,type:F.type==="loop"?"drums":F.type==="oneshot"?"bass":"melody",category:F.type,audioData:w(F),description:`${F.type} sample from ${T.title}`,bpm:T.bpm,key:T.key,duration:F.duration}))},O=await fetch("/api/sample-packs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!O.ok)throw new Error(`Failed to add pack: ${O.statusText}`);return await O.json()},onSuccess:()=>{y({title:" Pack Added to Library",description:"Sample pack successfully added to your Sample Library!"}),b.invalidateQueries({queryKey:["/api/samples"]}),b.invalidateQueries({queryKey:["/api/sample-packs"]})},onError:T=>{y({title:" Failed to Add Pack",description:T.message,variant:"destructive"})}}),w=T=>{const O=Math.min(T.duration/1e3,3),F=Math.floor(44100*O),L=new ArrayBuffer(44+F*2),V=new DataView(L),z=(K,$)=>{for(let H=0;H<$.length;H++)V.setUint8(K+H,$.charCodeAt(H))};z(0,"RIFF"),V.setUint32(4,36+F*2,!0),z(8,"WAVE"),z(12,"fmt "),V.setUint32(16,16,!0),V.setUint16(20,1,!0),V.setUint16(22,1,!0),V.setUint32(24,44100,!0),V.setUint32(28,44100*2,!0),V.setUint16(32,2,!0),V.setUint16(34,16,!0),z(36,"data"),V.setUint32(40,F*2,!0);const W=(T.name||"").toLowerCase();let G=44;for(let K=0;K<F;K++){const $=K/44100;let H=0;if(W.includes("kick")||W.includes("drum")){const R=Math.exp(-$*12),U=Math.exp(-$*8),X=Math.sin($*2*Math.PI*(40+20*U)),re=Math.sin($*2*Math.PI*(80+40*U)),ae=Math.exp(-$*50),le=Math.sin($*2*Math.PI*2e3)*ae*.3;H=(X*.8+re*.6+le)*R*.9}else if(W.includes("snare")){const R=Math.exp(-$*6),U=Math.exp(-$*4),X=Math.sin($*2*Math.PI*200)*U*.7,re=(Math.random()*2-1)*R*.6,ae=Math.sin($*2*Math.PI*8e3)*R*.2;H=(X+re+ae)*.8}else if(W.includes("hihat")||W.includes("hat")){const R=Math.exp(-$*20),U=Math.sin($*2*Math.PI*6e3)*.4,X=Math.sin($*2*Math.PI*8e3)*.3,re=Math.sin($*2*Math.PI*1e4)*.2,ae=(Math.random()*2-1)*.5;H=(U+X+re+ae)*R*.6}else if(W.includes("bass")||W.includes("808")||T.type==="oneshot"){const R=Math.exp(-$*1.8),U=Math.exp(-$*3),X=Math.sin($*2*Math.PI*(35+15*U)),re=Math.sin($*2*Math.PI*(65+25*U)),ae=Math.sin($*2*Math.PI*(130+50*U))*.4,le=(X*.9+re*.7+ae)*R;H=Math.tanh(le*1.5)*.85}else if(W.includes("vocal")||W.includes("voice")){const R=Math.exp(-$*.8),U=1+.04*Math.sin($*2*Math.PI*5.5),X=Math.sin($*2*Math.PI*730*U)*.8,re=Math.sin($*2*Math.PI*1090*U)*.5,ae=Math.sin($*2*Math.PI*2440*U)*.25,le=Math.sin($*2*Math.PI*3400*U)*.1,Q=(Math.random()*2-1)*R*.05;H=(X+re+ae+le+Q)*R*.7}else if(T.type==="loop"||W.includes("loop")){const R=$*4%1;let U=0;if(R<.1||R>.5&&R<.6){const re=Math.exp(-(R%.5)*20);U+=Math.sin(R*2*Math.PI*60)*re*.8}if(R>.2&&R<.3||R>.7&&R<.8){const re=Math.exp(-((R-.25)%.5)*15);U+=(Math.sin(R*2*Math.PI*200)*.6+(Math.random()*2-1)*.4)*re}const X=Math.exp(-(R*8%.125)*40);U+=(Math.random()*2-1)*X*.2,H=U*.6}else{const R=1+.03*Math.sin($*2*Math.PI*5),U=Math.exp(-$*.8),X=Math.sin($*2*Math.PI*440*R),re=Math.sin($*2*Math.PI*880*R)*.3,ae=Math.sin($*2*Math.PI*1320*R)*.15;H=(X+re+ae)*U*.6}H=Math.tanh(H*1.2)*.8;const ee=Math.max(-32767,Math.min(32767,H*32767));V.setInt16(G,ee,!0),G+=2}return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(L))))},N=()=>{if(!n.trim()){y({title:"No prompt entered",description:"Please describe the sample pack you want to create",variant:"destructive"});return}_.mutate(n)},P=()=>{const T=Y_[Math.floor(Math.random()*Y_.length)];e(T)},C=async T=>{try{const I=new(window.AudioContext||window.webkitAudioContext);if(I.state==="suspended"&&await I.resume(),d===T.id){h(null);return}h(T.id),await A(T,I),y({title:`Playing "${T.title}"`,description:`${T.genre}  ${T.bpm} BPM  ${T.key}`}),setTimeout(()=>{h(null)},8e3)}catch(I){console.error("Playback error:",I),y({title:"Playback failed",description:"Could not preview sample pack",variant:"destructive"}),h(null)}},A=async(T,I)=>{console.log(` Playing AI-generated pack: "${T.title}"`),console.log(` Pack contains ${T.samples.length} samples:`,T.samples.map(F=>F.name)),T.samples.some(F=>F.audioUrl)?await k(T):await M(T)},k=async T=>{console.log(` Playing real MusicGen audio for "${T.title}"`);for(const I of T.samples)if(I.audioUrl)try{const O=new Audio(I.audioUrl);O.volume=.7,console.log(` Playing real AI audio: "${I.name}"`),setTimeout(()=>{d&&O.play().catch(F=>{console.error(`Failed to play audio for ${I.name}:`,F)})},0),setTimeout(()=>{O.pause(),O.remove()},(I.duration||8)*1e3)}catch(O){console.error(`Error playing real audio for ${I.name}:`,O)}},M=async(T,I)=>{console.log(` Synthesizing AI-designed samples for "${T.title}"`),await Xt.initialize();const O=8,F=60/T.bpm/4,L=[];T.samples.forEach((V,z)=>{const W=V.name.toLowerCase();let G="piano",K=["C","D","E","G","A"],$=[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],H=.6;V.aiData&&(K=V.aiData.notes||K,$=V.aiData.pattern||$,H=V.aiData.intensity||H,console.log(` Using AI-generated data for "${V.name}":`,{notes:K.slice(0,3),pattern:$.slice(0,8),intensity:H})),W.includes("kick")||W.includes("drum")?G="kick":W.includes("snare")?G="snare":W.includes("hat")||W.includes("hihat")?G="hihat":W.includes("lead")||W.includes("synth")?G="lead-synth":W.includes("bass")?G="bass":W.includes("pad")||W.includes("atmospheric")?G="pad":W.includes("violin")?G="violin":W.includes("flute")?G="flute-concert":W.includes("guitar")?G="guitar-acoustic":W.includes("piano")&&(G="piano"),L.push({sample:V,startTime:z*.5,instrument:G,notes:K,pattern:$,intensity:H})}),console.log(` Playing ${L.length} AI-designed samples with intelligent patterns`),L.forEach(({sample:V,startTime:z,instrument:W,notes:G,pattern:K,intensity:$})=>{setTimeout(()=>{if(!d)return;console.log(` Starting AI pattern for "${V.name}" as ${W}`);let H=0;const ee=Math.floor(O*1e3/(F*1e3)),R=async()=>{if(!d)return;const U=H%K.length;if(K[U])if(W==="kick"||W==="snare"||W==="hihat")await Xt.playDrumSound(W,$);else{const X=H%G.length,re=G[X],ae=W==="violin"?5:4,le=Math.min(V.duration||1,2);await Xt.playNote(re,ae,le,W,$)}H++,H<ee&&setTimeout(()=>R(),F*1e3)};R()},z*1e3)})},E=T=>{y({title:`Downloading "${T.title}"`,description:`${T.samples.length} samples  ${T.genre}  ${T.key}`}),console.log("Downloading pack:",T)};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b bg-gradient-to-r from-emerald-500/10 to-teal-500/10",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-lg flex items-center justify-center",children:r.jsx(dj,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Pack Generator"}),r.jsx(Oe,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:"Beta"})]}),r.jsx("p",{className:"text-xl text-muted-foreground mt-1",children:"Enter a prompt, listen to the previews, then download your favorite pack."})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Oe,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:[r.jsx(na,{className:"h-3 w-3 mr-1"}),"AI Powered"]}),r.jsx(Oe,{variant:"secondary",children:"Real-time"}),r.jsx(Oe,{variant:"secondary",children:"High Quality"})]})]})})}),r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[r.jsxs(ye,{className:"bg-gradient-to-br from-emerald-500/5 to-teal-500/5 border-emerald-200/20",children:[r.jsx(_e,{children:r.jsx(Ce,{className:"text-emerald-700 dark:text-emerald-300",children:"Examples of prompts:"})}),r.jsxs(we,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Heavy synths and ambient guitars with a cyberpunk vibe, 100 BPM, C minor."})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Intense and suspenseful movie trailer score with big percussion hits and chilling strings."})]})]})]}),r.jsxs(ye,{className:"border-2 border-emerald-200/30",children:[r.jsx(_e,{children:r.jsx(Ce,{className:"text-emerald-600",children:"Enter Prompt"})}),r.jsxs(we,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Mr,{placeholder:"Describe anything...",value:n,onChange:T=>e(T.target.value),rows:4,className:"resize-none text-lg border-emerald-200/50 focus:border-emerald-400 bg-emerald-50/30 dark:bg-emerald-950/30"}),r.jsxs(te,{variant:"outline",onClick:P,className:"border-emerald-200 text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-950/50",children:[r.jsx(CO,{className:"h-4 w-4 mr-2"}),"Try a Random Prompt"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Number of Packs"}),r.jsxs(rt,{value:t.toString(),onValueChange:T=>s(parseInt(T)),children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"1",children:"1 Pack"}),r.jsx(fe,{value:"2",children:"2 Packs"}),r.jsx(fe,{value:"4",children:"4 Packs"}),r.jsx(fe,{value:"6",children:"6 Packs"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Provider"}),r.jsxs(rt,{value:c,onValueChange:u,children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsxs(tt,{children:[r.jsx(fe,{value:"structure",children:" AI Structure Generator"}),r.jsx(fe,{value:"musicgen",children:" MusicGen AI (Real Audio)"}),r.jsx(fe,{value:"grok",children:" Grok AI (Premium)"}),r.jsx(fe,{value:"intelligent",children:" Basic (Free)"}),r.jsx(fe,{value:"openai",disabled:!0,children:" OpenAI (Configure API key)"}),r.jsx(fe,{value:"gemini",disabled:!0,children:" Gemini (Configure API key)"}),r.jsx(fe,{value:"anthropic",disabled:!0,children:" Anthropic (Configure API key)"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Preview Volume: ",p[0],"%"]}),r.jsx(pe,{value:p,onValueChange:m,max:100,min:0,step:1})]})]}),r.jsx(te,{onClick:N,disabled:_.isPending||!n.trim(),className:"w-full h-12 text-lg bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700",children:_.isPending?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating ",t," New Packs..."]}):r.jsxs(r.Fragment,{children:[r.jsx(na,{className:"mr-2 h-5 w-5"}),"Generate ",t," New Packs"]})})]})]}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Generated Sample Packs"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(T=>r.jsxs(ye,{className:"border-emerald-200/30 hover:border-emerald-300/50 transition-colors",children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx(Ce,{className:"text-lg",children:T.title}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:T.description})]}),r.jsx(Oe,{variant:"outline",className:"text-emerald-600 border-emerald-200",children:T.genre})]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"BPM:"}),r.jsx("p",{className:"font-medium",children:T.bpm})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Key:"}),r.jsx("p",{className:"font-medium",children:T.key})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Samples:"}),r.jsx("p",{className:"font-medium",children:T.samples.length})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Instruments:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Array.isArray(T.metadata.instruments)?T.metadata.instruments:typeof T.metadata.instruments=="string"?T.metadata.instruments.split(",").map(I=>I.trim()):["Unknown"]).map((I,O)=>r.jsx(Oe,{variant:"secondary",className:"text-xs",children:I},O))})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Samples:"}),r.jsxs("div",{className:"space-y-1 mt-1",children:[T.samples.slice(0,3).map(I=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{children:I.name}),r.jsx(Oe,{variant:"outline",className:"text-xs",children:I.type})]},I.id)),T.samples.length>3&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",T.samples.length-3," more samples"]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(te,{variant:"outline",size:"sm",onClick:()=>C(T),className:"flex-1",children:d===T.id?r.jsxs(r.Fragment,{children:[r.jsx(ua,{className:"h-4 w-4 mr-1"}),"Stop"]}):r.jsxs(r.Fragment,{children:[r.jsx(sr,{className:"h-4 w-4 mr-1"}),"Preview"]})}),r.jsxs(te,{onClick:()=>E(T),size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(ph,{className:"h-4 w-4 mr-1"}),"Download"]}),r.jsxs(te,{onClick:()=>v.mutate(T),size:"sm",variant:"outline",disabled:v.isPending,className:"border-blue-500 text-blue-600 hover:bg-blue-50","data-testid":`button-add-to-library-${T.id}`,children:[v.isPending?r.jsx(lo,{className:"h-4 w-4 mr-1 animate-spin"}):r.jsx(_O,{className:"h-4 w-4 mr-1"}),"Add to Library"]})]})]})]},T.id))})]}),r.jsxs(ye,{className:"bg-muted/30",children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(jO,{className:"h-5 w-5"}),"Pro Tips"]})}),r.jsx(we,{className:"space-y-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Be Specific"}),r.jsx("p",{className:"text-muted-foreground",children:"Include BPM, key, genre, and mood for better results"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Use Musical Terms"}),r.jsx("p",{className:"text-muted-foreground",children:"Mention instruments, scales, and production techniques"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Describe the Vibe"}),r.jsx("p",{className:"text-muted-foreground",children:'Add emotional context like "aggressive", "dreamy", or "nostalgic"'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Reference Styles"}),r.jsx("p",{className:"text-muted-foreground",children:"Mention genres, artists, or movie soundtracks for inspiration"})]})]})})]})]})]})}class RG{constructor(){this.audioContext=null,this.masterBus=null,this.masterCompressor=null,this.masterLimiter=null,this.masterAnalyzer=null,this.channels=new Map,this.sendReturns=new Map,this.isInitialized=!1,this.sampleRate=44100,this.bufferSize=256,this.reverbBuffers=new Map,this.convolutionNodes=new Map,this.spectrumAnalyzer=null,this.spectrumData=null}async initialize(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sampleRate=this.audioContext.sampleRate,console.log(" Professional Audio Engine - Initializing"),console.log(`   Sample Rate: ${this.sampleRate}Hz`),console.log(`   Buffer Size: ${this.bufferSize}`),this.audioContext.state==="suspended"&&await this.resumeAudioContext(),await this.createMasterBus(),await this.createDefaultSends(),await this.generateReverbImpulses(),this.initializeSpectrumAnalyzer(),this.isInitialized=!0,console.log(" Professional Audio Engine - Ready")}catch(e){throw console.error("Failed to initialize Professional Audio Engine:",e),e}}async resumeAudioContext(){if(!this.audioContext)return;const e=async()=>{if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume(),console.log(" Audio context resumed")}catch(t){console.error("Failed to resume audio context:",t)}document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0)};document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0);try{await this.audioContext.resume()}catch{console.log("Audio context needs user interaction")}}async createMasterBus(){this.audioContext&&(this.masterBus=this.audioContext.createGain(),this.masterBus.gain.value=.8,this.masterCompressor=this.audioContext.createDynamicsCompressor(),this.masterCompressor.threshold.value=-18,this.masterCompressor.knee.value=12,this.masterCompressor.ratio.value=3,this.masterCompressor.attack.value=.008,this.masterCompressor.release.value=.2,this.masterLimiter=this.audioContext.createDynamicsCompressor(),this.masterLimiter.threshold.value=-1,this.masterLimiter.knee.value=0,this.masterLimiter.ratio.value=20,this.masterLimiter.attack.value=.001,this.masterLimiter.release.value=.05,this.masterAnalyzer=this.audioContext.createAnalyser(),this.masterAnalyzer.fftSize=2048,this.masterAnalyzer.smoothingTimeConstant=.8,this.masterBus.connect(this.masterCompressor),this.masterCompressor.connect(this.masterLimiter),this.masterLimiter.connect(this.masterAnalyzer),this.masterAnalyzer.connect(this.audioContext.destination),console.log(" Master bus created with professional processing chain"))}async createDefaultSends(){if(!this.audioContext)return;const e=await this.createSendReturn("hall","Hall Reverb","reverb");this.sendReturns.set("hall",e);const t=await this.createSendReturn("delay","Stereo Delay","delay");this.sendReturns.set("delay",t);const s=await this.createSendReturn("chorus","Vintage Chorus","chorus");this.sendReturns.set("chorus",s),console.log(" Default send returns created")}async createSendReturn(e,t,s){if(!this.audioContext||!this.masterBus)throw new Error("Audio context not initialized");const i=this.audioContext.createGain(),a=this.audioContext.createGain(),c=await this.createEffect(s);return i.connect(c.node),c.node.connect(a),a.connect(this.masterBus),{id:e,name:t,input:i,output:a,effect:c.effect,wetLevel:.5,return:.8}}async createEffect(e){if(!this.audioContext)throw new Error("Audio context not initialized");let t,s;switch(e){case"reverb":t=await this.createHallReverb(),s={id:"hall_reverb",name:"Hall Reverb",type:"reverb",bypass:!1,parameters:{roomSize:.7,decay:3.5,damping:.3,predelay:.02,wetLevel:.4}};break;case"delay":t=this.createStereoDelay(),s={id:"stereo_delay",name:"Stereo Delay",type:"delay",bypass:!1,parameters:{time:.25,feedback:.35,highCut:8e3,lowCut:200,wetLevel:.3}};break;case"chorus":t=this.createVintageChorus(),s={id:"vintage_chorus",name:"Vintage Chorus",type:"chorus",bypass:!1,parameters:{rate:.8,depth:.4,feedback:.1,mix:.5}};break;default:t=this.audioContext.createGain(),s={id:"bypass",name:"Bypass",type:"filter",bypass:!0,parameters:{}}}return{node:t,effect:s}}async createHallReverb(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createConvolver();if(!this.reverbBuffers.has("hall")){const t=this.generateHallImpulse(3.5,.3);this.reverbBuffers.set("hall",t)}return e.buffer=this.reverbBuffers.get("hall"),this.convolutionNodes.set("hall",e),e}createStereoDelay(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createGain(),t=this.audioContext.createGain(),s=this.audioContext.createDelay(1),i=this.audioContext.createDelay(1),a=this.audioContext.createGain(),c=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.createBiquadFilter();return s.delayTime.value=.25,i.delayTime.value=.375,a.gain.value=.35,c.gain.value=.35,u.type="lowpass",u.frequency.value=8e3,u.Q.value=.707,d.type="highpass",d.frequency.value=200,d.Q.value=.707,e.connect(s),e.connect(i),s.connect(d),d.connect(u),u.connect(a),a.connect(s),i.connect(d),c.connect(i),s.connect(t),i.connect(t),e.delayOutput=t,e}createVintageChorus(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createGain(),t=this.audioContext.createGain(),s=this.audioContext.createGain(),i=this.audioContext.createGain(),a=this.audioContext.createDelay(.05),c=this.audioContext.createOscillator(),u=this.audioContext.createGain(),d=this.audioContext.createGain();return c.type="sine",c.frequency.value=.8,u.gain.value=.005,a.delayTime.value=.02,d.gain.value=.1,s.gain.value=.5,i.gain.value=.5,e.connect(i),e.connect(a),c.connect(u),u.connect(a.delayTime),a.connect(s),a.connect(d),d.connect(a),i.connect(t),s.connect(t),c.start(),e}generateHallImpulse(e,t){if(!this.audioContext)throw new Error("Audio context not initialized");const s=this.sampleRate*e,i=this.audioContext.createBuffer(2,s,this.sampleRate);for(let a=0;a<2;a++){const c=i.getChannelData(a);for(let u=0;u<s;u++){const d=u/this.sampleRate,h=Math.exp(-d*(5/e)),p=1-d/e*t;let m=0;m+=(Math.random()*2-1)*h*p,m+=Math.sin(d*440*Math.PI*2)*h*.1,m+=Math.sin(d*660*Math.PI*2)*h*.05,c[u]=m}}return i}async generateReverbImpulses(){const e=[{name:"hall",decay:3.5,damping:.3},{name:"room",decay:1.2,damping:.5},{name:"plate",decay:2.8,damping:.1},{name:"spring",decay:.8,damping:.7}];for(const t of e){const s=this.generateHallImpulse(t.decay,t.damping);this.reverbBuffers.set(t.name,s)}console.log(" Reverb impulses generated for all room types")}initializeSpectrumAnalyzer(){!this.audioContext||!this.masterAnalyzer||(this.spectrumAnalyzer=this.masterAnalyzer,this.spectrumData=new Uint8Array(this.spectrumAnalyzer.frequencyBinCount),console.log(" Spectrum analyzer initialized"))}createMixerChannel(e,t){if(!this.audioContext||!this.masterBus)throw new Error("Audio engine not initialized");const s=this.audioContext.createGain(),i=this.audioContext.createGain(),a=this.audioContext.createStereoPanner(),c=this.audioContext.createBiquadFilter(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.createBiquadFilter(),h=this.audioContext.createBiquadFilter();c.type="lowshelf",c.frequency.value=100,c.gain.value=0,u.type="peaking",u.frequency.value=400,u.Q.value=1,u.gain.value=0,d.type="peaking",d.frequency.value=2500,d.Q.value=1,d.gain.value=0,h.type="highshelf",h.frequency.value=8e3,h.gain.value=0;const p=this.audioContext.createDynamicsCompressor();p.threshold.value=-24,p.knee.value=6,p.ratio.value=4,p.attack.value=.01,p.release.value=.25;const m=this.audioContext.createAnalyser();m.fftSize=256,m.smoothingTimeConstant=.3;const y={};Array.from(this.sendReturns.keys()).forEach(_=>{const v=this.audioContext.createGain();v.gain.value=0,y[_]=v,i.connect(v),v.connect(this.sendReturns.get(_).input)}),s.connect(c),c.connect(u),u.connect(d),d.connect(h),h.connect(p),p.connect(a),a.connect(i),i.connect(m),m.connect(this.masterBus);const b={id:e,name:t,input:s,output:i,volume:.8,pan:0,muted:!1,solo:!1,eq:{lowShelf:c,lowMid:u,highMid:d,highShelf:h},compressor:p,effects:[],sends:y,analyzer:m,peakMeter:0,rmsLevel:0};return this.channels.set(e,b),console.log(` Mixer channel created: ${t}`),b}setChannelVolume(e,t){const s=this.channels.get(e);s&&(s.volume=Math.max(0,Math.min(1,t)),s.output.gain.value=s.volume)}setChannelPan(e,t){const s=this.channels.get(e);s&&(s.pan=Math.max(-1,Math.min(1,t)))}setChannelEQ(e,t,s){const i=this.channels.get(e);if(!i)return;const a=Math.max(-15,Math.min(15,s));switch(t){case"low":i.eq.lowShelf.gain.value=a;break;case"lowMid":i.eq.lowMid.gain.value=a;break;case"highMid":i.eq.highMid.gain.value=a;break;case"high":i.eq.highShelf.gain.value=a;break}}setSendLevel(e,t,s){const a=this.channels.get(e)?.sends[t];a&&(a.gain.value=Math.max(0,Math.min(1,s)))}muteChannel(e,t){const s=this.channels.get(e);s&&(s.muted=t,s.output.gain.value=t?0:s.volume)}soloChannel(e,t){const s=this.channels.get(e);if(!s)return;s.solo=t;const i=Array.from(this.channels.values()).filter(a=>a.solo);Array.from(this.channels.values()).forEach(a=>{i.length===0?a.output.gain.value=a.muted?0:a.volume:a.output.gain.value=a.solo&&!a.muted?a.volume:0})}getChannelMeters(e){const t=this.channels.get(e);if(!t)return{peak:0,rms:0};const s=new Uint8Array(t.analyzer.frequencyBinCount);t.analyzer.getByteFrequencyData(s);let i=0,a=0;for(let c=0;c<s.length;c++){const u=s[c]/255;i=Math.max(i,u),a+=u*u}return a=Math.sqrt(a/s.length),t.peakMeter=i,t.rmsLevel=a,{peak:i,rms:a}}getMasterSpectrum(){if(!this.spectrumAnalyzer||!this.spectrumData)return null;const e=new Uint8Array(this.spectrumData.length);return this.spectrumAnalyzer.getByteFrequencyData(e),e}getChannels(){return Array.from(this.channels.values())}getSendReturns(){return Array.from(this.sendReturns.values())}connectToChannel(e,t){const s=this.channels.get(e);s&&t.connect(s.input)}disconnect(){Array.from(this.channels.values()).forEach(e=>{try{e.input.disconnect(),e.output.disconnect()}catch{}}),this.channels.clear(),this.sendReturns.clear(),this.masterBus&&this.masterBus.disconnect(),console.log(" Professional Audio Engine disconnected")}}const ls=new RG;function IG(){const{toast:n}=$t(),[e,t]=x.useState({channels:[],sends:[],masterLevel:.8,masterMeters:{peak:0,rms:0},spectrum:[],isInitialized:!1}),[s,i]=x.useState(null),[a,c]=x.useState(new Map),[u,d]=x.useState(!1),[h,p]=x.useState("channels"),m=x.useRef(),y=x.useRef(null);x.useEffect(()=>((async()=>{try{await ls.initialize();const I=[{id:"drums",name:"Drums",color:"#ef4444"},{id:"bass",name:"Bass",color:"#8b5cf6"},{id:"keys",name:"Keys",color:"#3b82f6"},{id:"guitar",name:"Guitar",color:"#f59e0b"},{id:"vocals",name:"Vocals",color:"#10b981"},{id:"fx",name:"FX",color:"#ec4899"},{id:"master",name:"Master",color:"#6b7280"}].map(O=>ls.createMixerChannel(O.id,O.name));t({channels:I,sends:ls.getSendReturns(),masterLevel:.8,masterMeters:{peak:0,rms:0},spectrum:[],isInitialized:!0}),n({title:"Professional Audio Engine Initialized",description:"World-class mixing console ready for production"}),b()}catch(T){console.error("Failed to initialize professional audio:",T),n({title:"Audio Initialization Failed",description:"Please check your audio settings and try again",variant:"destructive"})}})(),()=>{_(),ls.disconnect()}),[n]);const b=x.useCallback(()=>{const E=()=>{if(!e.isInitialized)return;const T=new Map;e.channels.forEach(O=>{const F=ls.getChannelMeters(O.id);T.set(O.id,{peak:F.peak,rms:F.rms,spectrum:[]})}),c(T);const I=ls.getMasterSpectrum();if(I){const O=Array.from(I);t(F=>({...F,spectrum:O,masterMeters:{peak:Math.max(...O)/255,rms:Math.sqrt(O.reduce((L,V)=>L+(V/255)**2,0)/O.length)}})),v(O)}m.current=requestAnimationFrame(E)};E()},[e.isInitialized]),_=x.useCallback(()=>{m.current&&cancelAnimationFrame(m.current)},[]),v=E=>{const T=y.current;if(!T)return;const I=T.getContext("2d");if(!I)return;const O=T.width,F=T.height;I.fillStyle="#0f172a",I.fillRect(0,0,O,F);const L=O/E.length;for(let V=0;V<E.length;V++){const z=E[V]/255*F,W=V/E.length*360;I.fillStyle=`hsl(${W}, 70%, 50%)`,I.fillRect(V*L,F-z,L-1,z)}},w=(E,T)=>{ls.setChannelVolume(E,T[0]/100)},N=(E,T)=>{ls.setChannelPan(E,(T[0]-50)/50)},P=(E,T,I)=>{ls.setChannelEQ(E,T,(I[0]-50)/5)},C=(E,T)=>{ls.muteChannel(E,T),t(I=>({...I,channels:I.channels.map(O=>O.id===E?{...O,muted:T}:O)}))},A=(E,T)=>{ls.soloChannel(E,T),t(I=>({...I,channels:I.channels.map(O=>O.id===E?{...O,solo:T}:O)}))},k=(E,T,I)=>{ls.setSendLevel(E,T,I[0]/100)},M=E=>{const T=a.get(E.id)||{peak:0,rms:0},I=s===E.id;return r.jsxs(ye,{className:`w-20 h-full transition-all ${I?"ring-2 ring-blue-500 bg-gray-800":"bg-gray-900"}`,children:[r.jsx(_e,{className:"p-2 pb-1",children:r.jsx(Ce,{className:"text-xs text-center truncate",children:E.name})}),r.jsxs(we,{className:"p-2 space-y-2",children:[r.jsxs("div",{className:"h-24 bg-gray-800 rounded relative overflow-hidden",children:[r.jsx("div",{className:"absolute bottom-0 left-1 w-2 bg-green-500 transition-all",style:{height:`${T.rms*100}%`}}),r.jsx("div",{className:"absolute bottom-0 right-1 w-2 bg-red-500 transition-all",style:{height:`${T.peak*100}%`}}),r.jsxs("div",{className:"absolute top-1 left-0 right-0 text-center",children:[r.jsx("div",{className:"text-[8px] text-gray-400",children:"RMS"}),r.jsx("div",{className:"text-[8px] text-gray-400",children:"PK"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"EQ"}),r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[r.jsx(pe,{orientation:"vertical",value:[50],onValueChange:O=>P(E.id,"high",O),min:0,max:100,className:"h-8","data-testid":`eq-high-${E.id}`}),r.jsx(pe,{orientation:"vertical",value:[50],onValueChange:O=>P(E.id,"highMid",O),min:0,max:100,className:"h-8","data-testid":`eq-highmid-${E.id}`}),r.jsx(pe,{orientation:"vertical",value:[50],onValueChange:O=>P(E.id,"lowMid",O),min:0,max:100,className:"h-8","data-testid":`eq-lowmid-${E.id}`}),r.jsx(pe,{orientation:"vertical",value:[50],onValueChange:O=>P(E.id,"low",O),min:0,max:100,className:"h-8","data-testid":`eq-low-${E.id}`})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"SENDS"}),r.jsx("div",{className:"flex justify-between",children:e.sends.slice(0,3).map((O,F)=>r.jsx(pe,{orientation:"vertical",value:[0],onValueChange:L=>k(E.id,O.id,L),min:0,max:100,className:"h-6 w-3","data-testid":`send-${O.id}-${E.id}`},O.id))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"PAN"}),r.jsx(pe,{value:[50],onValueChange:O=>N(E.id,O),min:0,max:100,className:"w-full","data-testid":`pan-${E.id}`})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{size:"sm",variant:E.muted?"destructive":"outline",className:"text-xs px-1 py-0 h-6",onClick:()=>C(E.id,!E.muted),"data-testid":`mute-${E.id}`,children:"M"}),r.jsx(te,{size:"sm",variant:E.solo?"default":"outline",className:"text-xs px-1 py-0 h-6",onClick:()=>A(E.id,!E.solo),"data-testid":`solo-${E.id}`,children:"S"})]}),r.jsx("div",{className:"h-32 flex justify-center",children:r.jsx(pe,{orientation:"vertical",value:[E.volume*100],onValueChange:O=>w(E.id,O),min:0,max:100,className:"h-full","data-testid":`volume-${E.id}`})}),r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:Math.round(E.volume*100)})]})]},E.id)};return e.isInitialized?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-heading font-bold text-white flex items-center gap-2",children:[r.jsx(zy,{className:"h-6 w-6 text-blue-500"}),"Professional Mixer"]}),r.jsx("p",{className:"text-gray-400",children:"World-class mixing console with real-time processing"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Oe,{variant:"outline",className:"text-green-400 border-green-400",children:[r.jsx(AO,{className:"h-3 w-3 mr-1"}),"Live"]}),r.jsx(te,{variant:u?"destructive":"default",onClick:()=>d(!u),"data-testid":"transport-play",children:u?r.jsx(yh,{className:"h-4 w-4"}):r.jsx(sr,{className:"h-4 w-4"})})]})]}),r.jsxs(Ao,{value:h,onValueChange:p,children:[r.jsxs(pa,{className:"grid w-full grid-cols-4",children:[r.jsx(At,{value:"channels",children:"Channels"}),r.jsx(At,{value:"sends",children:"Send Returns"}),r.jsx(At,{value:"master",children:"Master Section"}),r.jsx(At,{value:"analyzer",children:"Spectrum"})]}),r.jsx(Mt,{value:"channels",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(yi,{className:"h-5 w-5"}),"Channel Strips"]})}),r.jsx(we,{children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4",children:e.channels.map(M)})})]})}),r.jsx(Mt,{value:"sends",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(yd,{className:"h-5 w-5"}),"Send Returns & Effects"]})}),r.jsx(we,{className:"space-y-4",children:e.sends.map(E=>r.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium",children:E.name}),r.jsx(Oe,{variant:"secondary",children:E.effect?.type})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Return Level"}),r.jsx(pe,{value:[E.return*100],onValueChange:T=>{},min:0,max:100})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Wet Level"}),r.jsx(pe,{value:[E.wetLevel*100],onValueChange:T=>{},min:0,max:100})]})]})]},E.id))})]})}),r.jsx(Mt,{value:"master",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(DO,{className:"h-5 w-5"}),"Master Section"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Level"}),r.jsx(pe,{value:[e.masterLevel*100],onValueChange:E=>t(T=>({...T,masterLevel:E[0]/100})),min:0,max:100,"data-testid":"master-volume"})]}),r.jsx("div",{className:"h-32 bg-gray-800 rounded p-2 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"MASTER METERS"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("div",{className:"w-4 h-24 bg-gray-700 rounded overflow-hidden",children:r.jsx("div",{className:"w-full bg-green-500 transition-all",style:{height:`${e.masterMeters.rms*100}%`,marginTop:`${100-e.masterMeters.rms*100}%`}})}),r.jsx("div",{className:"w-4 h-24 bg-gray-700 rounded overflow-hidden",children:r.jsx("div",{className:"w-full bg-red-500 transition-all",style:{height:`${e.masterMeters.peak*100}%`,marginTop:`${100-e.masterMeters.peak*100}%`}})})]})]})})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(ta,{className:"h-5 w-5"}),"Master Processing"]})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Compressor"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Threshold"}),r.jsx(pe,{value:[82],min:0,max:100})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Ratio"}),r.jsx(pe,{value:[30],min:0,max:100})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Limiter"}),r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Ceiling"}),r.jsx(pe,{value:[99],min:0,max:100})]})]})]})]})]})}),r.jsx(Mt,{value:"analyzer",className:"space-y-4",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center gap-2",children:[r.jsx(My,{className:"h-5 w-5"}),"Real-time Spectrum Analyzer"]})}),r.jsxs(we,{children:[r.jsx("canvas",{ref:y,width:800,height:300,className:"w-full border border-gray-700 rounded bg-gray-900"}),r.jsx("div",{className:"mt-2 text-center text-sm text-gray-400",children:"Professional spectrum analysis with real-time frequency visualization"})]})]})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(fs,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-500"}),r.jsx("div",{children:"Initializing Professional Audio Engine..."}),r.jsx("div",{className:"text-sm text-gray-400",children:"Loading world-class mixing console"})]})})}function OG(){const[n,e]=x.useState([{id:"intro",name:"Intro",duration:16,measures:4,instruments:["piano","strings"],dynamics:"soft",tempo:120,key:"C Major",description:"Atmospheric opening with gentle piano and strings"}]),[t,s]=x.useState({title:"",artist:"",genre:"",bpm:120,key:"C Major",duration:"3:00",format:"WAV"}),[i,a]=x.useState({mixing:"Professional stereo balance",mastering:"Commercial loudness standards",effects:"Studio-grade reverb and compression",style:"modern",professionalGrade:!0}),[c,u]=x.useState("C - Am - F - G"),[d,h]=x.useState(null),[p,m]=x.useState(!1),y=["piano","guitar","bass","drums","strings","vocals","synth","horn","full_band","reduced"],b=["soft","moderate","powerful","intimate","climactic","decrescendo"],_=()=>{const C={id:`section_${Date.now()}`,name:"New Section",duration:16,measures:4,instruments:["piano"],dynamics:"moderate",description:"New song section"};e([...n,C])},v=C=>{e(n.filter(A=>A.id!==C))},w=(C,A)=>{e(n.map(k=>k.id===C?{...k,...A}:k))},N=()=>{const C=document.createElement("input");C.type="file",C.accept=".json,.txt",C.onchange=A=>{const k=A.target.files?.[0];if(k){const M=new FileReader;M.onload=E=>{try{const T=E.target?.result,I=JSON.parse(T);if(I.intro||I.verse1||I.chorus){const O=Object.entries(I).map(([F,L])=>({id:F,name:F.charAt(0).toUpperCase()+F.slice(1),duration:L.duration||16,measures:L.measures||4,instruments:Array.isArray(L.instruments)?L.instruments:["piano"],vocals:L.vocals||!1,dynamics:L.dynamics||"moderate",tempo:L.tempo||120,key:L.key||"C Major",description:L.description||""}));e(O)}}catch(T){console.error("Error parsing file:",T)}},M.readAsText(k)}},C.click()},P=()=>{const C={metadata:t,structure:n.reduce((E,T)=>(E[T.id]=T,E),{}),chordProgression:c,productionNotes:i},A=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),k=URL.createObjectURL(A),M=document.createElement("a");M.href=k,M.download=`${t.title||"song"}_structure.json`,M.click(),URL.revokeObjectURL(k)};return r.jsxs("div",{className:"h-screen bg-gray-900 text-white p-6 overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Oy,{className:"h-8 w-8 text-blue-500"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Song Structure Manager"}),r.jsx(Oe,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Professional Arrangement Tool"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(te,{onClick:N,variant:"outline",className:"flex items-center gap-2","data-testid":"button-import",children:[r.jsx(fi,{className:"h-4 w-4"}),"Import"]}),r.jsxs(te,{onClick:P,variant:"outline",className:"flex items-center gap-2","data-testid":"button-export",children:[r.jsx(ph,{className:"h-4 w-4"}),"Export"]}),r.jsxs(te,{onClick:_,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2","data-testid":"button-add-section",children:[r.jsx(EO,{className:"h-4 w-4"}),"Add Section"]})]})]}),r.jsxs(Ao,{defaultValue:"structure",className:"space-y-6",children:[r.jsxs(pa,{className:"grid w-full grid-cols-4",children:[r.jsx(At,{value:"structure",children:"Song Structure"}),r.jsx(At,{value:"metadata",children:"Metadata"}),r.jsx(At,{value:"chords",children:"Chord Progression"}),r.jsx(At,{value:"production",children:"Production Notes"})]}),r.jsx(Mt,{value:"structure",className:"space-y-4",children:r.jsxs(ye,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Pn,{className:"h-5 w-5"}),"Song Sections"]}),r.jsx("div",{className:"grid gap-4",children:n.map((C,A)=>r.jsxs(ye,{className:"p-4 bg-gray-750 border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-sm font-bold",children:A+1}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg",children:C.name}),r.jsxs("div",{className:"flex gap-2 text-sm text-gray-400",children:[r.jsxs("span",{children:[C.duration,"s"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[C.measures," measures"]}),r.jsx("span",{children:""}),r.jsx("span",{className:"capitalize",children:C.dynamics})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Ak,{children:[r.jsx(Mk,{asChild:!0,children:r.jsx(te,{size:"sm",variant:"outline",className:"border-gray-600",children:r.jsx(IO,{className:"h-4 w-4"})})}),r.jsxs(fx,{className:"bg-gray-800 border-gray-600 text-white max-w-2xl",children:[r.jsx(px,{children:r.jsxs(mx,{children:["Edit Section: ",C.name]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Be,{children:"Section Name"}),r.jsx(Bt,{value:C.name,onChange:k=>w(C.id,{name:k.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Duration (seconds)"}),r.jsx(Bt,{type:"number",value:C.duration,onChange:k=>w(C.id,{duration:parseInt(k.target.value)||16}),className:"bg-gray-700 border-gray-600"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Be,{children:"Measures"}),r.jsx(Bt,{type:"number",value:C.measures,onChange:k=>w(C.id,{measures:parseInt(k.target.value)||4}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Dynamics"}),r.jsxs(rt,{value:C.dynamics,onValueChange:k=>w(C.id,{dynamics:k}),children:[r.jsx(et,{className:"bg-gray-700 border-gray-600",children:r.jsx(it,{})}),r.jsx(tt,{className:"bg-gray-800 border-gray-600",children:b.map(k=>r.jsx(fe,{value:k,children:k},k))})]})]})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Instruments"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.map(k=>r.jsx(Oe,{variant:C.instruments.includes(k)?"default":"outline",className:"cursor-pointer",onClick:()=>{const M=C.instruments.includes(k)?C.instruments.filter(E=>E!==k):[...C.instruments,k];w(C.id,{instruments:M})},children:k},k))})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Description"}),r.jsx(Mr,{value:C.description,onChange:k=>w(C.id,{description:k.target.value}),className:"bg-gray-700 border-gray-600",rows:3})]})]})]})]}),r.jsx(te,{size:"sm",variant:"outline",onClick:()=>v(C.id),className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white",children:r.jsx(OO,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.instruments.map(k=>r.jsx(Oe,{variant:"secondary",className:"text-xs",children:k},k)),C.vocals&&r.jsx(Oe,{variant:"default",className:"text-xs bg-green-600",children:"Vocals"})]}),r.jsx("p",{className:"text-sm text-gray-300",children:C.description})]})]},C.id))})]})}),r.jsx(Mt,{value:"metadata",className:"space-y-4",children:r.jsxs(ye,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Song Metadata"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Be,{children:"Title"}),r.jsx(Bt,{value:t.title,onChange:C=>s({...t,title:C.target.value}),placeholder:"Song Title",className:"bg-gray-700 border-gray-600","data-testid":"input-song-title"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Artist"}),r.jsx(Bt,{value:t.artist,onChange:C=>s({...t,artist:C.target.value}),placeholder:"Artist Name",className:"bg-gray-700 border-gray-600","data-testid":"input-song-artist"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Genre"}),r.jsxs(rt,{value:t.genre,onValueChange:C=>s({...t,genre:C}),children:[r.jsx(et,{className:"bg-gray-700 border-gray-600",children:r.jsx(it,{placeholder:"Select Genre"})}),r.jsxs(tt,{className:"bg-gray-800 border-gray-600",children:[r.jsx(fe,{value:"hip-hop",children:"Hip Hop"}),r.jsx(fe,{value:"pop",children:"Pop"}),r.jsx(fe,{value:"rock",children:"Rock"}),r.jsx(fe,{value:"electronic",children:"Electronic"}),r.jsx(fe,{value:"jazz",children:"Jazz"}),r.jsx(fe,{value:"classical",children:"Classical"})]})]})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"BPM"}),r.jsx(Bt,{type:"number",value:t.bpm,onChange:C=>s({...t,bpm:parseInt(C.target.value)||120}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Key"}),r.jsx(Bt,{value:t.key,onChange:C=>s({...t,key:C.target.value}),placeholder:"C Major",className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Duration"}),r.jsx(Bt,{value:t.duration,onChange:C=>s({...t,duration:C.target.value}),placeholder:"3:00",className:"bg-gray-700 border-gray-600"})]})]})]})}),r.jsx(Mt,{value:"chords",className:"space-y-4",children:r.jsxs(ye,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chord Progression"}),r.jsxs("div",{children:[r.jsx(Be,{children:"Main Progression"}),r.jsx(Bt,{value:c,onChange:C=>u(C.target.value),placeholder:"C - Am - F - G",className:"bg-gray-700 border-gray-600 mt-2","data-testid":"input-chord-progression"})]})]})}),r.jsx(Mt,{value:"production",className:"space-y-4",children:r.jsxs(ye,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Production Notes"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Be,{children:"Mixing"}),r.jsx(Bt,{value:i.mixing,onChange:C=>a({...i,mixing:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Mastering"}),r.jsx(Bt,{value:i.mastering,onChange:C=>a({...i,mastering:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Effects"}),r.jsx(Bt,{value:i.effects,onChange:C=>a({...i,effects:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Be,{children:"Style"}),r.jsxs(rt,{value:i.style,onValueChange:C=>a({...i,style:C}),children:[r.jsx(et,{className:"bg-gray-700 border-gray-600",children:r.jsx(it,{})}),r.jsxs(tt,{className:"bg-gray-800 border-gray-600",children:[r.jsx(fe,{value:"modern",children:"Modern"}),r.jsx(fe,{value:"vintage",children:"Vintage"}),r.jsx(fe,{value:"lo-fi",children:"Lo-Fi"}),r.jsx(fe,{value:"professional",children:"Professional"})]})]})]})]})]})})]})]})}function DG(){const[n,e]=x.useState(!1),[t,s]=x.useState(!1),[i,a]=x.useState(!1);x.useEffect(()=>{const u=/iPad|iPhone|iPod/.test(navigator.userAgent);e(u),u&&(()=>{try{new(window.AudioContext||window.webkitAudioContext)().state==="suspended"?a(!0):s(!0)}catch{console.warn("AudioContext not supported")}})()},[]);const c=async()=>{try{const u=new(window.AudioContext||window.webkitAudioContext);u.state==="suspended"&&await u.resume();const d=u.createOscillator(),h=u.createGain();d.connect(h),h.connect(u.destination),h.gain.setValueAtTime(0,u.currentTime),d.frequency.setValueAtTime(440,u.currentTime),d.start(u.currentTime),d.stop(u.currentTime+.1),s(!0),a(!1)}catch(u){console.error("Failed to enable audio:",u)}};return!n||t||!i?null:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx(ye,{className:"w-full max-w-md",children:r.jsxs(we,{className:"p-6 text-center",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(RO,{className:"h-12 w-12 mx-auto mb-2 text-blue-500"}),r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Enable Audio"}),r.jsx("p",{className:"text-sm text-gray-600",children:"iOS requires user interaction to enable audio. Tap the button below to activate audio for the music studio."})]}),r.jsxs(te,{onClick:c,className:"w-full",children:[r.jsx(yi,{className:"h-4 w-4 mr-2"}),"Enable Audio"]})]})})})}function FG({activeTab:n,onTabChange:e}){const t=[{id:"beatmaker",icon:"fas fa-drum",label:"Beats"},{id:"musicmixer",icon:"fas fa-sliders-h",label:"Studio"},{id:"melody",icon:"fas fa-music",label:"Melody"},{id:"professionalmixer",icon:"fas fa-mixing-board",label:"Pro"},{id:"assistant",icon:"fas fa-robot",label:"AI"},{id:"midi",icon:"fas fa-piano",label:"MIDI"}];return r.jsx("div",{className:"mobile-nav md:hidden",children:t.map(s=>r.jsxs("button",{onClick:()=>e(s.id),className:`mobile-nav-item ${n===s.id?"active":""}`,title:s.label,children:[r.jsx("i",{className:`${s.icon} text-sm mb-1`}),r.jsx("span",{className:"text-[10px]",children:s.label})]},s.id))})}const $s=x.createContext({currentPattern:{},currentMelody:[],currentLyrics:"",currentCodeMusic:{},currentLayers:[],isPlaying:!1,bpm:120,playMode:"current",setPlayMode:n=>{},activeTab:"beatmaker",currentPlaylist:null,setCurrentPlaylist:n=>{},currentPlaylistIndex:0,setCurrentPlaylistIndex:n=>{},setCurrentPattern:n=>{},setCurrentMelody:n=>{},setCurrentLyrics:n=>{},setCurrentCodeMusic:n=>{},setCurrentLayers:n=>{},playCurrentAudio:()=>Promise.resolve(),stopCurrentAudio:()=>{},playFullSong:()=>Promise.resolve(),stopFullSong:()=>{}});function st(){const[n]=vo(),e=K=>K.includes("/code-translator")?"translator":K.includes("/beat-studio")?"beatmaker":K.includes("/melody-composer")?"melody":K.includes("/codebeat-studio")?"codebeat":K.includes("/music-studio")?"musicmixer":K.includes("/pro-console")?"mixer":K.includes("/song-uploader")||K.includes("/ai-assistant")?"assistant":K.includes("/vulnerability-scanner")?"security":K.includes("/lyric-lab")?"lyrics":K.includes("/mix-studio")?"mixer":K.includes("/pack-generator")?"pack-generator":K.includes("/advanced-sequencer")?"advanced-sequencer":K.includes("/granular-engine")?"granular-engine":K.includes("/wavetable-oscillator")?"wavetable-oscillator":K.includes("/song-structure")?"song-structure":"beatmaker",[t,s]=x.useState(()=>e(n));x.useEffect(()=>{s(e(n))},[n]);const[i,a]=x.useState({}),[c,u]=x.useState([]),[d,h]=x.useState(""),[p,m]=x.useState({}),[y,b]=x.useState([]),[_,v]=x.useState(!1),[w,N]=x.useState(120),[P,C]=x.useState("current"),[A,k]=x.useState(null),[M,E]=x.useState(0),{initialize:T,isInitialized:I}=qn();x.useEffect(()=>{const K=$=>{const H=$.detail;s(H)};return window.addEventListener("navigateToTab",K),()=>{window.removeEventListener("navigateToTab",K)}},[]);const O=async()=>{switch(I||await T(),console.log(` Playing current tool only: ${t}`),t){case"beatmaker":console.log(" Playing beat pattern only:",i);break;case"melody":console.log(" Playing melody only:",c),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("playCurrentMelody"));break;case"codebeat":console.log(" Playing code-to-music only:",p);break;case"lyrics":console.log(" Playing lyrics only:",d);break;case"assistant":if(console.log(" Playing uploaded song:",A),A&&A.songs&&A.songs.length>0){const K=A.songs[M];console.log(" Playing playlist song:",K)}break;default:console.log(" Playing default audio for:",t);break}v(!0)},F=()=>{v(!1)},L=K=>({translator:"Code Translator",beatmaker:"Beat Maker",melody:"Melody Composer",codebeat:"Code to Music",musiccode:"Music to Code",assistant:"Song Uploader & AI Assistant",security:"Security Scanner",lyrics:"Lyric Lab",musicmixer:"Music Studio",professionalmixer:"Professional Audio Console",mixer:"Mixer",layers:"Dynamic Layering",midi:"MIDI Controller",metrics:"Performance Metrics","advanced-sequencer":"Advanced Sequencer","granular-engine":"Granular Engine","wavetable-oscillator":"Wavetable Oscillator","pack-generator":"Pack Generator","song-structure":"Song Structure Manager"})[K]||"Beat Maker",W={currentPattern:i,currentMelody:c,currentLyrics:d,currentCodeMusic:p,currentLayers:y,isPlaying:_,bpm:w,playMode:P,setPlayMode:C,activeTab:t,currentPlaylist:A,setCurrentPlaylist:k,currentPlaylistIndex:M,setCurrentPlaylistIndex:E,setCurrentPattern:a,setCurrentMelody:u,setCurrentLyrics:h,setCurrentCodeMusic:m,setCurrentLayers:b,playCurrentAudio:O,stopCurrentAudio:F,playFullSong:async()=>{I||await T(),console.log(" Playing ALL tools combined:"),console.log("- Beat Pattern:",i),console.log("- Melody:",c),console.log("- Lyrics:",d),console.log("- Code Music:",p),console.log("- Layers:",y),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("playAllTools",{detail:{pattern:i,melody:c,lyrics:d,codeMusic:p,layers:y,playlist:A,playlistIndex:M,bpm:w}})),v(!0)},stopFullSong:()=>{v(!1)}},G=()=>{switch(t){case"translator":return r.jsx(vL,{});case"beatmaker":return r.jsx(q1,{onBeatGenerated:K=>a(K)});case"melody":return r.jsx(fT,{});case"codebeat":return r.jsx(ET,{});case"musiccode":return r.jsx(AT,{});case"assistant":return r.jsx(EP,{});case"security":return r.jsx(AP,{});case"lyrics":return r.jsx(MP,{});case"musicmixer":return r.jsx(LU,{});case"professionalmixer":return r.jsx(IG,{});case"mixer":return r.jsx(zU,{});case"layers":return r.jsx(OP,{});case"midi":return r.jsx(DP,{});case"metrics":return r.jsx(UP,{});case"advanced-sequencer":return r.jsx(bx,{});case"granular-engine":return r.jsx(EG,{});case"wavetable-oscillator":return r.jsx(AG,{});case"pack-generator":return r.jsx(MG,{});case"song-structure":return r.jsx(OG,{});default:return r.jsx(q1,{})}};return r.jsx(a8,{children:r.jsx($s.Provider,{value:W,children:r.jsxs("div",{className:"h-screen flex bg-studio-bg text-white",children:[r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(B3,{}),r.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto pb-16 md:pb-0",children:r.jsx("div",{className:"min-w-[1600px] p-3 md:p-6 studio-content",children:G()})}),r.jsx(xL,{currentTool:L(t),activeTab:t})]}),r.jsx(FG,{activeTab:t,onTabChange:K=>s(K)}),r.jsx(DG,{})]})})})}var wg={exports:{}},Sg,X_;function LG(){if(X_)return Sg;X_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sg=n,Sg}var _g,Z_;function zG(){if(Z_)return _g;Z_=1;var n=LG();function e(){}function t(){}return t.resetWarningCache=e,_g=function(){function s(c,u,d,h,p,m){if(m!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},_g}var J_;function BG(){return J_||(J_=1,wg.exports=zG()()),wg.exports}var VG=BG();const Pt=Ls(VG);function eC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function tC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eC(Object(t),!0).forEach(function(s){YE(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eC(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Pd(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pd=function(e){return typeof e}:Pd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(n)}function YE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UG(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function $G(n,e){if(n==null)return{};var t=UG(n,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function qG(n,e){return WG(n)||GG(n,e)||HG(n,e)||KG()}function WG(n){if(Array.isArray(n))return n}function GG(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var s=[],i=!0,a=!1,c,u;try{for(t=t.call(n);!(i=(c=t.next()).done)&&(s.push(c.value),!(e&&s.length===e));i=!0);}catch(d){a=!0,u=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw u}}return s}}function HG(n,e){if(n){if(typeof n=="string")return nC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nC(n,e)}}function nC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function KG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qn=function(e,t,s){var i=!!s,a=mt.useRef(s);mt.useEffect(function(){a.current=s},[s]),mt.useEffect(function(){if(!i||!e)return function(){};var c=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,c),function(){e.off(t,c)}},[i,t,e,a])},QG=function(e){var t=mt.useRef(e);return mt.useEffect(function(){t.current=e},[e]),t.current},lh=function(e){return e!==null&&Pd(e)==="object"},sC="[object Object]",YG=function n(e,t){if(!lh(e)||!lh(t))return e===t;var s=Array.isArray(e),i=Array.isArray(t);if(s!==i)return!1;var a=Object.prototype.toString.call(e)===sC,c=Object.prototype.toString.call(t)===sC;if(a!==c)return!1;if(!a&&!s)return e===t;var u=Object.keys(e),d=Object.keys(t);if(u.length!==d.length)return!1;for(var h={},p=0;p<u.length;p+=1)h[u[p]]=!0;for(var m=0;m<d.length;m+=1)h[d[m]]=!0;var y=Object.keys(h);if(y.length!==u.length)return!1;var b=e,_=t,v=function(N){return n(b[N],_[N])};return y.every(v)},XG=function(e,t,s){return lh(e)?Object.keys(e).reduce(function(i,a){var c=!lh(t)||!YG(e[a],t[a]);return s.includes(a)?(c&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):c?tC(tC({},i||{}),{},YE({},a,e[a])):i},null):null},XE=mt.createContext(null);XE.displayName="ElementsContext";var ZG=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};Pt.any,Pt.object;Pt.func.isRequired;var ZE=mt.createContext(null);ZE.displayName="CheckoutSdkContext";var JG=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},eH=mt.createContext(null);eH.displayName="CheckoutContext";Pt.any,Pt.shape({fetchClientSecret:Pt.func.isRequired,elementsOptions:Pt.object}).isRequired;var rC=function(e){var t=mt.useContext(ZE),s=mt.useContext(XE);if(t&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?JG(t,e):ZG(s,e)},tH=["mode"],nH=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Wt=function(e,t){var s="".concat(nH(e),"Element"),i=function(d){var h=d.id,p=d.className,m=d.options,y=m===void 0?{}:m,b=d.onBlur,_=d.onFocus,v=d.onReady,w=d.onChange,N=d.onEscape,P=d.onClick,C=d.onLoadError,A=d.onLoaderStart,k=d.onNetworksChange,M=d.onConfirm,E=d.onCancel,T=d.onShippingAddressChange,I=d.onShippingRateChange,O=rC("mounts <".concat(s,">")),F="elements"in O?O.elements:null,L="checkoutSdk"in O?O.checkoutSdk:null,V=mt.useState(null),z=qG(V,2),W=z[0],G=z[1],K=mt.useRef(null),$=mt.useRef(null);Qn(W,"blur",b),Qn(W,"focus",_),Qn(W,"escape",N),Qn(W,"click",P),Qn(W,"loaderror",C),Qn(W,"loaderstart",A),Qn(W,"networkschange",k),Qn(W,"confirm",M),Qn(W,"cancel",E),Qn(W,"shippingaddresschange",T),Qn(W,"shippingratechange",I),Qn(W,"change",w);var H;v&&(e==="expressCheckout"?H=v:H=function(){v(W)}),Qn(W,"ready",H),mt.useLayoutEffect(function(){if(K.current===null&&$.current!==null&&(F||L)){var R=null;if(L)switch(e){case"payment":R=L.createPaymentElement(y);break;case"address":if("mode"in y){var U=y.mode,X=$G(y,tH);if(U==="shipping")R=L.createShippingAddressElement(X);else if(U==="billing")R=L.createBillingAddressElement(X);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":R=L.createExpressCheckoutElement(y);break;case"currencySelector":R=L.createCurrencySelectorElement();break;case"taxId":R=L.createTaxIdElement(y);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else F&&(R=F.create(e,y));K.current=R,G(R),R&&R.mount($.current)}},[F,L,y]);var ee=QG(y);return mt.useEffect(function(){if(K.current){var R=XG(y,ee,["paymentRequest"]);R&&"update"in K.current&&K.current.update(R)}},[y,ee]),mt.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),mt.createElement("div",{id:h,className:p,ref:$})},a=function(d){rC("mounts <".concat(s,">"));var h=d.id,p=d.className;return mt.createElement("div",{id:h,className:p})},c=t?a:i;return c.propTypes={id:Pt.string,className:Pt.string,onChange:Pt.func,onBlur:Pt.func,onFocus:Pt.func,onReady:Pt.func,onEscape:Pt.func,onClick:Pt.func,onLoadError:Pt.func,onLoaderStart:Pt.func,onNetworksChange:Pt.func,onConfirm:Pt.func,onCancel:Pt.func,onShippingAddressChange:Pt.func,onShippingRateChange:Pt.func,options:Pt.object},c.displayName=s,c.__elementType=e,c},Gt=typeof window>"u",sH=mt.createContext(null);sH.displayName="EmbeddedCheckoutProviderContext";Wt("auBankAccount",Gt);Wt("card",Gt);Wt("cardNumber",Gt);Wt("cardExpiry",Gt);Wt("cardCvc",Gt);Wt("fpxBank",Gt);Wt("iban",Gt);Wt("idealBank",Gt);Wt("p24Bank",Gt);Wt("epsBank",Gt);Wt("payment",Gt);Wt("expressCheckout",Gt);Wt("currencySelector",Gt);Wt("paymentRequestButton",Gt);Wt("linkAuthentication",Gt);Wt("address",Gt);Wt("shippingAddress",Gt);Wt("paymentMethodMessaging",Gt);Wt("affirmMessage",Gt);Wt("afterpayClearpayMessage",Gt);Wt("taxId",Gt);var rH="basil",JE="https://js.stripe.com",iH="".concat(JE,"/").concat(rH,"/stripe.js"),aH=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,oH=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var lH=function(e){return aH.test(e)||oH.test(e)},cH=function(){for(var e=document.querySelectorAll('script[src^="'.concat(JE,'"]')),t=0;t<e.length;t++){var s=e[t];if(lH(s.src))return s}return null},iC=function(e){var t="",s=document.createElement("script");s.src="".concat(iH).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(s),s},Pl=null,hd=null,fd=null,uH=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},dH=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},hH=function(e){return Pl!==null?Pl:(Pl=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=cH();if(!(i&&e)){if(!i)i=iC(e);else if(i&&fd!==null&&hd!==null){var a;i.removeEventListener("load",fd),i.removeEventListener("error",hd),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=iC(e)}}fd=dH(t,s),hd=uH(s),i.addEventListener("load",fd),i.addEventListener("error",hd)}catch(c){s(c);return}}),Pl.catch(function(t){return Pl=null,Promise.reject(t)}))},El,fH=function(){return El||(El=hH(null).catch(function(e){return El=null,Promise.reject(e)}),El)};Promise.resolve().then(function(){return fH()}).catch(function(n){console.warn(n)});function aC(){const[n,e]=x.useState(""),[t,s]=x.useState(!0),[i,a]=x.useState("pro");return x.useEffect(()=>{yt("POST","/api/create-subscription",{tier:i}).then(c=>c.json()).then(c=>{e(c.clientSecret),s(!1)}).catch(c=>{console.error("Subscription creation failed:",c),s(!1)})},[i]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:r.jsxs(ye,{className:"w-full max-w-md bg-gray-800/50 border-gray-700",children:[r.jsxs(_e,{className:"text-center",children:[r.jsx(Ce,{className:"text-white",children:"Payment Setup Required"}),r.jsx(Yt,{className:"text-gray-400",children:"Configure your Stripe keys to enable subscriptions"})]}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsx("p",{children:"To enable payments, you need to:"}),r.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[r.jsx("li",{children:"Set up your Stripe account"}),r.jsx("li",{children:"Create Basic ($10) and Pro ($39.99) products"}),r.jsx("li",{children:"Add your Stripe keys to environment variables"})]})]}),r.jsx(te,{onClick:()=>window.location.href="/studio",className:"w-full","data-testid":"button-back-studio",children:"Back to Studio"})]})]})})}function pH(){const[,n]=vo(),t=new URLSearchParams(window.location.search).get("session_id");return x.useEffect(()=>{const s=setTimeout(()=>{n("/studio")},5e3);return()=>clearTimeout(s)},[n]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 flex items-center justify-center p-4",children:r.jsxs(ye,{className:"w-full max-w-md bg-gray-800/50 border-gray-700",children:[r.jsxs(_e,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center",children:r.jsx(aj,{className:"w-8 h-8 text-green-400"})}),r.jsx(Ce,{className:"text-white text-2xl",children:"Payment Successful!"}),r.jsx(Yt,{className:"text-gray-300",children:"Welcome to CodedSwitch Pro! Your subscription is now active."})]}),r.jsxs(we,{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 p-4 rounded-lg border border-purple-500/30",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx(lj,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Pro Features Unlocked"})]}),r.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[r.jsx("li",{children:" Unlimited music generation"}),r.jsx("li",{children:" Advanced AI composition tools"}),r.jsx("li",{children:" Premium sample libraries"}),r.jsx("li",{children:" Commercial usage rights"})]})]}),r.jsxs("div",{className:"text-center space-y-4",children:[r.jsxs("p",{className:"text-sm text-gray-400",children:["Session ID: ",t||"N/A"]}),r.jsxs(te,{onClick:()=>n("/studio"),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[r.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Start Creating Music"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Redirecting automatically in 5 seconds..."})]})]})]})})}function mH(){const[,n]=vo();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 flex items-center justify-center p-4",children:r.jsxs(ye,{className:"w-full max-w-md bg-gray-800/50 border-gray-700",children:[r.jsxs(_e,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-orange-500/20 rounded-full flex items-center justify-center",children:r.jsx(oj,{className:"w-8 h-8 text-orange-400"})}),r.jsx(Ce,{className:"text-white text-2xl",children:"Payment Cancelled"}),r.jsx(Yt,{className:"text-gray-300",children:"Your payment was cancelled. No charges were made to your account."})]}),r.jsx(we,{className:"space-y-4",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"You can try again anytime to unlock Pro features and support our development."}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsxs(te,{onClick:()=>n("/subscribe"),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[r.jsx(Iy,{className:"mr-2 h-4 w-4"}),"Try Again"]}),r.jsxs(te,{variant:"outline",onClick:()=>n("/studio"),className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:[r.jsx(yO,{className:"mr-2 h-4 w-4"}),"Back to Studio"]})]})]})})]})})}function gH(){const[n,e]=x.useState(!1),[t,s]=x.useState(null),i=async()=>{e(!0),s(null);try{const c=await(await yt("POST","/api/test-circular-translation",{})).json();s(c)}catch(a){console.error("Test failed:",a),s({totalTests:0,passedTests:0,averageAccuracy:0,results:[],timestamp:new Date().toISOString(),success:!1,message:"Test execution failed"})}finally{e(!1)}};return r.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Circular Translation Testing"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"Real accuracy testing for code  music  code conversion"})]}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx(te,{onClick:i,disabled:n,size:"lg",className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-run-tests",children:n?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"mr-2 h-5 w-5 animate-spin"}),"Running Tests..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sr,{className:"mr-2 h-5 w-5"}),"Run Circular Translation Tests"]})})}),t&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ye,{className:"bg-gray-900 border-gray-700",children:[r.jsxs(_e,{children:[r.jsx(Ce,{className:"text-white",children:"Test Results Summary"}),r.jsxs(Yt,{children:["Completed at ",new Date(t.timestamp).toLocaleString()]})]}),r.jsxs(we,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-400","data-testid":"text-total-tests",children:t.totalTests}),r.jsx("div",{className:"text-gray-400",children:"Total Tests"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-400","data-testid":"text-passed-tests",children:t.passedTests}),r.jsx("div",{className:"text-gray-400",children:"Passed Tests"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-3xl font-bold text-yellow-400","data-testid":"text-average-accuracy",children:[t.averageAccuracy.toFixed(1),"%"]}),r.jsx("div",{className:"text-gray-400",children:"Average Accuracy"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{children:"Success Rate"}),r.jsxs("span",{children:[(t.passedTests/t.totalTests*100).toFixed(1),"%"]})]}),r.jsx(Wx,{value:t.passedTests/t.totalTests*100,className:"h-3"})]}),t.message&&r.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded text-sm","data-testid":"text-message",children:t.message})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Individual Test Results"}),t.results.map((a,c)=>r.jsxs(ye,{className:"bg-gray-900 border-gray-700",children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ce,{className:"text-white flex items-center gap-2",children:[a.passed?r.jsx(aj,{className:"h-5 w-5 text-green-400"}):r.jsx(oj,{className:"h-5 w-5 text-red-400"}),a.testName]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:a.passed?"default":"destructive",children:a.passed?"PASSED":"FAILED"}),r.jsxs(Oe,{variant:"outline",children:[a.similarityScore.toFixed(1),"% accuracy"]})]})]})}),r.jsxs(we,{children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium mb-2",children:"Original Code"}),r.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm overflow-x-auto",children:r.jsx("code",{children:a.originalCode})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium mb-2",children:"Regenerated Code"}),r.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm overflow-x-auto",children:r.jsx("code",{children:a.regeneratedCode})})]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Structural Matches:"}),r.jsxs("span",{className:"ml-2 text-white",children:[a.structuralMatches,"/",a.totalStructuralElements]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Similarity Score:"}),r.jsxs("span",{className:"ml-2 text-white",children:[a.similarityScore.toFixed(2),"%"]})]})]}),a.errors&&a.errors.length>0&&r.jsxs("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-700 rounded",children:[r.jsx("h5",{className:"text-red-400 font-medium mb-2",children:"Errors:"}),r.jsx("ul",{className:"text-red-300 text-sm space-y-1",children:a.errors.map((u,d)=>r.jsxs("li",{children:[" ",u]},d))})]})]})]},c))]})]})]})})}var of="Checkbox",[yH,TK]=wn(of),[xH,Iv]=yH(of);function vH(n){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:i,disabled:a,form:c,name:u,onCheckedChange:d,required:h,value:p="on",internal_do_not_use_render:m}=n,[y,b]=nr({prop:t,defaultProp:i??!1,onChange:d,caller:of}),[_,v]=x.useState(null),[w,N]=x.useState(null),P=x.useRef(!1),C=_?!!c||!!_.closest("form"):!0,A={checked:y,disabled:a,setChecked:b,control:_,setControl:v,name:u,form:c,value:p,hasConsumerStoppedPropagationRef:P,required:h,defaultChecked:gi(i)?!1:i,isFormControl:C,bubbleInput:w,setBubbleInput:N};return r.jsx(xH,{scope:e,...A,children:bH(m)?m(A):s})}var eA="CheckboxTrigger",tA=x.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...s},i)=>{const{control:a,value:c,disabled:u,checked:d,required:h,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:b,bubbleInput:_}=Iv(eA,n),v=qe(i,p),w=x.useRef(d);return x.useEffect(()=>{const N=a?.form;if(N){const P=()=>m(w.current);return N.addEventListener("reset",P),()=>N.removeEventListener("reset",P)}},[a,m]),r.jsx(je.button,{type:"button",role:"checkbox","aria-checked":gi(d)?"mixed":d,"aria-required":h,"data-state":aA(d),"data-disabled":u?"":void 0,disabled:u,value:c,...s,ref:v,onKeyDown:me(e,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:me(t,N=>{m(P=>gi(P)?!0:!P),_&&b&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})})});tA.displayName=eA;var Ov=x.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:i,defaultChecked:a,required:c,disabled:u,value:d,onCheckedChange:h,form:p,...m}=n;return r.jsx(vH,{__scopeCheckbox:t,checked:i,defaultChecked:a,disabled:u,required:c,onCheckedChange:h,name:s,form:p,value:d,internal_do_not_use_render:({isFormControl:y})=>r.jsxs(r.Fragment,{children:[r.jsx(tA,{...m,ref:e,__scopeCheckbox:t}),y&&r.jsx(iA,{__scopeCheckbox:t})]})})});Ov.displayName=of;var nA="CheckboxIndicator",sA=x.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...i}=n,a=Iv(nA,t);return r.jsx(Sn,{present:s||gi(a.checked)||a.checked===!0,children:r.jsx(je.span,{"data-state":aA(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});sA.displayName=nA;var rA="CheckboxBubbleInput",iA=x.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:c,required:u,disabled:d,name:h,value:p,form:m,bubbleInput:y,setBubbleInput:b}=Iv(rA,n),_=qe(t,b),v=Mh(a),w=Sh(s);x.useEffect(()=>{const P=y;if(!P)return;const C=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(C,"checked").set,M=!i.current;if(v!==a&&k){const E=new Event("click",{bubbles:M});P.indeterminate=gi(a),k.call(P,gi(a)?!1:a),P.dispatchEvent(E)}},[y,v,a,i]);const N=x.useRef(gi(a)?!1:a);return r.jsx(je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??N.current,required:u,disabled:d,name:h,value:p,form:m,...e,tabIndex:-1,ref:_,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});iA.displayName=rA;function bH(n){return typeof n=="function"}function gi(n){return n==="indeterminate"}function aA(n){return gi(n)?"indeterminate":n?"checked":"unchecked"}const oA=x.forwardRef(({className:n,...e},t)=>r.jsx(Ov,{ref:t,className:Re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:r.jsx(sA,{className:Re("flex items-center justify-center text-current"),children:r.jsx(Ry,{className:"h-4 w-4"})})}));oA.displayName=Ov.displayName;function wH(){const{toast:n}=$t(),[e,t]=x.useState(""),[s,i]=x.useState(""),[a,c]=x.useState(""),[u,d]=x.useState(""),[h,p]=x.useState([180]),[m,y]=x.useState([120]),[b,_]=x.useState("C Major"),[v,w]=x.useState(""),[N,P]=x.useState(!0),[C,A]=x.useState({piano:!1,guitar:!1,bass:!1,drums:!1,synth:!1,strings:!1,pads:!1,brass:!1}),[k,M]=x.useState(null),E=["An uplifting pop anthem about conquering challenges","A moody synthwave track for late-night coding","Energetic rock song with powerful chorus and catchy riff"],T=["Hip-Hop","Pop","Rock","Electronic","Jazz","Classical","R&B","Country","Blues","Reggae","Folk","Indie"],I=["Dark","Uplifting","Energetic","Chill","Melancholic","Aggressive","Dreamy","Mysterious","Romantic","Epic"],O=["C Major","G Major","D Major","A Major","E Major","B Major","F# Major","C# Major","F Major","Bb Major","Eb Major","Ab Major","Db Major","Gb Major","Cb Major"],F=Et({mutationFn:async()=>{const z=Object.keys(C).filter(K=>C[K]),W={songDescription:e,genre:s,mood:a,aiProvider:u,duration:h[0],bpm:m[0],key:b,style:v,includeVocals:N,instruments:z},G=await fetch("/api/music/generate-complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!G.ok)throw new Error("Failed to generate song");return G.json()},onSuccess:z=>{M(z),n({title:" Professional Song Generated!",description:"Your complete song structure is ready to explore"})},onError:z=>{n({title:"Generation Failed",description:z.message,variant:"destructive"})}}),L=z=>{const W=Math.floor(z/60),G=z%60;return`${W}:${G.toString().padStart(2,"0")}`},V=(z,W)=>{A(G=>({...G,[z]:W}))};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b border-border",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Pro Audio"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate studio-quality songs using the Grok provider"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{variant:"secondary",children:"Studio-Grade"}),r.jsx(Oe,{variant:"secondary",children:"Grok Only"}),r.jsx(Oe,{variant:"secondary",children:"Up to 8 minutes"})]})]})})}),r.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:k?r.jsxs("div",{className:"space-y-6",children:[r.jsx(ye,{children:r.jsx(_e,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ce,{className:"text-xl",children:k.title}),r.jsx("p",{className:"text-muted-foreground mt-1",children:k.description})]}),r.jsx(te,{onClick:()=>M(null),variant:"outline",children:"Generate Another Song"})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(Ao,{defaultValue:"structure",className:"space-y-4",children:[r.jsxs(pa,{className:"grid w-full grid-cols-4",children:[r.jsx(At,{value:"structure",children:"Song Structure"}),r.jsx(At,{value:"chords",children:"Chord Progression"}),r.jsx(At,{value:"production",children:"Production Notes"}),r.jsx(At,{value:"features",children:"Audio Features"})]}),r.jsx(Mt,{value:"structure",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Song Structure"})}),r.jsx(we,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-96 font-mono",children:JSON.stringify(k.structure,null,2)})})]})}),r.jsx(Mt,{value:"chords",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Chord Progression"})}),r.jsx(we,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:k.chordProgression?.map((z,W)=>r.jsx(Oe,{variant:"secondary",className:"text-base px-3 py-1",children:z},W))})})]})}),r.jsx(Mt,{value:"production",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Production Notes"})}),r.jsx(we,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-64 font-mono",children:JSON.stringify(k.productionNotes,null,2)})})]})}),r.jsx(Mt,{value:"features",children:r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Audio Features"})}),r.jsx(we,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-64 font-mono",children:JSON.stringify(k.audioFeatures,null,2)})})]})})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{className:"text-sm",children:"Metadata"})}),r.jsxs(we,{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:["Duration: ",L(k.metadata.duration)]}),r.jsxs("div",{children:["Key: ",k.metadata.key]}),r.jsxs("div",{children:["BPM: ",k.metadata.bpm]}),r.jsxs("div",{children:["Format: ",k.metadata.format]})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{className:"text-sm",children:"Chord Progression"})}),r.jsx(we,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:k.chordProgression?.slice(0,8).map((z,W)=>r.jsx(Oe,{variant:"secondary",className:"text-xs",children:z},W))})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{variant:"outline",size:"sm",className:"w-full",children:"Export Structure"}),r.jsx(te,{variant:"outline",size:"sm",className:"w-full",children:"Save Project"})]})]})]})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Generation Parameters"})}),r.jsxs(we,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Song Description"}),r.jsx(Mr,{value:e,onChange:z=>t(z.target.value),placeholder:"Describe your song idea...",className:"min-h-[100px] resize-none"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Genre"}),r.jsxs(rt,{value:s,onValueChange:i,children:[r.jsx(et,{children:r.jsx(it,{placeholder:"Select genre"})}),r.jsx(tt,{children:T.map(z=>r.jsx(fe,{value:z,children:z},z))})]})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Mood"}),r.jsxs(rt,{value:a,onValueChange:c,children:[r.jsx(et,{children:r.jsx(it,{placeholder:"Select mood"})}),r.jsx(tt,{children:I.map(z=>r.jsx(fe,{value:z,children:z},z))})]})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"AI Provider"}),r.jsxs(rt,{value:u,onValueChange:d,children:[r.jsx(et,{children:r.jsx(it,{placeholder:"No AI providers available"})}),r.jsx(tt,{children:r.jsx(fe,{value:"grok",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fs,{className:"h-4 w-4"}),"xAI Grok"]})})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs(Be,{className:"mb-2 block font-medium",children:["Duration (",L(h[0]),")"]}),r.jsx(pe,{value:h,onValueChange:p,max:480,min:30,step:30,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs(Be,{className:"mb-2 block font-medium",children:["BPM (",m[0],")"]}),r.jsx(pe,{value:m,onValueChange:y,max:200,min:60,step:5,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Key"}),r.jsxs(rt,{value:b,onValueChange:_,children:[r.jsx(et,{children:r.jsx(it,{})}),r.jsx(tt,{children:O.map(z=>r.jsx(fe,{value:z,children:z},z))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Style (Optional)"}),r.jsx(Bt,{value:v,onChange:z=>w(z.target.value),placeholder:"e.g. modern, vintage, lo-fi"})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"mb-2 block font-medium",children:"Vocals"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[r.jsx(oi,{checked:N,onCheckedChange:P}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Include lead vocals"})]})]})]}),r.jsxs("div",{children:[r.jsx(Be,{className:"mb-3 block font-medium",children:"Instruments"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(C).map(([z,W])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(oA,{checked:W,onCheckedChange:G=>V(z,G)}),r.jsx("span",{className:"text-sm capitalize",children:z})]},z))})]})]})]}),r.jsxs(ye,{children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Example Prompts"})}),r.jsx(we,{className:"space-y-3",children:E.map((z,W)=>r.jsx(te,{variant:"outline",className:"w-full text-left h-auto p-3",onClick:()=>t(z),children:z},W))})]}),r.jsx("div",{className:"text-center",children:r.jsx(te,{onClick:()=>F.mutate(),disabled:F.isPending||!e.trim(),size:"lg",className:"min-w-64 h-12",children:F.isPending?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating Professional Song..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pn,{className:"mr-2 h-5 w-5"}),"Generate Professional Song"]})})})]})})]})}function SH(){return r.jsx(wH,{})}class _H{constructor(){this.synth=null,this.isInitialized=!1,this.currentSequence=null,this.trackInstruments={},this.drumKit={}}async playSequencer(e){await this.initialize();try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose()),this.setBpm(e.bpm);const t=e.bars*e.stepsPerBar,s={};for(const a of e.tracks){const c=Array(t).fill(!1);for(const u of a.clips)for(let d=0;d<u.length;d++){const h=u.start+d;h>=0&&h<t&&(c[h]=c[h]||!!u.steps[d]?.active)}s[a.id]=c}const i=Array.from({length:t},(a,c)=>c);this.currentSequence=new zl((a,c)=>{const u=e.tracks.some(d=>d.solo);for(const d of e.tracks){const h=d.id;if(!s[h]?.[c]||d.mute||u&&!d.solo)continue;const m=this.trackInstruments[h]||this.drumKit.hihat,y=this.getAIPatternForInstrument(h,c);y?m.triggerAttackRelease(y.note||this.getDefaultNote(h),y.duration||this.getDefaultDuration(h),a,y.velocity||.8):this.triggerHardcodedPattern(h,m,a)}},i,"16n"),this.currentSequence.loop=!0,this.currentSequence.start(0),_r.start()}catch(t){console.warn("Failed to play sequencer:",t)}}getAIPatternForInstrument(e,t){return null}getDefaultNote(e){return{kick:"C1",snare:"8n",hhc:220,hho:200,tom1:"G1",tom2:"F1",tom3:"D1",ride:260,crash:220}[e]||220}getDefaultDuration(e){return{kick:"8n",snare:"8n",hhc:"16n",hho:"8n",tom1:"8n",tom2:"8n",tom3:"8n",ride:"4n",crash:"2n"}[e]||"16n"}triggerHardcodedPattern(e,t,s){switch(e){case"kick":t.triggerAttackRelease("C1","8n",s);break;case"snare":t.triggerAttackRelease("8n",s);break;case"hhc":t.triggerAttackRelease(220,"16n",s,.9);break;case"hho":t.triggerAttackRelease(200,"8n",s,.9);break;case"tom1":t.triggerAttackRelease("G1","8n",s);break;case"tom2":t.triggerAttackRelease("F1","8n",s);break;case"tom3":t.triggerAttackRelease("D1","8n",s);break;case"ride":t.triggerAttackRelease(260,"4n",s,1);break;case"crash":t.triggerAttackRelease(220,"2n",s,1);break;default:this.drumKit.hihat.triggerAttackRelease(220,"16n",s,.8)}}async initialize(){if(!this.isInitialized)try{console.log("Initializing Tone.js audio context..."),await pv(),console.log("Tone.js started, audio context state:",Zn().state),this.synth=this.synth??new tc().toDestination(),this.drumKit={kick:new ci({pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}}).toDestination(),snare:new Ev({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}}).toDestination(),hihat:new $i({envelope:{attack:.001,decay:.15,release:.02},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination()},this.trackInstruments={kick:this.drumKit.kick,snare:this.drumKit.snare,hhc:new $i({envelope:{attack:.001,decay:.12,release:.02},harmonicity:5,modulationIndex:30,resonance:5e3,octaves:1.5}).toDestination(),hho:new $i({envelope:{attack:.001,decay:.45,release:.08},harmonicity:5,modulationIndex:30,resonance:4e3,octaves:1.5}).toDestination(),tom1:new ci({octaves:4,envelope:{attack:.001,decay:.4,sustain:.01,release:.2}}).toDestination(),tom2:new ci({octaves:4,envelope:{attack:.001,decay:.5,sustain:.01,release:.25}}).toDestination(),tom3:new ci({octaves:4,envelope:{attack:.001,decay:.6,sustain:.01,release:.3}}).toDestination(),ride:new $i({envelope:{attack:.001,decay:1.2,release:.2},resonance:7e3}).toDestination(),crash:new $i({envelope:{attack:.001,decay:1.8,release:.3},resonance:6e3}).toDestination()};try{this.drumKit.hihat.volume.value=6,this.trackInstruments.hhc.volume.value=6,this.trackInstruments.hho.volume.value=6,this.trackInstruments.ride.volume.value=6,this.trackInstruments.crash.volume.value=6}catch{}console.log("Drum kit created:",Object.keys(this.drumKit)),this.isInitialized=!0}catch(e){throw console.error("Audio initialization failed:",e),e}}setBpm(e){try{_r.bpm.value=e}catch{}}async playNote(e,t="8n"){await this.initialize();try{if(!this.synth)return;this.synth.triggerAttackRelease(e,t)}catch(s){console.warn("Failed to play note:",s)}}async playMelody(e,t=120){await this.initialize();try{_r.bpm.value=t;const s=new zl((i,a)=>{this.synth&&this.synth.triggerAttackRelease(gG(a,"midi").toNote(),"8n",i)},e,"8n");s.start(),_r.start(),setTimeout(()=>{s.stop(),_r.stop(),s.dispose()},e.length*(60/t)*.5*1e3)}catch(s){console.warn("Failed to play melody:",s)}}async playBeat(e,t,s=120){await this.initialize();try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose()),_r.bpm.value=s,console.log("Playing beat pattern:",e),this.currentSequence=new zl((i,a)=>{a%4===0&&(this.drumKit.kick.triggerAttackRelease("C1","8n",i),console.log("Playing kick at step",a)),(a===4||a===12)&&(this.drumKit.snare.triggerAttackRelease("8n",i),console.log("Playing snare at step",a)),this.drumKit.hihat.triggerAttackRelease(220,"16n",i,.8),e[a]===1&&a%4!==0&&a!==4&&a!==12&&this.drumKit.kick.triggerAttackRelease("C2","16n",i+.1)},Array.from({length:16},(i,a)=>a),"16n"),this.currentSequence.start(),_r.start(),this.currentSequence.loop=!0}catch(i){console.warn("Failed to play beat:",i)}}stop(){try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose(),this.currentSequence=null),_r.stop(),_r.cancel()}catch(e){console.warn("Failed to stop audio:",e)}}dispose(){try{this.stop(),this.synth&&(this.synth.dispose(),this.synth=null),Object.values(this.drumKit).forEach(e=>e.dispose()),this.isInitialized=!1}catch(e){console.warn("Failed to dispose audio:",e)}}}const Cg=new _H,CH=["JavaScript","TypeScript","Python","Java","C#","C++","Go","Rust","PHP","Ruby","Swift","Kotlin","Dart","Scala"];function jH(){const[n,e]=x.useState(""),[t,s]=x.useState(""),[i,a]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(!1),[p,m]=x.useState([75]),[y,b]=x.useState("openai"),{toast:_}=$t(),v=Et({mutationFn:async M=>(await yt("POST","/api/code/convert-to-music",M)).json(),onSuccess:M=>{a(M),_({title:"Code converted to music!",description:`Created a musical composition in ${M.key} at ${M.tempo} BPM`})},onError:M=>{_({title:"Conversion failed",description:M.message,variant:"destructive"})}}),w=()=>{if(!n.trim()){_({title:"No code provided",description:"Please enter some code to convert",variant:"destructive"});return}if(!t){_({title:"No language selected",description:"Please select the programming language",variant:"destructive"});return}v.mutate({code:n,language:t,aiProvider:y})},N=async()=>{try{await Cg.initialize(),h(!0),_({title:"Audio ready",description:"Audio system initialized successfully"})}catch{_({title:"Audio initialization failed",description:"Please check your browser audio settings",variant:"destructive"})}},P=async()=>{if(!d){_({title:"Audio not ready",description:"Click 'Start Audio' first to enable sound",variant:"destructive"});return}if(i)if(c)Cg.stop(),u(!1);else try{await Cg.playMelody(i.melody,i.tempo),u(!0),setTimeout(()=>{u(!1)},i.melody.length*(60/i.tempo)*.5*1e3)}catch{_({title:"Playback failed",description:"Could not play the generated music",variant:"destructive"})}},C={JavaScript:`function fibonacci(n) {
  if (n <= 1) return n;
  let a = 0, b = 1;
  for (let i = 2; i <= n; i++) {
    [a, b] = [b, a + b];
  }
  return b;
}

// Recursive pattern creates ascending melody
// Loop structure adds rhythmic complexity`,Python:`import random

def generate_pattern(size):
    pattern = []
    for i in range(size):
        if i % 2 == 0:
            pattern.append(random.choice([1, 2, 3]))
        else:
            pattern.append(0)
    return pattern

# Conditional logic creates syncopated rhythm
# Random elements add harmonic variation`,Java:`public class MelodyGenerator {
    private int[] notes = {60, 62, 64, 65, 67, 69, 71, 72};
    
    public void playScale() {
        for (int note : notes) {
            System.out.println("Playing note: " + note);
            Thread.sleep(250);
        }
    }
}

// Object structure maps to chord progressions
// Array iteration creates melodic sequences`},A=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],k=M=>{const E=Math.floor(M/12)-1,T=M%12;return`${A[T]}${E}`};return r.jsx("div",{className:"min-h-screen bg-background text-foreground pt-16",children:r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"flex-1 ml-64 p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(fs,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold",children:["Code",r.jsx("span",{className:"text-purple-400",children:"Beat"})," Studio"]}),r.jsx("p",{className:"text-muted-foreground",children:"Transform your code into musical compositions with AI magic"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Oe,{variant:"secondary",children:"Revolutionary"}),r.jsx(Oe,{variant:"secondary",children:"Code Analysis"}),r.jsx(Oe,{variant:"secondary",children:"Musical Mapping"}),r.jsx(Oe,{variant:"secondary",children:"AI-Powered"})]})]}),r.jsxs(ye,{className:"bg-card border-border mb-6",children:[r.jsx(_e,{children:r.jsxs(Ce,{className:"flex items-center",children:[r.jsx(hi,{className:"mr-2 h-5 w-5 text-purple-400"}),"Code Input",r.jsx(xO,{className:"mx-4 h-5 w-5 text-purple-400"}),r.jsx(Pn,{className:"mr-2 h-5 w-5 text-pink-400"}),"Music Output"]})}),r.jsx(we,{children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Programming Language"}),r.jsxs(rt,{value:t,onValueChange:s,children:[r.jsx(et,{className:"bg-background border-border",children:r.jsx(it,{placeholder:"Select language"})}),r.jsx(tt,{children:CH.map(M=>r.jsx(fe,{value:M,children:M},M))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Provider"}),r.jsx(fa,{value:y,onValueChange:b})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Source Code"}),r.jsx(Mr,{value:n,onChange:M=>e(M.target.value),placeholder:"Enter your code here...",className:"min-h-64 font-mono bg-background border-border resize-none"})]}),t&&C[t]&&r.jsx(te,{variant:"outline",size:"sm",onClick:()=>e(C[t]),children:"Load Example Code"})]}),r.jsx("div",{className:"space-y-4",children:i?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(ye,{className:"bg-background border-border",children:r.jsxs(we,{className:"p-4",children:[!d&&r.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-purple-400",children:"Audio Setup Required"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to enable audio playback"})]}),r.jsxs(te,{onClick:N,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx(yi,{className:"mr-2 h-4 w-4"}),"Start Audio"]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(te,{onClick:P,disabled:!d,className:"w-12 h-12 rounded-full bg-purple-600/20 hover:bg-purple-600/30 disabled:opacity-50",children:c?r.jsx(ua,{className:"h-5 w-5 text-purple-400"}):r.jsx(sr,{className:"h-5 w-5 text-purple-400"})}),r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"text-foreground",children:"Generated Composition"}),r.jsxs("div",{className:"text-muted-foreground text-xs",children:[i.tempo," BPM  ",i.key]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(yi,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(pe,{value:p,onValueChange:m,max:100,min:0,className:"w-20"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ye,{className:"bg-background border-border",children:r.jsxs(we,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"Musical Key"}),r.jsx(Oe,{variant:"outline",className:"text-purple-400",children:i.key})]})}),r.jsx(ye,{className:"bg-background border-border",children:r.jsxs(we,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2 text-pink-400",children:"Tempo"}),r.jsxs(Oe,{variant:"outline",className:"text-pink-400",children:[i.tempo," BPM"]})]})})]}),r.jsx(ye,{className:"bg-background border-border",children:r.jsxs(we,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Melody Pattern"}),r.jsx("div",{className:"grid grid-cols-8 gap-1",children:i.melody.slice(0,16).map((M,E)=>r.jsx("div",{className:"p-2 bg-purple-600/20 rounded text-center text-xs font-mono",title:`MIDI Note ${M}`,children:k(M)},E))})]})}),i.rhythm&&r.jsx(ye,{className:"bg-background border-border",children:r.jsxs(we,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Rhythm Pattern"}),r.jsx("div",{className:"grid grid-cols-16 gap-1",children:i.rhythm.slice(0,16).map((M,E)=>r.jsx("div",{className:`w-4 h-4 rounded ${M?"bg-purple-400":"bg-border"}`},E))})]})})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(te,{variant:"outline",className:"flex-1",children:[r.jsx(ph,{className:"h-4 w-4 mr-2"}),"Export MIDI"]}),r.jsxs(te,{variant:"outline",className:"flex-1",children:[r.jsx(MO,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}):r.jsx("div",{className:"min-h-64 bg-background border border-dashed border-border rounded-lg flex items-center justify-center text-muted-foreground",children:"Your musical composition will appear here"})})]})})]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(te,{onClick:w,disabled:v.isPending,className:"px-8 py-3 bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white font-semibold",size:"lg",children:v.isPending?r.jsxs(r.Fragment,{children:[r.jsx(lo,{className:"mr-2 h-5 w-5 animate-spin"}),"Converting Code to Music..."]}):r.jsxs(r.Fragment,{children:[r.jsx(fs,{className:"mr-2 h-5 w-5"}),"Transform Code to Music"]})})}),i&&r.jsxs(ye,{className:"bg-card border-border mb-6",children:[r.jsx(_e,{children:r.jsx(Ce,{children:"Conversion Analysis"})}),r.jsx(we,{children:r.jsx("div",{className:"prose prose-invert max-w-none",children:r.jsx("p",{className:"text-muted-foreground",children:i.description})})})]}),r.jsxs(ye,{className:"bg-purple-500/10 border-purple-500/20",children:[r.jsx(_e,{children:r.jsx(Ce,{className:"text-purple-400",children:" How CodeBeat Fusion Works"})}),r.jsx(we,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"1. Code Analysis"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Analyzes code structure and complexity"}),r.jsx("li",{children:" Identifies patterns and loops"}),r.jsx("li",{children:" Maps function calls to melodic phrases"}),r.jsx("li",{children:" Converts variables to harmonic elements"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-pink-400",children:"2. Musical Mapping"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Conditional statements  chord changes"}),r.jsx("li",{children:" Loops  repeating musical patterns"}),r.jsx("li",{children:" Function depth  musical octaves"}),r.jsx("li",{children:" Code complexity  rhythmic density"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"3. Composition"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Generates MIDI note sequences"}),r.jsx("li",{children:" Creates rhythmic patterns"}),r.jsx("li",{children:" Assigns appropriate tempo and key"}),r.jsx("li",{children:" Produces playable musical output"})]})]})]})})]})]})})})}const NH=[{value:"piano",label:" Piano"},{value:"guitar",label:" Guitar"},{value:"bass",label:" Bass"},{value:"violin",label:" Violin"},{value:"trumpet",label:" Trumpet"},{value:"flute",label:" Flute"},{value:"synth",label:" Synth"},{value:"drums",label:" Drums"}];function lA({tracks:n,onTrackUpdate:e,selectedTrack:t,onTrackSelect:s}){return r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" Multi-Track Controls",r.jsx("span",{className:"ml-2 text-sm bg-green-600 px-2 py-1 rounded",children:"PLUGIN"})]}),r.jsx("div",{className:"space-y-4",children:n.map(i=>r.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${t===i.id?"border-blue-500 bg-gray-700":"border-gray-600 bg-gray-750"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(te,{onClick:()=>s(i.id),variant:t===i.id?"default":"outline",size:"sm",className:"min-w-[80px]",children:i.name}),r.jsxs(rt,{value:i.instrument,onValueChange:a=>e(i.id,{instrument:a}),children:[r.jsx(et,{className:"w-[140px] bg-gray-600 border-gray-500",children:r.jsx(it,{})}),r.jsx(tt,{children:NH.map(a=>r.jsx(fe,{value:a.value,children:a.label},a.value))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(te,{onClick:()=>e(i.id,{muted:!i.muted}),variant:i.muted?"destructive":"outline",size:"sm",children:i.muted?"":""}),r.jsx(te,{onClick:()=>e(i.id,{solo:!i.solo}),variant:i.solo?"default":"outline",size:"sm",className:i.solo?"bg-yellow-600 hover:bg-yellow-700":"",children:"SOLO"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Volume: ",i.volume,"%"]}),r.jsx(pe,{value:[i.volume],onValueChange:([a])=>e(i.id,{volume:a}),max:100,step:1,className:"w-full"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Pan: ",i.pan>0?"R":i.pan<0?"L":"C",Math.abs(i.pan)]}),r.jsx(pe,{value:[i.pan],onValueChange:([a])=>e(i.id,{pan:a}),min:-50,max:50,step:1,className:"w-full"})]})]})]},i.id))}),r.jsx("div",{className:"mt-4 p-3 bg-gray-700 rounded text-center",children:r.jsxs("p",{className:"text-sm text-gray-300",children:[" Multi-Track System Active | Selected: ",r.jsx("strong",{children:n.find(i=>i.id===t)?.name})]})})]})}const kH=[{note:"C",octave:5,isBlack:!1},{note:"C#",octave:5,isBlack:!0},{note:"D",octave:5,isBlack:!1},{note:"D#",octave:5,isBlack:!0},{note:"E",octave:5,isBlack:!1},{note:"F",octave:5,isBlack:!1},{note:"F#",octave:5,isBlack:!0},{note:"G",octave:5,isBlack:!1},{note:"G#",octave:5,isBlack:!0},{note:"A",octave:5,isBlack:!1},{note:"A#",octave:5,isBlack:!0},{note:"B",octave:5,isBlack:!1},{note:"C",octave:4,isBlack:!1},{note:"C#",octave:4,isBlack:!0},{note:"D",octave:4,isBlack:!1},{note:"D#",octave:4,isBlack:!0},{note:"E",octave:4,isBlack:!1},{note:"F",octave:4,isBlack:!1},{note:"F#",octave:4,isBlack:!0},{note:"G",octave:4,isBlack:!1},{note:"G#",octave:4,isBlack:!0},{note:"A",octave:4,isBlack:!1},{note:"A#",octave:4,isBlack:!0},{note:"B",octave:4,isBlack:!1}];function cA({notes:n,onNotesChange:e,selectedTrack:t,isPlaying:s,onPlayNote:i}){const[a,c]=x.useState(.5),u=(m,y)=>{const b={id:`note-${Date.now()}-${Math.random()}`,pitch:y*12+d(m),start:0,duration:a,velocity:.8,trackId:t};e([...n,b]),i(m,y,a,"piano")},d=m=>({C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11})[m]||0,h=()=>{e(n.filter(m=>m.trackId!==t))},p=n.filter(m=>m.trackId===t);return r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" Piano Roll",r.jsx("span",{className:"ml-2 text-sm bg-green-600 px-2 py-1 rounded",children:"PLUGIN"})]}),r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:["Notes: ",r.jsx("span",{className:"font-bold text-white",children:p.length})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Duration:"}),r.jsxs("select",{value:a,onChange:m=>c(parseFloat(m.target.value)),className:"bg-gray-600 text-white px-2 py-1 rounded text-sm",children:[r.jsx("option",{value:.25,children:"1/16"}),r.jsx("option",{value:.5,children:"1/8"}),r.jsx("option",{value:1,children:"1/4"}),r.jsx("option",{value:2,children:"1/2"}),r.jsx("option",{value:4,children:"Whole"})]})]})]}),r.jsx(te,{onClick:h,variant:"outline",size:"sm",className:"border-red-600 text-red-400 hover:bg-red-900",children:"Clear Track"})]}),r.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 mb-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-300",children:"Virtual Piano"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:kH.map((m,y)=>r.jsxs("button",{onClick:()=>u(m.note,m.octave),className:`
                px-3 py-6 text-xs font-medium rounded transition-all
                ${m.isBlack?"bg-gray-900 text-white border border-gray-600 hover:bg-gray-700":"bg-white text-black border border-gray-300 hover:bg-gray-100"}
                ${s?"animate-pulse":""}
              `,children:[m.note,m.octave]},`${m.note}${m.octave}-${y}`))})]}),r.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-300",children:"Note Timeline"}),p.length>0?r.jsx("div",{className:"space-y-2",children:p.map((m,y)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-2 rounded",children:[r.jsxs("div",{className:"text-sm text-white",children:["Note #",y+1," | Pitch: ",m.pitch," | Duration: ",m.duration,"s"]}),r.jsx(te,{onClick:()=>e(n.filter(b=>b.id!==m.id)),variant:"outline",size:"sm",className:"text-red-400 border-red-600 hover:bg-red-900",children:""})]},m.id))}):r.jsxs("div",{className:"text-center text-gray-500 py-8",children:[r.jsx("p",{children:"No notes in this track"}),r.jsx("p",{className:"text-sm",children:"Click piano keys above to add notes"})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-gray-700 rounded text-center",children:r.jsxs("p",{className:"text-sm text-gray-300",children:[" Piano Roll Active | Track: ",r.jsx("strong",{children:t})," | Notes: ",r.jsx("strong",{children:p.length})]})})]})}function uA({tracks:n,selectedTrack:e,isPlaying:t,onPlayDrum:s,onPlayNote:i}){const[a,c]=x.useState({}),[u,d]=x.useState(0),[h,p]=x.useState(120),m=16,y=["kick","snare","hihat","openhat","clap","crash"],b=["C","D","E","F","G","A","B"];x.useEffect(()=>{const N={};n.forEach(P=>{a[P.id]||(N[P.id]=new Array(m).fill(!1))}),Object.keys(N).length>0&&c(P=>({...P,...N}))},[n]),x.useEffect(()=>{if(!t)return;const N=setInterval(()=>{d(P=>{const C=(P+1)%m;return n.forEach(A=>{if(a[A.id]?.[C])if(A.name==="Drums"||A.instrument.includes("drum")){const k=y[C%y.length];s(k,.8)}else{const k=b[C%b.length];i(k,4,.25,A.instrument)}}),C})},60/h/4*1e3);return()=>clearInterval(N)},[t,h,a,n,s,i]);const _=(N,P)=>{c(C=>({...C,[N]:C[N]?.map((A,k)=>k===P?!A:A)||new Array(m).fill(!1)}))},v=N=>{c(P=>({...P,[N]:new Array(m).fill(!1)}))},w=N=>{c(P=>({...P,[N]:new Array(m).fill(!1).map(()=>Math.random()>.7)}))};return r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" Step Sequencer",r.jsx("span",{className:"ml-2 text-sm bg-green-600 px-2 py-1 rounded",children:"PLUGIN"})]}),r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:["BPM: ",r.jsx("span",{className:"font-bold text-white",children:h})]}),r.jsx("input",{type:"range",min:"60",max:"200",value:h,onChange:N=>p(parseInt(N.target.value)),className:"w-24"})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:["Step: ",r.jsxs("span",{className:"font-bold text-white",children:[u+1,"/16"]})]})]}),r.jsx("div",{className:"space-y-4",children:n.map(N=>r.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm font-medium ${e===N.id?"text-blue-400":"text-gray-300"}`,children:N.name}),r.jsx("span",{className:"text-xs text-gray-500",children:N.instrument})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(te,{onClick:()=>w(N.id),variant:"outline",size:"sm",className:"text-xs",children:""}),r.jsx(te,{onClick:()=>v(N.id),variant:"outline",size:"sm",className:"text-xs",children:"Clear"})]})]}),r.jsx("div",{className:"grid grid-cols-16 gap-1",children:new Array(m).fill(0).map((P,C)=>r.jsx("button",{onClick:()=>_(N.id,C),className:`
                    w-8 h-8 rounded text-xs font-bold transition-all
                    ${a[N.id]?.[C]?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}
                    ${u===C&&t?"ring-2 ring-yellow-400 animate-pulse":""}
                    ${C%4===0?"border-l-2 border-gray-500":""}
                  `,children:C+1},C))})]},N.id))}),r.jsx("div",{className:"mt-4 p-3 bg-gray-700 rounded text-center",children:r.jsxs("p",{className:"text-sm text-gray-300",children:[" Step Sequencer Active | BPM: ",r.jsx("strong",{children:h})," | Playing: ",r.jsx("strong",{children:t?"Yes":"No"})]})})]})}const Vi=({title:n,description:e})=>{console.log(` ${n}: ${e}`)};function TH(){const[n,e]=x.useState([]),[t,s]=x.useState(!1),[i,a]=x.useState("track1"),[c,u]=x.useState(120),[d,h]=x.useState({trackControls:!0,pianoRoll:!0,stepSequencer:!0}),[p,m]=x.useState([{id:"track1",name:"Lead",instrument:"piano",volume:80,pan:0,muted:!1,solo:!1},{id:"track2",name:"Bass",instrument:"bass",volume:75,pan:-10,muted:!1,solo:!1},{id:"track3",name:"Drums",instrument:"drums",volume:85,pan:0,muted:!1,solo:!1},{id:"track4",name:"Harmony",instrument:"synth",volume:65,pan:15,muted:!1,solo:!1}]);x.useEffect(()=>{Xt.initialize().then(()=>{Vi({title:"Audio Engine Ready",description:"Multi-track system initialized"})}).catch(C=>{console.error("Audio initialization failed:",C),Vi({title:"Audio Error",description:"Failed to initialize audio engine"})})},[]);const y=async(C,A=4,k=.5,M="piano")=>{try{await Xt.playNote(C,A,k,M,.8)}catch(E){console.error("Error playing note:",E)}},b=async(C,A=.8)=>{try{await Xt.playDrumSound(C,A)}catch(k){console.error("Error playing drum:",k)}},_=(C,A)=>{m(k=>k.map(M=>M.id===C?{...M,...A}:M)),Vi({title:"Track Updated",description:`${p.find(k=>k.id===C)?.name} settings changed`})},v=C=>{h(A=>({...A,[C]:!A[C]}))},w=()=>{s(!t),Vi(t?{title:"Playback Stopped",description:"Sequencer paused"}:{title:"Playback Started",description:"Multi-track sequencer playing"})},N=()=>{s(!1),Xt.stopAllSounds(),Vi({title:"Playback Stopped",description:"All sounds stopped"})},P=()=>{e([]),Vi({title:"All Notes Cleared",description:"Composition reset"})};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[" MelodyComposer V2",r.jsx("span",{className:"ml-3 text-lg bg-green-600 px-3 py-1 rounded-full",children:"PLUGIN SYSTEM"})]}),r.jsx("p",{className:"text-gray-400",children:"Professional Multi-Track Music Production with Modular Plugins"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["Tempo: ",c," BPM"]}),r.jsx("input",{type:"range",min:"60",max:"200",value:c,onChange:C=>u(parseInt(C.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Active Track"}),r.jsxs(rt,{value:i,onValueChange:a,children:[r.jsx(et,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(it,{})}),r.jsx(tt,{children:p.map(C=>r.jsxs(fe,{value:C.id,children:[C.name," (",C.instrument,")"]},C.id))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Active Plugins"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(te,{onClick:()=>v("trackControls"),variant:d.trackControls?"default":"outline",size:"sm",children:""}),r.jsx(te,{onClick:()=>v("pianoRoll"),variant:d.pianoRoll?"default":"outline",size:"sm",children:""}),r.jsx(te,{onClick:()=>v("stepSequencer"),variant:d.stepSequencer?"default":"outline",size:"sm",children:""})]})]}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx(te,{onClick:w,size:"lg",className:t?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:t?" Pause":" Play"}),r.jsx(te,{onClick:N,size:"lg",variant:"outline",children:" Stop"})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-gray-700 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"text-gray-300",children:[r.jsx("strong",{children:"Status:"})," ",t?" Playing":" Stopped"," |",r.jsx("strong",{children:" Tracks:"})," ",p.length," |",r.jsx("strong",{children:" Notes:"})," ",n.length," |",r.jsx("strong",{children:" Active:"})," ",p.find(C=>C.id===i)?.name]}),r.jsx(te,{onClick:P,variant:"outline",size:"sm",className:"border-red-600 text-red-400 hover:bg-red-900",children:" Clear All"})]})})]}),d.trackControls&&r.jsx(lA,{tracks:p,onTrackUpdate:_,selectedTrack:i,onTrackSelect:a}),d.pianoRoll&&r.jsx(cA,{notes:n,onNotesChange:e,selectedTrack:i,isPlaying:t,onPlayNote:y}),d.stepSequencer&&r.jsx(uA,{tracks:p,selectedTrack:i,isPlaying:t,onPlayDrum:b,onPlayNote:y}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" Plugin System Status"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:`p-3 rounded ${d.trackControls?"bg-green-900":"bg-gray-700"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Track Controls"}),r.jsx("div",{className:"text-xs text-gray-400",children:d.trackControls?"Active":"Disabled"})]}),r.jsxs("div",{className:`p-3 rounded ${d.pianoRoll?"bg-green-900":"bg-gray-700"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Piano Roll"}),r.jsx("div",{className:"text-xs text-gray-400",children:d.pianoRoll?"Active":"Disabled"})]}),r.jsxs("div",{className:`p-3 rounded ${d.stepSequencer?"bg-green-900":"bg-gray-700"}`,children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Step Sequencer"}),r.jsx("div",{className:"text-xs text-gray-400",children:d.stepSequencer?"Active":"Disabled"})]})]})]}),r.jsx("div",{className:"text-center text-gray-500 text-sm",children:r.jsx("p",{children:" Plugin-Based Architecture |  Multi-Track Mixing |  Real-Time Audio |  Step Sequencing"})})]})})}function PH(){return r.jsx(TH,{})}class Gi{constructor(){this.apiKey="",this.isInitialized=!1}static getInstance(){return Gi.instance||(Gi.instance=new Gi),Gi.instance}async initialize(){this.isInitialized||(console.log(" Initializing Global AI System..."),this.isInitialized=!0,console.log(" Global AI System ready - available to all plugins"))}async getContextualHelp(e,t){try{return(await(await fetch("/api/ai/contextual-help",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pluginName:e,context:t})})).json()).help||"AI assistance temporarily unavailable"}catch(s){return console.error("AI help error:",s),"AI assistance temporarily unavailable"}}async getSuggestions(e,t){try{return(await(await fetch("/api/ai/suggestions",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pluginName:e,data:t})})).json()).suggestions||[]}catch(s){return console.error("AI suggestions error:",s),[]}}async analyzeContent(e,t){try{return await(await fetch("/api/ai/analyze",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:e,content:t})})).json()}catch(s){return console.error("AI analysis error:",s),{error:"Analysis failed"}}}}class Hi{constructor(){this.midiAccess=null,this.isInitialized=!1,this.listeners=new Map}static getInstance(){return Hi.instance||(Hi.instance=new Hi),Hi.instance}async initialize(){if(!this.isInitialized)try{console.log(" Initializing Global MIDI System..."),navigator.requestMIDIAccess?(this.midiAccess=await navigator.requestMIDIAccess(),this.setupMIDIListeners(),this.isInitialized=!0,console.log(" Global MIDI System ready - available to all plugins")):console.warn(" MIDI not supported in this browser")}catch(e){console.error("MIDI initialization failed:",e)}}setupMIDIListeners(){if(this.midiAccess)for(const e of this.midiAccess.inputs.values())e.onmidimessage=t=>{this.broadcastMIDIMessage(t.data)}}broadcastMIDIMessage(e){const[t,s,i]=Array.from(e),a=t&240;this.listeners.forEach(c=>{c.forEach(u=>{u({messageType:a,note:s,velocity:i,raw:e})})})}registerPlugin(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}unregisterPlugin(e){this.listeners.delete(e)}sendMIDI(e,t){if(!this.midiAccess)return;const s=this.midiAccess.outputs.get(e);s&&s.send(t)}getDevices(){return this.midiAccess?{inputs:Array.from(this.midiAccess.inputs.values()),outputs:Array.from(this.midiAccess.outputs.values())}:{inputs:[],outputs:[]}}}class Ki{static getInstance(){return Ki.instance||(Ki.instance=new Ki),Ki.instance}async initialize(){console.log(" Initializing Global Audio System..."),await Xt.initialize(),console.log(" Global Audio System ready - available to all plugins")}async playNote(e,t,s,i,a=.8){return Xt.playNote(e,t,s,i,a)}async playDrumSound(e,t=.8){return Xt.playDrumSound(e,t)}stopAllSounds(){Xt.stopAllSounds()}setMasterVolume(e){Xt.setMasterVolume(e)}getAvailableInstruments(){return Xt.getAvailableInstruments()}isReady(){return Xt.isReady()}}class Qi{constructor(){this.plugins=new Map,this.activePlugins=new Set}static getInstance(){return Qi.instance||(Qi.instance=new Qi),Qi.instance}registerPlugin(e,t){this.plugins.set(e,t),console.log(` Plugin registered: ${e}`)}activatePlugin(e){return this.plugins.has(e)?(this.activePlugins.add(e),console.log(` Plugin activated: ${e}`),!0):!1}deactivatePlugin(e){this.activePlugins.delete(e),console.log(` Plugin deactivated: ${e}`)}getActivePlugins(){return Array.from(this.activePlugins)}getAllPlugins(){return Array.from(this.plugins.keys())}isPluginActive(e){return this.activePlugins.has(e)}}class so{constructor(){this.ai=Gi.getInstance(),this.midi=Hi.getInstance(),this.audio=Ki.getInstance(),this.registry=Qi.getInstance()}static getInstance(){return so.instance||(so.instance=new so),so.instance}async initialize(){console.log(" Initializing Global Systems Manager..."),await Promise.all([this.ai.initialize(),this.midi.initialize(),this.audio.initialize()]),console.log(" All Global Systems initialized and ready")}getAI(){return this.ai}getMIDI(){return this.midi}getAudio(){return this.audio}getRegistry(){return this.registry}}const EH=so.getInstance(),oC=Gi.getInstance();Hi.getInstance();const pd=Ki.getInstance(),Cr=Qi.getInstance();function AH(){const[n,e]=x.useState({id:"project-1",name:"New Project",code:"",music:{notes:[],tracks:[{id:"track1",name:"Lead",instrument:"piano",volume:80,pan:0,muted:!1,solo:!1},{id:"track2",name:"Bass",instrument:"bass",volume:75,pan:-10,muted:!1,solo:!1},{id:"track3",name:"Drums",instrument:"drums",volume:85,pan:0,muted:!1,solo:!1},{id:"track4",name:"Harmony",instrument:"synth",volume:65,pan:15,muted:!1,solo:!1}],tempo:120,scale:"C Major"},lyrics:"",analysis:null}),[t,s]=x.useState({codeToMusic:!0,musicToCode:!1,trackControls:!0,pianoRoll:!0,stepSequencer:!1,lyricLab:!1,songAnalyzer:!1,aiAssistant:!0,midiController:!1,codeTranslator:!1,vulnerabilityScanner:!1,packGenerator:!1}),[i,a]=x.useState(!1),[c,u]=x.useState("track1"),[d,h]=x.useState(!1);x.useEffect(()=>{(async()=>{try{await EH.initialize(),Cr.registerPlugin("codeToMusic","CodeToMusicPlugin"),Cr.registerPlugin("musicToCode","MusicToCodePlugin"),Cr.registerPlugin("trackControls","TrackControlsPlugin"),Cr.registerPlugin("pianoRoll","PianoRollPlugin"),Cr.registerPlugin("stepSequencer","StepSequencerPlugin"),Cr.registerPlugin("aiAssistant","AIAssistantPlugin"),Object.entries(t).forEach(([C,A])=>{A&&Cr.activatePlugin(C)}),h(!0)}catch(C){console.error("Failed to initialize systems:",C)}})()},[]);const p=P=>{s(C=>{const A={...C,[P]:!C[P]};return A[P]?Cr.activatePlugin(P):Cr.deactivatePlugin(P),A})},m=async()=>{if(n.code.trim())try{const P=await oC.getSuggestions("codeToMusic",{code:n.code,currentTracks:n.music.tracks,tempo:n.music.tempo}),C=[];n.code.split(`
`).filter(k=>k.trim()).forEach((k,M)=>{const E=["C","D","E","F","G","A","B"],T=E[k.length%E.length],I=4+(k.includes("function")?1:0);C.push({id:`code-note-${M}`,pitch:I*12+E.indexOf(T),start:M*.5,duration:k.includes("{")?1:.5,velocity:.8,trackId:"track1"})}),e(k=>({...k,music:{...k.music,notes:[...k.music.notes,...C]}})),console.log(" Code converted to music:",C.length,"notes generated")}catch(P){console.error("Code to music conversion failed:",P)}},y=async()=>{if(n.music.notes.length!==0)try{const P=await oC.analyzeContent("music",{notes:n.music.notes,tracks:n.music.tracks,tempo:n.music.tempo});let C=`// Generated from musical structure
`;C+=`function melody_${Date.now()}() {
`,n.music.notes.forEach((A,k)=>{const M="  ".repeat(Math.floor(A.pitch/12)-3);C+=`${M}// Note ${k+1}: Pitch ${A.pitch}
`,C+=`${M}playNote(${A.pitch}, ${A.duration});
`}),C+=`}
`,e(A=>({...A,code:C})),console.log(" Music converted to code")}catch(P){console.error("Music to code conversion failed:",P)}},b=async(P,C=4,A=.5,k="piano")=>{d&&await pd.playNote(P,C,A,k)},_=async(P,C=.8)=>{d&&await pd.playDrumSound(P,C)},v=(P,C)=>{e(A=>({...A,music:{...A.music,tracks:A.music.tracks.map(k=>k.id===P?{...k,...C}:k)}}))},w=P=>{e(C=>({...C,music:{...C.music,notes:P}}))},N=()=>{a(!i),i?(pd.stopAllSounds(),console.log(" Stopping playback")):console.log(" Starting playback")};return d?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[" CodeToMusic Studio",r.jsx("span",{className:"ml-3 text-lg bg-blue-600 px-3 py-1 rounded-full",children:"PLUGIN HOST"})]}),r.jsx("p",{className:"text-gray-400",children:"Global AI  Global MIDI  Plugin Architecture  Code  Music Translation"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Project"}),r.jsx("input",{type:"text",value:n.name,onChange:P=>e(C=>({...C,name:P.target.value})),className:"w-full bg-gray-700 border-gray-600 text-white px-3 py-2 rounded"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["Tempo: ",n.music.tempo," BPM"]}),r.jsx("input",{type:"range",min:"60",max:"200",value:n.music.tempo,onChange:P=>e(C=>({...C,music:{...C.music,tempo:parseInt(P.target.value)}})),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Active Track"}),r.jsxs(rt,{value:c,onValueChange:u,children:[r.jsx(et,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(it,{})}),r.jsx(tt,{children:n.music.tracks.map(P=>r.jsxs(fe,{value:P.id,children:[P.name," (",P.instrument,")"]},P.id))})]})]}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx(te,{onClick:N,size:"lg",className:i?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",children:i?"":""}),r.jsx(te,{onClick:()=>pd.stopAllSounds(),size:"lg",variant:"outline",children:""})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.codeToMusic&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" Code to Music",r.jsx("span",{className:"ml-2 text-sm bg-blue-600 px-2 py-1 rounded",children:"CORE"})]}),r.jsx("textarea",{value:n.code,onChange:P=>e(C=>({...C,code:P.target.value})),placeholder:"Enter your code here...",className:"w-full h-40 bg-gray-700 border-gray-600 text-white p-3 rounded mb-4 font-mono text-sm"}),r.jsx(te,{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!n.code.trim(),children:" Convert to Music"})]}),t.musicToCode&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" Music to Code",r.jsx("span",{className:"ml-2 text-sm bg-blue-600 px-2 py-1 rounded",children:"CORE"})]}),r.jsx("div",{className:"bg-gray-700 p-3 rounded mb-4 h-40 overflow-y-auto",children:r.jsx("pre",{className:"text-white text-sm font-mono",children:n.code||"// Generated code will appear here..."})}),r.jsx(te,{onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700",disabled:n.music.notes.length===0,children:" Convert to Code"})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:" Plugin Manager"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Object.entries(t).map(([P,C])=>r.jsx(te,{onClick:()=>p(P),variant:C?"default":"outline",size:"sm",className:"text-xs",children:P.replace(/([A-Z])/g," $1").trim()},P))}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-700 rounded text-sm text-gray-300",children:[r.jsx("strong",{children:"Active:"})," ",Object.values(t).filter(Boolean).length," plugins |",r.jsx("strong",{children:" Notes:"})," ",n.music.notes.length," |",r.jsx("strong",{children:" Tracks:"})," ",n.music.tracks.length]})]}),t.trackControls&&r.jsx(lA,{tracks:n.music.tracks,onTrackUpdate:v,selectedTrack:c,onTrackSelect:u}),t.pianoRoll&&r.jsx(cA,{notes:n.music.notes,onNotesChange:w,selectedTrack:c,isPlaying:i,onPlayNote:b}),t.stepSequencer&&r.jsx(uA,{tracks:n.music.tracks,selectedTrack:c,isPlaying:i,onPlayDrum:_,onPlayNote:b}),t.aiAssistant&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 text-white flex items-center",children:[" AI Assistant",r.jsx("span",{className:"ml-2 text-sm bg-green-600 px-2 py-1 rounded",children:"GLOBAL AI"})]}),r.jsxs("div",{className:"text-center text-gray-400 py-8",children:[r.jsx("p",{children:"AI Assistant ready to help with any plugin"}),r.jsx("p",{className:"text-sm",children:"Context-aware suggestions  Real-time analysis  Smart automation"})]})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:"p-3 bg-green-900 rounded",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Global AI"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Ready"})]}),r.jsxs("div",{className:"p-3 bg-blue-900 rounded",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Global MIDI"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Ready"})]}),r.jsxs("div",{className:"p-3 bg-purple-900 rounded",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("div",{className:"text-sm text-white font-medium",children:"Global Audio"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Ready"})]})]})})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Initializing CodeToMusic Studio"}),r.jsx("p",{className:"text-gray-400",children:"Loading global AI, MIDI, and audio systems..."})]})})}function MH(){return r.jsx(AH,{})}const RH=()=>{const[n]=vo(),e=x.useRef(n);x.useEffect(()=>{n!==e.current&&(e.current=n)},[n])};function IH(){return RH(),r.jsxs(vC,{children:[r.jsx($e,{path:"/",component:w2}),r.jsx($e,{path:"/dashboard",component:F3}),r.jsx($e,{path:"/music-studio",component:st}),r.jsx($e,{path:"/song-uploader",component:st}),r.jsx($e,{path:"/beat-studio",component:st}),r.jsx($e,{path:"/melody-composer",component:st}),r.jsx($e,{path:"/unified-studio",component:st}),r.jsx($e,{path:"/code-translator",component:st}),r.jsx($e,{path:"/codebeat-studio",component:st}),r.jsx($e,{path:"/lyric-lab",component:st}),r.jsx($e,{path:"/vulnerability-scanner",component:st}),r.jsx($e,{path:"/ai-assistant",component:st}),r.jsx($e,{path:"/mix-studio",component:st}),r.jsx($e,{path:"/pro-console",component:st}),r.jsx($e,{path:"/midi-controller",component:st}),r.jsx($e,{path:"/advanced-sequencer",component:st}),r.jsx($e,{path:"/granular-engine",component:st}),r.jsx($e,{path:"/wavetable-oscillator",component:st}),r.jsx($e,{path:"/pack-generator",component:st}),r.jsx($e,{path:"/song-structure",component:st}),r.jsx($e,{path:"/subscribe",component:aC}),r.jsx($e,{path:"/billing/success",component:pH}),r.jsx($e,{path:"/billing/cancel",component:mH}),r.jsx($e,{path:"/settings",component:st}),r.jsx($e,{path:"/studio",component:st}),r.jsx($e,{path:"/subscribe",component:aC}),r.jsx($e,{path:"/test-circular",component:gH}),r.jsx($e,{component:D3})]})}function on({children:n}){return r.jsxs("div",{className:"flex h-screen",children:[r.jsx(I3,{}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(A3,{}),r.jsx("main",{className:"flex-1 overflow-x-auto overflow-y-auto",children:r.jsx("div",{className:"min-w-[1400px] w-full h-full",children:n})})]})]})}function OH(){return x.useEffect(()=>{console.warn("Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID")},[]),r.jsx(rI,{client:ky,children:r.jsxs(s5,{children:[r.jsx(v4,{}),r.jsxs(vC,{children:[r.jsx($e,{path:"/",component:w2}),r.jsx($e,{path:"/music-studio",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/song-uploader",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/beat-studio",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/melody-composer",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/code-translator",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/codebeat-studio",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/lyric-lab",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/vulnerability-scanner",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/ai-assistant",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/mix-studio",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/pro-console",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/midi-controller",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/song-structure",children:r.jsx(on,{children:r.jsx(st,{})})}),r.jsx($e,{path:"/pro-audio",children:r.jsx(on,{children:r.jsx(SH,{})})}),r.jsx($e,{path:"/codebeat-studio-direct",children:r.jsx(on,{children:r.jsx(jH,{})})}),r.jsx($e,{path:"/melody-composer-v2",children:r.jsx(on,{children:r.jsx(PH,{})})}),r.jsx($e,{path:"/code-to-music-studio",children:r.jsx(on,{children:r.jsx(MH,{})})}),r.jsx($e,{path:"*",children:r.jsx(on,{children:r.jsx(IH,{})})})]})]})})}gR.createRoot(document.getElementById("root")).render(r.jsx(OH,{}));
