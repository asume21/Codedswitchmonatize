function UM(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ys(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $M(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var om={exports:{}},jl={},lm={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function qM(){if(vw)return rt;vw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function w(M,W,J){this.props=M,this.context=W,this.refs=x,this.updater=J||b}w.prototype.isReactComponent={},w.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=w.prototype;function E(M,W,J){this.props=M,this.context=W,this.refs=x,this.updater=J||b}var C=E.prototype=new N;C.constructor=E,S(C,w.prototype),C.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,R={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function j(M,W,J){var de,ce={},pe=null,F=null;if(W!=null)for(de in W.ref!==void 0&&(F=W.ref),W.key!==void 0&&(pe=""+W.key),W)P.call(W,de)&&!T.hasOwnProperty(de)&&(ce[de]=W[de]);var L=arguments.length-2;if(L===1)ce.children=J;else if(1<L){for(var re=Array(L),oe=0;oe<L;oe++)re[oe]=arguments[oe+2];ce.children=re}if(M&&M.defaultProps)for(de in L=M.defaultProps,L)ce[de]===void 0&&(ce[de]=L[de]);return{$$typeof:n,type:M,key:pe,ref:F,props:ce,_owner:R.current}}function O(M,W){return{$$typeof:n,type:M.type,key:W,ref:M.ref,props:M.props,_owner:M._owner}}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function D(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return W[J]})}var B=/\/+/g;function H(M,W){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):W.toString(36)}function z(M,W,J,de,ce){var pe=typeof M;(pe==="undefined"||pe==="boolean")&&(M=null);var F=!1;if(M===null)F=!0;else switch(pe){case"string":case"number":F=!0;break;case"object":switch(M.$$typeof){case n:case e:F=!0}}if(F)return F=M,ce=ce(F),M=de===""?"."+H(F,0):de,A(ce)?(J="",M!=null&&(J=M.replace(B,"$&/")+"/"),z(ce,W,J,"",function(oe){return oe})):ce!=null&&(I(ce)&&(ce=O(ce,J+(!ce.key||F&&F.key===ce.key?"":(""+ce.key).replace(B,"$&/")+"/")+M)),W.push(ce)),1;if(F=0,de=de===""?".":de+":",A(M))for(var L=0;L<M.length;L++){pe=M[L];var re=de+H(pe,L);F+=z(pe,W,J,re,ce)}else if(re=g(M),typeof re=="function")for(M=re.call(M),L=0;!(pe=M.next()).done;)pe=pe.value,re=de+H(pe,L++),F+=z(pe,W,J,re,ce);else if(pe==="object")throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return F}function G(M,W,J){if(M==null)return M;var de=[],ce=0;return z(M,de,"","",function(pe){return W.call(J,pe,ce++)}),de}function Q(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var X={current:null},q={transition:null},U={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:q,ReactCurrentOwner:R};function Y(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:G,forEach:function(M,W,J){G(M,function(){W.apply(this,arguments)},J)},count:function(M){var W=0;return G(M,function(){W++}),W},toArray:function(M){return G(M,function(W){return W})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},rt.Component=w,rt.Fragment=t,rt.Profiler=i,rt.PureComponent=E,rt.StrictMode=s,rt.Suspense=d,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,rt.act=Y,rt.cloneElement=function(M,W,J){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var de=S({},M.props),ce=M.key,pe=M.ref,F=M._owner;if(W!=null){if(W.ref!==void 0&&(pe=W.ref,F=R.current),W.key!==void 0&&(ce=""+W.key),M.type&&M.type.defaultProps)var L=M.type.defaultProps;for(re in W)P.call(W,re)&&!T.hasOwnProperty(re)&&(de[re]=W[re]===void 0&&L!==void 0?L[re]:W[re])}var re=arguments.length-2;if(re===1)de.children=J;else if(1<re){L=Array(re);for(var oe=0;oe<re;oe++)L[oe]=arguments[oe+2];de.children=L}return{$$typeof:n,type:M.type,key:ce,ref:pe,props:de,_owner:F}},rt.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},rt.createElement=j,rt.createFactory=function(M){var W=j.bind(null,M);return W.type=M,W},rt.createRef=function(){return{current:null}},rt.forwardRef=function(M){return{$$typeof:u,render:M}},rt.isValidElement=I,rt.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:Q}},rt.memo=function(M,W){return{$$typeof:h,type:M,compare:W===void 0?null:W}},rt.startTransition=function(M){var W=q.transition;q.transition={};try{M()}finally{q.transition=W}},rt.unstable_act=Y,rt.useCallback=function(M,W){return X.current.useCallback(M,W)},rt.useContext=function(M){return X.current.useContext(M)},rt.useDebugValue=function(){},rt.useDeferredValue=function(M){return X.current.useDeferredValue(M)},rt.useEffect=function(M,W){return X.current.useEffect(M,W)},rt.useId=function(){return X.current.useId()},rt.useImperativeHandle=function(M,W,J){return X.current.useImperativeHandle(M,W,J)},rt.useInsertionEffect=function(M,W){return X.current.useInsertionEffect(M,W)},rt.useLayoutEffect=function(M,W){return X.current.useLayoutEffect(M,W)},rt.useMemo=function(M,W){return X.current.useMemo(M,W)},rt.useReducer=function(M,W,J){return X.current.useReducer(M,W,J)},rt.useRef=function(M){return X.current.useRef(M)},rt.useState=function(M){return X.current.useState(M)},rt.useSyncExternalStore=function(M,W,J){return X.current.useSyncExternalStore(M,W,J)},rt.useTransition=function(){return X.current.useTransition()},rt.version="18.3.1",rt}var bw;function oc(){return bw||(bw=1,lm.exports=qM()),lm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function GM(){if(ww)return jl;ww=1;var n=oc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var f,m={},g=null,b=null;h!==void 0&&(g=""+h),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(b=d.ref);for(f in d)s.call(d,f)&&!a.hasOwnProperty(f)&&(m[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:e,type:u,key:g,ref:b,props:m,_owner:i.current}}return jl.Fragment=t,jl.jsx=l,jl.jsxs=l,jl}var Sw;function WM(){return Sw||(Sw=1,om.exports=GM()),om.exports}var r=WM(),Wu={},cm={exports:{}},Hn={},um={exports:{}},dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function HM(){return _w||(_w=1,(function(n){function e(q,U){var Y=q.length;q.push(U);e:for(;0<Y;){var M=Y-1>>>1,W=q[M];if(0<i(W,U))q[M]=U,q[Y]=W,Y=M;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var U=q[0],Y=q.pop();if(Y!==U){q[0]=Y;e:for(var M=0,W=q.length,J=W>>>1;M<J;){var de=2*(M+1)-1,ce=q[de],pe=de+1,F=q[pe];if(0>i(ce,Y))pe<W&&0>i(F,ce)?(q[M]=F,q[pe]=Y,M=pe):(q[M]=ce,q[de]=Y,M=de);else if(pe<W&&0>i(F,Y))q[M]=F,q[pe]=Y,M=pe;else break e}}return U}function i(q,U){var Y=q.sortIndex-U.sortIndex;return Y!==0?Y:q.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],f=1,m=null,g=3,b=!1,S=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var U=t(h);U!==null;){if(U.callback===null)s(h);else if(U.startTime<=q)s(h),U.sortIndex=U.expirationTime,e(d,U);else break;U=t(h)}}function A(q){if(x=!1,C(q),!S)if(t(d)!==null)S=!0,Q(P);else{var U=t(h);U!==null&&X(A,U.startTime-q)}}function P(q,U){S=!1,x&&(x=!1,N(j),j=-1),b=!0;var Y=g;try{for(C(U),m=t(d);m!==null&&(!(m.expirationTime>U)||q&&!D());){var M=m.callback;if(typeof M=="function"){m.callback=null,g=m.priorityLevel;var W=M(m.expirationTime<=U);U=n.unstable_now(),typeof W=="function"?m.callback=W:m===t(d)&&s(d),C(U)}else s(d);m=t(d)}if(m!==null)var J=!0;else{var de=t(h);de!==null&&X(A,de.startTime-U),J=!1}return J}finally{m=null,g=Y,b=!1}}var R=!1,T=null,j=-1,O=5,I=-1;function D(){return!(n.unstable_now()-I<O)}function B(){if(T!==null){var q=n.unstable_now();I=q;var U=!0;try{U=T(!0,q)}finally{U?H():(R=!1,T=null)}}else R=!1}var H;if(typeof E=="function")H=function(){E(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=B,H=function(){G.postMessage(null)}}else H=function(){w(B,0)};function Q(q){T=q,R||(R=!0,H())}function X(q,U){j=w(function(){q(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,Q(P))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var Y=g;g=U;try{return q()}finally{g=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,U){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Y=g;g=q;try{return U()}finally{g=Y}},n.unstable_scheduleCallback=function(q,U,Y){var M=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?M+Y:M):Y=M,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,q={id:f++,callback:U,priorityLevel:q,startTime:Y,expirationTime:W,sortIndex:-1},Y>M?(q.sortIndex=Y,e(h,q),t(d)===null&&q===t(h)&&(x?(N(j),j=-1):x=!0,X(A,Y-M))):(q.sortIndex=W,e(d,q),S||b||(S=!0,Q(P))),q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(q){var U=g;return function(){var Y=g;g=U;try{return q.apply(this,arguments)}finally{g=Y}}}})(dm)),dm}var Cw;function KM(){return Cw||(Cw=1,um.exports=HM()),um.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function QM(){if(jw)return Hn;jw=1;var n=oc(),e=KM();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)s.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(o){return d.call(m,o)?!0:d.call(f,o)?!1:h.test(o)?m[o]=!0:(f[o]=!0,!1)}function b(o,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,p,y){if(c===null||typeof c>"u"||b(o,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,p,y,_,k,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=_,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=V}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];w[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(N,E);w[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(N,E);w[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(N,E);w[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,p,y){var _=w.hasOwnProperty(c)?w[c]:null;(_!==null?_.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,p,_,y)&&(p=null),y||_===null?g(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):_.mustUseProperty?o[_.propertyName]=p===null?_.type===3?!1:"":p:(c=_.attributeName,y=_.attributeNamespace,p===null?o.removeAttribute(c):(_=_.type,p=_===3||_===4&&p===!0?"":""+p,y?o.setAttributeNS(y,c,p):o.setAttribute(c,p))))}var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),R=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),q=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var Y=Object.assign,M;function W(o){if(M===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);M=c&&c[1]||""}return`
`+M+o}var J=!1;function de(o,c){if(!o||J)return"";J=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ue){var y=ue}Reflect.construct(o,[],c)}else{try{c.call()}catch(ue){y=ue}o.call(c.prototype)}else{try{throw Error()}catch(ue){y=ue}o()}}catch(ue){if(ue&&y&&typeof ue.stack=="string"){for(var _=ue.stack.split(`
`),k=y.stack.split(`
`),V=_.length-1,K=k.length-1;1<=V&&0<=K&&_[V]!==k[K];)K--;for(;1<=V&&0<=K;V--,K--)if(_[V]!==k[K]){if(V!==1||K!==1)do if(V--,K--,0>K||_[V]!==k[K]){var Z=`
`+_[V].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=V&&0<=K);break}}}finally{J=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?W(o):""}function ce(o){switch(o.tag){case 5:return W(o.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return o=de(o.type,!1),o;case 11:return o=de(o.type.render,!1),o;case 1:return o=de(o.type,!0),o;default:return""}}function pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case R:return"Portal";case O:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case D:return(o.displayName||"Context")+".Consumer";case I:return(o._context.displayName||"Context")+".Provider";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case G:return c=o.displayName||null,c!==null?c:pe(o.type)||"Memo";case Q:c=o._payload,o=o._init;try{return pe(o(c))}catch{}}return null}function F(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(c);case 8:return c===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function L(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function re(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function oe(o){var c=re(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,k=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return _.call(this)},set:function(V){y=""+V,k.call(this,V)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(V){y=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function we(o){o._valueTracker||(o._valueTracker=oe(o))}function te(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=re(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function fe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ve(o,c){var p=c.checked;return Y({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function he(o,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=L(c.value!=null?c.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ce(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function Le(o,c){Ce(o,c);var p=L(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?qe(o,c.type,p):c.hasOwnProperty("defaultValue")&&qe(o,c.type,L(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function ze(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function qe(o,c,p){(c!=="number"||fe(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var et=Array.isArray;function ke(o,c,p,y){if(o=o.options,c){c={};for(var _=0;_<p.length;_++)c["$"+p[_]]=!0;for(p=0;p<o.length;p++)_=c.hasOwnProperty("$"+o[p].value),o[p].selected!==_&&(o[p].selected=_),_&&y&&(o[p].defaultSelected=!0)}else{for(p=""+L(p),c=null,_=0;_<o.length;_++){if(o[_].value===p){o[_].selected=!0,y&&(o[_].defaultSelected=!0);return}c!==null||o[_].disabled||(c=o[_])}c!==null&&(c.selected=!0)}}function it(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function lt(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(t(92));if(et(p)){if(1<p.length)throw Error(t(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:L(p)}}function Sn(o,c){var p=L(c.value),y=L(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function Kr(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ja(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bo(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ja(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var zi,Na=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,_){MSApp.execUnsafeLocalFunction(function(){return o(c,p,y,_)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=zi.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Ui(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bp=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(o){bp.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),jr[c]=jr[o]})});function zo(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||jr.hasOwnProperty(o)&&jr[o]?(""+c).trim():c+"px"}function Uo(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,_=zo(p,c[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,_):o[p]=_}}var wp=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function se(o,c){if(c){if(wp[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function at(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=null;function Nt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Jn=null,js=null,xn=null;function Fc(o){if(o=ul(o)){if(typeof Jn!="function")throw Error(t(280));var c=o.stateNode;c&&(c=au(c),Jn(o.stateNode,o.type,c))}}function Dc(o){js?xn?xn.push(o):xn=[o]:js=o}function Qr(){if(js){var o=js,c=xn;if(xn=js=null,Fc(o),c)for(o=0;o<c.length;o++)Fc(c[o])}}function Sp(o,c){return o(c)}function Bv(){}var _p=!1;function zv(o,c,p){if(_p)return o(c,p);_p=!0;try{return Sp(o,c,p)}finally{_p=!1,(js!==null||xn!==null)&&(Bv(),Qr())}}function $o(o,c){var p=o.stateNode;if(p===null)return null;var y=au(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,c,typeof p));return p}var Cp=!1;if(u)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{Cp=!1}function KP(o,c,p,y,_,k,V,K,Z){var ue=Array.prototype.slice.call(arguments,3);try{c.apply(p,ue)}catch(xe){this.onError(xe)}}var Go=!1,Vc=null,Lc=!1,jp=null,QP={onError:function(o){Go=!0,Vc=o}};function YP(o,c,p,y,_,k,V,K,Z){Go=!1,Vc=null,KP.apply(QP,arguments)}function XP(o,c,p,y,_,k,V,K,Z){if(YP.apply(this,arguments),Go){if(Go){var ue=Vc;Go=!1,Vc=null}else throw Error(t(198));Lc||(Lc=!0,jp=ue)}}function $i(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function Uv(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function $v(o){if($i(o)!==o)throw Error(t(188))}function ZP(o){var c=o.alternate;if(!c){if(c=$i(o),c===null)throw Error(t(188));return c!==o?null:o}for(var p=o,y=c;;){var _=p.return;if(_===null)break;var k=_.alternate;if(k===null){if(y=_.return,y!==null){p=y;continue}break}if(_.child===k.child){for(k=_.child;k;){if(k===p)return $v(_),o;if(k===y)return $v(_),c;k=k.sibling}throw Error(t(188))}if(p.return!==y.return)p=_,y=k;else{for(var V=!1,K=_.child;K;){if(K===p){V=!0,p=_,y=k;break}if(K===y){V=!0,y=_,p=k;break}K=K.sibling}if(!V){for(K=k.child;K;){if(K===p){V=!0,p=k,y=_;break}if(K===y){V=!0,y=k,p=_;break}K=K.sibling}if(!V)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:c}function qv(o){return o=ZP(o),o!==null?Gv(o):null}function Gv(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Gv(o);if(c!==null)return c;o=o.sibling}return null}var Wv=e.unstable_scheduleCallback,Hv=e.unstable_cancelCallback,JP=e.unstable_shouldYield,eE=e.unstable_requestPaint,qt=e.unstable_now,tE=e.unstable_getCurrentPriorityLevel,Np=e.unstable_ImmediatePriority,Kv=e.unstable_UserBlockingPriority,Bc=e.unstable_NormalPriority,nE=e.unstable_LowPriority,Qv=e.unstable_IdlePriority,zc=null,nr=null;function sE(o){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(zc,o,void 0,(o.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:aE,rE=Math.log,iE=Math.LN2;function aE(o){return o>>>=0,o===0?32:31-(rE(o)/iE|0)|0}var Uc=64,$c=4194304;function Wo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function qc(o,c){var p=o.pendingLanes;if(p===0)return 0;var y=0,_=o.suspendedLanes,k=o.pingedLanes,V=p&268435455;if(V!==0){var K=V&~_;K!==0?y=Wo(K):(k&=V,k!==0&&(y=Wo(k)))}else V=p&~_,V!==0?y=Wo(V):k!==0&&(y=Wo(k));if(y===0)return 0;if(c!==0&&c!==y&&(c&_)===0&&(_=y&-y,k=c&-c,_>=k||_===16&&(k&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)p=31-Ns(c),_=1<<p,y|=o[p],c&=~_;return y}function oE(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lE(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,_=o.expirationTimes,k=o.pendingLanes;0<k;){var V=31-Ns(k),K=1<<V,Z=_[V];Z===-1?((K&p)===0||(K&y)!==0)&&(_[V]=oE(K,c)):Z<=c&&(o.expiredLanes|=K),k&=~K}}function kp(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Yv(){var o=Uc;return Uc<<=1,(Uc&4194240)===0&&(Uc=64),o}function Tp(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Ho(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Ns(c),o[c]=p}function cE(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var _=31-Ns(p),k=1<<_;c[_]=0,y[_]=-1,o[_]=-1,p&=~k}}function Ap(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-Ns(p),_=1<<y;_&c|o[y]&c&&(o[y]|=c),p&=~_}}var xt=0;function Xv(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Zv,Pp,Jv,e0,t0,Ep=!1,Gc=[],Yr=null,Xr=null,Zr=null,Ko=new Map,Qo=new Map,Jr=[],uE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(o,c){switch(o){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ko.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(c.pointerId)}}function Yo(o,c,p,y,_,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[_]},c!==null&&(c=ul(c),c!==null&&Pp(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),o)}function dE(o,c,p,y,_){switch(c){case"focusin":return Yr=Yo(Yr,o,c,p,y,_),!0;case"dragenter":return Xr=Yo(Xr,o,c,p,y,_),!0;case"mouseover":return Zr=Yo(Zr,o,c,p,y,_),!0;case"pointerover":var k=_.pointerId;return Ko.set(k,Yo(Ko.get(k)||null,o,c,p,y,_)),!0;case"gotpointercapture":return k=_.pointerId,Qo.set(k,Yo(Qo.get(k)||null,o,c,p,y,_)),!0}return!1}function s0(o){var c=qi(o.target);if(c!==null){var p=$i(c);if(p!==null){if(c=p.tag,c===13){if(c=Uv(p),c!==null){o.blockedOn=c,t0(o.priority,function(){Jv(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wc(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=Rp(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);ln=y,p.target.dispatchEvent(y),ln=null}else return c=ul(p),c!==null&&Pp(c),o.blockedOn=p,!1;c.shift()}return!0}function r0(o,c,p){Wc(o)&&p.delete(c)}function hE(){Ep=!1,Yr!==null&&Wc(Yr)&&(Yr=null),Xr!==null&&Wc(Xr)&&(Xr=null),Zr!==null&&Wc(Zr)&&(Zr=null),Ko.forEach(r0),Qo.forEach(r0)}function Xo(o,c){o.blockedOn===c&&(o.blockedOn=null,Ep||(Ep=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hE)))}function Zo(o){function c(_){return Xo(_,o)}if(0<Gc.length){Xo(Gc[0],o);for(var p=1;p<Gc.length;p++){var y=Gc[p];y.blockedOn===o&&(y.blockedOn=null)}}for(Yr!==null&&Xo(Yr,o),Xr!==null&&Xo(Xr,o),Zr!==null&&Xo(Zr,o),Ko.forEach(c),Qo.forEach(c),p=0;p<Jr.length;p++)y=Jr[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<Jr.length&&(p=Jr[0],p.blockedOn===null);)s0(p),p.blockedOn===null&&Jr.shift()}var ka=A.ReactCurrentBatchConfig,Hc=!0;function pE(o,c,p,y){var _=xt,k=ka.transition;ka.transition=null;try{xt=1,Mp(o,c,p,y)}finally{xt=_,ka.transition=k}}function fE(o,c,p,y){var _=xt,k=ka.transition;ka.transition=null;try{xt=4,Mp(o,c,p,y)}finally{xt=_,ka.transition=k}}function Mp(o,c,p,y){if(Hc){var _=Rp(o,c,p,y);if(_===null)Yp(o,c,y,Kc,p),n0(o,y);else if(dE(_,o,c,p,y))y.stopPropagation();else if(n0(o,y),c&4&&-1<uE.indexOf(o)){for(;_!==null;){var k=ul(_);if(k!==null&&Zv(k),k=Rp(o,c,p,y),k===null&&Yp(o,c,y,Kc,p),k===_)break;_=k}_!==null&&y.stopPropagation()}else Yp(o,c,y,null,p)}}var Kc=null;function Rp(o,c,p,y){if(Kc=null,o=Nt(y),o=qi(o),o!==null)if(c=$i(o),c===null)o=null;else if(p=c.tag,p===13){if(o=Uv(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Kc=o,null}function i0(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tE()){case Np:return 1;case Kv:return 4;case Bc:case nE:return 16;case Qv:return 536870912;default:return 16}default:return 16}}var ei=null,Op=null,Qc=null;function a0(){if(Qc)return Qc;var o,c=Op,p=c.length,y,_="value"in ei?ei.value:ei.textContent,k=_.length;for(o=0;o<p&&c[o]===_[o];o++);var V=p-o;for(y=1;y<=V&&c[p-y]===_[k-y];y++);return Qc=_.slice(o,1<y?1-y:void 0)}function Yc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Xc(){return!0}function o0(){return!1}function es(o){function c(p,y,_,k,V){this._reactName=p,this._targetInst=_,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var K in o)o.hasOwnProperty(K)&&(p=o[K],this[K]=p?p(k):k[K]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Xc:o0,this.isPropagationStopped=o0,this}return Y(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),c}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ip=es(Ta),Jo=Y({},Ta,{view:0,detail:0}),mE=es(Jo),Fp,Dp,el,Zc=Y({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==el&&(el&&o.type==="mousemove"?(Fp=o.screenX-el.screenX,Dp=o.screenY-el.screenY):Dp=Fp=0,el=o),Fp)},movementY:function(o){return"movementY"in o?o.movementY:Dp}}),l0=es(Zc),gE=Y({},Zc,{dataTransfer:0}),yE=es(gE),xE=Y({},Jo,{relatedTarget:0}),Vp=es(xE),vE=Y({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),bE=es(vE),wE=Y({},Ta,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),SE=es(wE),_E=Y({},Ta,{data:0}),c0=es(_E),CE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kE(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=NE[o])?!!c[o]:!1}function Lp(){return kE}var TE=Y({},Jo,{key:function(o){if(o.key){var c=CE[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Yc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jE[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lp,charCode:function(o){return o.type==="keypress"?Yc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),AE=es(TE),PE=Y({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u0=es(PE),EE=Y({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lp}),ME=es(EE),RE=Y({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),OE=es(RE),IE=Y({},Zc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),FE=es(IE),DE=[9,13,27,32],Bp=u&&"CompositionEvent"in window,tl=null;u&&"documentMode"in document&&(tl=document.documentMode);var VE=u&&"TextEvent"in window&&!tl,d0=u&&(!Bp||tl&&8<tl&&11>=tl),h0=" ",p0=!1;function f0(o,c){switch(o){case"keyup":return DE.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Aa=!1;function LE(o,c){switch(o){case"compositionend":return m0(c);case"keypress":return c.which!==32?null:(p0=!0,h0);case"textInput":return o=c.data,o===h0&&p0?null:o;default:return null}}function BE(o,c){if(Aa)return o==="compositionend"||!Bp&&f0(o,c)?(o=a0(),Qc=Op=ei=null,Aa=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return d0&&c.locale!=="ko"?null:c.data;default:return null}}var zE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!zE[o.type]:c==="textarea"}function y0(o,c,p,y){Dc(y),c=su(c,"onChange"),0<c.length&&(p=new Ip("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var nl=null,sl=null;function UE(o){I0(o,0)}function Jc(o){var c=Oa(o);if(te(c))return o}function $E(o,c){if(o==="change")return c}var x0=!1;if(u){var zp;if(u){var Up="oninput"in document;if(!Up){var v0=document.createElement("div");v0.setAttribute("oninput","return;"),Up=typeof v0.oninput=="function"}zp=Up}else zp=!1;x0=zp&&(!document.documentMode||9<document.documentMode)}function b0(){nl&&(nl.detachEvent("onpropertychange",w0),sl=nl=null)}function w0(o){if(o.propertyName==="value"&&Jc(sl)){var c=[];y0(c,sl,o,Nt(o)),zv(UE,c)}}function qE(o,c,p){o==="focusin"?(b0(),nl=c,sl=p,nl.attachEvent("onpropertychange",w0)):o==="focusout"&&b0()}function GE(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Jc(sl)}function WE(o,c){if(o==="click")return Jc(c)}function HE(o,c){if(o==="input"||o==="change")return Jc(c)}function KE(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ks=typeof Object.is=="function"?Object.is:KE;function rl(o,c){if(ks(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var _=p[y];if(!d.call(c,_)||!ks(o[_],c[_]))return!1}return!0}function S0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _0(o,c){var p=S0(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=S0(p)}}function C0(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?C0(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function j0(){for(var o=window,c=fe();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=fe(o.document)}return c}function $p(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function QE(o){var c=j0(),p=o.focusedElem,y=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&C0(p.ownerDocument.documentElement,p)){if(y!==null&&$p(p)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var _=p.textContent.length,k=Math.min(y.start,_);y=y.end===void 0?k:Math.min(y.end,_),!o.extend&&k>y&&(_=y,y=k,k=_),_=_0(p,k);var V=_0(p,y);_&&V&&(o.rangeCount!==1||o.anchorNode!==_.node||o.anchorOffset!==_.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(_.node,_.offset),o.removeAllRanges(),k>y?(o.addRange(c),o.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var YE=u&&"documentMode"in document&&11>=document.documentMode,Pa=null,qp=null,il=null,Gp=!1;function N0(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Gp||Pa==null||Pa!==fe(y)||(y=Pa,"selectionStart"in y&&$p(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),il&&rl(il,y)||(il=y,y=su(qp,"onSelect"),0<y.length&&(c=new Ip("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Pa)))}function eu(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Ea={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Wp={},k0={};u&&(k0=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function tu(o){if(Wp[o])return Wp[o];if(!Ea[o])return o;var c=Ea[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in k0)return Wp[o]=c[p];return o}var T0=tu("animationend"),A0=tu("animationiteration"),P0=tu("animationstart"),E0=tu("transitionend"),M0=new Map,R0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(o,c){M0.set(o,c),a(c,[o])}for(var Hp=0;Hp<R0.length;Hp++){var Kp=R0[Hp],XE=Kp.toLowerCase(),ZE=Kp[0].toUpperCase()+Kp.slice(1);ti(XE,"on"+ZE)}ti(T0,"onAnimationEnd"),ti(A0,"onAnimationIteration"),ti(P0,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(E0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JE=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function O0(o,c,p){var y=o.type||"unknown-event";o.currentTarget=p,XP(y,c,void 0,o),o.currentTarget=null}function I0(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],_=y.event;y=y.listeners;e:{var k=void 0;if(c)for(var V=y.length-1;0<=V;V--){var K=y[V],Z=K.instance,ue=K.currentTarget;if(K=K.listener,Z!==k&&_.isPropagationStopped())break e;O0(_,K,ue),k=Z}else for(V=0;V<y.length;V++){if(K=y[V],Z=K.instance,ue=K.currentTarget,K=K.listener,Z!==k&&_.isPropagationStopped())break e;O0(_,K,ue),k=Z}}}if(Lc)throw o=jp,Lc=!1,jp=null,o}function kt(o,c){var p=c[nf];p===void 0&&(p=c[nf]=new Set);var y=o+"__bubble";p.has(y)||(F0(c,o,2,!1),p.add(y))}function Qp(o,c,p){var y=0;c&&(y|=4),F0(p,o,y,c)}var nu="_reactListening"+Math.random().toString(36).slice(2);function ol(o){if(!o[nu]){o[nu]=!0,s.forEach(function(p){p!=="selectionchange"&&(JE.has(p)||Qp(p,!1,o),Qp(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[nu]||(c[nu]=!0,Qp("selectionchange",!1,c))}}function F0(o,c,p,y){switch(i0(c)){case 1:var _=pE;break;case 4:_=fE;break;default:_=Mp}p=_.bind(null,c,p,o),_=void 0,!Cp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),y?_!==void 0?o.addEventListener(c,p,{capture:!0,passive:_}):o.addEventListener(c,p,!0):_!==void 0?o.addEventListener(c,p,{passive:_}):o.addEventListener(c,p,!1)}function Yp(o,c,p,y,_){var k=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var K=y.stateNode.containerInfo;if(K===_||K.nodeType===8&&K.parentNode===_)break;if(V===4)for(V=y.return;V!==null;){var Z=V.tag;if((Z===3||Z===4)&&(Z=V.stateNode.containerInfo,Z===_||Z.nodeType===8&&Z.parentNode===_))return;V=V.return}for(;K!==null;){if(V=qi(K),V===null)return;if(Z=V.tag,Z===5||Z===6){y=k=V;continue e}K=K.parentNode}}y=y.return}zv(function(){var ue=k,xe=Nt(p),be=[];e:{var ye=M0.get(o);if(ye!==void 0){var Te=Ip,Oe=o;switch(o){case"keypress":if(Yc(p)===0)break e;case"keydown":case"keyup":Te=AE;break;case"focusin":Oe="focus",Te=Vp;break;case"focusout":Oe="blur",Te=Vp;break;case"beforeblur":case"afterblur":Te=Vp;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=l0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=yE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=ME;break;case T0:case A0:case P0:Te=bE;break;case E0:Te=OE;break;case"scroll":Te=mE;break;case"wheel":Te=FE;break;case"copy":case"cut":case"paste":Te=SE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=u0}var Ie=(c&4)!==0,Gt=!Ie&&o==="scroll",ie=Ie?ye!==null?ye+"Capture":null:ye;Ie=[];for(var ee=ue,ae;ee!==null;){ae=ee;var _e=ae.stateNode;if(ae.tag===5&&_e!==null&&(ae=_e,ie!==null&&(_e=$o(ee,ie),_e!=null&&Ie.push(ll(ee,_e,ae)))),Gt)break;ee=ee.return}0<Ie.length&&(ye=new Te(ye,Oe,null,p,xe),be.push({event:ye,listeners:Ie}))}}if((c&7)===0){e:{if(ye=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",ye&&p!==ln&&(Oe=p.relatedTarget||p.fromElement)&&(qi(Oe)||Oe[Nr]))break e;if((Te||ye)&&(ye=xe.window===xe?xe:(ye=xe.ownerDocument)?ye.defaultView||ye.parentWindow:window,Te?(Oe=p.relatedTarget||p.toElement,Te=ue,Oe=Oe?qi(Oe):null,Oe!==null&&(Gt=$i(Oe),Oe!==Gt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Te=null,Oe=ue),Te!==Oe)){if(Ie=l0,_e="onMouseLeave",ie="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(Ie=u0,_e="onPointerLeave",ie="onPointerEnter",ee="pointer"),Gt=Te==null?ye:Oa(Te),ae=Oe==null?ye:Oa(Oe),ye=new Ie(_e,ee+"leave",Te,p,xe),ye.target=Gt,ye.relatedTarget=ae,_e=null,qi(xe)===ue&&(Ie=new Ie(ie,ee+"enter",Oe,p,xe),Ie.target=ae,Ie.relatedTarget=Gt,_e=Ie),Gt=_e,Te&&Oe)t:{for(Ie=Te,ie=Oe,ee=0,ae=Ie;ae;ae=Ma(ae))ee++;for(ae=0,_e=ie;_e;_e=Ma(_e))ae++;for(;0<ee-ae;)Ie=Ma(Ie),ee--;for(;0<ae-ee;)ie=Ma(ie),ae--;for(;ee--;){if(Ie===ie||ie!==null&&Ie===ie.alternate)break t;Ie=Ma(Ie),ie=Ma(ie)}Ie=null}else Ie=null;Te!==null&&D0(be,ye,Te,Ie,!1),Oe!==null&&Gt!==null&&D0(be,Gt,Oe,Ie,!0)}}e:{if(ye=ue?Oa(ue):window,Te=ye.nodeName&&ye.nodeName.toLowerCase(),Te==="select"||Te==="input"&&ye.type==="file")var De=$E;else if(g0(ye))if(x0)De=HE;else{De=GE;var Ue=qE}else(Te=ye.nodeName)&&Te.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(De=WE);if(De&&(De=De(o,ue))){y0(be,De,p,xe);break e}Ue&&Ue(o,ye,ue),o==="focusout"&&(Ue=ye._wrapperState)&&Ue.controlled&&ye.type==="number"&&qe(ye,"number",ye.value)}switch(Ue=ue?Oa(ue):window,o){case"focusin":(g0(Ue)||Ue.contentEditable==="true")&&(Pa=Ue,qp=ue,il=null);break;case"focusout":il=qp=Pa=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,N0(be,p,xe);break;case"selectionchange":if(YE)break;case"keydown":case"keyup":N0(be,p,xe)}var $e;if(Bp)e:{switch(o){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Aa?f0(o,p)&&(Ge="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ge="onCompositionStart");Ge&&(d0&&p.locale!=="ko"&&(Aa||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Aa&&($e=a0()):(ei=xe,Op="value"in ei?ei.value:ei.textContent,Aa=!0)),Ue=su(ue,Ge),0<Ue.length&&(Ge=new c0(Ge,o,null,p,xe),be.push({event:Ge,listeners:Ue}),$e?Ge.data=$e:($e=m0(p),$e!==null&&(Ge.data=$e)))),($e=VE?LE(o,p):BE(o,p))&&(ue=su(ue,"onBeforeInput"),0<ue.length&&(xe=new c0("onBeforeInput","beforeinput",null,p,xe),be.push({event:xe,listeners:ue}),xe.data=$e))}I0(be,c)})}function ll(o,c,p){return{instance:o,listener:c,currentTarget:p}}function su(o,c){for(var p=c+"Capture",y=[];o!==null;){var _=o,k=_.stateNode;_.tag===5&&k!==null&&(_=k,k=$o(o,p),k!=null&&y.unshift(ll(o,k,_)),k=$o(o,c),k!=null&&y.push(ll(o,k,_))),o=o.return}return y}function Ma(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function D0(o,c,p,y,_){for(var k=c._reactName,V=[];p!==null&&p!==y;){var K=p,Z=K.alternate,ue=K.stateNode;if(Z!==null&&Z===y)break;K.tag===5&&ue!==null&&(K=ue,_?(Z=$o(p,k),Z!=null&&V.unshift(ll(p,Z,K))):_||(Z=$o(p,k),Z!=null&&V.push(ll(p,Z,K)))),p=p.return}V.length!==0&&o.push({event:c,listeners:V})}var eM=/\r\n?/g,tM=/\u0000|\uFFFD/g;function V0(o){return(typeof o=="string"?o:""+o).replace(eM,`
`).replace(tM,"")}function ru(o,c,p){if(c=V0(c),V0(o)!==c&&p)throw Error(t(425))}function iu(){}var Xp=null,Zp=null;function Jp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,nM=typeof clearTimeout=="function"?clearTimeout:void 0,L0=typeof Promise=="function"?Promise:void 0,sM=typeof queueMicrotask=="function"?queueMicrotask:typeof L0<"u"?function(o){return L0.resolve(null).then(o).catch(rM)}:ef;function rM(o){setTimeout(function(){throw o})}function tf(o,c){var p=c,y=0;do{var _=p.nextSibling;if(o.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(y===0){o.removeChild(_),Zo(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=_}while(p);Zo(c)}function ni(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function B0(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),sr="__reactFiber$"+Ra,cl="__reactProps$"+Ra,Nr="__reactContainer$"+Ra,nf="__reactEvents$"+Ra,iM="__reactListeners$"+Ra,aM="__reactHandles$"+Ra;function qi(o){var c=o[sr];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Nr]||p[sr]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=B0(o);o!==null;){if(p=o[sr])return p;o=B0(o)}return c}o=p,p=o.parentNode}return null}function ul(o){return o=o[sr]||o[Nr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Oa(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function au(o){return o[cl]||null}var sf=[],Ia=-1;function si(o){return{current:o}}function Tt(o){0>Ia||(o.current=sf[Ia],sf[Ia]=null,Ia--)}function Ct(o,c){Ia++,sf[Ia]=o.current,o.current=c}var ri={},_n=si(ri),Un=si(!1),Gi=ri;function Fa(o,c){var p=o.type.contextTypes;if(!p)return ri;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var _={},k;for(k in p)_[k]=c[k];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=_),_}function $n(o){return o=o.childContextTypes,o!=null}function ou(){Tt(Un),Tt(_n)}function z0(o,c,p){if(_n.current!==ri)throw Error(t(168));Ct(_n,c),Ct(Un,p)}function U0(o,c,p){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var _ in y)if(!(_ in c))throw Error(t(108,F(o)||"Unknown",_));return Y({},p,y)}function lu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ri,Gi=_n.current,Ct(_n,o),Ct(Un,Un.current),!0}function $0(o,c,p){var y=o.stateNode;if(!y)throw Error(t(169));p?(o=U0(o,c,Gi),y.__reactInternalMemoizedMergedChildContext=o,Tt(Un),Tt(_n),Ct(_n,o)):Tt(Un),Ct(Un,p)}var kr=null,cu=!1,rf=!1;function q0(o){kr===null?kr=[o]:kr.push(o)}function oM(o){cu=!0,q0(o)}function ii(){if(!rf&&kr!==null){rf=!0;var o=0,c=xt;try{var p=kr;for(xt=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}kr=null,cu=!1}catch(_){throw kr!==null&&(kr=kr.slice(o+1)),Wv(Np,ii),_}finally{xt=c,rf=!1}}return null}var Da=[],Va=0,uu=null,du=0,hs=[],ps=0,Wi=null,Tr=1,Ar="";function Hi(o,c){Da[Va++]=du,Da[Va++]=uu,uu=o,du=c}function G0(o,c,p){hs[ps++]=Tr,hs[ps++]=Ar,hs[ps++]=Wi,Wi=o;var y=Tr;o=Ar;var _=32-Ns(y)-1;y&=~(1<<_),p+=1;var k=32-Ns(c)+_;if(30<k){var V=_-_%5;k=(y&(1<<V)-1).toString(32),y>>=V,_-=V,Tr=1<<32-Ns(c)+_|p<<_|y,Ar=k+o}else Tr=1<<k|p<<_|y,Ar=o}function af(o){o.return!==null&&(Hi(o,1),G0(o,1,0))}function of(o){for(;o===uu;)uu=Da[--Va],Da[Va]=null,du=Da[--Va],Da[Va]=null;for(;o===Wi;)Wi=hs[--ps],hs[ps]=null,Ar=hs[--ps],hs[ps]=null,Tr=hs[--ps],hs[ps]=null}var ts=null,ns=null,Et=!1,Ts=null;function W0(o,c){var p=ys(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function H0(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ts=o,ns=ni(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ts=o,ns=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Wi!==null?{id:Tr,overflow:Ar}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=ys(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,ts=o,ns=null,!0):!1;default:return!1}}function lf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function cf(o){if(Et){var c=ns;if(c){var p=c;if(!H0(o,c)){if(lf(o))throw Error(t(418));c=ni(p.nextSibling);var y=ts;c&&H0(o,c)?W0(y,p):(o.flags=o.flags&-4097|2,Et=!1,ts=o)}}else{if(lf(o))throw Error(t(418));o.flags=o.flags&-4097|2,Et=!1,ts=o}}}function K0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ts=o}function hu(o){if(o!==ts)return!1;if(!Et)return K0(o),Et=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Jp(o.type,o.memoizedProps)),c&&(c=ns)){if(lf(o))throw Q0(),Error(t(418));for(;c;)W0(o,c),c=ni(c.nextSibling)}if(K0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){ns=ni(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}ns=null}}else ns=ts?ni(o.stateNode.nextSibling):null;return!0}function Q0(){for(var o=ns;o;)o=ni(o.nextSibling)}function La(){ns=ts=null,Et=!1}function uf(o){Ts===null?Ts=[o]:Ts.push(o)}var lM=A.ReactCurrentBatchConfig;function dl(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var _=y,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(V){var K=_.refs;V===null?delete K[k]:K[k]=V},c._stringRef=k,c)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function pu(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Y0(o){var c=o._init;return c(o._payload)}function X0(o){function c(ie,ee){if(o){var ae=ie.deletions;ae===null?(ie.deletions=[ee],ie.flags|=16):ae.push(ee)}}function p(ie,ee){if(!o)return null;for(;ee!==null;)c(ie,ee),ee=ee.sibling;return null}function y(ie,ee){for(ie=new Map;ee!==null;)ee.key!==null?ie.set(ee.key,ee):ie.set(ee.index,ee),ee=ee.sibling;return ie}function _(ie,ee){return ie=pi(ie,ee),ie.index=0,ie.sibling=null,ie}function k(ie,ee,ae){return ie.index=ae,o?(ae=ie.alternate,ae!==null?(ae=ae.index,ae<ee?(ie.flags|=2,ee):ae):(ie.flags|=2,ee)):(ie.flags|=1048576,ee)}function V(ie){return o&&ie.alternate===null&&(ie.flags|=2),ie}function K(ie,ee,ae,_e){return ee===null||ee.tag!==6?(ee=tm(ae,ie.mode,_e),ee.return=ie,ee):(ee=_(ee,ae),ee.return=ie,ee)}function Z(ie,ee,ae,_e){var De=ae.type;return De===T?xe(ie,ee,ae.props.children,_e,ae.key):ee!==null&&(ee.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===Q&&Y0(De)===ee.type)?(_e=_(ee,ae.props),_e.ref=dl(ie,ee,ae),_e.return=ie,_e):(_e=Du(ae.type,ae.key,ae.props,null,ie.mode,_e),_e.ref=dl(ie,ee,ae),_e.return=ie,_e)}function ue(ie,ee,ae,_e){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=nm(ae,ie.mode,_e),ee.return=ie,ee):(ee=_(ee,ae.children||[]),ee.return=ie,ee)}function xe(ie,ee,ae,_e,De){return ee===null||ee.tag!==7?(ee=ta(ae,ie.mode,_e,De),ee.return=ie,ee):(ee=_(ee,ae),ee.return=ie,ee)}function be(ie,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=tm(""+ee,ie.mode,ae),ee.return=ie,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case P:return ae=Du(ee.type,ee.key,ee.props,null,ie.mode,ae),ae.ref=dl(ie,null,ee),ae.return=ie,ae;case R:return ee=nm(ee,ie.mode,ae),ee.return=ie,ee;case Q:var _e=ee._init;return be(ie,_e(ee._payload),ae)}if(et(ee)||U(ee))return ee=ta(ee,ie.mode,ae,null),ee.return=ie,ee;pu(ie,ee)}return null}function ye(ie,ee,ae,_e){var De=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return De!==null?null:K(ie,ee,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case P:return ae.key===De?Z(ie,ee,ae,_e):null;case R:return ae.key===De?ue(ie,ee,ae,_e):null;case Q:return De=ae._init,ye(ie,ee,De(ae._payload),_e)}if(et(ae)||U(ae))return De!==null?null:xe(ie,ee,ae,_e,null);pu(ie,ae)}return null}function Te(ie,ee,ae,_e,De){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ie=ie.get(ae)||null,K(ee,ie,""+_e,De);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case P:return ie=ie.get(_e.key===null?ae:_e.key)||null,Z(ee,ie,_e,De);case R:return ie=ie.get(_e.key===null?ae:_e.key)||null,ue(ee,ie,_e,De);case Q:var Ue=_e._init;return Te(ie,ee,ae,Ue(_e._payload),De)}if(et(_e)||U(_e))return ie=ie.get(ae)||null,xe(ee,ie,_e,De,null);pu(ee,_e)}return null}function Oe(ie,ee,ae,_e){for(var De=null,Ue=null,$e=ee,Ge=ee=0,dn=null;$e!==null&&Ge<ae.length;Ge++){$e.index>Ge?(dn=$e,$e=null):dn=$e.sibling;var pt=ye(ie,$e,ae[Ge],_e);if(pt===null){$e===null&&($e=dn);break}o&&$e&&pt.alternate===null&&c(ie,$e),ee=k(pt,ee,Ge),Ue===null?De=pt:Ue.sibling=pt,Ue=pt,$e=dn}if(Ge===ae.length)return p(ie,$e),Et&&Hi(ie,Ge),De;if($e===null){for(;Ge<ae.length;Ge++)$e=be(ie,ae[Ge],_e),$e!==null&&(ee=k($e,ee,Ge),Ue===null?De=$e:Ue.sibling=$e,Ue=$e);return Et&&Hi(ie,Ge),De}for($e=y(ie,$e);Ge<ae.length;Ge++)dn=Te($e,ie,Ge,ae[Ge],_e),dn!==null&&(o&&dn.alternate!==null&&$e.delete(dn.key===null?Ge:dn.key),ee=k(dn,ee,Ge),Ue===null?De=dn:Ue.sibling=dn,Ue=dn);return o&&$e.forEach(function(fi){return c(ie,fi)}),Et&&Hi(ie,Ge),De}function Ie(ie,ee,ae,_e){var De=U(ae);if(typeof De!="function")throw Error(t(150));if(ae=De.call(ae),ae==null)throw Error(t(151));for(var Ue=De=null,$e=ee,Ge=ee=0,dn=null,pt=ae.next();$e!==null&&!pt.done;Ge++,pt=ae.next()){$e.index>Ge?(dn=$e,$e=null):dn=$e.sibling;var fi=ye(ie,$e,pt.value,_e);if(fi===null){$e===null&&($e=dn);break}o&&$e&&fi.alternate===null&&c(ie,$e),ee=k(fi,ee,Ge),Ue===null?De=fi:Ue.sibling=fi,Ue=fi,$e=dn}if(pt.done)return p(ie,$e),Et&&Hi(ie,Ge),De;if($e===null){for(;!pt.done;Ge++,pt=ae.next())pt=be(ie,pt.value,_e),pt!==null&&(ee=k(pt,ee,Ge),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return Et&&Hi(ie,Ge),De}for($e=y(ie,$e);!pt.done;Ge++,pt=ae.next())pt=Te($e,ie,Ge,pt.value,_e),pt!==null&&(o&&pt.alternate!==null&&$e.delete(pt.key===null?Ge:pt.key),ee=k(pt,ee,Ge),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return o&&$e.forEach(function(zM){return c(ie,zM)}),Et&&Hi(ie,Ge),De}function Gt(ie,ee,ae,_e){if(typeof ae=="object"&&ae!==null&&ae.type===T&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case P:e:{for(var De=ae.key,Ue=ee;Ue!==null;){if(Ue.key===De){if(De=ae.type,De===T){if(Ue.tag===7){p(ie,Ue.sibling),ee=_(Ue,ae.props.children),ee.return=ie,ie=ee;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===Q&&Y0(De)===Ue.type){p(ie,Ue.sibling),ee=_(Ue,ae.props),ee.ref=dl(ie,Ue,ae),ee.return=ie,ie=ee;break e}p(ie,Ue);break}else c(ie,Ue);Ue=Ue.sibling}ae.type===T?(ee=ta(ae.props.children,ie.mode,_e,ae.key),ee.return=ie,ie=ee):(_e=Du(ae.type,ae.key,ae.props,null,ie.mode,_e),_e.ref=dl(ie,ee,ae),_e.return=ie,ie=_e)}return V(ie);case R:e:{for(Ue=ae.key;ee!==null;){if(ee.key===Ue)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){p(ie,ee.sibling),ee=_(ee,ae.children||[]),ee.return=ie,ie=ee;break e}else{p(ie,ee);break}else c(ie,ee);ee=ee.sibling}ee=nm(ae,ie.mode,_e),ee.return=ie,ie=ee}return V(ie);case Q:return Ue=ae._init,Gt(ie,ee,Ue(ae._payload),_e)}if(et(ae))return Oe(ie,ee,ae,_e);if(U(ae))return Ie(ie,ee,ae,_e);pu(ie,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ee!==null&&ee.tag===6?(p(ie,ee.sibling),ee=_(ee,ae),ee.return=ie,ie=ee):(p(ie,ee),ee=tm(ae,ie.mode,_e),ee.return=ie,ie=ee),V(ie)):p(ie,ee)}return Gt}var Ba=X0(!0),Z0=X0(!1),fu=si(null),mu=null,za=null,df=null;function hf(){df=za=mu=null}function pf(o){var c=fu.current;Tt(fu),o._currentValue=c}function ff(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function Ua(o,c){mu=o,df=za=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(qn=!0),o.firstContext=null)}function fs(o){var c=o._currentValue;if(df!==o)if(o={context:o,memoizedValue:c,next:null},za===null){if(mu===null)throw Error(t(308));za=o,mu.dependencies={lanes:0,firstContext:o}}else za=za.next=o;return c}var Ki=null;function mf(o){Ki===null?Ki=[o]:Ki.push(o)}function J0(o,c,p,y){var _=c.interleaved;return _===null?(p.next=p,mf(c)):(p.next=_.next,_.next=p),c.interleaved=p,Pr(o,y)}function Pr(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var ai=!1;function gf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Er(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function oi(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(ct&2)!==0){var _=y.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),y.pending=c,Pr(o,p)}return _=y.interleaved,_===null?(c.next=c,mf(y)):(c.next=_.next,_.next=c),y.interleaved=c,Pr(o,p)}function gu(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ap(o,p)}}function tb(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var _=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var V={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};k===null?_=k=V:k=k.next=V,p=p.next}while(p!==null);k===null?_=k=c:k=k.next=c}else _=k=c;p={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:k,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function yu(o,c,p,y){var _=o.updateQueue;ai=!1;var k=_.firstBaseUpdate,V=_.lastBaseUpdate,K=_.shared.pending;if(K!==null){_.shared.pending=null;var Z=K,ue=Z.next;Z.next=null,V===null?k=ue:V.next=ue,V=Z;var xe=o.alternate;xe!==null&&(xe=xe.updateQueue,K=xe.lastBaseUpdate,K!==V&&(K===null?xe.firstBaseUpdate=ue:K.next=ue,xe.lastBaseUpdate=Z))}if(k!==null){var be=_.baseState;V=0,xe=ue=Z=null,K=k;do{var ye=K.lane,Te=K.eventTime;if((y&ye)===ye){xe!==null&&(xe=xe.next={eventTime:Te,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Oe=o,Ie=K;switch(ye=c,Te=p,Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){be=Oe.call(Te,be,ye);break e}be=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,ye=typeof Oe=="function"?Oe.call(Te,be,ye):Oe,ye==null)break e;be=Y({},be,ye);break e;case 2:ai=!0}}K.callback!==null&&K.lane!==0&&(o.flags|=64,ye=_.effects,ye===null?_.effects=[K]:ye.push(K))}else Te={eventTime:Te,lane:ye,tag:K.tag,payload:K.payload,callback:K.callback,next:null},xe===null?(ue=xe=Te,Z=be):xe=xe.next=Te,V|=ye;if(K=K.next,K===null){if(K=_.shared.pending,K===null)break;ye=K,K=ye.next,ye.next=null,_.lastBaseUpdate=ye,_.shared.pending=null}}while(!0);if(xe===null&&(Z=be),_.baseState=Z,_.firstBaseUpdate=ue,_.lastBaseUpdate=xe,c=_.shared.interleaved,c!==null){_=c;do V|=_.lane,_=_.next;while(_!==c)}else k===null&&(_.shared.lanes=0);Xi|=V,o.lanes=V,o.memoizedState=be}}function nb(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],_=y.callback;if(_!==null){if(y.callback=null,y=p,typeof _!="function")throw Error(t(191,_));_.call(y)}}}var hl={},rr=si(hl),pl=si(hl),fl=si(hl);function Qi(o){if(o===hl)throw Error(t(174));return o}function yf(o,c){switch(Ct(fl,c),Ct(pl,o),Ct(rr,hl),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Bo(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Bo(c,o)}Tt(rr),Ct(rr,c)}function $a(){Tt(rr),Tt(pl),Tt(fl)}function sb(o){Qi(fl.current);var c=Qi(rr.current),p=Bo(c,o.type);c!==p&&(Ct(pl,o),Ct(rr,p))}function xf(o){pl.current===o&&(Tt(rr),Tt(pl))}var Ft=si(0);function xu(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var vf=[];function bf(){for(var o=0;o<vf.length;o++)vf[o]._workInProgressVersionPrimary=null;vf.length=0}var vu=A.ReactCurrentDispatcher,wf=A.ReactCurrentBatchConfig,Yi=0,Dt=null,nn=null,cn=null,bu=!1,ml=!1,gl=0,cM=0;function Cn(){throw Error(t(321))}function Sf(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!ks(o[p],c[p]))return!1;return!0}function _f(o,c,p,y,_,k){if(Yi=k,Dt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,vu.current=o===null||o.memoizedState===null?pM:fM,o=p(y,_),ml){k=0;do{if(ml=!1,gl=0,25<=k)throw Error(t(301));k+=1,cn=nn=null,c.updateQueue=null,vu.current=mM,o=p(y,_)}while(ml)}if(vu.current=_u,c=nn!==null&&nn.next!==null,Yi=0,cn=nn=Dt=null,bu=!1,c)throw Error(t(300));return o}function Cf(){var o=gl!==0;return gl=0,o}function ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Dt.memoizedState=cn=o:cn=cn.next=o,cn}function ms(){if(nn===null){var o=Dt.alternate;o=o!==null?o.memoizedState:null}else o=nn.next;var c=cn===null?Dt.memoizedState:cn.next;if(c!==null)cn=c,nn=o;else{if(o===null)throw Error(t(310));nn=o,o={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},cn===null?Dt.memoizedState=cn=o:cn=cn.next=o}return cn}function yl(o,c){return typeof c=="function"?c(o):c}function jf(o){var c=ms(),p=c.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=nn,_=y.baseQueue,k=p.pending;if(k!==null){if(_!==null){var V=_.next;_.next=k.next,k.next=V}y.baseQueue=_=k,p.pending=null}if(_!==null){k=_.next,y=y.baseState;var K=V=null,Z=null,ue=k;do{var xe=ue.lane;if((Yi&xe)===xe)Z!==null&&(Z=Z.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),y=ue.hasEagerState?ue.eagerState:o(y,ue.action);else{var be={lane:xe,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};Z===null?(K=Z=be,V=y):Z=Z.next=be,Dt.lanes|=xe,Xi|=xe}ue=ue.next}while(ue!==null&&ue!==k);Z===null?V=y:Z.next=K,ks(y,c.memoizedState)||(qn=!0),c.memoizedState=y,c.baseState=V,c.baseQueue=Z,p.lastRenderedState=y}if(o=p.interleaved,o!==null){_=o;do k=_.lane,Dt.lanes|=k,Xi|=k,_=_.next;while(_!==o)}else _===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Nf(o){var c=ms(),p=c.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=p.dispatch,_=p.pending,k=c.memoizedState;if(_!==null){p.pending=null;var V=_=_.next;do k=o(k,V.action),V=V.next;while(V!==_);ks(k,c.memoizedState)||(qn=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),p.lastRenderedState=k}return[k,y]}function rb(){}function ib(o,c){var p=Dt,y=ms(),_=c(),k=!ks(y.memoizedState,_);if(k&&(y.memoizedState=_,qn=!0),y=y.queue,kf(lb.bind(null,p,y,o),[o]),y.getSnapshot!==c||k||cn!==null&&cn.memoizedState.tag&1){if(p.flags|=2048,xl(9,ob.bind(null,p,y,_,c),void 0,null),un===null)throw Error(t(349));(Yi&30)!==0||ab(p,c,_)}return _}function ab(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=Dt.updateQueue,c===null?(c={lastEffect:null,stores:null},Dt.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function ob(o,c,p,y){c.value=p,c.getSnapshot=y,cb(c)&&ub(o)}function lb(o,c,p){return p(function(){cb(c)&&ub(o)})}function cb(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!ks(o,p)}catch{return!0}}function ub(o){var c=Pr(o,1);c!==null&&Ms(c,o,1,-1)}function db(o){var c=ir();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:o},c.queue=o,o=o.dispatch=hM.bind(null,Dt,o),[c.memoizedState,o]}function xl(o,c,p,y){return o={tag:o,create:c,destroy:p,deps:y,next:null},c=Dt.updateQueue,c===null?(c={lastEffect:null,stores:null},Dt.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o)),o}function hb(){return ms().memoizedState}function wu(o,c,p,y){var _=ir();Dt.flags|=o,_.memoizedState=xl(1|c,p,void 0,y===void 0?null:y)}function Su(o,c,p,y){var _=ms();y=y===void 0?null:y;var k=void 0;if(nn!==null){var V=nn.memoizedState;if(k=V.destroy,y!==null&&Sf(y,V.deps)){_.memoizedState=xl(c,p,k,y);return}}Dt.flags|=o,_.memoizedState=xl(1|c,p,k,y)}function pb(o,c){return wu(8390656,8,o,c)}function kf(o,c){return Su(2048,8,o,c)}function fb(o,c){return Su(4,2,o,c)}function mb(o,c){return Su(4,4,o,c)}function gb(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function yb(o,c,p){return p=p!=null?p.concat([o]):null,Su(4,4,gb.bind(null,c,o),p)}function Tf(){}function xb(o,c){var p=ms();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&Sf(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function vb(o,c){var p=ms();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&Sf(c,y[1])?y[0]:(o=o(),p.memoizedState=[o,c],o)}function bb(o,c,p){return(Yi&21)===0?(o.baseState&&(o.baseState=!1,qn=!0),o.memoizedState=p):(ks(p,c)||(p=Yv(),Dt.lanes|=p,Xi|=p,o.baseState=!0),c)}function uM(o,c){var p=xt;xt=p!==0&&4>p?p:4,o(!0);var y=wf.transition;wf.transition={};try{o(!1),c()}finally{xt=p,wf.transition=y}}function wb(){return ms().memoizedState}function dM(o,c,p){var y=di(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Sb(o))_b(c,p);else if(p=J0(o,c,p,y),p!==null){var _=In();Ms(p,o,y,_),Cb(p,c,y)}}function hM(o,c,p){var y=di(o),_={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Sb(o))_b(c,_);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var V=c.lastRenderedState,K=k(V,p);if(_.hasEagerState=!0,_.eagerState=K,ks(K,V)){var Z=c.interleaved;Z===null?(_.next=_,mf(c)):(_.next=Z.next,Z.next=_),c.interleaved=_;return}}catch{}finally{}p=J0(o,c,_,y),p!==null&&(_=In(),Ms(p,o,y,_),Cb(p,c,y))}}function Sb(o){var c=o.alternate;return o===Dt||c!==null&&c===Dt}function _b(o,c){ml=bu=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function Cb(o,c,p){if((p&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ap(o,p)}}var _u={readContext:fs,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},pM={readContext:fs,useCallback:function(o,c){return ir().memoizedState=[o,c===void 0?null:c],o},useContext:fs,useEffect:pb,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,wu(4194308,4,gb.bind(null,c,o),p)},useLayoutEffect:function(o,c){return wu(4194308,4,o,c)},useInsertionEffect:function(o,c){return wu(4,2,o,c)},useMemo:function(o,c){var p=ir();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var y=ir();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=dM.bind(null,Dt,o),[y.memoizedState,o]},useRef:function(o){var c=ir();return o={current:o},c.memoizedState=o},useState:db,useDebugValue:Tf,useDeferredValue:function(o){return ir().memoizedState=o},useTransition:function(){var o=db(!1),c=o[0];return o=uM.bind(null,o[1]),ir().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var y=Dt,_=ir();if(Et){if(p===void 0)throw Error(t(407));p=p()}else{if(p=c(),un===null)throw Error(t(349));(Yi&30)!==0||ab(y,c,p)}_.memoizedState=p;var k={value:p,getSnapshot:c};return _.queue=k,pb(lb.bind(null,y,k,o),[o]),y.flags|=2048,xl(9,ob.bind(null,y,k,p,c),void 0,null),p},useId:function(){var o=ir(),c=un.identifierPrefix;if(Et){var p=Ar,y=Tr;p=(y&~(1<<32-Ns(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=gl++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=cM++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},fM={readContext:fs,useCallback:xb,useContext:fs,useEffect:kf,useImperativeHandle:yb,useInsertionEffect:fb,useLayoutEffect:mb,useMemo:vb,useReducer:jf,useRef:hb,useState:function(){return jf(yl)},useDebugValue:Tf,useDeferredValue:function(o){var c=ms();return bb(c,nn.memoizedState,o)},useTransition:function(){var o=jf(yl)[0],c=ms().memoizedState;return[o,c]},useMutableSource:rb,useSyncExternalStore:ib,useId:wb,unstable_isNewReconciler:!1},mM={readContext:fs,useCallback:xb,useContext:fs,useEffect:kf,useImperativeHandle:yb,useInsertionEffect:fb,useLayoutEffect:mb,useMemo:vb,useReducer:Nf,useRef:hb,useState:function(){return Nf(yl)},useDebugValue:Tf,useDeferredValue:function(o){var c=ms();return nn===null?c.memoizedState=o:bb(c,nn.memoizedState,o)},useTransition:function(){var o=Nf(yl)[0],c=ms().memoizedState;return[o,c]},useMutableSource:rb,useSyncExternalStore:ib,useId:wb,unstable_isNewReconciler:!1};function As(o,c){if(o&&o.defaultProps){c=Y({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function Af(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:Y({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Cu={isMounted:function(o){return(o=o._reactInternals)?$i(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var y=In(),_=di(o),k=Er(y,_);k.payload=c,p!=null&&(k.callback=p),c=oi(o,k,_),c!==null&&(Ms(c,o,_,y),gu(c,o,_))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=In(),_=di(o),k=Er(y,_);k.tag=1,k.payload=c,p!=null&&(k.callback=p),c=oi(o,k,_),c!==null&&(Ms(c,o,_,y),gu(c,o,_))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=In(),y=di(o),_=Er(p,y);_.tag=2,c!=null&&(_.callback=c),c=oi(o,_,y),c!==null&&(Ms(c,o,y,p),gu(c,o,y))}};function jb(o,c,p,y,_,k,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,k,V):c.prototype&&c.prototype.isPureReactComponent?!rl(p,y)||!rl(_,k):!0}function Nb(o,c,p){var y=!1,_=ri,k=c.contextType;return typeof k=="object"&&k!==null?k=fs(k):(_=$n(c)?Gi:_n.current,y=c.contextTypes,k=(y=y!=null)?Fa(o,_):ri),c=new c(p,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cu,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_,o.__reactInternalMemoizedMaskedChildContext=k),c}function kb(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&Cu.enqueueReplaceState(c,c.state,null)}function Pf(o,c,p,y){var _=o.stateNode;_.props=p,_.state=o.memoizedState,_.refs={},gf(o);var k=c.contextType;typeof k=="object"&&k!==null?_.context=fs(k):(k=$n(c)?Gi:_n.current,_.context=Fa(o,k)),_.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Af(o,c,k,p),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(c=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),c!==_.state&&Cu.enqueueReplaceState(_,_.state,null),yu(o,p,_,y),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308)}function qa(o,c){try{var p="",y=c;do p+=ce(y),y=y.return;while(y);var _=p}catch(k){_=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:_,digest:null}}function Ef(o,c,p){return{value:o,source:null,stack:p??null,digest:c??null}}function Mf(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var gM=typeof WeakMap=="function"?WeakMap:Map;function Tb(o,c,p){p=Er(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){Eu||(Eu=!0,Hf=y),Mf(o,c)},p}function Ab(o,c,p){p=Er(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;p.payload=function(){return y(_)},p.callback=function(){Mf(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(p.callback=function(){Mf(o,c),typeof y!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),p}function Pb(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new gM;var _=new Set;y.set(c,_)}else _=y.get(c),_===void 0&&(_=new Set,y.set(c,_));_.has(p)||(_.add(p),o=PM.bind(null,o,c,p),c.then(o,o))}function Eb(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Mb(o,c,p,y,_){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Er(-1,1),c.tag=2,oi(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=_,o)}var yM=A.ReactCurrentOwner,qn=!1;function On(o,c,p,y){c.child=o===null?Z0(c,null,p,y):Ba(c,o.child,p,y)}function Rb(o,c,p,y,_){p=p.render;var k=c.ref;return Ua(c,_),y=_f(o,c,p,y,k,_),p=Cf(),o!==null&&!qn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~_,Mr(o,c,_)):(Et&&p&&af(c),c.flags|=1,On(o,c,y,_),c.child)}function Ob(o,c,p,y,_){if(o===null){var k=p.type;return typeof k=="function"&&!em(k)&&k.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=k,Ib(o,c,k,y,_)):(o=Du(p.type,null,y,c,c.mode,_),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&_)===0){var V=k.memoizedProps;if(p=p.compare,p=p!==null?p:rl,p(V,y)&&o.ref===c.ref)return Mr(o,c,_)}return c.flags|=1,o=pi(k,y),o.ref=c.ref,o.return=c,c.child=o}function Ib(o,c,p,y,_){if(o!==null){var k=o.memoizedProps;if(rl(k,y)&&o.ref===c.ref)if(qn=!1,c.pendingProps=y=k,(o.lanes&_)!==0)(o.flags&131072)!==0&&(qn=!0);else return c.lanes=o.lanes,Mr(o,c,_)}return Rf(o,c,p,y,_)}function Fb(o,c,p){var y=c.pendingProps,_=y.children,k=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Wa,ss),ss|=p;else{if((p&1073741824)===0)return o=k!==null?k.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Ct(Wa,ss),ss|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=k!==null?k.baseLanes:p,Ct(Wa,ss),ss|=y}else k!==null?(y=k.baseLanes|p,c.memoizedState=null):y=p,Ct(Wa,ss),ss|=y;return On(o,c,_,p),c.child}function Db(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function Rf(o,c,p,y,_){var k=$n(p)?Gi:_n.current;return k=Fa(c,k),Ua(c,_),p=_f(o,c,p,y,k,_),y=Cf(),o!==null&&!qn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~_,Mr(o,c,_)):(Et&&y&&af(c),c.flags|=1,On(o,c,p,_),c.child)}function Vb(o,c,p,y,_){if($n(p)){var k=!0;lu(c)}else k=!1;if(Ua(c,_),c.stateNode===null)Nu(o,c),Nb(c,p,y),Pf(c,p,y,_),y=!0;else if(o===null){var V=c.stateNode,K=c.memoizedProps;V.props=K;var Z=V.context,ue=p.contextType;typeof ue=="object"&&ue!==null?ue=fs(ue):(ue=$n(p)?Gi:_n.current,ue=Fa(c,ue));var xe=p.getDerivedStateFromProps,be=typeof xe=="function"||typeof V.getSnapshotBeforeUpdate=="function";be||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==y||Z!==ue)&&kb(c,V,y,ue),ai=!1;var ye=c.memoizedState;V.state=ye,yu(c,y,V,_),Z=c.memoizedState,K!==y||ye!==Z||Un.current||ai?(typeof xe=="function"&&(Af(c,p,xe,y),Z=c.memoizedState),(K=ai||jb(c,p,K,y,ye,Z,ue))?(be||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Z),V.props=y,V.state=Z,V.context=ue,y=K):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{V=c.stateNode,eb(o,c),K=c.memoizedProps,ue=c.type===c.elementType?K:As(c.type,K),V.props=ue,be=c.pendingProps,ye=V.context,Z=p.contextType,typeof Z=="object"&&Z!==null?Z=fs(Z):(Z=$n(p)?Gi:_n.current,Z=Fa(c,Z));var Te=p.getDerivedStateFromProps;(xe=typeof Te=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==be||ye!==Z)&&kb(c,V,y,Z),ai=!1,ye=c.memoizedState,V.state=ye,yu(c,y,V,_);var Oe=c.memoizedState;K!==be||ye!==Oe||Un.current||ai?(typeof Te=="function"&&(Af(c,p,Te,y),Oe=c.memoizedState),(ue=ai||jb(c,p,ue,y,ye,Oe,Z)||!1)?(xe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(y,Oe,Z),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(y,Oe,Z)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||K===o.memoizedProps&&ye===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ye===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Oe),V.props=y,V.state=Oe,V.context=Z,y=ue):(typeof V.componentDidUpdate!="function"||K===o.memoizedProps&&ye===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ye===o.memoizedState||(c.flags|=1024),y=!1)}return Of(o,c,p,y,k,_)}function Of(o,c,p,y,_,k){Db(o,c);var V=(c.flags&128)!==0;if(!y&&!V)return _&&$0(c,p,!1),Mr(o,c,k);y=c.stateNode,yM.current=c;var K=V&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&V?(c.child=Ba(c,o.child,null,k),c.child=Ba(c,null,K,k)):On(o,c,K,k),c.memoizedState=y.state,_&&$0(c,p,!0),c.child}function Lb(o){var c=o.stateNode;c.pendingContext?z0(o,c.pendingContext,c.pendingContext!==c.context):c.context&&z0(o,c.context,!1),yf(o,c.containerInfo)}function Bb(o,c,p,y,_){return La(),uf(_),c.flags|=256,On(o,c,p,y),c.child}var If={dehydrated:null,treeContext:null,retryLane:0};function Ff(o){return{baseLanes:o,cachePool:null,transitions:null}}function zb(o,c,p){var y=c.pendingProps,_=Ft.current,k=!1,V=(c.flags&128)!==0,K;if((K=V)||(K=o!==null&&o.memoizedState===null?!1:(_&2)!==0),K?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(_|=1),Ct(Ft,_&1),o===null)return cf(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=y.children,o=y.fallback,k?(y=c.mode,k=c.child,V={mode:"hidden",children:V},(y&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=V):k=Vu(V,y,0,null),o=ta(o,y,p,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=Ff(p),c.memoizedState=If,o):Df(c,V));if(_=o.memoizedState,_!==null&&(K=_.dehydrated,K!==null))return xM(o,c,V,y,K,_,p);if(k){k=y.fallback,V=c.mode,_=o.child,K=_.sibling;var Z={mode:"hidden",children:y.children};return(V&1)===0&&c.child!==_?(y=c.child,y.childLanes=0,y.pendingProps=Z,c.deletions=null):(y=pi(_,Z),y.subtreeFlags=_.subtreeFlags&14680064),K!==null?k=pi(K,k):(k=ta(k,V,p,null),k.flags|=2),k.return=c,y.return=c,y.sibling=k,c.child=y,y=k,k=c.child,V=o.child.memoizedState,V=V===null?Ff(p):{baseLanes:V.baseLanes|p,cachePool:null,transitions:V.transitions},k.memoizedState=V,k.childLanes=o.childLanes&~p,c.memoizedState=If,y}return k=o.child,o=k.sibling,y=pi(k,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=y,c.memoizedState=null,y}function Df(o,c){return c=Vu({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function ju(o,c,p,y){return y!==null&&uf(y),Ba(c,o.child,null,p),o=Df(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function xM(o,c,p,y,_,k,V){if(p)return c.flags&256?(c.flags&=-257,y=Ef(Error(t(422))),ju(o,c,V,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=y.fallback,_=c.mode,y=Vu({mode:"visible",children:y.children},_,0,null),k=ta(k,_,V,null),k.flags|=2,y.return=c,k.return=c,y.sibling=k,c.child=y,(c.mode&1)!==0&&Ba(c,o.child,null,V),c.child.memoizedState=Ff(V),c.memoizedState=If,k);if((c.mode&1)===0)return ju(o,c,V,null);if(_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var K=y.dgst;return y=K,k=Error(t(419)),y=Ef(k,y,void 0),ju(o,c,V,y)}if(K=(V&o.childLanes)!==0,qn||K){if(y=un,y!==null){switch(V&-V){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(y.suspendedLanes|V))!==0?0:_,_!==0&&_!==k.retryLane&&(k.retryLane=_,Pr(o,_),Ms(y,o,_,-1))}return Jf(),y=Ef(Error(t(421))),ju(o,c,V,y)}return _.data==="$?"?(c.flags|=128,c.child=o.child,c=EM.bind(null,o),_._reactRetry=c,null):(o=k.treeContext,ns=ni(_.nextSibling),ts=c,Et=!0,Ts=null,o!==null&&(hs[ps++]=Tr,hs[ps++]=Ar,hs[ps++]=Wi,Tr=o.id,Ar=o.overflow,Wi=c),c=Df(c,y.children),c.flags|=4096,c)}function Ub(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),ff(o.return,c,p)}function Vf(o,c,p,y,_){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:_}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=p,k.tailMode=_)}function $b(o,c,p){var y=c.pendingProps,_=y.revealOrder,k=y.tail;if(On(o,c,y.children,p),y=Ft.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ub(o,p,c);else if(o.tag===19)Ub(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Ct(Ft,y),(c.mode&1)===0)c.memoizedState=null;else switch(_){case"forwards":for(p=c.child,_=null;p!==null;)o=p.alternate,o!==null&&xu(o)===null&&(_=p),p=p.sibling;p=_,p===null?(_=c.child,c.child=null):(_=p.sibling,p.sibling=null),Vf(c,!1,_,p,k);break;case"backwards":for(p=null,_=c.child,c.child=null;_!==null;){if(o=_.alternate,o!==null&&xu(o)===null){c.child=_;break}o=_.sibling,_.sibling=p,p=_,_=o}Vf(c,!0,p,null,k);break;case"together":Vf(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Nu(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Mr(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Xi|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,p=pi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=pi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function vM(o,c,p){switch(c.tag){case 3:Lb(c),La();break;case 5:sb(c);break;case 1:$n(c.type)&&lu(c);break;case 4:yf(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,_=c.memoizedProps.value;Ct(fu,y._currentValue),y._currentValue=_;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Ct(Ft,Ft.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?zb(o,c,p):(Ct(Ft,Ft.current&1),o=Mr(o,c,p),o!==null?o.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(o.flags&128)!==0){if(y)return $b(o,c,p);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ct(Ft,Ft.current),y)break;return null;case 22:case 23:return c.lanes=0,Fb(o,c,p)}return Mr(o,c,p)}var qb,Lf,Gb,Wb;qb=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Lf=function(){},Gb=function(o,c,p,y){var _=o.memoizedProps;if(_!==y){o=c.stateNode,Qi(rr.current);var k=null;switch(p){case"input":_=ve(o,_),y=ve(o,y),k=[];break;case"select":_=Y({},_,{value:void 0}),y=Y({},y,{value:void 0}),k=[];break;case"textarea":_=it(o,_),y=it(o,y),k=[];break;default:typeof _.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=iu)}se(p,y);var V;p=null;for(ue in _)if(!y.hasOwnProperty(ue)&&_.hasOwnProperty(ue)&&_[ue]!=null)if(ue==="style"){var K=_[ue];for(V in K)K.hasOwnProperty(V)&&(p||(p={}),p[V]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?k||(k=[]):(k=k||[]).push(ue,null));for(ue in y){var Z=y[ue];if(K=_?.[ue],y.hasOwnProperty(ue)&&Z!==K&&(Z!=null||K!=null))if(ue==="style")if(K){for(V in K)!K.hasOwnProperty(V)||Z&&Z.hasOwnProperty(V)||(p||(p={}),p[V]="");for(V in Z)Z.hasOwnProperty(V)&&K[V]!==Z[V]&&(p||(p={}),p[V]=Z[V])}else p||(k||(k=[]),k.push(ue,p)),p=Z;else ue==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,K=K?K.__html:void 0,Z!=null&&K!==Z&&(k=k||[]).push(ue,Z)):ue==="children"?typeof Z!="string"&&typeof Z!="number"||(k=k||[]).push(ue,""+Z):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(ue)?(Z!=null&&ue==="onScroll"&&kt("scroll",o),k||K===Z||(k=[])):(k=k||[]).push(ue,Z))}p&&(k=k||[]).push("style",p);var ue=k;(c.updateQueue=ue)&&(c.flags|=4)}},Wb=function(o,c,p,y){p!==y&&(c.flags|=4)};function vl(o,c){if(!Et)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function jn(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var _=o.child;_!==null;)p|=_.lanes|_.childLanes,y|=_.subtreeFlags&14680064,y|=_.flags&14680064,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)p|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function bM(o,c,p){var y=c.pendingProps;switch(of(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(c),null;case 1:return $n(c.type)&&ou(),jn(c),null;case 3:return y=c.stateNode,$a(),Tt(Un),Tt(_n),bf(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(hu(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ts!==null&&(Yf(Ts),Ts=null))),Lf(o,c),jn(c),null;case 5:xf(c);var _=Qi(fl.current);if(p=c.type,o!==null&&c.stateNode!=null)Gb(o,c,p,y,_),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return jn(c),null}if(o=Qi(rr.current),hu(c)){y=c.stateNode,p=c.type;var k=c.memoizedProps;switch(y[sr]=c,y[cl]=k,o=(c.mode&1)!==0,p){case"dialog":kt("cancel",y),kt("close",y);break;case"iframe":case"object":case"embed":kt("load",y);break;case"video":case"audio":for(_=0;_<al.length;_++)kt(al[_],y);break;case"source":kt("error",y);break;case"img":case"image":case"link":kt("error",y),kt("load",y);break;case"details":kt("toggle",y);break;case"input":he(y,k),kt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!k.multiple},kt("invalid",y);break;case"textarea":lt(y,k),kt("invalid",y)}se(p,k),_=null;for(var V in k)if(k.hasOwnProperty(V)){var K=k[V];V==="children"?typeof K=="string"?y.textContent!==K&&(k.suppressHydrationWarning!==!0&&ru(y.textContent,K,o),_=["children",K]):typeof K=="number"&&y.textContent!==""+K&&(k.suppressHydrationWarning!==!0&&ru(y.textContent,K,o),_=["children",""+K]):i.hasOwnProperty(V)&&K!=null&&V==="onScroll"&&kt("scroll",y)}switch(p){case"input":we(y),ze(y,k,!0);break;case"textarea":we(y),Kr(y);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(y.onclick=iu)}y=_,c.updateQueue=y,y!==null&&(c.flags|=4)}else{V=_.nodeType===9?_:_.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ja(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=V.createElement(p,{is:y.is}):(o=V.createElement(p),p==="select"&&(V=o,y.multiple?V.multiple=!0:y.size&&(V.size=y.size))):o=V.createElementNS(o,p),o[sr]=c,o[cl]=y,qb(o,c,!1,!1),c.stateNode=o;e:{switch(V=at(p,y),p){case"dialog":kt("cancel",o),kt("close",o),_=y;break;case"iframe":case"object":case"embed":kt("load",o),_=y;break;case"video":case"audio":for(_=0;_<al.length;_++)kt(al[_],o);_=y;break;case"source":kt("error",o),_=y;break;case"img":case"image":case"link":kt("error",o),kt("load",o),_=y;break;case"details":kt("toggle",o),_=y;break;case"input":he(o,y),_=ve(o,y),kt("invalid",o);break;case"option":_=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},_=Y({},y,{value:void 0}),kt("invalid",o);break;case"textarea":lt(o,y),_=it(o,y),kt("invalid",o);break;default:_=y}se(p,_),K=_;for(k in K)if(K.hasOwnProperty(k)){var Z=K[k];k==="style"?Uo(o,Z):k==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&Na(o,Z)):k==="children"?typeof Z=="string"?(p!=="textarea"||Z!=="")&&Ui(o,Z):typeof Z=="number"&&Ui(o,""+Z):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?Z!=null&&k==="onScroll"&&kt("scroll",o):Z!=null&&C(o,k,Z,V))}switch(p){case"input":we(o),ze(o,y,!1);break;case"textarea":we(o),Kr(o);break;case"option":y.value!=null&&o.setAttribute("value",""+L(y.value));break;case"select":o.multiple=!!y.multiple,k=y.value,k!=null?ke(o,!!y.multiple,k,!1):y.defaultValue!=null&&ke(o,!!y.multiple,y.defaultValue,!0);break;default:typeof _.onClick=="function"&&(o.onclick=iu)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return jn(c),null;case 6:if(o&&c.stateNode!=null)Wb(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(p=Qi(fl.current),Qi(rr.current),hu(c)){if(y=c.stateNode,p=c.memoizedProps,y[sr]=c,(k=y.nodeValue!==p)&&(o=ts,o!==null))switch(o.tag){case 3:ru(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ru(y.nodeValue,p,(o.mode&1)!==0)}k&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[sr]=c,c.stateNode=y}return jn(c),null;case 13:if(Tt(Ft),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Et&&ns!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Q0(),La(),c.flags|=98560,k=!1;else if(k=hu(c),y!==null&&y.dehydrated!==null){if(o===null){if(!k)throw Error(t(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[sr]=c}else La(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;jn(c),k=!1}else Ts!==null&&(Yf(Ts),Ts=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Ft.current&1)!==0?sn===0&&(sn=3):Jf())),c.updateQueue!==null&&(c.flags|=4),jn(c),null);case 4:return $a(),Lf(o,c),o===null&&ol(c.stateNode.containerInfo),jn(c),null;case 10:return pf(c.type._context),jn(c),null;case 17:return $n(c.type)&&ou(),jn(c),null;case 19:if(Tt(Ft),k=c.memoizedState,k===null)return jn(c),null;if(y=(c.flags&128)!==0,V=k.rendering,V===null)if(y)vl(k,!1);else{if(sn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(V=xu(o),V!==null){for(c.flags|=128,vl(k,!1),y=V.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)k=p,o=y,k.flags&=14680066,V=k.alternate,V===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=V.childLanes,k.lanes=V.lanes,k.child=V.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=V.memoizedProps,k.memoizedState=V.memoizedState,k.updateQueue=V.updateQueue,k.type=V.type,o=V.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Ct(Ft,Ft.current&1|2),c.child}o=o.sibling}k.tail!==null&&qt()>Ha&&(c.flags|=128,y=!0,vl(k,!1),c.lanes=4194304)}else{if(!y)if(o=xu(V),o!==null){if(c.flags|=128,y=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),vl(k,!0),k.tail===null&&k.tailMode==="hidden"&&!V.alternate&&!Et)return jn(c),null}else 2*qt()-k.renderingStartTime>Ha&&p!==1073741824&&(c.flags|=128,y=!0,vl(k,!1),c.lanes=4194304);k.isBackwards?(V.sibling=c.child,c.child=V):(p=k.last,p!==null?p.sibling=V:c.child=V,k.last=V)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=qt(),c.sibling=null,p=Ft.current,Ct(Ft,y?p&1|2:p&1),c):(jn(c),null);case 22:case 23:return Zf(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(ss&1073741824)!==0&&(jn(c),c.subtreeFlags&6&&(c.flags|=8192)):jn(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function wM(o,c){switch(of(c),c.tag){case 1:return $n(c.type)&&ou(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return $a(),Tt(Un),Tt(_n),bf(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return xf(c),null;case 13:if(Tt(Ft),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));La()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Tt(Ft),null;case 4:return $a(),null;case 10:return pf(c.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var ku=!1,Nn=!1,SM=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Ga(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Lt(o,c,y)}else p.current=null}function Bf(o,c,p){try{p()}catch(y){Lt(o,c,y)}}var Hb=!1;function _M(o,c){if(Xp=Hc,o=j0(),$p(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var _=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var V=0,K=-1,Z=-1,ue=0,xe=0,be=o,ye=null;t:for(;;){for(var Te;be!==p||_!==0&&be.nodeType!==3||(K=V+_),be!==k||y!==0&&be.nodeType!==3||(Z=V+y),be.nodeType===3&&(V+=be.nodeValue.length),(Te=be.firstChild)!==null;)ye=be,be=Te;for(;;){if(be===o)break t;if(ye===p&&++ue===_&&(K=V),ye===k&&++xe===y&&(Z=V),(Te=be.nextSibling)!==null)break;be=ye,ye=be.parentNode}be=Te}p=K===-1||Z===-1?null:{start:K,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Zp={focusedElem:o,selectionRange:p},Hc=!1,Re=c;Re!==null;)if(c=Re,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Re=o;else for(;Re!==null;){c=Re;try{var Oe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ie=Oe.memoizedProps,Gt=Oe.memoizedState,ie=c.stateNode,ee=ie.getSnapshotBeforeUpdate(c.elementType===c.type?Ie:As(c.type,Ie),Gt);ie.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ae=c.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_e){Lt(c,c.return,_e)}if(o=c.sibling,o!==null){o.return=c.return,Re=o;break}Re=c.return}return Oe=Hb,Hb=!1,Oe}function bl(o,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&o)===o){var k=_.destroy;_.destroy=void 0,k!==void 0&&Bf(c,p,k)}_=_.next}while(_!==y)}}function Tu(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function zf(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function Kb(o){var c=o.alternate;c!==null&&(o.alternate=null,Kb(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[sr],delete c[cl],delete c[nf],delete c[iM],delete c[aM])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Qb(o){return o.tag===5||o.tag===3||o.tag===4}function Yb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Qb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Uf(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=iu));else if(y!==4&&(o=o.child,o!==null))for(Uf(o,c,p),o=o.sibling;o!==null;)Uf(o,c,p),o=o.sibling}function $f(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for($f(o,c,p),o=o.sibling;o!==null;)$f(o,c,p),o=o.sibling}var vn=null,Ps=!1;function li(o,c,p){for(p=p.child;p!==null;)Xb(o,c,p),p=p.sibling}function Xb(o,c,p){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(zc,p)}catch{}switch(p.tag){case 5:Nn||Ga(p,c);case 6:var y=vn,_=Ps;vn=null,li(o,c,p),vn=y,Ps=_,vn!==null&&(Ps?(o=vn,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):vn.removeChild(p.stateNode));break;case 18:vn!==null&&(Ps?(o=vn,p=p.stateNode,o.nodeType===8?tf(o.parentNode,p):o.nodeType===1&&tf(o,p),Zo(o)):tf(vn,p.stateNode));break;case 4:y=vn,_=Ps,vn=p.stateNode.containerInfo,Ps=!0,li(o,c,p),vn=y,Ps=_;break;case 0:case 11:case 14:case 15:if(!Nn&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){_=y=y.next;do{var k=_,V=k.destroy;k=k.tag,V!==void 0&&((k&2)!==0||(k&4)!==0)&&Bf(p,c,V),_=_.next}while(_!==y)}li(o,c,p);break;case 1:if(!Nn&&(Ga(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(K){Lt(p,c,K)}li(o,c,p);break;case 21:li(o,c,p);break;case 22:p.mode&1?(Nn=(y=Nn)||p.memoizedState!==null,li(o,c,p),Nn=y):li(o,c,p);break;default:li(o,c,p)}}function Zb(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new SM),c.forEach(function(y){var _=MM.bind(null,o,y);p.has(y)||(p.add(y),y.then(_,_))})}}function Es(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var _=p[y];try{var k=o,V=c,K=V;e:for(;K!==null;){switch(K.tag){case 5:vn=K.stateNode,Ps=!1;break e;case 3:vn=K.stateNode.containerInfo,Ps=!0;break e;case 4:vn=K.stateNode.containerInfo,Ps=!0;break e}K=K.return}if(vn===null)throw Error(t(160));Xb(k,V,_),vn=null,Ps=!1;var Z=_.alternate;Z!==null&&(Z.return=null),_.return=null}catch(ue){Lt(_,c,ue)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Jb(c,o),c=c.sibling}function Jb(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Es(c,o),ar(o),y&4){try{bl(3,o,o.return),Tu(3,o)}catch(Ie){Lt(o,o.return,Ie)}try{bl(5,o,o.return)}catch(Ie){Lt(o,o.return,Ie)}}break;case 1:Es(c,o),ar(o),y&512&&p!==null&&Ga(p,p.return);break;case 5:if(Es(c,o),ar(o),y&512&&p!==null&&Ga(p,p.return),o.flags&32){var _=o.stateNode;try{Ui(_,"")}catch(Ie){Lt(o,o.return,Ie)}}if(y&4&&(_=o.stateNode,_!=null)){var k=o.memoizedProps,V=p!==null?p.memoizedProps:k,K=o.type,Z=o.updateQueue;if(o.updateQueue=null,Z!==null)try{K==="input"&&k.type==="radio"&&k.name!=null&&Ce(_,k),at(K,V);var ue=at(K,k);for(V=0;V<Z.length;V+=2){var xe=Z[V],be=Z[V+1];xe==="style"?Uo(_,be):xe==="dangerouslySetInnerHTML"?Na(_,be):xe==="children"?Ui(_,be):C(_,xe,be,ue)}switch(K){case"input":Le(_,k);break;case"textarea":Sn(_,k);break;case"select":var ye=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!k.multiple;var Te=k.value;Te!=null?ke(_,!!k.multiple,Te,!1):ye!==!!k.multiple&&(k.defaultValue!=null?ke(_,!!k.multiple,k.defaultValue,!0):ke(_,!!k.multiple,k.multiple?[]:"",!1))}_[cl]=k}catch(Ie){Lt(o,o.return,Ie)}}break;case 6:if(Es(c,o),ar(o),y&4){if(o.stateNode===null)throw Error(t(162));_=o.stateNode,k=o.memoizedProps;try{_.nodeValue=k}catch(Ie){Lt(o,o.return,Ie)}}break;case 3:if(Es(c,o),ar(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Zo(c.containerInfo)}catch(Ie){Lt(o,o.return,Ie)}break;case 4:Es(c,o),ar(o);break;case 13:Es(c,o),ar(o),_=o.child,_.flags&8192&&(k=_.memoizedState!==null,_.stateNode.isHidden=k,!k||_.alternate!==null&&_.alternate.memoizedState!==null||(Wf=qt())),y&4&&Zb(o);break;case 22:if(xe=p!==null&&p.memoizedState!==null,o.mode&1?(Nn=(ue=Nn)||xe,Es(c,o),Nn=ue):Es(c,o),ar(o),y&8192){if(ue=o.memoizedState!==null,(o.stateNode.isHidden=ue)&&!xe&&(o.mode&1)!==0)for(Re=o,xe=o.child;xe!==null;){for(be=Re=xe;Re!==null;){switch(ye=Re,Te=ye.child,ye.tag){case 0:case 11:case 14:case 15:bl(4,ye,ye.return);break;case 1:Ga(ye,ye.return);var Oe=ye.stateNode;if(typeof Oe.componentWillUnmount=="function"){y=ye,p=ye.return;try{c=y,Oe.props=c.memoizedProps,Oe.state=c.memoizedState,Oe.componentWillUnmount()}catch(Ie){Lt(y,p,Ie)}}break;case 5:Ga(ye,ye.return);break;case 22:if(ye.memoizedState!==null){nw(be);continue}}Te!==null?(Te.return=ye,Re=Te):nw(be)}xe=xe.sibling}e:for(xe=null,be=o;;){if(be.tag===5){if(xe===null){xe=be;try{_=be.stateNode,ue?(k=_.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(K=be.stateNode,Z=be.memoizedProps.style,V=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,K.style.display=zo("display",V))}catch(Ie){Lt(o,o.return,Ie)}}}else if(be.tag===6){if(xe===null)try{be.stateNode.nodeValue=ue?"":be.memoizedProps}catch(Ie){Lt(o,o.return,Ie)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===o)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===o)break e;for(;be.sibling===null;){if(be.return===null||be.return===o)break e;xe===be&&(xe=null),be=be.return}xe===be&&(xe=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:Es(c,o),ar(o),y&4&&Zb(o);break;case 21:break;default:Es(c,o),ar(o)}}function ar(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(Qb(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var _=y.stateNode;y.flags&32&&(Ui(_,""),y.flags&=-33);var k=Yb(o);$f(o,k,_);break;case 3:case 4:var V=y.stateNode.containerInfo,K=Yb(o);Uf(o,K,V);break;default:throw Error(t(161))}}catch(Z){Lt(o,o.return,Z)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function CM(o,c,p){Re=o,ew(o)}function ew(o,c,p){for(var y=(o.mode&1)!==0;Re!==null;){var _=Re,k=_.child;if(_.tag===22&&y){var V=_.memoizedState!==null||ku;if(!V){var K=_.alternate,Z=K!==null&&K.memoizedState!==null||Nn;K=ku;var ue=Nn;if(ku=V,(Nn=Z)&&!ue)for(Re=_;Re!==null;)V=Re,Z=V.child,V.tag===22&&V.memoizedState!==null?sw(_):Z!==null?(Z.return=V,Re=Z):sw(_);for(;k!==null;)Re=k,ew(k),k=k.sibling;Re=_,ku=K,Nn=ue}tw(o)}else(_.subtreeFlags&8772)!==0&&k!==null?(k.return=_,Re=k):tw(o)}}function tw(o){for(;Re!==null;){var c=Re;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Nn||Tu(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Nn)if(p===null)y.componentDidMount();else{var _=c.elementType===c.type?p.memoizedProps:As(c.type,p.memoizedProps);y.componentDidUpdate(_,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&nb(c,k,y);break;case 3:var V=c.updateQueue;if(V!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}nb(c,V,p)}break;case 5:var K=c.stateNode;if(p===null&&c.flags&4){p=K;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&p.focus();break;case"img":Z.src&&(p.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ue=c.alternate;if(ue!==null){var xe=ue.memoizedState;if(xe!==null){var be=xe.dehydrated;be!==null&&Zo(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nn||c.flags&512&&zf(c)}catch(ye){Lt(c,c.return,ye)}}if(c===o){Re=null;break}if(p=c.sibling,p!==null){p.return=c.return,Re=p;break}Re=c.return}}function nw(o){for(;Re!==null;){var c=Re;if(c===o){Re=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Re=p;break}Re=c.return}}function sw(o){for(;Re!==null;){var c=Re;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Tu(4,c)}catch(Z){Lt(c,p,Z)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var _=c.return;try{y.componentDidMount()}catch(Z){Lt(c,_,Z)}}var k=c.return;try{zf(c)}catch(Z){Lt(c,k,Z)}break;case 5:var V=c.return;try{zf(c)}catch(Z){Lt(c,V,Z)}}}catch(Z){Lt(c,c.return,Z)}if(c===o){Re=null;break}var K=c.sibling;if(K!==null){K.return=c.return,Re=K;break}Re=c.return}}var jM=Math.ceil,Au=A.ReactCurrentDispatcher,qf=A.ReactCurrentOwner,gs=A.ReactCurrentBatchConfig,ct=0,un=null,Xt=null,bn=0,ss=0,Wa=si(0),sn=0,wl=null,Xi=0,Pu=0,Gf=0,Sl=null,Gn=null,Wf=0,Ha=1/0,Rr=null,Eu=!1,Hf=null,ci=null,Mu=!1,ui=null,Ru=0,_l=0,Kf=null,Ou=-1,Iu=0;function In(){return(ct&6)!==0?qt():Ou!==-1?Ou:Ou=qt()}function di(o){return(o.mode&1)===0?1:(ct&2)!==0&&bn!==0?bn&-bn:lM.transition!==null?(Iu===0&&(Iu=Yv()),Iu):(o=xt,o!==0||(o=window.event,o=o===void 0?16:i0(o.type)),o)}function Ms(o,c,p,y){if(50<_l)throw _l=0,Kf=null,Error(t(185));Ho(o,p,y),((ct&2)===0||o!==un)&&(o===un&&((ct&2)===0&&(Pu|=p),sn===4&&hi(o,bn)),Wn(o,y),p===1&&ct===0&&(c.mode&1)===0&&(Ha=qt()+500,cu&&ii()))}function Wn(o,c){var p=o.callbackNode;lE(o,c);var y=qc(o,o===un?bn:0);if(y===0)p!==null&&Hv(p),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(p!=null&&Hv(p),c===1)o.tag===0?oM(iw.bind(null,o)):q0(iw.bind(null,o)),sM(function(){(ct&6)===0&&ii()}),p=null;else{switch(Xv(y)){case 1:p=Np;break;case 4:p=Kv;break;case 16:p=Bc;break;case 536870912:p=Qv;break;default:p=Bc}p=pw(p,rw.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function rw(o,c){if(Ou=-1,Iu=0,(ct&6)!==0)throw Error(t(327));var p=o.callbackNode;if(Ka()&&o.callbackNode!==p)return null;var y=qc(o,o===un?bn:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=Fu(o,y);else{c=y;var _=ct;ct|=2;var k=ow();(un!==o||bn!==c)&&(Rr=null,Ha=qt()+500,Ji(o,c));do try{TM();break}catch(K){aw(o,K)}while(!0);hf(),Au.current=k,ct=_,Xt!==null?c=0:(un=null,bn=0,c=sn)}if(c!==0){if(c===2&&(_=kp(o),_!==0&&(y=_,c=Qf(o,_))),c===1)throw p=wl,Ji(o,0),hi(o,y),Wn(o,qt()),p;if(c===6)hi(o,y);else{if(_=o.current.alternate,(y&30)===0&&!NM(_)&&(c=Fu(o,y),c===2&&(k=kp(o),k!==0&&(y=k,c=Qf(o,k))),c===1))throw p=wl,Ji(o,0),hi(o,y),Wn(o,qt()),p;switch(o.finishedWork=_,o.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:ea(o,Gn,Rr);break;case 3:if(hi(o,y),(y&130023424)===y&&(c=Wf+500-qt(),10<c)){if(qc(o,0)!==0)break;if(_=o.suspendedLanes,(_&y)!==y){In(),o.pingedLanes|=o.suspendedLanes&_;break}o.timeoutHandle=ef(ea.bind(null,o,Gn,Rr),c);break}ea(o,Gn,Rr);break;case 4:if(hi(o,y),(y&4194240)===y)break;for(c=o.eventTimes,_=-1;0<y;){var V=31-Ns(y);k=1<<V,V=c[V],V>_&&(_=V),y&=~k}if(y=_,y=qt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*jM(y/1960))-y,10<y){o.timeoutHandle=ef(ea.bind(null,o,Gn,Rr),y);break}ea(o,Gn,Rr);break;case 5:ea(o,Gn,Rr);break;default:throw Error(t(329))}}}return Wn(o,qt()),o.callbackNode===p?rw.bind(null,o):null}function Qf(o,c){var p=Sl;return o.current.memoizedState.isDehydrated&&(Ji(o,c).flags|=256),o=Fu(o,c),o!==2&&(c=Gn,Gn=p,c!==null&&Yf(c)),o}function Yf(o){Gn===null?Gn=o:Gn.push.apply(Gn,o)}function NM(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var _=p[y],k=_.getSnapshot;_=_.value;try{if(!ks(k(),_))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hi(o,c){for(c&=~Gf,c&=~Pu,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-Ns(c),y=1<<p;o[p]=-1,c&=~y}}function iw(o){if((ct&6)!==0)throw Error(t(327));Ka();var c=qc(o,0);if((c&1)===0)return Wn(o,qt()),null;var p=Fu(o,c);if(o.tag!==0&&p===2){var y=kp(o);y!==0&&(c=y,p=Qf(o,y))}if(p===1)throw p=wl,Ji(o,0),hi(o,c),Wn(o,qt()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ea(o,Gn,Rr),Wn(o,qt()),null}function Xf(o,c){var p=ct;ct|=1;try{return o(c)}finally{ct=p,ct===0&&(Ha=qt()+500,cu&&ii())}}function Zi(o){ui!==null&&ui.tag===0&&(ct&6)===0&&Ka();var c=ct;ct|=1;var p=gs.transition,y=xt;try{if(gs.transition=null,xt=1,o)return o()}finally{xt=y,gs.transition=p,ct=c,(ct&6)===0&&ii()}}function Zf(){ss=Wa.current,Tt(Wa)}function Ji(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,nM(p)),Xt!==null)for(p=Xt.return;p!==null;){var y=p;switch(of(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&ou();break;case 3:$a(),Tt(Un),Tt(_n),bf();break;case 5:xf(y);break;case 4:$a();break;case 13:Tt(Ft);break;case 19:Tt(Ft);break;case 10:pf(y.type._context);break;case 22:case 23:Zf()}p=p.return}if(un=o,Xt=o=pi(o.current,null),bn=ss=c,sn=0,wl=null,Gf=Pu=Xi=0,Gn=Sl=null,Ki!==null){for(c=0;c<Ki.length;c++)if(p=Ki[c],y=p.interleaved,y!==null){p.interleaved=null;var _=y.next,k=p.pending;if(k!==null){var V=k.next;k.next=_,y.next=V}p.pending=y}Ki=null}return o}function aw(o,c){do{var p=Xt;try{if(hf(),vu.current=_u,bu){for(var y=Dt.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}bu=!1}if(Yi=0,cn=nn=Dt=null,ml=!1,gl=0,qf.current=null,p===null||p.return===null){sn=1,wl=c,Xt=null;break}e:{var k=o,V=p.return,K=p,Z=c;if(c=bn,K.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var ue=Z,xe=K,be=xe.tag;if((xe.mode&1)===0&&(be===0||be===11||be===15)){var ye=xe.alternate;ye?(xe.updateQueue=ye.updateQueue,xe.memoizedState=ye.memoizedState,xe.lanes=ye.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var Te=Eb(V);if(Te!==null){Te.flags&=-257,Mb(Te,V,K,k,c),Te.mode&1&&Pb(k,ue,c),c=Te,Z=ue;var Oe=c.updateQueue;if(Oe===null){var Ie=new Set;Ie.add(Z),c.updateQueue=Ie}else Oe.add(Z);break e}else{if((c&1)===0){Pb(k,ue,c),Jf();break e}Z=Error(t(426))}}else if(Et&&K.mode&1){var Gt=Eb(V);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),Mb(Gt,V,K,k,c),uf(qa(Z,K));break e}}k=Z=qa(Z,K),sn!==4&&(sn=2),Sl===null?Sl=[k]:Sl.push(k),k=V;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var ie=Tb(k,Z,c);tb(k,ie);break e;case 1:K=Z;var ee=k.type,ae=k.stateNode;if((k.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(ci===null||!ci.has(ae)))){k.flags|=65536,c&=-c,k.lanes|=c;var _e=Ab(k,K,c);tb(k,_e);break e}}k=k.return}while(k!==null)}cw(p)}catch(De){c=De,Xt===p&&p!==null&&(Xt=p=p.return);continue}break}while(!0)}function ow(){var o=Au.current;return Au.current=_u,o===null?_u:o}function Jf(){(sn===0||sn===3||sn===2)&&(sn=4),un===null||(Xi&268435455)===0&&(Pu&268435455)===0||hi(un,bn)}function Fu(o,c){var p=ct;ct|=2;var y=ow();(un!==o||bn!==c)&&(Rr=null,Ji(o,c));do try{kM();break}catch(_){aw(o,_)}while(!0);if(hf(),ct=p,Au.current=y,Xt!==null)throw Error(t(261));return un=null,bn=0,sn}function kM(){for(;Xt!==null;)lw(Xt)}function TM(){for(;Xt!==null&&!JP();)lw(Xt)}function lw(o){var c=hw(o.alternate,o,ss);o.memoizedProps=o.pendingProps,c===null?cw(o):Xt=c,qf.current=null}function cw(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=bM(p,c,ss),p!==null){Xt=p;return}}else{if(p=wM(p,c),p!==null){p.flags&=32767,Xt=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{sn=6,Xt=null;return}}if(c=c.sibling,c!==null){Xt=c;return}Xt=c=o}while(c!==null);sn===0&&(sn=5)}function ea(o,c,p){var y=xt,_=gs.transition;try{gs.transition=null,xt=1,AM(o,c,p,y)}finally{gs.transition=_,xt=y}return null}function AM(o,c,p,y){do Ka();while(ui!==null);if((ct&6)!==0)throw Error(t(327));p=o.finishedWork;var _=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var k=p.lanes|p.childLanes;if(cE(o,k),o===un&&(Xt=un=null,bn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Mu||(Mu=!0,pw(Bc,function(){return Ka(),null})),k=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||k){k=gs.transition,gs.transition=null;var V=xt;xt=1;var K=ct;ct|=4,qf.current=null,_M(o,p),Jb(p,o),QE(Zp),Hc=!!Xp,Zp=Xp=null,o.current=p,CM(p),eE(),ct=K,xt=V,gs.transition=k}else o.current=p;if(Mu&&(Mu=!1,ui=o,Ru=_),k=o.pendingLanes,k===0&&(ci=null),sE(p.stateNode),Wn(o,qt()),c!==null)for(y=o.onRecoverableError,p=0;p<c.length;p++)_=c[p],y(_.value,{componentStack:_.stack,digest:_.digest});if(Eu)throw Eu=!1,o=Hf,Hf=null,o;return(Ru&1)!==0&&o.tag!==0&&Ka(),k=o.pendingLanes,(k&1)!==0?o===Kf?_l++:(_l=0,Kf=o):_l=0,ii(),null}function Ka(){if(ui!==null){var o=Xv(Ru),c=gs.transition,p=xt;try{if(gs.transition=null,xt=16>o?16:o,ui===null)var y=!1;else{if(o=ui,ui=null,Ru=0,(ct&6)!==0)throw Error(t(331));var _=ct;for(ct|=4,Re=o.current;Re!==null;){var k=Re,V=k.child;if((Re.flags&16)!==0){var K=k.deletions;if(K!==null){for(var Z=0;Z<K.length;Z++){var ue=K[Z];for(Re=ue;Re!==null;){var xe=Re;switch(xe.tag){case 0:case 11:case 15:bl(8,xe,k)}var be=xe.child;if(be!==null)be.return=xe,Re=be;else for(;Re!==null;){xe=Re;var ye=xe.sibling,Te=xe.return;if(Kb(xe),xe===ue){Re=null;break}if(ye!==null){ye.return=Te,Re=ye;break}Re=Te}}}var Oe=k.alternate;if(Oe!==null){var Ie=Oe.child;if(Ie!==null){Oe.child=null;do{var Gt=Ie.sibling;Ie.sibling=null,Ie=Gt}while(Ie!==null)}}Re=k}}if((k.subtreeFlags&2064)!==0&&V!==null)V.return=k,Re=V;else e:for(;Re!==null;){if(k=Re,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:bl(9,k,k.return)}var ie=k.sibling;if(ie!==null){ie.return=k.return,Re=ie;break e}Re=k.return}}var ee=o.current;for(Re=ee;Re!==null;){V=Re;var ae=V.child;if((V.subtreeFlags&2064)!==0&&ae!==null)ae.return=V,Re=ae;else e:for(V=ee;Re!==null;){if(K=Re,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Tu(9,K)}}catch(De){Lt(K,K.return,De)}if(K===V){Re=null;break e}var _e=K.sibling;if(_e!==null){_e.return=K.return,Re=_e;break e}Re=K.return}}if(ct=_,ii(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(zc,o)}catch{}y=!0}return y}finally{xt=p,gs.transition=c}}return!1}function uw(o,c,p){c=qa(p,c),c=Tb(o,c,1),o=oi(o,c,1),c=In(),o!==null&&(Ho(o,1,c),Wn(o,c))}function Lt(o,c,p){if(o.tag===3)uw(o,o,p);else for(;c!==null;){if(c.tag===3){uw(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ci===null||!ci.has(y))){o=qa(p,o),o=Ab(c,o,1),c=oi(c,o,1),o=In(),c!==null&&(Ho(c,1,o),Wn(c,o));break}}c=c.return}}function PM(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),c=In(),o.pingedLanes|=o.suspendedLanes&p,un===o&&(bn&p)===p&&(sn===4||sn===3&&(bn&130023424)===bn&&500>qt()-Wf?Ji(o,0):Gf|=p),Wn(o,c)}function dw(o,c){c===0&&((o.mode&1)===0?c=1:(c=$c,$c<<=1,($c&130023424)===0&&($c=4194304)));var p=In();o=Pr(o,c),o!==null&&(Ho(o,c,p),Wn(o,p))}function EM(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),dw(o,p)}function MM(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,_=o.memoizedState;_!==null&&(p=_.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),dw(o,p)}var hw;hw=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||Un.current)qn=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return qn=!1,vM(o,c,p);qn=(o.flags&131072)!==0}else qn=!1,Et&&(c.flags&1048576)!==0&&G0(c,du,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Nu(o,c),o=c.pendingProps;var _=Fa(c,_n.current);Ua(c,p),_=_f(null,c,y,o,_,p);var k=Cf();return c.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,$n(y)?(k=!0,lu(c)):k=!1,c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,gf(c),_.updater=Cu,c.stateNode=_,_._reactInternals=c,Pf(c,y,o,p),c=Of(null,c,y,!0,k,p)):(c.tag=0,Et&&k&&af(c),On(null,c,_,p),c=c.child),c;case 16:y=c.elementType;e:{switch(Nu(o,c),o=c.pendingProps,_=y._init,y=_(y._payload),c.type=y,_=c.tag=OM(y),o=As(y,o),_){case 0:c=Rf(null,c,y,o,p);break e;case 1:c=Vb(null,c,y,o,p);break e;case 11:c=Rb(null,c,y,o,p);break e;case 14:c=Ob(null,c,y,As(y.type,o),p);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,_=c.pendingProps,_=c.elementType===y?_:As(y,_),Rf(o,c,y,_,p);case 1:return y=c.type,_=c.pendingProps,_=c.elementType===y?_:As(y,_),Vb(o,c,y,_,p);case 3:e:{if(Lb(c),o===null)throw Error(t(387));y=c.pendingProps,k=c.memoizedState,_=k.element,eb(o,c),yu(c,y,null,p);var V=c.memoizedState;if(y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){_=qa(Error(t(423)),c),c=Bb(o,c,y,p,_);break e}else if(y!==_){_=qa(Error(t(424)),c),c=Bb(o,c,y,p,_);break e}else for(ns=ni(c.stateNode.containerInfo.firstChild),ts=c,Et=!0,Ts=null,p=Z0(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(La(),y===_){c=Mr(o,c,p);break e}On(o,c,y,p)}c=c.child}return c;case 5:return sb(c),o===null&&cf(c),y=c.type,_=c.pendingProps,k=o!==null?o.memoizedProps:null,V=_.children,Jp(y,_)?V=null:k!==null&&Jp(y,k)&&(c.flags|=32),Db(o,c),On(o,c,V,p),c.child;case 6:return o===null&&cf(c),null;case 13:return zb(o,c,p);case 4:return yf(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=Ba(c,null,y,p):On(o,c,y,p),c.child;case 11:return y=c.type,_=c.pendingProps,_=c.elementType===y?_:As(y,_),Rb(o,c,y,_,p);case 7:return On(o,c,c.pendingProps,p),c.child;case 8:return On(o,c,c.pendingProps.children,p),c.child;case 12:return On(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,_=c.pendingProps,k=c.memoizedProps,V=_.value,Ct(fu,y._currentValue),y._currentValue=V,k!==null)if(ks(k.value,V)){if(k.children===_.children&&!Un.current){c=Mr(o,c,p);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var K=k.dependencies;if(K!==null){V=k.child;for(var Z=K.firstContext;Z!==null;){if(Z.context===y){if(k.tag===1){Z=Er(-1,p&-p),Z.tag=2;var ue=k.updateQueue;if(ue!==null){ue=ue.shared;var xe=ue.pending;xe===null?Z.next=Z:(Z.next=xe.next,xe.next=Z),ue.pending=Z}}k.lanes|=p,Z=k.alternate,Z!==null&&(Z.lanes|=p),ff(k.return,p,c),K.lanes|=p;break}Z=Z.next}}else if(k.tag===10)V=k.type===c.type?null:k.child;else if(k.tag===18){if(V=k.return,V===null)throw Error(t(341));V.lanes|=p,K=V.alternate,K!==null&&(K.lanes|=p),ff(V,p,c),V=k.sibling}else V=k.child;if(V!==null)V.return=k;else for(V=k;V!==null;){if(V===c){V=null;break}if(k=V.sibling,k!==null){k.return=V.return,V=k;break}V=V.return}k=V}On(o,c,_.children,p),c=c.child}return c;case 9:return _=c.type,y=c.pendingProps.children,Ua(c,p),_=fs(_),y=y(_),c.flags|=1,On(o,c,y,p),c.child;case 14:return y=c.type,_=As(y,c.pendingProps),_=As(y.type,_),Ob(o,c,y,_,p);case 15:return Ib(o,c,c.type,c.pendingProps,p);case 17:return y=c.type,_=c.pendingProps,_=c.elementType===y?_:As(y,_),Nu(o,c),c.tag=1,$n(y)?(o=!0,lu(c)):o=!1,Ua(c,p),Nb(c,y,_),Pf(c,y,_,p),Of(null,c,y,!0,o,p);case 19:return $b(o,c,p);case 22:return Fb(o,c,p)}throw Error(t(156,c.tag))};function pw(o,c){return Wv(o,c)}function RM(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(o,c,p,y){return new RM(o,c,p,y)}function em(o){return o=o.prototype,!(!o||!o.isReactComponent)}function OM(o){if(typeof o=="function")return em(o)?1:0;if(o!=null){if(o=o.$$typeof,o===B)return 11;if(o===G)return 14}return 2}function pi(o,c){var p=o.alternate;return p===null?(p=ys(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Du(o,c,p,y,_,k){var V=2;if(y=o,typeof o=="function")em(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case T:return ta(p.children,_,k,c);case j:V=8,_|=8;break;case O:return o=ys(12,p,c,_|2),o.elementType=O,o.lanes=k,o;case H:return o=ys(13,p,c,_),o.elementType=H,o.lanes=k,o;case z:return o=ys(19,p,c,_),o.elementType=z,o.lanes=k,o;case X:return Vu(p,_,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case I:V=10;break e;case D:V=9;break e;case B:V=11;break e;case G:V=14;break e;case Q:V=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=ys(V,p,c,_),c.elementType=o,c.type=y,c.lanes=k,c}function ta(o,c,p,y){return o=ys(7,o,y,c),o.lanes=p,o}function Vu(o,c,p,y){return o=ys(22,o,y,c),o.elementType=X,o.lanes=p,o.stateNode={isHidden:!1},o}function tm(o,c,p){return o=ys(6,o,null,c),o.lanes=p,o}function nm(o,c,p){return c=ys(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function IM(o,c,p,y,_){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=y,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function sm(o,c,p,y,_,k,V,K,Z){return o=new IM(o,c,p,K,Z),c===1?(c=1,k===!0&&(c|=8)):c=0,k=ys(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(k),o}function FM(o,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:y==null?null:""+y,children:o,containerInfo:c,implementation:p}}function fw(o){if(!o)return ri;o=o._reactInternals;e:{if($i(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if($n(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if($n(p))return U0(o,p,c)}return c}function mw(o,c,p,y,_,k,V,K,Z){return o=sm(p,y,!0,o,_,k,V,K,Z),o.context=fw(null),p=o.current,y=In(),_=di(p),k=Er(y,_),k.callback=c??null,oi(p,k,_),o.current.lanes=_,Ho(o,_,y),Wn(o,y),o}function Lu(o,c,p,y){var _=c.current,k=In(),V=di(_);return p=fw(p),c.context===null?c.context=p:c.pendingContext=p,c=Er(k,V),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=oi(_,c,V),o!==null&&(Ms(o,_,V,k),gu(o,_,V)),V}function Bu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function gw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function rm(o,c){gw(o,c),(o=o.alternate)&&gw(o,c)}function DM(){return null}var yw=typeof reportError=="function"?reportError:function(o){console.error(o)};function im(o){this._internalRoot=o}zu.prototype.render=im.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));Lu(o,c,null,null)},zu.prototype.unmount=im.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Zi(function(){Lu(null,o,null,null)}),c[Nr]=null}};function zu(o){this._internalRoot=o}zu.prototype.unstable_scheduleHydration=function(o){if(o){var c=e0();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Jr.length&&c!==0&&c<Jr[p].priority;p++);Jr.splice(p,0,o),p===0&&s0(o)}};function am(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Uu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function xw(){}function VM(o,c,p,y,_){if(_){if(typeof y=="function"){var k=y;y=function(){var ue=Bu(V);k.call(ue)}}var V=mw(c,y,o,0,null,!1,!1,"",xw);return o._reactRootContainer=V,o[Nr]=V.current,ol(o.nodeType===8?o.parentNode:o),Zi(),V}for(;_=o.lastChild;)o.removeChild(_);if(typeof y=="function"){var K=y;y=function(){var ue=Bu(Z);K.call(ue)}}var Z=sm(o,0,!1,null,null,!1,!1,"",xw);return o._reactRootContainer=Z,o[Nr]=Z.current,ol(o.nodeType===8?o.parentNode:o),Zi(function(){Lu(c,Z,p,y)}),Z}function $u(o,c,p,y,_){var k=p._reactRootContainer;if(k){var V=k;if(typeof _=="function"){var K=_;_=function(){var Z=Bu(V);K.call(Z)}}Lu(c,V,o,_)}else V=VM(p,c,o,_,y);return Bu(V)}Zv=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=Wo(c.pendingLanes);p!==0&&(Ap(c,p|1),Wn(c,qt()),(ct&6)===0&&(Ha=qt()+500,ii()))}break;case 13:Zi(function(){var y=Pr(o,1);if(y!==null){var _=In();Ms(y,o,1,_)}}),rm(o,1)}},Pp=function(o){if(o.tag===13){var c=Pr(o,134217728);if(c!==null){var p=In();Ms(c,o,134217728,p)}rm(o,134217728)}},Jv=function(o){if(o.tag===13){var c=di(o),p=Pr(o,c);if(p!==null){var y=In();Ms(p,o,c,y)}rm(o,c)}},e0=function(){return xt},t0=function(o,c){var p=xt;try{return xt=o,c()}finally{xt=p}},Jn=function(o,c,p){switch(c){case"input":if(Le(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var _=au(y);if(!_)throw Error(t(90));te(y),Le(y,_)}}}break;case"textarea":Sn(o,p);break;case"select":c=p.value,c!=null&&ke(o,!!p.multiple,c,!1)}},Sp=Xf,Bv=Zi;var LM={usingClientEntryPoint:!1,Events:[ul,Oa,au,Dc,Qr,Xf]},Cl={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BM={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=qv(o),o===null?null:o.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||DM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{zc=qu.inject(BM),nr=qu}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LM,Hn.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(c))throw Error(t(200));return FM(o,c,null,p)},Hn.createRoot=function(o,c){if(!am(o))throw Error(t(299));var p=!1,y="",_=yw;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),c=sm(o,1,!1,null,null,p,!1,y,_),o[Nr]=c.current,ol(o.nodeType===8?o.parentNode:o),new im(c)},Hn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=qv(c),o=o===null?null:o.stateNode,o},Hn.flushSync=function(o){return Zi(o)},Hn.hydrate=function(o,c,p){if(!Uu(c))throw Error(t(200));return $u(null,o,c,!0,p)},Hn.hydrateRoot=function(o,c,p){if(!am(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,_=!1,k="",V=yw;if(p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(V=p.onRecoverableError)),c=mw(c,null,o,1,p??null,_,!1,k,V),o[Nr]=c.current,ol(o),y)for(o=0;o<y.length;o++)p=y[o],_=p._getVersion,_=_(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,_]:c.mutableSourceEagerHydrationData.push(p,_);return new zu(c)},Hn.render=function(o,c,p){if(!Uu(c))throw Error(t(200));return $u(null,o,c,!1,p)},Hn.unmountComponentAtNode=function(o){if(!Uu(o))throw Error(t(40));return o._reactRootContainer?(Zi(function(){$u(null,null,o,!1,function(){o._reactRootContainer=null,o[Nr]=null})}),!0):!1},Hn.unstable_batchedUpdates=Xf,Hn.unstable_renderSubtreeIntoContainer=function(o,c,p,y){if(!Uu(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return $u(o,c,p,!1,y)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var Nw;function aC(){if(Nw)return cm.exports;Nw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cm.exports=QM(),cm.exports}var kw;function YM(){if(kw)return Wu;kw=1;var n=aC();return Wu.createRoot=n.createRoot,Wu.hydrateRoot=n.hydrateRoot,Wu}var XM=YM();function ZM(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,i,a,l=[],u="",d=n.split("/");for(d[0]||d.shift();i=d.shift();)t=i[0],t==="*"?(l.push(t),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),l.push(i.substring(1,~s?s:~a?a:i.length)),u+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(u+=(~s?"?":"")+"\\"+i.substring(a))):u+="/"+i;return{keys:l,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var v=oc();const _t=Ys(v),Ay=UM({__proto__:null,default:_t},[v]);var hm={exports:{}},pm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function JM(){if(Tw)return pm;Tw=1;var n=oc();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function u(m,g){var b=g(),S=s({inst:{value:b,getSnapshot:g}}),x=S[0].inst,w=S[1];return a(function(){x.value=b,x.getSnapshot=g,d(x)&&w({inst:x})},[m,b,g]),i(function(){return d(x)&&w({inst:x}),m(function(){d(x)&&w({inst:x})})},[m]),l(b),b}function d(m){var g=m.getSnapshot;m=m.value;try{var b=g();return!t(m,b)}catch{return!0}}function h(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return pm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,pm}var Aw;function eR(){return Aw||(Aw=1,hm.exports=JM()),hm.exports}var oC=eR();const tR=Ay.useInsertionEffect,nR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sR=nR?v.useLayoutEffect:v.useEffect,rR=tR||sR,lC=n=>{const e=v.useRef([n,(...t)=>e[0](...t)]).current;return rR(()=>{e[0]=n}),e[1]},iR="popstate",Py="pushState",Ey="replaceState",aR="hashchange",Pw=[iR,Py,Ey,aR],oR=n=>{for(const e of Pw)addEventListener(e,n);return()=>{for(const e of Pw)removeEventListener(e,n)}},cC=(n,e)=>oC.useSyncExternalStore(oR,n,e),lR=()=>location.search,cR=({ssrSearch:n=""}={})=>cC(lR,()=>n),Ew=()=>location.pathname,uR=({ssrPath:n}={})=>cC(Ew,n?()=>n:Ew),dR=(n,{replace:e=!1,state:t=null}={})=>history[e?Ey:Py](t,"",n),hR=(n={})=>[uR(n),dR],Mw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Mw]>"u"){for(const n of[Py,Ey]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,Mw,{value:!0})}const pR=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",uC=(n="")=>n==="/"?"":n,fR=(n,e)=>n[0]==="~"?n.slice(1):uC(e)+n,mR=(n="",e)=>pR(Rw(uC(n)),Rw(e)),Rw=n=>{try{return decodeURI(n)}catch{return n}},dC={hook:hR,searchHook:cR,parser:ZM,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n},hC=v.createContext(dC),lc=()=>v.useContext(hC),pC={},fC=v.createContext(pC),gR=()=>v.useContext(fC),xh=n=>{const[e,t]=n.hook(n);return[mR(n.base,e),lC((s,i)=>t(fR(s,n.base),i))]},vh=()=>xh(lc()),mC=(n,e,t,s)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),l=i.exec(t)||[],[u,...d]=l;return u!==void 0?[!0,(()=>{const h=a!==!1?Object.fromEntries(a.map((m,g)=>[m,d[g]])):l.groups;let f={...d};return h&&Object.assign(f,h),f})(),...s?[u]:[]]:[!1,null]},yR=({children:n,...e})=>{const t=lc(),s=e.hook?dC:t;let i=s;const[a,l]=e.ssrPath?.split("?")??[];l&&(e.ssrSearch=l,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let u=v.useRef({}),d=u.current,h=d;for(let f in s){const m=f==="base"?s[f]+(e[f]||""):e[f]||s[f];d===h&&m!==h[f]&&(u.current=h={...h}),h[f]=m,(m!==s[f]||m!==i[f])&&(i=h)}return v.createElement(hC.Provider,{value:i,children:n})},Ow=({children:n,component:e},t)=>e?v.createElement(e,{params:t}):typeof n=="function"?n(t):n,xR=n=>{let e=v.useRef(pC);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([s,i])=>i!==t[s])?n:t},Qe=({path:n,nest:e,match:t,...s})=>{const i=lc(),[a]=xh(i),[l,u,d]=t??mC(i.parser,n,a,e),h=xR({...gR(),...u});if(!l)return null;const f=d?v.createElement(yR,{base:d},Ow(s,h)):Ow(s,h);return v.createElement(fC.Provider,{value:h,children:f})},Vr=v.forwardRef((n,e)=>{const t=lc(),[s,i]=xh(t),{to:a="",href:l=a,onClick:u,asChild:d,children:h,className:f,replace:m,state:g,...b}=n,S=lC(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(u?.(w),w.defaultPrevented||(w.preventDefault(),i(l,n)))}),x=t.hrefs(l[0]==="~"?l.slice(1):t.base+l,t);return d&&v.isValidElement(h)?v.cloneElement(h,{onClick:S,href:x}):v.createElement("a",{...b,onClick:S,href:x,className:f?.call?f(s===l):f,children:h,ref:e})}),gC=n=>Array.isArray(n)?n.flatMap(e=>gC(e&&e.type===v.Fragment?e.props.children:e)):[n],yC=({children:n,location:e})=>{const t=lc(),[s]=xh(t);for(const i of gC(n)){let a=0;if(v.isValidElement(i)&&(a=mC(t.parser,i.props.path,e||s,i.props.nest))[0])return v.cloneElement(i,{match:a})}return null};var _o=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aa=typeof window>"u"||"Deno"in globalThis;function Dn(){}function vR(n,e){return typeof n=="function"?n(e):n}function Ig(n){return typeof n=="number"&&n>=0&&n!==1/0}function xC(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Si(n,e){return typeof n=="function"?n(e):n}function vs(n,e){return typeof n=="function"?n(e):n}function Iw(n,e){const{type:t="all",exact:s,fetchStatus:i,predicate:a,queryKey:l,stale:u}=n;if(l){if(s){if(e.queryHash!==My(l,e.options))return!1}else if(!$l(e.queryKey,l))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||a&&!a(e))}function Fw(n,e){const{exact:t,status:s,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(oa(e.options.mutationKey)!==oa(a))return!1}else if(!$l(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function My(n,e){return(e?.queryKeyHashFn||oa)(n)}function oa(n){return JSON.stringify(n,(e,t)=>Fg(t)?Object.keys(t).sort().reduce((s,i)=>(s[i]=t[i],s),{}):t)}function $l(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>$l(n[t],e[t])):!1}function vC(n,e){if(n===e)return n;const t=Dw(n)&&Dw(e);if(t||Fg(n)&&Fg(e)){const s=t?n:Object.keys(n),i=s.length,a=t?e:Object.keys(e),l=a.length,u=t?[]:{},d=new Set(s);let h=0;for(let f=0;f<l;f++){const m=t?f:a[f];(!t&&d.has(m)||t)&&n[m]===void 0&&e[m]===void 0?(u[m]=void 0,h++):(u[m]=vC(n[m],e[m]),u[m]===n[m]&&n[m]!==void 0&&h++)}return i===l&&h===i?n:u}return e}function Ld(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Dw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Fg(n){if(!Vw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Vw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Vw(n){return Object.prototype.toString.call(n)==="[object Object]"}function bR(n){return new Promise(e=>{setTimeout(e,n)})}function Dg(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?vC(n,e):e}function wR(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function SR(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var Ry=Symbol();function bC(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Ry?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function wC(n,e){return typeof n=="function"?n(...e):!!n}var _R=class extends _o{#t;#e;#n;constructor(){super(),this.#n=n=>{if(!aa&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#t!==n&&(this.#t=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Oy=new _R,CR=class extends _o{#t=!0;#e;#n;constructor(){super(),this.#n=n=>{if(!aa&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(n){this.#n=n,this.#e?.(),this.#e=n(this.setOnline.bind(this))}setOnline(n){this.#t!==n&&(this.#t=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#t}},Bd=new CR;function Vg(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function s(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},t.reject=i=>{s({status:"rejected",reason:i}),e(i)},t}function jR(n){return Math.min(1e3*2**n,3e4)}function SC(n){return(n??"online")==="online"?Bd.isOnline():!0}var Lg=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function _C(n){let e=!1,t=0,s;const i=Vg(),a=()=>i.status!=="pending",l=x=>{if(!a()){const w=new Lg(x);g(w),n.onCancel?.(w)}},u=()=>{e=!0},d=()=>{e=!1},h=()=>Oy.isFocused()&&(n.networkMode==="always"||Bd.isOnline())&&n.canRun(),f=()=>SC(n.networkMode)&&n.canRun(),m=x=>{a()||(s?.(),i.resolve(x))},g=x=>{a()||(s?.(),i.reject(x))},b=()=>new Promise(x=>{s=w=>{(a()||h())&&x(w)},n.onPause?.()}).then(()=>{s=void 0,a()||n.onContinue?.()}),S=()=>{if(a())return;let x;const w=t===0?n.initialPromise:void 0;try{x=w??n.fn()}catch(N){x=Promise.reject(N)}Promise.resolve(x).then(m).catch(N=>{if(a())return;const E=n.retry??(aa?0:3),C=n.retryDelay??jR,A=typeof C=="function"?C(t,N):C,P=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,N);if(e||!P){g(N);return}t++,n.onFail?.(t,N),bR(A).then(()=>h()?void 0:b()).then(()=>{e?g(N):S()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(s?.(),i),cancelRetry:u,continueRetry:d,canStart:f,start:()=>(f()?S():b().then(S),i)}}var NR=n=>setTimeout(n,0);function kR(){let n=[],e=0,t=u=>{u()},s=u=>{u()},i=NR;const a=u=>{e?n.push(u):i(()=>{t(u)})},l=()=>{const u=n;n=[],u.length&&i(()=>{s(()=>{u.forEach(d=>{t(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||l()}return d},batchCalls:u=>(...d)=>{a(()=>{u(...d)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{i=u}}}var an=kR(),CC=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ig(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(aa?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},TR=class extends CC{#t;#e;#n;#s;#r;#a;#o;constructor(n){super(),this.#o=!1,this.#a=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#s=n.client,this.#n=this.#s.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#t=AR(this.options),this.state=n.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){this.options={...this.#a,...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=Dg(this.state.data,n,this.options);return this.#i({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#i({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#r?.promise;return this.#r?.cancel(n),e?e.then(Dn).catch(Dn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(n=>vs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ry||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Si(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!xC(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const t=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,t.signal)})},i=()=>{const u=bC(this.options,e),h=(()=>{const f={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(f),f})();return this.#o=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return s(u),u})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=_C({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof Lg&&u.revert&&this.setState({...this.#e,fetchStatus:"idle"}),t.abort()},onFail:(u,d)=>{this.#i({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#r.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Lg){if(u.silent)return this.#r.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#i({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...jC(t.data,this.options),fetchMeta:n.meta??null};case"success":const s={...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=n.manual?s:void 0,s;case"error":const i=n.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),an.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function jC(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:SC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function AR(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var PR=class extends _o{constructor(n={}){super(),this.config=n,this.#t=new Map}#t;build(n,e,t){const s=e.queryKey,i=e.queryHash??My(s,e);let a=this.get(i);return a||(a=new TR({client:n,queryKey:s,queryHash:i,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(s)}),this.add(a)),a}add(n){this.#t.has(n.queryHash)||(this.#t.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#t.get(n.queryHash);e&&(n.destroy(),e===n&&this.#t.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){an.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#t.get(n)}getAll(){return[...this.#t.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Iw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>Iw(n,t)):e}notify(n){an.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){an.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},ER=class extends CC{#t;#e;#n;constructor(n){super(),this.mutationId=n.mutationId,this.#e=n.mutationCache,this.#t=[],this.state=n.state||NC(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#s({type:"continue"})};this.#n=_C({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#s({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const t=this.state.status==="pending",s=!this.#n.canStart();try{if(t)e();else{this.#s({type:"pending",variables:n,isPaused:s}),await this.#e.config.onMutate?.(n,this);const a=await this.options.onMutate?.(n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:n,isPaused:s})}const i=await this.#n.start();return await this.#e.config.onSuccess?.(i,n,this.state.context,this),await this.options.onSuccess?.(i,n,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,n,this.state.context),this.#s({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,n,this.state.context,this),await this.options.onError?.(i,n,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,n,this.state.context),i}finally{this.#s({type:"error",error:i})}}finally{this.#e.runNext(this)}}#s(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),an.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#e.notify({mutation:this,type:"updated",action:n})})}};function NC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MR=class extends _o{constructor(n={}){super(),this.config=n,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(n,e,t){const s=new ER({mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(s),s}add(n){this.#t.add(n);const e=Hu(n);if(typeof e=="string"){const t=this.#e.get(e);t?t.push(n):this.#e.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#t.delete(n)){const e=Hu(n);if(typeof e=="string"){const t=this.#e.get(e);if(t)if(t.length>1){const s=t.indexOf(n);s!==-1&&t.splice(s,1)}else t[0]===n&&this.#e.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Hu(n);if(typeof e=="string"){const s=this.#e.get(e)?.find(i=>i.state.status==="pending");return!s||s===n}else return!0}runNext(n){const e=Hu(n);return typeof e=="string"?this.#e.get(e)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){an.batch(()=>{this.#t.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>Fw(e,t))}findAll(n={}){return this.getAll().filter(e=>Fw(n,e))}notify(n){an.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return an.batch(()=>Promise.all(n.map(e=>e.continue().catch(Dn))))}};function Hu(n){return n.options.scope?.id}function Lw(n){return{onFetch:(e,t)=>{const s=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let f=!1;const m=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},g=bC(e.options,e.fetchOptions),b=async(S,x,w)=>{if(f)return Promise.reject();if(x==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:x,direction:w?"backward":"forward",meta:e.options.meta};return m(R),R})(),C=await g(E),{maxPages:A}=e.options,P=w?SR:wR;return{pages:P(S.pages,C,A),pageParams:P(S.pageParams,x,A)}};if(i&&a.length){const S=i==="backward",x=S?RR:Bw,w={pages:a,pageParams:l},N=x(s,w);u=await b(w,N,S)}else{const S=n??a.length;do{const x=d===0?l[0]??s.initialPageParam:Bw(s,u);if(d>0&&x==null)break;u=await b(u,x),d++}while(d<S)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function Bw(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function RR(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var OR=class{#t;#e;#n;#s;#r;#a;#o;#i;constructor(n={}){this.#t=n.queryCache||new PR,this.#e=n.mutationCache||new MR,this.#n=n.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=Oy.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#i=Bd.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#t.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#e.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#t.build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Si(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return this.#t.findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),a=this.#t.get(s.queryHash)?.state.data,l=vR(e,a);if(l!==void 0)return this.#t.build(this,s).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return an.batch(()=>this.#t.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#t.get(e.queryHash)?.state}removeQueries(n){const e=this.#t;an.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#t;return an.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=an.batch(()=>this.#t.findAll(n).map(i=>i.cancel(t)));return Promise.all(s).then(Dn).catch(Dn)}invalidateQueries(n,e={}){return an.batch(()=>(this.#t.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=an.batch(()=>this.#t.findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(Dn)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Dn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#t.build(this,e);return t.isStaleByTime(Si(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Dn).catch(Dn)}fetchInfiniteQuery(n){return n.behavior=Lw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Dn).catch(Dn)}ensureInfiniteQueryData(n){return n.behavior=Lw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Bd.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#s.set(oa(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#s.values()],t={};return e.forEach(s=>{$l(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(oa(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(s=>{$l(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=My(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ry&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},IR=class extends _o{constructor(n,e){super(),this.options=e,this.#t=n,this.#i=null,this.#o=Vg(),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#n=void 0;#s=void 0;#r;#a;#o;#i;#c;#p;#u;#d;#l;#h;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),zw(this.#e,this.options)?this.#m():this.updateResult(),this.#S())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bg(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bg(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#e.removeObserver(this)}setOptions(n){const e=this.options,t=this.#e;if(this.options=this.#t.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vs(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),e._defaulted&&!Ld(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&Uw(this.#e,t,this.options,e)&&this.#m(),this.updateResult(),s&&(this.#e!==t||vs(this.options.enabled,this.#e)!==vs(e.enabled,this.#e)||Si(this.options.staleTime,this.#e)!==Si(e.staleTime,this.#e))&&this.#g();const i=this.#x();s&&(this.#e!==t||vs(this.options.enabled,this.#e)!==vs(e.enabled,this.#e)||i!==this.#h)&&this.#y(i)}getOptimisticResult(n){const e=this.#t.getQueryCache().build(this.#t,n),t=this.createResult(e,n);return DR(this,t)&&(this.#s=t,this.#a=this.options,this.#r=this.#e.state),t}getCurrentResult(){return this.#s}trackResult(n,e){return new Proxy(n,{get:(t,s)=>(this.trackProp(s),e?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,s))})}trackProp(n){this.#f.add(n)}getCurrentQuery(){return this.#e}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#t.defaultQueryOptions(n),t=this.#t.getQueryCache().build(this.#t,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#m({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#m(n){this.#w();let e=this.#e.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Dn)),e}#g(){this.#_();const n=Si(this.options.staleTime,this.#e);if(aa||this.#s.isStale||!Ig(n))return;const t=xC(this.#s.dataUpdatedAt,n)+1;this.#d=setTimeout(()=>{this.#s.isStale||this.updateResult()},t)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(n){this.#v(),this.#h=n,!(aa||vs(this.options.enabled,this.#e)===!1||!Ig(this.#h)||this.#h===0)&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||Oy.isFocused())&&this.#m()},this.#h))}#S(){this.#g(),this.#y(this.#x())}#_(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#v(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(n,e){const t=this.#e,s=this.options,i=this.#s,a=this.#r,l=this.#a,d=n!==t?n.state:this.#n,{state:h}=n;let f={...h},m=!1,g;if(e._optimisticResults){const j=this.hasListeners(),O=!j&&zw(n,e),I=j&&Uw(n,t,e,s);(O||I)&&(f={...f,...jC(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:S,status:x}=f;g=f.data;let w=!1;if(e.placeholderData!==void 0&&g===void 0&&x==="pending"){let j;i?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(j=i.data,w=!0):j=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,j!==void 0&&(x="success",g=Dg(i?.data,j,e),m=!0)}if(e.select&&g!==void 0&&!w)if(i&&g===a?.data&&e.select===this.#c)g=this.#p;else try{this.#c=e.select,g=e.select(g),g=Dg(i?.data,g,e),this.#p=g,this.#i=null}catch(j){this.#i=j}this.#i&&(b=this.#i,g=this.#p,S=Date.now(),x="error");const N=f.fetchStatus==="fetching",E=x==="pending",C=x==="error",A=E&&N,P=g!==void 0,T={status:x,fetchStatus:f.fetchStatus,isPending:E,isSuccess:x==="success",isError:C,isInitialLoading:A,isLoading:A,data:g,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:S,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:N,isRefetching:N&&!E,isLoadingError:C&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:C&&P,isStale:Iy(n,e),refetch:this.refetch,promise:this.#o,isEnabled:vs(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const j=D=>{T.status==="error"?D.reject(T.error):T.data!==void 0&&D.resolve(T.data)},O=()=>{const D=this.#o=T.promise=Vg();j(D)},I=this.#o;switch(I.status){case"pending":n.queryHash===t.queryHash&&j(I);break;case"fulfilled":(T.status==="error"||T.data!==I.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==I.reason)&&O();break}}return T}updateResult(){const n=this.#s,e=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#a=this.options,this.#r.data!==void 0&&(this.#u=this.#e),Ld(e,n))return;this.#s=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!this.#f.size)return!0;const a=new Set(i??this.#f);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(l=>{const u=l;return this.#s[u]!==n[u]&&a.has(u)})};this.#b({listeners:t()})}#w(){const n=this.#t.getQueryCache().build(this.#t,this.options);if(n===this.#e)return;const e=this.#e;this.#e=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#S()}#b(n){an.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function FR(n,e){return vs(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function zw(n,e){return FR(n,e)||n.state.data!==void 0&&Bg(n,e,e.refetchOnMount)}function Bg(n,e,t){if(vs(e.enabled,n)!==!1&&Si(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&Iy(n,e)}return!1}function Uw(n,e,t,s){return(n!==e||vs(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Iy(n,t)}function Iy(n,e){return vs(e.enabled,n)!==!1&&n.isStaleByTime(Si(e.staleTime,n))}function DR(n,e){return!Ld(n.getCurrentResult(),e)}var VR=class extends _o{#t;#e=void 0;#n;#s;constructor(e,t){super(),this.#t=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#t.defaultMutationOptions(e),Ld(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&oa(t.mutationKey)!==oa(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,t){return this.#s=t,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??NC();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){an.batch(()=>{if(this.#s&&this.hasListeners()){const t=this.#e.variables,s=this.#e.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,s),this.#s.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,s),this.#s.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(t=>{t(this.#e)})})}},kC=v.createContext(void 0),Fy=n=>{const e=v.useContext(kC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},LR=({client:n,children:e})=>(v.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),r.jsx(kC.Provider,{value:n,children:e})),TC=v.createContext(!1),BR=()=>v.useContext(TC);TC.Provider;function zR(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var UR=v.createContext(zR()),$R=()=>v.useContext(UR),qR=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},GR=n=>{v.useEffect(()=>{n.clearReset()},[n])},WR=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(i&&n.data===void 0||wC(t,[n.error,s])),HR=n=>{if(n.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},KR=(n,e)=>n.isLoading&&n.isFetching&&!e,QR=(n,e)=>n?.suspense&&e.isPending,$w=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function YR(n,e,t){const s=BR(),i=$R(),a=Fy(),l=a.defaultQueryOptions(n);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=s?"isRestoring":"optimistic",HR(l),qR(l,i),GR(i);const u=!a.getQueryCache().get(l.queryHash),[d]=v.useState(()=>new e(a,l)),h=d.getOptimisticResult(l),f=!s&&n.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(m=>{const g=f?d.subscribe(an.batchCalls(m)):Dn;return d.updateResult(),g},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(l)},[l,d]),QR(l,h))throw $w(l,d,i);if(WR({result:h,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!aa&&KR(h,s)&&(u?$w(l,d,i):a.getQueryCache().get(l.queryHash)?.promise)?.catch(Dn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?h:d.trackResult(h)}function Ti(n,e){return YR(n,IR)}function gt(n,e){const t=Fy(),[s]=v.useState(()=>new VR(t,n));v.useEffect(()=>{s.setOptions(n)},[s,n]);const i=v.useSyncExternalStore(v.useCallback(l=>s.subscribe(an.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=v.useCallback((l,u)=>{s.mutate(l,u).catch(Dn)},[s]);if(i.error&&wC(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function AC(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function ot(n,e,t){const s=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await AC(s),s}const XR=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return await AC(t),await t.json()},Dy=new OR({defaultOptions:{queries:{queryFn:XR({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),ZR=1,JR=1e6;let fm=0;function e5(){return fm=(fm+1)%Number.MAX_SAFE_INTEGER,fm.toString()}const mm=new Map,qw=n=>{if(mm.has(n))return;const e=setTimeout(()=>{mm.delete(n),Ll({type:"REMOVE_TOAST",toastId:n})},JR);mm.set(n,e)},t5=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,ZR)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?qw(t):n.toasts.forEach(s=>{qw(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},_d=[];let Cd={toasts:[]};function Ll(n){Cd=t5(Cd,n),_d.forEach(e=>{e(Cd)})}function n5({...n}){const e=e5(),t=i=>Ll({type:"UPDATE_TOAST",toast:{...i,id:e}}),s=()=>Ll({type:"DISMISS_TOAST",toastId:e});return Ll({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||s()}}}),{id:e,dismiss:s,update:t}}function yn(){const[n,e]=v.useState(Cd);return v.useEffect(()=>(_d.push(e),()=>{const t=_d.indexOf(e);t>-1&&_d.splice(t,1)}),[n]),{...n,toast:n5,dismiss:t=>Ll({type:"DISMISS_TOAST",toastId:t})}}var Co=aC();const s5=Ys(Co);function Se(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Gw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function bh(...n){return e=>{let t=!1;const s=n.map(i=>{const a=Gw(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():Gw(n[i],null)}}}}function We(...n){return v.useCallback(bh(...n),n)}function r5(n,e){const t=v.createContext(e),s=a=>{const{children:l,...u}=a,d=v.useMemo(()=>u,Object.values(u));return r.jsx(t.Provider,{value:d,children:l})};s.displayName=n+"Provider";function i(a){const l=v.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[s,i]}function En(n,e=[]){let t=[];function s(a,l){const u=v.createContext(l),d=t.length;t=[...t,l];const h=m=>{const{scope:g,children:b,...S}=m,x=g?.[n]?.[d]||u,w=v.useMemo(()=>S,Object.values(S));return r.jsx(x.Provider,{value:w,children:b})};h.displayName=a+"Provider";function f(m,g){const b=g?.[n]?.[d]||u,S=v.useContext(b);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=t.map(l=>v.createContext(l));return function(u){const d=u?.[n]||a;return v.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[s,i5(i,...e)]}function i5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=s.reduce((u,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...u,...m}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function la(n){const e=o5(n),t=v.forwardRef((s,i)=>{const{children:a,...l}=s,u=v.Children.toArray(a),d=u.find(c5);if(d){const h=d.props.children,f=u.map(m=>m===d?v.Children.count(h)>1?v.Children.only(null):v.isValidElement(h)?h.props.children:null:m);return r.jsx(e,{...l,ref:i,children:v.isValidElement(h)?v.cloneElement(h,void 0,f):null})}return r.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}var a5=la("Slot");function o5(n){const e=v.forwardRef((t,s)=>{const{children:i,...a}=t;if(v.isValidElement(i)){const l=d5(i),u=u5(a,i.props);return i.type!==v.Fragment&&(u.ref=s?bh(s,l):l),v.cloneElement(i,u)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var PC=Symbol("radix.slottable");function l5(n){const e=({children:t})=>r.jsx(r.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=PC,e}function c5(n){return v.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===PC}function u5(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...u)=>{const d=a(...u);return i(...u),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function d5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cc(n){const e=n+"CollectionProvider",[t,s]=En(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:w,children:N}=x,E=_t.useRef(null),C=_t.useRef(new Map).current;return r.jsx(i,{scope:w,itemMap:C,collectionRef:E,children:N})};l.displayName=e;const u=n+"CollectionSlot",d=la(u),h=_t.forwardRef((x,w)=>{const{scope:N,children:E}=x,C=a(u,N),A=We(w,C.collectionRef);return r.jsx(d,{ref:A,children:E})});h.displayName=u;const f=n+"CollectionItemSlot",m="data-radix-collection-item",g=la(f),b=_t.forwardRef((x,w)=>{const{scope:N,children:E,...C}=x,A=_t.useRef(null),P=We(w,A),R=a(f,N);return _t.useEffect(()=>(R.itemMap.set(A,{ref:A,...C}),()=>void R.itemMap.delete(A))),r.jsx(g,{[m]:"",ref:P,children:E})});b.displayName=f;function S(x){const w=a(n+"CollectionConsumer",x);return _t.useCallback(()=>{const E=w.collectionRef.current;if(!E)return[];const C=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((R,T)=>C.indexOf(R.ref.current)-C.indexOf(T.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:h,ItemSlot:b},S,s]}var h5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=h5.reduce((n,e)=>{const t=la(`Primitive.${e}`),s=v.forwardRef((i,a)=>{const{asChild:l,...u}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(d,{...u,ref:a})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function Vy(n,e){n&&Co.flushSync(()=>n.dispatchEvent(e))}function Ut(n){const e=v.useRef(n);return v.useEffect(()=>{e.current=n}),v.useMemo(()=>(...t)=>e.current?.(...t),[])}function p5(n,e=globalThis?.document){const t=Ut(n);v.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var f5="DismissableLayer",zg="dismissableLayer.update",m5="dismissableLayer.pointerDownOutside",g5="dismissableLayer.focusOutside",Ww,EC=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jo=v.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...d}=n,h=v.useContext(EC),[f,m]=v.useState(null),g=f?.ownerDocument??globalThis?.document,[,b]=v.useState({}),S=We(e,T=>m(T)),x=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),N=x.indexOf(w),E=f?x.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,A=E>=N,P=x5(T=>{const j=T.target,O=[...h.branches].some(I=>I.contains(j));!A||O||(i?.(T),l?.(T),T.defaultPrevented||u?.())},g),R=v5(T=>{const j=T.target;[...h.branches].some(I=>I.contains(j))||(a?.(T),l?.(T),T.defaultPrevented||u?.())},g);return p5(T=>{E===h.layers.size-1&&(s?.(T),!T.defaultPrevented&&u&&(T.preventDefault(),u()))},g),v.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Ww=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),Hw(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Ww)}},[f,g,t,h]),v.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),Hw())},[f,h]),v.useEffect(()=>{const T=()=>b({});return document.addEventListener(zg,T),()=>document.removeEventListener(zg,T)},[]),r.jsx(Me.div,{...d,ref:S,style:{pointerEvents:C?A?"auto":"none":void 0,...n.style},onFocusCapture:Se(n.onFocusCapture,R.onFocusCapture),onBlurCapture:Se(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Se(n.onPointerDownCapture,P.onPointerDownCapture)})});jo.displayName=f5;var y5="DismissableLayerBranch",MC=v.forwardRef((n,e)=>{const t=v.useContext(EC),s=v.useRef(null),i=We(e,s);return v.useEffect(()=>{const a=s.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),r.jsx(Me.div,{...n,ref:i})});MC.displayName=y5;function x5(n,e=globalThis?.document){const t=Ut(n),s=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const a=u=>{if(u.target&&!s.current){let d=function(){RC(m5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function v5(n,e=globalThis?.document){const t=Ut(n),s=v.useRef(!1);return v.useEffect(()=>{const i=a=>{a.target&&!s.current&&RC(g5,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Hw(){const n=new CustomEvent(zg);document.dispatchEvent(n)}function RC(n,e,t,{discrete:s}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?Vy(i,a):i.dispatchEvent(a)}var b5=jo,w5=MC,Ht=globalThis?.document?v.useLayoutEffect:()=>{},S5="Portal",uc=v.forwardRef((n,e)=>{const{container:t,...s}=n,[i,a]=v.useState(!1);Ht(()=>a(!0),[]);const l=t||i&&globalThis?.document?.body;return l?s5.createPortal(r.jsx(Me.div,{...s,ref:e}),l):null});uc.displayName=S5;function _5(n,e){return v.useReducer((t,s)=>e[t][s]??t,n)}var Mn=n=>{const{present:e,children:t}=n,s=C5(e),i=typeof t=="function"?t({present:s.isPresent}):v.Children.only(t),a=We(s.ref,j5(i));return typeof t=="function"||s.isPresent?v.cloneElement(i,{ref:a}):null};Mn.displayName="Presence";function C5(n){const[e,t]=v.useState(),s=v.useRef(null),i=v.useRef(n),a=v.useRef("none"),l=n?"mounted":"unmounted",[u,d]=_5(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const h=Ku(s.current);a.current=u==="mounted"?h:"none"},[u]),Ht(()=>{const h=s.current,f=i.current;if(f!==n){const g=a.current,b=Ku(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&g!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Ht(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=b=>{const x=Ku(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&x&&(d("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},g=b=>{b.target===e&&(a.current=Ku(s.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:v.useCallback(h=>{s.current=h?getComputedStyle(h):null,t(h)},[])}}function Ku(n){return n?.animationName||"none"}function j5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var N5=Ay[" useInsertionEffect ".trim().toString()]||Ht;function mr({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,a,l]=k5({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const f=v.useRef(n!==void 0);v.useEffect(()=>{const m=f.current;m!==u&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=u},[u,s])}const h=v.useCallback(f=>{if(u){const m=T5(f)?f(n):f;m!==n&&l.current?.(m)}else a(f)},[u,n,a,l]);return[d,h]}function k5({defaultProp:n,onChange:e}){const[t,s]=v.useState(n),i=v.useRef(t),a=v.useRef(e);return N5(()=>{a.current=e},[e]),v.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,s,a]}function T5(n){return typeof n=="function"}var OC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),A5="VisuallyHidden",wh=v.forwardRef((n,e)=>r.jsx(Me.span,{...n,ref:e,style:{...OC,...n.style}}));wh.displayName=A5;var P5=wh,Ly="ToastProvider",[By,E5,M5]=cc("Toast"),[IC,wH]=En("Toast",[M5]),[R5,Sh]=IC(Ly),FC=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:l}=n,[u,d]=v.useState(null),[h,f]=v.useState(0),m=v.useRef(!1),g=v.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ly}\`. Expected non-empty \`string\`.`),r.jsx(By.Provider,{scope:e,children:r.jsx(R5,{scope:e,label:t,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:v.useCallback(()=>f(b=>b+1),[]),onToastRemove:v.useCallback(()=>f(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:l})})};FC.displayName=Ly;var DC="ToastViewport",O5=["F8"],Ug="toast.viewportPause",$g="toast.viewportResume",VC=v.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=O5,label:i="Notifications ({hotkey})",...a}=n,l=Sh(DC,t),u=E5(t),d=v.useRef(null),h=v.useRef(null),f=v.useRef(null),m=v.useRef(null),g=We(e,m,l.onViewportChange),b=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;v.useEffect(()=>{const w=N=>{s.length!==0&&s.every(C=>N[C]||N.code===C)&&m.current?.focus()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),v.useEffect(()=>{const w=d.current,N=m.current;if(S&&w&&N){const E=()=>{if(!l.isClosePausedRef.current){const R=new CustomEvent(Ug);N.dispatchEvent(R),l.isClosePausedRef.current=!0}},C=()=>{if(l.isClosePausedRef.current){const R=new CustomEvent($g);N.dispatchEvent(R),l.isClosePausedRef.current=!1}},A=R=>{!w.contains(R.relatedTarget)&&C()},P=()=>{w.contains(document.activeElement)||C()};return w.addEventListener("focusin",E),w.addEventListener("focusout",A),w.addEventListener("pointermove",E),w.addEventListener("pointerleave",P),window.addEventListener("blur",E),window.addEventListener("focus",C),()=>{w.removeEventListener("focusin",E),w.removeEventListener("focusout",A),w.removeEventListener("pointermove",E),w.removeEventListener("pointerleave",P),window.removeEventListener("blur",E),window.removeEventListener("focus",C)}}},[S,l.isClosePausedRef]);const x=v.useCallback(({tabbingDirection:w})=>{const E=u().map(C=>{const A=C.ref.current,P=[A,...H5(A)];return w==="forwards"?P:P.reverse()});return(w==="forwards"?E.reverse():E).flat()},[u]);return v.useEffect(()=>{const w=m.current;if(w){const N=E=>{const C=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!C){const P=document.activeElement,R=E.shiftKey;if(E.target===w&&R){h.current?.focus();return}const O=x({tabbingDirection:R?"backwards":"forwards"}),I=O.findIndex(D=>D===P);gm(O.slice(I+1))?E.preventDefault():R?h.current?.focus():f.current?.focus()}};return w.addEventListener("keydown",N),()=>w.removeEventListener("keydown",N)}},[u,x]),r.jsxs(w5,{ref:d,role:"region","aria-label":i.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&r.jsx(qg,{ref:h,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});gm(w)}}),r.jsx(By.Slot,{scope:t,children:r.jsx(Me.ol,{tabIndex:-1,...a,ref:g})}),S&&r.jsx(qg,{ref:f,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});gm(w)}})]})});VC.displayName=DC;var LC="ToastFocusProxy",qg=v.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...i}=n,a=Sh(LC,t);return r.jsx(wh,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:l=>{const u=l.relatedTarget;!a.viewport?.contains(u)&&s()}})});qg.displayName=LC;var dc="Toast",I5="toast.swipeStart",F5="toast.swipeMove",D5="toast.swipeCancel",V5="toast.swipeEnd",BC=v.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:i,onOpenChange:a,...l}=n,[u,d]=mr({prop:s,defaultProp:i??!0,onChange:a,caller:dc});return r.jsx(Mn,{present:t||u,children:r.jsx(z5,{open:u,...l,ref:e,onClose:()=>d(!1),onPause:Ut(n.onPause),onResume:Ut(n.onResume),onSwipeStart:Se(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(n.onSwipeMove,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Se(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(n.onSwipeEnd,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});BC.displayName=dc;var[L5,B5]=IC(dc,{onClose(){}}),z5=v.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:i,open:a,onClose:l,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:b,...S}=n,x=Sh(dc,t),[w,N]=v.useState(null),E=We(e,z=>N(z)),C=v.useRef(null),A=v.useRef(null),P=i||x.duration,R=v.useRef(0),T=v.useRef(P),j=v.useRef(0),{onToastAdd:O,onToastRemove:I}=x,D=Ut(()=>{w?.contains(document.activeElement)&&x.viewport?.focus(),l()}),B=v.useCallback(z=>{!z||z===1/0||(window.clearTimeout(j.current),R.current=new Date().getTime(),j.current=window.setTimeout(D,z))},[D]);v.useEffect(()=>{const z=x.viewport;if(z){const G=()=>{B(T.current),h?.()},Q=()=>{const X=new Date().getTime()-R.current;T.current=T.current-X,window.clearTimeout(j.current),d?.()};return z.addEventListener(Ug,Q),z.addEventListener($g,G),()=>{z.removeEventListener(Ug,Q),z.removeEventListener($g,G)}}},[x.viewport,P,d,h,B]),v.useEffect(()=>{a&&!x.isClosePausedRef.current&&B(P)},[a,P,x.isClosePausedRef,B]),v.useEffect(()=>(O(),()=>I()),[O,I]);const H=v.useMemo(()=>w?HC(w):null,[w]);return x.viewport?r.jsxs(r.Fragment,{children:[H&&r.jsx(U5,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:H}),r.jsx(L5,{scope:t,onClose:D,children:Co.createPortal(r.jsx(By.ItemSlot,{scope:t,children:r.jsx(b5,{asChild:!0,onEscapeKeyDown:Se(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||D(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Me.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...S,ref:E,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Se(n.onKeyDown,z=>{z.key==="Escape"&&(u?.(z.nativeEvent),z.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Se(n.onPointerDown,z=>{z.button===0&&(C.current={x:z.clientX,y:z.clientY})}),onPointerMove:Se(n.onPointerMove,z=>{if(!C.current)return;const G=z.clientX-C.current.x,Q=z.clientY-C.current.y,X=!!A.current,q=["left","right"].includes(x.swipeDirection),U=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Y=q?U(0,G):0,M=q?0:U(0,Q),W=z.pointerType==="touch"?10:2,J={x:Y,y:M},de={originalEvent:z,delta:J};X?(A.current=J,Qu(F5,m,de,{discrete:!1})):Kw(J,x.swipeDirection,W)?(A.current=J,Qu(I5,f,de,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(G)>W||Math.abs(Q)>W)&&(C.current=null)}),onPointerUp:Se(n.onPointerUp,z=>{const G=A.current,Q=z.target;if(Q.hasPointerCapture(z.pointerId)&&Q.releasePointerCapture(z.pointerId),A.current=null,C.current=null,G){const X=z.currentTarget,q={originalEvent:z,delta:G};Kw(G,x.swipeDirection,x.swipeThreshold)?Qu(V5,b,q,{discrete:!0}):Qu(D5,g,q,{discrete:!0}),X.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),U5=n=>{const{__scopeToast:e,children:t,...s}=n,i=Sh(dc,e),[a,l]=v.useState(!1),[u,d]=v.useState(!1);return G5(()=>l(!0)),v.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:r.jsx(uc,{asChild:!0,children:r.jsx(wh,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",t]})})})},$5="ToastTitle",zC=v.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return r.jsx(Me.div,{...s,ref:e})});zC.displayName=$5;var q5="ToastDescription",UC=v.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return r.jsx(Me.div,{...s,ref:e})});UC.displayName=q5;var $C="ToastAction",qC=v.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?r.jsx(WC,{altText:t,asChild:!0,children:r.jsx(zy,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${$C}\`. Expected non-empty \`string\`.`),null)});qC.displayName=$C;var GC="ToastClose",zy=v.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,i=B5(GC,t);return r.jsx(WC,{asChild:!0,children:r.jsx(Me.button,{type:"button",...s,ref:e,onClick:Se(n.onClick,i.onClose)})})});zy.displayName=GC;var WC=v.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...i}=n;return r.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function HC(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),W5(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const l=s.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...HC(s))}}),e}function Qu(n,e,t,{discrete:s}){const i=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?Vy(i,a):i.dispatchEvent(a)}var Kw=(n,e,t=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),a=s>i;return e==="left"||e==="right"?a&&s>t:!a&&i>t};function G5(n=()=>{}){const e=Ut(n);Ht(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function W5(n){return n.nodeType===n.ELEMENT_NODE}function H5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function gm(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var K5=FC,KC=VC,QC=BC,YC=zC,XC=UC,ZC=qC,JC=zy;function ej(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=ej(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function tj(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=ej(n))&&(s&&(s+=" "),s+=e);return s}const Qw=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Yw=tj,_h=(n,e)=>t=>{var s;if(e?.variants==null)return Yw(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(h=>{const f=t?.[h],m=a?.[h];if(f===null)return null;const g=Qw(f)||Qw(m);return i[h][g]}),u=t&&Object.entries(t).reduce((h,f)=>{let[m,g]=f;return g===void 0||(h[m]=g),h},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,f)=>{let{class:m,className:g,...b}=f;return Object.entries(b).every(S=>{let[x,w]=S;return Array.isArray(w)?w.includes({...a,...u}[x]):{...a,...u}[x]===w})?[...h,m,g]:h},[]);return Yw(n,l,d,t?.class,t?.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nj=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=v.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...Y5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:nj("lucide",i),...u},[...l.map(([h,f])=>v.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(n,e)=>{const t=v.forwardRef(({className:s,...i},a)=>v.createElement(X5,{ref:a,iconNode:e,className:nj(`lucide-${Q5(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=Fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Fe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=Fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=Fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=Fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=Fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=Fe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=Fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=Fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Fe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=Fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Fe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=Fe("Dice1",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Fe("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Fe("Drum",[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=Fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Fe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=Fe("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Fe("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Fe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=Fe("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Fe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=Fe("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=Fe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=Fe("Piano",[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Fe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=Fe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=Fe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=Fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Fe("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Fe("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=Fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Fe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=Fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Fe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Fe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=Fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Fe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Fe("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Fe("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Qy="-",wO=n=>{const e=_O(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:l=>{const u=l.split(Qy);return u[0]===""&&u.length!==1&&u.shift(),uj(u,e)||SO(l)},getConflictingClassGroupIds:(l,u)=>{const d=t[l]||[];return u&&s[l]?[...d,...s[l]]:d}}},uj=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?uj(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(Qy);return e.validators.find(({validator:l})=>l(a))?.classGroupId},e1=/^\[(.+)\]$/,SO=n=>{if(e1.test(n)){const e=e1.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},_O=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return jO(Object.entries(n.classGroups),t).forEach(([a,l])=>{Wg(l,s,a,e)}),s},Wg=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:t1(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(CO(i)){Wg(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,l])=>{Wg(l,t1(e,a),t,s)})})},t1=(n,e)=>{let t=n;return e.split(Qy).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},CO=n=>n.isThemeGetter,jO=(n,e)=>e?n.map(([t,s])=>{const i=s.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,u])=>[e+l,u])):a);return[t,i]}):n,NO=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,s=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=s.get(a))!==void 0)return i(a,l),l},set(a,l){t.has(a)?t.set(a,l):i(a,l)}}},dj="!",kO=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,i=e[0],a=e.length,l=u=>{const d=[];let h=0,f=0,m;for(let w=0;w<u.length;w++){let N=u[w];if(h===0){if(N===i&&(s||u.slice(w,w+a)===e)){d.push(u.slice(f,w)),f=w+a;continue}if(N==="/"){m=w;continue}}N==="["?h++:N==="]"&&h--}const g=d.length===0?u:u.substring(f),b=g.startsWith(dj),S=b?g.substring(1):g,x=m&&m>f?m-f:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:x}};return t?u=>t({className:u,parseClassName:l}):l},TO=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},AO=n=>({cache:NO(n.cacheSize),parseClassName:kO(n),...wO(n)}),PO=/\s+/,EO=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i}=e,a=[],l=n.trim().split(PO);let u="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{modifiers:f,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:b}=t(h);let S=!!b,x=s(S?g.substring(0,b):g);if(!x){if(!S){u=h+(u.length>0?" "+u:u);continue}if(x=s(g),!x){u=h+(u.length>0?" "+u:u);continue}S=!1}const w=TO(f).join(":"),N=m?w+dj:w,E=N+x;if(a.includes(E))continue;a.push(E);const C=i(x,S);for(let A=0;A<C.length;++A){const P=C[A];a.push(N+P)}u=h+(u.length>0?" "+u:u)}return u};function MO(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=hj(e))&&(s&&(s+=" "),s+=t);return s}const hj=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=hj(n[s]))&&(t&&(t+=" "),t+=e);return t};function RO(n,...e){let t,s,i,a=l;function l(d){const h=e.reduce((f,m)=>m(f),n());return t=AO(h),s=t.cache.get,i=t.cache.set,a=u,u(d)}function u(d){const h=s(d);if(h)return h;const f=EO(d,t);return i(d,f),f}return function(){return a(MO.apply(null,arguments))}}const At=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},pj=/^\[(?:([a-z-]+):)?(.+)\]$/i,OO=/^\d+\/\d+$/,IO=new Set(["px","full","screen"]),FO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,LO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Or=n=>lo(n)||IO.has(n)||OO.test(n),mi=n=>No(n,"length",KO),lo=n=>!!n&&!Number.isNaN(Number(n)),ym=n=>No(n,"number",lo),Nl=n=>!!n&&Number.isInteger(Number(n)),zO=n=>n.endsWith("%")&&lo(n.slice(0,-1)),tt=n=>pj.test(n),gi=n=>FO.test(n),UO=new Set(["length","size","percentage"]),$O=n=>No(n,UO,fj),qO=n=>No(n,"position",fj),GO=new Set(["image","url"]),WO=n=>No(n,GO,YO),HO=n=>No(n,"",QO),kl=()=>!0,No=(n,e,t)=>{const s=pj.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},KO=n=>DO.test(n)&&!VO.test(n),fj=()=>!1,QO=n=>LO.test(n),YO=n=>BO.test(n),XO=()=>{const n=At("colors"),e=At("spacing"),t=At("blur"),s=At("brightness"),i=At("borderColor"),a=At("borderRadius"),l=At("borderSpacing"),u=At("borderWidth"),d=At("contrast"),h=At("grayscale"),f=At("hueRotate"),m=At("invert"),g=At("gap"),b=At("gradientColorStops"),S=At("gradientColorStopPositions"),x=At("inset"),w=At("margin"),N=At("opacity"),E=At("padding"),C=At("saturate"),A=At("scale"),P=At("sepia"),R=At("skew"),T=At("space"),j=At("translate"),O=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",tt,e],B=()=>[tt,e],H=()=>["",Or,mi],z=()=>["auto",lo,tt],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",tt],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[lo,tt];return{cacheSize:500,separator:":",theme:{colors:[kl],spacing:[Or,mi],blur:["none","",gi,tt],brightness:M(),borderColor:[n],borderRadius:["none","","full",gi,tt],borderSpacing:B(),borderWidth:H(),contrast:M(),grayscale:U(),hueRotate:M(),invert:U(),gap:B(),gradientColorStops:[n],gradientColorStopPositions:[zO,mi],inset:D(),margin:D(),opacity:M(),padding:B(),saturate:M(),scale:M(),sepia:U(),skew:M(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[gi]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),tt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nl,tt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Nl,tt]}],"grid-cols":[{"grid-cols":[kl]}],"col-start-end":[{col:["auto",{span:["full",Nl,tt]},tt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[kl]}],"row-start-end":[{row:["auto",{span:[Nl,tt]},tt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[gi]},gi]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",gi,mi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ym]}],"font-family":[{font:[kl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",lo,ym]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Or,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Or,mi]}],"underline-offset":[{"underline-offset":["auto",Or,tt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),qO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$O]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},WO]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:Q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Or,tt]}],"outline-w":[{outline:[Or,mi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Or,mi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",gi,HO]}],"shadow-color":[{shadow:[kl]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",gi,tt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Nl,tt]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Or,mi,ym]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ZO=RO(XO);function Ve(...n){return ZO(tj(n))}const JO=K5,mj=v.forwardRef(({className:n,...e},t)=>r.jsx(KC,{ref:t,className:Ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));mj.displayName=KC.displayName;const e4=_h("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gj=v.forwardRef(({className:n,variant:e,...t},s)=>r.jsx(QC,{ref:s,className:Ve(e4({variant:e}),n),...t}));gj.displayName=QC.displayName;const t4=v.forwardRef(({className:n,...e},t)=>r.jsx(ZC,{ref:t,className:Ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));t4.displayName=ZC.displayName;const yj=v.forwardRef(({className:n,...e},t)=>r.jsx(JC,{ref:t,className:Ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:r.jsx(cj,{className:"h-4 w-4"})}));yj.displayName=JC.displayName;const xj=v.forwardRef(({className:n,...e},t)=>r.jsx(YC,{ref:t,className:Ve("text-sm font-semibold",n),...e}));xj.displayName=YC.displayName;const vj=v.forwardRef(({className:n,...e},t)=>r.jsx(XC,{ref:t,className:Ve("text-sm opacity-90",n),...e}));vj.displayName=XC.displayName;function n4(){const{toasts:n}=yn();return r.jsxs(JO,{children:[n.map(function({id:e,title:t,description:s,action:i,...a}){return r.jsxs(gj,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[t&&r.jsx(xj,{children:t}),s&&r.jsx(vj,{children:s})]}),i,r.jsx(yj,{})]},e)}),r.jsx(mj,{})]})}var s4=Ay[" useId ".trim().toString()]||(()=>{}),r4=0;function pr(n){const[e,t]=v.useState(s4());return Ht(()=>{t(s=>s??String(r4++))},[n]),e?`radix-${e}`:""}const i4=["top","right","bottom","left"],Pi=Math.min,is=Math.max,Ud=Math.round,Zu=Math.floor,fr=n=>({x:n,y:n}),a4={left:"right",right:"left",bottom:"top",top:"bottom"},o4={start:"end",end:"start"};function Hg(n,e,t){return is(n,Pi(e,t))}function Br(n,e){return typeof n=="function"?n(e):n}function zr(n){return n.split("-")[0]}function ko(n){return n.split("-")[1]}function Yy(n){return n==="x"?"y":"x"}function Xy(n){return n==="y"?"height":"width"}const l4=new Set(["top","bottom"]);function ur(n){return l4.has(zr(n))?"y":"x"}function Zy(n){return Yy(ur(n))}function c4(n,e,t){t===void 0&&(t=!1);const s=ko(n),i=Zy(n),a=Xy(i);let l=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=$d(l)),[l,$d(l)]}function u4(n){const e=$d(n);return[Kg(n),e,Kg(e)]}function Kg(n){return n.replace(/start|end/g,e=>o4[e])}const n1=["left","right"],s1=["right","left"],d4=["top","bottom"],h4=["bottom","top"];function p4(n,e,t){switch(n){case"top":case"bottom":return t?e?s1:n1:e?n1:s1;case"left":case"right":return e?d4:h4;default:return[]}}function f4(n,e,t,s){const i=ko(n);let a=p4(zr(n),t==="start",s);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(Kg)))),a}function $d(n){return n.replace(/left|right|bottom|top/g,e=>a4[e])}function m4(n){return{top:0,right:0,bottom:0,left:0,...n}}function bj(n){return typeof n!="number"?m4(n):{top:n,right:n,bottom:n,left:n}}function qd(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function r1(n,e,t){let{reference:s,floating:i}=n;const a=ur(e),l=Zy(e),u=Xy(l),d=zr(e),h=a==="y",f=s.x+s.width/2-i.width/2,m=s.y+s.height/2-i.height/2,g=s[u]/2-i[u]/2;let b;switch(d){case"top":b={x:f,y:s.y-i.height};break;case"bottom":b={x:f,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:m};break;case"left":b={x:s.x-i.width,y:m};break;default:b={x:s.x,y:s.y}}switch(ko(e)){case"start":b[l]-=g*(t&&h?-1:1);break;case"end":b[l]+=g*(t&&h?-1:1);break}return b}const g4=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:l}=t,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:m}=r1(h,s,d),g=s,b={},S=0;for(let x=0;x<u.length;x++){const{name:w,fn:N}=u[x],{x:E,y:C,data:A,reset:P}=await N({x:f,y:m,initialPlacement:s,placement:g,strategy:i,middlewareData:b,rects:h,platform:l,elements:{reference:n,floating:e}});f=E??f,m=C??m,b={...b,[w]:{...b[w],...A}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(h=P.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:f,y:m}=r1(h,g,d)),x=-1)}return{x:f,y:m,placement:g,strategy:i,middlewareData:b}};async function Gl(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:l,elements:u,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:g=!1,padding:b=0}=Br(e,n),S=bj(b),w=u[g?m==="floating"?"reference":"floating":m],N=qd(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:h,rootBoundary:f,strategy:d})),E=m==="floating"?{x:s,y:i,width:l.floating.width,height:l.floating.height}:l.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),A=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},P=qd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:E,offsetParent:C,strategy:d}):E);return{top:(N.top-P.top+S.top)/A.y,bottom:(P.bottom-N.bottom+S.bottom)/A.y,left:(N.left-P.left+S.left)/A.x,right:(P.right-N.right+S.right)/A.x}}const y4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:a,platform:l,elements:u,middlewareData:d}=e,{element:h,padding:f=0}=Br(n,e)||{};if(h==null)return{};const m=bj(f),g={x:t,y:s},b=Zy(i),S=Xy(b),x=await l.getDimensions(h),w=b==="y",N=w?"top":"left",E=w?"bottom":"right",C=w?"clientHeight":"clientWidth",A=a.reference[S]+a.reference[b]-g[b]-a.floating[S],P=g[b]-a.reference[b],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let T=R?R[C]:0;(!T||!await(l.isElement==null?void 0:l.isElement(R)))&&(T=u.floating[C]||a.floating[S]);const j=A/2-P/2,O=T/2-x[S]/2-1,I=Pi(m[N],O),D=Pi(m[E],O),B=I,H=T-x[S]-D,z=T/2-x[S]/2+j,G=Hg(B,z,H),Q=!d.arrow&&ko(i)!=null&&z!==G&&a.reference[S]/2-(z<B?I:D)-x[S]/2<0,X=Q?z<B?z-B:z-H:0;return{[b]:g[b]+X,data:{[b]:G,centerOffset:z-G-X,...Q&&{alignmentOffset:X}},reset:Q}}}),x4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...w}=Br(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const N=zr(i),E=ur(u),C=zr(u)===u,A=await(d.isRTL==null?void 0:d.isRTL(h.floating)),P=g||(C||!x?[$d(u)]:u4(u)),R=S!=="none";!g&&R&&P.push(...f4(u,x,S,A));const T=[u,...P],j=await Gl(e,w),O=[];let I=((s=a.flip)==null?void 0:s.overflows)||[];if(f&&O.push(j[N]),m){const z=c4(i,l,A);O.push(j[z[0]],j[z[1]])}if(I=[...I,{placement:i,overflows:O}],!O.every(z=>z<=0)){var D,B;const z=(((D=a.flip)==null?void 0:D.index)||0)+1,G=T[z];if(G&&(!(m==="alignment"?E!==ur(G):!1)||I.every(q=>ur(q.placement)===E?q.overflows[0]>0:!0)))return{data:{index:z,overflows:I},reset:{placement:G}};let Q=(B=I.filter(X=>X.overflows[0]<=0).sort((X,q)=>X.overflows[1]-q.overflows[1])[0])==null?void 0:B.placement;if(!Q)switch(b){case"bestFit":{var H;const X=(H=I.filter(q=>{if(R){const U=ur(q.placement);return U===E||U==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((q,U)=>q[1]-U[1])[0])==null?void 0:H[0];X&&(Q=X);break}case"initialPlacement":Q=u;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function i1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function a1(n){return i4.some(e=>n[e]>=0)}const v4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=Br(n,e);switch(s){case"referenceHidden":{const a=await Gl(e,{...i,elementContext:"reference"}),l=i1(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:a1(l)}}}case"escaped":{const a=await Gl(e,{...i,altBoundary:!0}),l=i1(a,t.floating);return{data:{escapedOffsets:l,escaped:a1(l)}}}default:return{}}}}},wj=new Set(["left","top"]);async function b4(n,e){const{placement:t,platform:s,elements:i}=n,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),l=zr(t),u=ko(t),d=ur(t)==="y",h=wj.has(l)?-1:1,f=a&&d?-1:1,m=Br(e,n);let{mainAxis:g,crossAxis:b,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),d?{x:b*f,y:g*h}:{x:g*h,y:b*f}}const w4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:a,placement:l,middlewareData:u}=e,d=await b4(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:l}}}}},S4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:N,y:E}=w;return{x:N,y:E}}},...d}=Br(n,e),h={x:t,y:s},f=await Gl(e,d),m=ur(zr(i)),g=Yy(m);let b=h[g],S=h[m];if(a){const w=g==="y"?"top":"left",N=g==="y"?"bottom":"right",E=b+f[w],C=b-f[N];b=Hg(E,b,C)}if(l){const w=m==="y"?"top":"left",N=m==="y"?"bottom":"right",E=S+f[w],C=S-f[N];S=Hg(E,S,C)}const x=u.fn({...e,[g]:b,[m]:S});return{...x,data:{x:x.x-t,y:x.y-s,enabled:{[g]:a,[m]:l}}}}}},_4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=Br(n,e),f={x:t,y:s},m=ur(i),g=Yy(m);let b=f[g],S=f[m];const x=Br(u,e),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const C=g==="y"?"height":"width",A=a.reference[g]-a.floating[C]+w.mainAxis,P=a.reference[g]+a.reference[C]-w.mainAxis;b<A?b=A:b>P&&(b=P)}if(h){var N,E;const C=g==="y"?"width":"height",A=wj.has(zr(i)),P=a.reference[m]-a.floating[C]+(A&&((N=l.offset)==null?void 0:N[m])||0)+(A?0:w.crossAxis),R=a.reference[m]+a.reference[C]+(A?0:((E=l.offset)==null?void 0:E[m])||0)-(A?w.crossAxis:0);S<P?S=P:S>R&&(S=R)}return{[g]:b,[m]:S}}}},C4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:a,platform:l,elements:u}=e,{apply:d=()=>{},...h}=Br(n,e),f=await Gl(e,h),m=zr(i),g=ko(i),b=ur(i)==="y",{width:S,height:x}=a.floating;let w,N;m==="top"||m==="bottom"?(w=m,N=g===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(N=m,w=g==="end"?"top":"bottom");const E=x-f.top-f.bottom,C=S-f.left-f.right,A=Pi(x-f[w],E),P=Pi(S-f[N],C),R=!e.middlewareData.shift;let T=A,j=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(j=C),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(T=E),R&&!g){const I=is(f.left,0),D=is(f.right,0),B=is(f.top,0),H=is(f.bottom,0);b?j=S-2*(I!==0||D!==0?I+D:is(f.left,f.right)):T=x-2*(B!==0||H!==0?B+H:is(f.top,f.bottom))}await d({...e,availableWidth:j,availableHeight:T});const O=await l.getDimensions(u.floating);return S!==O.width||x!==O.height?{reset:{rects:!0}}:{}}}};function Nh(){return typeof window<"u"}function To(n){return Sj(n)?(n.nodeName||"").toLowerCase():"#document"}function us(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function br(n){var e;return(e=(Sj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Sj(n){return Nh()?n instanceof Node||n instanceof us(n).Node:!1}function Gs(n){return Nh()?n instanceof Element||n instanceof us(n).Element:!1}function gr(n){return Nh()?n instanceof HTMLElement||n instanceof us(n).HTMLElement:!1}function o1(n){return!Nh()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof us(n).ShadowRoot}const j4=new Set(["inline","contents"]);function pc(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=Ws(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!j4.has(i)}const N4=new Set(["table","td","th"]);function k4(n){return N4.has(To(n))}const T4=[":popover-open",":modal"];function kh(n){return T4.some(e=>{try{return n.matches(e)}catch{return!1}})}const A4=["transform","translate","scale","rotate","perspective"],P4=["transform","translate","scale","rotate","perspective","filter"],E4=["paint","layout","strict","content"];function Jy(n){const e=ex(),t=Gs(n)?Ws(n):n;return A4.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||P4.some(s=>(t.willChange||"").includes(s))||E4.some(s=>(t.contain||"").includes(s))}function M4(n){let e=Ei(n);for(;gr(e)&&!fo(e);){if(Jy(e))return e;if(kh(e))return null;e=Ei(e)}return null}function ex(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const R4=new Set(["html","body","#document"]);function fo(n){return R4.has(To(n))}function Ws(n){return us(n).getComputedStyle(n)}function Th(n){return Gs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ei(n){if(To(n)==="html")return n;const e=n.assignedSlot||n.parentNode||o1(n)&&n.host||br(n);return o1(e)?e.host:e}function _j(n){const e=Ei(n);return fo(e)?n.ownerDocument?n.ownerDocument.body:n.body:gr(e)&&pc(e)?e:_j(e)}function Wl(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=_j(n),a=i===((s=n.ownerDocument)==null?void 0:s.body),l=us(i);if(a){const u=Qg(l);return e.concat(l,l.visualViewport||[],pc(i)?i:[],u&&t?Wl(u):[])}return e.concat(i,Wl(i,[],t))}function Qg(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Cj(n){const e=Ws(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=gr(n),a=i?n.offsetWidth:t,l=i?n.offsetHeight:s,u=Ud(t)!==a||Ud(s)!==l;return u&&(t=a,s=l),{width:t,height:s,$:u}}function tx(n){return Gs(n)?n:n.contextElement}function co(n){const e=tx(n);if(!gr(e))return fr(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:a}=Cj(e);let l=(a?Ud(t.width):t.width)/s,u=(a?Ud(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const O4=fr(0);function jj(n){const e=us(n);return!ex()||!e.visualViewport?O4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function I4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==us(n)?!1:e}function da(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=tx(n);let l=fr(1);e&&(s?Gs(s)&&(l=co(s)):l=co(n));const u=I4(a,t,s)?jj(a):fr(0);let d=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,f=i.width/l.x,m=i.height/l.y;if(a){const g=us(a),b=s&&Gs(s)?us(s):s;let S=g,x=Qg(S);for(;x&&s&&b!==S;){const w=co(x),N=x.getBoundingClientRect(),E=Ws(x),C=N.left+(x.clientLeft+parseFloat(E.paddingLeft))*w.x,A=N.top+(x.clientTop+parseFloat(E.paddingTop))*w.y;d*=w.x,h*=w.y,f*=w.x,m*=w.y,d+=C,h+=A,S=us(x),x=Qg(S)}}return qd({width:f,height:m,x:d,y:h})}function Ah(n,e){const t=Th(n).scrollLeft;return e?e.left+t:da(br(n)).left+t}function Nj(n,e){const t=n.getBoundingClientRect(),s=t.left+e.scrollLeft-Ah(n,t),i=t.top+e.scrollTop;return{x:s,y:i}}function F4(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const a=i==="fixed",l=br(s),u=e?kh(e.floating):!1;if(s===l||u&&a)return t;let d={scrollLeft:0,scrollTop:0},h=fr(1);const f=fr(0),m=gr(s);if((m||!m&&!a)&&((To(s)!=="body"||pc(l))&&(d=Th(s)),gr(s))){const b=da(s);h=co(s),f.x=b.x+s.clientLeft,f.y=b.y+s.clientTop}const g=l&&!m&&!a?Nj(l,d):fr(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+g.x,y:t.y*h.y-d.scrollTop*h.y+f.y+g.y}}function D4(n){return Array.from(n.getClientRects())}function V4(n){const e=br(n),t=Th(n),s=n.ownerDocument.body,i=is(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=is(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-t.scrollLeft+Ah(n);const u=-t.scrollTop;return Ws(s).direction==="rtl"&&(l+=is(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:l,y:u}}const l1=25;function L4(n,e){const t=us(n),s=br(n),i=t.visualViewport;let a=s.clientWidth,l=s.clientHeight,u=0,d=0;if(i){a=i.width,l=i.height;const f=ex();(!f||f&&e==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}const h=Ah(s);if(h<=0){const f=s.ownerDocument,m=f.body,g=getComputedStyle(m),b=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,S=Math.abs(s.clientWidth-m.clientWidth-b);S<=l1&&(a-=S)}else h<=l1&&(a+=h);return{width:a,height:l,x:u,y:d}}const B4=new Set(["absolute","fixed"]);function z4(n,e){const t=da(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,a=gr(n)?co(n):fr(1),l=n.clientWidth*a.x,u=n.clientHeight*a.y,d=i*a.x,h=s*a.y;return{width:l,height:u,x:d,y:h}}function c1(n,e,t){let s;if(e==="viewport")s=L4(n,t);else if(e==="document")s=V4(br(n));else if(Gs(e))s=z4(e,t);else{const i=jj(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return qd(s)}function kj(n,e){const t=Ei(n);return t===e||!Gs(t)||fo(t)?!1:Ws(t).position==="fixed"||kj(t,e)}function U4(n,e){const t=e.get(n);if(t)return t;let s=Wl(n,[],!1).filter(u=>Gs(u)&&To(u)!=="body"),i=null;const a=Ws(n).position==="fixed";let l=a?Ei(n):n;for(;Gs(l)&&!fo(l);){const u=Ws(l),d=Jy(l);!d&&u.position==="fixed"&&(i=null),(a?!d&&!i:!d&&u.position==="static"&&!!i&&B4.has(i.position)||pc(l)&&!d&&kj(n,l))?s=s.filter(f=>f!==l):i=u,l=Ei(l)}return e.set(n,s),s}function $4(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const l=[...t==="clippingAncestors"?kh(e)?[]:U4(e,this._c):[].concat(t),s],u=l[0],d=l.reduce((h,f)=>{const m=c1(e,f,i);return h.top=is(m.top,h.top),h.right=Pi(m.right,h.right),h.bottom=Pi(m.bottom,h.bottom),h.left=is(m.left,h.left),h},c1(e,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function q4(n){const{width:e,height:t}=Cj(n);return{width:e,height:t}}function G4(n,e,t){const s=gr(e),i=br(e),a=t==="fixed",l=da(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=fr(0);function h(){d.x=Ah(i)}if(s||!s&&!a)if((To(e)!=="body"||pc(i))&&(u=Th(e)),s){const b=da(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&h();a&&!s&&i&&h();const f=i&&!s&&!a?Nj(i,u):fr(0),m=l.left+u.scrollLeft-d.x-f.x,g=l.top+u.scrollTop-d.y-f.y;return{x:m,y:g,width:l.width,height:l.height}}function xm(n){return Ws(n).position==="static"}function u1(n,e){if(!gr(n)||Ws(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return br(n)===t&&(t=t.ownerDocument.body),t}function Tj(n,e){const t=us(n);if(kh(n))return t;if(!gr(n)){let i=Ei(n);for(;i&&!fo(i);){if(Gs(i)&&!xm(i))return i;i=Ei(i)}return t}let s=u1(n,e);for(;s&&k4(s)&&xm(s);)s=u1(s,e);return s&&fo(s)&&xm(s)&&!Jy(s)?t:s||M4(n)||t}const W4=async function(n){const e=this.getOffsetParent||Tj,t=this.getDimensions,s=await t(n.floating);return{reference:G4(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function H4(n){return Ws(n).direction==="rtl"}const K4={convertOffsetParentRelativeRectToViewportRelativeRect:F4,getDocumentElement:br,getClippingRect:$4,getOffsetParent:Tj,getElementRects:W4,getClientRects:D4,getDimensions:q4,getScale:co,isElement:Gs,isRTL:H4};function Aj(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Q4(n,e){let t=null,s;const i=br(n);function a(){var u;clearTimeout(s),(u=t)==null||u.disconnect(),t=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const h=n.getBoundingClientRect(),{left:f,top:m,width:g,height:b}=h;if(u||e(),!g||!b)return;const S=Zu(m),x=Zu(i.clientWidth-(f+g)),w=Zu(i.clientHeight-(m+b)),N=Zu(f),C={rootMargin:-S+"px "+-x+"px "+-w+"px "+-N+"px",threshold:is(0,Pi(1,d))||1};let A=!0;function P(R){const T=R[0].intersectionRatio;if(T!==d){if(!A)return l();T?l(!1,T):s=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!Aj(h,n.getBoundingClientRect())&&l(),A=!1}try{t=new IntersectionObserver(P,{...C,root:i.ownerDocument})}catch{t=new IntersectionObserver(P,C)}t.observe(n)}return l(!0),a}function Y4(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=tx(n),f=i||a?[...h?Wl(h):[],...Wl(e)]:[];f.forEach(N=>{i&&N.addEventListener("scroll",t,{passive:!0}),a&&N.addEventListener("resize",t)});const m=h&&u?Q4(h,t):null;let g=-1,b=null;l&&(b=new ResizeObserver(N=>{let[E]=N;E&&E.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),h&&!d&&b.observe(h),b.observe(e));let S,x=d?da(n):null;d&&w();function w(){const N=da(n);x&&!Aj(x,N)&&t(),x=N,S=requestAnimationFrame(w)}return t(),()=>{var N;f.forEach(E=>{i&&E.removeEventListener("scroll",t),a&&E.removeEventListener("resize",t)}),m?.(),(N=b)==null||N.disconnect(),b=null,d&&cancelAnimationFrame(S)}}const X4=w4,Z4=S4,J4=x4,eI=C4,tI=v4,d1=y4,nI=_4,sI=(n,e,t)=>{const s=new Map,i={platform:K4,...t},a={...i.platform,_c:s};return g4(n,e,{...i,platform:a})};var rI=typeof document<"u",iI=function(){},kd=rI?v.useLayoutEffect:iI;function Gd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!Gd(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const a=i[s];if(!(a==="_owner"&&n.$$typeof)&&!Gd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function Pj(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function h1(n,e){const t=Pj(n);return Math.round(e*t)/t}function vm(n){const e=v.useRef(n);return kd(()=>{e.current=n}),e}function aI(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:h}=n,[f,m]=v.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,b]=v.useState(s);Gd(g,s)||b(s);const[S,x]=v.useState(null),[w,N]=v.useState(null),E=v.useCallback(q=>{q!==R.current&&(R.current=q,x(q))},[]),C=v.useCallback(q=>{q!==T.current&&(T.current=q,N(q))},[]),A=a||S,P=l||w,R=v.useRef(null),T=v.useRef(null),j=v.useRef(f),O=d!=null,I=vm(d),D=vm(i),B=vm(h),H=v.useCallback(()=>{if(!R.current||!T.current)return;const q={placement:e,strategy:t,middleware:g};D.current&&(q.platform=D.current),sI(R.current,T.current,q).then(U=>{const Y={...U,isPositioned:B.current!==!1};z.current&&!Gd(j.current,Y)&&(j.current=Y,Co.flushSync(()=>{m(Y)}))})},[g,e,t,D,B]);kd(()=>{h===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(q=>({...q,isPositioned:!1})))},[h]);const z=v.useRef(!1);kd(()=>(z.current=!0,()=>{z.current=!1}),[]),kd(()=>{if(A&&(R.current=A),P&&(T.current=P),A&&P){if(I.current)return I.current(A,P,H);H()}},[A,P,H,I,O]);const G=v.useMemo(()=>({reference:R,floating:T,setReference:E,setFloating:C}),[E,C]),Q=v.useMemo(()=>({reference:A,floating:P}),[A,P]),X=v.useMemo(()=>{const q={position:t,left:0,top:0};if(!Q.floating)return q;const U=h1(Q.floating,f.x),Y=h1(Q.floating,f.y);return u?{...q,transform:"translate("+U+"px, "+Y+"px)",...Pj(Q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:Y}},[t,u,Q.floating,f.x,f.y]);return v.useMemo(()=>({...f,update:H,refs:G,elements:Q,floatingStyles:X}),[f,H,G,Q,X])}const oI=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?d1({element:s.current,padding:i}).fn(t):{}:s?d1({element:s,padding:i}).fn(t):{}}}},lI=(n,e)=>({...X4(n),options:[n,e]}),cI=(n,e)=>({...Z4(n),options:[n,e]}),uI=(n,e)=>({...nI(n),options:[n,e]}),dI=(n,e)=>({...J4(n),options:[n,e]}),hI=(n,e)=>({...eI(n),options:[n,e]}),pI=(n,e)=>({...tI(n),options:[n,e]}),fI=(n,e)=>({...oI(n),options:[n,e]});var mI="Arrow",Ej=v.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...a}=n;return r.jsx(Me.svg,{...a,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ej.displayName=mI;var gI=Ej;function Ph(n){const[e,t]=v.useState(void 0);return Ht(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,u;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,u=h.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var nx="Popper",[Mj,Ao]=En(nx),[yI,Rj]=Mj(nx),Oj=n=>{const{__scopePopper:e,children:t}=n,[s,i]=v.useState(null);return r.jsx(yI,{scope:e,anchor:s,onAnchorChange:i,children:t})};Oj.displayName=nx;var Ij="PopperAnchor",Fj=v.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,a=Rj(Ij,t),l=v.useRef(null),u=We(e,l),d=v.useRef(null);return v.useEffect(()=>{const h=d.current;d.current=s?.current||l.current,h!==d.current&&a.onAnchorChange(d.current)}),s?null:r.jsx(Me.div,{...i,ref:u})});Fj.displayName=Ij;var sx="PopperContent",[xI,vI]=Mj(sx),Dj=v.forwardRef((n,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:b="optimized",onPlaced:S,...x}=n,w=Rj(sx,t),[N,E]=v.useState(null),C=We(e,F=>E(F)),[A,P]=v.useState(null),R=Ph(A),T=R?.width??0,j=R?.height??0,O=s+(a!=="center"?"-"+a:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(h)?h:[h],B=D.length>0,H={padding:I,boundary:D.filter(wI),altBoundary:B},{refs:z,floatingStyles:G,placement:Q,isPositioned:X,middlewareData:q}=aI({strategy:"fixed",placement:O,whileElementsMounted:(...F)=>Y4(...F,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[lI({mainAxis:i+j,alignmentAxis:l}),d&&cI({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?uI():void 0,...H}),d&&dI({...H}),hI({...H,apply:({elements:F,rects:L,availableWidth:re,availableHeight:oe})=>{const{width:we,height:te}=L.reference,fe=F.floating.style;fe.setProperty("--radix-popper-available-width",`${re}px`),fe.setProperty("--radix-popper-available-height",`${oe}px`),fe.setProperty("--radix-popper-anchor-width",`${we}px`),fe.setProperty("--radix-popper-anchor-height",`${te}px`)}}),A&&fI({element:A,padding:u}),SI({arrowWidth:T,arrowHeight:j}),g&&pI({strategy:"referenceHidden",...H})]}),[U,Y]=Bj(Q),M=Ut(S);Ht(()=>{X&&M?.()},[X,M]);const W=q.arrow?.x,J=q.arrow?.y,de=q.arrow?.centerOffset!==0,[ce,pe]=v.useState();return Ht(()=>{N&&pe(window.getComputedStyle(N).zIndex)},[N]),r.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:X?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:r.jsx(xI,{scope:t,placedSide:U,onArrowChange:P,arrowX:W,arrowY:J,shouldHideArrow:de,children:r.jsx(Me.div,{"data-side":U,"data-align":Y,...x,ref:C,style:{...x.style,animation:X?void 0:"none"}})})})});Dj.displayName=sx;var Vj="PopperArrow",bI={top:"bottom",right:"left",bottom:"top",left:"right"},Lj=v.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,a=vI(Vj,s),l=bI[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(gI,{...i,ref:t,style:{...i.style,display:"block"}})})});Lj.displayName=Vj;function wI(n){return n!==null}var SI=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:s,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[h,f]=Bj(t),m={start:"0%",center:"50%",end:"100%"}[f],g=(i.arrow?.x??0)+u/2,b=(i.arrow?.y??0)+d/2;let S="",x="";return h==="bottom"?(S=l?m:`${g}px`,x=`${-d}px`):h==="top"?(S=l?m:`${g}px`,x=`${s.floating.height+d}px`):h==="right"?(S=`${-d}px`,x=l?m:`${b}px`):h==="left"&&(S=`${s.floating.width+d}px`,x=l?m:`${b}px`),{data:{x:S,y:x}}}});function Bj(n){const[e,t="center"]=n.split("-");return[e,t]}var zj=Oj,rx=Fj,ix=Dj,ax=Lj,[Eh,SH]=En("Tooltip",[Ao]),ox=Ao(),Uj="TooltipProvider",_I=700,p1="tooltip.open",[CI,$j]=Eh(Uj),qj=n=>{const{__scopeTooltip:e,delayDuration:t=_I,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=n,l=v.useRef(!0),u=v.useRef(!1),d=v.useRef(0);return v.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),r.jsx(CI,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:v.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:u,onPointerInTransitChange:v.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:a})};qj.displayName=Uj;var Gj="Tooltip",[_H,Mh]=Eh(Gj),Yg="TooltipTrigger",jI=v.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=Mh(Yg,t),a=$j(Yg,t),l=ox(t),u=v.useRef(null),d=We(e,u,i.onTriggerChange),h=v.useRef(!1),f=v.useRef(!1),m=v.useCallback(()=>h.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx(rx,{asChild:!0,...l,children:r.jsx(Me.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:d,onPointerMove:Se(n.onPointerMove,g=>{g.pointerType!=="touch"&&!f.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Se(n.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Se(n.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Se(n.onFocus,()=>{h.current||i.onOpen()}),onBlur:Se(n.onBlur,i.onClose),onClick:Se(n.onClick,i.onClose)})})});jI.displayName=Yg;var NI="TooltipPortal",[CH,kI]=Eh(NI,{forceMount:void 0}),mo="TooltipContent",Wj=v.forwardRef((n,e)=>{const t=kI(mo,n.__scopeTooltip),{forceMount:s=t.forceMount,side:i="top",...a}=n,l=Mh(mo,n.__scopeTooltip);return r.jsx(Mn,{present:s||l.open,children:l.disableHoverableContent?r.jsx(Hj,{side:i,...a,ref:e}):r.jsx(TI,{side:i,...a,ref:e})})}),TI=v.forwardRef((n,e)=>{const t=Mh(mo,n.__scopeTooltip),s=$j(mo,n.__scopeTooltip),i=v.useRef(null),a=We(e,i),[l,u]=v.useState(null),{trigger:d,onClose:h}=t,f=i.current,{onPointerInTransitChange:m}=s,g=v.useCallback(()=>{u(null),m(!1)},[m]),b=v.useCallback((S,x)=>{const w=S.currentTarget,N={x:S.clientX,y:S.clientY},E=RI(N,w.getBoundingClientRect()),C=OI(N,E),A=II(x.getBoundingClientRect()),P=DI([...C,...A]);u(P),m(!0)},[m]);return v.useEffect(()=>()=>g(),[g]),v.useEffect(()=>{if(d&&f){const S=w=>b(w,f),x=w=>b(w,d);return d.addEventListener("pointerleave",S),f.addEventListener("pointerleave",x),()=>{d.removeEventListener("pointerleave",S),f.removeEventListener("pointerleave",x)}}},[d,f,b,g]),v.useEffect(()=>{if(l){const S=x=>{const w=x.target,N={x:x.clientX,y:x.clientY},E=d?.contains(w)||f?.contains(w),C=!FI(N,l);E?g():C&&(g(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,f,l,h,g]),r.jsx(Hj,{...n,ref:a})}),[AI,PI]=Eh(Gj,{isInside:!1}),EI=l5("TooltipContent"),Hj=v.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:l,...u}=n,d=Mh(mo,t),h=ox(t),{onClose:f}=d;return v.useEffect(()=>(document.addEventListener(p1,f),()=>document.removeEventListener(p1,f)),[f]),v.useEffect(()=>{if(d.trigger){const m=g=>{g.target?.contains(d.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,f]),r.jsx(jo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:r.jsxs(ix,{"data-state":d.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(EI,{children:s}),r.jsx(AI,{scope:t,isInside:!0,children:r.jsx(P5,{id:d.contentId,role:"tooltip",children:i||s})})]})})});Wj.displayName=mo;var Kj="TooltipArrow",MI=v.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=ox(t);return PI(Kj,t).isInside?null:r.jsx(ax,{...i,...s,ref:e})});MI.displayName=Kj;function RI(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,s,i,a)){case a:return"left";case i:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function OI(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function II(n){const{top:e,right:t,bottom:s,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:s},{x:i,y:s}]}function FI(n,e){const{x:t,y:s}=n;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a],d=e[l],h=u.x,f=u.y,m=d.x,g=d.y;f>s!=g>s&&t<(m-h)*(s-f)/(g-f)+h&&(i=!i)}return i}function DI(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),VI(e)}function VI(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const i=n[s];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const i=n[s];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var LI=qj,Qj=Wj;const BI=LI,zI=v.forwardRef(({className:n,sideOffset:e=4,...t},s)=>r.jsx(Qj,{ref:s,sideOffset:e,className:Ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));zI.displayName=Qj.displayName;const UI=_h("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=v.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},a)=>{const l=s?a5:"button";return r.jsx(l,{className:Ve(UI({variant:e,size:t,className:n})),ref:a,...i})});ne.displayName="Button";function $I(){return oC.useSyncExternalStore(qI,()=>!0,()=>!1)}function qI(){return()=>{}}var lx="Avatar",[GI,jH]=En(lx),[WI,Yj]=GI(lx),Xj=v.forwardRef((n,e)=>{const{__scopeAvatar:t,...s}=n,[i,a]=v.useState("idle");return r.jsx(WI,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(Me.span,{...s,ref:e})})});Xj.displayName=lx;var Zj="AvatarImage",Jj=v.forwardRef((n,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:i=()=>{},...a}=n,l=Yj(Zj,t),u=HI(s,a),d=Ut(h=>{i(h),l.onImageLoadingStatusChange(h)});return Ht(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?r.jsx(Me.img,{...a,ref:e,src:s}):null});Jj.displayName=Zj;var eN="AvatarFallback",tN=v.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:s,...i}=n,a=Yj(eN,t),[l,u]=v.useState(s===void 0);return v.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(d)}},[s]),l&&a.imageLoadingStatus!=="loaded"?r.jsx(Me.span,{...i,ref:e}):null});tN.displayName=eN;function f1(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function HI(n,{referrerPolicy:e,crossOrigin:t}){const s=$I(),i=v.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[l,u]=v.useState(()=>f1(a,n));return Ht(()=>{u(f1(a,n))},[a,n]),Ht(()=>{const d=m=>()=>{u(m)};if(!a)return;const h=d("loaded"),f=d("error");return a.addEventListener("load",h),a.addEventListener("error",f),e&&(a.referrerPolicy=e),typeof t=="string"&&(a.crossOrigin=t),()=>{a.removeEventListener("load",h),a.removeEventListener("error",f)}},[a,t,e]),l}var nN=Xj,sN=Jj,rN=tN;const iN=v.forwardRef(({className:n,...e},t)=>r.jsx(nN,{ref:t,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));iN.displayName=nN.displayName;const KI=v.forwardRef(({className:n,...e},t)=>r.jsx(sN,{ref:t,className:Ve("aspect-square h-full w-full",n),...e}));KI.displayName=sN.displayName;const aN=v.forwardRef(({className:n,...e},t)=>r.jsx(rN,{ref:t,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));aN.displayName=rN.displayName;var QI=v.createContext(void 0);function Po(n){const e=v.useContext(QI);return n||e||"ltr"}var bm=0;function cx(){v.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??m1()),document.body.insertAdjacentElement("beforeend",n[1]??m1()),bm++,()=>{bm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),bm--}},[])}function m1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var wm="focusScope.autoFocusOnMount",Sm="focusScope.autoFocusOnUnmount",g1={bubbles:!1,cancelable:!0},YI="FocusScope",Rh=v.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=n,[u,d]=v.useState(null),h=Ut(i),f=Ut(a),m=v.useRef(null),g=We(e,x=>d(x)),b=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let x=function(C){if(b.paused||!u)return;const A=C.target;u.contains(A)?m.current=A:xi(m.current,{select:!0})},w=function(C){if(b.paused||!u)return;const A=C.relatedTarget;A!==null&&(u.contains(A)||xi(m.current,{select:!0}))},N=function(C){if(document.activeElement===document.body)for(const P of C)P.removedNodes.length>0&&xi(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const E=new MutationObserver(N);return u&&E.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),E.disconnect()}}},[s,u,b.paused]),v.useEffect(()=>{if(u){x1.add(b);const x=document.activeElement;if(!u.contains(x)){const N=new CustomEvent(wm,g1);u.addEventListener(wm,h),u.dispatchEvent(N),N.defaultPrevented||(XI(n3(oN(u)),{select:!0}),document.activeElement===x&&xi(u))}return()=>{u.removeEventListener(wm,h),setTimeout(()=>{const N=new CustomEvent(Sm,g1);u.addEventListener(Sm,f),u.dispatchEvent(N),N.defaultPrevented||xi(x??document.body,{select:!0}),u.removeEventListener(Sm,f),x1.remove(b)},0)}}},[u,h,f,b]);const S=v.useCallback(x=>{if(!t&&!s||b.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,N=document.activeElement;if(w&&N){const E=x.currentTarget,[C,A]=ZI(E);C&&A?!x.shiftKey&&N===A?(x.preventDefault(),t&&xi(C,{select:!0})):x.shiftKey&&N===C&&(x.preventDefault(),t&&xi(A,{select:!0})):N===E&&x.preventDefault()}},[t,s,b.paused]);return r.jsx(Me.div,{tabIndex:-1,...l,ref:g,onKeyDown:S})});Rh.displayName=YI;function XI(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(xi(s,{select:e}),document.activeElement!==t)return}function ZI(n){const e=oN(n),t=y1(e,n),s=y1(e.reverse(),n);return[t,s]}function oN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function y1(n,e){for(const t of n)if(!JI(t,{upTo:e}))return t}function JI(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function e3(n){return n instanceof HTMLInputElement&&"select"in n}function xi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&e3(n)&&e&&n.select()}}var x1=t3();function t3(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=v1(n,e),n.unshift(e)},remove(e){n=v1(n,e),n[0]?.resume()}}}function v1(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function n3(n){return n.filter(e=>e.tagName!=="A")}var _m="rovingFocusGroup.onEntryFocus",s3={bubbles:!1,cancelable:!0},fc="RovingFocusGroup",[Xg,lN,r3]=cc(fc),[i3,Oh]=En(fc,[r3]),[a3,o3]=i3(fc),cN=v.forwardRef((n,e)=>r.jsx(Xg.Provider,{scope:n.__scopeRovingFocusGroup,children:r.jsx(Xg.Slot,{scope:n.__scopeRovingFocusGroup,children:r.jsx(l3,{...n,ref:e})})}));cN.displayName=fc;var l3=v.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=n,g=v.useRef(null),b=We(e,g),S=Po(a),[x,w]=mr({prop:l,defaultProp:u??null,onChange:d,caller:fc}),[N,E]=v.useState(!1),C=Ut(h),A=lN(t),P=v.useRef(!1),[R,T]=v.useState(0);return v.useEffect(()=>{const j=g.current;if(j)return j.addEventListener(_m,C),()=>j.removeEventListener(_m,C)},[C]),r.jsx(a3,{scope:t,orientation:s,dir:S,loop:i,currentTabStopId:x,onItemFocus:v.useCallback(j=>w(j),[w]),onItemShiftTab:v.useCallback(()=>E(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(j=>j+1),[]),onFocusableItemRemove:v.useCallback(()=>T(j=>j-1),[]),children:r.jsx(Me.div,{tabIndex:N||R===0?-1:0,"data-orientation":s,...m,ref:b,style:{outline:"none",...n.style},onMouseDown:Se(n.onMouseDown,()=>{P.current=!0}),onFocus:Se(n.onFocus,j=>{const O=!P.current;if(j.target===j.currentTarget&&O&&!N){const I=new CustomEvent(_m,s3);if(j.currentTarget.dispatchEvent(I),!I.defaultPrevented){const D=A().filter(Q=>Q.focusable),B=D.find(Q=>Q.active),H=D.find(Q=>Q.id===x),G=[B,H,...D].filter(Boolean).map(Q=>Q.ref.current);hN(G,f)}}P.current=!1}),onBlur:Se(n.onBlur,()=>E(!1))})})}),uN="RovingFocusGroupItem",dN=v.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:a,children:l,...u}=n,d=pr(),h=a||d,f=o3(uN,t),m=f.currentTabStopId===h,g=lN(t),{onFocusableItemAdd:b,onFocusableItemRemove:S,currentTabStopId:x}=f;return v.useEffect(()=>{if(s)return b(),()=>S()},[s,b,S]),r.jsx(Xg.ItemSlot,{scope:t,id:h,focusable:s,active:i,children:r.jsx(Me.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...u,ref:e,onMouseDown:Se(n.onMouseDown,w=>{s?f.onItemFocus(h):w.preventDefault()}),onFocus:Se(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:Se(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const N=d3(w,f.orientation,f.dir);if(N!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let C=g().filter(A=>A.focusable).map(A=>A.ref.current);if(N==="last")C.reverse();else if(N==="prev"||N==="next"){N==="prev"&&C.reverse();const A=C.indexOf(w.currentTarget);C=f.loop?h3(C,A+1):C.slice(A+1)}setTimeout(()=>hN(C))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:x!=null}):l})})});dN.displayName=uN;var c3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function u3(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function d3(n,e,t){const s=u3(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return c3[s]}function hN(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function h3(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var pN=cN,fN=dN,p3=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Qa=new WeakMap,Ju=new WeakMap,ed={},Cm=0,mN=function(n){return n&&(n.host||mN(n.parentNode))},f3=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=mN(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},m3=function(n,e,t,s){var i=f3(e,Array.isArray(n)?n:[n]);ed[t]||(ed[t]=new WeakMap);var a=ed[t],l=[],u=new Set,d=new Set(i),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};i.forEach(h);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(g){if(u.has(g))f(g);else try{var b=g.getAttribute(s),S=b!==null&&b!=="false",x=(Qa.get(g)||0)+1,w=(a.get(g)||0)+1;Qa.set(g,x),a.set(g,w),l.push(g),x===1&&S&&Ju.set(g,!0),w===1&&g.setAttribute(t,"true"),S||g.setAttribute(s,"true")}catch(N){console.error("aria-hidden: cannot operate on ",g,N)}})};return f(e),u.clear(),Cm++,function(){l.forEach(function(m){var g=Qa.get(m)-1,b=a.get(m)-1;Qa.set(m,g),a.set(m,b),g||(Ju.has(m)||m.removeAttribute(s),Ju.delete(m)),b||m.removeAttribute(t)}),Cm--,Cm||(Qa=new WeakMap,Qa=new WeakMap,Ju=new WeakMap,ed={})}},ux=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=p3(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),m3(s,i,t,"aria-hidden")):function(){return null}},cr=function(){return cr=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},cr.apply(this,arguments)};function gN(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function Xs(n,e,t,s){var i=arguments.length,a=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,s);else for(var u=n.length-1;u>=0;u--)(l=n[u])&&(a=(i<3?l(a):i>3?l(e,t,a):l(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function tn(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(f){try{h(s.next(f))}catch(m){l(m)}}function d(f){try{h(s.throw(f))}catch(m){l(m)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((s=s.apply(n,e||[])).next())})}function g3(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return n.concat(a||Array.prototype.slice.call(e))}var Td="right-scroll-bar-position",Ad="width-before-scroll-bar",y3="with-scroll-bars-hidden",x3="--removed-body-scroll-bar-size";function jm(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function v3(n,e){var t=v.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var b3=typeof window<"u"?v.useLayoutEffect:v.useEffect,b1=new WeakMap;function w3(n,e){var t=v3(null,function(s){return n.forEach(function(i){return jm(i,s)})});return b3(function(){var s=b1.get(t);if(s){var i=new Set(s),a=new Set(n),l=t.current;i.forEach(function(u){a.has(u)||jm(u,null)}),a.forEach(function(u){i.has(u)||jm(u,l)})}b1.set(t,n)},[n]),t}function S3(n){return n}function _3(n,e){e===void 0&&(e=S3);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var l=e(a,s);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(s=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){s=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(a),l=t}var d=function(){var f=l;l=[],f.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),t}}}};return i}function C3(n){n===void 0&&(n={});var e=_3(null);return e.options=cr({async:!0,ssr:!1},n),e}var yN=function(n){var e=n.sideCar,t=gN(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,cr({},t))};yN.isSideCarExport=!0;function j3(n,e){return n.useMedium(e),yN}var xN=C3(),Nm=function(){},Ih=v.forwardRef(function(n,e){var t=v.useRef(null),s=v.useState({onScrollCapture:Nm,onWheelCapture:Nm,onTouchMoveCapture:Nm}),i=s[0],a=s[1],l=n.forwardProps,u=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,m=n.shards,g=n.sideCar,b=n.noRelative,S=n.noIsolation,x=n.inert,w=n.allowPinchZoom,N=n.as,E=N===void 0?"div":N,C=n.gapMode,A=gN(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=g,R=w3([t,e]),T=cr(cr({},A),i);return v.createElement(v.Fragment,null,f&&v.createElement(P,{sideCar:xN,removeScrollBar:h,shards:m,noRelative:b,noIsolation:S,inert:x,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:C}),l?v.cloneElement(v.Children.only(u),cr(cr({},T),{ref:R})):v.createElement(E,cr({},T,{className:d,ref:R}),u))});Ih.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ih.classNames={fullWidth:Ad,zeroRight:Td};var N3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function k3(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=N3();return e&&n.setAttribute("nonce",e),n}function T3(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function A3(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var P3=function(){var n=0,e=null;return{add:function(t){n==0&&(e=k3())&&(T3(e,t),A3(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},E3=function(){var n=P3();return function(e,t){v.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},vN=function(){var n=E3(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},M3={left:0,top:0,right:0,gap:0},km=function(n){return parseInt(n||"",10)||0},R3=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[km(t),km(s),km(i)]},O3=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return M3;var e=R3(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},I3=vN(),uo="data-scroll-locked",F3=function(n,e,t,s){var i=n.left,a=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(y3,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(uo,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Td,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Ad,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Td," .").concat(Td,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ad," .").concat(Ad,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(uo,`] {
    `).concat(x3,": ").concat(u,`px;
  }
`)},w1=function(){var n=parseInt(document.body.getAttribute(uo)||"0",10);return isFinite(n)?n:0},D3=function(){v.useEffect(function(){return document.body.setAttribute(uo,(w1()+1).toString()),function(){var n=w1()-1;n<=0?document.body.removeAttribute(uo):document.body.setAttribute(uo,n.toString())}},[])},V3=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;D3();var a=v.useMemo(function(){return O3(i)},[i]);return v.createElement(I3,{styles:F3(a,!e,i,t?"":"!important")})},Zg=!1;if(typeof window<"u")try{var td=Object.defineProperty({},"passive",{get:function(){return Zg=!0,!0}});window.addEventListener("test",td,td),window.removeEventListener("test",td,td)}catch{Zg=!1}var Ya=Zg?{passive:!1}:!1,L3=function(n){return n.tagName==="TEXTAREA"},bN=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!L3(n)&&t[e]==="visible")},B3=function(n){return bN(n,"overflowY")},z3=function(n){return bN(n,"overflowX")},S1=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=wN(n,s);if(i){var a=SN(n,s),l=a[1],u=a[2];if(l>u)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},U3=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},$3=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},wN=function(n,e){return n==="v"?B3(e):z3(e)},SN=function(n,e){return n==="v"?U3(e):$3(e)},q3=function(n,e){return n==="h"&&e==="rtl"?-1:1},G3=function(n,e,t,s,i){var a=q3(n,window.getComputedStyle(e).direction),l=a*s,u=t.target,d=e.contains(u),h=!1,f=l>0,m=0,g=0;do{if(!u)break;var b=SN(n,u),S=b[0],x=b[1],w=b[2],N=x-w-a*S;(S||N)&&wN(n,u)&&(m+=N,g+=S);var E=u.parentNode;u=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(f&&Math.abs(m)<1||!f&&Math.abs(g)<1)&&(h=!0),h},nd=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},_1=function(n){return[n.deltaX,n.deltaY]},C1=function(n){return n&&"current"in n?n.current:n},W3=function(n,e){return n[0]===e[0]&&n[1]===e[1]},H3=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},K3=0,Xa=[];function Q3(n){var e=v.useRef([]),t=v.useRef([0,0]),s=v.useRef(),i=v.useState(K3++)[0],a=v.useState(vN)[0],l=v.useRef(n);v.useEffect(function(){l.current=n},[n]),v.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var x=g3([n.lockRef.current],(n.shards||[]).map(C1),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var u=v.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var N=nd(x),E=t.current,C="deltaX"in x?x.deltaX:E[0]-N[0],A="deltaY"in x?x.deltaY:E[1]-N[1],P,R=x.target,T=Math.abs(C)>Math.abs(A)?"h":"v";if("touches"in x&&T==="h"&&R.type==="range")return!1;var j=S1(T,R);if(!j)return!0;if(j?P=T:(P=T==="v"?"h":"v",j=S1(T,R)),!j)return!1;if(!s.current&&"changedTouches"in x&&(C||A)&&(s.current=P),!P)return!0;var O=s.current||P;return G3(O,w,x,O==="h"?C:A)},[]),d=v.useCallback(function(x){var w=x;if(!(!Xa.length||Xa[Xa.length-1]!==a)){var N="deltaY"in w?_1(w):nd(w),E=e.current.filter(function(P){return P.name===w.type&&(P.target===w.target||w.target===P.shadowParent)&&W3(P.delta,N)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var C=(l.current.shards||[]).map(C1).filter(Boolean).filter(function(P){return P.contains(w.target)}),A=C.length>0?u(w,C[0]):!l.current.noIsolation;A&&w.cancelable&&w.preventDefault()}}},[]),h=v.useCallback(function(x,w,N,E){var C={name:x,delta:w,target:N,should:E,shadowParent:Y3(N)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(A){return A!==C})},1)},[]),f=v.useCallback(function(x){t.current=nd(x),s.current=void 0},[]),m=v.useCallback(function(x){h(x.type,_1(x),x.target,u(x,n.lockRef.current))},[]),g=v.useCallback(function(x){h(x.type,nd(x),x.target,u(x,n.lockRef.current))},[]);v.useEffect(function(){return Xa.push(a),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",d,Ya),document.addEventListener("touchmove",d,Ya),document.addEventListener("touchstart",f,Ya),function(){Xa=Xa.filter(function(x){return x!==a}),document.removeEventListener("wheel",d,Ya),document.removeEventListener("touchmove",d,Ya),document.removeEventListener("touchstart",f,Ya)}},[]);var b=n.removeScrollBar,S=n.inert;return v.createElement(v.Fragment,null,S?v.createElement(a,{styles:H3(i)}):null,b?v.createElement(V3,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function Y3(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const X3=j3(xN,Q3);var Fh=v.forwardRef(function(n,e){return v.createElement(Ih,cr({},n,{ref:e,sideCar:X3}))});Fh.classNames=Ih.classNames;var Jg=["Enter"," "],Z3=["ArrowDown","PageUp","Home"],_N=["ArrowUp","PageDown","End"],J3=[...Z3,..._N],eF={ltr:[...Jg,"ArrowRight"],rtl:[...Jg,"ArrowLeft"]},tF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mc="Menu",[Hl,nF,sF]=cc(mc),[xa,CN]=En(mc,[sF,Ao,Oh]),Dh=Ao(),jN=Oh(),[rF,va]=xa(mc),[iF,gc]=xa(mc),NN=n=>{const{__scopeMenu:e,open:t=!1,children:s,dir:i,onOpenChange:a,modal:l=!0}=n,u=Dh(e),[d,h]=v.useState(null),f=v.useRef(!1),m=Ut(a),g=Po(i);return v.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),r.jsx(zj,{...u,children:r.jsx(rF,{scope:e,open:t,onOpenChange:m,content:d,onContentChange:h,children:r.jsx(iF,{scope:e,onClose:v.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:g,modal:l,children:s})})})};NN.displayName=mc;var aF="MenuAnchor",dx=v.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Dh(t);return r.jsx(rx,{...i,...s,ref:e})});dx.displayName=aF;var hx="MenuPortal",[oF,kN]=xa(hx,{forceMount:void 0}),TN=n=>{const{__scopeMenu:e,forceMount:t,children:s,container:i}=n,a=va(hx,e);return r.jsx(oF,{scope:e,forceMount:t,children:r.jsx(Mn,{present:t||a.open,children:r.jsx(uc,{asChild:!0,container:i,children:s})})})};TN.displayName=hx;var ws="MenuContent",[lF,px]=xa(ws),AN=v.forwardRef((n,e)=>{const t=kN(ws,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=va(ws,n.__scopeMenu),l=gc(ws,n.__scopeMenu);return r.jsx(Hl.Provider,{scope:n.__scopeMenu,children:r.jsx(Mn,{present:s||a.open,children:r.jsx(Hl.Slot,{scope:n.__scopeMenu,children:l.modal?r.jsx(cF,{...i,ref:e}):r.jsx(uF,{...i,ref:e})})})})}),cF=v.forwardRef((n,e)=>{const t=va(ws,n.__scopeMenu),s=v.useRef(null),i=We(e,s);return v.useEffect(()=>{const a=s.current;if(a)return ux(a)},[]),r.jsx(fx,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Se(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),uF=v.forwardRef((n,e)=>{const t=va(ws,n.__scopeMenu);return r.jsx(fx,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),dF=la("MenuContent.ScrollLock"),fx=v.forwardRef((n,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:b,disableOutsideScroll:S,...x}=n,w=va(ws,t),N=gc(ws,t),E=Dh(t),C=jN(t),A=nF(t),[P,R]=v.useState(null),T=v.useRef(null),j=We(e,T,w.onContentChange),O=v.useRef(0),I=v.useRef(""),D=v.useRef(0),B=v.useRef(null),H=v.useRef("right"),z=v.useRef(0),G=S?Fh:v.Fragment,Q=S?{as:dF,allowPinchZoom:!0}:void 0,X=U=>{const Y=I.current+U,M=A().filter(F=>!F.disabled),W=document.activeElement,J=M.find(F=>F.ref.current===W)?.textValue,de=M.map(F=>F.textValue),ce=_F(de,Y,J),pe=M.find(F=>F.textValue===ce)?.ref.current;(function F(L){I.current=L,window.clearTimeout(O.current),L!==""&&(O.current=window.setTimeout(()=>F(""),1e3))})(Y),pe&&setTimeout(()=>pe.focus())};v.useEffect(()=>()=>window.clearTimeout(O.current),[]),cx();const q=v.useCallback(U=>H.current===B.current?.side&&jF(U,B.current?.area),[]);return r.jsx(lF,{scope:t,searchRef:I,onItemEnter:v.useCallback(U=>{q(U)&&U.preventDefault()},[q]),onItemLeave:v.useCallback(U=>{q(U)||(T.current?.focus(),R(null))},[q]),onTriggerLeave:v.useCallback(U=>{q(U)&&U.preventDefault()},[q]),pointerGraceTimerRef:D,onPointerGraceIntentChange:v.useCallback(U=>{B.current=U},[]),children:r.jsx(G,{...Q,children:r.jsx(Rh,{asChild:!0,trapped:i,onMountAutoFocus:Se(a,U=>{U.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:r.jsx(jo,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:g,onDismiss:b,children:r.jsx(pN,{asChild:!0,...C,dir:N.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:R,onEntryFocus:Se(d,U=>{N.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(ix,{role:"menu","aria-orientation":"vertical","data-state":GN(w.open),"data-radix-menu-content":"",dir:N.dir,...E,...x,ref:j,style:{outline:"none",...x.style},onKeyDown:Se(x.onKeyDown,U=>{const M=U.target.closest("[data-radix-menu-content]")===U.currentTarget,W=U.ctrlKey||U.altKey||U.metaKey,J=U.key.length===1;M&&(U.key==="Tab"&&U.preventDefault(),!W&&J&&X(U.key));const de=T.current;if(U.target!==de||!J3.includes(U.key))return;U.preventDefault();const pe=A().filter(F=>!F.disabled).map(F=>F.ref.current);_N.includes(U.key)&&pe.reverse(),wF(pe)}),onBlur:Se(n.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(O.current),I.current="")}),onPointerMove:Se(n.onPointerMove,Kl(U=>{const Y=U.target,M=z.current!==U.clientX;if(U.currentTarget.contains(Y)&&M){const W=U.clientX>z.current?"right":"left";H.current=W,z.current=U.clientX}}))})})})})})})});AN.displayName=ws;var hF="MenuGroup",mx=v.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(Me.div,{role:"group",...s,ref:e})});mx.displayName=hF;var pF="MenuLabel",PN=v.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(Me.div,{...s,ref:e})});PN.displayName=pF;var Wd="MenuItem",j1="menu.itemSelect",Vh=v.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:s,...i}=n,a=v.useRef(null),l=gc(Wd,n.__scopeMenu),u=px(Wd,n.__scopeMenu),d=We(e,a),h=v.useRef(!1),f=()=>{const m=a.current;if(!t&&m){const g=new CustomEvent(j1,{bubbles:!0,cancelable:!0});m.addEventListener(j1,b=>s?.(b),{once:!0}),Vy(m,g),g.defaultPrevented?h.current=!1:l.onClose()}};return r.jsx(EN,{...i,ref:d,disabled:t,onClick:Se(n.onClick,f),onPointerDown:m=>{n.onPointerDown?.(m),h.current=!0},onPointerUp:Se(n.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:Se(n.onKeyDown,m=>{const g=u.searchRef.current!=="";t||g&&m.key===" "||Jg.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Vh.displayName=Wd;var EN=v.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:i,...a}=n,l=px(Wd,t),u=jN(t),d=v.useRef(null),h=We(e,d),[f,m]=v.useState(!1),[g,b]=v.useState("");return v.useEffect(()=>{const S=d.current;S&&b((S.textContent??"").trim())},[a.children]),r.jsx(Hl.ItemSlot,{scope:t,disabled:s,textValue:i??g,children:r.jsx(fN,{asChild:!0,...u,focusable:!s,children:r.jsx(Me.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:h,onPointerMove:Se(n.onPointerMove,Kl(S=>{s?l.onItemLeave(S):(l.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Se(n.onPointerLeave,Kl(S=>l.onItemLeave(S))),onFocus:Se(n.onFocus,()=>m(!0)),onBlur:Se(n.onBlur,()=>m(!1))})})})}),fF="MenuCheckboxItem",MN=v.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:s,...i}=n;return r.jsx(DN,{scope:n.__scopeMenu,checked:t,children:r.jsx(Vh,{role:"menuitemcheckbox","aria-checked":Hd(t)?"mixed":t,...i,ref:e,"data-state":yx(t),onSelect:Se(i.onSelect,()=>s?.(Hd(t)?!0:!t),{checkForDefaultPrevented:!1})})})});MN.displayName=fF;var RN="MenuRadioGroup",[mF,gF]=xa(RN,{value:void 0,onValueChange:()=>{}}),ON=v.forwardRef((n,e)=>{const{value:t,onValueChange:s,...i}=n,a=Ut(s);return r.jsx(mF,{scope:n.__scopeMenu,value:t,onValueChange:a,children:r.jsx(mx,{...i,ref:e})})});ON.displayName=RN;var IN="MenuRadioItem",FN=v.forwardRef((n,e)=>{const{value:t,...s}=n,i=gF(IN,n.__scopeMenu),a=t===i.value;return r.jsx(DN,{scope:n.__scopeMenu,checked:a,children:r.jsx(Vh,{role:"menuitemradio","aria-checked":a,...s,ref:e,"data-state":yx(a),onSelect:Se(s.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});FN.displayName=IN;var gx="MenuItemIndicator",[DN,yF]=xa(gx,{checked:!1}),VN=v.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:s,...i}=n,a=yF(gx,t);return r.jsx(Mn,{present:s||Hd(a.checked)||a.checked===!0,children:r.jsx(Me.span,{...i,ref:e,"data-state":yx(a.checked)})})});VN.displayName=gx;var xF="MenuSeparator",LN=v.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return r.jsx(Me.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});LN.displayName=xF;var vF="MenuArrow",BN=v.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Dh(t);return r.jsx(ax,{...i,...s,ref:e})});BN.displayName=vF;var bF="MenuSub",[NH,zN]=xa(bF),Ol="MenuSubTrigger",UN=v.forwardRef((n,e)=>{const t=va(Ol,n.__scopeMenu),s=gc(Ol,n.__scopeMenu),i=zN(Ol,n.__scopeMenu),a=px(Ol,n.__scopeMenu),l=v.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=a,h={__scopeMenu:n.__scopeMenu},f=v.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return v.useEffect(()=>f,[f]),v.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),d(null)}},[u,d]),r.jsx(dx,{asChild:!0,...h,children:r.jsx(EN,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":GN(t.open),...n,ref:bh(e,i.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Se(n.onPointerMove,Kl(m=>{a.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Se(n.onPointerLeave,Kl(m=>{f();const g=t.content?.getBoundingClientRect();if(g){const b=t.content?.dataset.side,S=b==="right",x=S?-5:5,w=g[S?"left":"right"],N=g[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+x,y:m.clientY},{x:w,y:g.top},{x:N,y:g.top},{x:N,y:g.bottom},{x:w,y:g.bottom}],side:b}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Se(n.onKeyDown,m=>{const g=a.searchRef.current!=="";n.disabled||g&&m.key===" "||eF[s.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});UN.displayName=Ol;var $N="MenuSubContent",qN=v.forwardRef((n,e)=>{const t=kN(ws,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=va(ws,n.__scopeMenu),l=gc(ws,n.__scopeMenu),u=zN($N,n.__scopeMenu),d=v.useRef(null),h=We(e,d);return r.jsx(Hl.Provider,{scope:n.__scopeMenu,children:r.jsx(Mn,{present:s||a.open,children:r.jsx(Hl.Slot,{scope:n.__scopeMenu,children:r.jsx(fx,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{l.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Se(n.onFocusOutside,f=>{f.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Se(n.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:Se(n.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),g=tF[l.dir].includes(f.key);m&&g&&(a.onOpenChange(!1),u.trigger?.focus(),f.preventDefault())})})})})})});qN.displayName=$N;function GN(n){return n?"open":"closed"}function Hd(n){return n==="indeterminate"}function yx(n){return Hd(n)?"indeterminate":n?"checked":"unchecked"}function wF(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function SF(n,e){return n.map((t,s)=>n[(e+s)%n.length])}function _F(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=SF(n,Math.max(a,0));i.length===1&&(l=l.filter(h=>h!==t));const d=l.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function CF(n,e){const{x:t,y:s}=n;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a],d=e[l],h=u.x,f=u.y,m=d.x,g=d.y;f>s!=g>s&&t<(m-h)*(s-f)/(g-f)+h&&(i=!i)}return i}function jF(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return CF(t,e)}function Kl(n){return e=>e.pointerType==="mouse"?n(e):void 0}var NF=NN,kF=dx,TF=TN,AF=AN,PF=mx,EF=PN,MF=Vh,RF=MN,OF=ON,IF=FN,FF=VN,DF=LN,VF=BN,LF=UN,BF=qN,Lh="DropdownMenu",[zF,kH]=En(Lh,[CN]),Bn=CN(),[UF,WN]=zF(Lh),HN=n=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:i,defaultOpen:a,onOpenChange:l,modal:u=!0}=n,d=Bn(e),h=v.useRef(null),[f,m]=mr({prop:i,defaultProp:a??!1,onChange:l,caller:Lh});return r.jsx(UF,{scope:e,triggerId:pr(),triggerRef:h,contentId:pr(),open:f,onOpenChange:m,onOpenToggle:v.useCallback(()=>m(g=>!g),[m]),modal:u,children:r.jsx(NF,{...d,open:f,onOpenChange:m,dir:s,modal:u,children:t})})};HN.displayName=Lh;var KN="DropdownMenuTrigger",QN=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...i}=n,a=WN(KN,t),l=Bn(t);return r.jsx(kF,{asChild:!0,...l,children:r.jsx(Me.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:bh(e,a.triggerRef),onPointerDown:Se(n.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:Se(n.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});QN.displayName=KN;var $F="DropdownMenuPortal",YN=n=>{const{__scopeDropdownMenu:e,...t}=n,s=Bn(e);return r.jsx(TF,{...s,...t})};YN.displayName=$F;var XN="DropdownMenuContent",ZN=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=WN(XN,t),a=Bn(t),l=v.useRef(!1);return r.jsx(AF,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:e,onCloseAutoFocus:Se(n.onCloseAutoFocus,u=>{l.current||i.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Se(n.onInteractOutside,u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZN.displayName=XN;var qF="DropdownMenuGroup",GF=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(PF,{...i,...s,ref:e})});GF.displayName=qF;var WF="DropdownMenuLabel",JN=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(EF,{...i,...s,ref:e})});JN.displayName=WF;var HF="DropdownMenuItem",e2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(MF,{...i,...s,ref:e})});e2.displayName=HF;var KF="DropdownMenuCheckboxItem",t2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(RF,{...i,...s,ref:e})});t2.displayName=KF;var QF="DropdownMenuRadioGroup",YF=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(OF,{...i,...s,ref:e})});YF.displayName=QF;var XF="DropdownMenuRadioItem",n2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(IF,{...i,...s,ref:e})});n2.displayName=XF;var ZF="DropdownMenuItemIndicator",s2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(FF,{...i,...s,ref:e})});s2.displayName=ZF;var JF="DropdownMenuSeparator",r2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(DF,{...i,...s,ref:e})});r2.displayName=JF;var eD="DropdownMenuArrow",tD=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(VF,{...i,...s,ref:e})});tD.displayName=eD;var nD="DropdownMenuSubTrigger",i2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(LF,{...i,...s,ref:e})});i2.displayName=nD;var sD="DropdownMenuSubContent",a2=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Bn(t);return r.jsx(BF,{...i,...s,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a2.displayName=sD;var rD=HN,iD=QN,aD=YN,o2=ZN,l2=JN,c2=e2,u2=t2,d2=n2,h2=s2,p2=r2,f2=i2,m2=a2;const oD=rD,lD=iD,cD=v.forwardRef(({className:n,inset:e,children:t,...s},i)=>r.jsxs(f2,{ref:i,className:Ve("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...s,children:[t,r.jsx(J5,{className:"ml-auto"})]}));cD.displayName=f2.displayName;const uD=v.forwardRef(({className:n,...e},t)=>r.jsx(m2,{ref:t,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));uD.displayName=m2.displayName;const g2=v.forwardRef(({className:n,sideOffset:e=4,...t},s)=>r.jsx(aD,{children:r.jsx(o2,{ref:s,sideOffset:e,className:Ve("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));g2.displayName=o2.displayName;const Pd=v.forwardRef(({className:n,inset:e,...t},s)=>r.jsx(c2,{ref:s,className:Ve("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));Pd.displayName=c2.displayName;const dD=v.forwardRef(({className:n,children:e,checked:t,...s},i)=>r.jsxs(u2,{ref:i,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(h2,{children:r.jsx($y,{className:"h-4 w-4"})})}),e]}));dD.displayName=u2.displayName;const hD=v.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(d2,{ref:s,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(h2,{children:r.jsx(rO,{className:"h-2 w-2 fill-current"})})}),e]}));hD.displayName=d2.displayName;const pD=v.forwardRef(({className:n,inset:e,...t},s)=>r.jsx(l2,{ref:s,className:Ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));pD.displayName=l2.displayName;const y2=v.forwardRef(({className:n,...e},t)=>r.jsx(p2,{ref:t,className:Ve("-mx-1 my-1 h-px bg-muted",n),...e}));y2.displayName=p2.displayName;function fD(){return r.jsx("nav",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx(Vr,{href:"/",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-purple-600 to-blue-600"}),r.jsx("span",{className:"text-xl font-bold",children:"CodedSwitch"})]})})}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(oD,{children:[r.jsx(lD,{asChild:!0,children:r.jsx(ne,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:r.jsx(iN,{className:"h-8 w-8",children:r.jsx(aN,{children:"CS"})})})}),r.jsxs(g2,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(Pd,{asChild:!0,children:r.jsxs(Vr,{href:"/billing",className:"flex items-center",children:[r.jsx(ij,{className:"mr-2 h-4 w-4"}),"Billing"]})}),r.jsx(Pd,{asChild:!0,children:r.jsxs(Vr,{href:"/settings",className:"flex items-center",children:[r.jsx(jh,{className:"mr-2 h-4 w-4"}),"Settings"]})}),r.jsx(y2,{}),r.jsxs(Pd,{children:[r.jsx(uO,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})})}const mD=[{name:"Dashboard",href:"/dashboard",icon:Uy},{name:"Music Studio",href:"/music-studio",icon:hO},{name:"Mix Studio",href:"/mix-studio",icon:po},{name:"Pro Console",href:"/pro-console",icon:Ky},{name:"MIDI Controller",href:"/midi-controller",icon:cO},{name:"Song Uploader",href:"/song-uploader",icon:_i},{name:"Beat Maker",href:"/beat-studio",icon:qy},{name:"Melody Composer",href:"/melody-composer",icon:Mt},{name:"Code Translator",href:"/code-translator",icon:oo},{name:"Code to Music",href:"/codebeat-studio",icon:en},{name:"Lyric Lab",href:"/lyric-lab",icon:jd},{name:"Vulnerability Scanner",href:"/vulnerability-scanner",icon:lj},{name:"AI Assistant",href:"/ai-assistant",icon:Wy},{name:"Pack Generator",href:"/pack-generator",icon:Bl},{name:"Advanced Sequencer",href:"/advanced-sequencer",icon:po},{name:"Granular Engine",href:"/granular-engine",icon:Kn},{name:"Wavetable Synth",href:"/wavetable-oscillator",icon:zd},{name:"Song Structure",href:"/song-structure",icon:Gy},{name:"Pro Audio",href:"/pro-audio",icon:bO}],gD=[{name:"Billing",href:"/billing",icon:ij},{name:"Settings",href:"/settings",icon:jh}];function yD(){const[n]=vh();return r.jsxs("div",{className:"flex h-screen w-64 flex-col bg-background border-r",children:[r.jsx("div",{className:"flex-1 space-y-1 px-3 py-4",children:mD.map(e=>{const t=n===e.href;return r.jsx(Vr,{href:e.href,children:r.jsxs("div",{className:Ve("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[r.jsx(e.icon,{className:Ve("mr-3 h-4 w-4 flex-shrink-0",t?"text-primary-foreground":"text-muted-foreground")}),e.name]})},e.name)})}),r.jsx("div",{className:"border-t px-3 py-4 space-y-1",children:gD.map(e=>{const t=n===e.href;return r.jsx(Vr,{href:e.href,children:r.jsxs("div",{className:Ve("group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[r.jsx(e.icon,{className:Ve("mr-3 h-4 w-4 flex-shrink-0",t?"text-primary-foreground":"text-muted-foreground")}),e.name]})},e.name)})})]})}const ge=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ge.displayName="Card";const Ee=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("flex flex-col space-y-1.5 p-6",n),...e}));Ee.displayName="CardHeader";const Ae=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ae.displayName="CardTitle";const rn=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("text-sm text-muted-foreground",n),...e}));rn.displayName="CardDescription";const je=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("p-6 pt-0",n),...e}));je.displayName="CardContent";const xD=v.forwardRef(({className:n,...e},t)=>r.jsx("div",{ref:t,className:Ve("flex items-center p-6 pt-0",n),...e}));xD.displayName="CardFooter";function vD(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(ge,{className:"w-full max-w-md mx-4",children:r.jsxs(je,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(tO,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function x2(){const n=[{icon:oo,title:"Code Translation",description:"Translate code between 14+ programming languages with AI assistance"},{icon:Mt,title:"Professional Music Studio",description:"Create music with multi-instrument orchestral compositions and MIDI support"},{icon:_i,title:"Song Analysis",description:"Upload songs for AI-powered analysis and intelligent music insights"},{icon:qy,title:"Beat Studio",description:"Professional drum synthesis with real-time pattern editing"},{icon:en,title:"Code to Music",description:"Revolutionary bidirectional translation between code and musical compositions"},{icon:lj,title:"Security Scanner",description:"AI-powered code vulnerability detection and security analysis"},{icon:Wy,title:"AI Assistant",description:"24/7 intelligent help with multiple AI providers (Grok, Gemini, OpenAI)"}];return r.jsx("div",{className:"min-h-screen min-w-[1400px] bg-gradient-to-br from-background to-secondary/20",children:r.jsxs("div",{className:"container mx-auto px-4 py-16 w-full",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"h-16 w-16 mx-auto mb-8 rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center",children:r.jsx(Mt,{className:"h-8 w-8 text-white"})}),r.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"CodedSwitch"}),r.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"The world's first AI-powered bidirectional translation platform that bridges code development with music creation"}),r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsx(Vr,{href:"/dashboard",children:r.jsx(ne,{size:"lg",className:"text-lg px-8",children:"Get Started"})}),r.jsx(Vr,{href:"/music-studio",children:r.jsx(ne,{variant:"outline",size:"lg",className:"text-lg px-8",children:"Try Music Studio"})})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:n.map((e,t)=>r.jsxs(ge,{className:"transition-transform hover:scale-105",children:[r.jsxs(Ee,{children:[r.jsx(e.icon,{className:"h-8 w-8 text-primary mb-2"}),r.jsx(Ae,{children:e.title})]}),r.jsx(je,{children:r.jsx(rn,{children:e.description})})]},t))}),r.jsxs("div",{className:"text-center bg-card rounded-2xl p-12 border",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Workflow?"}),r.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Experience the future of creative development with AI-powered tools that bridge the gap between code and music."}),r.jsx(Vr,{href:"/dashboard",children:r.jsx(ne,{size:"lg",className:"text-lg px-8",children:"Start Creating Now"})})]})]})})}function bD(){const n=[{title:"Music Studio",description:"Professional multi-instrument composition",icon:Mt,href:"/music-studio",color:"bg-purple-500"},{title:"Song Uploader",description:"Upload and analyze audio files",icon:_i,href:"/song-uploader",color:"bg-blue-500"},{title:"Code Translator",description:"Translate between programming languages",icon:oo,href:"/code-translator",color:"bg-green-500"},{title:"Beat Maker",description:"Create professional drum patterns",icon:qy,href:"/beat-studio",color:"bg-orange-500"},{title:"Code to Music",description:"Transform code into musical compositions",icon:en,href:"/codebeat-studio",color:"bg-yellow-500"},{title:"AI Assistant",description:"Get help with coding and music",icon:Wy,href:"/ai-assistant",color:"bg-pink-500"},{title:"Advanced Sequencer",description:"Professional multi-layered beat production",icon:po,href:"/advanced-sequencer",color:"bg-orange-500"},{title:"Granular Engine",description:"Advanced texture manipulation & synthesis",icon:Kn,href:"/granular-engine",color:"bg-purple-500"},{title:"Pack Generator",description:"AI-powered sample pack creation from prompts",icon:Mt,href:"/pack-generator",color:"bg-emerald-500"}];return r.jsx("div",{className:"p-6 space-y-6 min-w-[1400px]",children:r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Welcome to your creative workspace"})]}),r.jsx(Uy,{className:"h-8 w-8 text-muted-foreground"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ge,{children:[r.jsxs(Ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ae,{className:"text-sm font-medium",children:"Projects Created"}),r.jsx(Mt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"12"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last week"})]})]}),r.jsxs(ge,{children:[r.jsxs(Ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ae,{className:"text-sm font-medium",children:"Code Translations"}),r.jsx(oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"48"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+12 from last week"})]})]}),r.jsxs(ge,{children:[r.jsxs(Ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ae,{className:"text-sm font-medium",children:"Songs Analyzed"}),r.jsx(_i,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"24"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+8 from last week"})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,t)=>r.jsx(Vr,{href:e.href,children:r.jsxs(ge,{className:"transition-transform hover:scale-105 cursor-pointer h-full",children:[r.jsx(Ee,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:r.jsx(e.icon,{className:"h-4 w-4 text-white"})}),r.jsx(Ae,{className:"text-lg",children:e.title})]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsx(rn,{children:e.description}),r.jsx(ne,{className:"w-full",children:"Open"})]})]})},t))})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Recent Activity"})}),r.jsx(je,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Mt,{className:"h-4 w-4 text-purple-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:'Created "Electronic Symphony"'}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(oo,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Translated Python to JavaScript"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"4 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(_i,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:'Analyzed "Summer Vibes.mp3"'}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"1 day ago"})]})]})]})})]})]})})}const wD=_h("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pe({className:n,variant:e,...t}){return r.jsx("div",{className:Ve(wD({variant:e}),n),...t})}function SD(){const[,n]=vh(),{data:e,isLoading:t}=Ti({queryKey:["/api/subscription-status"],queryFn:()=>ot("GET","/api/subscription-status").then(i=>i.json()),refetchInterval:3e4}),s=()=>{n("/subscribe")};if(t)return r.jsxs(ne,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-subscription-loading",children:[r.jsx(ca,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]});if(e?.hasActiveSubscription){const i=e.tier==="basic"?"Basic":"Pro",a=e.tier==="basic"?"bg-gradient-to-r from-blue-600 to-cyan-600":"bg-gradient-to-r from-purple-600 to-blue-600";return r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(Pe,{variant:"secondary",className:`${a} text-white`,"data-testid":"badge-subscription-active",children:[r.jsx(iO,{className:"h-3 w-3 mr-1"}),"CodedSwitch ",i]})})}return r.jsxs(ne,{onClick:s,size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700","data-testid":"button-upgrade-pro",children:[r.jsx(en,{className:"h-4 w-4 mr-2"}),"Choose Plan"]})}function _D(){return r.jsxs("div",{className:"bg-studio-panel border-b border-gray-700 px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 relative",children:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("defs",{children:r.jsx("style",{children:`
                    .draw-line {
                      stroke-dasharray: 200;
                      stroke-dashoffset: 200;
                      animation: draw 3s ease-in-out forwards;
                    }
                    .draw-circle {
                      stroke-dasharray: 60;
                      stroke-dashoffset: 60;
                      animation: draw-circle 2s ease-in-out forwards;
                    }
                    .draw-eye {
                      stroke-dasharray: 100;
                      stroke-dashoffset: 100;
                      animation: draw-eye 2.5s ease-in-out forwards;
                    }
                    @keyframes draw {
                      to { stroke-dashoffset: 0; }
                    }
                    @keyframes draw-circle {
                      to { stroke-dashoffset: 0; }
                    }
                    @keyframes draw-eye {
                      to { stroke-dashoffset: 0; }
                    }
                    .fade-in {
                      opacity: 0;
                      animation: fadeIn 1s ease-in-out 2s forwards;
                    }
                    @keyframes fadeIn {
                      to { opacity: 1; }
                    }
                  `})}),r.jsx("path",{d:"M15 25 L15 15 L25 15",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0s"}}),r.jsx("path",{d:"M75 15 L85 15 L85 25",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.2s"}}),r.jsx("path",{d:"M85 75 L85 85 L75 85",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.4s"}}),r.jsx("path",{d:"M25 85 L15 85 L15 75",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",className:"draw-line",style:{animationDelay:"0.6s"}}),r.jsx("line",{x1:"25",y1:"15",x2:"40",y2:"30",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"0.8s"}}),r.jsx("line",{x1:"75",y1:"15",x2:"60",y2:"30",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1s"}}),r.jsx("line",{x1:"85",y1:"75",x2:"70",y2:"60",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1.2s"}}),r.jsx("line",{x1:"15",y1:"75",x2:"30",y2:"60",stroke:"#60a5fa",strokeWidth:"1.5",className:"draw-line",style:{animationDelay:"1.4s"}}),r.jsx("ellipse",{cx:"50",cy:"50",rx:"20",ry:"12",fill:"none",stroke:"#3b82f6",strokeWidth:"2",className:"draw-eye",style:{animationDelay:"1.6s"}}),r.jsx("circle",{cx:"50",cy:"50",r:"6",fill:"none",stroke:"#60a5fa",strokeWidth:"2",className:"draw-circle",style:{animationDelay:"2s"}}),r.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#3b82f6",className:"fade-in"}),r.jsx("circle",{cx:"20",cy:"20",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.2s"}}),r.jsx("circle",{cx:"80",cy:"20",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.4s"}}),r.jsx("circle",{cx:"80",cy:"80",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.6s"}}),r.jsx("circle",{cx:"20",cy:"80",r:"8",fill:"none",stroke:"#3b82f6",strokeWidth:"1.5",className:"draw-circle",style:{animationDelay:"2.8s"}}),r.jsx("circle",{cx:"20",cy:"20",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.2s"}}),r.jsx("circle",{cx:"80",cy:"20",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.4s"}}),r.jsx("circle",{cx:"80",cy:"80",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.6s"}}),r.jsx("circle",{cx:"20",cy:"80",r:"3",fill:"#60a5fa",className:"fade-in",style:{animationDelay:"2.8s"}})]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-heading font-bold text-white",children:"CodedSwitch"}),r.jsx("p",{className:"text-xs text-blue-400 -mt-1 font-medium",children:"AI Godfather"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full animate-pulse"}),r.jsx("span",{children:"AI Engine Active"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(SD,{}),r.jsxs(ne,{className:"bg-studio-accent hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[r.jsx("i",{className:"fas fa-save mr-2"}),"Save Project"]}),r.jsxs(ne,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[r.jsx("i",{className:"fas fa-share mr-2"}),"Export"]}),r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold",children:"CT"})})]})]})}function Bh(n){const e=v.useRef({value:n,previous:n});return v.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var zh="Switch",[CD,TH]=En(zh),[jD,ND]=CD(zh),v2=v.forwardRef((n,e)=>{const{__scopeSwitch:t,name:s,checked:i,defaultChecked:a,required:l,disabled:u,value:d="on",onCheckedChange:h,form:f,...m}=n,[g,b]=v.useState(null),S=We(e,C=>b(C)),x=v.useRef(!1),w=g?f||!!g.closest("form"):!0,[N,E]=mr({prop:i,defaultProp:a??!1,onChange:h,caller:zh});return r.jsxs(jD,{scope:t,checked:N,disabled:u,children:[r.jsx(Me.button,{type:"button",role:"switch","aria-checked":N,"aria-required":l,"data-state":_2(N),"data-disabled":u?"":void 0,disabled:u,value:d,...m,ref:S,onClick:Se(n.onClick,C=>{E(A=>!A),w&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),w&&r.jsx(S2,{control:g,bubbles:!x.current,name:s,value:d,checked:N,required:l,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});v2.displayName=zh;var b2="SwitchThumb",w2=v.forwardRef((n,e)=>{const{__scopeSwitch:t,...s}=n,i=ND(b2,t);return r.jsx(Me.span,{"data-state":_2(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});w2.displayName=b2;var kD="SwitchBubbleInput",S2=v.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:s=!0,...i},a)=>{const l=v.useRef(null),u=We(l,a),d=Bh(t),h=Ph(e);return v.useEffect(()=>{const f=l.current;if(!f)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==t&&b){const S=new Event("click",{bubbles:s});b.call(f,t),f.dispatchEvent(S)}},[d,t,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:u,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});S2.displayName=kD;function _2(n){return n?"checked":"unchecked"}var C2=v2,TD=w2;const zs=v.forwardRef(({className:n,...e},t)=>r.jsx(C2,{className:Ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:r.jsx(TD,{className:Ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zs.displayName=C2.displayName;function Ql(n,[e,t]){return Math.min(t,Math.max(e,n))}var AD=[" ","Enter","ArrowUp","ArrowDown"],PD=[" ","Enter"],ha="Select",[Uh,$h,ED]=cc(ha),[Eo,AH]=En(ha,[ED,Ao]),qh=Ao(),[MD,Fi]=Eo(ha),[RD,OD]=Eo(ha),j2=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:a,value:l,defaultValue:u,onValueChange:d,dir:h,name:f,autoComplete:m,disabled:g,required:b,form:S}=n,x=qh(e),[w,N]=v.useState(null),[E,C]=v.useState(null),[A,P]=v.useState(!1),R=Po(h),[T,j]=mr({prop:s,defaultProp:i??!1,onChange:a,caller:ha}),[O,I]=mr({prop:l,defaultProp:u,onChange:d,caller:ha}),D=v.useRef(null),B=w?S||!!w.closest("form"):!0,[H,z]=v.useState(new Set),G=Array.from(H).map(Q=>Q.props.value).join(";");return r.jsx(zj,{...x,children:r.jsxs(MD,{required:b,scope:e,trigger:w,onTriggerChange:N,valueNode:E,onValueNodeChange:C,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:pr(),value:O,onValueChange:I,open:T,onOpenChange:j,dir:R,triggerPointerDownPosRef:D,disabled:g,children:[r.jsx(Uh.Provider,{scope:e,children:r.jsx(RD,{scope:n.__scopeSelect,onNativeOptionAdd:v.useCallback(Q=>{z(X=>new Set(X).add(Q))},[]),onNativeOptionRemove:v.useCallback(Q=>{z(X=>{const q=new Set(X);return q.delete(Q),q})},[]),children:t})}),B?r.jsxs(Q2,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:m,value:O,onChange:Q=>I(Q.target.value),disabled:g,form:S,children:[O===void 0?r.jsx("option",{value:""}):null,Array.from(H)]},G):null]})})};j2.displayName=ha;var N2="SelectTrigger",k2=v.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,a=qh(t),l=Fi(N2,t),u=l.disabled||s,d=We(e,l.onTriggerChange),h=$h(t),f=v.useRef("touch"),[m,g,b]=X2(x=>{const w=h().filter(C=>!C.disabled),N=w.find(C=>C.value===l.value),E=Z2(w,x,N);E!==void 0&&l.onValueChange(E.value)}),S=x=>{u||(l.onOpenChange(!0),b()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(rx,{asChild:!0,...a,children:r.jsx(Me.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":Y2(l.value)?"":void 0,...i,ref:d,onClick:Se(i.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:Se(i.onPointerDown,x=>{f.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:Se(i.onKeyDown,x=>{const w=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(w&&x.key===" ")&&AD.includes(x.key)&&(S(),x.preventDefault())})})})});k2.displayName=N2;var T2="SelectValue",A2=v.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:a,placeholder:l="",...u}=n,d=Fi(T2,t),{onValueNodeHasChildrenChange:h}=d,f=a!==void 0,m=We(e,d.onValueNodeChange);return Ht(()=>{h(f)},[h,f]),r.jsx(Me.span,{...u,ref:m,style:{pointerEvents:"none"},children:Y2(d.value)?r.jsx(r.Fragment,{children:l}):a})});A2.displayName=T2;var ID="SelectIcon",P2=v.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return r.jsx(Me.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});P2.displayName=ID;var FD="SelectPortal",E2=n=>r.jsx(uc,{asChild:!0,...n});E2.displayName=FD;var pa="SelectContent",M2=v.forwardRef((n,e)=>{const t=Fi(pa,n.__scopeSelect),[s,i]=v.useState();if(Ht(()=>{i(new DocumentFragment)},[]),!t.open){const a=s;return a?Co.createPortal(r.jsx(R2,{scope:n.__scopeSelect,children:r.jsx(Uh.Slot,{scope:n.__scopeSelect,children:r.jsx("div",{children:n.children})})}),a):null}return r.jsx(O2,{...n,ref:e})});M2.displayName=pa;var Os=10,[R2,Di]=Eo(pa),DD="SelectContentImpl",VD=la("SelectContent.RemoveScroll"),O2=v.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:w,...N}=n,E=Fi(pa,t),[C,A]=v.useState(null),[P,R]=v.useState(null),T=We(e,F=>A(F)),[j,O]=v.useState(null),[I,D]=v.useState(null),B=$h(t),[H,z]=v.useState(!1),G=v.useRef(!1);v.useEffect(()=>{if(C)return ux(C)},[C]),cx();const Q=v.useCallback(F=>{const[L,...re]=B().map(te=>te.ref.current),[oe]=re.slice(-1),we=document.activeElement;for(const te of F)if(te===we||(te?.scrollIntoView({block:"nearest"}),te===L&&P&&(P.scrollTop=0),te===oe&&P&&(P.scrollTop=P.scrollHeight),te?.focus(),document.activeElement!==we))return},[B,P]),X=v.useCallback(()=>Q([j,C]),[Q,j,C]);v.useEffect(()=>{H&&X()},[H,X]);const{onOpenChange:q,triggerPointerDownPosRef:U}=E;v.useEffect(()=>{if(C){let F={x:0,y:0};const L=oe=>{F={x:Math.abs(Math.round(oe.pageX)-(U.current?.x??0)),y:Math.abs(Math.round(oe.pageY)-(U.current?.y??0))}},re=oe=>{F.x<=10&&F.y<=10?oe.preventDefault():C.contains(oe.target)||q(!1),document.removeEventListener("pointermove",L),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",re,{capture:!0})}}},[C,q,U]),v.useEffect(()=>{const F=()=>q(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[q]);const[Y,M]=X2(F=>{const L=B().filter(we=>!we.disabled),re=L.find(we=>we.ref.current===document.activeElement),oe=Z2(L,F,re);oe&&setTimeout(()=>oe.ref.current.focus())}),W=v.useCallback((F,L,re)=>{const oe=!G.current&&!re;(E.value!==void 0&&E.value===L||oe)&&(O(F),oe&&(G.current=!0))},[E.value]),J=v.useCallback(()=>C?.focus(),[C]),de=v.useCallback((F,L,re)=>{const oe=!G.current&&!re;(E.value!==void 0&&E.value===L||oe)&&D(F)},[E.value]),ce=s==="popper"?ey:I2,pe=ce===ey?{side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:g,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:w}:{};return r.jsx(R2,{scope:t,content:C,viewport:P,onViewportChange:R,itemRefCallback:W,selectedItem:j,onItemLeave:J,itemTextRefCallback:de,focusSelectedItem:X,selectedItemText:I,position:s,isPositioned:H,searchRef:Y,children:r.jsx(Fh,{as:VD,allowPinchZoom:!0,children:r.jsx(Rh,{asChild:!0,trapped:E.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:Se(i,F=>{E.trigger?.focus({preventScroll:!0}),F.preventDefault()}),children:r.jsx(jo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:r.jsx(ce,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:F=>F.preventDefault(),...N,...pe,onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Se(N.onKeyDown,F=>{const L=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!L&&F.key.length===1&&M(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let oe=B().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(F.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const we=F.target,te=oe.indexOf(we);oe=oe.slice(te+1)}setTimeout(()=>Q(oe)),F.preventDefault()}})})})})})})});O2.displayName=DD;var LD="SelectItemAlignedPosition",I2=v.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,a=Fi(pa,t),l=Di(pa,t),[u,d]=v.useState(null),[h,f]=v.useState(null),m=We(e,T=>f(T)),g=$h(t),b=v.useRef(!1),S=v.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:N,focusSelectedItem:E}=l,C=v.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&h&&x&&w&&N){const T=a.trigger.getBoundingClientRect(),j=h.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),I=N.getBoundingClientRect();if(a.dir!=="rtl"){const we=I.left-j.left,te=O.left-we,fe=T.left-te,ve=T.width+fe,he=Math.max(ve,j.width),Ce=window.innerWidth-Os,Le=Ql(te,[Os,Math.max(Os,Ce-he)]);u.style.minWidth=ve+"px",u.style.left=Le+"px"}else{const we=j.right-I.right,te=window.innerWidth-O.right-we,fe=window.innerWidth-T.right-te,ve=T.width+fe,he=Math.max(ve,j.width),Ce=window.innerWidth-Os,Le=Ql(te,[Os,Math.max(Os,Ce-he)]);u.style.minWidth=ve+"px",u.style.right=Le+"px"}const D=g(),B=window.innerHeight-Os*2,H=x.scrollHeight,z=window.getComputedStyle(h),G=parseInt(z.borderTopWidth,10),Q=parseInt(z.paddingTop,10),X=parseInt(z.borderBottomWidth,10),q=parseInt(z.paddingBottom,10),U=G+Q+H+q+X,Y=Math.min(w.offsetHeight*5,U),M=window.getComputedStyle(x),W=parseInt(M.paddingTop,10),J=parseInt(M.paddingBottom,10),de=T.top+T.height/2-Os,ce=B-de,pe=w.offsetHeight/2,F=w.offsetTop+pe,L=G+Q+F,re=U-L;if(L<=de){const we=D.length>0&&w===D[D.length-1].ref.current;u.style.bottom="0px";const te=h.clientHeight-x.offsetTop-x.offsetHeight,fe=Math.max(ce,pe+(we?J:0)+te+X),ve=L+fe;u.style.height=ve+"px"}else{const we=D.length>0&&w===D[0].ref.current;u.style.top="0px";const fe=Math.max(de,G+x.offsetTop+(we?W:0)+pe)+re;u.style.height=fe+"px",x.scrollTop=L-de+x.offsetTop}u.style.margin=`${Os}px 0`,u.style.minHeight=Y+"px",u.style.maxHeight=B+"px",s?.(),requestAnimationFrame(()=>b.current=!0)}},[g,a.trigger,a.valueNode,u,h,x,w,N,a.dir,s]);Ht(()=>C(),[C]);const[A,P]=v.useState();Ht(()=>{h&&P(window.getComputedStyle(h).zIndex)},[h]);const R=v.useCallback(T=>{T&&S.current===!0&&(C(),E?.(),S.current=!1)},[C,E]);return r.jsx(zD,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:R,children:r.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:r.jsx(Me.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});I2.displayName=LD;var BD="SelectPopperPosition",ey=v.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=Os,...a}=n,l=qh(t);return r.jsx(ix,{...l,...a,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ey.displayName=BD;var[zD,xx]=Eo(pa,{}),ty="SelectViewport",F2=v.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,a=Di(ty,t),l=xx(ty,t),u=We(e,a.onViewportChange),d=v.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Uh.Slot,{scope:t,children:r.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Se(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=l;if(g?.current&&m){const b=Math.abs(d.current-f.scrollTop);if(b>0){const S=window.innerHeight-Os*2,x=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),N=Math.max(x,w);if(N<S){const E=N+b,C=Math.min(S,E),A=E-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});F2.displayName=ty;var D2="SelectGroup",[UD,$D]=Eo(D2),qD=v.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=pr();return r.jsx(UD,{scope:t,id:i,children:r.jsx(Me.div,{role:"group","aria-labelledby":i,...s,ref:e})})});qD.displayName=D2;var V2="SelectLabel",L2=v.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=$D(V2,t);return r.jsx(Me.div,{id:i.id,...s,ref:e})});L2.displayName=V2;var Kd="SelectItem",[GD,B2]=Eo(Kd),z2=v.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:a,...l}=n,u=Fi(Kd,t),d=Di(Kd,t),h=u.value===s,[f,m]=v.useState(a??""),[g,b]=v.useState(!1),S=We(e,E=>d.itemRefCallback?.(E,s,i)),x=pr(),w=v.useRef("touch"),N=()=>{i||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(GD,{scope:t,value:s,disabled:i,textId:x,isSelected:h,onItemTextChange:v.useCallback(E=>{m(C=>C||(E?.textContent??"").trim())},[]),children:r.jsx(Uh.ItemSlot,{scope:t,value:s,disabled:i,textValue:f,children:r.jsx(Me.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:S,onFocus:Se(l.onFocus,()=>b(!0)),onBlur:Se(l.onBlur,()=>b(!1)),onClick:Se(l.onClick,()=>{w.current!=="mouse"&&N()}),onPointerUp:Se(l.onPointerUp,()=>{w.current==="mouse"&&N()}),onPointerDown:Se(l.onPointerDown,E=>{w.current=E.pointerType}),onPointerMove:Se(l.onPointerMove,E=>{w.current=E.pointerType,i?d.onItemLeave?.():w.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(l.onPointerLeave,E=>{E.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Se(l.onKeyDown,E=>{d.searchRef?.current!==""&&E.key===" "||(PD.includes(E.key)&&N(),E.key===" "&&E.preventDefault())})})})})});z2.displayName=Kd;var Il="SelectItemText",U2=v.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...a}=n,l=Fi(Il,t),u=Di(Il,t),d=B2(Il,t),h=OD(Il,t),[f,m]=v.useState(null),g=We(e,N=>m(N),d.onItemTextChange,N=>u.itemTextRefCallback?.(N,d.value,d.disabled)),b=f?.textContent,S=v.useMemo(()=>r.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=h;return Ht(()=>(x(S),()=>w(S)),[x,w,S]),r.jsxs(r.Fragment,{children:[r.jsx(Me.span,{id:d.textId,...a,ref:g}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Co.createPortal(a.children,l.valueNode):null]})});U2.displayName=Il;var $2="SelectItemIndicator",q2=v.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return B2($2,t).isSelected?r.jsx(Me.span,{"aria-hidden":!0,...s,ref:e}):null});q2.displayName=$2;var ny="SelectScrollUpButton",G2=v.forwardRef((n,e)=>{const t=Di(ny,n.__scopeSelect),s=xx(ny,n.__scopeSelect),[i,a]=v.useState(!1),l=We(e,s.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollTop>0;a(h)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?r.jsx(H2,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});G2.displayName=ny;var sy="SelectScrollDownButton",W2=v.forwardRef((n,e)=>{const t=Di(sy,n.__scopeSelect),s=xx(sy,n.__scopeSelect),[i,a]=v.useState(!1),l=We(e,s.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;a(f)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),i?r.jsx(H2,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});W2.displayName=sy;var H2=v.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,a=Di("SelectScrollButton",t),l=v.useRef(null),u=$h(t),d=v.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return v.useEffect(()=>()=>d(),[d]),Ht(()=>{u().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),r.jsx(Me.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Se(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Se(i.onPointerMove,()=>{a.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Se(i.onPointerLeave,()=>{d()})})}),WD="SelectSeparator",K2=v.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return r.jsx(Me.div,{"aria-hidden":!0,...s,ref:e})});K2.displayName=WD;var ry="SelectArrow",HD=v.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=qh(t),a=Fi(ry,t),l=Di(ry,t);return a.open&&l.position==="popper"?r.jsx(ax,{...i,...s,ref:e}):null});HD.displayName=ry;var KD="SelectBubbleInput",Q2=v.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const i=v.useRef(null),a=We(s,i),l=Bh(e);return v.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&f){const m=new Event("change",{bubbles:!0});f.call(u,e),u.dispatchEvent(m)}},[l,e]),r.jsx(Me.select,{...t,style:{...OC,...t.style},ref:a,defaultValue:e})});Q2.displayName=KD;function Y2(n){return n===""||n===void 0}function X2(n){const e=Ut(n),t=v.useRef(""),s=v.useRef(0),i=v.useCallback(l=>{const u=t.current+l;e(u),(function d(h){t.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))})(u)},[e]),a=v.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,a]}function Z2(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=QD(n,Math.max(a,0));i.length===1&&(l=l.filter(h=>h!==t));const d=l.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function QD(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var YD=j2,J2=k2,XD=A2,ZD=P2,JD=E2,ek=M2,e6=F2,tk=L2,nk=z2,t6=U2,n6=q2,sk=G2,rk=W2,ik=K2;const Ye=YD,Xe=XD,He=v.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(J2,{ref:s,className:Ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,r.jsx(ZD,{asChild:!0,children:r.jsx(sj,{className:"h-4 w-4 opacity-50"})})]}));He.displayName=J2.displayName;const ak=v.forwardRef(({className:n,...e},t)=>r.jsx(sk,{ref:t,className:Ve("flex cursor-default items-center justify-center py-1",n),...e,children:r.jsx(eO,{className:"h-4 w-4"})}));ak.displayName=sk.displayName;const ok=v.forwardRef(({className:n,...e},t)=>r.jsx(rk,{ref:t,className:Ve("flex cursor-default items-center justify-center py-1",n),...e,children:r.jsx(sj,{className:"h-4 w-4"})}));ok.displayName=rk.displayName;const Ke=v.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>r.jsx(JD,{children:r.jsxs(ek,{ref:i,className:Ve("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[r.jsx(ak,{}),r.jsx(e6,{className:Ve("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),r.jsx(ok,{})]})}));Ke.displayName=ek.displayName;const s6=v.forwardRef(({className:n,...e},t)=>r.jsx(tk,{ref:t,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));s6.displayName=tk.displayName;const le=v.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(nk,{ref:s,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n6,{children:r.jsx($y,{className:"h-4 w-4"})})}),r.jsx(t6,{children:e})]}));le.displayName=nk.displayName;const r6=v.forwardRef(({className:n,...e},t)=>r.jsx(ik,{ref:t,className:Ve("-mx-1 my-1 h-px bg-muted",n),...e}));r6.displayName=ik.displayName;var Gh="Dialog",[lk,PH]=En(Gh),[i6,Zs]=lk(Gh),ck=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=n,u=v.useRef(null),d=v.useRef(null),[h,f]=mr({prop:s,defaultProp:i??!1,onChange:a,caller:Gh});return r.jsx(i6,{scope:e,triggerRef:u,contentRef:d,contentId:pr(),titleId:pr(),descriptionId:pr(),open:h,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(m=>!m),[f]),modal:l,children:t})};ck.displayName=Gh;var uk="DialogTrigger",dk=v.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Zs(uk,t),a=We(e,i.triggerRef);return r.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":wx(i.open),...s,ref:a,onClick:Se(n.onClick,i.onOpenToggle)})});dk.displayName=uk;var vx="DialogPortal",[a6,hk]=lk(vx,{forceMount:void 0}),pk=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:i}=n,a=Zs(vx,e);return r.jsx(a6,{scope:e,forceMount:t,children:v.Children.map(s,l=>r.jsx(Mn,{present:t||a.open,children:r.jsx(uc,{asChild:!0,container:i,children:l})}))})};pk.displayName=vx;var Qd="DialogOverlay",fk=v.forwardRef((n,e)=>{const t=hk(Qd,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=Zs(Qd,n.__scopeDialog);return a.modal?r.jsx(Mn,{present:s||a.open,children:r.jsx(l6,{...i,ref:e})}):null});fk.displayName=Qd;var o6=la("DialogOverlay.RemoveScroll"),l6=v.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Zs(Qd,t);return r.jsx(Fh,{as:o6,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(Me.div,{"data-state":wx(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),fa="DialogContent",mk=v.forwardRef((n,e)=>{const t=hk(fa,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=Zs(fa,n.__scopeDialog);return r.jsx(Mn,{present:s||a.open,children:a.modal?r.jsx(c6,{...i,ref:e}):r.jsx(u6,{...i,ref:e})})});mk.displayName=fa;var c6=v.forwardRef((n,e)=>{const t=Zs(fa,n.__scopeDialog),s=v.useRef(null),i=We(e,t.contentRef,s);return v.useEffect(()=>{const a=s.current;if(a)return ux(a)},[]),r.jsx(gk,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(n.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Se(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&a.preventDefault()}),onFocusOutside:Se(n.onFocusOutside,a=>a.preventDefault())})}),u6=v.forwardRef((n,e)=>{const t=Zs(fa,n.__scopeDialog),s=v.useRef(!1),i=v.useRef(!1);return r.jsx(gk,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||t.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{n.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;t.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),gk=v.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=n,u=Zs(fa,t),d=v.useRef(null),h=We(e,d);return cx(),r.jsxs(r.Fragment,{children:[r.jsx(Rh,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(jo,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":wx(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(d6,{titleId:u.titleId}),r.jsx(p6,{contentRef:d,descriptionId:u.descriptionId})]})]})}),bx="DialogTitle",yk=v.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Zs(bx,t);return r.jsx(Me.h2,{id:i.titleId,...s,ref:e})});yk.displayName=bx;var xk="DialogDescription",vk=v.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Zs(xk,t);return r.jsx(Me.p,{id:i.descriptionId,...s,ref:e})});vk.displayName=xk;var bk="DialogClose",wk=v.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Zs(bk,t);return r.jsx(Me.button,{type:"button",...s,ref:e,onClick:Se(n.onClick,()=>i.onOpenChange(!1))})});wk.displayName=bk;function wx(n){return n?"open":"closed"}var Sk="DialogTitleWarning",[EH,_k]=r5(Sk,{contentName:fa,titleName:bx,docsSlug:"dialog"}),d6=({titleId:n})=>{const e=_k(Sk),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},h6="DialogDescriptionWarning",p6=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_k(h6).contentName}}.`;return v.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},f6=ck,m6=dk,g6=pk,Ck=fk,jk=mk,Nk=yk,kk=vk,y6=wk;const Sx=f6,_x=m6,x6=g6,Tk=v.forwardRef(({className:n,...e},t)=>r.jsx(Ck,{ref:t,className:Ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Tk.displayName=Ck.displayName;const Wh=v.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(x6,{children:[r.jsx(Tk,{}),r.jsxs(jk,{ref:s,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,r.jsxs(y6,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(cj,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wh.displayName=jk.displayName;const Hh=({className:n,...e})=>r.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Hh.displayName="DialogHeader";const Kh=v.forwardRef(({className:n,...e},t)=>r.jsx(Nk,{ref:t,className:Ve("text-lg font-semibold leading-none tracking-tight",n),...e}));Kh.displayName=Nk.displayName;const v6=v.forwardRef(({className:n,...e},t)=>r.jsx(kk,{ref:t,className:Ve("text-sm text-muted-foreground",n),...e}));v6.displayName=kk.displayName;const vt=v.forwardRef(({className:n,type:e,...t},s)=>r.jsx("input",{type:e,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));vt.displayName="Input";const Ak="15.1.22",N1=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),k1=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),iy=(n,e)=>({startTime:e,type:"setValue",value:n}),Pk=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Ek=(n,e,{startTime:t,target:s,timeConstant:i})=>s+(e-s)*Math.exp((t-n)/i),so=n=>n.type==="exponentialRampToValue",Yd=n=>n.type==="linearRampToValue",vi=n=>so(n)||Yd(n),Cx=n=>n.type==="setValue",Fr=n=>n.type==="setValueCurve",Xd=(n,e,t,s)=>{const i=n[e];return i===void 0?s:vi(i)||Cx(i)?i.value:Fr(i)?i.values[i.values.length-1]:Ek(t,Xd(n,e-1,i.startTime,s),i)},T1=(n,e,t,s,i)=>t===void 0?[s.insertTime,i]:vi(t)?[t.endTime,t.value]:Cx(t)?[t.startTime,t.value]:Fr(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Xd(n,e-1,t.startTime,i)],ay=n=>n.type==="cancelAndHold",oy=n=>n.type==="cancelScheduledValues",yi=n=>ay(n)||oy(n)?n.cancelTime:so(n)||Yd(n)?n.endTime:n.startTime,A1=(n,e,t,{endTime:s,value:i})=>t===i?i:0<t&&0<i||t<0&&i<0?t*(i/t)**((n-e)/(s-e)):0,P1=(n,e,t,{endTime:s,value:i})=>t+(n-e)/(s-e)*(i-t),b6=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},w6=(n,{duration:e,startTime:t,values:s})=>{const i=(n-t)/e*(s.length-1);return b6(s,i)},sd=n=>n.type==="setTarget";class S6{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=yi(e);if(ay(e)||oy(e)){const s=this._automationEvents.findIndex(a=>oy(e)&&Fr(a)?a.startTime+a.duration>=t:yi(a)>=t),i=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),ay(e)){const a=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&vi(i)){if(a!==void 0&&sd(a))throw new Error("The internal list is malformed.");const l=a===void 0?i.insertTime:Fr(a)?a.startTime+a.duration:yi(a),u=a===void 0?this._defaultValue:Fr(a)?a.values[a.values.length-1]:a.value,d=so(i)?A1(t,l,u,i):P1(t,l,u,i),h=so(i)?N1(d,t,this._currenTime):k1(d,t,this._currenTime);this._automationEvents.push(h)}if(a!==void 0&&sd(a)&&this._automationEvents.push(iy(this.getValue(t),t)),a!==void 0&&Fr(a)&&a.startTime+a.duration>t){const l=t-a.startTime,u=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(l*u)),h=l/(d-1)*u,f=a.values.slice(0,d);if(h<1)for(let m=1;m<d;m+=1){const g=h*m%1;f[m]=a.values[m-1]*(1-g)+a.values[m]*g}this._automationEvents[this._automationEvents.length-1]=Pk(f,a.startTime,l)}}}else{const s=this._automationEvents.findIndex(l=>yi(l)>t),i=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(i!==void 0&&Fr(i)&&yi(i)+i.duration>t)return!1;const a=so(e)?N1(e.value,e.endTime,this._currenTime):Yd(e)?k1(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(a);else{if(Fr(e)&&t+e.duration>yi(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>yi(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),i=s[0];sd(i)&&s.unshift(iy(Xd(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(l=>yi(l)>e),s=this._automationEvents[t],i=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[i];if(a!==void 0&&sd(a)&&(s===void 0||!vi(s)||s.insertTime>e))return Ek(e,Xd(this._automationEvents,i-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Cx(a)&&(s===void 0||!vi(s)))return a.value;if(a!==void 0&&Fr(a)&&(s===void 0||!vi(s)||a.startTime+a.duration>e))return e<a.startTime+a.duration?w6(e,a):a.values[a.values.length-1];if(a!==void 0&&vi(a)&&(s===void 0||!vi(s)))return a.value;if(s!==void 0&&so(s)){const[l,u]=T1(this._automationEvents,i,a,s,this._defaultValue);return A1(e,l,u,s)}if(s!==void 0&&Yd(s)){const[l,u]=T1(this._automationEvents,i,a,s,this._defaultValue);return P1(e,l,u,s)}return this._defaultValue}}const _6=n=>({cancelTime:n,type:"cancelAndHold"}),C6=n=>({cancelTime:n,type:"cancelScheduledValues"}),j6=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),N6=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),k6=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),T6=()=>new DOMException("","AbortError"),A6=n=>(e,t,[s,i,a],l)=>{n(e[i],[t,s,a],u=>u[0]===t&&u[1]===s,l)},P6=n=>(e,t,s)=>{const i=[];for(let a=0;a<s.numberOfInputs;a+=1)i.push(new Set);n.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},E6=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},go=new WeakSet,Mk=new WeakMap,jx=new WeakMap,Rk=new WeakMap,Nx=new WeakMap,Qh=new WeakMap,Ok=new WeakMap,ly=new WeakMap,cy=new WeakMap,uy=new WeakMap,Ik={construct(){return Ik}},M6=n=>{try{const e=new Proxy(n,Ik);new e}catch{return!1}return!0},E1=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,M1=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),i=s.match(E1);for(;i!==null;){const a=i[1].slice(1,-1),l=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(l),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(E1)}return[t.join(";"),s]},R1=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},O1=n=>{if(!M6(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},R6=(n,e,t,s,i,a,l,u,d,h,f,m,g)=>{let b=0;return(S,x,w={credentials:"omit"})=>{const N=f.get(S);if(N!==void 0&&N.has(x))return Promise.resolve();const E=h.get(S);if(E!==void 0){const P=E.get(x);if(P!==void 0)return P}const C=a(S),A=C.audioWorklet===void 0?i(x).then(([P,R])=>{const[T,j]=M1(P,R),O=`${T};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${j}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const P=g._AWGS.pop();if(P===void 0)throw new SyntaxError;s(C.currentTime,C.sampleRate,()=>P(class{},void 0,(R,T)=>{if(R.trim()==="")throw e();const j=cy.get(C);if(j!==void 0){if(j.has(R))throw e();O1(T),R1(T.parameterDescriptors),j.set(R,T)}else O1(T),R1(T.parameterDescriptors),cy.set(C,new Map([[R,T]]))},C.sampleRate,void 0,void 0))}):Promise.all([i(x),Promise.resolve(n(m,m))]).then(([[P,R],T])=>{const j=b+1;b=j;const[O,I]=M1(P,R),z=`${O};((AudioWorkletProcessor,registerProcessor)=>{${I}
})(${T?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${T?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${T?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${j}',class extends AudioWorkletProcessor{process(){return !1}})`,G=new Blob([z],{type:"application/javascript; charset=utf-8"}),Q=URL.createObjectURL(G);return C.audioWorklet.addModule(Q,w).then(()=>{if(u(C))return C;const X=l(C);return X.audioWorklet.addModule(Q,w).then(()=>X)}).then(X=>{if(d===null)throw new SyntaxError;try{new d(X,`__sac${j}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Q))});return E===void 0?h.set(S,new Map([[x,A]])):E.set(x,A),A.then(()=>{const P=f.get(S);P===void 0?f.set(S,new Set([x])):P.add(x)}).finally(()=>{const P=h.get(S);P!==void 0&&P.delete(x)}),A}},Hs=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Yh=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Fk=(n,e,t,s)=>{const i=Hs(n,e),a=Yh(i,l=>l[0]===t&&l[1]===s);return i.size===0&&n.delete(e),a},yc=n=>Hs(Ok,n),yo=n=>{if(go.has(n))throw new Error("The AudioNode is already stored.");go.add(n),yc(n).forEach(e=>e(!0))},Dk=n=>"port"in n,xc=n=>{if(!go.has(n))throw new Error("The AudioNode is not stored.");go.delete(n),yc(n).forEach(e=>e(!1))},dy=(n,e)=>{!Dk(n)&&e.every(t=>t.size===0)&&xc(n)},O6=(n,e,t,s,i,a,l,u,d,h,f,m,g)=>{const b=new WeakMap;return(S,x,w,N,E)=>{const{activeInputs:C,passiveInputs:A}=a(x),{outputs:P}=a(S),R=u(S),T=j=>{const O=d(x),I=d(S);if(j){const D=Fk(A,S,w,N);n(C,S,D,!1),!E&&!m(S)&&t(I,O,w,N),g(x)&&yo(x)}else{const D=s(C,S,w,N);e(A,N,D,!1),!E&&!m(S)&&i(I,O,w,N);const B=l(x);if(B===0)f(x)&&dy(x,C);else{const H=b.get(x);H!==void 0&&clearTimeout(H),b.set(x,setTimeout(()=>{f(x)&&dy(x,C)},B*1e3))}}};return h(P,[x,w,N],j=>j[0]===x&&j[1]===w&&j[2]===N,!0)?(R.add(T),f(S)?n(C,S,[w,N,T],!0):e(A,N,[S,w,T],!0),!0):!1}},I6=n=>(e,t,[s,i,a],l)=>{const u=e.get(s);u===void 0?e.set(s,new Set([[i,t,a]])):n(u,[i,t,a],d=>d[0]===i&&d[1]===t,l)},F6=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const i=()=>{t.removeEventListener("ended",i),t.disconnect(s),s.disconnect()};t.addEventListener("ended",i)},D6=n=>(e,t)=>{n(e).add(t)},V6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},L6=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),f={...V6,...d},m=s(h,f),g=a(h)?e():null;super(u,!1,m,g),this._nativeAnalyserNode=m}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(u){this._nativeAnalyserNode.fftSize=u}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(u){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=u,!(u>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(u){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=u,!(this._nativeAnalyserNode.maxDecibels>u))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(u){this._nativeAnalyserNode.smoothingTimeConstant=u}getByteFrequencyData(u){this._nativeAnalyserNode.getByteFrequencyData(u)}getByteTimeDomainData(u){this._nativeAnalyserNode.getByteTimeDomainData(u)}getFloatFrequencyData(u){this._nativeAnalyserNode.getFloatFrequencyData(u)}getFloatTimeDomainData(u){this._nativeAnalyserNode.getFloatTimeDomainData(u)}},Rn=(n,e)=>n.context===e,B6=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,l)=>{let u=e(a);if(!Rn(u,l)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,fftSize:u.fftSize,maxDecibels:u.maxDecibels,minDecibels:u.minDecibels,smoothingTimeConstant:u.smoothingTimeConstant};u=n(l,h)}return s.set(l,u),await t(a,l,u),u};return{render(a,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):i(a,l)}}},Zd=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},wr=()=>new DOMException("","IndexSizeError"),kx=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?wr():s}})(n.getChannelData)},z6={numberOfChannels:1},U6=(n,e,t,s,i,a,l,u)=>{let d=null;return class Vk{constructor(f){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:m,numberOfChannels:g,sampleRate:b}={...z6,...f};d===null&&(d=new i(1,1,44100));const S=s!==null&&e(a,a)?new s({length:m,numberOfChannels:g,sampleRate:b}):d.createBuffer(g,m,b);if(S.numberOfChannels===0)throw t();return typeof S.copyFromChannel!="function"?(l(S),kx(S)):e(Zd,()=>Zd(S))||u(S),n.add(S),S}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===Vk.prototype||n.has(f)}}},Qn=-34028234663852886e22,Vn=-Qn,Lr=n=>go.has(n),$6={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},q6=(n,e,t,s,i,a,l,u)=>class extends n{constructor(h,f){const m=a(h),g={...$6,...f},b=i(m,g),S=l(m),x=S?e():null;super(h,!1,b,x),this._audioBufferSourceNodeRenderer=x,this._isBufferNullified=!1,this._isBufferSet=g.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,S,b.playbackRate,Vn,Qn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeAudioBufferSourceNode.onended=f;const m=this._nativeAudioBufferSourceNode.onended;this._onended=m!==null&&m===f?h:m}get playbackRate(){return this._playbackRate}start(h=0,f=0,m){if(this._nativeAudioBufferSourceNode.start(h,f,m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=m===void 0?[h,f]:[h,f,m]),this.context.state!=="closed"){yo(this);const g=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",g),Lr(this)&&xc(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",g)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},G6=(n,e,t,s,i)=>()=>{const a=new WeakMap;let l=null,u=null;const d=async(h,f)=>{let m=t(h);const g=Rn(m,f);if(!g){const b={buffer:m.buffer,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,loop:m.loop,loopEnd:m.loopEnd,loopStart:m.loopStart,playbackRate:m.playbackRate.value};m=e(f,b),l!==null&&m.start(...l),u!==null&&m.stop(u)}return a.set(f,m),g?await n(f,h.playbackRate,m.playbackRate):await s(f,h.playbackRate,m.playbackRate),await i(h,f,m),m};return{set start(h){l=h},set stop(h){u=h},render(h,f){const m=a.get(f);return m!==void 0?Promise.resolve(m):d(h,f)}}},W6=n=>"playbackRate"in n,H6=n=>"frequency"in n&&"gain"in n,K6=n=>"offset"in n,Q6=n=>!("frequency"in n)&&"gain"in n,Y6=n=>"detune"in n&&"frequency"in n&&!("gain"in n),X6=n=>"pan"in n,Ln=n=>Hs(Mk,n),vc=n=>Hs(Rk,n),hy=(n,e)=>{const{activeInputs:t}=Ln(n);t.forEach(i=>i.forEach(([a])=>{e.includes(n)||hy(a,[...e,n])}));const s=W6(n)?[n.playbackRate]:Dk(n)?Array.from(n.parameters.values()):H6(n)?[n.Q,n.detune,n.frequency,n.gain]:K6(n)?[n.offset]:Q6(n)?[n.gain]:Y6(n)?[n.detune,n.frequency]:X6(n)?[n.pan]:[];for(const i of s){const a=vc(i);a!==void 0&&a.activeInputs.forEach(([l])=>hy(l,e))}Lr(n)&&xc(n)},Lk=n=>{hy(n.destination,[])},Z6=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),J6=(n,e,t,s,i,a,l,u,d)=>class extends n{constructor(f={}){if(d===null)throw new Error("Missing the native AudioContext constructor.");let m;try{m=new d(f)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?t():S}if(m===null)throw s();if(!Z6(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&m.sampleRate!==f.sampleRate)throw t();super(m,2);const{latencyHint:g}=f,{sampleRate:b}=m;if(this._baseLatency=typeof m.baseLatency=="number"?m.baseLatency:g==="balanced"?512/b:g==="interactive"||g===void 0?256/b:g==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(g*b/128)))*128/b,this._nativeAudioContext=m,d.name==="webkitAudioContext"?(this._nativeGainNode=m.createGain(),this._nativeOscillatorNode=m.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(m.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,m.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),m.removeEventListener("statechange",S)};m.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Lk(this)}))}createMediaElementSource(f){return new i(this,{mediaElement:f})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(f){return new l(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new u(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,m)=>{const g=()=>{this._nativeAudioContext.removeEventListener("statechange",g),this._nativeAudioContext.state==="running"?f():this.resume().then(f,m)};this._nativeAudioContext.addEventListener("statechange",g)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?e():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?e():f})}},eV=(n,e,t,s,i,a,l,u)=>class extends n{constructor(h,f){const m=a(h),g=l(m),b=i(m,f,g),S=g?e(u):null;super(h,!1,b,S),this._isNodeOfNativeOfflineAudioContext=g,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},tV=n=>{const e=new WeakMap,t=async(s,i)=>{const a=i.destination;return e.set(i,a),await n(s,i,a),a};return{render(s,i){const a=e.get(i);return a!==void 0?Promise.resolve(a):t(s,i)}}},nV=(n,e,t,s,i,a,l,u)=>(d,h)=>{const f=h.listener,m=()=>{const P=new Float32Array(1),R=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),T=l(h);let j=!1,O=[0,0,-1,0,1,0],I=[0,0,0];const D=()=>{if(j)return;j=!0;const G=s(h,256,9,0);G.onaudioprocess=({inputBuffer:Q})=>{const X=[a(Q,P,0),a(Q,P,1),a(Q,P,2),a(Q,P,3),a(Q,P,4),a(Q,P,5)];X.some((U,Y)=>U!==O[Y])&&(f.setOrientation(...X),O=X);const q=[a(Q,P,6),a(Q,P,7),a(Q,P,8)];q.some((U,Y)=>U!==I[Y])&&(f.setPosition(...q),I=q)},R.connect(G)},B=G=>Q=>{Q!==O[G]&&(O[G]=Q,f.setOrientation(...O))},H=G=>Q=>{Q!==I[G]&&(I[G]=Q,f.setPosition(...I))},z=(G,Q,X)=>{const q=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q});q.connect(R,0,G),q.start(),Object.defineProperty(q.offset,"defaultValue",{get(){return Q}});const U=n({context:d},T,q.offset,Vn,Qn);return u(U,"value",Y=>()=>Y.call(U),Y=>M=>{try{Y.call(U,M)}catch(W){if(W.code!==9)throw W}D(),T&&X(M)}),U.cancelAndHoldAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.cancelAndHoldAtTime),U.cancelScheduledValues=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.cancelScheduledValues),U.exponentialRampToValueAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.exponentialRampToValueAtTime),U.linearRampToValueAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.linearRampToValueAtTime),U.setTargetAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.setTargetAtTime),U.setValueAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.setValueAtTime),U.setValueCurveAtTime=(Y=>T?()=>{throw i()}:(...M)=>{const W=Y.apply(U,M);return D(),W})(U.setValueCurveAtTime),U};return{forwardX:z(0,0,B(0)),forwardY:z(1,0,B(1)),forwardZ:z(2,-1,B(2)),positionX:z(6,0,H(0)),positionY:z(7,0,H(1)),positionZ:z(8,0,H(2)),upX:z(3,0,B(3)),upY:z(4,1,B(4)),upZ:z(5,0,B(5))}},{forwardX:g,forwardY:b,forwardZ:S,positionX:x,positionY:w,positionZ:N,upX:E,upY:C,upZ:A}=f.forwardX===void 0?m():f;return{get forwardX(){return g},get forwardY(){return b},get forwardZ(){return S},get positionX(){return x},get positionY(){return w},get positionZ(){return N},get upX(){return E},get upY(){return C},get upZ(){return A}}},Jd=n=>"context"in n,bc=n=>Jd(n[0]),ba=(n,e,t,s)=>{for(const i of n)if(t(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},I1=(n,e,[t,s],i)=>{ba(n,[e,t,s],a=>a[0]===e&&a[1]===t,i)},F1=(n,[e,t,s],i)=>{const a=n.get(e);a===void 0?n.set(e,new Set([[t,s]])):ba(a,[t,s],l=>l[0]===t,i)},Mo=n=>"inputs"in n,eh=(n,e,t,s)=>{if(Mo(e)){const i=e.inputs[s];return n.connect(i,t,0),[i,t,0]}return n.connect(e,t,s),[e,t,s]},Bk=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},sV=(n,e,t)=>Yh(n,s=>s[0]===e&&s[1]===t),zk=(n,e)=>{if(!yc(n).delete(e))throw new Error("Missing the expected event listener.")},Uk=(n,e,t)=>{const s=Hs(n,e),i=Yh(s,a=>a[0]===t);return s.size===0&&n.delete(e),i},th=(n,e,t,s)=>{Mo(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Pt=n=>Hs(jx,n),Yl=n=>Hs(Nx,n),ma=n=>ly.has(n),Ed=n=>!go.has(n),D1=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),i=n.createGain(),a=n.createBuffer(1,2,44100),l=a.getChannelData(0);l[0]=1,l[1]=1;const u=n.createBufferSource();u.buffer=a,u.loop=!0,u.connect(s).connect(n.destination),u.connect(i),u.disconnect(i),s.onaudioprocess=d=>{const h=d.inputBuffer.getChannelData(0);Array.prototype.some.call(h,f=>f===1)?t(!0):t(!1),u.stop(),s.onaudioprocess=null,u.disconnect(s),s.disconnect(n.destination)},u.start()}}),Tm=(n,e)=>{const t=new Map;for(const s of n)for(const i of s){const a=t.get(i);t.set(i,a===void 0?1:a+1)}t.forEach((s,i)=>e(i,s))},nh=n=>"context"in n,rV=n=>{const e=new Map;n.connect=(t=>(s,i=0,a=0)=>{const l=nh(s)?t(s,i,a):t(s,i),u=e.get(s);return u===void 0?e.set(s,[{input:a,output:i}]):u.every(d=>d.input!==a||d.output!==i)&&u.push({input:a,output:i}),l})(n.connect.bind(n)),n.disconnect=(t=>(s,i,a)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[l,u]of e){const d=u.filter(h=>h.output!==s);d.length===0?e.delete(l):e.set(l,d)}else if(e.has(s))if(i===void 0)e.delete(s);else{const l=e.get(s);if(l!==void 0){const u=l.filter(d=>d.output!==i&&(d.input!==a||a===void 0));u.length===0?e.delete(s):e.set(s,u)}}for(const[l,u]of e)u.forEach(d=>{nh(l)?n.connect(l,d.output,d.input):n.connect(l,d.output)})})(n.disconnect)},iV=(n,e,t,s)=>{const{activeInputs:i,passiveInputs:a}=vc(e),{outputs:l}=Ln(n),u=yc(n),d=h=>{const f=Pt(n),m=Yl(e);if(h){const g=Uk(a,n,t);I1(i,n,g,!1),!s&&!ma(n)&&f.connect(m,t)}else{const g=sV(i,n,t);F1(a,g,!1),!s&&!ma(n)&&f.disconnect(m,t)}};return ba(l,[e,t],h=>h[0]===e&&h[1]===t,!0)?(u.add(d),Lr(n)?I1(i,n,[t,d],!0):F1(a,[n,t,d],!0),!0):!1},aV=(n,e,t,s)=>{const{activeInputs:i,passiveInputs:a}=Ln(e),l=Bk(i[s],n,t);return l===null?[Fk(a,n,t,s)[2],!1]:[l[2],!0]},oV=(n,e,t)=>{const{activeInputs:s,passiveInputs:i}=vc(e),a=Bk(s,n,t);return a===null?[Uk(i,n,t)[1],!1]:[a[2],!0]},Tx=(n,e,t,s,i)=>{const[a,l]=aV(n,t,s,i);if(a!==null&&(zk(n,a),l&&!e&&!ma(n)&&th(Pt(n),Pt(t),s,i)),Lr(t)){const{activeInputs:u}=Ln(t);dy(t,u)}},Ax=(n,e,t,s)=>{const[i,a]=oV(n,t,s);i!==null&&(zk(n,i),a&&!e&&!ma(n)&&Pt(n).disconnect(Yl(t),s))},lV=(n,e)=>{const t=Ln(n),s=[];for(const i of t.outputs)bc(i)?Tx(n,e,...i):Ax(n,e,...i),s.push(i[0]);return t.outputs.clear(),s},cV=(n,e,t)=>{const s=Ln(n),i=[];for(const a of s.outputs)a[1]===t&&(bc(a)?Tx(n,e,...a):Ax(n,e,...a),i.push(a[0]),s.outputs.delete(a));return i},uV=(n,e,t,s,i)=>{const a=Ln(n);return Array.from(a.outputs).filter(l=>l[0]===t&&(s===void 0||l[1]===s)&&(i===void 0||l[2]===i)).map(l=>(bc(l)?Tx(n,e,...l):Ax(n,e,...l),a.outputs.delete(l),l[0]))},dV=(n,e,t,s,i,a,l,u,d,h,f,m,g,b,S,x)=>class extends h{constructor(N,E,C,A){super(C),this._context=N,this._nativeAudioNode=C;const P=f(N);m(P)&&t(D1,()=>D1(P,x))!==!0&&rV(C),jx.set(this,C),Ok.set(this,new Set),N.state!=="closed"&&E&&yo(this),n(this,A,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(N){this._nativeAudioNode.channelCount=N}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(N){this._nativeAudioNode.channelCountMode=N}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(N){this._nativeAudioNode.channelInterpretation=N}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(N,E=0,C=0){if(E<0||E>=this._nativeAudioNode.numberOfOutputs)throw i();const A=f(this._context),P=S(A);if(g(N)||b(N))throw a();if(Jd(N)){const j=Pt(N);try{const I=eh(this._nativeAudioNode,j,E,C),D=Ed(this);(P||D)&&this._nativeAudioNode.disconnect(...I),this.context.state!=="closed"&&!D&&Ed(N)&&yo(N)}catch(I){throw I.code===12?a():I}if(e(this,N,E,C,P)){const I=d([this],N);Tm(I,s(P))}return N}const R=Yl(N);if(R.name==="playbackRate"&&R.maxValue===1024)throw l();try{this._nativeAudioNode.connect(R,E),(P||Ed(this))&&this._nativeAudioNode.disconnect(R,E)}catch(j){throw j.code===12?a():j}if(iV(this,N,E,P)){const j=d([this],N);Tm(j,s(P))}}disconnect(N,E,C){let A;const P=f(this._context),R=S(P);if(N===void 0)A=lV(this,R);else if(typeof N=="number"){if(N<0||N>=this.numberOfOutputs)throw i();A=cV(this,R,N)}else{if(E!==void 0&&(E<0||E>=this.numberOfOutputs)||Jd(N)&&C!==void 0&&(C<0||C>=N.numberOfInputs))throw i();if(A=uV(this,R,N,E,C),A.length===0)throw a()}for(const T of A){const j=d([this],T);Tm(j,u)}}},hV=(n,e,t,s,i,a,l,u,d,h,f,m,g)=>(b,S,x,w=null,N=null)=>{const E=x.value,C=new S6(E),A=S?s(C):null,P={get defaultValue(){return E},get maxValue(){return w===null?x.maxValue:w},get minValue(){return N===null?x.minValue:N},get value(){return x.value},set value(R){x.value=R,P.setValueAtTime(R,b.context.currentTime)},cancelAndHoldAtTime(R){if(typeof x.cancelAndHoldAtTime=="function")A===null&&C.flush(b.context.currentTime),C.add(i(R)),x.cancelAndHoldAtTime(R);else{const T=Array.from(C).pop();A===null&&C.flush(b.context.currentTime),C.add(i(R));const j=Array.from(C).pop();x.cancelScheduledValues(R),T!==j&&j!==void 0&&(j.type==="exponentialRampToValue"?x.exponentialRampToValueAtTime(j.value,j.endTime):j.type==="linearRampToValue"?x.linearRampToValueAtTime(j.value,j.endTime):j.type==="setValue"?x.setValueAtTime(j.value,j.startTime):j.type==="setValueCurve"&&x.setValueCurveAtTime(j.values,j.startTime,j.duration))}return P},cancelScheduledValues(R){return A===null&&C.flush(b.context.currentTime),C.add(a(R)),x.cancelScheduledValues(R),P},exponentialRampToValueAtTime(R,T){if(R===0)throw new RangeError;if(!Number.isFinite(T)||T<0)throw new RangeError;const j=b.context.currentTime;return A===null&&C.flush(j),Array.from(C).length===0&&(C.add(h(E,j)),x.setValueAtTime(E,j)),C.add(l(R,T)),x.exponentialRampToValueAtTime(R,T),P},linearRampToValueAtTime(R,T){const j=b.context.currentTime;return A===null&&C.flush(j),Array.from(C).length===0&&(C.add(h(E,j)),x.setValueAtTime(E,j)),C.add(u(R,T)),x.linearRampToValueAtTime(R,T),P},setTargetAtTime(R,T,j){return A===null&&C.flush(b.context.currentTime),C.add(d(R,T,j)),x.setTargetAtTime(R,T,j),P},setValueAtTime(R,T){return A===null&&C.flush(b.context.currentTime),C.add(h(R,T)),x.setValueAtTime(R,T),P},setValueCurveAtTime(R,T,j){const O=R instanceof Float32Array?R:new Float32Array(R);if(m!==null&&m.name==="webkitAudioContext"){const I=T+j,D=b.context.sampleRate,B=Math.ceil(T*D),H=Math.floor(I*D),z=H-B,G=new Float32Array(z);for(let X=0;X<z;X+=1){const q=(O.length-1)/j*((B+X)/D-T),U=Math.floor(q),Y=Math.ceil(q);G[X]=U===Y?O[U]:(1-(q-U))*O[U]+(1-(Y-q))*O[Y]}A===null&&C.flush(b.context.currentTime),C.add(f(G,T,j)),x.setValueCurveAtTime(G,T,j);const Q=H/D;Q<I&&g(P,G[G.length-1],Q),g(P,O[O.length-1],I)}else A===null&&C.flush(b.context.currentTime),C.add(f(O,T,j)),x.setValueCurveAtTime(O,T,j);return P}};return t.set(P,x),e.set(P,b),n(P,A),P},pV=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:i}=t;e.exponentialRampToValueAtTime(i,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:i}=t;e.linearRampToValueAtTime(i,s)}else if(t.type==="setTarget"){const{startTime:s,target:i,timeConstant:a}=t;e.setTargetAtTime(i,s,a)}else if(t.type==="setValue"){const{startTime:s,value:i}=t;e.setValueAtTime(i,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:i,values:a}=t;e.setValueCurveAtTime(a,i,s)}else throw new Error("Can't apply an unknown automation.")}});class $k{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,i)=>e.call(t,s,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const fV={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},mV=(n,e,t,s,i,a,l,u,d,h,f,m,g,b)=>class extends e{constructor(x,w,N){var E;const C=u(x),A=d(C),P=f({...fV,...N});g(P);const R=cy.get(C),T=R?.get(w),j=A||C.state!=="closed"?C:(E=l(C))!==null&&E!==void 0?E:C,O=i(j,A?null:x.baseLatency,h,w,T,P),I=A?s(w,P,T):null;super(x,!0,O,I);const D=[];O.parameters.forEach((H,z)=>{const G=t(this,A,H);D.push([z,G])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new $k(D),A&&n(C,this);const{activeInputs:B}=a(this);m(O,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(x){const w=typeof x=="function"?b(this,x):null;this._nativeAudioWorkletNode.onprocessorerror=w;const N=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=N!==null&&N===w?x:N}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function sh(n,e,t,s,i){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,i);else{const a=n.getChannelData(s);if(e[t].byteLength===0)e[t]=a.slice(i,i+128);else{const l=new Float32Array(a.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(l)}}}const qk=(n,e,t,s,i)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,i):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],i)},rh=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const i=[],a=typeof e=="number"?e:e[s];for(let l=0;l<a;l+=1)i.push(new Float32Array(128));t.push(i)}return t},gV=(n,e)=>{const t=Hs(uy,n),s=Pt(e);return Hs(t,s)},yV=async(n,e,t,s,i,a,l)=>{const u=e===null?Math.ceil(n.context.length/128)*128:e.length,d=s.channelCount*s.numberOfInputs,h=i.reduce((w,N)=>w+N,0),f=h===0?null:t.createBuffer(h,u,t.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const m=Ln(n),g=await gV(t,n),b=rh(s.numberOfInputs,s.channelCount),S=rh(s.numberOfOutputs,i),x=Array.from(n.parameters.keys()).reduce((w,N)=>({...w,[N]:new Float32Array(128)}),{});for(let w=0;w<u;w+=128){if(s.numberOfInputs>0&&e!==null)for(let N=0;N<s.numberOfInputs;N+=1)for(let E=0;E<s.channelCount;E+=1)sh(e,b[N],E,E,w);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:N},E)=>{sh(e,x,N,d+E,w)});for(let N=0;N<s.numberOfInputs;N+=1)for(let E=0;E<i[N];E+=1)S[N][E].byteLength===0&&(S[N][E]=new Float32Array(128));try{const N=b.map((C,A)=>m.activeInputs[A].size===0?[]:C),E=l(w/t.sampleRate,t.sampleRate,()=>g.process(N,S,x));if(f!==null)for(let C=0,A=0;C<s.numberOfOutputs;C+=1){for(let P=0;P<i[C];P+=1)qk(f,S[C],P,A+P,w);A+=i[C]}if(!E)break}catch(N){n.dispatchEvent(new ErrorEvent("processorerror",{colno:N.colno,filename:N.filename,lineno:N.lineno,message:N.message}));break}}return f},xV=(n,e,t,s,i,a,l,u,d,h,f,m,g,b,S,x)=>(w,N,E)=>{const C=new WeakMap;let A=null;const P=async(R,T)=>{let j=f(R),O=null;const I=Rn(j,T),D=Array.isArray(N.outputChannelCount)?N.outputChannelCount:Array.from(N.outputChannelCount);if(m===null){const B=D.reduce((Q,X)=>Q+X,0),H=i(T,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),z=[];for(let Q=0;Q<R.numberOfOutputs;Q+=1)z.push(s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[Q]}));const G=l(T,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1});G.connect=e.bind(null,z),G.disconnect=d.bind(null,z),O=[H,z,G]}else I||(j=new m(T,w));if(C.set(T,O===null?j:O[2]),O!==null){if(A===null){if(E===void 0)throw new Error("Missing the processor constructor.");if(g===null)throw new Error("Missing the native OfflineAudioContext constructor.");const X=R.channelCount*R.numberOfInputs,q=E.parameterDescriptors===void 0?0:E.parameterDescriptors.length,U=X+q;A=yV(R,U===0?null:await(async()=>{const M=new g(U,Math.ceil(R.context.length/128)*128,T.sampleRate),W=[],J=[];for(let pe=0;pe<N.numberOfInputs;pe+=1)W.push(l(M,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1})),J.push(i(M,{channelCount:N.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:N.channelCount}));const de=await Promise.all(Array.from(R.parameters.values()).map(async pe=>{const F=a(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:pe.value});return await b(M,pe,F.offset),F})),ce=s(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,X+q)});for(let pe=0;pe<N.numberOfInputs;pe+=1){W[pe].connect(J[pe]);for(let F=0;F<N.channelCount;F+=1)J[pe].connect(ce,F,pe*N.channelCount+F)}for(const[pe,F]of de.entries())F.connect(ce,0,X+pe),F.start(0);return ce.connect(M.destination),await Promise.all(W.map(pe=>S(R,M,pe))),x(M)})(),T,N,D,E,h)}const B=await A,H=t(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[z,G,Q]=O;B!==null&&(H.buffer=B,H.start(0)),H.connect(z);for(let X=0,q=0;X<R.numberOfOutputs;X+=1){const U=G[X];for(let Y=0;Y<D[X];Y+=1)z.connect(U,q+Y,Y);q+=D[X]}return Q}if(I)for(const[B,H]of R.parameters.entries())await n(T,H,j.parameters.get(B));else for(const[B,H]of R.parameters.entries())await b(T,H,j.parameters.get(B));return await S(R,T,j),j};return{render(R,T){u(T,R);const j=C.get(T);return j!==void 0?Promise.resolve(j):P(R,T)}}},vV=(n,e,t,s,i,a,l,u,d,h,f,m,g,b,S,x,w,N,E,C)=>class extends S{constructor(P,R){super(P,R),this._nativeContext=P,this._audioWorklet=n===void 0?void 0:{addModule:(T,j)=>n(this,T,j)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(P,R,T){return new t({length:R,numberOfChannels:P,sampleRate:T})}createBufferSource(){return new s(this)}createChannelMerger(P=6){return new a(this,{numberOfInputs:P})}createChannelSplitter(P=6){return new l(this,{numberOfOutputs:P})}createConstantSource(){return new u(this)}createConvolver(){return new d(this)}createDelay(P=1){return new f(this,{maxDelayTime:P})}createDynamicsCompressor(){return new m(this)}createGain(){return new g(this)}createIIRFilter(P,R){return new b(this,{feedback:R,feedforward:P})}createOscillator(){return new x(this)}createPanner(){return new w(this)}createPeriodicWave(P,R,T={disableNormalization:!1}){return new N(this,{...T,imag:R,real:P})}createStereoPanner(){return new E(this)}createWaveShaper(){return new C(this)}decodeAudioData(P,R,T){return h(this._nativeContext,P).then(j=>(typeof R=="function"&&R(j),j),j=>{throw typeof T=="function"&&T(j),j})}},bV={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},wV=(n,e,t,s,i,a,l,u)=>class extends n{constructor(h,f){const m=a(h),g={...bV,...f},b=i(m,g),S=l(m),x=S?t():null;super(h,!1,b,x),this._Q=e(this,S,b.Q,Vn,Qn),this._detune=e(this,S,b.detune,1200*Math.log2(Vn),-1200*Math.log2(Vn)),this._frequency=e(this,S,b.frequency,h.sampleRate/2,0),this._gain=e(this,S,b.gain,40*Math.log10(Vn),Qn),this._nativeBiquadFilterNode=b,u(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,f,m){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,f,m)}catch(g){throw g.code===11?s():g}if(h.length!==f.length||f.length!==m.length)throw s()}},SV=(n,e,t,s,i)=>()=>{const a=new WeakMap,l=async(u,d)=>{let h=t(u);const f=Rn(h,d);if(!f){const m={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(d,m)}return a.set(d,h),f?(await n(d,u.Q,h.Q),await n(d,u.detune,h.detune),await n(d,u.frequency,h.frequency),await n(d,u.gain,h.gain)):(await s(d,u.Q,h.Q),await s(d,u.detune,h.detune),await s(d,u.frequency,h.frequency),await s(d,u.gain,h.gain)),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},_V=(n,e)=>(t,s)=>{const i=e.get(t);if(i!==void 0)return i;const a=n.get(t);if(a!==void 0)return a;try{const l=s();return l instanceof Promise?(n.set(t,l),l.catch(()=>!1).then(u=>(n.delete(t),e.set(t,u),u))):(e.set(t,l),l)}catch{return e.set(t,!1),!1}},CV={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},jV=(n,e,t,s,i)=>class extends n{constructor(l,u){const d=s(l),h={...CV,...u},f=t(d,h),m=i(d)?e():null;super(l,!1,f,m)}},NV=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,l)=>{let u=e(a);if(!Rn(u,l)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=n(l,h)}return s.set(l,u),await t(a,l,u),u};return{render(a,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):i(a,l)}}},kV={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},TV=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),f=a({...kV,...d}),m=t(h,f),g=i(h)?e():null;super(u,!1,m,g)}},AV=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,l)=>{let u=e(a);if(!Rn(u,l)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=n(l,h)}return s.set(l,u),await t(a,l,u),u};return{render(a,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):i(a,l)}}},PV=n=>(e,t,s)=>n(t,e,s),EV=n=>(e,t,s=0,i=0)=>{const a=e[s];if(a===void 0)throw n();return nh(t)?a.connect(t,0,i):a.connect(t,0)},MV=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},RV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},OV=(n,e,t,s,i,a,l)=>class extends n{constructor(d,h){const f=i(d),m={...RV,...h},g=s(f,m),b=a(f),S=b?t():null;super(d,!1,g,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=g,this._offset=e(this,b,g.offset,Vn,Qn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const h=typeof d=="function"?l(this,d):null;this._nativeConstantSourceNode.onended=h;const f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===h?d:f}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){yo(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),Lr(this)&&xc(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},IV=(n,e,t,s,i)=>()=>{const a=new WeakMap;let l=null,u=null;const d=async(h,f)=>{let m=t(h);const g=Rn(m,f);if(!g){const b={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,offset:m.offset.value};m=e(f,b),l!==null&&m.start(l),u!==null&&m.stop(u)}return a.set(f,m),g?await n(f,h.offset,m.offset):await s(f,h.offset,m.offset),await i(h,f,m),m};return{set start(h){l=h},set stop(h){u=h},render(h,f){const m=a.get(f);return m!==void 0?Promise.resolve(m):d(h,f)}}},FV=n=>e=>(n[0]=e,n[0]),DV={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},VV=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),f={...DV,...d},m=t(h,f),b=i(h)?e():null;super(u,!1,m,b),this._isBufferNullified=!1,this._nativeConvolverNode=m,f.buffer!==null&&a(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(u){if(this._nativeConvolverNode.buffer=u,u===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(u){this._nativeConvolverNode.normalize=u}},LV=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,l)=>{let u=e(a);if(!Rn(u,l)){const h={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize};u=n(l,h)}return s.set(l,u),Mo(u)?await t(a,l,u.inputs[0]):await t(a,l,u),u};return{render(a,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):i(a,l)}}},BV=(n,e)=>(t,s,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,i)}catch(a){throw a.name==="SyntaxError"?n():a}},zV=()=>new DOMException("","DataCloneError"),V1=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const i=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>i();try{e.postMessage(n,[n])}catch{}finally{i()}})},UV=(n,e,t,s,i,a,l,u,d,h,f)=>(m,g)=>{const b=l(m)?m:a(m);if(i.has(g)){const S=t();return Promise.reject(S)}try{i.add(g)}catch{}return e(d,()=>d(b))?b.decodeAudioData(g).then(S=>(V1(g).catch(()=>{}),e(u,()=>u(S))||f(S),n.add(S),S)):new Promise((S,x)=>{const w=async()=>{try{await V1(g)}catch{}},N=E=>{x(E),w()};try{b.decodeAudioData(g,E=>{typeof E.copyFromChannel!="function"&&(h(E),kx(E)),n.add(E),w().then(()=>S(E))},E=>{N(E===null?s():E)})}catch(E){N(E)}})},$V=(n,e,t,s,i,a,l,u)=>(d,h)=>{const f=e.get(d);if(f===void 0)throw new Error("Missing the expected cycle count.");const m=a(d.context),g=u(m);if(f===h){if(e.delete(d),!g&&l(d)){const b=s(d),{outputs:S}=t(d);for(const x of S)if(bc(x)){const w=s(x[0]);n(b,w,x[1],x[2])}else{const w=i(x[0]);b.connect(w,x[1])}}}else e.set(d,f-h)},qV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},GV=(n,e,t,s,i,a,l)=>class extends n{constructor(d,h){const f=i(d),m={...qV,...h},g=s(f,m),b=a(f),S=b?t(m.maxDelayTime):null;super(d,!1,g,S),this._delayTime=e(this,b,g.delayTime),l(this,m.maxDelayTime)}get delayTime(){return this._delayTime}},WV=(n,e,t,s,i)=>a=>{const l=new WeakMap,u=async(d,h)=>{let f=t(d);const m=Rn(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:a};f=e(h,g)}return l.set(h,f),m?await n(h,d.delayTime,f.delayTime):await s(h,d.delayTime,f.delayTime),await i(d,h,f),f};return{render(d,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):u(d,h)}}},HV=n=>(e,t,s,i)=>n(e[i],a=>a[0]===t&&a[1]===s),KV=n=>(e,t)=>{n(e).delete(t)},QV=n=>"delayTime"in n,YV=(n,e,t)=>function s(i,a){const l=Jd(a)?a:t(n,a);if(QV(l))return[];if(i[0]===l)return[i];if(i.includes(l))return[];const{outputs:u}=e(l);return Array.from(u).map(d=>s([...i,l],d[0])).reduce((d,h)=>d.concat(h),[])},rd=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},XV=n=>(e,t=void 0,s=void 0,i=0)=>t===void 0?e.forEach(a=>a.disconnect()):typeof t=="number"?rd(n,e,t).disconnect():nh(t)?s===void 0?e.forEach(a=>a.disconnect(t)):i===void 0?rd(n,e,s).disconnect(t,0):rd(n,e,s).disconnect(t,0,i):s===void 0?e.forEach(a=>a.disconnect(t)):rd(n,e,s).disconnect(t,0),ZV={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},JV=(n,e,t,s,i,a,l,u)=>class extends n{constructor(h,f){const m=a(h),g={...ZV,...f},b=s(m,g),S=l(m),x=S?t():null;super(h,!1,b,x),this._attack=e(this,S,b.attack),this._knee=e(this,S,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,S,b.ratio),this._release=e(this,S,b.release),this._threshold=e(this,S,b.threshold),u(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=f,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},eL=(n,e,t,s,i)=>()=>{const a=new WeakMap,l=async(u,d)=>{let h=t(u);const f=Rn(h,d);if(!f){const m={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(d,m)}return a.set(d,h),f?(await n(d,u.attack,h.attack),await n(d,u.knee,h.knee),await n(d,u.ratio,h.ratio),await n(d,u.release,h.release),await n(d,u.threshold,h.threshold)):(await s(d,u.attack,h.attack),await s(d,u.knee,h.knee),await s(d,u.ratio,h.ratio),await s(d,u.release,h.release),await s(d,u.threshold,h.threshold)),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},tL=()=>new DOMException("","EncodingError"),nL=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const i=n.document.head;if(i===null)s(new SyntaxError);else{const a=n.document.createElement("script"),l=new Blob([e],{type:"application/javascript"}),u=URL.createObjectURL(l),d=n.onerror,h=()=>{n.onerror=d,URL.revokeObjectURL(u)};n.onerror=(f,m,g,b,S)=>{if(m===u||m===n.location.href&&g===1&&b===1)return h(),s(S),!1;if(d!==null)return d(f,m,g,b,S)},a.onerror=()=>{h(),s(new SyntaxError)},a.onload=()=>{h(),t()},a.src=u,a.type="module",i.appendChild(a)}}),sL=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,i){if(s!==null){let a=this._listeners.get(s);a===void 0&&(a=n(this,s),typeof s=="function"&&this._listeners.set(s,a)),this._nativeEventTarget.addEventListener(t,a,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,i){const a=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,i)}},rL=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},iL=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},aL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},oL=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),f={...aL,...d},m=s(h,f),g=a(h),b=g?t():null;super(u,!1,m,b),this._gain=e(this,g,m.gain,Vn,Qn)}get gain(){return this._gain}},lL=(n,e,t,s,i)=>()=>{const a=new WeakMap,l=async(u,d)=>{let h=t(u);const f=Rn(h,d);if(!f){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(d,m)}return a.set(d,h),f?await n(d,u.gain,h.gain):await s(d,u.gain,h.gain),await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},cL=(n,e)=>t=>e(n,t),uL=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},dL=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},hL=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},pL=n=>e=>n.get(e),fn=()=>new DOMException("","InvalidStateError"),fL=n=>e=>{const t=n.get(e);if(t===void 0)throw fn();return t},mL=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},gL=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Xh=()=>new DOMException("","InvalidAccessError"),yL=n=>{n.getFrequencyResponse=(e=>(t,s,i)=>{if(t.length!==s.length||s.length!==i.length)throw Xh();return e.call(n,t,s,i)})(n.getFrequencyResponse)},xL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},vL=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=s(u),f=i(h),m={...xL,...d},g=e(h,f?null:u.baseLatency,m),b=f?t(m.feedback,m.feedforward):null;super(u,!1,g,b),yL(g),this._nativeIIRFilterNode=g,a(this,1)}getFrequencyResponse(u,d,h){return this._nativeIIRFilterNode.getFrequencyResponse(u,d,h)}},Gk=(n,e,t,s,i,a,l,u,d,h,f)=>{const m=h.length;let g=u;for(let b=0;b<m;b+=1){let S=t[0]*h[b];for(let x=1;x<i;x+=1){const w=g-x&d-1;S+=t[x]*a[w],S-=n[x]*l[w]}for(let x=i;x<s;x+=1)S+=t[x]*a[g-x&d-1];for(let x=i;x<e;x+=1)S-=n[x]*l[g-x&d-1];a[g]=h[b],l[g]=S,g=g+1&d-1,f[b]=S}return g},bL=(n,e,t,s)=>{const i=t instanceof Float64Array?t:new Float64Array(t),a=s instanceof Float64Array?s:new Float64Array(s),l=i.length,u=a.length,d=Math.min(l,u);if(i[0]!==1){for(let S=0;S<l;S+=1)a[S]/=i[0];for(let S=1;S<u;S+=1)i[S]/=i[0]}const h=32,f=new Float32Array(h),m=new Float32Array(h),g=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let S=0;S<b;S+=1){const x=n.getChannelData(S),w=g.getChannelData(S);f.fill(0),m.fill(0),Gk(i,l,a,u,d,f,m,0,h,x,w)}return g},wL=(n,e,t,s,i)=>(a,l)=>{const u=new WeakMap;let d=null;const h=async(f,m)=>{let g=null,b=e(f);const S=Rn(b,m);if(m.createIIRFilter===void 0?g=n(m,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(b=m.createIIRFilter(l,a)),u.set(m,g===null?b:g),g!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new t(f.context.destination.channelCount,f.context.length,m.sampleRate);d=(async()=>{await s(f,w,w.destination);const N=await i(w);return bL(N,m,a,l)})()}const x=await d;return g.buffer=x,g.start(0),g}return await s(f,m,b),b};return{render(f,m){const g=u.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},SL=(n,e,t,s,i,a)=>l=>(u,d)=>{const h=n.get(u);if(h===void 0){if(!l&&a(u)){const f=s(u),{outputs:m}=t(u);for(const g of m)if(bc(g)){const b=s(g[0]);e(f,b,g[1],g[2])}else{const b=i(g[0]);f.disconnect(b,g[1])}}n.set(u,d)}else n.set(u,h+d)},_L=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},CL=(n,e)=>t=>n.has(t)||e(t),jL=(n,e)=>t=>n.has(t)||e(t),NL=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},kL=n=>e=>n!==null&&e instanceof n,TL=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,AL=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,PL=(n,e)=>t=>n(t)||e(t),EL=n=>e=>n!==null&&e instanceof n,ML=n=>n!==null&&n.isSecureContext,RL=(n,e,t,s)=>class extends n{constructor(a,l){const u=t(a),d=e(u,l);if(s(u))throw TypeError();super(a,!0,d,null),this._nativeMediaElementAudioSourceNode=d}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},OL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},IL=(n,e,t,s)=>class extends n{constructor(a,l){const u=t(a);if(s(u))throw new TypeError;const d={...OL,...l},h=e(u,d);super(a,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},FL=(n,e,t,s)=>class extends n{constructor(a,l){const u=t(a),d=e(u,l);if(s(u))throw new TypeError;super(a,!0,d,null),this._nativeMediaStreamAudioSourceNode=d}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},DL=(n,e,t)=>class extends n{constructor(i,a){const l=t(i),u=e(l,a);super(i,!0,u,null)}},VL=(n,e,t,s,i,a)=>class extends t{constructor(u,d){super(u),this._nativeContext=u,Qh.set(this,u),s(u)&&i.set(u,new Set),this._destination=new n(this,d),this._listener=e(this,u),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(u){const d=typeof u=="function"?a(this,u):null;this._nativeContext.onstatechange=d;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===d?u:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Xl=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},LL=(n,e)=>(t,s,i)=>{const a=new Set;return t.connect=(l=>(u,d=0,h=0)=>{const f=a.size===0;if(e(u))return l.call(t,u,d,h),n(a,[u,d,h],m=>m[0]===u&&m[1]===d&&m[2]===h,!0),f&&s(),u;l.call(t,u,d),n(a,[u,d],m=>m[0]===u&&m[1]===d,!0),f&&s()})(t.connect),t.disconnect=(l=>(u,d,h)=>{const f=a.size>0;if(u===void 0)l.apply(t),a.clear();else if(typeof u=="number"){l.call(t,u);for(const g of a)g[1]===u&&a.delete(g)}else{e(u)?l.call(t,u,d,h):l.call(t,u,d);for(const g of a)g[0]===u&&(d===void 0||g[1]===d)&&(h===void 0||g[2]===h)&&a.delete(g)}const m=a.size===0;f&&m&&i()})(t.disconnect),t},Rt=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},on=(n,e)=>{Rt(n,e,"channelCount"),Rt(n,e,"channelCountMode"),Rt(n,e,"channelInterpretation")},L1=n=>typeof n.getFloatTimeDomainData=="function",BL=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let i=0;i<s;i+=1)e[i]=(t[i]-128)*.0078125;return e}},zL=(n,e)=>(t,s)=>{const i=t.createAnalyser();if(on(i,s),!(s.maxDecibels>s.minDecibels))throw e();return Rt(i,s,"fftSize"),Rt(i,s,"maxDecibels"),Rt(i,s,"minDecibels"),Rt(i,s,"smoothingTimeConstant"),n(L1,()=>L1(i))||BL(i),i},UL=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,zt=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},$L=n=>{n.start=(e=>{let t=!1;return(s=0,i=0,a)=>{if(t)throw fn();e.call(n,s,i,a),t=!0}})(n.start)},Px=n=>{n.start=(e=>(t=0,s=0,i)=>{if(typeof i=="number"&&i<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,i)})(n.start)},Ex=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},qL=(n,e,t,s,i,a,l,u,d,h,f)=>(m,g)=>{const b=m.createBufferSource();return on(b,g),zt(b,g,"playbackRate"),Rt(b,g,"buffer"),Rt(b,g,"loop"),Rt(b,g,"loopEnd"),Rt(b,g,"loopStart"),e(t,()=>t(m))||$L(b),e(s,()=>s(m))||d(b),e(i,()=>i(m))||h(b,m),e(a,()=>a(m))||Px(b),e(l,()=>l(m))||f(b,m),e(u,()=>u(m))||Ex(b),n(m,b),b},GL=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,WL=(n,e)=>(t,s,i)=>{const a=t.destination;if(a.channelCount!==s)try{a.channelCount=s}catch{}i&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:s});const l=n(t,{channelCount:s,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(l,"channelCount",u=>()=>u.call(l),u=>d=>{u.call(l,d);try{a.channelCount=d}catch(h){if(d>a.maxChannelCount)throw h}}),e(l,"channelCountMode",u=>()=>u.call(l),u=>d=>{u.call(l,d),a.channelCountMode=d}),e(l,"channelInterpretation",u=>()=>u.call(l),u=>d=>{u.call(l,d),a.channelInterpretation=d}),Object.defineProperty(l,"maxChannelCount",{get:()=>a.maxChannelCount}),l.connect(a),l},HL=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,KL=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},QL=(n,e,t,s,i)=>(a,l,u,d,h,f)=>{if(u!==null)try{const m=new u(a,d,f),g=new Map;let b=null;if(Object.defineProperties(m,{channelCount:{get:()=>f.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:S=>{typeof b=="function"&&m.removeEventListener("processorerror",b),b=typeof S=="function"?S:null,typeof b=="function"&&m.addEventListener("processorerror",b)}}}),m.addEventListener=(S=>(...x)=>{if(x[0]==="processorerror"){const w=typeof x[1]=="function"?x[1]:typeof x[1]=="object"&&x[1]!==null&&typeof x[1].handleEvent=="function"?x[1].handleEvent:null;if(w!==null){const N=g.get(x[1]);N!==void 0?x[1]=N:(x[1]=E=>{E.type==="error"?(Object.defineProperties(E,{type:{value:"processorerror"}}),w(E)):w(new ErrorEvent(x[0],{...E}))},g.set(w,x[1]))}}return S.call(m,"error",x[1],x[2]),S.call(m,...x)})(m.addEventListener),m.removeEventListener=(S=>(...x)=>{if(x[0]==="processorerror"){const w=g.get(x[1]);w!==void 0&&(g.delete(x[1]),x[1]=w)}return S.call(m,"error",x[1],x[2]),S.call(m,x[0],x[1],x[2])})(m.removeEventListener),f.numberOfOutputs!==0){const S=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return m.connect(S).connect(a.destination),i(m,()=>S.disconnect(),()=>S.connect(a.destination))}return m}catch(m){throw m.code===11?s():m}if(h===void 0)throw s();return KL(f),e(a,l,h,f)},Wk=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),YL=n=>new Promise((e,t)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:a})=>{s.close(),i.close(),e(a)},s.onmessageerror=({data:a})=>{s.close(),i.close(),t(a)},i.postMessage(n)}),XL=async(n,e)=>{const t=await YL(e);return new n(t)},ZL=(n,e,t,s)=>{let i=uy.get(n);i===void 0&&(i=new WeakMap,uy.set(n,i));const a=XL(t,s);return i.set(e,a),a},JL=(n,e,t,s,i,a,l,u,d,h,f,m,g)=>(b,S,x,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw d();const N=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(N.some(he=>he<1))throw d();if(N.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw d();const E=w.channelCount*w.numberOfInputs,C=N.reduce((he,Ce)=>he+Ce,0),A=x.parameterDescriptors===void 0?0:x.parameterDescriptors.length;if(E+A>6||C>6)throw d();const P=new MessageChannel,R=[],T=[];for(let he=0;he<w.numberOfInputs;he+=1)R.push(l(b,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),T.push(i(b,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const j=[];if(x.parameterDescriptors!==void 0)for(const{defaultValue:he,maxValue:Ce,minValue:Le,name:ze}of x.parameterDescriptors){const qe=a(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[ze]!==void 0?w.parameterData[ze]:he===void 0?0:he});Object.defineProperties(qe.offset,{defaultValue:{get:()=>he===void 0?0:he},maxValue:{get:()=>Ce===void 0?Vn:Ce},minValue:{get:()=>Le===void 0?Qn:Le}}),j.push(qe)}const O=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,E+A)}),I=Wk(S,b.sampleRate),D=u(b,I,E+A,Math.max(1,C)),B=i(b,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),H=[];for(let he=0;he<w.numberOfOutputs;he+=1)H.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[he]}));for(let he=0;he<w.numberOfInputs;he+=1){R[he].connect(T[he]);for(let Ce=0;Ce<w.channelCount;Ce+=1)T[he].connect(O,Ce,he*w.channelCount+Ce)}const z=new $k(x.parameterDescriptors===void 0?[]:x.parameterDescriptors.map(({name:he},Ce)=>{const Le=j[Ce];return Le.connect(O,0,E+Ce),Le.start(0),[he,Le.offset]}));O.connect(D);let G=w.channelInterpretation,Q=null;const X=w.numberOfOutputs===0?[D]:H,q={get bufferSize(){return I},get channelCount(){return w.channelCount},set channelCount(he){throw t()},get channelCountMode(){return w.channelCountMode},set channelCountMode(he){throw t()},get channelInterpretation(){return G},set channelInterpretation(he){for(const Ce of R)Ce.channelInterpretation=he;G=he},get context(){return D.context},get inputs(){return R},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror(he){typeof Q=="function"&&q.removeEventListener("processorerror",Q),Q=typeof he=="function"?he:null,typeof Q=="function"&&q.addEventListener("processorerror",Q)},get parameters(){return z},get port(){return P.port2},addEventListener(...he){return D.addEventListener(he[0],he[1],he[2])},connect:n.bind(null,X),disconnect:h.bind(null,X),dispatchEvent(...he){return D.dispatchEvent(he[0])},removeEventListener(...he){return D.removeEventListener(he[0],he[1],he[2])}},U=new Map;P.port1.addEventListener=(he=>(...Ce)=>{if(Ce[0]==="message"){const Le=typeof Ce[1]=="function"?Ce[1]:typeof Ce[1]=="object"&&Ce[1]!==null&&typeof Ce[1].handleEvent=="function"?Ce[1].handleEvent:null;if(Le!==null){const ze=U.get(Ce[1]);ze!==void 0?Ce[1]=ze:(Ce[1]=qe=>{f(b.currentTime,b.sampleRate,()=>Le(qe))},U.set(Le,Ce[1]))}}return he.call(P.port1,Ce[0],Ce[1],Ce[2])})(P.port1.addEventListener),P.port1.removeEventListener=(he=>(...Ce)=>{if(Ce[0]==="message"){const Le=U.get(Ce[1]);Le!==void 0&&(U.delete(Ce[1]),Ce[1]=Le)}return he.call(P.port1,Ce[0],Ce[1],Ce[2])})(P.port1.removeEventListener);let Y=null;Object.defineProperty(P.port1,"onmessage",{get:()=>Y,set:he=>{typeof Y=="function"&&P.port1.removeEventListener("message",Y),Y=typeof he=="function"?he:null,typeof Y=="function"&&(P.port1.addEventListener("message",Y),P.port1.start())}}),x.prototype.port=P.port1;let M=null;ZL(b,q,x,w).then(he=>M=he);const J=rh(w.numberOfInputs,w.channelCount),de=rh(w.numberOfOutputs,N),ce=x.parameterDescriptors===void 0?[]:x.parameterDescriptors.reduce((he,{name:Ce})=>({...he,[Ce]:new Float32Array(128)}),{});let pe=!0;const F=()=>{w.numberOfOutputs>0&&D.disconnect(B);for(let he=0,Ce=0;he<w.numberOfOutputs;he+=1){const Le=H[he];for(let ze=0;ze<N[he];ze+=1)B.disconnect(Le,Ce+ze,ze);Ce+=N[he]}},L=new Map;D.onaudioprocess=({inputBuffer:he,outputBuffer:Ce})=>{if(M!==null){const Le=m(q);for(let ze=0;ze<I;ze+=128){for(let qe=0;qe<w.numberOfInputs;qe+=1)for(let et=0;et<w.channelCount;et+=1)sh(he,J[qe],et,et,ze);x.parameterDescriptors!==void 0&&x.parameterDescriptors.forEach(({name:qe},et)=>{sh(he,ce,qe,E+et,ze)});for(let qe=0;qe<w.numberOfInputs;qe+=1)for(let et=0;et<N[qe];et+=1)de[qe][et].byteLength===0&&(de[qe][et]=new Float32Array(128));try{const qe=J.map((ke,it)=>{if(Le[it].size>0)return L.set(it,I/128),ke;const Sn=L.get(it);return Sn===void 0?[]:(ke.every(Kr=>Kr.every(ja=>ja===0))&&(Sn===1?L.delete(it):L.set(it,Sn-1)),ke)});pe=f(b.currentTime+ze/b.sampleRate,b.sampleRate,()=>M.process(qe,de,ce));for(let ke=0,it=0;ke<w.numberOfOutputs;ke+=1){for(let lt=0;lt<N[ke];lt+=1)qk(Ce,de[ke],lt,it+lt,ze);it+=N[ke]}}catch(qe){pe=!1,q.dispatchEvent(new ErrorEvent("processorerror",{colno:qe.colno,filename:qe.filename,lineno:qe.lineno,message:qe.message}))}if(!pe){for(let qe=0;qe<w.numberOfInputs;qe+=1){R[qe].disconnect(T[qe]);for(let et=0;et<w.channelCount;et+=1)T[ze].disconnect(O,et,qe*w.channelCount+et)}if(x.parameterDescriptors!==void 0){const qe=x.parameterDescriptors.length;for(let et=0;et<qe;et+=1){const ke=j[et];ke.disconnect(O,0,E+et),ke.stop()}}O.disconnect(D),D.onaudioprocess=null,re?F():te();break}}}};let re=!1;const oe=l(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),we=()=>D.connect(oe).connect(b.destination),te=()=>{D.disconnect(oe),oe.disconnect()},fe=()=>{if(pe){te(),w.numberOfOutputs>0&&D.connect(B);for(let he=0,Ce=0;he<w.numberOfOutputs;he+=1){const Le=H[he];for(let ze=0;ze<N[he];ze+=1)B.connect(Le,Ce+ze,ze);Ce+=N[he]}}re=!0},ve=()=>{pe&&(we(),F()),re=!1};return we(),g(q,fe,ve)},Hk=(n,e)=>{const t=n.createBiquadFilter();return on(t,e),zt(t,e,"Q"),zt(t,e,"detune"),zt(t,e,"frequency"),zt(t,e,"gain"),Rt(t,e,"type"),t},e8=(n,e)=>(t,s)=>{const i=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,i),on(i,s),i},t8=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw fn()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw fn()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw fn()}})},wc=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return on(t,e),t8(t),t},n8=(n,e,t,s,i)=>(a,l)=>{if(a.createConstantSource===void 0)return t(a,l);const u=a.createConstantSource();return on(u,l),zt(u,l,"offset"),e(s,()=>s(a))||Px(u),e(i,()=>i(a))||Ex(u),n(a,u),u},Ro=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),s8=(n,e,t,s)=>(i,{offset:a,...l})=>{const u=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(i,{...l,gain:a}),f=u.getChannelData(0);f[0]=1,f[1]=1,d.buffer=u,d.loop=!0;const m={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(S){h.channelCount=S},get channelCountMode(){return h.channelCountMode},set channelCountMode(S){h.channelCountMode=S},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(S){h.channelInterpretation=S},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return d.onended},set onended(S){d.onended=S},addEventListener(...S){return d.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return d.dispatchEvent(S[0])},removeEventListener(...S){return d.removeEventListener(S[0],S[1],S[2])},start(S=0){d.start.call(d,S)},stop(S=0){d.stop.call(d,S)}},g=()=>d.connect(h),b=()=>d.disconnect(h);return n(i,d),s(Ro(m,h),g,b)},r8=(n,e)=>(t,s)=>{const i=t.createConvolver();if(on(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Rt(i,s,"buffer"),s.channelCount>2||(e(i,"channelCount",a=>()=>a.call(i),a=>l=>{if(l>2)throw n();return a.call(i,l)}),s.channelCountMode==="max"))throw n();return e(i,"channelCountMode",a=>()=>a.call(i),a=>l=>{if(l==="max")throw n();return a.call(i,l)}),i},Kk=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return on(t,e),zt(t,e,"delayTime"),t},i8=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(on(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return zt(s,t,"attack"),zt(s,t,"knee"),zt(s,t,"ratio"),zt(s,t,"release"),zt(s,t,"threshold"),s},Zn=(n,e)=>{const t=n.createGain();return on(t,e),zt(t,e,"gain"),t},a8=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return on(i,s),i};function o8(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function l8(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function B1(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=l8(t,e),t[0]+=n[s];return t}const c8=(n,e,t,s)=>(i,a,{channelCount:l,channelCountMode:u,channelInterpretation:d,feedback:h,feedforward:f})=>{const m=Wk(a,i.sampleRate),g=h instanceof Float64Array?h:new Float64Array(h),b=f instanceof Float64Array?f:new Float64Array(f),S=g.length,x=b.length,w=Math.min(S,x);if(S===0||S>20)throw s();if(g[0]===0)throw e();if(x===0||x>20)throw s();if(b[0]===0)throw e();if(g[0]!==1){for(let j=0;j<x;j+=1)b[j]/=g[0];for(let j=1;j<S;j+=1)g[j]/=g[0]}const N=t(i,m,l,l);N.channelCount=l,N.channelCountMode=u,N.channelInterpretation=d;const E=32,C=[],A=[],P=[];for(let j=0;j<l;j+=1){C.push(0);const O=new Float32Array(E),I=new Float32Array(E);O.fill(0),I.fill(0),A.push(O),P.push(I)}N.onaudioprocess=j=>{const O=j.inputBuffer,I=j.outputBuffer,D=O.numberOfChannels;for(let B=0;B<D;B+=1){const H=O.getChannelData(B),z=I.getChannelData(B);C[B]=Gk(g,S,b,x,w,A[B],P[B],C[B],E,H,z)}};const R=i.sampleRate/2;return Ro({get bufferSize(){return m},get channelCount(){return N.channelCount},set channelCount(j){N.channelCount=j},get channelCountMode(){return N.channelCountMode},set channelCountMode(j){N.channelCountMode=j},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(j){N.channelInterpretation=j},get context(){return N.context},get inputs(){return[N]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},addEventListener(...j){return N.addEventListener(j[0],j[1],j[2])},dispatchEvent(...j){return N.dispatchEvent(j[0])},getFrequencyResponse(j,O,I){if(j.length!==O.length||O.length!==I.length)throw n();const D=j.length;for(let B=0;B<D;B+=1){const H=-Math.PI*(j[B]/R),z=[Math.cos(H),Math.sin(H)],G=B1(b,z),Q=B1(g,z),X=o8(G,Q);O[B]=Math.sqrt(X[0]*X[0]+X[1]*X[1]),I[B]=Math.atan2(X[1],X[0])}},removeEventListener(...j){return N.removeEventListener(j[0],j[1],j[2])}},N)},u8=(n,e)=>n.createMediaElementSource(e.mediaElement),d8=(n,e)=>{const t=n.createMediaStreamDestination();return on(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},h8=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((a,l)=>a.id<l.id?-1:a.id>l.id?1:0);const s=t.slice(0,1),i=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i},p8=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const i=new MediaStream([s]),a=t.createMediaStreamSource(i);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return a},f8=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,m8=(n,e,t,s,i,a)=>(l,u)=>{const d=l.createOscillator();return on(d,u),zt(d,u,"detune"),zt(d,u,"frequency"),u.periodicWave!==void 0?d.setPeriodicWave(u.periodicWave):Rt(d,u,"type"),e(t,()=>t(l))||Px(d),e(s,()=>s(l))||a(d,l),e(i,()=>i(l))||Ex(d),n(l,d),d},g8=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(on(s,t),zt(s,t,"orientationX"),zt(s,t,"orientationY"),zt(s,t,"orientationZ"),zt(s,t,"positionX"),zt(s,t,"positionY"),zt(s,t,"positionZ"),Rt(s,t,"coneInnerAngle"),Rt(s,t,"coneOuterAngle"),Rt(s,t,"coneOuterGain"),Rt(s,t,"distanceModel"),Rt(s,t,"maxDistance"),Rt(s,t,"panningModel"),Rt(s,t,"refDistance"),Rt(s,t,"rolloffFactor"),s)},y8=(n,e,t,s,i,a,l,u,d,h)=>(f,{coneInnerAngle:m,coneOuterAngle:g,coneOuterGain:b,distanceModel:S,maxDistance:x,orientationX:w,orientationY:N,orientationZ:E,panningModel:C,positionX:A,positionY:P,positionZ:R,refDistance:T,rolloffFactor:j,...O})=>{const I=f.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw l();on(I,O);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=t(f,{...D,channelInterpretation:"speakers",numberOfInputs:6}),H=s(f,{...O,gain:1}),z=s(f,{...D,gain:1}),G=s(f,{...D,gain:0}),Q=s(f,{...D,gain:0}),X=s(f,{...D,gain:0}),q=s(f,{...D,gain:0}),U=s(f,{...D,gain:0}),Y=i(f,256,6,1),M=a(f,{...D,curve:new Float32Array([1,1]),oversample:"none"});let W=[w,N,E],J=[A,P,R];const de=new Float32Array(1);Y.onaudioprocess=({inputBuffer:L})=>{const re=[d(L,de,0),d(L,de,1),d(L,de,2)];re.some((we,te)=>we!==W[te])&&(I.setOrientation(...re),W=re);const oe=[d(L,de,3),d(L,de,4),d(L,de,5)];oe.some((we,te)=>we!==J[te])&&(I.setPosition(...oe),J=oe)},Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});const ce={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(L){if(L>2)throw l();H.channelCount=L,I.channelCount=L},get channelCountMode(){return I.channelCountMode},set channelCountMode(L){if(L==="max")throw l();H.channelCountMode=L,I.channelCountMode=L},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(L){H.channelInterpretation=L,I.channelInterpretation=L},get coneInnerAngle(){return I.coneInnerAngle},set coneInnerAngle(L){I.coneInnerAngle=L},get coneOuterAngle(){return I.coneOuterAngle},set coneOuterAngle(L){I.coneOuterAngle=L},get coneOuterGain(){return I.coneOuterGain},set coneOuterGain(L){if(L<0||L>1)throw e();I.coneOuterGain=L},get context(){return I.context},get distanceModel(){return I.distanceModel},set distanceModel(L){I.distanceModel=L},get inputs(){return[H]},get maxDistance(){return I.maxDistance},set maxDistance(L){if(L<0)throw new RangeError;I.maxDistance=L},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get orientationX(){return z.gain},get orientationY(){return G.gain},get orientationZ(){return Q.gain},get panningModel(){return I.panningModel},set panningModel(L){I.panningModel=L},get positionX(){return X.gain},get positionY(){return q.gain},get positionZ(){return U.gain},get refDistance(){return I.refDistance},set refDistance(L){if(L<0)throw new RangeError;I.refDistance=L},get rolloffFactor(){return I.rolloffFactor},set rolloffFactor(L){if(L<0)throw new RangeError;I.rolloffFactor=L},addEventListener(...L){return H.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return H.dispatchEvent(L[0])},removeEventListener(...L){return H.removeEventListener(L[0],L[1],L[2])}};m!==ce.coneInnerAngle&&(ce.coneInnerAngle=m),g!==ce.coneOuterAngle&&(ce.coneOuterAngle=g),b!==ce.coneOuterGain&&(ce.coneOuterGain=b),S!==ce.distanceModel&&(ce.distanceModel=S),x!==ce.maxDistance&&(ce.maxDistance=x),w!==ce.orientationX.value&&(ce.orientationX.value=w),N!==ce.orientationY.value&&(ce.orientationY.value=N),E!==ce.orientationZ.value&&(ce.orientationZ.value=E),C!==ce.panningModel&&(ce.panningModel=C),A!==ce.positionX.value&&(ce.positionX.value=A),P!==ce.positionY.value&&(ce.positionY.value=P),R!==ce.positionZ.value&&(ce.positionZ.value=R),T!==ce.refDistance&&(ce.refDistance=T),j!==ce.rolloffFactor&&(ce.rolloffFactor=j),(W[0]!==1||W[1]!==0||W[2]!==0)&&I.setOrientation(...W),(J[0]!==0||J[1]!==0||J[2]!==0)&&I.setPosition(...J);const pe=()=>{H.connect(I),n(H,M,0,0),M.connect(z).connect(B,0,0),M.connect(G).connect(B,0,1),M.connect(Q).connect(B,0,2),M.connect(X).connect(B,0,3),M.connect(q).connect(B,0,4),M.connect(U).connect(B,0,5),B.connect(Y).connect(f.destination)},F=()=>{H.disconnect(I),u(H,M,0,0),M.disconnect(z),z.disconnect(B),M.disconnect(G),G.disconnect(B),M.disconnect(Q),Q.disconnect(B),M.disconnect(X),X.disconnect(B),M.disconnect(q),q.disconnect(B),M.disconnect(U),U.disconnect(B),B.disconnect(Y),Y.disconnect(f.destination)};return h(Ro(ce,I),pe,F)},x8=n=>(e,{disableNormalization:t,imag:s,real:i})=>{const a=s instanceof Float32Array?s:new Float32Array(s),l=i instanceof Float32Array?i:new Float32Array(i),u=e.createPeriodicWave(l,a,{disableNormalization:t});if(Array.from(s).length<2)throw n();return u},Sc=(n,e,t,s)=>n.createScriptProcessor(e,t,s),v8=(n,e)=>(t,s)=>{const i=s.channelCountMode;if(i==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const a=t.createStereoPanner();return on(a,s),zt(a,s,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>i,set:l=>{if(l!==i)throw e()}}),a},b8=(n,e,t,s,i,a)=>{const u=new Float32Array([1,1]),d=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...h,oversample:"none"},m=(S,x,w,N)=>{const E=new Float32Array(16385),C=new Float32Array(16385);for(let O=0;O<16385;O+=1){const I=O/16384*d;E[O]=Math.cos(I),C[O]=Math.sin(I)}const A=t(S,{...h,gain:0}),P=s(S,{...f,curve:E}),R=s(S,{...f,curve:u}),T=t(S,{...h,gain:0}),j=s(S,{...f,curve:C});return{connectGraph(){x.connect(A),x.connect(R.inputs===void 0?R:R.inputs[0]),x.connect(T),R.connect(w),w.connect(P.inputs===void 0?P:P.inputs[0]),w.connect(j.inputs===void 0?j:j.inputs[0]),P.connect(A.gain),j.connect(T.gain),A.connect(N,0,0),T.connect(N,0,1)},disconnectGraph(){x.disconnect(A),x.disconnect(R.inputs===void 0?R:R.inputs[0]),x.disconnect(T),R.disconnect(w),w.disconnect(P.inputs===void 0?P:P.inputs[0]),w.disconnect(j.inputs===void 0?j:j.inputs[0]),P.disconnect(A.gain),j.disconnect(T.gain),A.disconnect(N,0,0),T.disconnect(N,0,1)}}},g=(S,x,w,N)=>{const E=new Float32Array(16385),C=new Float32Array(16385),A=new Float32Array(16385),P=new Float32Array(16385),R=Math.floor(16385/2);for(let X=0;X<16385;X+=1)if(X>R){const q=(X-R)/(16384-R)*d;E[X]=Math.cos(q),C[X]=Math.sin(q),A[X]=0,P[X]=1}else{const q=X/(16384-R)*d;E[X]=1,C[X]=0,A[X]=Math.cos(q),P[X]=Math.sin(q)}const T=e(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),j=t(S,{...h,gain:0}),O=s(S,{...f,curve:E}),I=t(S,{...h,gain:0}),D=s(S,{...f,curve:C}),B=s(S,{...f,curve:u}),H=t(S,{...h,gain:0}),z=s(S,{...f,curve:A}),G=t(S,{...h,gain:0}),Q=s(S,{...f,curve:P});return{connectGraph(){x.connect(T),x.connect(B.inputs===void 0?B:B.inputs[0]),T.connect(j,0),T.connect(I,0),T.connect(H,1),T.connect(G,1),B.connect(w),w.connect(O.inputs===void 0?O:O.inputs[0]),w.connect(D.inputs===void 0?D:D.inputs[0]),w.connect(z.inputs===void 0?z:z.inputs[0]),w.connect(Q.inputs===void 0?Q:Q.inputs[0]),O.connect(j.gain),D.connect(I.gain),z.connect(H.gain),Q.connect(G.gain),j.connect(N,0,0),H.connect(N,0,0),I.connect(N,0,1),G.connect(N,0,1)},disconnectGraph(){x.disconnect(T),x.disconnect(B.inputs===void 0?B:B.inputs[0]),T.disconnect(j,0),T.disconnect(I,0),T.disconnect(H,1),T.disconnect(G,1),B.disconnect(w),w.disconnect(O.inputs===void 0?O:O.inputs[0]),w.disconnect(D.inputs===void 0?D:D.inputs[0]),w.disconnect(z.inputs===void 0?z:z.inputs[0]),w.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),O.disconnect(j.gain),D.disconnect(I.gain),z.disconnect(H.gain),Q.disconnect(G.gain),j.disconnect(N,0,0),H.disconnect(N,0,0),I.disconnect(N,0,1),G.disconnect(N,0,1)}}},b=(S,x,w,N,E)=>{if(x===1)return m(S,w,N,E);if(x===2)return g(S,w,N,E);throw i()};return(S,{channelCount:x,channelCountMode:w,pan:N,...E})=>{if(w==="max")throw i();const C=n(S,{...E,channelCount:1,channelCountMode:w,numberOfInputs:2}),A=t(S,{...E,channelCount:x,channelCountMode:w,gain:1}),P=t(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:N});let{connectGraph:R,disconnectGraph:T}=b(S,x,A,P,C);Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"maxValue",{get:()=>1}),Object.defineProperty(P.gain,"minValue",{get:()=>-1});const j={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(B){A.channelCount!==B&&(O&&T(),{connectGraph:R,disconnectGraph:T}=b(S,B,A,P,C),O&&R()),A.channelCount=B},get channelCountMode(){return A.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw i();A.channelCountMode=B},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(B){A.channelInterpretation=B},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return P.gain},addEventListener(...B){return A.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return A.dispatchEvent(B[0])},removeEventListener(...B){return A.removeEventListener(B[0],B[1],B[2])}};let O=!1;const I=()=>{R(),O=!0},D=()=>{T(),O=!1};return a(Ro(j,C),I,D)}},w8=(n,e,t,s,i,a,l)=>(u,d)=>{const h=u.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&u.createGain().gain.automationRate===void 0)return t(u,d);on(h,d);const f=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(f!==null&&f.length<2)throw e();Rt(h,{curve:f},"curve"),Rt(h,d,"oversample");let m=null,g=!1;return l(h,"curve",x=>()=>x.call(h),x=>w=>(x.call(h,w),g&&(s(w)&&m===null?m=n(u,h):!s(w)&&m!==null&&(m(),m=null)),w)),i(h,()=>{g=!0,s(h.curve)&&(m=n(u,h))},()=>{g=!1,m!==null&&(m(),m=null)})},S8=(n,e,t,s,i)=>(a,{curve:l,oversample:u,...d})=>{const h=a.createWaveShaper(),f=a.createWaveShaper();on(h,d),on(f,d);const m=t(a,{...d,gain:1}),g=t(a,{...d,gain:-1}),b=t(a,{...d,gain:1}),S=t(a,{...d,gain:-1});let x=null,w=!1,N=null;const E={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(P){m.channelCount=P,g.channelCount=P,h.channelCount=P,b.channelCount=P,f.channelCount=P,S.channelCount=P},get channelCountMode(){return h.channelCountMode},set channelCountMode(P){m.channelCountMode=P,g.channelCountMode=P,h.channelCountMode=P,b.channelCountMode=P,f.channelCountMode=P,S.channelCountMode=P},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(P){m.channelInterpretation=P,g.channelInterpretation=P,h.channelInterpretation=P,b.channelInterpretation=P,f.channelInterpretation=P,S.channelInterpretation=P},get context(){return h.context},get curve(){return N},set curve(P){if(P!==null&&P.length<2)throw e();if(P===null)h.curve=P,f.curve=P;else{const R=P.length,T=new Float32Array(R+2-R%2),j=new Float32Array(R+2-R%2);T[0]=P[0],j[0]=-P[R-1];const O=Math.ceil((R+1)/2),I=(R+1)/2-1;for(let D=1;D<O;D+=1){const B=D/O*I,H=Math.floor(B),z=Math.ceil(B);T[D]=H===z?P[H]:(1-(B-H))*P[H]+(1-(z-B))*P[z],j[D]=H===z?-P[R-1-H]:-((1-(B-H))*P[R-1-H])-(1-(z-B))*P[R-1-z]}T[O]=R%2===1?P[O-1]:(P[O-2]+P[O-1])/2,h.curve=T,f.curve=j}N=P,w&&(s(N)&&x===null?x=n(a,m):x!==null&&(x(),x=null))},get inputs(){return[m]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(P){h.oversample=P,f.oversample=P},addEventListener(...P){return m.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return m.dispatchEvent(P[0])},removeEventListener(...P){return m.removeEventListener(P[0],P[1],P[2])}};l!==null&&(E.curve=l instanceof Float32Array?l:new Float32Array(l)),u!==E.oversample&&(E.oversample=u);const C=()=>{m.connect(h).connect(b),m.connect(g).connect(f).connect(S).connect(b),w=!0,s(N)&&(x=n(a,m))},A=()=>{m.disconnect(h),h.disconnect(b),m.disconnect(g),g.disconnect(f),f.disconnect(S),S.disconnect(b),w=!1,x!==null&&(x(),x=null)};return i(Ro(E,b),C,A)},zn=()=>new DOMException("","NotSupportedError"),_8={numberOfChannels:1},C8=(n,e,t,s,i)=>class extends n{constructor(l,u,d){let h;if(typeof l=="number"&&u!==void 0&&d!==void 0)h={length:u,numberOfChannels:l,sampleRate:d};else if(typeof l=="object")h=l;else throw new Error("The given parameters are not valid.");const{length:f,numberOfChannels:m,sampleRate:g}={..._8,...h},b=s(m,f,g);e(Xl,()=>Xl(b))||b.addEventListener("statechange",(()=>{let S=0;const x=w=>{this._state==="running"&&(S>0?(b.removeEventListener("statechange",x),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):S+=1)};return x})()),super(b,m),this._length=f,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Lk(this)}))}_waitForThePromiseToSettle(l){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(l):setTimeout(()=>this._waitForThePromiseToSettle(l))}},j8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},N8=(n,e,t,s,i,a,l)=>class extends n{constructor(d,h){const f=i(d),m={...j8,...h},g=t(f,m),b=a(f),S=b?s():null,x=d.sampleRate/2;super(d,!1,g,S),this._detune=e(this,b,g.detune,153600,-153600),this._frequency=e(this,b,g.frequency,x,-x),this._nativeOscillatorNode=g,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&m.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=m.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const h=typeof d=="function"?l(this,d):null;this._nativeOscillatorNode.onended=h;const f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===h?d:f}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){yo(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),Lr(this)&&xc(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},k8=(n,e,t,s,i)=>()=>{const a=new WeakMap;let l=null,u=null,d=null;const h=async(f,m)=>{let g=t(f);const b=Rn(g,m);if(!b){const S={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,detune:g.detune.value,frequency:g.frequency.value,periodicWave:l===null?void 0:l,type:g.type};g=e(m,S),u!==null&&g.start(u),d!==null&&g.stop(d)}return a.set(m,g),b?(await n(m,f.detune,g.detune),await n(m,f.frequency,g.frequency)):(await s(m,f.detune,g.detune),await s(m,f.frequency,g.frequency)),await i(f,m,g),g};return{set periodicWave(f){l=f},set start(f){u=f},set stop(f){d=f},render(f,m){const g=a.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},T8={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},A8=(n,e,t,s,i,a,l)=>class extends n{constructor(d,h){const f=i(d),m={...T8,...h},g=t(f,m),b=a(f),S=b?s():null;super(d,!1,g,S),this._nativePannerNode=g,this._orientationX=e(this,b,g.orientationX,Vn,Qn),this._orientationY=e(this,b,g.orientationY,Vn,Qn),this._orientationZ=e(this,b,g.orientationZ,Vn,Qn),this._positionX=e(this,b,g.positionX,Vn,Qn),this._positionY=e(this,b,g.positionY,Vn,Qn),this._positionZ=e(this,b,g.positionZ,Vn,Qn),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},P8=(n,e,t,s,i,a,l,u,d,h)=>()=>{const f=new WeakMap;let m=null;const g=async(b,S)=>{let x=null,w=a(b);const N={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},E={...N,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},C=Rn(w,S);if("bufferSize"in w)x=s(S,{...N,gain:1});else if(!C){const A={...E,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=i(S,A)}if(f.set(S,x===null?w:x),x!==null){if(m===null){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new l(6,b.context.length,S.sampleRate),B=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(D.destination),m=(async()=>{const H=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(z,G)=>{const Q=t(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:G===0?1:0});return await u(D,z,Q.offset),Q}));for(let z=0;z<6;z+=1)H[z].connect(B,0,z),H[z].start(0);return h(D)})()}const A=await m,P=s(S,{...N,gain:1});await d(b,S,P);const R=[];for(let D=0;D<A.numberOfChannels;D+=1)R.push(A.getChannelData(D));let T=[R[0][0],R[1][0],R[2][0]],j=[R[3][0],R[4][0],R[5][0]],O=s(S,{...N,gain:1}),I=i(S,{...E,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:j[0],positionY:j[1],positionZ:j[2]});P.connect(O).connect(I.inputs[0]),I.connect(x);for(let D=128;D<A.length;D+=128){const B=[R[0][D],R[1][D],R[2][D]],H=[R[3][D],R[4][D],R[5][D]];if(B.some((z,G)=>z!==T[G])||H.some((z,G)=>z!==j[G])){T=B,j=H;const z=D/S.sampleRate;O.gain.setValueAtTime(0,z),O=s(S,{...N,gain:0}),I=i(S,{...E,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),O.gain.setValueAtTime(1,z),P.connect(O).connect(I.inputs[0]),I.connect(x)}}return x}return C?(await n(S,b.orientationX,w.orientationX),await n(S,b.orientationY,w.orientationY),await n(S,b.orientationZ,w.orientationZ),await n(S,b.positionX,w.positionX),await n(S,b.positionY,w.positionY),await n(S,b.positionZ,w.positionZ)):(await u(S,b.orientationX,w.orientationX),await u(S,b.orientationY,w.orientationY),await u(S,b.orientationZ,w.orientationZ),await u(S,b.positionX,w.positionX),await u(S,b.positionY,w.positionY),await u(S,b.positionZ,w.positionZ)),Mo(w)?await d(b,S,w.inputs[0]):await d(b,S,w),w};return{render(b,S){const x=f.get(S);return x!==void 0?Promise.resolve(x):g(b,S)}}},E8={disableNormalization:!1},M8=(n,e,t,s)=>class Qk{constructor(a,l){const u=e(a),d=s({...E8,...l}),h=n(u,d);return t.add(h),h}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===Qk.prototype||t.has(a)}},R8=(n,e)=>(t,s,i)=>(n(s).replay(i),e(s,t,i)),O8=(n,e,t)=>async(s,i,a)=>{const l=n(s);await Promise.all(l.activeInputs.map((u,d)=>Array.from(u).map(async([h,f])=>{const g=await e(h).render(h,i),b=s.context.destination;!t(h)&&(s!==b||!t(s))&&g.connect(a,f,d)})).reduce((u,d)=>[...u,...d],[]))},I8=(n,e,t)=>async(s,i,a)=>{const l=e(s);await Promise.all(Array.from(l.activeInputs).map(async([u,d])=>{const f=await n(u).render(u,i);t(u)||f.connect(a,d)}))},F8=(n,e,t,s)=>i=>n(Xl,()=>Xl(i))?Promise.resolve(n(s,s)).then(a=>{if(!a){const l=t(i,512,0,1);i.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>i.currentTime,l.connect(i.destination)}return i.startRendering()}):new Promise(a=>{const l=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=u=>{l.disconnect(),a(u.renderedBuffer)},l.connect(i.destination),i.startRendering()}),D8=n=>(e,t)=>{n.set(e,t)},V8=n=>(e,t)=>n.set(e,t),L8=(n,e,t,s,i,a,l,u)=>(d,h)=>t(d).render(d,h).then(()=>Promise.all(Array.from(s(h)).map(f=>t(f).render(f,h)))).then(()=>i(h)).then(f=>(typeof f.copyFromChannel!="function"?(l(f),kx(f)):e(a,()=>a(f))||u(f),n.add(f),f)),B8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},z8=(n,e,t,s,i,a)=>class extends n{constructor(u,d){const h=i(u),f={...B8,...d},m=t(h,f),g=a(h),b=g?s():null;super(u,!1,m,b),this._pan=e(this,g,m.pan)}get pan(){return this._pan}},U8=(n,e,t,s,i)=>()=>{const a=new WeakMap,l=async(u,d)=>{let h=t(u);const f=Rn(h,d);if(!f){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(d,m)}return a.set(d,h),f?await n(d,u.pan,h.pan):await s(d,u.pan,h.pan),Mo(h)?await i(u,d,h.inputs[0]):await i(u,d,h),h};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},$8=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},q8=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(t);let a=!1,l=!1;try{await s.audioWorklet.addModule(i);const u=new n(s,"a",{numberOfOutputs:0}),d=s.createOscillator();u.port.onmessage=()=>a=!0,u.onprocessorerror=()=>l=!0,d.connect(u),d.start(0),await s.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(i)}return a&&!l},G8=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{t.oncomplete=()=>{s.disconnect(),i(t.currentTime!==0)},t.startRendering()})},W8=()=>new DOMException("","UnknownError"),H8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},K8=(n,e,t,s,i,a,l)=>class extends n{constructor(d,h){const f=i(d),m={...H8,...h},g=t(f,m),S=a(f)?s():null;super(d,!0,g,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=g,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},Q8=(n,e,t)=>()=>{const s=new WeakMap,i=async(a,l)=>{let u=e(a);if(!Rn(u,l)){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample};u=n(l,h)}return s.set(l,u),Mo(u)?await t(a,l,u.inputs[0]):await t(a,l,u),u};return{render(a,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):i(a,l)}}},Y8=()=>typeof window>"u"?null:window,X8=(n,e)=>t=>{t.copyFromChannel=(s,i,a=0)=>{const l=n(a),u=n(i);if(u>=t.numberOfChannels)throw e();const d=t.length,h=t.getChannelData(u),f=s.length;for(let m=l<0?-l:0;m+l<d&&m<f;m+=1)s[m]=h[m+l]},t.copyToChannel=(s,i,a=0)=>{const l=n(a),u=n(i);if(u>=t.numberOfChannels)throw e();const d=t.length,h=t.getChannelData(u),f=s.length;for(let m=l<0?-l:0;m+l<d&&m<f;m+=1)h[m+l]=s[m]}},Z8=n=>e=>{e.copyFromChannel=(t=>(s,i,a=0)=>{const l=n(a),u=n(i);if(l<e.length)return t.call(e,s,u,l)})(e.copyFromChannel),e.copyToChannel=(t=>(s,i,a=0)=>{const l=n(a),u=n(i);if(l<e.length)return t.call(e,s,u,l)})(e.copyToChannel)},J8=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",i=>()=>{const a=i.call(e);return a===s?null:a},i=>a=>i.call(e,a===null?s:a))},eB=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const i=t.createBufferSource();e(s,()=>{const u=s.numberOfInputs;for(let d=0;d<u;d+=1)i.connect(s,0,d)},()=>i.disconnect(s))},Yk=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Xk=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},_c=(n,e,t,s)=>{let i=n;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:a,set:l}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,{get:t(a),set:s(l)})},tB=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),nB=n=>({...n,channelCount:n.numberOfOutputs}),sB=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Zk=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Zk(n,e,t+1e-7)}},rB=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},iB=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},aB=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Mx=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Jk=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Rx=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},oB=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},lB=n=>{n.start=(e=>(t=0,s=0,i)=>{const a=n.buffer,l=a===null?s:Math.min(a.duration,s);a!==null&&l>a.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,l,i)})(n.start)},eT=(n,e)=>{const t=e.createGain();n.connect(t);const s=(i=>()=>{i.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ro(n,t),n.stop=(i=>{let a=!1;return(l=0)=>{if(a)try{i.call(n,l)}catch{t.gain.setValueAtTime(0,l)}else i.call(n,l),a=!0}})(n.stop)},Oo=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},cB=A6(ba),uB=I6(ba),dB=HV(Yh),tT=new WeakMap,hB=dL(tT),Js=_V(new Map,new WeakMap),yr=Y8(),nT=zL(Js,wr),Ox=uL(Ln),wn=O8(Ln,Ox,ma),pB=B6(nT,Pt,wn),jt=fL(Qh),$r=f8(yr),St=EL($r),sT=new WeakMap,rT=sL(Oo),Cc=GL(yr),Ix=kL(Cc),Fx=TL(yr),iT=AL(yr),Zl=HL(yr),Kt=dV(P6(Mk),O6(cB,uB,eh,dB,th,Ln,hB,yc,Pt,ba,Lr,ma,Ed),Js,SL(ly,th,Ln,Pt,Yl,Lr),wr,Xh,zn,$V(eh,ly,Ln,Pt,Yl,jt,Lr,St),YV(sT,Ln,Hs),rT,jt,Ix,Fx,iT,St,Zl),fB=L6(Kt,pB,wr,nT,jt,St),Dx=new WeakSet,z1=UL(yr),aT=FV(new Uint32Array(1)),Vx=X8(aT,wr),Lx=Z8(aT),oT=U6(Dx,Js,zn,z1,$r,$8(z1),Vx,Lx),Zh=F6(Zn),lT=I8(Ox,vc,ma),Sr=PV(lT),Io=qL(Zh,Js,rB,iB,aB,Mx,Jk,Rx,lB,J8(_c),eT),_r=R8(hL(vc),lT),mB=G6(Sr,Io,Pt,_r,wn),er=hV(E6(Rk),sT,Nx,pV,_6,C6,j6,N6,k6,iy,Pk,Cc,Zk),gB=q6(Kt,mB,er,fn,Io,jt,St,Oo),yB=eV(Kt,tV,wr,fn,WL(Zn,_c),jt,St,wn),xB=SV(Sr,Hk,Pt,_r,wn),wa=V8(tT),vB=wV(Kt,er,xB,Xh,Hk,jt,St,wa),Vi=LL(ba,Fx),bB=eB(fn,Vi),Li=e8(Cc,bB),wB=NV(Li,Pt,wn),SB=jV(Kt,wB,Li,jt,St),_B=AV(wc,Pt,wn),CB=TV(Kt,_B,wc,jt,St,nB),jB=s8(Zh,Io,Zn,Vi),Fo=n8(Zh,Js,jB,Mx,Rx),NB=IV(Sr,Fo,Pt,_r,wn),kB=OV(Kt,er,NB,Fo,jt,St,Oo),cT=r8(zn,_c),TB=LV(cT,Pt,wn),AB=VV(Kt,TB,cT,jt,St,wa),PB=WV(Sr,Kk,Pt,_r,wn),EB=GV(Kt,er,PB,Kk,jt,St,wa),uT=i8(zn),MB=eL(Sr,uT,Pt,_r,wn),RB=JV(Kt,er,MB,uT,zn,jt,St,wa),OB=lL(Sr,Zn,Pt,_r,wn),IB=oL(Kt,er,OB,Zn,jt,St),FB=c8(Xh,fn,Sc,zn),Jh=F8(Js,Zn,Sc,G8(Zn,$r)),DB=wL(Io,Pt,$r,wn,Jh),VB=a8(FB),LB=vL(Kt,VB,DB,jt,St,wa),BB=nV(er,Li,Fo,Sc,zn,Yk,St,_c),dT=new WeakMap,zB=VL(yB,BB,rT,St,dT,Oo),hT=m8(Zh,Js,Mx,Jk,Rx,eT),UB=k8(Sr,hT,Pt,_r,wn),$B=N8(Kt,er,hT,UB,jt,St,Oo),pT=MV(Io),qB=S8(pT,fn,Zn,Xk,Vi),ep=w8(pT,fn,qB,Xk,Vi,Cc,_c),GB=y8(eh,fn,Li,Zn,Sc,ep,zn,th,Yk,Vi),fT=g8(GB),WB=P8(Sr,Li,Fo,Zn,fT,Pt,$r,_r,wn,Jh),HB=A8(Kt,er,fT,WB,jt,St,wa),KB=x8(wr),QB=M8(KB,jt,new WeakSet,sB),YB=b8(Li,wc,Zn,ep,zn,Vi),mT=v8(YB,zn),XB=U8(Sr,mT,Pt,_r,wn),ZB=z8(Kt,er,mT,XB,jt,St),JB=Q8(ep,Pt,wn),ez=K8(Kt,fn,ep,JB,jt,St,wa),gT=ML(yr),Bx=rL(yr),yT=new WeakMap,tz=mL(yT,$r),nz=gT?R6(Js,zn,nL(yr),Bx,iL(T6),jt,tz,St,Zl,new WeakMap,new WeakMap,q8(Zl,$r),yr):void 0,sz=PL(Ix,St),rz=UV(Dx,Js,zV,tL,new WeakSet,jt,sz,Zd,Xl,Vx,Lx),xT=vV(nz,fB,oT,gB,vB,SB,CB,kB,AB,rz,EB,RB,IB,LB,zB,$B,HB,QB,ZB,ez),iz=RL(Kt,u8,jt,St),az=IL(Kt,d8,jt,St),oz=FL(Kt,h8,jt,St),lz=p8(fn,St),cz=DL(Kt,lz,jt),uz=J6(xT,fn,zn,W8,iz,az,oz,cz,Cc),zx=gL(dT),dz=D6(zx),vT=EV(wr),hz=KV(zx),bT=XV(wr),wT=new WeakMap,pz=cL(wT,Hs),fz=JL(vT,wr,fn,Li,wc,Fo,Zn,Sc,zn,bT,Bx,pz,Vi),mz=QL(fn,fz,Zn,zn,Vi),gz=xV(Sr,vT,Io,Li,wc,Fo,Zn,hz,bT,Bx,Pt,Zl,$r,_r,wn,Jh),yz=pL(yT),xz=D8(wT),U1=gT?mV(dz,Kt,er,gz,mz,Ln,yz,jt,St,Zl,tB,xz,oB,Oo):void 0,vz=BV(zn,$r),bz=L8(Dx,Js,Ox,zx,Jh,Zd,Vx,Lx),wz=C8(xT,Js,fn,vz,bz),Sz=_L(Qh,Ix),_z=CL(jx,Fx),Cz=jL(Nx,iT),jz=NL(Qh,St);function ds(n){return n===void 0}function st(n){return n!==void 0}function Nz(n){return typeof n=="function"}function xr(n){return typeof n=="number"}function Ci(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function ST(n){return typeof n=="boolean"}function Yn(n){return Array.isArray(n)}function vr(n){return typeof n=="string"}function id(n){return vr(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Ze(n,e){if(!n)throw new Error(e)}function bs(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function _T(n){!n.isOffline&&n.state!=="running"&&Ux('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let CT=!1,$1=!1;function q1(n){CT=n}function kz(n){ds(n)&&CT&&!$1&&($1=!0,Ux("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let jT=console;function Tz(...n){jT.log(...n)}function Ux(...n){jT.warn(...n)}function Az(n){return new uz(n)}function Pz(n,e,t){return new wz(n,e,t)}const as=typeof self=="object"?self:null,Ez=as&&(as.hasOwnProperty("AudioContext")||as.hasOwnProperty("webkitAudioContext"));function Mz(n,e,t){return Ze(st(U1),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof as?.BaseAudioContext?as?.AudioWorkletNode:U1)(n,e,t)}class Rz{constructor(e,t,s,i){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ga(n){return Cz(n)}function ji(n){return _z(n)}function Md(n){return jz(n)}function no(n){return Sz(n)}function Oz(n){return n instanceof oT}function Iz(n,e){return n==="value"||ga(e)||ji(e)||Oz(e)}function ia(n,...e){if(!e.length)return n;const t=e.shift();if(Ci(n)&&Ci(t))for(const s in t)Iz(s,t[s])?n[s]=t[s]:Ci(t[s])?(n[s]||Object.assign(n,{[s]:{}}),ia(n[s],t[s])):Object.assign(n,{[s]:t[s]});return ia(n,...e)}function Fz(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Be(n,e,t=[],s){const i={},a=Array.from(e);if(Ci(a[0])&&s&&!Reflect.has(a[0],s)&&(Object.keys(a[0]).some(u=>Reflect.has(n,u))||(ia(i,{[s]:a[0]}),t.splice(t.indexOf(s),1),a.shift())),a.length===1&&Ci(a[0]))ia(i,a[0]);else for(let l=0;l<t.length;l++)st(a[l])&&(i[t[l]]=a[l]);return ia(n,i)}function Dz(n){return n.constructor.getDefaults()}function qs(n,e){return ds(n)?e:n}function xo(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class qr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||as&&this.toString()===as.TONE_DEBUG_CLASS)&&Tz(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}qr.version=Ak;const $x=1e-6;function vo(n,e){return n>e+$x}function py(n,e){return vo(n,e)||Ds(n,e)}function ih(n,e){return n+$x<e}function Ds(n,e){return Math.abs(n-e)<$x}function Vz(n,e,t){return Math.max(Math.min(n,t),e)}class Ss extends qr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Be(Ss.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ze(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ze(py(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Ds(this._timeline[t].time,e)){for(let s=t;s>=0&&Ds(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&py(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const i=this._timeline.length;let a=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;s<a;){let l=Math.floor(s+(a-s)/2);const u=this._timeline[l],d=this._timeline[l+1];if(Ds(u[t],e)){for(let h=l;h<this._timeline.length;h++){const f=this._timeline[h];if(Ds(f[t],e))l=h;else break}return l}else{if(ih(u[t],e)&&vo(d[t],e))return l;vo(u[t],e)?a=l:s=l+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let i=this._search(e),a=this._search(t);return i!==-1&&a!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[a].time===t&&(a-=1),this._iterate(s,i,a)):i===-1&&this._iterate(s,0,a),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Ds(this._timeline[s].time,e)){let i=s;for(let a=s;a>=0&&Ds(this._timeline[a].time,e);a--)i=a;this._iterate(a=>{t(a)},i,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const NT=[];function tp(n){NT.push(n)}function Lz(n){NT.forEach(e=>e(n))}const kT=[];function np(n){kT.push(n)}function Bz(n){kT.forEach(e=>e(n))}class jc extends qr{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(i=>{ds(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(t)}),this}once(e,t){const s=(...i)=>{t(...i),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(i=>{if(ds(this._events)&&(this._events={}),this._events.hasOwnProperty(i))if(ds(t))this._events[i]=[];else{const a=this._events[i];for(let l=a.length-1;l>=0;l--)a[l]===t&&a.splice(l,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let i=0,a=s.length;i<a;i++)s[i].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(jc.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class TT extends jc{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Nc extends TT{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ss,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Be(Nc.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=Az({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new Rz(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Lz(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ze(no(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ze(no(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ze(no(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ze(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ze(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ze(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ze(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return Mz(this.rawContext,e,t)}addAudioWorkletModule(e){return tn(this,void 0,void 0,function*(){Ze(st(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return tn(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return no(this._context)?this._context.resume():Promise.resolve()}close(){return tn(this,void 0,void 0,function*(){no(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Bz(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let a=0;a<s.length;a++)s[a]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,i=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),i()},id:s,time:a+t})};return i(),s}}class zz extends TT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return tn(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function It(n,e){Yn(e)?e.forEach(t=>It(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function qx(n,e){Yn(e)?e.forEach(t=>qx(n,t)):Object.defineProperty(n,e,{writable:!0})}const mt=()=>{};class bt extends qr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=mt;const e=Be(bt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,vr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:mt,onload:mt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:os().sampleRate}set(e){return e instanceof bt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return tn(this,void 0,void 0,function*(){const t=bt.load(e).then(s=>{this.set(s),this.onload(this)});bt.downloads.push(t);try{yield t}finally{const s=bt.downloads.indexOf(t);bt.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Yn(e)&&e[0].length>0,s=t?e.length:1,i=t?e[0].length:e.length,a=os(),l=a.createBuffer(s,i,a.sampleRate),u=!t&&s===1?[e]:e;for(let d=0;d<s;d++)l.copyToChannel(u[d],d);return this._buffer=l,this}toMono(e){if(xr(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let i=0;i<s;i++){const a=this.toArray(i);for(let l=0;l<a.length;l++)t[l]+=a[l]}t=t.map(i=>i/s),this.fromArray(t)}return this}toArray(e){if(xr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ze(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),i=Math.floor(t*this.sampleRate);Ze(s<i,"The start time must be less than the end time");const a=i-s,l=os().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let u=0;u<this.numberOfChannels;u++)l.copyToChannel(this.getChannelData(u).subarray(s,i),u);return new bt(l)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new bt().fromArray(e)}static fromUrl(e){return tn(this,void 0,void 0,function*(){return yield new bt().load(e)})}static load(e){return tn(this,void 0,void 0,function*(){const t=bt.baseUrl===""||bt.baseUrl.endsWith("/")?bt.baseUrl:bt.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield os().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return tn(this,void 0,void 0,function*(){for(yield Promise.resolve();bt.downloads.length;)yield bt.downloads[0]})}}bt.baseUrl="";bt.downloads=[];class Gx extends Nc{constructor(){super({clockSource:"offline",context:Md(arguments[0])?arguments[0]:Pz(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Md(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Md(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return tn(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(){return tn(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new bt(t)})}close(){return Promise.resolve()}}const AT=new zz;let sa=AT;function os(){return sa===AT&&Ez&&Uz(new Nc),sa}function Uz(n,e=!1){e&&sa.dispose(),no(n)?sa=new Nc(n):Md(n)?sa=new Gx(n):sa=n}function sp(){return sa.resume()}if(as&&!as.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Ak} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function $z(n){return Math.pow(10,n/20)}function qz(n){return 20*(Math.log(n)/Math.LN10)}function Wx(n){return Math.pow(2,n/12)}let rp=440;function Gz(){return rp}function Wz(n){rp=n}function fy(n){return Math.round(PT(n))}function PT(n){return 69+12*Math.log2(n/rp)}function Hz(n){return rp*Math.pow(2,(n-69)/12)}class Hx extends qr{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),i=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/s)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(i+=this._beatsToUnits(parseFloat(s)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Hx&&this.fromType(this._val),ds(this._val))return this._noArg();if(vr(this._val)&&ds(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Ci(this._val)){let e=0;for(const t in this._val)if(st(this._val[t])){const s=this._val[t],i=new this.constructor(this.context,t).valueOf()*s;e+=i}return e}if(st(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return vr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Us extends Hx{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Us(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),u=Math.round(i/s)*s-i;return i+u*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let a=1;a<9;a++){const l=Math.pow(2,a);t.push(l+"n."),t.push(l+"n"),t.push(l+"t")}t.push("0");let s=t[0],i=new Us(this.context,t[0]).toSeconds();return t.forEach(a=>{const l=new Us(this.context,a).toSeconds();Math.abs(l-e)<Math.abs(i-e)&&(s=a,i=l)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let i=t%1*4;t=Math.floor(t)%this._getTimeSignature();const a=i.toString();return a.length>3&&(i=parseFloat(parseFloat(a).toFixed(3))),[s,t,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return fy(this.toFrequency())}_now(){return this.context.now()}}class ls extends Us{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Gz()}static set A4(e){Wz(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ls.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const i=Kz[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?i:ls.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(i*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(i*=this._beatsToUnits(parseFloat(s)/4)),i}}})}transpose(e){return new ls(this.context,this.valueOf()*Wx(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return fy(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/ls.A4);let s=Math.round(12*t)+57;const i=Math.floor(s/12);return i<0&&(s+=-12*i),Qz[s%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Hz(e)}static ftom(e){return fy(e)}}const Kz={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Qz=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Yz(n,e){return new ls(os(),n,e)}class ho extends Us{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Pn extends qr{constructor(){super();const e=Be(Pn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:os()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return kz(e),new Us(this.context,e).toSeconds()}toFrequency(e){return new ls(this.context,e).toFrequency()}toTicks(e){return new ho(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{ds(e[s])&&delete t[s]}),t}get(){const e=Dz(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];st(s)&&st(s.value)&&st(s.setValueAtTime)?e[t]=s.value:s instanceof Pn?e[t]=s._getPartialProperties(e[t]):Yn(s)||xr(s)||vr(s)||ST(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&st(this[t])&&(this[t]&&st(this[t].value)&&st(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Pn?this[t].set(e[t]):this[t]=e[t])}),this}}class kc extends Ss{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return bs(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let i=s;i>=0;i--){const a=this._timeline[i];if(a.state===e)return a}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let i=s;i<this._timeline.length;i++){const a=this._timeline[i];if(a.state===e)return a}}}class ft extends Pn{constructor(){const e=Be(ft.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ze(st(e.param)&&(ga(e.param)||e.param instanceof ft),"param must be an AudioParam");!ga(e.param);)e.param=e.param._param;this._swappable=st(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ss(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,st(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Pn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return st(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return st(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return st(this.maxValue)&&st(this.minValue)&&bs(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?$z(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?qz(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),i=this._fromType(e);return Ze(isFinite(i)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),i=this._events.get(t);let a=this._initialValue;if(i===null)a=this._initialValue;else if(i.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const l=this._events.getBefore(i.time);let u;l===null?u=this._initialValue:u=l.value,i.type==="setTargetAtTime"&&(a=this._exponentialApproach(i.time,u,i.value,i.constant,t))}else if(s===null)a=i.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let l=i.value;if(i.type==="setTargetAtTime"){const u=this._events.getBefore(i.time);u===null?l=this._initialValue:l=u.value}s.type==="linearRampToValueAtTime"?a=this._linearInterpolate(i.time,l,s.time,s.value,t):a=this._exponentialInterpolate(i.time,l,s.time,s.value,t)}else a=i.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),i=this.toSeconds(t);return Ze(isFinite(s)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:i,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(s,i),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Ds(s,0)?this._minOutput:s,this._assertRange(s);const i=this.toSeconds(t);return Ze(isFinite(s)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(s,i),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const i=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const i=this._fromType(e);Ze(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(t);return this._assertRange(i),Ze(isFinite(i)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:a,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,a,s),this._param.setTargetAtTime(i,a,s),this}setValueCurveAtTime(e,t,s,i=1){s=this.toSeconds(s),t=this.toSeconds(t);const a=this._fromType(e[0])*i;this.setValueAtTime(this._toType(a),t);const l=s/(e.length-1);for(let u=1;u<e.length;u++){const d=this._fromType(e[u])*i;this.linearRampToValueAtTime(this._toType(d),t+u*l)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ze(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Ze(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const i=this._events.get(t),a=this._events.getAfter(t);return i&&Ds(i.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const i=this._events.getAfter(s.time),a=i?i.time:t+2,l=(a-t)/10;for(let u=t;u<a;u+=l)e.linearRampToValueAtTime(this.getValueAtTime(u),u)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){Ze(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,i,a){return s+(t-s)*Math.exp(-(a-e)/i)}_linearInterpolate(e,t,s,i,a){return t+(i-t)*((a-e)/(s-e))}_exponentialInterpolate(e,t,s,i,a){return t*Math.pow(i/t,(a-e)/(s-e))}}class Je extends Pn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return st(this.input)?ga(this.input)||this.input instanceof ft?1:this.input.numberOfInputs:0}get numberOfOutputs(){return st(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return st(e)&&(e instanceof Je||ji(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ze(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Sa(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ux("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return ET(this,e,t,s),this}chain(...e){return Jl(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),st(this.input)&&(this.input instanceof Je?this.input.dispose():ji(this.input)&&this.input.disconnect()),st(this.output)&&(this.output instanceof Je?this.output.dispose():ji(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Jl(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof Je?t.connect(s):ji(t)&&Sa(t,s),s),e)}function Sa(n,e,t=0,s=0){for(Ze(st(n),"Cannot connect from undefined node"),Ze(st(e),"Cannot connect to undefined node"),(e instanceof Je||ji(e))&&Ze(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ze(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Je||e instanceof ft;)st(e.input)&&(e=e.input);for(;n instanceof Je;)st(n.output)&&(n=n.output);ga(e)?n.connect(e,t):n.connect(e,t,s)}function ET(n,e,t=0,s=0){if(st(e))for(;e instanceof Je;)e=e.input;for(;!ji(n);)st(n.output)&&(n=n.output);ga(e)?n.disconnect(e,t):ji(e)?n.disconnect(e,t,s):n.disconnect()}class $t extends Je{constructor(){const e=Be($t.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ft({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),It(this,"gain")}static getDefaults(){return Object.assign(Je.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class bo extends Je{constructor(e){super(e),this.onended=mt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new $t({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Je.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:mt})}_startGain(e,t=1){Ze(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ze(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==mt&&(this.onended(this),this.onended=mt,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ze(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=mt,this}}class Kx extends bo{constructor(){const e=Be(Kx.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Sa(this._source,this._gainNode),this.offset=new ft({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(bo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class wt extends Je{constructor(){const e=Be(wt.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Kx({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Je.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return ip(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,i){return this._param.setValueCurveAtTime(e,t,s,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ip(n,e,t,s){(e instanceof ft||ga(e)||e instanceof wt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof wt&&(e.overridden=!0)),Sa(n,e,t,s)}class Qx extends ft{constructor(){const e=Be(Qx.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ss(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const i=this._fromType(e),a=this._events.get(t),l=Math.round(Math.max(1/s,1));for(let u=0;u<=l;u++){const d=s*u+t,h=this._exponentialApproach(a.time,a.value,i,s,d);this.linearRampToValueAtTime(this._toType(h),d)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const i=this._events.get(s),a=this._events.previousEvent(i),l=this._getTicksUntilEvent(a,s);return i.ticks=Math.max(l,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const i=this._events.get(s),a=this._events.previousEvent(i),l=this._getTicksUntilEvent(a,s);return i.ticks=Math.max(l,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),i=this._events.get(t),a=Math.round(Math.max((t-i.time)*10,1)),l=(t-i.time)/a;for(let u=0;u<=a;u++){const d=l*u+i.time,h=this._exponentialInterpolate(i.time,i.value,t,s,d);this.linearRampToValueAtTime(this._toType(h),d)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ds(e.ticks)){const l=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(l,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(t));const a=this._events.get(t);return a&&a.time===t&&a.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+i)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const i=this._fromType(this.getValueAtTime(t.time)),l=(this._fromType(this.getValueAtTime(s.time))-i)/(s.time-t.time),u=Math.sqrt(Math.pow(i,2)-2*l*(t.ticks-e)),d=(-i+u)/l,h=(-i-u)/l;return(d>0?d:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),i=this.toSeconds(e),a=this.getTicksAtTime(s);return this.getTicksAtTime(s+i)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Yx extends wt{constructor(){const e=Be(Yx.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Qx({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(wt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Xx extends Pn{constructor(){const e=Be(Xx.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new kc,this._tickOffset=new Ss,this._ticksAtTime=new Ss,this._secondsAtTime=new Ss,this.frequency=new Yx({context:this.context,units:e.units,value:e.frequency}),It(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Pn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),st(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),i=this._ticksAtTime.get(t),a={state:"paused",time:t};this._state.add(a);let l=i||s,u=i?i.ticks:0,d=null;return this._state.forEachBetween(l.time,t+this.sampleTime,h=>{let f=l.time;const m=this._tickOffset.get(h.time);m&&m.time>=l.time&&(u=m.ticks,f=m.time),l.state==="started"&&h.state!=="started"&&(u+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(f),h.time!==a.time&&(d={state:h.state,time:h.time,ticks:u})),l=h}),this._state.remove(a),d&&this._ticksAtTime.add(d),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const i=this._secondsAtTime.get(e);let a=i||t,l=i?i.seconds:0,u=null;return this._state.forEachBetween(a.time,e+this.sampleTime,d=>{let h=a.time;const f=this._tickOffset.get(d.time);f&&f.time>=a.time&&(l=f.seconds,h=f.time),a.state==="started"&&d.state!=="started"&&(l+=d.time-h,d.time!==s.time&&(u={state:d.state,time:d.time,seconds:l})),a=d}),this._state.remove(s),u&&this._secondsAtTime.add(u),l}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),i=this._state.get(t),a=Math.max(s.time,i.time),l=this.frequency.getTicksAtTime(a)+e-s.ticks;return this.frequency.getTimeOfTick(l)}forEachTickBetween(e,t,s){let i=this._state.get(e);this._state.forEachBetween(e,t,l=>{i&&i.state==="started"&&l.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),l.time-this.sampleTime,s),i=l});let a=null;if(i&&i.state==="started"){const l=Math.max(i.time,e),u=this.frequency.getTicksAtTime(l),d=this.frequency.getTicksAtTime(i.time),h=u-d;let f=Math.ceil(h)-h;f=Ds(f,1)?0:f;let m=this.frequency.getTimeOfTick(u+f);for(;m<t;){try{s(m,Math.round(this.getTicksAtTime(m)))}catch(g){a=g;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Tc extends Pn{constructor(){const e=Be(Tc.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=mt,this._lastUpdate=0,this._state=new kc("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Xx({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,It(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Pn.getDefaults(),{callback:mt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){_T(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const i=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,i);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,i)=>{this.callback(s,i)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}jc.mixin(Tc);class Do extends Je{constructor(){const e=Be(Do.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new $t({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,It(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Zx extends Je{constructor(){const e=Be(Zx.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Do({context:this.context}),this.output=new $t({context:this.context}),this.volume=this.input.volume,Jl(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Jl(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}tp(n=>{n.destination=new Zx({context:n})});np(n=>{n.destination.dispose()});class Xz extends Je{constructor(){super(...arguments),this.name="Listener",this.positionX=new ft({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ft({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ft({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ft({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ft({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ft({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ft({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ft({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ft({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Je.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}tp(n=>{n.listener=new Xz({context:n})});np(n=>{n.listener.dispose()});class Jx extends qr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Be(Jx.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:mt,onload:mt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ze(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=mt,i=mt){return vr(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new bt(this.baseUrl+t,s,i))):this._buffers.set(e.toString(),new bt(t,s,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Bt extends ho{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Zz extends Pn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ss,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}tp(n=>{n.draw=new Zz({context:n})});np(n=>{n.draw.dispose()});class Jz extends qr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ze(st(e.time),"Events must have a time property"),Ze(st(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new eU(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,i=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,i=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,i=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,i=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,i=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),t!==null?s?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),t!==null?s?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let i=1;i<t.length;i++)t[i].low>s.low&&(s=t[i]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(i=>{i.event&&t(i.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(i=>{i.event&&t(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class eU{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class tU extends qr{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ss({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ur extends Je{constructor(){super(Be(Ur.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return ip(this,e,t,s),this}}class Ac extends Ur{constructor(){const e=Be(Ac.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Yn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Nz(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(wt.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let i=0,a=t;i<a;i++){const l=i/(a-1)*2-1;s[i]=e(l,i)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Ze(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ev extends Ur{constructor(){const e=Be(ev.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Ac({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ur.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Mi{constructor(e,t){this.id=Mi._eventId++,this._remainderTime=0;const s=Object.assign(Mi.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:mt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Mi._eventId=0;class tv extends Mi{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(tv.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Mi.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return ih(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Bt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){ih(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Bt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);vo(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ap extends Pn{constructor(){const e=Be(ap.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new tU(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ss,this._repeatedEvents=new Jz,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Tc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),It(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Pn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(s*Math.PI)*this._swingAmount;e+=new Bt(this.context,this._swingTicks*2/3).toSeconds()*i}q1(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),q1(!1)}schedule(e,t){const s=new Mi(this,{callback:e,time:new ho(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,i=1/0){const a=new tv(this,{callback:e,duration:new Us(this.context,i).toTicks(),interval:new Us(this.context,t).toTicks(),time:new ho(this.context,s).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,t){const s=new Mi(this,{callback:e,once:!0,time:new ho(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Bt(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return st(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Yn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Us(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Us(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Bt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Bt(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),i=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),a=t+i;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),i=e-s%e;return this._clock.nextTickTime(i,t)}}syncSignal(e,t){const s=this.now();let i=this.bpm,a=1/(60/i.getValueAtTime(s)/this.PPQ),l=[];if(e.units==="time"){const d=.015625/a,h=new $t(d),f=new ev(-1),m=new $t(d);i.chain(h,f,m),i=m,a=1/a,l=[h,f,m]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/a:t=0);const u=new $t(t);return i.connect(u),u.connect(e._param),l.push(u),this._syncedSignals.push({initial:e.value,nodes:l,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(i=>i.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),qx(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}jc.mixin(ap);tp(n=>{n.transport=new ap({context:n})});np(n=>{n.transport.dispose()});class gn extends Je{constructor(e){super(e),this.input=void 0,this._state=new kc("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=mt,this._syncedStop=mt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Do({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,It(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Je.getDefaults(),{mute:!1,onstop:mt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let i=ds(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")Ze(vo(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,s);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const a=this._state.get(i);a&&(a.offset=this.toSeconds(qs(t,0)),a.duration=s?this.toSeconds(s):void 0);const l=this.context.transport.schedule(u=>{this._start(u,t,s)},i);this._scheduled.push(l),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else _T(this.context),this._start(i,t,s);return this}stop(e){let t=ds(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||st(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(vo(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const i=t-this.toSeconds(s.time);let a;s.duration&&(a=this.toSeconds(s.duration)-i),this._start(e,this.toSeconds(s.offset)+i,a)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=mt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vo extends bo{constructor(){const e=Be(Vo.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Sa(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ft({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new bt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(bo.getDefaults(),{url:new bt,loop:!1,loopEnd:0,loopStart:0,onload:mt,onerror:mt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,i=1){Ze(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,i),this.loop?t=qs(t,this.loopStart):t=qs(t,0);let l=Math.max(this.toSeconds(t),0);if(this.loop){const u=this.toSeconds(this.loopEnd)||this.buffer.duration,d=this.toSeconds(this.loopStart),h=u-d;py(l,u)&&(l=(l-d)%h+d),Ds(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ih(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,l)),st(s)){let u=this.toSeconds(s);u=Math.max(u,0),this.stop(a+u)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ah extends gn{constructor(){const e=Be(ah.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ze(e in G1,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=G1[this._type];this._source=new Vo({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Za=44100*5,Am=2,Ir={brown:null,pink:null,white:null},G1={get brown(){if(!Ir.brown){const n=[];for(let e=0;e<Am;e++){const t=new Float32Array(Za);n[e]=t;let s=0;for(let i=0;i<Za;i++){const a=Math.random()*2-1;t[i]=(s+.02*a)/1.02,s=t[i],t[i]*=3.5}}Ir.brown=new bt().fromArray(n)}return Ir.brown},get pink(){if(!Ir.pink){const n=[];for(let e=0;e<Am;e++){const t=new Float32Array(Za);n[e]=t;let s,i,a,l,u,d,h;s=i=a=l=u=d=h=0;for(let f=0;f<Za;f++){const m=Math.random()*2-1;s=.99886*s+m*.0555179,i=.99332*i+m*.0750759,a=.969*a+m*.153852,l=.8665*l+m*.3104856,u=.55*u+m*.5329522,d=-.7616*d-m*.016898,t[f]=s+i+a+l+u+d+h+m*.5362,t[f]*=.11,h=m*.115926}}Ir.pink=new bt().fromArray(n)}return Ir.pink},get white(){if(!Ir.white){const n=[];for(let e=0;e<Am;e++){const t=new Float32Array(Za);n[e]=t;for(let s=0;s<Za;s++)t[s]=Math.random()*2-1}Ir.white=new bt().fromArray(n)}return Ir.white}};function _a(n,e){return tn(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Gx(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class nv extends bo{constructor(){const e=Be(nv.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Sa(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ft({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ft({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),It(this,["frequency","detune"])}static getDefaults(){return Object.assign(bo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ot extends gn{constructor(){const e=Be(Ot.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new wt({context:this.context,units:"frequency",value:e.frequency}),It(this,"frequency"),this.detune=new wt({context:this.context,units:"cents",value:e.detune}),It(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new nv({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ot._periodicWaveCache.find(t=>t.phase===this._phase&&Fz(t.partials,this._partials));{const e=Ot._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(st(s)){const{partials:i,wave:a}=s;this._wave=a,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,a]=this._getRealImaginary(e,this._phase),l=this.context.createPeriodicWave(i,a);this._wave=l,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ot._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),Ot._periodicWaveCache.length>100&&Ot._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){bs(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const i=new Float32Array(e);this._partials.forEach((a,l)=>i[l]=a),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(e,t){let i=2048;const a=new Float32Array(i),l=new Float32Array(i);let u=1;if(e==="custom"){if(u=this._partials.length+1,this._partialCount=this._partials.length,i=u,this._partials.length===0)return[a,l]}else{const d=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);d?(u=parseInt(d[2],10)+1,this._partialCount=parseInt(d[2],10),e=d[1],u=Math.max(u,2),i=u):this._partialCount=0,this._partials=[]}for(let d=1;d<i;++d){const h=2/(d*Math.PI);let f;switch(e){case"sine":f=d<=u?1:0,this._partials[d-1]=f;break;case"square":f=d&1?2*h:0,this._partials[d-1]=f;break;case"sawtooth":f=h*(d&1?1:-1),this._partials[d-1]=f;break;case"triangle":d&1?f=2*(h*h)*(d-1>>1&1?-1:1):f=0,this._partials[d-1]=f;break;case"custom":f=this._partials[d-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}f!==0?(a[d]=-f*Math.sin(t*d),l[d]=f*Math.cos(t*d)):(a[d]=0,l[d]=0)}return[a,l]}_inverseFFT(e,t,s){let i=0;const a=e.length;for(let l=0;l<a;l++)i+=e[l]*Math.cos(l*s)+t[l]*Math.sin(l*s);return i}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const i=Math.PI*2,a=32;for(let l=0;l<a;l++)s=Math.max(this._inverseFFT(e,t,l/a*i),s);return Vz(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ot._periodicWaveCache=[];class MT extends Ur{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ac({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ri extends wt{constructor(){const e=Be(Ri.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new $t({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(wt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class op extends gn{constructor(){const e=Be(op.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new MT({context:this.context}),this._modulationNode=new $t({context:this.context}),this._carrier=new Ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ot({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ri({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),It(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Pc extends gn{constructor(){const e=Be(Pc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new $t({context:this.context,gain:0}),this._carrier=new Ot({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new wt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ot({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ri({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ri({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),It(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ec extends gn{constructor(){const e=Be(Ec.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new $t({context:this.context,gain:0}),this._thresh=new Ac({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new wt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),It(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class lp extends gn{constructor(){const e=Be(lp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new wt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new wt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,It(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((i,a)=>i.detune.value=t+s*a)}}get count(){return this._oscillators.length}set count(e){if(bs(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Ot({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):mt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class cp extends gn{constructor(){const e=Be(cp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ri({context:this.context,value:2}),this._pulse=new Ec({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),It(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const W1={am:op,fat:lp,fm:Pc,oscillator:Ot,pulse:Ec,pwm:cp};class oh extends gn{constructor(){const e=Be(oh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new wt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new wt({context:this.context,units:"cents",value:e.detune}),It(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ot.getDefaults(),Pc.getDefaults(),op.getDefaults(),lp.getDefaults(),Ec.getDefaults(),cp.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=W1[e],s=this.now();if(this._oscillator){const i=this._oscillator;i.stop(s),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof W1[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&xr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&xr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&vr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return tn(this,arguments,void 0,function*(e=1024){return _a(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class sv extends wt{constructor(){super(Be(sv.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new $t({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Jl(this._constantSource,this._sum)}static getDefaults(){return Object.assign(wt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class up extends Ur{constructor(){const e=Be(up.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ri({context:this.context,value:e.max-e.min}),this._add=this.output=new sv({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ur.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class rv extends Ur{constructor(){super(Be(rv.getDefaults(),arguments)),this.name="Zero",this._gain=new $t({context:this.context}),this.output=this._gain,this.input=void 0,Sa(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),ET(this.context.getConstant(0),this._gain),this}}class iv extends Je{constructor(){const e=Be(iv.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ft.prototype._fromType,this._toType=ft.prototype._toType,this._is=ft.prototype._is,this._clampValue=ft.prototype._clampValue,this._oscillator=new Ot(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new $t({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new wt({context:this.context,units:"audioRange",value:0}),this._zeros=new rv({context:this.context}),this._a2g=new MT({context:this.context}),this._scaler=this.output=new up({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),It(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Ot.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,s=this.max;this._units=e,this.min=t,this.max=s}get state(){return this._oscillator.state}connect(e,t,s){return(e instanceof ft||e instanceof wt)&&(this.convert=e.convert,this.units=e.units),ip(this,e,t,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function RT(n,e=1/0){const t=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){bs(a,n,e),t.set(this,a)}})}}function Gr(n,e=1/0){const t=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){bs(this.toSeconds(a),n,e),t.set(this,a)}})}}class dp extends gn{constructor(){const e=Be(dp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new bt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:mt,onerror:mt,playbackRate:1,reverse:!1})}load(e){return tn(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=mt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=qs(t,this._loopStart):t=qs(t,0);const i=this.toSeconds(t),a=s;s=qs(s,Math.max(this._buffer.duration-i,0));let l=this.toSeconds(s);l=l/this._playbackRate,e=this.toSeconds(e);const u=new Vo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+l),this._state.setStateAtTime("stopped",e+l,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&ds(a)?u.start(e,i):u.start(e,i,l-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const i=this.toSeconds(e);this._stop(s),this._start(s,i)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&bs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&bs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Xs([Gr(0)],dp.prototype,"fadeIn",void 0);Xs([Gr(0)],dp.prototype,"fadeOut",void 0);class av extends gn{constructor(){const e=Be(av.getDefaults(),arguments,["url","onload"]);super(e),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new bt({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new Tc({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(gn.getDefaults(),{onload:mt,onerror:mt,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,t,s){t=qs(t,0),t=this.toSeconds(t),e=this.toSeconds(e);const i=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,t/i),s&&this.stop(e+this.toSeconds(s))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){this._stop(e),this._start(e,t,s)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(t=>{t.fadeOut=0,t.stop(e)}),this.onstop(this)}_tick(e){const t=this._clock.getTicksAtTime(e),s=t*this._grainSize;if(this.log("offset",s),!this.loop&&s>this.buffer.duration){this.stop(e);return}const i=s<this._overlap?0:this._overlap,a=new Vo({context:this.context,url:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Wx(this.detune/100)}).connect(this.output);a.start(e,this._grainSize*t),a.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(a),a.onended=()=>{const l=this._activeSources.indexOf(a);l!==-1&&this._activeSources.splice(l,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){bs(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&bs(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&bs(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){const t=this.toSeconds(e);bs(t,0),this._overlap=t}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class Ks extends Je{constructor(){const e=Be(Ks.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new wt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Je.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(vr(e))return e;{let s;for(s in ad)if(ad[s][t]===e)return s;return e}}_setCurve(e,t,s){if(vr(s)&&Reflect.has(ad,s)){const i=ad[s];Ci(i)?e!=="_decayCurve"&&(this[e]=i[t]):this[e]=i}else if(Yn(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let i=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),l=this.getValueAtTime(e);if(l>0){const u=1/i;i=(1-l)/u}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,i,e);else{this._sig.cancelAndHoldAtTime(e);let u=this._attackCurve;for(let d=1;d<u.length;d++)if(u[d-1]<=l&&l<=u[d]){u=this._attackCurve.slice(d),u[0]=l;break}this._sig.setValueCurveAtTime(u,e,i,t)}if(a&&this.sustain<1){const u=t*this.sustain,d=e+i;this.log("decay",d),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(u,a+d):this._sig.exponentialApproachValueAtTime(u,d,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Ze(Yn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return ip(this,e,t,s),this}asArray(){return tn(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Gx(1,t,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=i+this.toSeconds(this.release),l=a*.1,u=a+l,d=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/u,decay:t*this.toSeconds(this.decay)/u,release:t*this.toSeconds(this.release)/u,context:s}));return d._sig.toDestination(),d.triggerAttackRelease(t*(i+l)/u,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Xs([Gr(0)],Ks.prototype,"attack",void 0);Xs([Gr(0)],Ks.prototype,"decay",void 0);Xs([RT(0,1)],Ks.prototype,"sustain",void 0);Xs([Gr(0)],Ks.prototype,"release",void 0);const ad=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[],a=6.4;for(e=0;e<127;e++){t=e/127;const g=Math.sin(t*(Math.PI*2)*a-Math.PI/2)+1;i[e]=g/10+t*.83}i[127]=1;const l=[],u=5;for(e=0;e<128;e++)l[e]=Math.ceil(e/127*u)/u;const d=[];for(e=0;e<128;e++)t=e/127,d[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/127;const g=Math.pow(t,3)*4+.2,b=Math.cos(g*Math.PI*2*t);h[e]=Math.abs(b*(1-t))}function f(g){const b=new Array(g.length);for(let S=0;S<g.length;S++)b[S]=1-g[S];return b}function m(g){return g.slice(0).reverse()}return{bounce:{In:f(h),Out:h},cosine:{In:s,Out:m(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:f(i)},sine:{In:d,Out:f(d)},step:{In:l,Out:f(l)}}})();class Oi extends Je{constructor(){const e=Be(Oi.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Do({context:this.context,volume:e.volume}),this.volume=this._volume.volume,It(this,"volume")}static getDefaults(){return Object.assign(Je.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...i)=>{const a=i[t],l=this.context.transport.schedule(u=>{i[t]=u,s.apply(this,i)},a);this._scheduledEvents.push(l)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,i){const a=this.toSeconds(s),l=this.toSeconds(t);return this.triggerAttack(e,a,i),this.triggerRelease(a+l),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ii extends Oi{constructor(){const e=Be(Ii.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Oi.getDefaults(),{detune:0,onsilence:mt,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,s),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),i=e instanceof ls?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,a,s)}else this.frequency.setValueAtTime(i,s);return this}}Xs([Gr(0)],Ii.prototype,"portamento",void 0);class Mc extends Ks{constructor(){super(Be(Mc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new $t({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ec extends Ii{constructor(){const e=Be(ec.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new oh(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Mc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),It(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ii.getDefaults(),{envelope:Object.assign(xo(Ks.getDefaults(),Object.keys(Je.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(xo(oh.getDefaults(),[...Object.keys(gn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class lh extends Je{constructor(){const e=Be(lh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ft({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new ft({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new ft({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new ft({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Je.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Ze(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let l=0;l<e;l++){const d=Math.pow(l/e,2)*19980+20;t[l]=d}const s=new Float32Array(e),i=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(t,s,i),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class hp extends Je{constructor(){const e=Be(hp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new $t({context:this.context}),this.output=new $t({context:this.context}),this._filters=[],this._filters=[],this.Q=new wt({context:this.context,units:"positive",value:e.Q}),this.frequency=new wt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new wt({context:this.context,units:"cents",value:e.detune}),this.gain=new wt({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,It(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Je.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Ze(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=xr(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let i=s.indexOf(t);Ze(i!==-1,`rolloff can only be ${s.join(", ")}`),i+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(i);for(let a=0;a<i;a++){const l=new lh({context:this.context});l.type=this._type,this.frequency.connect(l.frequency),this.detune.connect(l.detune),this.Q.connect(l.Q),this.gain.connect(l.gain),this._filters[a]=l}this._internalChannels=this._filters,Jl(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new lh({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((a,l)=>s[l]*=a)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),qx(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const H1=[1,1.483,1.932,2.546,2.63,3.897];class Ls extends Ii{constructor(){const e=Be(Ls.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new wt({context:this.context,units:"cents",value:e.detune}),this.frequency=new wt({context:this.context,units:"frequency"}),this._amplitude=new $t({context:this.context,gain:0}).connect(this.output),this._highpass=new hp({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<H1.length;t++){const s=new Pc({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:t===0?()=>this.onsilence(this):mt,type:"square"});s.connect(this._highpass),this._oscillators[t]=s;const i=new Ri({context:this.context,value:H1[t]});this._freqMultipliers[t]=i,this.frequency.chain(i,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new up({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Ks({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return ia(Ii.getDefaults(),{envelope:Object.assign(xo(Ks.getDefaults(),Object.keys(Je.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,t=1){return this.envelope.triggerAttack(e,t),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class dr extends ec{constructor(){const e=Be(dr.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,It(this,["oscillator","envelope"])}static getDefaults(){return ia(Ii.getDefaults(),ec.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),i=this.toFrequency(e instanceof ls?e.toFrequency():e),a=i*this.octaves;return this.oscillator.frequency.setValueAtTime(a,s),this.oscillator.frequency.exponentialRampToValueAtTime(i,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Xs([RT(0)],dr.prototype,"octaves",void 0);Xs([Gr(0)],dr.prototype,"pitchDecay",void 0);class tc extends Oi{constructor(){const e=Be(tc.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new ah(Object.assign({context:this.context},e.noise)),this.envelope=new Mc(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Oi.getDefaults(),{envelope:Object.assign(xo(Ks.getDefaults(),Object.keys(Je.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(xo(ah.getDefaults(),Object.keys(gn.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,s),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const OT=new Set;function ov(n){OT.add(n)}function IT(n,e){const t=`registerProcessor("${n}", ${e})`;OT.add(t)}const nU=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ov(nU);const sU=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ov(sU);const rU=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ov(rU);const iU="feedback-comb-filter",aU=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;IT(iU,aU);class pp extends Oi{constructor(){const e=Be(pp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const i=parseInt(s,10);if(Ze(id(s)||xr(i)&&isFinite(i),`url key is neither a note or midi pitch: ${s}`),id(s)){const a=new ls(this.context,s).toMidi();t[a]=e.urls[s]}else xr(i)&&isFinite(i)&&(t[i]=e.urls[i])}),this._buffers=new Jx({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Oi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:mt,onerror:mt,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=PT(new ls(this.context,i).toFrequency()),l=Math.round(a),u=a-l,d=this._findClosest(l),h=l-d,f=this._buffers.get(h),m=Wx(d+u),g=new Vo({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:m}).connect(this.output);g.start(t,0,f.duration/m,s),Yn(this._activeSources.get(l))||this._activeSources.set(l,[]),this._activeSources.get(l).push(g),g.onended=()=>{if(this._activeSources&&this._activeSources.has(l)){const b=this._activeSources.get(l),S=b.indexOf(g);S!==-1&&b.splice(S,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=new ls(this.context,s).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const a=this._activeSources.get(i);t=this.toSeconds(t),a.forEach(l=>{l.stop(t)}),this._activeSources.set(i,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,i=1){const a=this.toSeconds(s);return this.triggerAttack(e,a,i),Yn(t)?(Ze(Yn(e),"notes must be an array when duration is array"),e.forEach((l,u)=>{const d=t[Math.min(u,t.length-1)];this.triggerRelease(l,a+this.toSeconds(d))})):this.triggerRelease(e,a+this.toSeconds(t)),this}add(e,t,s){if(Ze(id(e)||isFinite(e),`note must be a pitch or midi: ${e}`),id(e)){const i=new ls(this.context,e).toMidi();this._buffers.add(i,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Xs([Gr(0)],pp.prototype,"attack",void 0);Xs([Gr(0)],pp.prototype,"release",void 0);class bi extends Pn{constructor(){const e=Be(bi.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new kc("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Pn.getDefaults(),{callback:mt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,t=>{let s;if(t.state==="started"){t.id!==-1&&this.context.transport.clear(t.id);const i=t.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||xr(this._loop)&&this._loop>1){s=1/0,xr(this._loop)&&(s=this._loop*this._getLoopDuration());const a=this._state.getAfter(i);a!==null&&(s=Math.min(s,a.time-i)),s!==1/0&&(s=new Bt(this.context,s));const l=new Bt(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),l,new Bt(this.context,i),s)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Bt(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return this._state.getValueAtTime(t)==="stopped"&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if(this._state.getValueAtTime(t)==="started"){this._state.setStateAtTime("stopped",t,{id:-1});const s=this._state.getBefore(t);let i=t;s!==null&&(i=s.time),this._rescheduleEvents(i)}return this}cancel(e){e=qs(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,s=>{this.context.transport.clear(s.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(t)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;ST(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Bt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Bt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(t!==null&&t.state==="started"){const s=this._getLoopDuration();return(e-t.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ch extends bi{constructor(){const e=Be(ch.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new kc("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(t=>{Yn(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(bi.getDefaults(),{events:[]})}start(e,t){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){t=qs(t,this._loop?this._loopStart:0),this._loop?t=qs(t,this._loopStart):t=qs(t,0);const i=this.toTicks(t);this._state.add({id:-1,offset:i,state:"started",time:s}),this._forEach(a=>{this._startNote(a,s,i)})}return this}_startNote(e,t,s){t-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(t+=this._getLoopDuration()),e.start(new Bt(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new Bt(this.context,t))):e.startOffset>=s&&e.start(new Bt(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(s=>{s.stop(e)}),this}at(e,t){const s=new ho(this.context,e).toTicks(),i=new Bt(this.context,1).toSeconds(),a=this._events.values();let l=a.next();for(;!l.done;){const u=l.value;if(Math.abs(s-u.startOffset)<i)return st(t)&&(u.value=t),u;l=a.next()}return st(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(t=e,e=t.time);const s=this.toTicks(e);let i;return t instanceof bi?(i=t,i.callback=this._tick.bind(this)):i=new bi({callback:this._tick.bind(this),context:this.context,value:t}),i.startOffset=s,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(e){this._state.forEach(t=>{t.state==="started"?this._startNote(e,t.time,t.offset):e.stop(new Bt(this.context,t.time))})}remove(e,t){return Ci(e)&&e.hasOwnProperty("time")&&(t=e,e=t.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(ds(t)||st(t)&&s.value===t)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof ch?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(s=>{s[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new Bt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new Bt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class Ni extends bi{constructor(){const e=Be(Ni.getDefaults(),arguments,["callback","events","subdivision"]);super(e),this.name="Sequence",this._part=new ch({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(xo(bi.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,t){t!==null&&!this.mute&&this.callback(e,t)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,t){return this._part.start(e,t&&this._indexTime(t)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new Bt(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(t,s)=>t[s],set:(t,s,i)=>(vr(s)&&isFinite(parseInt(s,10))&&Yn(i)?t[s]=this._createSequence(i):t[s]=i,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,t,s){e.forEach((i,a)=>{const l=a*t+s;if(Yn(i))this._rescheduleSequence(i,t/i.length,l);else{const u=new Bt(this.context,l,"i").toSeconds();this._part.add(u,i)}})}_indexTime(e){return new Bt(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,e===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class lv extends Je{constructor(){const e=Be(lv.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ft({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",It(this,"pan")}static getDefaults(){return Object.assign(Je.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const oU="bit-crusher",lU=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;IT(oU,lU);class Zt extends Je{constructor(){const e=Be(Zt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new $t({context:this.context}),Zt._allSolos.has(this.context)||Zt._allSolos.set(this.context,new Set),Zt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Je.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Zt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Zt._soloed.has(this.context)||Zt._soloed.set(this.context,new Set),Zt._soloed.get(this.context).add(this)}_removeSolo(){Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).delete(this)}_isSoloed(){return Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).has(this)}_noSolos(){return!Zt._soloed.has(this.context)||Zt._soloed.has(this.context)&&Zt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Zt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Zt._allSolos=new Map;Zt._soloed=new Map;class cv extends Je{constructor(){const e=Be(cv.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new lv({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Do({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,It(this,["pan","volume"])}static getDefaults(){return Object.assign(Je.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ro extends Je{constructor(){const e=Be(ro.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Zt({solo:e.solo,context:this.context}),this._panVol=this.output=new cv({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),It(this,["pan","volume"])}static getDefaults(){return Object.assign(Je.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ro.buses.has(e)||ro.buses.set(e,new $t({context:this.context})),ro.buses.get(e)}send(e,t=0){const s=this._getBus(e),i=new $t({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(s),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ro.buses=new Map;const An=os().transport,cU=os().destination;os().destination;os().listener;os().draw;os();class uU{constructor(){this.audioContext=null,this.masterGain=null,this.activeOscillators=new Map,this.reverbConvolver=null,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{if(this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log(" Synthetic audio context created, state:",this.audioContext.state),this.audioContext.state==="suspended"){console.log(" Synthetic audio context suspended, attempting to resume...");const e=async()=>{if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume(),console.log(" Synthetic audio context resumed successfully")}catch(t){console.error(" Failed to resume synthetic audio context:",t)}document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0),document.removeEventListener("touchstart",e,!0)};document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),document.addEventListener("touchstart",e,!0);try{await this.audioContext.resume(),console.log(" Synthetic audio context resumed immediately")}catch{console.log(" Synthetic audio context needs user interaction to resume")}}this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=.3,this.masterGain.connect(this.audioContext.destination),await this.createReverb(),this.isInitialized=!0,console.log(" Synthetic audio engine initialized successfully")}catch(e){throw console.error("Failed to initialize audio:",e),e}}async createReverb(){if(!this.audioContext)return;this.reverbConvolver=this.audioContext.createConvolver();const e=this.audioContext.sampleRate*2,t=this.audioContext.createBuffer(2,e,this.audioContext.sampleRate);for(let s=0;s<2;s++){const i=t.getChannelData(s);for(let a=0;a<e;a++)i[a]=(Math.random()*2-1)*Math.pow(1-a/e,2)}this.reverbConvolver.buffer=t}addReverb(e,t){if(!this.audioContext||!this.reverbConvolver||!this.masterGain)return;const s=this.audioContext.createGain(),i=this.audioContext.createGain();s.gain.value=t,i.gain.value=1-t,e.connect(i),e.connect(this.reverbConvolver),this.reverbConvolver.connect(s),s.connect(this.masterGain),i.connect(this.masterGain)}async playNote(e,t,s=.7,i="piano",a=!0){(!this.audioContext||!this.masterGain)&&await this.initialize();try{const l=this.audioContext.currentTime;i.includes("piano")&&!i.includes("organ")?this.playPianoNote(e,t,s,l,a):i.includes("grand")?this.playGrandPianoNote(e,t,s,l):i.includes("organ")?this.playOrganNote(e,t,s,l):i.includes("guitar")?this.playGuitarNote(e,t,s,l,a):i.includes("violin")?this.playViolinNote(e,t,s,l):i.includes("ukulele")?this.playUkuleleNote(e,t,s,l):i.includes("flute")&&!i.includes("pan")?this.playFluteNote(e,t,s,l):i.includes("panflute")?this.playPanFluteNote(e,t,s,l):i.includes("recorder")?this.playRecorderNote(e,t,s,l):this.playGenericNote(e,t,s,l)}catch(l){console.error("Failed to play note:",l)}}playPianoNote(e,t,s,i,a=!0){if(!this.audioContext||!this.masterGain)return;const l=[],u=this.audioContext.createGain(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createOscillator(),g=this.audioContext.createOscillator(),b=this.audioContext.createBufferSource(),S=this.audioContext.createOscillator(),x=this.audioContext.createOscillator(),w=this.audioContext.createGain(),N=this.audioContext.createGain(),E=this.audioContext.createGain(),C=this.audioContext.createGain(),A=this.audioContext.createGain(),P=this.audioContext.createGain(),R=this.audioContext.createGain(),T=this.audioContext.createGain(),j=this.audioContext.createBiquadFilter(),O=this.audioContext.createBiquadFilter();e<150?d.type="square":d.type="triangle",d.frequency.setValueAtTime(e,i),h.type="sine",h.frequency.setValueAtTime(e*2,i),f.type="sine",f.frequency.setValueAtTime(e*3,i),m.type="sine",m.frequency.setValueAtTime(e*4,i),g.type="sine",g.frequency.setValueAtTime(e*5,i);const I=Math.floor(this.audioContext.sampleRate*.005),D=this.audioContext.createBuffer(1,I,this.audioContext.sampleRate),B=D.getChannelData(0);for(let ce=0;ce<I;ce++)B[ce]=(Math.random()*2-1)*Math.exp(-ce/I*8);b.buffer=D,S.type="square",S.frequency.setValueAtTime(e*8,i),x.type="triangle",x.frequency.setValueAtTime(e*1.003,i),j.type="lowpass",e<150?(j.frequency.setValueAtTime(e*4,i),j.Q.setValueAtTime(2,i)):(j.frequency.setValueAtTime(e*6,i),j.Q.setValueAtTime(1,i)),O.type="peaking",O.frequency.setValueAtTime(e*3,i),O.Q.setValueAtTime(2,i),e<150?O.gain.setValueAtTime(1,i):O.gain.setValueAtTime(3,i);const H=.02,z=.15,G=a?.75:.2,Q=a?Math.min(.4,t*.3):Math.min(.2,t*.7),X=Math.max(.001,s*.8);w.gain.setValueAtTime(.001,i),w.gain.exponentialRampToValueAtTime(X,i+H),w.gain.exponentialRampToValueAtTime(X*G,i+H+z),t>H+z+Q&&w.gain.setValueAtTime(X*G,i+t-Q),w.gain.exponentialRampToValueAtTime(.001,i+t);const q=Math.max(.001,s*.6);N.gain.setValueAtTime(.001,i),N.gain.exponentialRampToValueAtTime(q,i+H),N.gain.exponentialRampToValueAtTime(q*G,i+H+z),t>H+z+Q&&N.gain.setValueAtTime(q*G,i+t-Q),N.gain.exponentialRampToValueAtTime(.001,i+t);const U=Math.max(.001,s*.4);E.gain.setValueAtTime(.001,i),E.gain.exponentialRampToValueAtTime(U,i+H),E.gain.exponentialRampToValueAtTime(U*G,i+H+z),t>H+z+Q&&E.gain.setValueAtTime(U*G,i+t-Q),E.gain.exponentialRampToValueAtTime(.001,i+t);const Y=Math.max(.001,s*.3);C.gain.setValueAtTime(.001,i),C.gain.exponentialRampToValueAtTime(Y,i+H),C.gain.exponentialRampToValueAtTime(Y*G,i+H+z),t>H+z+Q&&C.gain.setValueAtTime(Y*G,i+t-Q),C.gain.exponentialRampToValueAtTime(.001,i+t);const M=Math.max(.001,s*.2);A.gain.setValueAtTime(.001,i),A.gain.exponentialRampToValueAtTime(M,i+H),A.gain.exponentialRampToValueAtTime(M*G,i+H+z),t>H+z+Q&&A.gain.setValueAtTime(M*G,i+t-Q),A.gain.exponentialRampToValueAtTime(.001,i+t);const W=Math.max(.001,s*.3);P.gain.setValueAtTime(W,i),P.gain.exponentialRampToValueAtTime(.001,i+.01);const J=Math.max(.001,s*.2);R.gain.setValueAtTime(J,i),R.gain.exponentialRampToValueAtTime(.001,i+.005);const de=Math.max(.001,s*.3);T.gain.setValueAtTime(.001,i),T.gain.exponentialRampToValueAtTime(de,i+.02),T.gain.exponentialRampToValueAtTime(de*.8,i+.2),T.gain.exponentialRampToValueAtTime(.001,i+t),d.connect(j),j.connect(O),O.connect(w),w.connect(u),h.connect(N),N.connect(u),f.connect(E),E.connect(u),m.connect(C),C.connect(u),g.connect(A),A.connect(u),b.connect(P),P.connect(u),S.connect(R),R.connect(u),x.connect(T),T.connect(u),d.start(i),h.start(i),f.start(i),m.start(i),g.start(i),b.start(i),S.start(i),x.start(i),d.stop(i+t),h.stop(i+t),f.stop(i+t),m.stop(i+t),g.stop(i+t),S.stop(i+t),x.stop(i+t),l.push(d,h,f,m,g,S,x),this.addReverb(u,.3),u.connect(this.masterGain),this.trackOscillators(l,"piano",e)}playGrandPianoNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createOscillator(),g=this.audioContext.createOscillator(),b=this.audioContext.createOscillator(),S=this.audioContext.createOscillator(),x=this.audioContext.createBufferSource(),w=this.audioContext.createGain(),N=this.audioContext.createGain(),E=this.audioContext.createGain(),C=this.audioContext.createGain(),A=this.audioContext.createGain(),P=this.audioContext.createGain(),R=this.audioContext.createGain(),T=this.audioContext.createGain(),j=this.audioContext.createGain(),O=this.audioContext.createBiquadFilter(),I=this.audioContext.createBiquadFilter(),D=this.audioContext.createBiquadFilter();u.type="triangle",u.frequency.setValueAtTime(e,i),d.type="sine",d.frequency.setValueAtTime(e*2,i),h.type="sine",h.frequency.setValueAtTime(e*3,i),f.type="sine",f.frequency.setValueAtTime(e*4,i),m.type="sine",m.frequency.setValueAtTime(e*5,i),g.type="sine",g.frequency.setValueAtTime(e*6,i),b.type="triangle",b.frequency.setValueAtTime(e*.997,i),S.type="triangle",S.frequency.setValueAtTime(e*1.003,i);const B=Math.floor(this.audioContext.sampleRate*.003),H=this.audioContext.createBuffer(1,B,this.audioContext.sampleRate),z=H.getChannelData(0);for(let de=0;de<B;de++)z[de]=(Math.random()*2-1)*.5*Math.exp(-de/B*6);x.buffer=H,O.type="lowpass",O.frequency.setValueAtTime(e*8,i),O.Q.setValueAtTime(.8,i),I.type="peaking",I.frequency.setValueAtTime(e*2,i),I.Q.setValueAtTime(1.5,i),I.gain.setValueAtTime(2,i),D.type="bandpass",D.frequency.setValueAtTime(e*1.5,i),D.Q.setValueAtTime(1,i);const G=Math.max(.001,s*.9);w.gain.setValueAtTime(G,i),w.gain.exponentialRampToValueAtTime(G*.8,i+.2),w.gain.exponentialRampToValueAtTime(G*.6,i+t*.4),w.gain.exponentialRampToValueAtTime(.001,i+t);const Q=Math.max(.001,s*.7);N.gain.setValueAtTime(Q,i),N.gain.exponentialRampToValueAtTime(Q*.7,i+.15),N.gain.exponentialRampToValueAtTime(.001,i+t*.9);const X=Math.max(.001,s*.5);E.gain.setValueAtTime(X,i),E.gain.exponentialRampToValueAtTime(X*.6,i+.12),E.gain.exponentialRampToValueAtTime(.001,i+t*.7);const q=Math.max(.001,s*.4);C.gain.setValueAtTime(q,i),C.gain.exponentialRampToValueAtTime(q*.5,i+.1),C.gain.exponentialRampToValueAtTime(.001,i+t*.6);const U=Math.max(.001,s*.3);A.gain.setValueAtTime(U,i),A.gain.exponentialRampToValueAtTime(U*.4,i+.08),A.gain.exponentialRampToValueAtTime(.001,i+t*.5);const Y=Math.max(.001,s*.2);P.gain.setValueAtTime(Y,i),P.gain.exponentialRampToValueAtTime(Y*.3,i+.06),P.gain.exponentialRampToValueAtTime(.001,i+t*.4);const M=Math.max(.001,s*.4);R.gain.setValueAtTime(.001,i),R.gain.exponentialRampToValueAtTime(M,i+.05),R.gain.exponentialRampToValueAtTime(M*.8,i+.3),R.gain.exponentialRampToValueAtTime(.001,i+t);const W=Math.max(.001,s*.35);T.gain.setValueAtTime(.001,i),T.gain.exponentialRampToValueAtTime(W,i+.07),T.gain.exponentialRampToValueAtTime(W*.7,i+.35),T.gain.exponentialRampToValueAtTime(.001,i+t);const J=Math.max(.001,s*.2);j.gain.setValueAtTime(J,i),j.gain.exponentialRampToValueAtTime(.001,i+.008),u.connect(O),O.connect(I),I.connect(w),w.connect(l),d.connect(N),N.connect(l),h.connect(E),E.connect(l),f.connect(C),C.connect(l),m.connect(A),A.connect(l),g.connect(P),P.connect(l),b.connect(D),D.connect(R),R.connect(l),S.connect(T),T.connect(l),x.connect(j),j.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),m.start(i),g.start(i),b.start(i),S.start(i),x.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),f.stop(i+t),m.stop(i+t),g.stop(i+t),b.stop(i+t),S.stop(i+t),a.push(u,d,h,f,m,g,b,S),this.addReverb(l,.5),l.connect(this.masterGain),this.trackOscillators(a,"grand",e)}playOrganNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createOscillator(),g=this.audioContext.createOscillator(),b=this.audioContext.createBufferSource(),S=this.audioContext.createGain(),x=this.audioContext.createGain(),w=this.audioContext.createGain(),N=this.audioContext.createGain(),E=this.audioContext.createGain(),C=this.audioContext.createGain(),A=this.audioContext.createGain(),P=this.audioContext.createBiquadFilter();u.type="sine",u.frequency.setValueAtTime(e*.5,i),d.type="sine",d.frequency.setValueAtTime(e,i),h.type="sine",h.frequency.setValueAtTime(e*1.498,i),f.type="sine",f.frequency.setValueAtTime(e*2,i),m.type="sine",m.frequency.setValueAtTime(e*2.997,i),g.type="sine",g.frequency.setValueAtTime(e*4,i);const R=Math.floor(this.audioContext.sampleRate*t),T=this.audioContext.createBuffer(1,R,this.audioContext.sampleRate),j=T.getChannelData(0);for(let Q=0;Q<R;Q++)j[Q]=(Math.random()*2-1)*.02;b.buffer=T,P.type="lowpass",P.frequency.setValueAtTime(e*8,i),P.Q.setValueAtTime(.7,i);const O=Math.max(.001,s*.6);S.gain.setValueAtTime(O,i),S.gain.setValueAtTime(O*.95,i+t-.05),S.gain.exponentialRampToValueAtTime(.001,i+t);const I=Math.max(.001,s*.8);x.gain.setValueAtTime(I,i),x.gain.setValueAtTime(I*.95,i+t-.05),x.gain.exponentialRampToValueAtTime(.001,i+t);const D=Math.max(.001,s*.5);w.gain.setValueAtTime(D,i),w.gain.setValueAtTime(D*.9,i+t-.05),w.gain.exponentialRampToValueAtTime(.001,i+t);const B=Math.max(.001,s*.4);N.gain.setValueAtTime(B,i),N.gain.setValueAtTime(B*.9,i+t-.05),N.gain.exponentialRampToValueAtTime(.001,i+t);const H=Math.max(.001,s*.3);E.gain.setValueAtTime(H,i),E.gain.setValueAtTime(H*.85,i+t-.05),E.gain.exponentialRampToValueAtTime(.001,i+t);const z=Math.max(.001,s*.25);C.gain.setValueAtTime(z,i),C.gain.setValueAtTime(z*.8,i+t-.05),C.gain.exponentialRampToValueAtTime(.001,i+t);const G=Math.max(.001,s*.1);A.gain.setValueAtTime(G,i),A.gain.exponentialRampToValueAtTime(G*.7,i+t*.8),A.gain.exponentialRampToValueAtTime(.001,i+t),u.connect(P),P.connect(S),S.connect(l),d.connect(x),x.connect(l),h.connect(w),w.connect(l),f.connect(N),N.connect(l),m.connect(E),E.connect(l),g.connect(C),C.connect(l),b.connect(A),A.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),m.start(i),g.start(i),b.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),f.stop(i+t),m.stop(i+t),g.stop(i+t),a.push(u,d,h,f,m,g),this.addReverb(l,.6),l.connect(this.masterGain),this.trackOscillators(a,"organ",e)}playGuitarNote(e,t,s,i,a=!0){if(!this.audioContext||!this.masterGain)return;const l=[],u=this.audioContext.createGain(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createGain(),S=this.audioContext.createBiquadFilter(),x=this.audioContext.createBiquadFilter();d.type="square",d.frequency.setValueAtTime(e,i),h.type="triangle",h.frequency.setValueAtTime(e,i),f.type="sawtooth",f.frequency.setValueAtTime(e*20,i),S.type="lowpass",S.frequency.setValueAtTime(e*6,i),S.frequency.exponentialRampToValueAtTime(e*2,i+t),S.Q.setValueAtTime(3,i),x.type="highpass",x.frequency.setValueAtTime(2e3,i),x.Q.setValueAtTime(5,i);const w=.01,N=.08,E=a?.65:.15,C=a?Math.min(.3,t*.4):Math.min(.15,t*.8),A=Math.max(.001,s*1.2);m.gain.setValueAtTime(A,i),m.gain.exponentialRampToValueAtTime(.001,i+.05);const P=Math.max(.001,s*.6);g.gain.setValueAtTime(.001,i),g.gain.exponentialRampToValueAtTime(P,i+w),g.gain.exponentialRampToValueAtTime(P*E,i+w+N),t>w+N+C&&g.gain.setValueAtTime(P*E,i+t-C),g.gain.exponentialRampToValueAtTime(.001,i+t);const R=Math.max(.001,s*.3);b.gain.setValueAtTime(R,i),b.gain.exponentialRampToValueAtTime(.001,i+.02),d.connect(x),x.connect(m),m.connect(u),h.connect(S),S.connect(g),g.connect(u),f.connect(b),b.connect(u),d.start(i),h.start(i),f.start(i),d.stop(i+t),h.stop(i+t),f.stop(i+t),l.push(d,h,f),this.addReverb(u,.1),u.connect(this.masterGain),this.trackOscillators(l,"guitar",e)}playViolinNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createBufferSource(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createGain(),S=this.audioContext.createGain(),x=this.audioContext.createBiquadFilter(),w=this.audioContext.createBiquadFilter(),N=this.audioContext.createBiquadFilter();u.type="sawtooth",u.frequency.setValueAtTime(e,i),d.type="sine",d.frequency.setValueAtTime(440,i),h.type="sine",h.frequency.setValueAtTime(880,i);const E=Math.floor(this.audioContext.sampleRate*.1),C=this.audioContext.createBuffer(1,E,this.audioContext.sampleRate),A=C.getChannelData(0);for(let G=0;G<E;G++)A[G]=(Math.random()*2-1)*.1;f.buffer=C,x.type="bandpass",x.frequency.setValueAtTime(600,i),x.Q.setValueAtTime(3,i),w.type="bandpass",w.frequency.setValueAtTime(1400,i),w.Q.setValueAtTime(2,i),N.type="lowpass",N.frequency.setValueAtTime(e*4,i),N.Q.setValueAtTime(.7,i);const P=Math.max(.001,s*.6),R=.08,T=.15,j=P*.85,O=Math.min(.3,t*.3);m.gain.setValueAtTime(.001,i),m.gain.exponentialRampToValueAtTime(P,i+R),m.gain.exponentialRampToValueAtTime(j,i+R+T),t>R+T+O&&m.gain.setValueAtTime(j,i+t-O),m.gain.exponentialRampToValueAtTime(.001,i+t);const I=Math.max(.001,s*.3),D=I*.9;g.gain.setValueAtTime(.001,i),g.gain.exponentialRampToValueAtTime(I,i+.12),g.gain.exponentialRampToValueAtTime(D,i+.2),t>.5&&g.gain.setValueAtTime(D,i+t-O),g.gain.exponentialRampToValueAtTime(.001,i+t);const B=Math.max(.001,s*.25),H=B*.85;b.gain.setValueAtTime(.001,i),b.gain.exponentialRampToValueAtTime(B,i+.15),b.gain.exponentialRampToValueAtTime(H,i+.25),t>.6&&b.gain.setValueAtTime(H,i+t-O),b.gain.exponentialRampToValueAtTime(.001,i+t);const z=Math.max(.001,s*.15);S.gain.setValueAtTime(z,i),S.gain.exponentialRampToValueAtTime(.001,i+.08),u.connect(x),x.connect(w),w.connect(N),N.connect(m),m.connect(l),d.connect(g),g.connect(l),h.connect(b),b.connect(l),f.connect(S),S.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),a.push(u,d,h),this.addReverb(l,.4),l.connect(this.masterGain),this.trackOscillators(a,"violin",e)}playUkuleleNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createGain(),S=this.audioContext.createGain(),x=this.audioContext.createBiquadFilter(),w=this.audioContext.createBiquadFilter();u.type="triangle",u.frequency.setValueAtTime(e,i),d.type="triangle",d.frequency.setValueAtTime(e*2.01,i),h.type="triangle",h.frequency.setValueAtTime(e*3.02,i),f.type="sine",f.frequency.setValueAtTime(e*8,i),x.type="highpass",x.frequency.setValueAtTime(e*.8,i),x.Q.setValueAtTime(2,i),w.type="bandpass",w.frequency.setValueAtTime(e*6,i),w.Q.setValueAtTime(8,i);const N=Math.max(.001,s*1.3);m.gain.setValueAtTime(N,i),m.gain.exponentialRampToValueAtTime(N*.8,i+.08),m.gain.exponentialRampToValueAtTime(N*.4,i+t*.5),m.gain.exponentialRampToValueAtTime(.001,i+t);const E=Math.max(.001,s*.8);g.gain.setValueAtTime(E,i),g.gain.exponentialRampToValueAtTime(.001,i+t*.7);const C=Math.max(.001,s*.6);b.gain.setValueAtTime(C,i),b.gain.exponentialRampToValueAtTime(.001,i+t*.5);const A=Math.max(.001,s*.4);S.gain.setValueAtTime(A,i),S.gain.exponentialRampToValueAtTime(.001,i+t*.3),u.connect(x),x.connect(m),m.connect(l),d.connect(g),g.connect(l),h.connect(b),b.connect(l),f.connect(w),w.connect(S),S.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),f.stop(i+t),a.push(u,d,h,f),this.addReverb(l,.05),l.connect(this.masterGain),this.trackOscillators(a,"ukulele",e)}playFluteNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createGain(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createBiquadFilter(),S=this.audioContext.createBiquadFilter();u.type="sine",u.frequency.setValueAtTime(e,i),d.type="sawtooth",d.frequency.setValueAtTime(e*6.5,i),h.type="triangle",h.frequency.setValueAtTime(e*2.1,i),b.type="lowpass",b.frequency.setValueAtTime(e*4,i),b.Q.setValueAtTime(1.5,i),S.type="bandpass",S.frequency.setValueAtTime(e*8,i),S.Q.setValueAtTime(12,i);const x=Math.max(.001,s*.9);f.gain.setValueAtTime(.001,i),f.gain.exponentialRampToValueAtTime(x,i+.15),t>.3&&f.gain.setValueAtTime(x*.8,i+t-.2),f.gain.exponentialRampToValueAtTime(.001,i+t);const w=Math.max(.001,s*.15);m.gain.setValueAtTime(w,i),m.gain.exponentialRampToValueAtTime(.001,i+t*.8);const N=Math.max(.001,s*.3);g.gain.setValueAtTime(N,i),g.gain.exponentialRampToValueAtTime(.001,i+t),u.connect(b),b.connect(f),f.connect(l),d.connect(S),S.connect(m),m.connect(l),h.connect(g),g.connect(l),u.start(i),d.start(i),h.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),a.push(u,d,h),this.addReverb(l,.3),l.connect(this.masterGain),this.trackOscillators(a,"flute",e)}playPanFluteNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createGain(),S=this.audioContext.createGain(),x=this.audioContext.createBiquadFilter(),w=this.audioContext.createBiquadFilter();u.type="square",u.frequency.setValueAtTime(e,i),d.type="square",d.frequency.setValueAtTime(e*.99,i),h.type="triangle",h.frequency.setValueAtTime(e*.5,i),f.type="sawtooth",f.frequency.setValueAtTime(e*4,i),x.type="bandpass",x.frequency.setValueAtTime(e*2,i),x.Q.setValueAtTime(6,i),w.type="lowpass",w.frequency.setValueAtTime(e*3,i),w.Q.setValueAtTime(3,i);const N=Math.max(.001,s*.7);m.gain.setValueAtTime(.001,i),m.gain.exponentialRampToValueAtTime(N,i+.1),m.gain.exponentialRampToValueAtTime(.001,i+t);const E=Math.max(.001,s*.65);g.gain.setValueAtTime(.001,i),g.gain.exponentialRampToValueAtTime(E,i+.12),g.gain.exponentialRampToValueAtTime(.001,i+t);const C=Math.max(.001,s*.4);b.gain.setValueAtTime(.001,i),b.gain.exponentialRampToValueAtTime(C,i+.05),b.gain.exponentialRampToValueAtTime(.001,i+t);const A=Math.max(.001,s*.2);S.gain.setValueAtTime(A,i),S.gain.exponentialRampToValueAtTime(.001,i+t*.6),u.connect(x),x.connect(m),m.connect(l),d.connect(g),g.connect(l),h.connect(w),w.connect(b),b.connect(l),f.connect(S),S.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),f.stop(i+t),a.push(u,d,h,f),this.addReverb(l,.5),l.connect(this.masterGain),this.trackOscillators(a,"panflute",e)}playRecorderNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createOscillator(),h=this.audioContext.createOscillator(),f=this.audioContext.createOscillator(),m=this.audioContext.createGain(),g=this.audioContext.createGain(),b=this.audioContext.createGain(),S=this.audioContext.createGain(),x=this.audioContext.createBiquadFilter(),w=this.audioContext.createBiquadFilter();u.type="sawtooth",u.frequency.setValueAtTime(e,i),d.type="sawtooth",d.frequency.setValueAtTime(e*2,i),h.type="sawtooth",h.frequency.setValueAtTime(e*3,i),f.type="square",f.frequency.setValueAtTime(e*8,i),x.type="bandpass",x.frequency.setValueAtTime(e*5,i),x.Q.setValueAtTime(4,i),w.type="highpass",w.frequency.setValueAtTime(e*6,i),w.Q.setValueAtTime(8,i);const N=Math.max(.001,s*1);m.gain.setValueAtTime(.001,i),m.gain.exponentialRampToValueAtTime(N,i+.05),m.gain.exponentialRampToValueAtTime(.001,i+t);const E=Math.max(.001,s*.6);g.gain.setValueAtTime(E,i),g.gain.exponentialRampToValueAtTime(.001,i+t);const C=Math.max(.001,s*.4);b.gain.setValueAtTime(C,i),b.gain.exponentialRampToValueAtTime(.001,i+t);const A=Math.max(.001,s*.3);S.gain.setValueAtTime(A,i),S.gain.exponentialRampToValueAtTime(.001,i+t*.5),u.connect(x),x.connect(m),m.connect(l),d.connect(g),g.connect(l),h.connect(b),b.connect(l),f.connect(w),w.connect(S),S.connect(l),u.start(i),d.start(i),h.start(i),f.start(i),u.stop(i+t),d.stop(i+t),h.stop(i+t),f.stop(i+t),a.push(u,d,h,f),this.addReverb(l,.1),l.connect(this.masterGain),this.trackOscillators(a,"recorder",e)}playGenericNote(e,t,s,i){if(!this.audioContext||!this.masterGain)return;const a=[],l=this.audioContext.createGain(),u=this.audioContext.createOscillator(),d=this.audioContext.createGain();u.type="triangle",u.frequency.setValueAtTime(e,i);const h=Math.max(.001,s*.5);d.gain.setValueAtTime(h,i),d.gain.exponentialRampToValueAtTime(.001,i+t),u.connect(d),d.connect(l),u.start(i),u.stop(i+t),a.push(u),this.addReverb(l,.2),l.connect(this.masterGain),this.trackOscillators(a,"generic",e)}playFrequency(e,t=.5,s=.7){this.playNote(e,t,s,"piano",!0)}trackOscillators(e,t,s){const i=e.map(a=>({oscillator:a,gain:this.audioContext.createGain(),instrument:t,frequency:s,startTime:this.audioContext.currentTime}));this.activeOscillators.has(t)||this.activeOscillators.set(t,[]),this.activeOscillators.get(t).push(...i)}playDrum(e,t=.7){if(!this.audioContext||!this.masterGain)return;const s=this.audioContext.currentTime;switch(e){case"kick":this.playKick(s,t);break;case"snare":this.playSnare(s,t);break;case"hihat":this.playHihat(s,t,!1);break;case"openhat":this.playHihat(s,t,!0);break;case"crash":this.playCrash(s,t);break;case"ride":this.playRide(s,t);break;case"clap":this.playClap(s,t);break;case"tom":this.playTom(s,t);break}}playKick(e,t){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.createOscillator(),i=this.audioContext.createOscillator(),a=this.audioContext.createOscillator(),l=this.audioContext.createBufferSource(),u=this.audioContext.createGain(),d=this.audioContext.createGain(),h=this.audioContext.createGain(),f=this.audioContext.createGain(),m=this.audioContext.createBiquadFilter(),g=this.audioContext.createBiquadFilter(),b=this.audioContext.createBiquadFilter(),S=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(60,e),s.frequency.exponentialRampToValueAtTime(45,e+.05),s.frequency.exponentialRampToValueAtTime(30,e+.2),i.type="sine",i.frequency.setValueAtTime(35,e),i.frequency.exponentialRampToValueAtTime(25,e+.15),a.type="square",a.frequency.setValueAtTime(800,e),a.frequency.exponentialRampToValueAtTime(200,e+.02);const x=Math.floor(this.audioContext.sampleRate*.08),w=this.audioContext.createBuffer(1,x,this.audioContext.sampleRate),N=w.getChannelData(0);for(let R=0;R<x;R++){const T=Math.pow(1-R/x,4);N[R]=(Math.random()*2-1)*T*.8}l.buffer=w,m.type="lowpass",m.frequency.setValueAtTime(100,e),m.Q.setValueAtTime(1.2,e),g.type="lowpass",g.frequency.setValueAtTime(60,e),g.Q.setValueAtTime(.8,e),b.type="bandpass",b.frequency.setValueAtTime(1500,e),b.Q.setValueAtTime(3,e),S.type="bandpass",S.frequency.setValueAtTime(800,e),S.Q.setValueAtTime(2,e);const E=Math.max(.001,t*1);u.gain.setValueAtTime(E,e),u.gain.exponentialRampToValueAtTime(E*.7,e+.05),u.gain.exponentialRampToValueAtTime(E*.3,e+.15),u.gain.exponentialRampToValueAtTime(.001,e+.5);const C=Math.max(.001,t*.8);d.gain.setValueAtTime(C,e),d.gain.exponentialRampToValueAtTime(C*.6,e+.08),d.gain.exponentialRampToValueAtTime(.001,e+.4);const A=Math.max(.001,t*.4);h.gain.setValueAtTime(A,e),h.gain.exponentialRampToValueAtTime(.001,e+.025);const P=Math.max(.001,t*.6);f.gain.setValueAtTime(P,e),f.gain.exponentialRampToValueAtTime(.001,e+.08),s.connect(m),m.connect(u),u.connect(this.masterGain),i.connect(g),g.connect(d),d.connect(this.masterGain),a.connect(b),b.connect(h),h.connect(this.masterGain),l.connect(S),S.connect(f),f.connect(this.masterGain),s.start(e),i.start(e),a.start(e),l.start(e),s.stop(e+.5),i.stop(e+.4),a.stop(e+.025)}catch(s){console.error(" Kick drum error:",s)}}playSnare(e,t){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createOscillator(),a=this.audioContext.createBufferSource(),l=this.audioContext.createOscillator(),u=this.audioContext.createGain(),d=this.audioContext.createGain(),h=this.audioContext.createGain(),f=this.audioContext.createGain(),m=this.audioContext.createBiquadFilter(),g=this.audioContext.createBiquadFilter(),b=this.audioContext.createBiquadFilter(),S=this.audioContext.createBiquadFilter(),x=Math.floor(this.audioContext.sampleRate*.15),w=this.audioContext.createBuffer(1,x,this.audioContext.sampleRate),N=w.getChannelData(0);for(let O=0;O<x;O++){const I=Math.pow(1-O/x,1.5),D=8e3+Math.sin(O*.02)*2e3;N[O]=(Math.random()*2-1)*I*.9}s.buffer=w,i.type="triangle",i.frequency.setValueAtTime(220,e),i.frequency.exponentialRampToValueAtTime(160,e+.1);const E=Math.floor(this.audioContext.sampleRate*.12),C=this.audioContext.createBuffer(1,E,this.audioContext.sampleRate),A=C.getChannelData(0);for(let O=0;O<E;O++){const I=Math.pow(1-O/E,2.5);A[O]=(Math.random()*2-1)*I*.7}a.buffer=C,l.type="square",l.frequency.setValueAtTime(1500,e),l.frequency.exponentialRampToValueAtTime(800,e+.01),m.type="bandpass",m.frequency.setValueAtTime(4e3,e),m.Q.setValueAtTime(1.8,e),g.type="lowpass",g.frequency.setValueAtTime(800,e),g.Q.setValueAtTime(2,e),b.type="highpass",b.frequency.setValueAtTime(6e3,e),b.Q.setValueAtTime(1.5,e),S.type="bandpass",S.frequency.setValueAtTime(2500,e),S.Q.setValueAtTime(4,e);const P=Math.max(.001,t*1.1);u.gain.setValueAtTime(P,e),u.gain.exponentialRampToValueAtTime(P*.4,e+.02),u.gain.exponentialRampToValueAtTime(.001,e+.15);const R=Math.max(.001,t*.7);d.gain.setValueAtTime(R,e),d.gain.exponentialRampToValueAtTime(R*.3,e+.05),d.gain.exponentialRampToValueAtTime(.001,e+.12);const T=Math.max(.001,t*.8);h.gain.setValueAtTime(T,e),h.gain.exponentialRampToValueAtTime(T*.2,e+.03),h.gain.exponentialRampToValueAtTime(.001,e+.12);const j=Math.max(.001,t*.6);f.gain.setValueAtTime(j,e),f.gain.exponentialRampToValueAtTime(.001,e+.015),s.connect(m),m.connect(u),u.connect(this.masterGain),i.connect(g),g.connect(d),d.connect(this.masterGain),a.connect(b),b.connect(h),h.connect(this.masterGain),l.connect(S),S.connect(f),f.connect(this.masterGain),s.start(e),i.start(e),a.start(e),l.start(e),i.stop(e+.12),l.stop(e+.015)}catch(s){console.error(" Snare drum error:",s)}}playHihat(e,t,s=!1){if(!(!this.audioContext||!this.masterGain))try{const i=this.audioContext.createBufferSource(),a=this.audioContext.createOscillator(),l=this.audioContext.createOscillator(),u=this.audioContext.createOscillator(),d=this.audioContext.createGain(),h=this.audioContext.createGain(),f=this.audioContext.createGain(),m=this.audioContext.createGain(),g=this.audioContext.createBiquadFilter(),b=this.audioContext.createBiquadFilter(),S=this.audioContext.createBiquadFilter(),x=s?.35:.08,w=Math.floor(this.audioContext.sampleRate*x),N=this.audioContext.createBuffer(1,w,this.audioContext.sampleRate),E=N.getChannelData(0);for(let T=0;T<w;T++){const j=s?Math.pow(1-T/w,.6):Math.pow(1-T/w,3),O=Math.sin(T*.8)*.3,I=Math.sin(T*1.2)*.2,D=Math.sin(T*2.1)*.1,B=(Math.random()*2-1)*.4;E[T]=(B+O+I+D)*j}i.buffer=N,a.type="square",a.frequency.setValueAtTime(8500,e),a.frequency.exponentialRampToValueAtTime(7200,e+x*.3),l.type="sawtooth",l.frequency.setValueAtTime(11200,e),l.frequency.exponentialRampToValueAtTime(9800,e+x*.4),u.type="sine",u.frequency.setValueAtTime(13500,e),g.type="bandpass",g.frequency.setValueAtTime(8e3,e),g.Q.setValueAtTime(1.2,e),b.type="highpass",b.frequency.setValueAtTime(6e3,e),b.Q.setValueAtTime(.8,e),S.type="bandpass",S.frequency.setValueAtTime(12e3,e),S.Q.setValueAtTime(3,e);const C=Math.max(.001,t*(s?.6:.8));d.gain.setValueAtTime(C,e),s?(d.gain.exponentialRampToValueAtTime(C*.7,e+.05),d.gain.exponentialRampToValueAtTime(C*.3,e+.15),d.gain.exponentialRampToValueAtTime(.001,e+x)):(d.gain.exponentialRampToValueAtTime(C*.3,e+.02),d.gain.exponentialRampToValueAtTime(.001,e+x));const A=Math.max(.001,t*.4);h.gain.setValueAtTime(A,e),h.gain.exponentialRampToValueAtTime(.001,e+x*(s?.7:.5));const P=Math.max(.001,t*.35);f.gain.setValueAtTime(P,e),f.gain.exponentialRampToValueAtTime(.001,e+x*(s?.6:.4));const R=Math.max(.001,t*.25);m.gain.setValueAtTime(R,e),m.gain.exponentialRampToValueAtTime(.001,e+x*(s?.8:.3)),i.connect(g),g.connect(d),d.connect(this.masterGain),a.connect(b),b.connect(h),h.connect(this.masterGain),l.connect(f),f.connect(this.masterGain),u.connect(S),S.connect(m),m.connect(this.masterGain),i.start(e),a.start(e),l.start(e),u.start(e),a.stop(e+x),l.stop(e+x),u.stop(e+x)}catch(i){console.error(" Hi-hat error:",i)}}playCrash(e,t){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),l=this.audioContext.sampleRate*2.5,u=this.audioContext.createBuffer(2,l,this.audioContext.sampleRate);for(let h=0;h<2;h++){const f=u.getChannelData(h);for(let m=0;m<l;m++)f[m]=(Math.random()*2-1)*(1-m/l)*.6}s.buffer=u,a.type="highpass",a.frequency.setValueAtTime(4e3,e),a.Q.setValueAtTime(1.5,e);const d=Math.max(.001,t*.9);i.gain.setValueAtTime(d,e),i.gain.exponentialRampToValueAtTime(d*.4,e+.1),i.gain.exponentialRampToValueAtTime(.001,e+2.5),s.connect(a),a.connect(i),i.connect(this.masterGain),s.start(e)}catch(s){console.error("Crash cymbal error:",s)}}playRide(e,t){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.createOscillator(),i=this.audioContext.createOscillator(),a=this.audioContext.createBufferSource(),l=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter();s.type="triangle",s.frequency.setValueAtTime(850,e),i.type="sine",i.frequency.setValueAtTime(1300,e);const d=this.audioContext.sampleRate*.35,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),f=h.getChannelData(0);for(let g=0;g<d;g++)f[g]=(Math.random()*2-1)*(1-g/d)*.12;a.buffer=h,u.type="highpass",u.frequency.setValueAtTime(2800,e),u.Q.setValueAtTime(2.5,e);const m=Math.max(.001,t*.7);l.gain.setValueAtTime(m,e),l.gain.exponentialRampToValueAtTime(m*.6,e+.05),l.gain.exponentialRampToValueAtTime(.001,e+1.5),s.connect(u),i.connect(u),a.connect(u),u.connect(l),l.connect(this.masterGain),s.start(e),i.start(e),a.start(e),s.stop(e+1.5),i.stop(e+1.5)}catch(s){console.error("Ride cymbal error:",s)}}playClap(e,t){if(!(!this.audioContext||!this.masterGain))try{for(let s=0;s<4;s++){const i=s*.01,a=this.audioContext.createBufferSource(),l=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.sampleRate*.15,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),f=h.getChannelData(0);for(let g=0;g<d;g++)f[g]=(Math.random()*2-1)*(1-g/d)*.85;a.buffer=h,u.type="bandpass",u.frequency.setValueAtTime(1400+s*250,e),u.Q.setValueAtTime(9,e);const m=Math.max(.001,t*(.9-s*.15));l.gain.setValueAtTime(m,e+i),l.gain.exponentialRampToValueAtTime(.001,e+i+.12),a.connect(u),u.connect(l),l.connect(this.masterGain),a.start(e+i)}}catch(s){console.error("Clap error:",s)}}playTom(e,t){if(!(!this.audioContext||!this.masterGain))try{const s=this.audioContext.createOscillator(),i=this.audioContext.createOscillator(),a=this.audioContext.createOscillator(),l=this.audioContext.createBufferSource(),u=this.audioContext.createGain(),d=this.audioContext.createGain(),h=this.audioContext.createGain(),f=this.audioContext.createGain(),m=this.audioContext.createBiquadFilter(),g=this.audioContext.createBiquadFilter(),b=this.audioContext.createBiquadFilter(),S=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(110,e),s.frequency.exponentialRampToValueAtTime(85,e+.1),s.frequency.exponentialRampToValueAtTime(75,e+.25),i.type="triangle",i.frequency.setValueAtTime(165,e),i.frequency.exponentialRampToValueAtTime(127,e+.1),i.frequency.exponentialRampToValueAtTime(112,e+.25),a.type="square",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(200,e+.02);const x=Math.floor(this.audioContext.sampleRate*.05),w=this.audioContext.createBuffer(1,x,this.audioContext.sampleRate),N=w.getChannelData(0);for(let R=0;R<x;R++){const T=Math.pow(1-R/x,6);N[R]=(Math.random()*2-1)*T*.5}l.buffer=w,m.type="lowpass",m.frequency.setValueAtTime(400,e),m.Q.setValueAtTime(2.5,e),g.type="bandpass",g.frequency.setValueAtTime(800,e),g.Q.setValueAtTime(1.8,e),b.type="bandpass",b.frequency.setValueAtTime(1200,e),b.Q.setValueAtTime(3,e),S.type="highpass",S.frequency.setValueAtTime(2e3,e),S.Q.setValueAtTime(1,e);const E=Math.max(.001,t*1);u.gain.setValueAtTime(E,e),u.gain.exponentialRampToValueAtTime(E*.7,e+.05),u.gain.exponentialRampToValueAtTime(E*.3,e+.15),u.gain.exponentialRampToValueAtTime(.001,e+.45);const C=Math.max(.001,t*.6);d.gain.setValueAtTime(C,e),d.gain.exponentialRampToValueAtTime(C*.4,e+.08),d.gain.exponentialRampToValueAtTime(.001,e+.35);const A=Math.max(.001,t*.4);h.gain.setValueAtTime(A,e),h.gain.exponentialRampToValueAtTime(.001,e+.025);const P=Math.max(.001,t*.5);f.gain.setValueAtTime(P,e),f.gain.exponentialRampToValueAtTime(.001,e+.05),s.connect(m),m.connect(u),u.connect(this.masterGain),i.connect(g),g.connect(d),d.connect(this.masterGain),a.connect(b),b.connect(h),h.connect(this.masterGain),l.connect(S),S.connect(f),f.connect(this.masterGain),s.start(e),i.start(e),a.start(e),l.start(e),s.stop(e+.45),i.stop(e+.35),a.stop(e+.025)}catch(s){console.error(" Tom drum error:",s)}}stopAllInstruments(){this.activeOscillators.forEach((e,t)=>{e.forEach(s=>{try{s.oscillator.stop()}catch{}})}),this.activeOscillators.clear()}setMasterVolume(e){this.masterGain&&this.masterGain.gain.setValueAtTime(Math.max(0,Math.min(1,e)),this.audioContext.currentTime)}}const Tl=new uU;class dU{constructor(){this.initialized=!1,this.drums={}}async initialize(){this.initialized||(await sp(),console.log("Tone.js audio context started"),this.drums={kick:new dr({pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4}}).toDestination(),snare:new tc({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0}}).toDestination(),hhc:new Ls({envelope:{attack:.001,decay:.05,release:.01},harmonicity:8,modulationIndex:40,resonance:6e3,octaves:2}).toDestination(),hho:new Ls({envelope:{attack:.001,decay:.3,release:.1},harmonicity:8,modulationIndex:40,resonance:6e3,octaves:2}).toDestination(),crash:new Ls({envelope:{attack:.001,decay:2,release:.5},harmonicity:12,modulationIndex:80,resonance:8e3,octaves:3}).toDestination(),clap:new tc({noise:{type:"white"},envelope:{attack:.001,decay:.12,sustain:0}}).toDestination(),tom:new dr({pitchDecay:.008,octaves:4,oscillator:{type:"sine"},envelope:{attack:.006,decay:.5,sustain:0}}).toDestination(),perc:new Ls({envelope:{attack:.001,decay:.2,release:.1},harmonicity:6,modulationIndex:20,resonance:4e3,octaves:1.5}).toDestination()},this.initialized=!0)}setBpm(e){An.bpm.value=e}async playSequencer(e){this.initialized||await this.initialize(),this.stop(),An.bpm.value=e.bpm;const t=e.bars*e.stepsPerBar,s=`${e.stepsPerBar}n`;this.sequence=new Ni((i,a)=>{e.tracks.forEach(l=>{l.muted||l.clips.forEach(u=>{const d=a-u.start;if(d>=0&&d<u.length){const h=u.steps[d];if(h?.active&&this.drums[l.id]){const f=h.velocity||1,m=this.drums[l.id];m&&(l.id==="kick"||l.id==="tom"?m.triggerAttackRelease("C1","16n",i,f):m.triggerAttackRelease("16n",i,f))}}})})},Array.from({length:t},(i,a)=>a),s),this.sequence.start(),An.start()}async playBeat(e,t=["kick","snare","hihat"],s){this.initialized||await this.initialize(),this.stop(),An.bpm.value=s,Array.isArray(e)?this.sequence=new Ni((i,a)=>{e[a]&&this.drums.kick&&this.drums.kick.triggerAttackRelease("C1","16n",i)},Array.from({length:e.length},(i,a)=>a),"16n"):(e.kick||e.snare||e.hihat)&&(this.sequence=new Ni((i,a)=>{e.kick?.[a]&&this.drums.kick&&this.drums.kick.triggerAttackRelease("C1","16n",i),e.snare?.[a]&&this.drums.snare&&this.drums.snare.triggerAttackRelease("16n",i),e.hihat?.[a]&&this.drums.hhc&&this.drums.hhc.triggerAttackRelease("16n",i),e.openhat?.[a]&&this.drums.hho&&this.drums.hho.triggerAttackRelease("16n",i),e.crash?.[a]&&this.drums.crash&&this.drums.crash.triggerAttackRelease("16n",i),e.clap?.[a]&&this.drums.clap&&this.drums.clap.triggerAttackRelease("16n",i),e.tom?.[a]&&this.drums.tom&&this.drums.tom.triggerAttackRelease("C2","16n",i)},Array.from({length:16},(i,a)=>a),"16n")),this.sequence&&(this.sequence.start(),An.start())}stop(){this.sequence&&(this.sequence.stop(),this.sequence.dispose(),this.sequence=void 0),An.stop(),An.cancel()}dispose(){this.stop(),Object.values(this.drums).forEach(e=>e.dispose()),this.drums={},this.initialized=!1}}const od=new dU;var Pm={exports:{}},Em={exports:{}},Mm,K1;function hU(){if(K1)return Mm;K1=1;function n(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:t===43?62:t===47?63:0}function e(t,s){for(var i=t.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,l=s?Math.ceil((a*3+1>>2)/s)*s:a*3+1>>2,u=new Uint8Array(l),d,h,f=0,m=0,g=0;g<a;g++)if(h=g&3,f|=n(i.charCodeAt(g))<<18-6*h,h===3||a-g===1){for(d=0;d<3&&m<l;d++,m++)u[m]=f>>>(16>>>d&24)&255;f=0}return u}return Mm={decode:e},Mm}var Rm,Q1;function pU(){return Q1||(Q1=1,Rm=function(n,e){return new Promise(function(t,s){var i=new XMLHttpRequest;e&&(i.responseType=e),i.open("GET",n),i.onload=function(){i.status===200?t(i.response):s(Error(i.statusText))},i.onerror=function(){s(Error("Network Error"))},i.send()})}),Rm}var Y1;function fU(){return Y1||(Y1=1,(function(n){var e=hU(),t=pU();function s(T){return function(j){return typeof j=="string"&&T.test(j)}}function i(T,j){return typeof T=="string"?T+j:typeof T=="function"?T(j):j}function a(T,j,O,I){var D=l(j)?u:d(j)?h:f(j)?m:g(j)?b:S(j)?x:w(j)?N:E(j)?C:A(j)?P:null,B=O||{};return D?D(T,j,B):I?Promise.resolve(I):Promise.reject("Source not valid ("+j+")")}a.fetch=t;function l(T){return T instanceof ArrayBuffer}function u(T,j,O){return new Promise(function(I,D){T.decodeAudioData(j,function(B){I(B)},function(){D("Can't decode audio data ("+j.slice(0,30)+"...)")})})}var d=s(/\.(mp3|wav|ogg)(\?.*)?$/i);function h(T,j,O){var I=i(O.from,j);return a(T,a.fetch(I,"arraybuffer"),O)}function f(T){return T&&typeof T.then=="function"}function m(T,j,O){return j.then(function(I){return a(T,I,O)})}var g=Array.isArray;function b(T,j,O){return Promise.all(j.map(function(I){return a(T,I,O,I)}))}function S(T){return T&&typeof T=="object"}function x(T,j,O){var I={},D=Object.keys(j).map(function(B){if(O.only&&O.only.indexOf(B)===-1)return null;var H=j[B];return a(T,H,O,H).then(function(z){I[B]=z})});return Promise.all(D).then(function(){return I})}var w=s(/\.json(\?.*)?$/i);function N(T,j,O){var I=i(O.from,j);return a(T,a.fetch(I,"text").then(JSON.parse),O)}var E=s(/^data:audio/);function C(T,j,O){var I=j.indexOf(",");return a(T,e.decode(j.slice(I+1)).buffer,O)}var A=s(/\.js(\?.*)?$/i);function P(T,j,O){var I=i(O.from,j);return a(T,a.fetch(I,"text").then(R),O)}function R(T){var j=T.indexOf("MIDI.Soundfont.");if(j<0)throw Error("Invalid MIDI.js Soundfont format");j=T.indexOf("=",j)+2;var O=T.lastIndexOf(",");return JSON.parse(T.slice(j,O)+"}")}n.exports&&(n.exports=a),typeof window<"u"&&(window.loadAudio=a)})(Em)),Em.exports}var Om={exports:{}},Im,X1;function mU(){if(X1)return Im;X1=1,Im=n;function n(u){var d=u.createGain(),h=d._voltage=s(u),f=i(h),m=i(h),g=i(h);return d._startAmount=i(m),d._endAmount=i(g),d._multiplier=i(f),d._multiplier.connect(d),d._startAmount.connect(d),d._endAmount.connect(d),d.value=f.gain,d.startValue=m.gain,d.endValue=g.gain,d.startValue.value=0,d.endValue.value=0,Object.defineProperties(d,e),d}var e={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(u){var d=this._multiplier.gain,h=this._startAmount.gain,f=this._endAmount.gain;this._voltage.start(u),this._decayFrom=this._decayFrom=u+this.attack,this._startedAt=u;var m=this.sustain;d.cancelScheduledValues(u),h.cancelScheduledValues(u),f.cancelScheduledValues(u),f.setValueAtTime(0,u),this.attack?(d.setValueAtTime(0,u),d.linearRampToValueAtTime(1,u+this.attack),h.setValueAtTime(1,u),h.linearRampToValueAtTime(0,u+this.attack)):(d.setValueAtTime(1,u),h.setValueAtTime(0,u)),this.decay&&d.setTargetAtTime(m,this._decayFrom,a(this.decay))}},stop:{value:function(u,d){d&&(u=u-this.release);var h=u+this.release;if(this.release){var f=this._multiplier.gain,m=this._startAmount.gain,g=this._endAmount.gain;f.cancelScheduledValues(u),m.cancelScheduledValues(u),g.cancelScheduledValues(u);var b=a(this.release);if(this.attack&&u<this._decayFrom){var S=l(0,1,this._startedAt,this._decayFrom,u);f.linearRampToValueAtTime(S,u),m.linearRampToValueAtTime(1-S,u),m.setTargetAtTime(0,u,b)}g.setTargetAtTime(1,u,b),f.setTargetAtTime(0,u,b)}return this._voltage.stop(h),h}},onended:{get:function(){return this._voltage.onended},set:function(u){this._voltage.onended=u}}},t=new Float32Array([1,1]);function s(u){var d=u.createBufferSource(),h=u.createBuffer(1,2,u.sampleRate);return h.getChannelData(0).set(t),d.buffer=h,d.loop=!0,d}function i(u){var d=u.context.createGain();return u.connect(d),d}function a(u){return Math.log(u+1)/Math.log(100)}function l(u,d,h,f,m){var g=d-u,b=f-h,S=m-h,x=S/b,w=u+x*g;return w<=u&&(w=u),w>=d&&(w=d),w}return Im}var Fm,Z1;function gU(){if(Z1)return Fm;Z1=1;var n=mU(),e={},t={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(d,h,f){var m=!1,g=0,b={},S=d.createGain();S.gain.value=1;var x=Object.assign({},t,f),w={context:d,out:S,opts:x};return h instanceof AudioBuffer?w.buffer=h:w.buffers=h,w.start=function(C,A,P){if(w.buffer&&C!==null)return w.start(null,C,A);var R=C?w.buffers[C]:w.buffer;if(R){if(!m){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+C+" not found.");return}var T=P||e;A=Math.max(d.currentTime,A||0),w.emit("start",A,C,T);var j=E(C,R,T);return j.id=N(C,j),j.env.start(A),j.source.start(A),w.emit("started",A,j.id,j),T.duration&&j.stop(A+T.duration),j},w.play=function(C,A,P){return w.start(C,A,P)},w.stop=function(C,A){var P;return A=A||Object.keys(b),A.map(function(R){return P=b[R],P?(P.stop(C),P.id):null})},w.connect=function(C){return m=!0,S.connect(C),w},w.emit=function(C,A,P,R){w.onevent&&w.onevent(C,A,P,R);var T=w["on"+C];T&&T(A,P,R)},w;function N(C,A){return A.id=g++,b[A.id]=A,A.source.onended=function(){var P=d.currentTime;A.source.disconnect(),A.env.disconnect(),A.disconnect(),w.emit("ended",P,A.id,A)},A.id}function E(C,A,P){var R=d.createGain();return R.gain.value=0,R.connect(S),R.env=l(d,P,x),R.env.connect(R.gain),R.source=d.createBufferSource(),R.source.buffer=A,R.source.connect(R),R.source.loop=P.loop||x.loop,R.source.playbackRate.value=u(P.cents||x.cents),R.source.loopStart=P.loopStart||x.loopStart,R.source.loopEnd=P.loopEnd||x.loopEnd,R.stop=function(T){var j=T||d.currentTime;w.emit("stop",j,C);var O=R.env.stop(j);R.source.stop(O)},R}}function i(d){return typeof d=="number"}var a=["attack","decay","sustain","release"];function l(d,h,f){var m=n(d),g=h.adsr||f.adsr;return a.forEach(function(b,S){g?m[b]=g[S]:m[b]=h[b]||f[b]}),m.value.value=i(h.gain)?h.gain:i(f.gain)?f.gain:1,m}function u(d){return d?Math.pow(2,d/1200):1}return Fm=s,Fm}var Dm,J1;function yU(){if(J1)return Dm;J1=1,Dm=function(e){return e.on=function(t,s){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var i="on"+t,a=e[i];return e[i]=a?n(a,s):s,e},e};function n(e,t){return function(s,i,a,l){e(s,i,a,l),t(s,i,a,l)}}return Dm}var Vm,eS;function xU(){if(eS)return Vm;eS=1;var n=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function e(){return n}var t=[0,2,4,5,7,9,11];function s(u,d,h){if(typeof u!="string")return null;var f=n.exec(u);if(!f||!d&&f[4])return null;var m={letter:f[1].toUpperCase(),acc:f[2].replace(/x/g,"##")};return m.pc=m.letter+m.acc,m.step=(m.letter.charCodeAt(0)+3)%7,m.alt=m.acc[0]==="b"?-m.acc.length:m.acc.length,m.chroma=t[m.step]+m.alt,f[3]&&(m.oct=+f[3],m.midi=m.chroma+12*(m.oct+1),m.freq=i(m.midi,h)),d&&(m.tonicOf=f[4]),m}function i(u,d){return Math.pow(2,(u-69)/12)*(d||440)}var a={parse:s,regex:e,midiToFreq:i},l=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];return l.forEach(function(u){a[u]=function(d){var h=s(d);return h&&typeof h[u]<"u"?h[u]:null}}),Vm=a,Vm}var Lm,tS;function vU(){if(tS)return Lm;tS=1;var n=xU(),e=function(i){return i!==null&&i!==[]&&i>=0&&i<129},t=function(i){return e(i)?+i:n.midi(i)};Lm=function(i){if(i.buffers){var a=i.opts.map,l=typeof a=="function"?a:t,u=function(h){return h?l(h)||h:null};i.buffers=s(i.buffers,u);var d=i.start;i.start=function(h,f,m){var g=u(h),b=g%1;return b&&(g=Math.floor(g),m=Object.assign(m||{},{cents:Math.floor(b*100)})),d(g,f,m)}}return i};function s(i,a){return Object.keys(i).reduce(function(l,u){return l[a(u)]=i[u],l},{})}return Lm}var Bm,nS;function bU(){if(nS)return Bm;nS=1;var n=Array.isArray,e=function(s){return s&&typeof s=="object"},t={};return Bm=function(s){return s.schedule=function(i,a){var l=s.context.currentTime,u=i<l?l:i;s.emit("schedule",u,a);var d,h,f,m;return a.map(function(g){if(g)n(g)?(d=g[0],h=g[1]):(d=g.time,h=g);else return null;return e(h)?(f=h.name||h.key||h.note||h.midi||null,m=h):(f=h,m=t),s.start(f,u+(d||0),m)})},s},Bm}function ld(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zm={exports:{}},sS;function wU(){return sS||(sS=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(s,i,a){function l(h,f){if(!i[h]){if(!s[h]){var m=typeof ld=="function"&&ld;if(!f&&m)return m(h,!0);if(u)return u(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var b=i[h]={exports:{}};s[h][0].call(b.exports,function(S){var x=s[h][1][S];return l(x||S)},b,b.exports,t,s,i,a)}return i[h].exports}for(var u=typeof ld=="function"&&ld,d=0;d<a.length;d++)l(a[d]);return l})({1:[function(t,s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a){function l(u){if(this._event=u,this._data=u.data,this.receivedTime=u.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=u.data[0]&240,this.channel=u.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=u.data[1]&127,this.velocity=u.data[2]&127;break;case 144:this.messageType="noteon",this.key=u.data[1]&127,this.velocity=u.data[2]&127;break;case 160:this.messageType="keypressure",this.key=u.data[1]&127,this.pressure=u.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=u.data[1]&127,this.controllerValue=u.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=u.data[1];break;case 208:this.messageType="channelpressure",this.pressure=u.data[1]&127;break;case 224:this.messageType="pitchbendchange";var d=u.data[2]&127,h=u.data[1]&127;this.pitchBend=(d<<8)+h;break}}return new l(a)},s.exports=i.default},{}]},{},[1])(1)})})(zm)),zm.exports}var Um,rS;function SU(){if(rS)return Um;rS=1;var n=wU();return Um=function(e){return e.listenToMidi=function(t,s){var i={},a=s||{},l=a.gain||function(u){return u/127};return t.onmidimessage=function(u){var d=u.messageType?u:n(u);if(d.messageType==="noteon"&&d.velocity===0&&(d.messageType="noteoff"),!(a.channel&&d.channel!==a.channel))switch(d.messageType){case"noteon":i[d.key]=e.play(d.key,0,{gain:l(d.velocity)});break;case"noteoff":i[d.key]&&(i[d.key].stop(),delete i[d.key]);break}},e},e},Um}var iS;function _U(){return iS||(iS=1,(function(n){var e=gU(),t=yU(),s=vU(),i=bU(),a=SU();function l(u,d,h){return a(i(s(t(e(u,d,h)))))}n.exports&&(n.exports=l),typeof window<"u"&&(window.SamplePlayer=l)})(Om)),Om.exports}function aS(n,e){return Array(e+1).join(n)}function uv(n){return typeof n=="number"}function CU(n){return typeof n=="string"}function jU(n){return typeof n<"u"}function FT(n,e){return Math.pow(2,(n-69)/12)*(e||440)}var DT=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function NU(){return DT}var kU=[0,2,4,5,7,9,11];function Wr(n,e,t){if(typeof n!="string")return null;var s=DT.exec(n);if(!s||!e&&s[4])return null;var i={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt=i.acc[0]==="b"?-i.acc.length:i.acc.length;var a=kU[i.step]+i.alt;return i.chroma=a<0?12+a:a%12,s[3]&&(i.oct=+s[3],i.midi=a+12*(i.oct+1),i.freq=FT(i.midi,t)),e&&(i.tonicOf=s[4]),i}var TU="CDEFGAB";function AU(n){return uv(n)?n<0?aS("b",-n):aS("#",n):""}function PU(n){return uv(n)?""+n:""}function VT(n,e,t){return n===null||typeof n>"u"?null:n.step?VT(n.step,n.alt,n.oct):n<0||n>6?null:TU.charAt(n)+AU(e)+PU(t)}function LT(n){if((uv(n)||CU(n))&&n>=0&&n<128)return+n;var e=Wr(n);return e&&jU(e.midi)?e.midi:null}function EU(n,e){var t=LT(n);return t===null?null:FT(t,e)}function MU(n){return(Wr(n)||{}).letter}function RU(n){return(Wr(n)||{}).acc}function OU(n){return(Wr(n)||{}).pc}function IU(n){return(Wr(n)||{}).step}function FU(n){return(Wr(n)||{}).alt}function DU(n){return(Wr(n)||{}).chroma}function VU(n){return(Wr(n)||{}).oct}const LU=Object.freeze(Object.defineProperty({__proto__:null,acc:RU,alt:FU,build:VT,chroma:DU,freq:EU,letter:MU,midi:LT,oct:VU,parse:Wr,pc:OU,regex:NU,step:IU},Symbol.toStringTag,{value:"Module"})),BU=$M(LU);var $m,oS;function zU(){if(oS)return $m;oS=1;var n=BU;function e(i,a){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(i);this.nameToUrl=a||e.nameToUrl,this.ctx=i,this.instruments={},this.promises=[]}e.prototype.onready=function(i){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(i)},e.prototype.instrument=function(i,a){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var l=this.ctx;if(i=i||"default",i in this.instruments)return this.instruments[i];var u={name:i,play:s(l,a)};if(this.instruments[i]=u,i!=="default"){var d=e.instrument(l,i,a).then(function(h){return u.play=h.play,u});this.promises.push(d),u.onready=function(h){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),d.then(h)}}else u.onready=function(h){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),h()};return u};function t(i,a,l){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(i,a,l).then(function(u){return u.buffers})}e.loadBuffers=t;function s(i,a){return a=a||{},function(l,u,d,h){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var f=l>0&&l<129?+l:n.midi(l),m=f?n.midiToFreq(f,440):null;if(m){d=d||.2,h=h||{};var g=h.destination||a.destination||i.destination,b=h.vcoType||a.vcoType||"sine",S=h.gain||a.gain||.4,x=i.createOscillator();x.type=b,x.frequency.value=m;var w=i.createGain();return w.gain.value=S,x.connect(w),w.connect(g),x.start(u),d>0&&x.stop(u+d),x}}}return e.noteToMidi=n.midi,$m=e,$m}var lS;function UU(){return lS||(lS=1,(function(n){var e=fU(),t=_U();function s(u,d,h){if(arguments.length===1)return function(S,x){return s(u,S,x)};var f=h||{},m=f.isSoundfontURL||i,g=f.nameToUrl||a,b=m(d)?d:g(d,f.soundfont,f.format);return e(u,b,{only:f.only||f.notes}).then(function(S){var x=t(u,S,f).connect(f.destination?f.destination:u.destination);return x.url=b,x.name=d,x})}function i(u){return/\.js(\?.*)?$/i.test(u)}function a(u,d,h){return h=h==="ogg"?h:"mp3",d=d==="FluidR3_GM"?d:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+d+"/"+u+"-"+h+".js"}var l=zU();l.instrument=s,l.nameToUrl=a,n.exports&&(n.exports=l),typeof window<"u"&&(window.Soundfont=l)})(Pm)),Pm.exports}var $U=UU();const cS=Ys($U);class BT{constructor(){this.instruments={},this.audioContext=null,this.isInitialized=!1,this.isLoading=!1,this.bassDrumDuration=.8,this.instrumentLibrary={piano:"acoustic_grand_piano","piano-keyboard":"acoustic_grand_piano","piano-grand":"acoustic_grand_piano","piano-organ":"church_organ",guitar:"acoustic_guitar_steel","strings-guitar":"acoustic_guitar_steel","guitar-acoustic":"acoustic_guitar_steel","guitar-electric":"electric_guitar_clean","guitar-distorted":"distortion_guitar","guitar-nylon":"acoustic_guitar_nylon","strings-violin":"violin","strings-ukulele":"acoustic_guitar_nylon","flute-recorder":"recorder","flute-indian":"flute","flute-concert":"flute","horns-trumpet":"trumpet","horns-trombone":"trombone","horns-french":"french_horn","synth-analog":"electric_piano_1","synth-digital":"electric_piano_2","synth-fm":"electric_piano_1","bass-electric":"electric_bass_finger","bass-upright":"acoustic_bass","bass-synth":"synth_bass_1","pads-warm":"pad_2_warm","pads-strings":"string_ensemble_1","pads-choir":"choir_aahs","leads-square":"lead_1_square","leads-saw":"lead_2_sawtooth","leads-pluck":"lead_6_voice",bass:"electric_bass_finger",violin:"violin",organ:"church_organ",synth:"lead_1_square",strings:"string_ensemble_1",flute:"flute",trumpet:"trumpet"}}async initialize(){if(!(this.isInitialized||this.isLoading)){this.isLoading=!0;try{if(this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log(" Realistic audio context created, state:",this.audioContext.state),console.log(" Environment:","production"),this.audioContext.state==="suspended"){console.log(" Audio context suspended, attempting to resume...");const e=async()=>{if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume(),console.log(" Audio context resumed successfully")}catch(t){console.error(" Failed to resume audio context:",t)}document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0),document.removeEventListener("touchstart",e,!0)};document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),document.addEventListener("touchstart",e,!0);try{await this.audioContext.resume(),console.log(" Audio context resumed immediately")}catch{console.log(" Audio context needs user interaction to resume")}}console.log(" Realistic audio context started, final state:",this.audioContext.state),await this.loadInstruments(["piano","guitar","strings-guitar","violin","flute","trumpet","piano-organ","bass-electric","strings-violin"]),this.isInitialized=!0,this.isLoading=!1,console.log("Realistic audio engine initialized with sampled instruments")}catch(e){throw console.error("Failed to initialize realistic audio engine:",e),this.isLoading=!1,e}}}async loadInstruments(e){if(!this.audioContext)throw new Error("Audio context not initialized");const t=e.map(async s=>{if(!(this.instruments[s]||!(s in this.instrumentLibrary)))try{const i=this.instrumentLibrary[s];console.log(` Loading realistic ${s} instrument (${i})`);const a=await cS.instrument(this.audioContext,i,{format:"mp3",soundfont:"MusyngKite",nameToUrl:(l,u,d)=>`${`https://gleitz.github.io/midi-js-soundfonts/${u}`}/${l}-${d}.js`});this.instruments[s]=a,console.log(` Loaded realistic ${s} instrument successfully`)}catch(i){console.error(` Failed to load ${s} instrument:`,i)}});await Promise.all(t)}async loadAdditionalInstrument(e){if(!(this.instruments[e]||!(e in this.instrumentLibrary)||!this.audioContext))try{console.log(`Loading additional realistic ${e} instrument`);const t=this.instrumentLibrary[e],s=await cS.instrument(this.audioContext,t,{format:"mp3",soundfont:"MusyngKite",nameToUrl:(i,a,l)=>`${`https://gleitz.github.io/midi-js-soundfonts/${a}`}/${i}-${l}.js`});this.instruments[e]=s,console.log(`Loaded additional realistic ${e} instrument successfully`)}catch(t){console.error(`Failed to load additional ${e} instrument:`,t)}}async playNote(e,t,s,i="piano",a=.7,l=!0){this.isInitialized||await this.initialize();let u=i;u in this.instrumentLibrary||(i.includes("piano")||i.includes("keyboard")?u="piano":i.includes("guitar")||i.includes("string")?u="guitar":i.includes("violin")?u="strings-violin":i.includes("flute")?u="flute-concert":i.includes("trumpet")||i.includes("horn")?u="horns-trumpet":i.includes("bass")?u="bass-electric":i.includes("organ")?u="piano-organ":i.includes("synth")?u="synth-analog":i.includes("lead")?u="leads-square":i.includes("pad")?u="pads-warm":u="piano"),this.instruments[u]||await this.loadAdditionalInstrument(u);const d=this.instruments[u];if(!d){console.warn(`Realistic instrument ${u} not available, skipping playback`);return}try{const h=`${e}${t}`,f=l?s:Math.min(s,.5),m=Math.max(.1,Math.min(1,a)),g=d.play(h,this.audioContext.currentTime,{duration:f,gain:m});console.log(`Playing realistic ${u}: ${h} for ${f}s`)}catch(h){console.error(`Error playing realistic note ${e}${t} on ${u}:`,h)}}async playDrumSound(e,t=.7){if(this.isInitialized||await this.initialize(),this.instruments.drums||console.log(" Using synthetic drums for realistic mode (soundfont drums are broken)"),console.log(` Playing synthetic drum in realistic mode: ${e}`),!this.audioContext){console.error(" AudioContext not available for synthetic drums");return}const s=this.audioContext.currentTime;try{switch(e){case"kick":this.playSyntheticKick(s,t);break;case"bass":this.playSyntheticBassDrum(s,t);break;case"snare":this.playSyntheticSnare(s,t);break;case"hihat":this.playSyntheticHihat(s,t);break;case"openhat":this.playSyntheticOpenHat(s,t);break;case"tom":this.playSyntheticTom(s,t);break;case"clap":this.playSyntheticClap(s,t);break;case"crash":this.playSyntheticCrash(s,t);break;default:console.warn(` Unknown drum type: ${e}`)}}catch(i){console.error(" Failed to play synthetic drum:",i)}}stopAllSounds(){Object.values(this.instruments).forEach(e=>{e&&e.stop&&e.stop()})}setMasterVolume(e){if(this.audioContext){const t=Math.max(0,Math.min(1,e));console.log(`Setting master volume to ${t}`)}}getAvailableInstruments(){return Object.keys(this.instrumentLibrary)}isReady(){return this.isInitialized&&!this.isLoading}playSyntheticKick(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),l=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(65,e),s.frequency.exponentialRampToValueAtTime(35,e+.15),i.type="triangle",i.frequency.setValueAtTime(1200,e),i.frequency.exponentialRampToValueAtTime(800,e+.01),u.type="lowpass",u.frequency.setValueAtTime(120,e),u.Q.setValueAtTime(8,e);const d=Math.max(.001,t*1.8);a.gain.setValueAtTime(d,e),a.gain.exponentialRampToValueAtTime(d*.6,e+.08),a.gain.exponentialRampToValueAtTime(.001,e+.4);const h=Math.max(.001,t*.15);l.gain.setValueAtTime(.001,e),l.gain.exponentialRampToValueAtTime(h,e+.003),l.gain.exponentialRampToValueAtTime(.001,e+.02),s.connect(u),u.connect(a),a.connect(this.audioContext.destination),i.connect(l),l.connect(this.audioContext.destination),s.start(e),i.start(e),s.stop(e+.4),i.stop(e+.015)}catch(s){console.error(" Kick drum error:",s)}}playSyntheticSnare(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createOscillator(),a=this.audioContext.createGain(),l=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.sampleRate*.12,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),f=h.getChannelData(0);for(let b=0;b<d;b++){const S=Math.pow(1-b/d,2);f[b]=(Math.random()*2-1)*S}s.buffer=h,i.type="triangle",i.frequency.setValueAtTime(240,e),i.frequency.exponentialRampToValueAtTime(180,e+.08),u.type="bandpass",u.frequency.setValueAtTime(2500,e),u.Q.setValueAtTime(2.5,e);const m=Math.max(.001,t*1.4);a.gain.setValueAtTime(m,e),a.gain.exponentialRampToValueAtTime(.001,e+.12);const g=Math.max(.001,t*.6);l.gain.setValueAtTime(g,e),l.gain.exponentialRampToValueAtTime(.001,e+.08),s.connect(u),u.connect(a),a.connect(this.audioContext.destination),i.connect(l),l.connect(this.audioContext.destination),s.start(e),i.start(e),i.stop(e+.08)}catch(s){console.error(" Snare drum error:",s)}}playSyntheticHihat(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),l=.05,u=this.audioContext.sampleRate*l,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const g=Math.pow(1-m/u,4);h[m]=(Math.random()*2-1)*g}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(1e4,e),a.Q.setValueAtTime(1,e);const f=Math.max(.001,t*1.2);i.gain.setValueAtTime(f,e),i.gain.exponentialRampToValueAtTime(.001,e+l),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Hi-hat error:",s)}}playSyntheticTom(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(120,e),s.frequency.exponentialRampToValueAtTime(80,e+.3),a.type="lowpass",a.frequency.setValueAtTime(600,e),a.Q.setValueAtTime(3,e);const l=Math.max(.001,t*1.4);i.gain.setValueAtTime(l,e),i.gain.exponentialRampToValueAtTime(l*.5,e+.1),i.gain.exponentialRampToValueAtTime(.001,e+.4),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e),s.stop(e+.4)}catch(s){console.error(" Tom drum error:",s)}}playSyntheticOpenHat(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),l=.25,u=this.audioContext.sampleRate*l,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const g=Math.pow(1-m/u,2);h[m]=(Math.random()*2-1)*g}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(8e3,e),a.Q.setValueAtTime(1,e);const f=Math.max(.001,t*1.2);i.gain.setValueAtTime(f,e),i.gain.exponentialRampToValueAtTime(.001,e+l),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Open hi-hat error:",s)}}playSyntheticClap(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),l=this.audioContext.createBiquadFilter(),u=.08,d=this.audioContext.sampleRate*u,h=this.audioContext.createBuffer(1,d,this.audioContext.sampleRate),f=h.getChannelData(0);for(let g=0;g<d;g++){const b=g<d*.1?1:Math.pow(1-(g-d*.1)/(d*.9),4);f[g]=(Math.random()*2-1)*b}s.buffer=h,a.type="highpass",a.frequency.setValueAtTime(800,e),a.Q.setValueAtTime(1,e),l.type="bandpass",l.frequency.setValueAtTime(2200,e),l.Q.setValueAtTime(3,e);const m=Math.max(.001,t*1.3);i.gain.setValueAtTime(m,e),i.gain.exponentialRampToValueAtTime(m*.3,e+.01),i.gain.exponentialRampToValueAtTime(.001,e+u),s.connect(a),a.connect(l),l.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Clap error:",s)}}playSyntheticCrash(e,t){if(this.audioContext)try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter(),l=1.2,u=this.audioContext.sampleRate*l,d=this.audioContext.createBuffer(1,u,this.audioContext.sampleRate),h=d.getChannelData(0);for(let m=0;m<u;m++){const g=Math.pow(1-m/u,.3);h[m]=(Math.random()*2-1)*g}s.buffer=d,a.type="highpass",a.frequency.setValueAtTime(4e3,e),a.Q.setValueAtTime(.3,e);const f=Math.max(.001,t*1);i.gain.setValueAtTime(f,e),i.gain.exponentialRampToValueAtTime(f*.4,e+.2),i.gain.exponentialRampToValueAtTime(.001,e+l),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e)}catch(s){console.error(" Crash cymbal error:",s)}}playSyntheticBassDrum(e,t){if(this.audioContext)try{const s=this.audioContext.createOscillator(),i=this.audioContext.createGain(),a=this.audioContext.createBiquadFilter();s.type="sine",s.frequency.setValueAtTime(50,e),s.frequency.exponentialRampToValueAtTime(35,e+.2),a.type="lowpass",a.frequency.setValueAtTime(100,e),a.Q.setValueAtTime(2,e);const l=this.bassDrumDuration,u=Math.max(.001,t*1.1);i.gain.setValueAtTime(u,e),i.gain.exponentialRampToValueAtTime(u*.6,e+.15),i.gain.exponentialRampToValueAtTime(u*.2,e+l*.6),i.gain.exponentialRampToValueAtTime(.001,e+l),s.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.start(e),s.stop(e+l)}catch(s){console.error(" Bass drum error:",s)}}}const Dr=new BT;let Ja=!1;const io=[];let Rs=null,uh=!1;function Rd(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}async function uS(){if(!(!Rd()||uh))try{Rs||(Rs=new(window.AudioContext||window.webkitAudioContext)),Rs.state==="suspended"&&await Rs.resume();const n=Rs.createOscillator(),e=Rs.createGain();n.connect(e),e.connect(Rs.destination),e.gain.setValueAtTime(0,Rs.currentTime),n.frequency.setValueAtTime(440,Rs.currentTime),n.start(Rs.currentTime),n.stop(Rs.currentTime+.1),uh=!0,console.log(" iOS audio enabled successfully"),io.forEach(t=>t()),io.length=0}catch(n){console.error("Failed to enable iOS audio:",n)}}function qU(n,e=4){const s={C:0,"C#":1,DB:1,D:2,"D#":3,EB:3,E:4,F:5,"F#":6,GB:6,G:7,"G#":8,AB:8,A:9,"A#":10,BB:10,B:11}[n.toUpperCase()];return s===void 0?(console.warn(`Unknown note: ${n}`),440):440*Math.pow(2,e-4+(s-9)/12)}function GU(){const{playDrumSound:n}=tr();let e=[],t=!1;return{playPattern:(s,i=120)=>{if(e.forEach(a=>clearTimeout(a)),e=[],t=!0,Array.isArray(s))s.forEach((a,l)=>{if(a.active){const u=setTimeout(()=>{t&&n(a.sound||"kick",a.velocity||.7)},l*(6e4/(i*4)));e.push(u)}});else if(s&&typeof s=="object"){const a=6e4/(i*4),l=16;for(let u=0;u<l;u++){const d=setTimeout(()=>{t&&Object.entries(s).forEach(([h,f])=>{Array.isArray(f)&&f[u]&&n(h,.7)})},u*a);e.push(d)}}},stopPattern:()=>{t=!1,e.forEach(s=>clearTimeout(s)),e=[]},isPlaying:t}}function tr(){const[n,e]=v.useState(Ja),[t,s]=v.useState(!0),{toast:i}=yn(),a=v.useCallback(async()=>{if(!Ja)try{await Tl.initialize(),await Dr.initialize(),typeof window<"u"&&(window.syntheticAudioEngine=Tl),Ja=!0,e(!0),io.forEach(f=>f()),i({title:"Audio System Ready",description:"Realistic and synthetic audio engines initialized successfully."})}catch(f){console.error("Failed to initialize audio:",f),i({title:"Audio Initialization Failed",description:"Could not initialize audio system. Some features may not work.",variant:"destructive"})}},[i]);v.useEffect(()=>{const f=()=>e(!0);return io.push(f),()=>{const m=io.indexOf(f);m>-1&&io.splice(m,1)}},[]);const l=v.useCallback(async(f,m=4,g=.5,b="piano",S=.7,x=!0)=>{try{Ja||await a();let w;if(typeof f=="number"){const N=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],E=Math.floor(f/12)-1,C=f%12;w=N[C],m=E}else w=f;if(console.log(`Audio Mode Check: useRealisticSounds=${t}, realisticAudio.isReady()=${Dr.isReady()}`),t&&Dr.isReady())console.log(`Playing REALISTIC ${b}: ${w}${m}`),await Dr.playNote(w,m,g,b,S,x);else{console.log(`Playing SYNTHETIC ${b}: ${w}${m}`);const N=qU(w,m);await Tl.playNote(N,g,S,b,x)}}catch(w){console.error("Failed to play note:",w)}},[a,t]),u=v.useCallback(async(f,m=.5)=>{try{Ja||await a(),t&&Dr.isReady()?await Dr.playDrumSound(f,m):Tl.playDrum(f,m)}catch(g){console.error("Failed to play drum sound:",g)}},[a,t]),d=v.useCallback(f=>{try{Tl.setMasterVolume(f/100)}catch(m){console.error("Failed to set master volume:",m)}},[]);v.useEffect(()=>{const f=async()=>{Rd()&&!uh&&await uS(),Ja||await a(),document.removeEventListener("click",f),document.removeEventListener("keydown",f),document.removeEventListener("touchstart",f)};return document.addEventListener("click",f),document.addEventListener("keydown",f),document.addEventListener("touchstart",f),()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",f),document.removeEventListener("touchstart",f)}},[a]);const h=v.useCallback(()=>{s(f=>{const m=!f;return console.log(` Audio Mode Toggled: ${f?"REALISTIC":"SYNTHETIC"}  ${m?"REALISTIC":"SYNTHETIC"}`),m})},[]);return{playNote:l,playDrumSound:u,setMasterVolume:d,isInitialized:n,initialize:a,useRealisticSounds:t,toggleRealisticSounds:h,isIOSDevice:Rd(),needsIOSAudioEnable:Rd()&&!uh,enableIOSAudio:uS}}function WU({currentTool:n="Beat Maker",activeTab:e="beatmaker"}){const[t,s]=v.useState(!1),[i,a]=v.useState("00:00"),[l]=v.useState("02:45"),[u]=v.useState(120),[d]=v.useState(1),[h]=v.useState(1),[f,m]=v.useState(75),[g,b]=v.useState(""),[S,x]=v.useState(!1),[w,N]=v.useState(!1),[E,C]=v.useState(!0),[A,P]=v.useState(!1),[R,T]=v.useState(!1),[j,O]=v.useState({x:50,y:50}),[I,D]=v.useState(!1),[B,H]=v.useState({x:0,y:0}),[z,G]=v.useState(!1),{setMasterVolume:Q,initialize:X,isInitialized:q}=tr(),{playPattern:U,stopPattern:Y}=GU(),M=v.useContext(Ca),{toast:W}=yn(),{data:J}=Ti({queryKey:["/api/playlists"],initialData:[]}),de=gt({mutationFn:async ke=>(await ot("POST","/api/playlists",{name:ke,description:`Playlist created on ${new Date().toLocaleDateString()}`,isPublic:!1})).json(),onSuccess:ke=>{Dy.invalidateQueries({queryKey:["/api/playlists"]}),b(""),x(!1),W({title:"Playlist Created",description:`${ke.name} has been created!`})}}),ce=async()=>{try{if(q||(console.log(" Initializing audio..."),await X()),t)console.log(" Stopping playback..."),Y(),M.stopFullSong(),s(!1);else{console.log(` Starting playback - Mode: ${M.playMode}, Tool: ${e}`);const ke=M.currentPattern&&Object.keys(M.currentPattern).length>0?M.currentPattern:{kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]};if(console.log(" Playing pattern:",ke),U(ke,M.bpm||120),M.currentPlaylist?.songs?.length>0)console.log(" Playing from active playlist"),await M.playFullSong();else{console.log(" No playlist selected - main transport is for playlist playback only"),W({title:"No Playlist Selected",description:"Main transport controls are for playlist playback. Select a playlist or use tool-specific play buttons.",variant:"default"}),s(!1);return}s(!0)}}catch(ke){console.error(" Play button error:",ke),s(!1)}},pe=()=>{Y(),s(!1),a("00:00")},F=ke=>{const it=Number(ke.target.value);m(it),Q(it)},L=()=>{if(M.currentPlaylist&&M.currentPlaylist.songs){const ke=M.currentPlaylistIndex>0?M.currentPlaylistIndex-1:M.currentPlaylist.songs.length-1;M.setCurrentPlaylistIndex(ke),console.log(` Previous track: ${ke+1}/${M.currentPlaylist.songs.length}`)}else W({title:"No Playlist Active",description:"Previous/Next buttons work with playlists only.",variant:"default"})},re=()=>{if(M.currentPlaylist&&M.currentPlaylist.songs){const ke=M.currentPlaylistIndex<M.currentPlaylist.songs.length-1?M.currentPlaylistIndex+1:0;M.setCurrentPlaylistIndex(ke),console.log(` Next track: ${ke+1}/${M.currentPlaylist.songs.length}`)}else W({title:"No Playlist Active",description:"Previous/Next buttons work with playlists only.",variant:"default"})},oe=async ke=>{try{const lt=await(await ot("GET",`/api/playlists/${ke.id}/songs`,{})).json();M.setCurrentPlaylist({...ke,songs:lt}),M.setCurrentPlaylistIndex(0),W({title:"Active Playlist Set",description:`${ke.name} is now active. Use play button to start.`})}catch{W({title:"Error",description:"Failed to set active playlist.",variant:"destructive"})}},we=()=>{if(!g.trim()){W({title:"Invalid Name",description:"Please enter a playlist name.",variant:"destructive"});return}de.mutate(g.trim())},te=async()=>{try{if(q||(console.log(" Initializing audio for tool..."),await X()),z)console.log(" Stopping tool audio..."),Y(),G(!1);else{console.log(` Playing ${e} tool audio - Mode: ${M.playMode}`);const ke=M.currentPattern&&Object.keys(M.currentPattern).length>0?M.currentPattern:{kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]};U(ke,M.bpm||120),M.playMode==="all"?(console.log(" Playing ALL tools combined"),await M.playFullSong()):(console.log(` Playing current tool only: ${e}`),await M.playCurrentAudio()),G(!0)}}catch(ke){console.error(" Tool play button error:",ke),G(!1)}},fe=()=>{C(!1),P(!0),T(!1);const ke=window.innerWidth/2-400,it=window.innerHeight/2-100;O({x:Math.max(0,ke),y:Math.max(0,it)})},ve=()=>{P(!1),C(!0),T(!1)},he=()=>{T(!R)},Ce=ke=>{if(!A)return;const it=ke.target;it.closest("button")||it.closest('[role="button"]')||(D(!0),H({x:ke.clientX-j.x,y:ke.clientY-j.y}))},Le=ke=>{if(!I||!A)return;const it=ke.clientX-B.x,lt=ke.clientY-B.y,Sn=window.innerWidth-800,Kr=window.innerHeight-200;O({x:Math.max(0,Math.min(it,Sn)),y:Math.max(0,Math.min(lt,Kr))})},ze=()=>{D(!1)};v.useEffect(()=>{if(I)return document.addEventListener("mousemove",Le),document.addEventListener("mouseup",ze),()=>{document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",ze)}},[I,B]);const qe=A?`fixed bg-studio-panel border border-gray-600 rounded-lg shadow-2xl px-6 z-50 ${I?"cursor-grabbing":""} ${R?"h-auto pb-2 min-w-[400px]":"py-4 min-w-[800px]"}`:"bg-studio-panel border-t border-gray-700 px-6 py-4",et=A?{left:`${j.x}px`,top:`${j.y}px`,transform:"none"}:{};return r.jsxs("div",{className:qe,style:et,onMouseDown:A?Ce:void 0,children:[A&&r.jsxs("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gray-700 rounded-t-lg flex items-center justify-between px-3 cursor-grab hover:bg-gray-600 transition-colors",onMouseDown:Ce,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]}),r.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Transport Controls"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ne,{onClick:he,size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-xs hover:bg-yellow-600 bg-yellow-500 border border-yellow-400",title:R?"Expand controls":"Minimize controls",children:r.jsx("span",{className:"text-black text-lg font-bold leading-none",children:R?"+":""})}),r.jsx(ne,{onClick:ve,size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-xs hover:bg-red-600 bg-red-500 border border-red-400",title:"Close floating window - Dock to bottom",children:r.jsx("span",{className:"text-white text-lg font-bold leading-none",children:""})})]})]}),A&&R&&r.jsxs("div",{className:"mt-8 flex items-center justify-between gap-4 px-4 py-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{onClick:L,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-8 h-8 rounded-full flex items-center justify-center transition-colors",title:"Previous Song",children:r.jsx("i",{className:"fas fa-step-backward text-xs"})}),r.jsx(ne,{onClick:ce,variant:"default",className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${t?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,title:t?"Stop":"Play",children:r.jsx("i",{className:`fas ${t?"fa-stop":"fa-play"} text-white`})}),r.jsx(ne,{onClick:re,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-8 h-8 rounded-full flex items-center justify-center transition-colors",title:"Next Song",children:r.jsx("i",{className:"fas fa-step-forward text-xs"})})]}),r.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[r.jsx("i",{className:"fas fa-volume-down text-gray-400 text-xs"}),r.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:ke=>{const it=parseInt(ke.target.value);m(it),Q(it/100)},className:"flex-1 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer slider","aria-label":`Master volume control: ${f}%`,title:`Volume: ${f}%`}),r.jsxs("span",{className:"text-xs text-gray-300 w-8",children:[f,"%"]})]})]}),(!A||!R)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-3 flex items-center justify-between gap-4 p-3 bg-gray-800 rounded-lg relative mt-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xs font-medium text-gray-300",children:"Tool Audio:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Current"}),r.jsx(zs,{checked:M.playMode==="all",onCheckedChange:ke=>M.setPlayMode(ke?"all":"current"),className:"data-[state=checked]:bg-studio-accent","aria-label":"Toggle between current tool audio and all tools audio"}),r.jsx("span",{className:"text-xs text-gray-400",children:"All"})]}),A?r.jsx(ne,{onClick:ve,size:"sm",variant:"outline",className:"h-6 w-12 text-xs bg-blue-600 hover:bg-blue-500 text-white border-blue-500",title:"Dock to bottom",children:"Dock"}):r.jsx(ne,{onClick:fe,size:"sm",variant:"outline",className:"h-6 w-12 text-xs bg-green-600 hover:bg-green-500 text-white border-green-500",title:"Float controls",children:"Float"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(ne,{onClick:te,className:`h-8 w-16 text-xs ${z?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,children:[z?"Stop":"Play"," Tool"]})})]}),r.jsx("div",{className:"mb-2 text-xs text-gray-400 text-center",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-900/30 p-2 rounded",children:[r.jsx("strong",{children:"Playlist Controls:"})," ",M.currentPlaylist?.songs?.length>0?`"${M.currentPlaylist.name}" (${M.currentPlaylist.songs.length} songs)`:"No playlist selected",r.jsxs("div",{className:"text-xs mt-1 text-blue-300",children:["Status: ",t?"Playing":"Ready"]})]}),r.jsxs("div",{className:"bg-green-900/30 p-2 rounded",children:[r.jsx("strong",{children:"Tool Audio:"})," ",M.playMode==="current"?`${n} only`:"All tools combined",r.jsxs("div",{className:"text-xs mt-1 text-green-300",children:["Status: ",z?"Playing":"Ready"]})]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ne,{onClick:L,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Previous Song in Playlist",children:r.jsx("i",{className:"fas fa-step-backward"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Previous"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ne,{onClick:ce,className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${t?"bg-red-600 hover:bg-red-500":"bg-studio-success hover:bg-green-500"}`,title:t?"Pause - Stop playing current beat":"Play - Start playing your beat pattern",children:r.jsx("i",{className:`fas ${t?"fa-pause":"fa-play"} text-lg`})}),r.jsx("span",{className:"text-xs text-gray-300 font-medium",children:t?"Pause":"Play"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ne,{onClick:pe,className:"bg-red-600 hover:bg-red-500 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Stop - Stop playback and reset to beginning",children:r.jsx("i",{className:"fas fa-stop"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Stop"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ne,{onClick:re,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Next Song in Playlist",children:r.jsx("i",{className:"fas fa-step-forward"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Next"})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ne,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors",title:"Loop - Repeat current pattern continuously",children:r.jsx("i",{className:"fas fa-redo"})}),r.jsx("span",{className:"text-xs text-gray-400",children:"Loop"})]})]})}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-mono text-lg",children:i}),r.jsxs("span",{className:"text-gray-400 ml-2",children:["/ ",l]})]}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"font-mono",children:["Bar ",d]}),r.jsxs("span",{className:"text-gray-400 ml-2",children:["Beat ",h]})]}),r.jsx("div",{className:"text-sm",children:r.jsxs("span",{className:"font-mono",children:[u," BPM"]})})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Playlists:"}),r.jsxs(Ye,{value:M.currentPlaylist?.id||"",onValueChange:ke=>{const it=J?.find(lt=>lt.id===ke);it&&oe(it)},children:[r.jsx(He,{className:"w-32 h-8 bg-gray-700 border-gray-600 text-xs","aria-label":"Select playlist",children:r.jsx(Xe,{placeholder:"Select..."})}),r.jsx(Ke,{className:"bg-gray-800 border-gray-600",children:J?.map(ke=>r.jsx(le,{value:ke.id,children:ke.name},ke.id))})]})]}),r.jsxs(Sx,{open:S,onOpenChange:x,children:[r.jsx(_x,{asChild:!0,children:r.jsxs(ne,{variant:"secondary",size:"sm",className:"h-8 bg-gray-700 hover:bg-gray-600 text-xs",children:[r.jsx("i",{className:"fas fa-plus mr-1"}),"New"]})}),r.jsxs(Wh,{className:"bg-gray-800 border-gray-600",children:[r.jsx(Hh,{children:r.jsx(Kh,{children:"Create New Playlist"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(vt,{placeholder:"Enter playlist name...",value:g,onChange:ke=>b(ke.target.value),onKeyPress:ke=>ke.key==="Enter"&&we(),className:"bg-gray-700 border-gray-600","aria-label":"New playlist name"}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(ne,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),r.jsx(ne,{onClick:we,disabled:de.isPending,children:de.isPending?"Creating...":"Create"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-volume-up text-gray-400"}),r.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:F,className:"w-20 h-2 bg-gray-700 rounded-lg appearance-none slider","aria-label":`Playlist volume control: ${f}%`,title:`Playlist volume: ${f}%`}),r.jsxs("span",{className:"text-sm text-gray-400 w-8",children:[f,"%"]})]})]})]})]})]})}const cs=v.forwardRef(({className:n,...e},t)=>r.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));cs.displayName="Textarea";function Rc({value:n,onValueChange:e,className:t}){const{data:s=[]}=Ti({queryKey:["/api/ai/providers"]}),i=s.filter(u=>u.available);v.useEffect(()=>{i.length>0&&!i.some(u=>u.id===n)&&e(i[0].id)},[i,n,e]);const a=u=>{switch(u){case"openai":return r.jsx(Xw,{className:"h-4 w-4"});case"gemini":return r.jsx(Kn,{className:"h-4 w-4"});case"grok":return r.jsx(en,{className:"h-4 w-4"});case"structure":return r.jsx(Gy,{className:"h-4 w-4"});case"musicgen":return r.jsx(Mt,{className:"h-4 w-4"});default:return r.jsx(en,{className:"h-4 w-4"})}},l=u=>{switch(u){case"openai":return"text-emerald-400";case"gemini":return"text-blue-400";case"grok":return"text-purple-400";case"structure":return"text-orange-400";case"musicgen":return"text-pink-400";default:return"text-purple-400"}};return i.length===0?r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(Xw,{className:"h-4 w-4"}),r.jsx("span",{children:"No AI providers available"})]}):r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{className:`w-48 ${t}`,children:r.jsx(Xe,{children:i.find(u=>u.id===n)&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:l(n),children:a(n)}),r.jsx("span",{children:i.find(u=>u.id===n)?.name})]})})}),r.jsx(Ke,{children:i.map(u=>r.jsx(le,{value:u.id,children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:l(u.id),children:a(u.id)}),r.jsx("span",{className:"font-medium",children:u.name}),r.jsx(Pe,{variant:"outline",className:"text-xs",children:"Available"})]}),r.jsx("p",{className:"text-xs text-muted-foreground max-w-64",children:u.description})]})},u.id))})]})}function HU(){const[n,e]=v.useState("javascript"),[t,s]=v.useState("python"),[i,a]=v.useState("grok"),[l,u]=v.useState(`function fibonacci(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// Generate first 10 fibonacci numbers
for (let i = 0; i < 10; i++) {
    console.log(fibonacci(i));
}`),[d,h]=v.useState(""),{toast:f}=yn(),m=gt({mutationFn:async x=>(await ot("POST","/api/code/translate",x)).json(),onSuccess:x=>{h(x.translatedCode),f({title:"Translation Complete",description:"Code has been successfully translated."})},onError:x=>{f({title:"Translation Failed",description:"Failed to translate code. Please try again.",variant:"destructive"})}}),g=()=>{if(!l.trim()){f({title:"No Code Provided",description:"Please enter some code to translate.",variant:"destructive"});return}m.mutate({sourceCode:l,sourceLanguage:n,targetLanguage:t,aiProvider:i})},b=()=>{navigator.clipboard.writeText(d),f({title:"Copied to Clipboard",description:"Translated code has been copied to clipboard."})},S=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"csharp",label:"C#"}];return r.jsxs("div",{className:"h-full p-6 flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Code Translator"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Rc,{value:i,onValueChange:a}),r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:S.map(x=>r.jsx(le,{value:x.value,children:x.label},x.value))})]}),r.jsx("i",{className:"fas fa-arrow-right text-studio-accent"}),r.jsxs(Ye,{value:t,onValueChange:s,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:S.map(x=>r.jsx(le,{value:x.value,children:x.label},x.value))})]}),r.jsx(ne,{onClick:g,disabled:m.isPending,className:"bg-studio-accent hover:bg-blue-500",children:m.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Translating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Translate"]})})]})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Source Code"}),r.jsx("span",{className:"text-sm text-gray-400 capitalize",children:n})]}),r.jsx(cs,{value:l,onChange:x=>u(x.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Enter your source code here..."})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Translated Code"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-400 capitalize",children:t}),d&&r.jsxs(ne,{onClick:b,variant:"ghost",size:"sm",className:"text-studio-accent hover:text-blue-300",children:[r.jsx("i",{className:"fas fa-copy mr-1"}),"Copy"]})]})]}),r.jsx("div",{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap h-full overflow-auto",children:d||"Translated code will appear here..."})})]})]}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsx("div",{className:"flex items-center space-x-4",children:m.isSuccess?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full"}),r.jsx("span",{className:"text-sm",children:"Translation completed successfully with high accuracy"})]}):m.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-studio-warning rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm",children:"Translating code using AI..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Ready to translate code"})]})})})]})}var fp="Tabs",[KU,aK]=En(fp,[Oh]),zT=Oh(),[QU,dv]=KU(fp),UT=v.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:d="automatic",...h}=n,f=Po(u),[m,g]=mr({prop:s,onChange:i,defaultProp:a??"",caller:fp});return r.jsx(QU,{scope:t,baseId:pr(),value:m,onValueChange:g,orientation:l,dir:f,activationMode:d,children:r.jsx(Me.div,{dir:f,"data-orientation":l,...h,ref:e})})});UT.displayName=fp;var $T="TabsList",qT=v.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...i}=n,a=dv($T,t),l=zT(t);return r.jsx(pN,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(Me.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});qT.displayName=$T;var GT="TabsTrigger",WT=v.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:i=!1,...a}=n,l=dv(GT,t),u=zT(t),d=QT(l.baseId,s),h=YT(l.baseId,s),f=s===l.value;return r.jsx(fN,{asChild:!0,...u,focusable:!i,active:f,children:r.jsx(Me.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:Se(n.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:Se(n.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:Se(n.onFocus,()=>{const m=l.activationMode!=="manual";!f&&!i&&m&&l.onValueChange(s)})})})});WT.displayName=GT;var HT="TabsContent",KT=v.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:i,children:a,...l}=n,u=dv(HT,t),d=QT(u.baseId,s),h=YT(u.baseId,s),f=s===u.value,m=v.useRef(f);return v.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),r.jsx(Mn,{present:i||f,children:({present:g})=>r.jsx(Me.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:h,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:m.current?"0s":void 0},children:g&&a})})});KT.displayName=HT;function QT(n,e){return`${n}-trigger-${e}`}function YT(n,e){return`${n}-content-${e}`}var YU=UT,XT=qT,ZT=WT,JT=KT;const Bi=YU,Hr=v.forwardRef(({className:n,...e},t)=>r.jsx(XT,{ref:t,className:Ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Hr.displayName=XT.displayName;const dt=v.forwardRef(({className:n,...e},t)=>r.jsx(ZT,{ref:t,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));dt.displayName=ZT.displayName;const ht=v.forwardRef(({className:n,...e},t)=>r.jsx(JT,{ref:t,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ht.displayName=JT.displayName;var eA=["PageUp","PageDown"],tA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],nA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Lo="Slider",[my,XU,ZU]=cc(Lo),[sA,oK]=En(Lo,[ZU]),[JU,mp]=sA(Lo),rA=v.forwardRef((n,e)=>{const{name:t,min:s=0,max:i=100,step:a=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[s],value:f,onValueChange:m=()=>{},onValueCommit:g=()=>{},inverted:b=!1,form:S,...x}=n,w=v.useRef(new Set),N=v.useRef(0),C=l==="horizontal"?e$:t$,[A=[],P]=mr({prop:f,defaultProp:h,onChange:D=>{[...w.current][N.current]?.focus(),m(D)}}),R=v.useRef(A);function T(D){const B=a$(A,D);I(D,B)}function j(D){I(D,N.current)}function O(){const D=R.current[N.current];A[N.current]!==D&&g(A)}function I(D,B,{commit:H}={commit:!1}){const z=u$(a),G=d$(Math.round((D-s)/a)*a+s,z),Q=Ql(G,[s,i]);P((X=[])=>{const q=r$(X,Q,B);if(c$(q,d*a)){N.current=q.indexOf(Q);const U=String(q)!==String(X);return U&&H&&g(q),U?q:X}else return X})}return r.jsx(JU,{scope:n.__scopeSlider,name:t,disabled:u,min:s,max:i,valueIndexToChangeRef:N,thumbs:w.current,values:A,orientation:l,form:S,children:r.jsx(my.Provider,{scope:n.__scopeSlider,children:r.jsx(my.Slot,{scope:n.__scopeSlider,children:r.jsx(C,{"aria-disabled":u,"data-disabled":u?"":void 0,...x,ref:e,onPointerDown:Se(x.onPointerDown,()=>{u||(R.current=A)}),min:s,max:i,inverted:b,onSlideStart:u?void 0:T,onSlideMove:u?void 0:j,onSlideEnd:u?void 0:O,onHomeKeyDown:()=>!u&&I(s,0,{commit:!0}),onEndKeyDown:()=>!u&&I(i,A.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:B})=>{if(!u){const G=eA.includes(D.key)||D.shiftKey&&tA.includes(D.key)?10:1,Q=N.current,X=A[Q],q=a*G*B;I(X+q,Q,{commit:!0})}}})})})})});rA.displayName=Lo;var[iA,aA]=sA(Lo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),e$=v.forwardRef((n,e)=>{const{min:t,max:s,dir:i,inverted:a,onSlideStart:l,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...f}=n,[m,g]=v.useState(null),b=We(e,C=>g(C)),S=v.useRef(void 0),x=Po(i),w=x==="ltr",N=w&&!a||!w&&a;function E(C){const A=S.current||m.getBoundingClientRect(),P=[0,A.width],T=hv(P,N?[t,s]:[s,t]);return S.current=A,T(C-A.left)}return r.jsx(iA,{scope:n.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:r.jsx(oA,{dir:x,"data-orientation":"horizontal",...f,ref:b,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const A=E(C.clientX);l?.(A)},onSlideMove:C=>{const A=E(C.clientX);u?.(A)},onSlideEnd:()=>{S.current=void 0,d?.()},onStepKeyDown:C=>{const P=nA[N?"from-left":"from-right"].includes(C.key);h?.({event:C,direction:P?-1:1})}})})}),t$=v.forwardRef((n,e)=>{const{min:t,max:s,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d,...h}=n,f=v.useRef(null),m=We(e,f),g=v.useRef(void 0),b=!i;function S(x){const w=g.current||f.current.getBoundingClientRect(),N=[0,w.height],C=hv(N,b?[s,t]:[t,s]);return g.current=w,C(x-w.top)}return r.jsx(iA,{scope:n.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:r.jsx(oA,{"data-orientation":"vertical",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const w=S(x.clientY);a?.(w)},onSlideMove:x=>{const w=S(x.clientY);l?.(w)},onSlideEnd:()=>{g.current=void 0,u?.()},onStepKeyDown:x=>{const N=nA[b?"from-bottom":"from-top"].includes(x.key);d?.({event:x,direction:N?-1:1})}})})}),oA=v.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:u,onStepKeyDown:d,...h}=n,f=mp(Lo,t);return r.jsx(Me.span,{...h,ref:e,onKeyDown:Se(n.onKeyDown,m=>{m.key==="Home"?(l(m),m.preventDefault()):m.key==="End"?(u(m),m.preventDefault()):eA.concat(tA).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:Se(n.onPointerDown,m=>{const g=m.target;g.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(g)?g.focus():s(m)}),onPointerMove:Se(n.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&i(m)}),onPointerUp:Se(n.onPointerUp,m=>{const g=m.target;g.hasPointerCapture(m.pointerId)&&(g.releasePointerCapture(m.pointerId),a(m))})})}),lA="SliderTrack",cA=v.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=mp(lA,t);return r.jsx(Me.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});cA.displayName=lA;var gy="SliderRange",uA=v.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=mp(gy,t),a=aA(gy,t),l=v.useRef(null),u=We(e,l),d=i.values.length,h=i.values.map(g=>pA(g,i.min,i.max)),f=d>1?Math.min(...h):0,m=100-Math.max(...h);return r.jsx(Me.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:u,style:{...n.style,[a.startEdge]:f+"%",[a.endEdge]:m+"%"}})});uA.displayName=gy;var yy="SliderThumb",dA=v.forwardRef((n,e)=>{const t=XU(n.__scopeSlider),[s,i]=v.useState(null),a=We(e,u=>i(u)),l=v.useMemo(()=>s?t().findIndex(u=>u.ref.current===s):-1,[t,s]);return r.jsx(n$,{...n,ref:a,index:l})}),n$=v.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:i,...a}=n,l=mp(yy,t),u=aA(yy,t),[d,h]=v.useState(null),f=We(e,E=>h(E)),m=d?l.form||!!d.closest("form"):!0,g=Ph(d),b=l.values[s],S=b===void 0?0:pA(b,l.min,l.max),x=i$(s,l.values.length),w=g?.[u.size],N=w?o$(w,S,u.direction):0;return v.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${S}% + ${N}px)`},children:[r.jsx(my.ItemSlot,{scope:n.__scopeSlider,children:r.jsx(Me.span,{role:"slider","aria-label":n["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":b,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:f,style:b===void 0?{display:"none"}:n.style,onFocus:Se(n.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),m&&r.jsx(hA,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:b},s)]})});dA.displayName=yy;var s$="RadioBubbleInput",hA=v.forwardRef(({__scopeSlider:n,value:e,...t},s)=>{const i=v.useRef(null),a=We(i,s),l=Bh(e);return v.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&f){const m=new Event("input",{bubbles:!0});f.call(u,e),u.dispatchEvent(m)}},[l,e]),r.jsx(Me.input,{style:{display:"none"},...t,ref:a,defaultValue:e})});hA.displayName=s$;function r$(n=[],e,t){const s=[...n];return s[t]=e,s.sort((i,a)=>i-a)}function pA(n,e,t){const a=100/(t-e)*(n-e);return Ql(a,[0,100])}function i$(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function a$(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),s=Math.min(...t);return t.indexOf(s)}function o$(n,e,t){const s=n/2,a=hv([0,50],[0,s]);return(s-a(e)*t)*t}function l$(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function c$(n,e){if(e>0){const t=l$(n);return Math.min(...t)>=e}return!0}function hv(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function u$(n){return(String(n).split(".")[1]||"").length}function d$(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var fA=rA,h$=cA,p$=uA,f$=dA;const me=v.forwardRef(({className:n,...e},t)=>r.jsxs(fA,{ref:t,className:Ve("relative flex w-full touch-none select-none items-center",n),...e,children:[r.jsx(h$,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(p$,{className:"absolute h-full bg-primary"})}),r.jsx(f$,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));me.displayName=fA.displayName;var m$="Separator",dS="horizontal",g$=["horizontal","vertical"],mA=v.forwardRef((n,e)=>{const{decorative:t,orientation:s=dS,...i}=n,a=y$(s)?s:dS,u=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(Me.div,{"data-orientation":a,...u,...i,ref:e})});mA.displayName=m$;function y$(n){return g$.includes(n)}var gA=mA;const gp=v.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...s},i)=>r.jsx(gA,{ref:i,decorative:t,orientation:e,className:Ve("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...s}));gp.displayName=gA.displayName;function x$({bpm:n=90,onPatternChange:e,onPlayStateChange:t}){const[s,i]=v.useState(!1),[a,l]=v.useState(0),[u,d]=v.useState(0),[h,f]=v.useState(80),m=v.useRef(null),g=v.useRef(null),[b,S]=v.useState([{id:"kick",name:"Kick",color:"bg-red-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(100),muted:!1,solo:!1,volume:85},{id:"snare",name:"Snare",color:"bg-blue-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(90),muted:!1,solo:!1,volume:80},{id:"hihat",name:"Hi-Hat",color:"bg-yellow-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(70),muted:!1,solo:!1,volume:60},{id:"openhat",name:"Open Hat",color:"bg-green-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(85),muted:!1,solo:!1,volume:70},{id:"clap",name:"Clap",color:"bg-purple-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(95),muted:!1,solo:!1,volume:75},{id:"crash",name:"Crash",color:"bg-orange-500",pattern:new Array(16).fill(!1),velocity:new Array(16).fill(100),muted:!1,solo:!1,volume:90}]);v.useEffect(()=>{g.current||(g.current=new(window.AudioContext||window.webkitAudioContext))},[]);const x=j=>{const O=60/n*1e3/4;return j%2===1&&u>0?O+O*u/100*.3:O},w=async(j,O,I)=>{if(!g.current)return;g.current.state==="suspended"&&await g.current.resume();const D=g.current,B=D.createGain(),H=O/127*(I/100)*(h/100);B.gain.value=H;let z,G=null;switch(j){case"kick":z=D.createOscillator(),z.frequency.setValueAtTime(60,D.currentTime),z.frequency.exponentialRampToValueAtTime(40,D.currentTime+.1),z.type="sine";const Q=D.createGain();Q.gain.setValueAtTime(1,D.currentTime),Q.gain.exponentialRampToValueAtTime(.01,D.currentTime+.3),z.connect(Q),Q.connect(B),z.start(),z.stop(D.currentTime+.3);break;case"snare":z=D.createOscillator(),z.frequency.value=200,z.type="triangle";const X=D.createBuffer(1,D.sampleRate*.2,D.sampleRate),q=X.getChannelData(0);for(let oe=0;oe<q.length;oe++)q[oe]=(Math.random()*2-1)*.3;G=D.createBufferSource(),G.buffer=X;const U=D.createGain();U.gain.setValueAtTime(1,D.currentTime),U.gain.exponentialRampToValueAtTime(.01,D.currentTime+.15),z.connect(U),G.connect(U),U.connect(B),z.start(),G.start(),z.stop(D.currentTime+.15),G.stop(D.currentTime+.15);break;case"hihat":const Y=D.createBuffer(1,D.sampleRate*.05,D.sampleRate),M=Y.getChannelData(0);for(let oe=0;oe<M.length;oe++)M[oe]=(Math.random()*2-1)*Math.pow(1-oe/M.length,2);G=D.createBufferSource(),G.buffer=Y;const W=D.createBiquadFilter();W.type="highpass",W.frequency.value=8e3,G.connect(W),W.connect(B),G.start(),G.stop(D.currentTime+.05);break;case"openhat":const J=D.createBuffer(1,D.sampleRate*.3,D.sampleRate),de=J.getChannelData(0);for(let oe=0;oe<de.length;oe++)de[oe]=(Math.random()*2-1)*Math.pow(1-oe/de.length,1.5)*.7;G=D.createBufferSource(),G.buffer=J;const ce=D.createBiquadFilter();ce.type="highpass",ce.frequency.value=6e3,G.connect(ce),ce.connect(B),G.start(),G.stop(D.currentTime+.3);break;case"clap":for(let oe=0;oe<3;oe++){const we=oe*.01,te=D.createBuffer(1,D.sampleRate*.1,D.sampleRate),fe=te.getChannelData(0);for(let he=0;he<fe.length;he++)fe[he]=(Math.random()*2-1)*Math.pow(1-he/fe.length,3);const ve=D.createBufferSource();ve.buffer=te,ve.connect(B),ve.start(D.currentTime+we),ve.stop(D.currentTime+we+.1)}break;case"crash":const pe=D.createBuffer(1,D.sampleRate*2,D.sampleRate),F=pe.getChannelData(0);for(let oe=0;oe<F.length;oe++)F[oe]=(Math.random()*2-1)*Math.pow(1-oe/F.length,.5)*.8;G=D.createBufferSource(),G.buffer=pe;const L=D.createBiquadFilter();L.type="bandpass",L.frequency.value=5e3,L.Q.value=.5;const re=D.createGain();re.gain.setValueAtTime(1,D.currentTime),re.gain.exponentialRampToValueAtTime(.01,D.currentTime+2),G.connect(L),L.connect(re),re.connect(B),G.start(),G.stop(D.currentTime+2);break}B.connect(D.destination)};v.useEffect(()=>{if(s){const j=x(a);m.current=setTimeout(()=>{const O=b.some(I=>I.solo);b.forEach(I=>{I.pattern[a]&&!I.muted&&(!O||I.solo)&&w(I.id,I.velocity[a],I.volume)}),l(I=>(I+1)%16)},j)}return()=>{m.current&&clearTimeout(m.current)}},[s,a,b,u,h]);const N=()=>{const j=!s;i(j),t?.(j),j||l(0)};v.useEffect(()=>{const j=O=>{const I=O.detail?.playing;console.log(` Drums received master control: ${I?"PLAY":"STOP"}`),I!==void 0&&(i(I),I||l(0))};return window.addEventListener("masterPlayControl",j),()=>window.removeEventListener("masterPlayControl",j)},[]);const E=(j,O)=>{const I=[...b],D=I[j].pattern[O];if(I[j].pattern[O]=!D,S(I),e?.(I),!D&&I[j].pattern[O]){const B=I[j];w(B.id,B.velocity[O],B.volume)}},C=j=>{const O=[...b];O[j].muted=!O[j].muted,S(O)},A=j=>{const O=[...b];O[j].solo=!O[j].solo,S(O)},P=(j,O)=>{const I=[...b];I[j].volume=O,S(I);const D=I[j];w(D.id,100,O)},R=()=>{const j=b.map(O=>({...O,pattern:new Array(16).fill(!1)}));S(j),e?.(j)},T=()=>{const j=[...b];j[0].pattern=[!0,!1,!1,!1,!1,!1,!0,!1,!0,!1,!1,!1,!1,!1,!0,!1],j[1].pattern=[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],j[2].pattern=[!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1],j[3].pattern=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0],j[4].pattern=[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],S(j),e?.(j)};return r.jsxs(ge,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Step Sequencer"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Pe,{variant:"outline",children:[n," BPM"]}),r.jsxs(Pe,{variant:"outline",children:["Step ",a+1,"/16"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(ne,{onClick:N,size:"lg","data-testid":"button-sequencer-play",className:s?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600",children:[s?r.jsx(ua,{className:"h-5 w-5"}):r.jsx(pn,{className:"h-5 w-5"}),s?"Stop":"Play"]}),r.jsxs(ne,{onClick:R,variant:"outline","data-testid":"button-clear-pattern",children:[r.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Clear"]}),r.jsx(ne,{onClick:T,variant:"outline","data-testid":"button-load-pattern",children:"Load Hip-Hop Pattern"})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ai,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Master"}),r.jsx(me,{value:[h],onValueChange:j=>f(j[0]),max:100,step:1,className:"w-24","data-testid":"slider-master-volume"}),r.jsx("span",{className:"text-sm w-8",children:h})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Swing"}),r.jsx(me,{value:[u],onValueChange:j=>d(j[0]),max:100,step:1,className:"w-24","data-testid":"slider-swing"}),r.jsxs("span",{className:"text-sm w-8",children:[u,"%"]})]})]}),r.jsx(gp,{}),r.jsx("div",{className:"space-y-3",children:b.map((j,O)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 w-32",children:[r.jsx("div",{className:`w-3 h-3 rounded ${j.color}`}),r.jsx("span",{className:"text-sm font-medium flex-1",children:j.name}),r.jsx(ne,{size:"sm",variant:j.muted?"destructive":"outline",onClick:()=>C(O),className:"h-6 px-2 text-xs","data-testid":`button-mute-${j.id}`,children:"M"}),r.jsx(ne,{size:"sm",variant:j.solo?"default":"outline",onClick:()=>A(O),className:"h-6 px-2 text-xs","data-testid":`button-solo-${j.id}`,children:"S"})]}),r.jsx("div",{className:"flex gap-1",children:j.pattern.map((I,D)=>r.jsx(ne,{size:"sm",variant:I?"default":"outline",onClick:()=>E(O,D),className:`w-8 h-8 p-0 text-xs ${a===D&&s?"ring-2 ring-yellow-400 ring-offset-2":""} ${I?j.color.replace("bg-","bg-"):""}`,"data-testid":`button-step-${j.id}-${D}`,children:D+1},D))}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx(me,{value:[j.volume],onValueChange:I=>P(O,I[0]),max:100,step:1,className:"w-16","data-testid":`slider-volume-${j.id}`}),r.jsx("span",{className:"text-xs w-6",children:j.volume})]})]},j.id))})]})}const cd=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],v$={minor:[0,2,3,5,7,8,10],dorian:[0,2,3,5,7,9,10],blues:[0,3,5,6,7,10],pentatonic:[0,3,5,7,10]};function b$({kickPattern:n=new Array(16).fill(!1),bpm:e=90,onBasslineChange:t}){const[s,i]=v.useState(!1),[a,l]=v.useState(0),[u,d]=v.useState(new Array(16).fill("")),[h,f]=v.useState(new Array(16).fill(.5)),[m,g]=v.useState("C"),[b,S]=v.useState("minor"),[x,w]=v.useState([2]),[N,E]=v.useState([80]),[C,A]=v.useState(!0),[P,R]=v.useState([.5]),T=v.useRef(null),j=v.useRef(null),O=()=>{const U=cd.indexOf(m);return v$[b].map(M=>{const W=(U+M)%12;return cd[W]})},I=()=>{const U=O(),Y=new Array(16).fill("");n.forEach((M,W)=>{M?Y[W]=U[0]:W%4===2?Y[W]=U[4]||U[2]:W%8===6&&(Y[W]=U[2])}),(!C||n.every(M=>!M))&&(Y[0]=U[0],Y[6]=U[2],Y[8]=U[0],Y[14]=U[4]||U[1]),d(Y),t?.({pattern:Y,rootNote:m,scale:b,octave:x[0],bpm:e})},D=()=>{const U=O(),Y=new Array(16).fill("");Y[0]=U[0],Y[4]=U[0],Y[8]=U[2],Y[12]=U[4]||U[1],d(Y),t?.({pattern:Y,rootNote:m,scale:b,octave:x[0],bpm:e,style:"808"})},B=async(U,Y=.5)=>{if(!T.current||!U)return;T.current.state==="suspended"&&await T.current.resume();const M=T.current,W=H(U,x[0]),J=M.createOscillator(),de=M.createOscillator(),ce=M.createOscillator();J.frequency.value=W,J.type="sawtooth",de.frequency.value=W*1.005,de.type="square",ce.frequency.value=W/2,ce.type="sine";const pe=M.createBiquadFilter();pe.type="lowpass",pe.frequency.value=800,pe.Q.value=2;const F=M.createGain(),L=M.createGain(),re=M.createGain();F.gain.value=N[0]/100*.3,L.gain.value=.6,re.gain.value=.8;const oe=.01,we=Math.min(Y*.3,.2),te=Y>.5?.6:.3;F.gain.setValueAtTime(0,M.currentTime),F.gain.linearRampToValueAtTime(F.gain.value,M.currentTime+oe),F.gain.linearRampToValueAtTime(F.gain.value*te,M.currentTime+oe+we),F.gain.exponentialRampToValueAtTime(.01,M.currentTime+Y);const fe=Y<.25?1500:1200;pe.frequency.setValueAtTime(800,M.currentTime),pe.frequency.linearRampToValueAtTime(fe,M.currentTime+.05),pe.frequency.exponentialRampToValueAtTime(400,M.currentTime+Math.min(Y*.5,.3)),J.connect(L),de.connect(L),L.connect(pe),pe.connect(F),ce.connect(re),re.connect(F),F.connect(M.destination);const ve=M.currentTime,he=ve+Math.max(Y,.1);J.start(ve),de.start(ve),ce.start(ve),J.stop(he),de.stop(he),ce.stop(he)},H=(U,Y)=>{const M=cd.indexOf(U);return 440*Math.pow(2,(M-9+(Y-4)*12)/12)};v.useEffect(()=>{T.current||(T.current=new(window.AudioContext||window.webkitAudioContext))},[]),v.useEffect(()=>{if(s){const U=60/e*1e3/4;j.current=setTimeout(()=>{const Y=u[a];if(Y){const M=h[a];B(Y,M)}l(M=>(M+1)%16)},U)}return()=>{j.current&&clearTimeout(j.current)}},[s,a,u,x,N,e]);const z=()=>{const U=!s;i(U),U||l(0)};v.useEffect(()=>{const U=Y=>{const M=Y.detail?.playing;console.log(` Bass received master control: ${M?"PLAY":"STOP"}`),M!==void 0&&(i(M),M||l(0))};return window.addEventListener("masterPlayControl",U),()=>window.removeEventListener("masterPlayControl",U)},[]);const G=()=>{d(new Array(16).fill("")),f(new Array(16).fill(.5))},Q=(U,Y)=>{const M=[...u];if(M[U]=Y,Y&&Y!=="-"&&!u[U]){const W=[...h];W[U]=P[0],f(W)}d(M),t?.({pattern:M,lengths:h,rootNote:m,scale:b,octave:x[0],bpm:e}),Y&&Y!=="-"&&B(Y,h[U])},X=(U,Y)=>{const M=[...h];M[U]=Y,f(M),t?.({pattern:u,lengths:M,rootNote:m,scale:b,octave:x[0],bpm:e});const W=u[U];W&&W!=="-"&&B(W,Y)},q=O();return r.jsxs(ge,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(oj,{className:"h-6 w-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold",children:"Bassline Generator"}),r.jsx(Pe,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Hip-Hop Bass"})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full ${C?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[r.jsx(en,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:C?"Synced to Kick":"Free Mode"})]})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Root Note"}),r.jsxs(Ye,{value:m,onValueChange:g,children:[r.jsx(He,{"data-testid":"select-root-note",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:cd.map(U=>r.jsx(le,{value:U,children:U},U))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Scale"}),r.jsxs(Ye,{value:b,onValueChange:U=>S(U),children:[r.jsx(He,{"data-testid":"select-scale",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"minor",children:"Minor"}),r.jsx(le,{value:"dorian",children:"Dorian"}),r.jsx(le,{value:"blues",children:"Blues"}),r.jsx(le,{value:"pentatonic",children:"Pentatonic"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium",children:["Octave: ",x[0]]}),r.jsx(me,{value:x,onValueChange:w,min:1,max:4,step:1,className:"mt-2","data-testid":"slider-octave"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium",children:["Volume: ",N[0]]}),r.jsx(me,{value:N,onValueChange:E,max:100,step:1,className:"mt-2","data-testid":"slider-bass-volume"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium",children:["Default Length: ",P[0],"s"]}),r.jsx(me,{value:P,onValueChange:R,min:.1,max:2,step:.1,className:"mt-2","data-testid":"slider-default-duration"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:P[0]<.3?"Staccato":P[0]<.8?"Normal":"Sustained"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(ne,{onClick:z,size:"lg","data-testid":"button-bass-play",className:s?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600",children:[s?r.jsx(ua,{className:"h-5 w-5"}):r.jsx(pn,{className:"h-5 w-5"}),s?"Stop":"Play"]}),r.jsx(ne,{onClick:I,variant:"outline","data-testid":"button-classic-bass",children:"Classic Hip-Hop"}),r.jsx(ne,{onClick:D,variant:"outline","data-testid":"button-808-bass",children:"808 Style"}),r.jsx(ne,{onClick:G,variant:"outline","data-testid":"button-clear-bass",children:"Clear"}),r.jsxs(ne,{onClick:()=>A(!C),variant:C?"default":"outline","data-testid":"button-sync-kick",children:[r.jsx(en,{className:"h-4 w-4 mr-2"}),"Sync to Kick"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"font-medium",children:"Scale Notes:"}),q.map((U,Y)=>r.jsx(Pe,{variant:"outline",className:"text-xs",children:U},Y))]}),r.jsx("div",{className:"space-y-2",children:r.jsx("div",{className:"flex gap-1",children:u.map((U,Y)=>r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx("div",{className:"text-xs text-center w-16",children:Y+1}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs(Ye,{value:U||"-",onValueChange:M=>Q(Y,M==="-"?"":M),children:[r.jsx(He,{className:`w-16 h-8 p-0 text-xs ${a===Y&&s?"ring-2 ring-blue-400 ring-offset-2":""} ${U?"bg-blue-500 text-white":"bg-gray-100"}`,"data-testid":`select-bass-step-${Y}`,children:r.jsx(Xe,{placeholder:"-"})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"-",children:"-"}),q.map(M=>r.jsx(le,{value:M,children:M},M))]})]}),U&&U!=="-"&&r.jsxs("div",{className:"w-16",children:[r.jsx(me,{value:[h[Y]],onValueChange:M=>X(Y,M[0]),min:.1,max:2,step:.1,className:"h-2","data-testid":`slider-duration-${Y}`}),r.jsxs("div",{className:"text-xs text-center text-gray-500 mt-1",children:[h[Y].toFixed(1),"s"]})]})]}),n[Y]&&r.jsx("div",{className:"w-16 h-1 bg-red-400 rounded"})]},Y))})})]})]})}var w$="Label",yA=v.forwardRef((n,e)=>r.jsx(Me.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));yA.displayName=w$;var xA=yA;const S$=_h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=v.forwardRef(({className:n,...e},t)=>r.jsx(xA,{ref:t,className:Ve(S$(),n),...e}));Ne.displayName=xA.displayName;function hS({onBeatGenerated:n}){const[e,t]=v.useState(!1),[s,i]=v.useState(90),[a,l]=v.useState(null),[u,d]=v.useState(null),[h,f]=v.useState(new Array(16).fill(!1)),[m,g]=v.useState(!1),[b,S]=v.useState(null),[x,w]=v.useState({title:"",artist:"",album:"",genre:"",key:"",timeSignature:"4/4",copyright:"",description:"",tags:""}),{data:N=[],isLoading:E}=Ti({queryKey:["/api/sample-packs"]}),{data:C=[],isLoading:A}=Ti({queryKey:["/api/samples"]}),P=async F=>{try{const L=new(window.AudioContext||window.webkitAudioContext);L.state==="suspended"&&await L.resume(),console.log(` Playing generated sample: ${F.name} (${F.category})`);const re=atob(F.audioData),oe=new ArrayBuffer(re.length),we=new Uint8Array(oe);for(let ve=0;ve<re.length;ve++)we[ve]=re.charCodeAt(ve);const te=await L.decodeAudioData(oe),fe=L.createBufferSource();fe.buffer=te,fe.connect(L.destination),fe.start(),console.log(" Generated sample played successfully")}catch{console.log(" Audio decoding failed, using Web Audio synthesis fallback for:",F.name);const re=R(F.category,F.type,F.name);console.log(` Playing fallback sound: ${re} for sample "${F.name}"`),await T(re)}},R=(F,L,re)=>{const oe=(re||"").toLowerCase();if(oe.includes("kick")||oe.includes("drum")){const te=["amen","funky","apache"];return te[Math.floor(Math.random()*te.length)]}if(oe.includes("bass")||oe.includes("sub")||oe.includes("808")){const te=["808","moog","sub"];return te[Math.floor(Math.random()*te.length)]}if(oe.includes("vocal")||oe.includes("voice")||oe.includes("yeah")||oe.includes("check")){const te=["vocal1","vocal2","vocal3"];return te[Math.floor(Math.random()*te.length)]}if(F.includes("drums")||F.includes("loop")||L==="drums"){const te=["amen","funky","apache"];return te[Math.floor(Math.random()*te.length)]}if(F.includes("bass")||L==="bass"){const te=["808","moog","sub"];return te[Math.floor(Math.random()*te.length)]}if(F.includes("vocal")||F.includes("voice")){const te=["vocal1","vocal2","vocal3"];return te[Math.floor(Math.random()*te.length)]}if(F.includes("melody")||L==="melody"){const te=["vocal1","vocal2","vocal3"];return te[Math.floor(Math.random()*te.length)]}const we=["amen","funky","apache","808","moog","sub","vocal1","vocal2","vocal3"];return we[Math.floor(Math.random()*we.length)]},T=async F=>{try{const L=new(window.AudioContext||window.webkitAudioContext);L.state==="suspended"&&await L.resume(),F.includes("vocal")?j(L,F):F==="amen"||F==="funky"||F==="apache"?B(L,F):(F==="808"||F==="moog"||F==="sub")&&H(L,F)}catch(L){console.log("Audio synthesis failed:",L)}},j=(F,L)=>{const re=F.currentTime;L==="vocal1"?O(F,re):L==="vocal2"?I(F,re):L==="vocal3"&&D(F,re)},O=(F,L)=>{const re=F.createOscillator(),oe=F.createGain(),we=F.createBiquadFilter();re.type="sawtooth",re.frequency.setValueAtTime(200,L),re.frequency.exponentialRampToValueAtTime(350,L+.15),we.type="bandpass",we.frequency.setValueAtTime(1800,L),we.Q.setValueAtTime(3,L),oe.gain.setValueAtTime(0,L),oe.gain.linearRampToValueAtTime(.8,L+.05),oe.gain.linearRampToValueAtTime(.6,L+.15),oe.gain.exponentialRampToValueAtTime(.001,L+.25),re.connect(we),we.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.25);const te=F.createOscillator(),fe=F.createGain(),ve=F.createBiquadFilter();te.type="sawtooth",te.frequency.setValueAtTime(280,L+.2),te.frequency.exponentialRampToValueAtTime(240,L+.6),ve.type="bandpass",ve.frequency.setValueAtTime(1200,L+.2),ve.Q.setValueAtTime(2,L+.2),fe.gain.setValueAtTime(0,L+.2),fe.gain.linearRampToValueAtTime(.9,L+.25),fe.gain.exponentialRampToValueAtTime(.001,L+.7),te.connect(ve),ve.connect(fe),fe.connect(F.destination),te.start(L+.2),te.stop(L+.7)},I=(F,L)=>{const re=F.createOscillator(),oe=F.createGain(),we=F.createBiquadFilter();re.type="sawtooth",re.frequency.setValueAtTime(150,L),re.frequency.exponentialRampToValueAtTime(180,L+.2),we.type="lowpass",we.frequency.setValueAtTime(800,L),we.Q.setValueAtTime(1,L),oe.gain.setValueAtTime(0,L),oe.gain.linearRampToValueAtTime(.7,L+.05),oe.gain.exponentialRampToValueAtTime(.001,L+.3),re.connect(we),we.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.3);const te=F.createOscillator(),fe=F.createGain(),ve=F.createBiquadFilter();te.type="sawtooth",te.frequency.setValueAtTime(220,L+.35),te.frequency.exponentialRampToValueAtTime(200,L+.65),ve.type="bandpass",ve.frequency.setValueAtTime(1500,L+.35),ve.Q.setValueAtTime(2.5,L+.35),fe.gain.setValueAtTime(0,L+.35),fe.gain.linearRampToValueAtTime(.8,L+.4),fe.gain.exponentialRampToValueAtTime(.001,L+.75);const he=F.createBufferSource(),Ce=F.createBuffer(1,F.sampleRate*.1,F.sampleRate),Le=Ce.getChannelData(0);for(let et=0;et<Le.length;et++)Le[et]=(Math.random()*2-1)*.3;he.buffer=Ce;const ze=F.createGain(),qe=F.createBiquadFilter();qe.type="highpass",qe.frequency.setValueAtTime(3e3,L+.35),ze.gain.setValueAtTime(.2,L+.35),he.connect(qe),qe.connect(ze),ze.connect(F.destination),he.start(L+.35),te.connect(ve),ve.connect(fe),fe.connect(F.destination),te.start(L+.35),te.stop(L+.75)},D=(F,L)=>{const re=F.createOscillator(),oe=F.createGain(),we=F.createBiquadFilter();re.type="sawtooth",re.frequency.setValueAtTime(300,L),re.frequency.exponentialRampToValueAtTime(250,L+.25),we.type="bandpass",we.frequency.setValueAtTime(2200,L),we.frequency.exponentialRampToValueAtTime(1400,L+.25),we.Q.setValueAtTime(4,L),oe.gain.setValueAtTime(0,L),oe.gain.linearRampToValueAtTime(.9,L+.03),oe.gain.linearRampToValueAtTime(.7,L+.15),oe.gain.exponentialRampToValueAtTime(.001,L+.35),re.connect(we),we.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.35);const te=F.createOscillator(),fe=F.createGain(),ve=F.createBiquadFilter();te.type="triangle",te.frequency.setValueAtTime(320,L+.4),te.frequency.exponentialRampToValueAtTime(280,L+.65),ve.type="bandpass",ve.frequency.setValueAtTime(1800,L+.4),ve.Q.setValueAtTime(3,L+.4),fe.gain.setValueAtTime(0,L+.4),fe.gain.linearRampToValueAtTime(.8,L+.42),fe.gain.exponentialRampToValueAtTime(.001,L+.7),te.connect(ve),ve.connect(fe),fe.connect(F.destination),te.start(L+.4),te.stop(L+.7)},B=(F,L)=>{const re=F.currentTime;L==="amen"?z(F,re):L==="funky"?G(F,re):L==="apache"&&Q(F,re)},H=(F,L)=>{const re=F.currentTime;L==="808"?Y(F,re):L==="moog"?M(F,re):L==="sub"&&W(F,re)},z=(F,L)=>{X(F,L),X(F,L+.5),q(F,L+.25),q(F,L+.75),U(F,L+.125),U(F,L+.375),U(F,L+.625)},G=(F,L)=>{X(F,L),q(F,L+.33),X(F,L+.66),q(F,L+.83)},Q=(F,L)=>{X(F,L),U(F,L+.125),q(F,L+.25),X(F,L+.5),q(F,L+.75)},X=(F,L)=>{const re=F.createOscillator(),oe=F.createGain();re.type="sine",re.frequency.setValueAtTime(60,L),re.frequency.exponentialRampToValueAtTime(20,L+.1),oe.gain.setValueAtTime(1,L),oe.gain.exponentialRampToValueAtTime(.001,L+.3),re.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.3)},q=(F,L)=>{const re=F.createOscillator(),oe=F.createGain();re.type="triangle",re.frequency.setValueAtTime(200,L),oe.gain.setValueAtTime(.8,L),oe.gain.exponentialRampToValueAtTime(.001,L+.2),re.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.2);const we=F.createBufferSource(),te=F.createBuffer(1,F.sampleRate*.1,F.sampleRate),fe=te.getChannelData(0);for(let Ce=0;Ce<fe.length;Ce++)fe[Ce]=Math.random()*2-1;we.buffer=te;const ve=F.createGain(),he=F.createBiquadFilter();he.type="bandpass",he.frequency.setValueAtTime(3e3,L),ve.gain.setValueAtTime(.5,L),ve.gain.exponentialRampToValueAtTime(.001,L+.1),we.connect(he),he.connect(ve),ve.connect(F.destination),we.start(L)},U=(F,L)=>{const re=F.createOscillator(),oe=F.createGain();re.type="triangle",re.frequency.setValueAtTime(150,L),oe.gain.setValueAtTime(.2,L),oe.gain.exponentialRampToValueAtTime(.001,L+.05),re.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+.05)},Y=(F,L)=>{const re=F.createOscillator(),oe=F.createGain();re.type="sine",re.frequency.setValueAtTime(55,L),re.frequency.exponentialRampToValueAtTime(30,L+.4),oe.gain.setValueAtTime(1.2,L),oe.gain.exponentialRampToValueAtTime(.001,L+1),re.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+1)},M=(F,L)=>{const re=F.createOscillator(),oe=F.createGain(),we=F.createBiquadFilter();re.type="sawtooth",re.frequency.setValueAtTime(82,L),we.type="lowpass",we.frequency.setValueAtTime(600,L),we.frequency.exponentialRampToValueAtTime(200,L+.5),we.Q.setValueAtTime(20,L),oe.gain.setValueAtTime(1,L),oe.gain.exponentialRampToValueAtTime(.001,L+1.2),re.connect(we),we.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+1.2)},W=(F,L)=>{const re=F.createOscillator(),oe=F.createGain();re.type="sine",re.frequency.setValueAtTime(41,L),oe.gain.setValueAtTime(1.5,L),oe.gain.exponentialRampToValueAtTime(.001,L+2),re.connect(oe),oe.connect(F.destination),re.start(L),re.stop(L+2)},J=F=>{const L=F.find(oe=>oe.id==="kick");L&&f(L.pattern);const re={tracks:F,bassline:u,bpm:s,name:`Hip-Hop Beat ${Date.now()}`,style:"west-coast"};l(re),n?.(re)},de=F=>{if(d(F),a){const L={...a,bassline:F};l(L),n?.(L)}},ce=F=>{t(F)},pe=()=>{const F=!m;console.log(` Master Play Control: ${F?"PLAYING":"STOPPING"} all tracks`),g(F),t(F),window.dispatchEvent(new CustomEvent("masterPlayControl",{detail:{playing:F}})),console.log(" Master play event dispatched to drums and bass")};return r.jsx("div",{className:"space-y-6",children:r.jsxs(ge,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zw,{className:"h-6 w-6 text-purple-500"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Professional Beat Maker"}),r.jsx(Pe,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:"Classic Hip-Hop Studio"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(ne,{onClick:pe,size:"lg","data-testid":"button-master-play",className:m?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600",children:[m?r.jsx(ua,{className:"h-5 w-5"}):r.jsx(pn,{className:"h-5 w-5"}),m?"Stop All":"Play All"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"BPM"}),r.jsx(me,{value:[s],onValueChange:F=>i(F[0]),min:60,max:180,step:1,className:"w-24","data-testid":"slider-bpm"}),r.jsx("span",{className:"text-sm w-12",children:s})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full ${m?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[m?r.jsx(pn,{className:"h-4 w-4"}):r.jsx(ua,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:m?"Playing":"Stopped"})]}),r.jsxs(Sx,{children:[r.jsx(_x,{asChild:!0,children:r.jsxs(ne,{variant:"outline",className:"flex items-center gap-2","data-testid":"button-beat-metadata",children:[r.jsx(Jw,{className:"h-4 w-4"}),"Metadata"]})}),r.jsxs(Wh,{className:"bg-gray-800 border-gray-600 text-white max-w-md",children:[r.jsx(Hh,{children:r.jsxs(Kh,{className:"text-xl font-bold text-gray-200 flex items-center gap-2",children:[r.jsx(Jw,{className:"h-5 w-5"}),"Beat Metadata"]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Title"}),r.jsx(vt,{value:x.title,onChange:F=>w({...x,title:F.target.value}),placeholder:"Beat Title",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-title"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Producer"}),r.jsx(vt,{value:x.artist,onChange:F=>w({...x,artist:F.target.value}),placeholder:"Producer Name",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-producer"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Genre"}),r.jsxs(Ye,{value:x.genre,onValueChange:F=>w({...x,genre:F}),children:[r.jsx(He,{className:"bg-gray-700 border-gray-600 text-white","data-testid":"select-beat-metadata-genre",children:r.jsx(Xe,{placeholder:"Select Genre"})}),r.jsxs(Ke,{className:"bg-gray-800 border-gray-600",children:[r.jsx(le,{value:"hip-hop",children:"Hip Hop"}),r.jsx(le,{value:"trap",children:"Trap"}),r.jsx(le,{value:"drill",children:"Drill"}),r.jsx(le,{value:"boom-bap",children:"Boom Bap"}),r.jsx(le,{value:"lo-fi",children:"Lo-Fi"}),r.jsx(le,{value:"experimental",children:"Experimental"}),r.jsx(le,{value:"r&b",children:"R&B"}),r.jsx(le,{value:"electronic",children:"Electronic"}),r.jsx(le,{value:"house",children:"House"}),r.jsx(le,{value:"techno",children:"Techno"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Key"}),r.jsx(vt,{value:x.key,onChange:F=>w({...x,key:F.target.value}),placeholder:"e.g., Am, F# Major",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-key"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"BPM"}),r.jsx(vt,{value:s.toString(),onChange:F=>{const L=parseInt(F.target.value)||s;i(L),w({...x,key:`${L} BPM`})},placeholder:"120",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-bpm"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Time Signature"}),r.jsxs(Ye,{value:x.timeSignature,onValueChange:F=>w({...x,timeSignature:F}),children:[r.jsx(He,{className:"bg-gray-700 border-gray-600 text-white","data-testid":"select-beat-metadata-time",children:r.jsx(Xe,{})}),r.jsxs(Ke,{className:"bg-gray-800 border-gray-600",children:[r.jsx(le,{value:"4/4",children:"4/4"}),r.jsx(le,{value:"3/4",children:"3/4"}),r.jsx(le,{value:"6/8",children:"6/8"}),r.jsx(le,{value:"7/8",children:"7/8"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Description"}),r.jsx(vt,{value:x.description,onChange:F=>w({...x,description:F.target.value}),placeholder:"Hard-hitting trap beat with 808s",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-description"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Tags"}),r.jsx(vt,{value:x.tags,onChange:F=>w({...x,tags:F.target.value}),placeholder:"trap, 808, dark, heavy (comma separated)",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-tags"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-gray-300",children:"Copyright"}),r.jsx(vt,{value:x.copyright,onChange:F=>w({...x,copyright:F.target.value}),placeholder:" 2025 Producer Name",className:"bg-gray-700 border-gray-600 text-white","data-testid":"input-beat-metadata-copyright"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(ne,{variant:"outline",className:"bg-gray-600 hover:bg-gray-500 text-white border-gray-600",children:"Clear All"}),r.jsx(ne,{className:"bg-purple-600 hover:bg-purple-500 text-white",children:"Save Metadata"})]})]})]})]})]})]}),r.jsxs(Bi,{defaultValue:"sequencer",className:"space-y-6",children:[r.jsxs(Hr,{className:"grid w-full grid-cols-5",children:[r.jsxs(dt,{value:"sequencer",className:"flex items-center gap-2",children:[r.jsx(po,{className:"h-4 w-4"}),"Drums"]}),r.jsxs(dt,{value:"bassline",className:"flex items-center gap-2",children:[r.jsx(oj,{className:"h-4 w-4"}),"Bassline"]}),r.jsxs(dt,{value:"samples",className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"h-4 w-4"}),"Samples"]}),r.jsxs(dt,{value:"mixing",className:"flex items-center gap-2",children:[r.jsx(jh,{className:"h-4 w-4"}),"Mixing"]}),r.jsxs(dt,{value:"arrangement",className:"flex items-center gap-2",children:[r.jsx(Zw,{className:"h-4 w-4"}),"Structure"]})]}),r.jsxs(ht,{value:"sequencer",className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2 text-gray-900",children:" Classic Hip-Hop Drum Programming"}),r.jsx("p",{className:"text-sm text-gray-700 mb-3",children:'Professional 16-step sequencer with swing control, velocity programming, and classic West Coast sound design. Perfect for recreating beats like "All Eyez On Me" and other 90s classics.'}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{variant:"outline",children:"Kick Programming"}),r.jsx(Pe,{variant:"outline",children:"Snare Placement"}),r.jsx(Pe,{variant:"outline",children:"Hi-Hat Patterns"}),r.jsx(Pe,{variant:"outline",children:"Swing & Groove"})]})]}),r.jsx(x$,{bpm:s,onPatternChange:J,onPlayStateChange:ce})]}),r.jsxs(ht,{value:"bassline",className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Classic Hip-Hop Basslines"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Professional bassline generator that automatically syncs with your kick drum pattern. Create deep, punchy bass sounds that lock perfectly with your drums for that authentic West Coast sound."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{variant:"outline",children:"Auto-Sync to Kick"}),r.jsx(Pe,{variant:"outline",children:"808 Bass Sounds"}),r.jsx(Pe,{variant:"outline",children:"Hip-Hop Scales"}),r.jsx(Pe,{variant:"outline",children:"Analog Modeling"})]})]}),r.jsx(b$,{kickPattern:h,bpm:s,onBasslineChange:de})]}),r.jsx(ht,{value:"samples",className:"space-y-6",children:r.jsxs(ge,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Expanded Sample Library"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bl,{className:"h-5 w-5 text-blue-600"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.length," Packs  ",C.length," Samples"]})]})]}),E||A?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ca,{className:"h-8 w-8 animate-spin text-blue-600"}),r.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading sample library..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h4",{className:"text-lg font-medium mb-4",children:"Classic Hip-Hop Samples"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs(ge,{className:"p-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Drum Breaks"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-amen",onClick:()=>T("amen"),children:"Amen Break"}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-funky",onClick:()=>T("funky"),children:"Funky Drummer"}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-apache",onClick:()=>T("apache"),children:"Apache Break"})]})]}),r.jsxs(ge,{className:"p-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Bass Samples"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-808",onClick:()=>T("808"),children:"808 Bass"}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-moog",onClick:()=>T("moog"),children:"Moog Bass"}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-sub",onClick:()=>T("sub"),children:"Sub Bass"})]})]}),r.jsxs(ge,{className:"p-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Vocal Chops"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-vocal1",onClick:()=>T("vocal1"),children:'"Yeah" Vocal'}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-vocal2",onClick:()=>T("vocal2"),children:'"Uh-huh" Vocal'}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full","data-testid":"button-sample-vocal3",onClick:()=>T("vocal3"),children:'"Check It" Vocal'})]})]})]})]}),N.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[r.jsx(Bl,{className:"h-5 w-5"}),"AI-Generated Sample Packs"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.slice(0,6).map(F=>r.jsxs(ge,{className:"p-4 border-blue-200",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("h5",{className:"font-semibold text-sm",children:F.name}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(Pe,{variant:"secondary",className:"text-xs",children:F.genre}),r.jsx(Pe,{variant:"outline",className:"text-xs",children:F.mood})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2",children:F.description}),r.jsx("div",{className:"space-y-1",children:C.filter(L=>L.packId===F.id).slice(0,3).map(L=>r.jsxs(ne,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>P(L),"data-testid":`button-sample-${L.id}`,children:[r.jsx(pn,{className:"h-3 w-3 mr-1"}),L.name]},L.id))})]},F.id))}),N.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Bl,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No generated sample packs yet."}),r.jsx("p",{className:"text-xs",children:"Use the Pack Generator to create AI-powered sample packs!"})]})]})]})]})}),r.jsx(ht,{value:"mixing",className:"space-y-6",children:r.jsxs(ge,{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Professional Mixing Console"}),r.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[r.jsxs(ge,{className:"p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Kick EQ"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Low (60Hz)"}),r.jsx(me,{defaultValue:[75],max:100,className:"mt-1","data-testid":"slider-kick-low"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Mid (800Hz)"}),r.jsx(me,{defaultValue:[50],max:100,className:"mt-1","data-testid":"slider-kick-mid"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"High (5kHz)"}),r.jsx(me,{defaultValue:[30],max:100,className:"mt-1","data-testid":"slider-kick-high"})]})]})]}),r.jsxs(ge,{className:"p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Snare EQ"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Low (200Hz)"}),r.jsx(me,{defaultValue:[40],max:100,className:"mt-1","data-testid":"slider-snare-low"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Mid (2kHz)"}),r.jsx(me,{defaultValue:[60],max:100,className:"mt-1","data-testid":"slider-snare-mid"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"High (8kHz)"}),r.jsx(me,{defaultValue:[80],max:100,className:"mt-1","data-testid":"slider-snare-high"})]})]})]}),r.jsxs(ge,{className:"p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Compression"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Ratio"}),r.jsx(me,{defaultValue:[40],max:100,className:"mt-1","data-testid":"slider-compression-ratio"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Attack"}),r.jsx(me,{defaultValue:[20],max:100,className:"mt-1","data-testid":"slider-compression-attack"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Release"}),r.jsx(me,{defaultValue:[60],max:100,className:"mt-1","data-testid":"slider-compression-release"})]})]})]}),r.jsxs(ge,{className:"p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Master Bus"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Bus Comp"}),r.jsx(me,{defaultValue:[35],max:100,className:"mt-1","data-testid":"slider-master-compression"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Saturation"}),r.jsx(me,{defaultValue:[25],max:100,className:"mt-1","data-testid":"slider-master-saturation"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm",children:"Stereo Width"}),r.jsx(me,{defaultValue:[70],max:100,className:"mt-1","data-testid":"slider-master-width"})]})]})]})]})]})}),r.jsx(ht,{value:"arrangement",className:"space-y-6",children:r.jsxs(ge,{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Song Arrangement Builder"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-8 gap-2",children:["Intro","Verse 1","Hook","Verse 2","Hook","Bridge","Hook","Outro"].map((F,L)=>r.jsxs(ge,{className:"p-3 text-center",children:[r.jsx("div",{className:"text-sm font-medium",children:F}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"8 bars"})]},L))}),r.jsxs("div",{className:"flex gap-4 mt-6",children:[r.jsx(ne,{variant:"outline","data-testid":"button-add-section",children:"Add Section"}),r.jsx(ne,{variant:"outline","data-testid":"button-copy-section",children:"Copy Pattern"}),r.jsx(ne,{variant:"outline","data-testid":"button-song-export",children:"Export Song"})]})]})]})})]})]})})}const Fl=[];for(let n=8;n>=0;n--){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(const t of e)Fl.push({note:t,octave:n,isBlack:t.includes("#"),key:`${t}${n}`})}const qm=32,pS=20,fS=25,Gm=[{id:"classic",name:"Classic (I-V-vi-IV)",chords:["I","V","vi","IV"],key:"C"},{id:"jazz",name:"Jazz (ii-V-I)",chords:["ii","V","I"],key:"C"},{id:"pop",name:"Pop (vi-IV-I-V)",chords:["vi","IV","I","V"],key:"C"},{id:"electronic",name:"Electronic (i-VII-VI-VII)",chords:["vi","V","IV","V"],key:"C"}],_$=["C","G","D","A","E","B","F#","C#","G#","D#","A#","F"];function C$(){const[n,e]=v.useState(!1),[t,s]=v.useState(0),[i,a]=v.useState(120),[l,u]=v.useState(0),[d,h]=v.useState(1),[f,m]=v.useState([{id:"track1",name:"Piano",color:"bg-blue-500",notes:[],muted:!1,volume:80}]),[g,b]=v.useState("C"),[S,x]=v.useState(Gm[0]),[w,N]=v.useState(!1),[E,C]=v.useState(!1),[A,P]=v.useState(0),[R,T]=v.useState([]),[j,O]=v.useState(!1),[I,D]=v.useState(0),[B,H]=v.useState(DEFAULT_MUSIC_KEYS),z=()=>{if(!X||!U)return;const te=U.split(",").map(ve=>ve.trim());if(te.length!==7){M({title:"Error",description:"Please enter exactly 7 notes separated by commas"});return}const fe={name:X,notes:te,chords:{I:[te[0],te[2],te[4]],ii:[te[1],te[3],te[5]],iii:[te[2],te[4],te[6]],IV:[te[3],te[5],te[0]],V:[te[4],te[6],te[1]],vi:[te[5],te[0],te[2]],"vii":[te[6],te[1],te[3]]}};H(ve=>({...ve,[X.charAt(0).toUpperCase()]:fe})),q(""),Y(""),Q(!1),M({title:"Success",description:`Added custom key: ${X}`})},[G,Q]=v.useState(!1),[X,q]=v.useState(""),[U,Y]=v.useState(""),{toast:M}=yn(),W=v.useRef(new BT),J=v.useRef(null);v.useEffect(()=>()=>{J.current&&clearInterval(J.current)},[]);const de=async()=>{try{if(await W.current.initialize(),n)J.current&&clearInterval(J.current),e(!1),s(0);else{e(!0);const te=60/i/4*1e3;J.current=setInterval(()=>{s(fe=>{const ve=(fe+1)%qm;return f.forEach(he=>{he.muted||he.notes.filter(Le=>Le.step===ve).forEach(Le=>{W.current.playNote(Le.note,Le.octave,Le.velocity/127,.25)})}),ve})},te)}}catch{M({title:"Audio Error",description:"Failed to initialize audio",variant:"destructive"})}},ce=()=>{J.current&&clearInterval(J.current),e(!1),s(0)},pe=(te,fe)=>{const ve=Fl[te],he={id:`${ve.key}-${fe}-${Date.now()}`,note:ve.note,octave:ve.octave,step:fe,velocity:100,length:1};m(Ce=>Ce.map((Le,ze)=>ze===l?{...Le,notes:[...Le.notes,he]}:Le)),W.current.playNote(ve.note,ve.octave,.8,.25)},F=te=>{m(fe=>fe.map((ve,he)=>he===l?{...ve,notes:ve.notes.filter(Ce=>Ce.id!==te)}:ve))},L=()=>{m(te=>te.map((fe,ve)=>ve===l?{...fe,notes:[]}:fe))},re=(te,fe=4)=>{te.forEach((ve,he)=>{setTimeout(()=>{W.current.playNote(ve,fe,.6,1)},he*50)})},oe=te=>{let fe,ve;j&&R.length>0?(fe=R[I%R.length],ve=B[g].chords[fe],D(he=>(he+1)%R.length)):(fe=S.chords[A],ve=B[g].chords[fe],P(he=>(he+1)%S.chords.length)),ve.forEach((he,Ce)=>{const Le=Fl.findIndex(ze=>ze.note===he&&ze.octave===4);Le!==-1&&pe(Le,te+Ce*.1)})},we=()=>{let te=0;S.chords.forEach((fe,ve)=>{B[g].chords[fe].forEach((Ce,Le)=>{const ze={id:`${Ce}-${te}-${Date.now()}-${Le}`,note:Ce,octave:4,step:te+ve*8,velocity:100,length:8};m(qe=>qe.map((et,ke)=>ke===l?{...et,notes:[...et.notes,ze]}:et))})})};return r.jsx("div",{className:"h-full w-full bg-gray-900 text-white",children:r.jsxs(ge,{className:"h-full bg-gray-800 border-gray-700",children:[r.jsx(Ee,{className:"pb-4",children:r.jsxs(Ae,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xl",children:" Vertical Piano Roll"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ne,{onClick:de,className:`${n?"bg-red-600 hover:bg-red-500":"bg-green-600 hover:bg-green-500"}`,children:[n?r.jsx(hc,{className:"h-4 w-4"}):r.jsx(pn,{className:"h-4 w-4"}),n?"Pause":"Play"]}),r.jsxs(ne,{onClick:ce,variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx(ua,{className:"h-4 w-4"}),"Stop"]}),r.jsxs(ne,{onClick:L,variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx(Ch,{className:"h-4 w-4"}),"Clear"]}),r.jsx(ne,{onClick:()=>N(!w),variant:w?"default":"outline",className:w?"bg-purple-600 hover:bg-purple-500":"bg-gray-700 hover:bg-gray-600",children:" Chord Mode"}),r.jsx(ne,{onClick:we,variant:"outline",className:"bg-green-700 hover:bg-green-600",children:"Generate Progression"}),r.jsx(ne,{onClick:()=>Q(!0),variant:"outline",className:"bg-blue-700 hover:bg-blue-600",children:"+ Add Custom Key"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Key:"}),r.jsx("select",{value:g,onChange:te=>b(te.target.value),className:"bg-gray-700 text-white px-2 py-1 rounded text-sm",children:Object.keys(B).map(te=>r.jsx("option",{value:te,children:B[te].name},te))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Progression:"}),r.jsx("select",{value:S.id,onChange:te=>{const fe=Gm.find(ve=>ve.id===te.target.value);fe&&x(fe)},className:"bg-gray-700 text-white px-2 py-1 rounded text-sm",children:Gm.map(te=>r.jsx("option",{value:te.id,children:te.name},te.id))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"BPM:"}),r.jsx(me,{value:[i],onValueChange:te=>a(te[0]),min:60,max:200,step:1,className:"w-20"}),r.jsx("span",{className:"text-sm w-8",children:i})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Zoom:"}),r.jsx(me,{value:[d],onValueChange:te=>h(te[0]),min:.5,max:3,step:.25,className:"w-20"}),r.jsxs("span",{className:"text-sm w-8",children:[d,"x"]})]})]})]})}),r.jsxs(je,{className:"h-full overflow-hidden",children:[r.jsxs("div",{className:"flex h-full",children:[r.jsx("div",{className:"w-20 bg-gray-800 border-r border-gray-600 overflow-y-auto",children:r.jsx("div",{className:"relative",children:Fl.map((te,fe)=>r.jsx("button",{className:`
                      w-full text-xs font-mono border-b border-gray-600 hover:bg-gray-600 transition-colors
                      ${te.isBlack?"bg-gray-900 text-gray-300 border-l-4 border-l-gray-700":"bg-gray-700 text-white"}
                      ${w?"ring-2 ring-purple-500 ring-opacity-50":""}
                    `,style:{height:`${pS}px`},onClick:()=>{try{if(w){const ve=S.chords[A],he=B[g].chords[ve];re(he,te.octave)}else W.current.playNote(te.note,te.octave,.8,.25)}catch(ve){console.error("Audio playback error:",ve)}},children:te.key},te.key))})}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"relative bg-gray-900",children:[r.jsx("div",{className:"flex sticky top-0 bg-gray-800 border-b border-gray-600 z-10",children:Array.from({length:qm},(te,fe)=>r.jsx("div",{className:`
                        flex items-center justify-center text-xs font-mono border-r border-gray-600
                        ${t===fe?"bg-red-600 text-white":"text-gray-400"}
                        ${fe%4===0?"bg-gray-700":""}
                      `,style:{width:`${fS*d}px`,height:"30px"},children:fe+1},fe))}),r.jsx("div",{className:"relative",children:Fl.map((te,fe)=>r.jsx("div",{className:"flex border-b border-gray-700",children:Array.from({length:qm},(ve,he)=>{const Ce=f[l]?.notes.some(ze=>ze.note===te.note&&ze.octave===te.octave&&ze.step===he),Le=f[l]?.notes.find(ze=>ze.note===te.note&&ze.octave===te.octave&&ze.step===he);return r.jsx("div",{className:`
                              border-r border-gray-700 cursor-pointer transition-colors relative
                              ${Ce?"bg-blue-500 hover:bg-blue-400":"hover:bg-gray-700"}
                              ${he%4===0?"border-r-gray-500":""}
                              ${t===he?"bg-red-900 bg-opacity-50":""}
                            `,style:{width:`${fS*d}px`,height:`${pS}px`},onClick:()=>{Ce&&Le?F(Le.id):w?oe(he):pe(fe,he)},children:Ce&&r.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-sm m-0.5 flex items-center justify-center",children:r.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})},he)})},te.key))})]})})]}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm font-medium",children:" Chord Progression"}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Key: ",B[g].name]}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Current: ",S.chords[A]," (",A+1,"/",S.chords.length,")"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(ne,{onClick:()=>C(!E),variant:E?"default":"outline",className:`text-xs ${E?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:"Scale Lock"})})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"text-xs text-gray-400 mb-2 block",children:"Circle of Fifths:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:_$.map((te,fe)=>r.jsx("button",{onClick:()=>b(te),className:`px-2 py-1 text-xs rounded transition-colors ${g===te?"bg-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:te},te))})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("span",{className:"text-xs text-gray-400 mb-2 block",children:["Current Progression (",S.name,"):"]}),r.jsx("div",{className:"flex gap-2",children:S.chords.map((te,fe)=>{const ve=B[g].chords[te];return r.jsxs("button",{onClick:()=>{P(fe),re(ve)},className:`px-3 py-2 text-sm rounded transition-colors ${A===fe?"bg-green-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:[r.jsx("div",{className:"font-medium",children:te}),r.jsx("div",{className:"text-xs opacity-75",children:ve.join("-")})]},fe)})})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Track: ",f[l]?.name]}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Notes: ",f[l]?.notes.length||0]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"Volume:"}),r.jsx(me,{value:[f[l]?.volume||80],onValueChange:te=>{m(fe=>fe.map((ve,he)=>he===l?{...ve,volume:te[0]}:ve))},min:0,max:100,step:1,className:"w-20"}),r.jsxs("span",{className:"text-sm w-8",children:[f[l]?.volume,"%"]})]})]})})]}),G&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-600 w-96",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Custom Key"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Key Name:"}),r.jsx("input",{type:"text",value:X,onChange:te=>q(te.target.value),placeholder:"e.g., D Minor, A Harmonic",className:"w-full bg-gray-700 text-white px-3 py-2 rounded border border-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"7 Notes (comma separated):"}),r.jsx("input",{type:"text",value:U,onChange:te=>Y(te.target.value),placeholder:"e.g., D, E, F, G, A, Bb, C",className:"w-full bg-gray-700 text-white px-3 py-2 rounded border border-gray-600"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter exactly 7 notes for the scale"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx(ne,{onClick:z,className:"bg-blue-600 hover:bg-blue-500",children:"Add Key"}),r.jsx(ne,{onClick:()=>Q(!1),variant:"outline",className:"bg-gray-700 hover:bg-gray-600",children:"Cancel"})]})]})})]})})}function j$(n,e){return v.useReducer((t,s)=>e[t][s]??t,n)}var pv="ScrollArea",[vA,lK]=En(pv),[N$,Cs]=vA(pv),bA=v.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:i,scrollHideDelay:a=600,...l}=n,[u,d]=v.useState(null),[h,f]=v.useState(null),[m,g]=v.useState(null),[b,S]=v.useState(null),[x,w]=v.useState(null),[N,E]=v.useState(0),[C,A]=v.useState(0),[P,R]=v.useState(!1),[T,j]=v.useState(!1),O=We(e,D=>d(D)),I=Po(i);return r.jsx(N$,{scope:t,type:s,dir:I,scrollHideDelay:a,scrollArea:u,viewport:h,onViewportChange:f,content:m,onContentChange:g,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:P,onScrollbarXEnabledChange:R,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:T,onScrollbarYEnabledChange:j,onCornerWidthChange:E,onCornerHeightChange:A,children:r.jsx(Me.div,{dir:I,...l,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...n.style}})})});bA.displayName=pv;var wA="ScrollAreaViewport",SA=v.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:s,nonce:i,...a}=n,l=Cs(wA,t),u=v.useRef(null),d=We(e,u,l.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:r.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});SA.displayName=wA;var Cr="ScrollAreaScrollbar",fv=v.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=Cs(Cr,n.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=i,u=n.orientation==="horizontal";return v.useEffect(()=>(u?a(!0):l(!0),()=>{u?a(!1):l(!1)}),[u,a,l]),i.type==="hover"?r.jsx(k$,{...s,ref:e,forceMount:t}):i.type==="scroll"?r.jsx(T$,{...s,ref:e,forceMount:t}):i.type==="auto"?r.jsx(_A,{...s,ref:e,forceMount:t}):i.type==="always"?r.jsx(mv,{...s,ref:e}):null});fv.displayName=Cr;var k$=v.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=Cs(Cr,n.__scopeScrollArea),[a,l]=v.useState(!1);return v.useEffect(()=>{const u=i.scrollArea;let d=0;if(u){const h=()=>{window.clearTimeout(d),l(!0)},f=()=>{d=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(Mn,{present:t||a,children:r.jsx(_A,{"data-state":a?"visible":"hidden",...s,ref:e})})}),T$=v.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=Cs(Cr,n.__scopeScrollArea),a=n.orientation==="horizontal",l=xp(()=>d("SCROLL_END"),100),[u,d]=j$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,i.scrollHideDelay,d]),v.useEffect(()=>{const h=i.viewport,f=a?"scrollLeft":"scrollTop";if(h){let m=h[f];const g=()=>{const b=h[f];m!==b&&(d("SCROLL"),l()),m=b};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[i.viewport,a,d,l]),r.jsx(Mn,{present:t||u!=="hidden",children:r.jsx(mv,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:Se(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Se(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),_A=v.forwardRef((n,e)=>{const t=Cs(Cr,n.__scopeScrollArea),{forceMount:s,...i}=n,[a,l]=v.useState(!1),u=n.orientation==="horizontal",d=xp(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,f=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?h:f)}},10);return wo(t.viewport,d),wo(t.content,d),r.jsx(Mn,{present:s||a,children:r.jsx(mv,{"data-state":a?"visible":"hidden",...i,ref:e})})}),mv=v.forwardRef((n,e)=>{const{orientation:t="vertical",...s}=n,i=Cs(Cr,n.__scopeScrollArea),a=v.useRef(null),l=v.useRef(0),[u,d]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=TA(u.viewport,u.content),f={...s,sizes:u,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:g=>a.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function m(g,b){return O$(g,l.current,u,b)}return t==="horizontal"?r.jsx(A$,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollLeft,b=mS(g,u,i.dir);a.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=m(g,i.dir))}}):t==="vertical"?r.jsx(P$,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollTop,b=mS(g,u);a.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=m(g))}}):null}),A$=v.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...i}=n,a=Cs(Cr,n.__scopeScrollArea),[l,u]=v.useState(),d=v.useRef(null),h=We(e,d,a.onScrollbarXChange);return v.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),r.jsx(jA,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yp(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(a.viewport){const g=a.viewport.scrollLeft+f.deltaX;n.onWheelScroll(g),PA(g,m)&&f.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:hh(l.paddingLeft),paddingEnd:hh(l.paddingRight)}})}})}),P$=v.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...i}=n,a=Cs(Cr,n.__scopeScrollArea),[l,u]=v.useState(),d=v.useRef(null),h=We(e,d,a.onScrollbarYChange);return v.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),r.jsx(jA,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yp(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(a.viewport){const g=a.viewport.scrollTop+f.deltaY;n.onWheelScroll(g),PA(g,m)&&f.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:hh(l.paddingTop),paddingEnd:hh(l.paddingBottom)}})}})}),[E$,CA]=vA(Cr),jA=v.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:m,...g}=n,b=Cs(Cr,t),[S,x]=v.useState(null),w=We(e,O=>x(O)),N=v.useRef(null),E=v.useRef(""),C=b.viewport,A=s.content-s.viewport,P=Ut(f),R=Ut(d),T=xp(m,10);function j(O){if(N.current){const I=O.clientX-N.current.left,D=O.clientY-N.current.top;h({x:I,y:D})}}return v.useEffect(()=>{const O=I=>{const D=I.target;S?.contains(D)&&P(I,A)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[C,S,A,P]),v.useEffect(R,[s,R]),wo(S,T),wo(b.content,T),r.jsx(E$,{scope:t,scrollbar:S,hasThumb:i,onThumbChange:Ut(a),onThumbPointerUp:Ut(l),onThumbPositionChange:R,onThumbPointerDown:Ut(u),children:r.jsx(Me.div,{...g,ref:w,style:{position:"absolute",...g.style},onPointerDown:Se(n.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),N.current=S.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),j(O))}),onPointerMove:Se(n.onPointerMove,j),onPointerUp:Se(n.onPointerUp,O=>{const I=O.target;I.hasPointerCapture(O.pointerId)&&I.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=E.current,b.viewport&&(b.viewport.style.scrollBehavior=""),N.current=null})})})}),dh="ScrollAreaThumb",NA=v.forwardRef((n,e)=>{const{forceMount:t,...s}=n,i=CA(dh,n.__scopeScrollArea);return r.jsx(Mn,{present:t||i.hasThumb,children:r.jsx(M$,{ref:e,...s})})}),M$=v.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:s,...i}=n,a=Cs(dh,t),l=CA(dh,t),{onThumbPositionChange:u}=l,d=We(e,m=>l.onThumbChange(m)),h=v.useRef(void 0),f=xp(()=>{h.current&&(h.current(),h.current=void 0)},100);return v.useEffect(()=>{const m=a.viewport;if(m){const g=()=>{if(f(),!h.current){const b=I$(m,u);h.current=b,u()}};return u(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[a.viewport,f,u]),r.jsx(Me.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Se(n.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),S=m.clientX-b.left,x=m.clientY-b.top;l.onThumbPointerDown({x:S,y:x})}),onPointerUp:Se(n.onPointerUp,l.onThumbPointerUp)})});NA.displayName=dh;var gv="ScrollAreaCorner",kA=v.forwardRef((n,e)=>{const t=Cs(gv,n.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?r.jsx(R$,{...n,ref:e}):null});kA.displayName=gv;var R$=v.forwardRef((n,e)=>{const{__scopeScrollArea:t,...s}=n,i=Cs(gv,t),[a,l]=v.useState(0),[u,d]=v.useState(0),h=!!(a&&u);return wo(i.scrollbarX,()=>{const f=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(f),d(f)}),wo(i.scrollbarY,()=>{const f=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(f),l(f)}),h?r.jsx(Me.div,{...s,ref:e,style:{width:a,height:u,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function hh(n){return n?parseInt(n,10):0}function TA(n,e){const t=n/e;return isNaN(t)?0:t}function yp(n){const e=TA(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,s=(n.scrollbar.size-t)*e;return Math.max(s,18)}function O$(n,e,t,s="ltr"){const i=yp(t),a=i/2,l=e||a,u=i-l,d=t.scrollbar.paddingStart+l,h=t.scrollbar.size-t.scrollbar.paddingEnd-u,f=t.content-t.viewport,m=s==="ltr"?[0,f]:[f*-1,0];return AA([d,h],m)(n)}function mS(n,e,t="ltr"){const s=yp(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,l=e.content-e.viewport,u=a-s,d=t==="ltr"?[0,l]:[l*-1,0],h=Ql(n,d);return AA([0,l],[0,u])(h)}function AA(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function PA(n,e){return n>0&&n<e}var I$=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},s=0;return(function i(){const a={left:n.scrollLeft,top:n.scrollTop},l=t.left!==a.left,u=t.top!==a.top;(l||u)&&e(),t=a,s=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(s)};function xp(n,e){const t=Ut(n),s=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),v.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function wo(n,e){const t=Ut(e);Ht(()=>{let s=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(s),i.unobserve(n)}}},[n,t])}var EA=bA,F$=SA,D$=kA;const _s=v.forwardRef(({className:n,children:e,...t},s)=>r.jsxs(EA,{ref:s,className:Ve("relative overflow-hidden",n),...t,children:[r.jsx(F$,{className:"h-full w-full rounded-[inherit]",children:e}),r.jsx(MA,{}),r.jsx(D$,{})]}));_s.displayName=EA.displayName;const MA=v.forwardRef(({className:n,orientation:e="vertical",...t},s)=>r.jsx(fv,{ref:s,orientation:e,className:Ve("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:r.jsx(NA,{className:"relative flex-1 rounded-full bg-border"})}));MA.displayName=fv.displayName;function V$(){const[n,e]=v.useState("javascript"),[t,s]=v.useState(`class MelodyGenerator {
    constructor(tempo = 120) {
        this.tempo = tempo;
        this.notes = [];
    }

    addNote(pitch, duration) {
        this.notes.push({
            pitch: pitch,
            duration: duration,
            velocity: Math.random() * 0.5 + 0.5
        });
    }

    generateScale() {
        const scales = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
        for (let i = 0; i < scales.length; i++) {
            this.addNote(scales[i] + '4', 0.25);
        }
    }

    play() {
        console.log('Playing melody...');
        return this.notes;
    }
}`),[i,a]=v.useState(null),[l,u]=v.useState([5]),{toast:d}=yn(),{initialize:h,isInitialized:f,playNote:m}=tr(),g=v.useContext(Ca),b=gt({mutationFn:async w=>(await ot("POST","/api/code-to-music",w)).json(),onSuccess:w=>{a(w),w.melody&&g.setCurrentMelody(w.melody);const N={kick:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],snare:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hihat:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],bass:[!0,!1,!0,!1,!1,!1,!0,!1,!0,!1,!0,!1,!1,!1,!0,!1],tom:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],openhat:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],clap:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],crash:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]};g.setCurrentPattern(N),g.setCurrentCodeMusic(w),d({title:"Compilation Complete",description:"Code has been converted to music successfully."})},onError:()=>{d({title:"Compilation Failed",description:"Failed to convert code to music. Please try again.",variant:"destructive"})}}),S=()=>{if(!t.trim()){d({title:"No Code Provided",description:"Please enter some code to convert.",variant:"destructive"});return}b.mutate({code:t,language:n,complexity:l[0]})},x=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Code to Music Compiler"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(ne,{onClick:()=>{h(),d({title:"Audio Initialized",description:"The audio engine has started."})},disabled:f,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),f?"Audio Ready":"Start Audio"]}),r.jsx(ne,{onClick:S,disabled:b.isPending,className:"bg-studio-accent hover:bg-blue-500",children:b.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Compiling..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-exchange-alt mr-2"}),"Compile to Music"]})}),r.jsxs(ne,{onClick:async()=>{if(i&&f)if(console.log("Playing music data:",i),i.melody&&Array.isArray(i.melody)&&i.melody.length>0){let w=0;const N=()=>{if(w<i.melody.length){const C=i.melody[w];if(C&&C.note){const A=C.note.replace(/\d/,""),P=parseInt(C.note.replace(/[A-G]#?/,""))||4,R=C.instrument||"piano";console.log(`Playing note ${C.note} -> ${A}${P} on ${R} for ${C.duration||.5}s`),m(A,P,C.duration||.5,R,.7)}w++,w<i.melody.length&&setTimeout(N,(i.melody[w-1]?.duration||.5)*1e3)}};N(),i.drumPattern&&(g.setCurrentPattern(i.drumPattern),await g.playFullSong());const E=[...new Set(i.melody.map(C=>C.instrument||"piano"))].length;d({title:"Playing Multi-Instrument Arrangement",description:`Playing ${i.melody.length} notes across ${E} instruments plus drums.`})}else console.log("No playable melody found, playing drum pattern only"),await g.playFullSong(),d({title:"Playing Rhythm",description:"Playing drum pattern from compiled code."});else d(i?{title:"Audio Not Ready",description:"Please start audio first.",variant:"destructive"}:{title:"No Music",description:"Please compile code first.",variant:"destructive"})},disabled:!i||!f,className:"bg-studio-success hover:bg-green-500",children:[r.jsx("i",{className:"fas fa-play mr-2"}),"Play Result"]}),r.jsxs(ne,{onClick:()=>{a(null),g.setCurrentCodeMusic({}),g.setCurrentMelody([]);const w={kick:Array(16).fill(!1),snare:Array(16).fill(!1),hihat:Array(16).fill(!1),bass:Array(16).fill(!1),tom:Array(16).fill(!1),openhat:Array(16).fill(!1),clap:Array(16).fill(!1),crash:Array(16).fill(!1)};g.setCurrentPattern(w),d({title:"Music Cleared",description:"All compiled music data has been cleared."})},disabled:!i,className:"bg-gray-600 hover:bg-gray-500",children:[r.jsx("i",{className:"fas fa-trash mr-2"}),"Clear Music"]})]})]})}),r.jsx(_s,{className:"flex-1 p-6",children:r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Source Code"}),r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:x.map(w=>r.jsx(le,{value:w.value,children:w.label},w.value))})]})]}),r.jsx(cs,{value:t,onChange:w=>s(w.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Enter your code here..."}),r.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-studio-success rounded-full"}),r.jsx("span",{children:"Code analysis complete"}),r.jsx("div",{className:"flex-1"}),r.jsx("span",{className:"text-gray-400",children:"25 lines  3 functions  1 class"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{className:"text-sm",children:["AI Complexity: ",l[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(me,{value:l,onValueChange:u,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Controls how intricate the musical arrangement will be"})]})]})]}),r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Generated Music"}),r.jsx("div",{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4",children:i?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"Algorithmic Composition Based on Code Structure"}),r.jsxs("svg",{className:"w-full h-32",viewBox:"0 0 400 120",children:[[20,35,50,65,80].map(w=>r.jsx("line",{x1:"20",y1:w,x2:"380",y2:w,stroke:"#666",strokeWidth:"1"},w)),[{x:50,y:35},{x:90,y:50},{x:130,y:35},{x:170,y:20},{x:210,y:35},{x:250,y:50},{x:290,y:35},{x:330,y:20}].map((w,N)=>r.jsx("circle",{cx:w.x,cy:w.y,r:"4",fill:"hsl(203, 100%, 55%)"},N))]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Classes  Piano"}),r.jsx("div",{className:"w-16 h-2 bg-blue-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Functions  Strings"}),r.jsx("div",{className:"w-12 h-2 bg-green-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Loops  Drums"}),r.jsx("div",{className:"w-8 h-2 bg-yellow-500 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Variables  Bass"}),r.jsx("div",{className:"w-20 h-2 bg-purple-500 rounded"})]})]})]}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"fas fa-music text-4xl mb-4"}),r.jsx("p",{children:"Generated music will appear here after compilation"})]})})}),r.jsx("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-music text-studio-accent"}),r.jsx("span",{children:"Key: C Major"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-clock text-studio-accent"}),r.jsx("span",{children:"Duration: 32 beats"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"fas fa-layer-group text-studio-accent"}),r.jsx("span",{children:"4 tracks"})]})]})})]})]})})]})}function L$(){const[n,e]=v.useState("javascript"),[t,s]=v.useState("functional"),[i,a]=v.useState([5]),[l,u]=v.useState(null),[d,h]=v.useState(null),[f,m]=v.useState(null),[g,b]=v.useState(!1),{toast:S}=yn(),{playNote:x,playDrumSound:w,initialize:N,isInitialized:E}=tr(),C=v.useContext(Ca),A=gt({mutationFn:async O=>{const I=new FormData;return O.audioFile&&I.append("audio",O.audioFile),O.musicData&&I.append("musicData",JSON.stringify(O.musicData)),I.append("language",O.language),I.append("codeStyle",O.codeStyle),I.append("complexity",O.complexity.toString()),(await ot("POST","/api/music-to-code",I)).json()},onSuccess:O=>{u(O.analysis),O.code&&typeof O.code=="object"&&h({language:String(O.code.language||"javascript"),code:String(O.code.code||""),description:String(O.code.description||"Generated code"),framework:String(O.code.framework||"Unknown"),functionality:Array.isArray(O.code.functionality)?O.code.functionality:[]}),S({title:"Music Analysis Complete!",description:`Generated ${O.code?.language||"JavaScript"} code from musical composition.`})},onError:O=>{S({title:"Analysis Failed",description:O.message||"Failed to analyze music and generate code.",variant:"destructive"})}}),P=gt({mutationFn:async()=>(await ot("POST","/api/test-circular-translation",{sourceCode:"CodedSwitch"})).json(),onSuccess:O=>{u(O.originalAnalysis);const I=O.regeneratedCode;h(I&&typeof I=="object"?{language:String(I.language||"javascript"),code:String(I.code||""),description:String(I.description||"Generated from circular translation"),framework:String(I.framework||"Unknown"),functionality:Array.isArray(I.functionality)?I.functionality.map(String):[]}:{language:"javascript",code:String(I||""),description:"Generated from circular translation",framework:"Unknown",functionality:[]}),S({title:"Circular Translation Test Complete!",description:`Match accuracy: ${O.accuracy}%`})}}),R=O=>{m(O)},T=()=>{const O=d?.code||"",I=document.getElementById("code-test-results");if(I){I.innerHTML='<span class="text-yellow-600">Testing code...</span>';try{O.includes("class ")&&O.includes("constructor")?setTimeout(()=>{I.innerHTML=`
            <div class="text-green-600"> Code syntax valid</div>
            <div class="text-green-600"> Class structure detected</div>
            <div class="text-green-600"> Constructor methods found</div>
            <div class="text-green-600"> Functions properly defined</div>
            <div class="text-blue-600 mt-1">Code appears functional and ready to use!</div>
          `},1500):I.innerHTML='<div class="text-orange-600"> Code structure may need refinement</div>'}catch{I.innerHTML='<div class="text-red-600"> Syntax errors detected</div>'}}},j=()=>{if(g){const O={pattern:C.currentPattern,melody:C.currentMelody,lyrics:C.currentLyrics,codeMusic:C.currentCodeMusic};A.mutate({musicData:O,language:n,codeStyle:t,complexity:i[0]})}else f?A.mutate({audioFile:f,language:n,codeStyle:t,complexity:i[0]}):S({title:"No Music Selected",description:"Please upload an audio file or select current composition.",variant:"destructive"})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Music  Code Converter"}),r.jsx("p",{className:"text-muted-foreground",children:"Transform musical compositions into functional code"})]}),r.jsxs(Bi,{defaultValue:"upload",className:"w-full",children:[r.jsxs(Hr,{className:"grid w-full grid-cols-3",children:[r.jsx(dt,{value:"upload",children:"Upload Music"}),r.jsx(dt,{value:"current",children:"Current Composition"}),r.jsx(dt,{value:"circular",children:"Circular Test"})]}),r.jsx(ht,{value:"upload",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Audio File Upload"}),r.jsx(rn,{children:"Upload an audio file to analyze and convert to code"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"space-y-4",children:r.jsx("input",{type:"file",accept:"audio/*",onChange:O=>{const I=O.target.files?.[0];I&&R(I)},className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-violet-50 file:text-violet-700
                    hover:file:bg-violet-100`})}),f&&r.jsx("div",{className:"mt-2 p-2 bg-muted rounded",children:r.jsxs("span",{className:"text-sm",children:["Selected: ",f.name]})})]})]})}),r.jsx(ht,{value:"current",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Current Studio Composition"}),r.jsx(rn,{children:"Use the music you've created in CodedSwitch"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Pattern:"})," ",C.currentPattern?"Available":"None"]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Melody:"})," ",C.currentMelody?.length||0," notes"]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Lyrics:"})," ",C.currentLyrics?"Available":"None"]})]}),r.jsx(ne,{onClick:()=>b(!0),className:"mt-4",disabled:!C.currentPattern&&!C.currentMelody,children:"Use Current Composition"})]})]})}),r.jsx(ht,{value:"circular",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Circular Translation Test"}),r.jsx(rn,{children:"Test perfect round-trip: CodedSwitch  Music  CodedSwitch"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"This will take our own source code, convert it to music, then convert that music back to code. Perfect accuracy would mean we get identical code back!"}),r.jsx(ne,{onClick:()=>P.mutate(),disabled:P.isPending,className:"bg-gradient-to-r from-purple-500 to-pink-500",children:P.isPending?"Testing...":"Run Circular Test"})]})]})})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Code Generation Settings"})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{htmlFor:"language",children:"Target Language"}),r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"javascript",children:"JavaScript"}),r.jsx(le,{value:"python",children:"Python"}),r.jsx(le,{value:"react",children:"React Component"}),r.jsx(le,{value:"css",children:"CSS/HTML"}),r.jsx(le,{value:"java",children:"Java"}),r.jsx(le,{value:"csharp",children:"C#"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{htmlFor:"style",children:"Code Style"}),r.jsxs(Ye,{value:t,onValueChange:s,children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"functional",children:"Functional"}),r.jsx(le,{value:"object-oriented",children:"Object-Oriented"}),r.jsx(le,{value:"procedural",children:"Procedural"}),r.jsx(le,{value:"declarative",children:"Declarative"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{children:["Code Complexity: ",i[0]]}),r.jsx(me,{value:i,onValueChange:a,min:1,max:10,step:1,className:"w-full"})]}),r.jsx(ne,{onClick:j,disabled:A.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500",children:A.isPending?"Analyzing...":"Convert Music to Code"})]})]}),(l||d)&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l&&r.jsxs(ge,{children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Music Analysis"}),r.jsx(rn,{children:"Generated musical composition from your code"})]}),r.jsxs(je,{children:[r.jsx(_s,{className:"h-64",children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Tempo:"})," ",String(l.tempo||120)," BPM"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Key:"})," ",String(l.key||"C Major")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Time Signature:"})," ",String(l.timeSignature||"4/4")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Mood:"})," ",String(l.mood||"neutral")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Complexity:"})," ",String(l.complexity||5),"/10"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Structure:"})," ",Array.isArray(l.structure)?l.structure.join("  "):"No structure data"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Instruments:"})," ",Array.isArray(l.instruments)?l.instruments.join(", "):"No instrument data"]})]})}),r.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(ne,{variant:"outline",onClick:async()=>{console.log("Testing basic audio..."),E||await N(),x("C",4,1,"piano",.8),w("kick",.8),S({title:"Audio Test",description:"Playing test note and kick drum"})},children:[r.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Test Audio"]}),r.jsx(ne,{onClick:async()=>{if(console.log(" Starting Play Music - Full composition playback"),!l){console.log(" No music analysis available");return}try{E||(console.log(" Initializing audio system..."),await N(),console.log(" Audio system initialized successfully"),S({title:"Audio System Ready",description:"Professional audio engine initialized"})),console.log(" Testing basic note..."),x("C",4,.5,"piano",.8),setTimeout(async()=>{console.log(" Starting full composition...");const O={Intro:["C","E","G","E"],Verse:["C","G","Am","F","C","G"],Chorus:["F","G","Am","C","F","G","C"],Bridge:["Am","F","C","G","Am"],Outro:["F","C","G","C"]};let I=0;const D=60/(l.tempo||120)*1e3,B=Array.isArray(l.structure)?l.structure:["Verse","Chorus"];for(const H of B){const z=O[H]||["C","E","G","C"];console.log(` Playing section: ${H}`);for(let G=0;G<z.length;G++){const Q=z[G],X=I+G*D;setTimeout(()=>{console.log(` Playing note: ${Q}`);const q=Array.isArray(l.instruments)?l.instruments:["piano"];q.includes("piano")&&x(Q,4,D/1e3,"piano",.7),q.includes("strings")&&x(Q,5,D/1e3*1.5,"strings",.5),q.includes("bass")&&x(Q,2,D/1e3*2,"bass",.8),!q.includes("piano")&&!q.includes("strings")&&!q.includes("bass")&&x(Q,4,D/1e3,"piano",.7)},X)}I+=z.length*D+500}if((l.complexity||5)>=5){const H=60/(l.tempo||120)*1e3/4;console.log(` Adding drum pattern at ${H}ms intervals`);for(let z=0;z<16;z++)setTimeout(()=>{z%4===0&&w("kick",.8),z%4===2&&w("snare",.7),z%2===1&&w("hihat",.4)},z*H)}},600)}catch(O){console.error(" Audio initialization failed:",O),S({title:"Audio Error",description:"Failed to initialize audio. Please check browser permissions.",variant:"destructive"});return}S({title:"Playing Complete Composition",description:`${Array.isArray(l.instruments)?l.instruments.join(", "):"Multiple instruments"} with ${String(l.mood)} beat at ${String(l.tempo)} BPM`})},className:"bg-green-600 hover:bg-green-700",children:" Play Music"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Listen to the musical composition generated from your code"})]})})]})]}),d&&r.jsxs(ge,{children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Generated Code"}),r.jsxs(rn,{children:[String(d?.framework||"Unknown Framework")," - ",String(d?.description||"Generated code")]})]}),r.jsxs(je,{children:[r.jsx(_s,{className:"h-64",children:r.jsx("pre",{className:"text-xs bg-muted p-4 rounded overflow-x-auto",children:r.jsx("code",{children:typeof d?.code=="string"?d.code:typeof d?.code=="object"?JSON.stringify(d.code,null,2):String(d?.code||"No code generated")})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsx("div",{className:"text-sm font-medium",children:"Functionality:"}),r.jsx("ul",{className:"text-sm text-muted-foreground list-disc pl-4",children:Array.isArray(d.functionality)?d.functionality.map((O,I)=>r.jsx("li",{children:String(O)},I)):r.jsx("li",{children:"No functionality data available"})}),r.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Code Verification"}),r.jsx(ne,{onClick:()=>T(),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:" Test Code"})]}),r.jsx("div",{className:"text-xs text-blue-600",children:"Verify that the regenerated code actually works and compiles correctly"}),r.jsx("div",{id:"code-test-results",className:"mt-2 p-2 bg-gray-100 rounded text-xs font-mono min-h-[40px]",children:r.jsx("span",{className:"text-gray-500",children:'Click "Test Code" to verify functionality...'})})]})]})]})]})]})]})}const RA=v.createContext(void 0);function B$({children:n}){const[e,t]=v.useState([]),s=v.useCallback((a,l)=>{const u={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,content:a,timestamp:new Date,source:l};console.log(" Adding AI message via context:",u.id,l),t(d=>[...d,u])},[]),i=v.useCallback(()=>{t([])},[]);return r.jsx(RA.Provider,{value:{addMessage:s,messages:e,clearMessages:i},children:n})}function z$(){const n=v.useContext(RA);if(n===void 0)throw new Error("useAIMessages must be used within an AIMessageProvider");return n}function U$(n,e,t){const s=[];return n.forEach(i=>typeof i!="string"?s.push(i):e[Symbol.split](i).forEach((a,l,u)=>{a!==""&&s.push(a),l<u.length-1&&s.push(t)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function gS(n,e){const t=/\$/g,s="$$$$";let i=[n];if(e==null)return i;for(const a of Object.keys(e))if(a!=="_"){let l=e[a];typeof l=="string"&&(l=t[Symbol.replace](l,s)),i=U$(i,new RegExp(`%\\{${a}\\}`,"g"),l)}return i}const $$=n=>{throw new Error(`missing string: ${n}`)};class OA{locale;constructor(e,{onMissingKey:t=$$}={}){this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(e)?e.forEach(this.#e,this):this.#e(e),this.#t=t}#t;#e(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let s=this.locale.strings[e];if(s==null&&(this.#t(e),s=e),typeof s=="object"){if(t&&typeof t.smart_count<"u"){const a=this.locale.pluralize(t.smart_count);return gS(s[a],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return gS(s,t)}}class IA{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new OA([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Wm(n){return n<10?`0${n}`:n.toString()}function Od(){const n=new Date,e=Wm(n.getHours()),t=Wm(n.getMinutes()),s=Wm(n.getSeconds());return`${e}:${t}:${s}`}const q$={debug:()=>{},warn:()=>{},error:(...n)=>console.error(`[Uppy] [${Od()}]`,...n)},G$={debug:(...n)=>console.debug(`[Uppy] [${Od()}]`,...n),warn:(...n)=>console.warn(`[Uppy] [${Od()}]`,...n),error:(...n)=>console.error(`[Uppy] [${Od()}]`,...n)};function FA(n){return typeof n!="object"||n===null||!("nodeType"in n)?!1:n.nodeType===Node.ELEMENT_NODE}function W$(n,e=document){return typeof n=="string"?e.querySelector(n):FA(n)?n:null}function DA(n){for(;n&&!n.dir;)n=n.parentNode;return n?.dir}var Oc,nt,VA,na,yS,LA,BA,zA,yv,xy,vy,nc={},UA=[],H$=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ic=Array.isArray;function hr(n,e){for(var t in e)n[t]=e[t];return n}function xv(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function sc(n,e,t){var s,i,a,l={};for(a in e)a=="key"?s=e[a]:a=="ref"?i=e[a]:l[a]=e[a];if(arguments.length>2&&(l.children=arguments.length>3?Oc.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)l[a]===void 0&&(l[a]=n.defaultProps[a]);return zl(n,l,s,i,null)}function zl(n,e,t,s,i){var a={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++VA,__i:-1,__u:0};return i==null&&nt.vnode!=null&&nt.vnode(a),a}function K$(){return{current:null}}function $s(n){return n.children}function Xn(n,e){this.props=n,this.context=e}function So(n,e){if(e==null)return n.__?So(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?So(n):null}function $A(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return $A(n)}}function xS(n){(!n.__d&&(n.__d=!0)&&na.push(n)&&!ph.__r++||yS!=nt.debounceRendering)&&((yS=nt.debounceRendering)||LA)(ph)}function ph(){for(var n,e,t,s,i,a,l,u=1;na.length;)na.length>u&&na.sort(BA),n=na.shift(),u=na.length,n.__d&&(t=void 0,i=(s=(e=n).__v).__e,a=[],l=[],e.__P&&((t=hr({},s)).__v=s.__v+1,nt.vnode&&nt.vnode(t),vv(e.__P,t,s,e.__n,e.__P.namespaceURI,32&s.__u?[i]:null,a,i??So(s),!!(32&s.__u),l),t.__v=s.__v,t.__.__k[t.__i]=t,WA(a,t,l),t.__e!=i&&$A(t)));ph.__r=0}function qA(n,e,t,s,i,a,l,u,d,h,f){var m,g,b,S,x,w,N,E=s&&s.__k||UA,C=e.length;for(d=Q$(t,e,E,d,C),m=0;m<C;m++)(b=t.__k[m])!=null&&(g=b.__i==-1?nc:E[b.__i]||nc,b.__i=m,w=vv(n,b,g,i,a,l,u,d,h,f),S=b.__e,b.ref&&g.ref!=b.ref&&(g.ref&&bv(g.ref,null,b),f.push(b.ref,b.__c||S,b)),x==null&&S!=null&&(x=S),(N=!!(4&b.__u))||g.__k===b.__k?d=GA(b,d,n,N):typeof b.type=="function"&&w!==void 0?d=w:S&&(d=S.nextSibling),b.__u&=-7);return t.__e=x,d}function Q$(n,e,t,s,i){var a,l,u,d,h,f=t.length,m=f,g=0;for(n.__k=new Array(i),a=0;a<i;a++)(l=e[a])!=null&&typeof l!="boolean"&&typeof l!="function"?(d=a+g,(l=n.__k[a]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?zl(null,l,null,null,null):Ic(l)?zl($s,{children:l},null,null,null):l.constructor==null&&l.__b>0?zl(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=n,l.__b=n.__b+1,u=null,(h=l.__i=Y$(l,t,d,m))!=-1&&(m--,(u=t[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(i>f?g--:i<f&&g++),typeof l.type!="function"&&(l.__u|=4)):h!=d&&(h==d-1?g--:h==d+1?g++:(h>d?g--:g++,l.__u|=4))):n.__k[a]=null;if(m)for(a=0;a<f;a++)(u=t[a])!=null&&(2&u.__u)==0&&(u.__e==s&&(s=So(u)),KA(u,u));return s}function GA(n,e,t,s){var i,a;if(typeof n.type=="function"){for(i=n.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=n,e=GA(i[a],e,t,s));return e}n.__e!=e&&(s&&(e&&n.type&&!e.parentNode&&(e=So(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Vs(n,e){return e=e||[],n==null||typeof n=="boolean"||(Ic(n)?n.some(function(t){Vs(t,e)}):e.push(n)),e}function Y$(n,e,t,s){var i,a,l,u=n.key,d=n.type,h=e[t],f=h!=null&&(2&h.__u)==0;if(h===null&&n.key==null||f&&u==h.key&&d==h.type)return t;if(s>(f?1:0)){for(i=t-1,a=t+1;i>=0||a<e.length;)if((h=e[l=i>=0?i--:a++])!=null&&(2&h.__u)==0&&u==h.key&&d==h.type)return l}return-1}function vS(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||H$.test(e)?t:t+"px"}function ud(n,e,t,s,i){var a,l;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||vS(n.style,e,"");if(t)for(e in t)s&&t[e]==s[e]||vS(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(zA,"$1")),l=e.toLowerCase(),e=l in n||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=t,t?s?t.u=s.u:(t.u=yv,n.addEventListener(e,a?vy:xy,a)):n.removeEventListener(e,a?vy:xy,a);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function bS(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=yv++;else if(e.t<t.u)return;return t(nt.event?nt.event(e):e)}}}function vv(n,e,t,s,i,a,l,u,d,h){var f,m,g,b,S,x,w,N,E,C,A,P,R,T,j,O,I,D=e.type;if(e.constructor!=null)return null;128&t.__u&&(d=!!(32&t.__u),a=[u=e.__e=t.__e]),(f=nt.__b)&&f(e);e:if(typeof D=="function")try{if(N=e.props,E="prototype"in D&&D.prototype.render,C=(f=D.contextType)&&s[f.__c],A=f?C?C.props.value:f.__:s,t.__c?w=(m=e.__c=t.__c).__=m.__E:(E?e.__c=m=new D(N,A):(e.__c=m=new Xn(N,A),m.constructor=D,m.render=Z$),C&&C.sub(m),m.props=N,m.state||(m.state={}),m.context=A,m.__n=s,g=m.__d=!0,m.__h=[],m._sb=[]),E&&m.__s==null&&(m.__s=m.state),E&&D.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=hr({},m.__s)),hr(m.__s,D.getDerivedStateFromProps(N,m.__s))),b=m.props,S=m.state,m.__v=e,g)E&&D.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),E&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(E&&D.getDerivedStateFromProps==null&&N!==b&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(N,A),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(N,m.__s,A)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(m.props=N,m.state=m.__s,m.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(B){B&&(B.__=e)}),P=0;P<m._sb.length;P++)m.__h.push(m._sb[P]);m._sb=[],m.__h.length&&l.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(N,m.__s,A),E&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(b,S,x)})}if(m.context=A,m.props=N,m.__P=n,m.__e=!1,R=nt.__r,T=0,E){for(m.state=m.__s,m.__d=!1,R&&R(e),f=m.render(m.props,m.state,m.context),j=0;j<m._sb.length;j++)m.__h.push(m._sb[j]);m._sb=[]}else do m.__d=!1,R&&R(e),f=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++T<25);m.state=m.__s,m.getChildContext!=null&&(s=hr(hr({},s),m.getChildContext())),E&&!g&&m.getSnapshotBeforeUpdate!=null&&(x=m.getSnapshotBeforeUpdate(b,S)),O=f,f!=null&&f.type===$s&&f.key==null&&(O=HA(f.props.children)),u=qA(n,Ic(O)?O:[O],e,t,s,i,a,l,u,d,h),m.base=e.__e,e.__u&=-161,m.__h.length&&l.push(m),w&&(m.__E=m.__=null)}catch(B){if(e.__v=null,d||a!=null)if(B.then){for(e.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,e.__e=u}else{for(I=a.length;I--;)xv(a[I]);by(e)}else e.__e=t.__e,e.__k=t.__k,B.then||by(e);nt.__e(B,e,t)}else a==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):u=e.__e=X$(t.__e,e,t,s,i,a,l,d,h);return(f=nt.diffed)&&f(e),128&e.__u?void 0:u}function by(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(by)}function WA(n,e,t){for(var s=0;s<t.length;s++)bv(t[s],t[++s],t[++s]);nt.__c&&nt.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(a){a.call(i)})}catch(a){nt.__e(a,i.__v)}})}function HA(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Ic(n)?n.map(HA):hr({},n)}function X$(n,e,t,s,i,a,l,u,d){var h,f,m,g,b,S,x,w=t.props,N=e.props,E=e.type;if(E=="svg"?i="http://www.w3.org/2000/svg":E=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(h=0;h<a.length;h++)if((b=a[h])&&"setAttribute"in b==!!E&&(E?b.localName==E:b.nodeType==3)){n=b,a[h]=null;break}}if(n==null){if(E==null)return document.createTextNode(N);n=document.createElementNS(i,E,N.is&&N),u&&(nt.__m&&nt.__m(e,a),u=!1),a=null}if(E==null)w===N||u&&n.data==N||(n.data=N);else{if(a=a&&Oc.call(n.childNodes),w=t.props||nc,!u&&a!=null)for(w={},h=0;h<n.attributes.length;h++)w[(b=n.attributes[h]).name]=b.value;for(h in w)if(b=w[h],h!="children"){if(h=="dangerouslySetInnerHTML")m=b;else if(!(h in N)){if(h=="value"&&"defaultValue"in N||h=="checked"&&"defaultChecked"in N)continue;ud(n,h,null,b,i)}}for(h in N)b=N[h],h=="children"?g=b:h=="dangerouslySetInnerHTML"?f=b:h=="value"?S=b:h=="checked"?x=b:u&&typeof b!="function"||w[h]===b||ud(n,h,b,w[h],i);if(f)u||m&&(f.__html==m.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(m&&(n.innerHTML=""),qA(e.type=="template"?n.content:n,Ic(g)?g:[g],e,t,s,E=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,l,a?a[0]:t.__k&&So(t,0),u,d),a!=null)for(h=a.length;h--;)xv(a[h]);u||(h="value",E=="progress"&&S==null?n.removeAttribute("value"):S!=null&&(S!==n[h]||E=="progress"&&!S||E=="option"&&S!=w[h])&&ud(n,h,S,w[h],i),h="checked",x!=null&&x!=n[h]&&ud(n,h,x,w[h],i))}return n}function bv(n,e,t){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&e==null||(n.__u=n(e))}else n.current=e}catch(i){nt.__e(i,t)}}function KA(n,e,t){var s,i;if(nt.unmount&&nt.unmount(n),(s=n.ref)&&(s.current&&s.current!=n.__e||bv(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(a){nt.__e(a,e)}s.base=s.__P=null}if(s=n.__k)for(i=0;i<s.length;i++)s[i]&&KA(s[i],e,t||typeof n.type!="function");t||xv(n.__e),n.__c=n.__=n.__e=void 0}function Z$(n,e,t){return this.constructor(n,t)}function J$(n,e,t){var s,i,a,l;e==document&&(e=document.documentElement),nt.__&&nt.__(n,e),i=(s=!1)?null:e.__k,a=[],l=[],vv(e,n=e.__k=sc($s,null,[n]),i||nc,nc,e.namespaceURI,i?null:e.firstChild?Oc.call(e.childNodes):null,a,i?i.__e:e.firstChild,s,l),WA(a,n,l)}function QA(n,e,t){var s,i,a,l,u=hr({},n.props);for(a in n.type&&n.type.defaultProps&&(l=n.type.defaultProps),e)a=="key"?s=e[a]:a=="ref"?i=e[a]:u[a]=e[a]===void 0&&l!=null?l[a]:e[a];return arguments.length>2&&(u.children=arguments.length>3?Oc.call(arguments,2):t),zl(n.type,u,s||n.key,i||n.ref,null)}Oc=UA.slice,nt={__e:function(n,e,t,s){for(var i,a,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(n)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,s||{}),l=i.__d),l)return i.__E=i}catch(u){n=u}throw n}},VA=0,Xn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=hr({},this.state),typeof n=="function"&&(n=n(hr({},t),this.props)),n&&hr(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),xS(this))},Xn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),xS(this))},Xn.prototype.render=$s,na=[],LA=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,BA=function(n,e){return n.__v.__b-e.__v.__b},ph.__r=0,zA=/(PointerCapture)$|Capture$/i,yv=0,xy=bS(!1),vy=bS(!0);var rc,Wt,Hm,wS,ic=0,YA=[],Jt=nt,SS=Jt.__b,_S=Jt.__r,CS=Jt.diffed,jS=Jt.__c,NS=Jt.unmount,kS=Jt.__;function wv(n,e){Jt.__h&&Jt.__h(Wt,n,ic||e),ic=0;var t=Wt.__H||(Wt.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function fh(n){return ic=1,e7(ZA,n)}function e7(n,e,t){var s=wv(rc++,2);if(s.t=n,!s.__c&&(s.__=[t?t(e):ZA(void 0,e),function(u){var d=s.__N?s.__N[0]:s.__[0],h=s.t(d,u);d!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=Wt,!Wt.__f)){var i=function(u,d,h){if(!s.__c.__H)return!0;var f=s.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!a||a.call(this,u,d,h);var m=s.__c.props!==u;return f.forEach(function(g){if(g.__N){var b=g.__[0];g.__=g.__N,g.__N=void 0,b!==g.__[0]&&(m=!0)}}),a&&a.call(this,u,d,h)||m};Wt.__f=!0;var a=Wt.shouldComponentUpdate,l=Wt.componentWillUpdate;Wt.componentWillUpdate=function(u,d,h){if(this.__e){var f=a;a=void 0,i(u,d,h),a=f}l&&l.call(this,u,d,h)},Wt.shouldComponentUpdate=i}return s.__N||s.__}function wy(n,e){var t=wv(rc++,3);!Jt.__s&&XA(t.__H,e)&&(t.__=n,t.u=e,Wt.__H.__h.push(t))}function Id(n){return ic=5,Sv(function(){return{current:n}},[])}function Sv(n,e){var t=wv(rc++,7);return XA(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function t7(n,e){return ic=8,Sv(function(){return n},e)}function n7(){for(var n;n=YA.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Fd),n.__H.__h.forEach(Sy),n.__H.__h=[]}catch(e){n.__H.__h=[],Jt.__e(e,n.__v)}}Jt.__b=function(n){Wt=null,SS&&SS(n)},Jt.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),kS&&kS(n,e)},Jt.__r=function(n){_S&&_S(n),rc=0;var e=(Wt=n.__c).__H;e&&(Hm===Wt?(e.__h=[],Wt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Fd),e.__h.forEach(Sy),e.__h=[],rc=0)),Hm=Wt},Jt.diffed=function(n){CS&&CS(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(YA.push(e)!==1&&wS===Jt.requestAnimationFrame||((wS=Jt.requestAnimationFrame)||s7)(n7)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Hm=Wt=null},Jt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Fd),t.__h=t.__h.filter(function(s){return!s.__||Sy(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Jt.__e(s,t.__v)}}),jS&&jS(n,e)},Jt.unmount=function(n){NS&&NS(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{Fd(s)}catch(i){e=i}}),t.__H=void 0,e&&Jt.__e(e,t.__v))};var TS=typeof requestAnimationFrame=="function";function s7(n){var e,t=function(){clearTimeout(s),TS&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,35);TS&&(e=requestAnimationFrame(t))}function Fd(n){var e=Wt,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Wt=e}function Sy(n){var e=Wt;n.__c=n.__(),Wt=e}function XA(n,e){return!n||n.length!==e.length||e.some(function(t,s){return t!==n[s]})}function ZA(n,e){return typeof e=="function"?e(n):e}function r7(n,e){for(var t in e)n[t]=e[t];return n}function AS(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function PS(n,e){this.props=n,this.context=e}(PS.prototype=new Xn).isPureReactComponent=!0,PS.prototype.shouldComponentUpdate=function(n,e){return AS(this.props,n)||AS(this.state,e)};var ES=nt.__b;nt.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),ES&&ES(n)};var i7=nt.__e;nt.__e=function(n,e,t,s){if(n.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}i7(n,e,t,s)};var MS=nt.unmount;function JA(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=r7({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return JA(s,e,t)})),n}function eP(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return eP(s,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function Km(){this.__u=0,this.o=null,this.__b=null}function tP(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function dd(){this.i=null,this.l=null}nt.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),MS&&MS(n)},(Km.prototype=new Xn).__c=function(n,e){var t=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(t);var i=tP(s.__v),a=!1,l=function(){a||(a=!0,t.__R=null,i?i(u):u())};t.__R=l;var u=function(){if(!--s.__u){if(s.state.__a){var d=s.state.__a;s.__v.__k[0]=eP(d,d.__c.__P,d.__c.__O)}var h;for(s.setState({__a:s.__b=null});h=s.o.pop();)h.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(l,l)},Km.prototype.componentWillUnmount=function(){this.o=[]},Km.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=JA(this.__b,t,s.__O=s.__P)}this.__b=null}var i=e.__a&&sc($s,null,n.fallback);return i&&(i.__u&=-33),[sc($s,null,e.__a?null:n.children),i]};var RS=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(dd.prototype=new Xn).__a=function(n){var e=this,t=tP(e.__v),s=e.l.get(n);return s[0]++,function(i){var a=function(){e.props.revealOrder?(s.push(i),RS(e,n,s)):i()};t?t(a):a()}},dd.prototype.render=function(n){this.i=null,this.l=new Map;var e=Vs(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},dd.prototype.componentDidUpdate=dd.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){RS(n,t,e)})};var a7=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,o7=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,l7=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,c7=/[A-Z0-9]/g,u7=typeof document<"u",d7=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function OS(n,e,t){return e.__k==null&&(e.textContent=""),J$(n,e),typeof t=="function"&&t(),n?n.__c:null}Xn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Xn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var IS=nt.event;function h7(){}function p7(){return this.cancelBubble}function f7(){return this.defaultPrevented}nt.event=function(n){return IS&&(n=IS(n)),n.persist=h7,n.isPropagationStopped=p7,n.isDefaultPrevented=f7,n.nativeEvent=n};var m7={enumerable:!1,configurable:!0,get:function(){return this.class}},FS=nt.vnode;nt.vnode=function(n){typeof n.type=="string"&&(function(e){var t=e.props,s=e.type,i={},a=s.indexOf("-")===-1;for(var l in t){var u=t[l];if(!(l==="value"&&"defaultValue"in t&&u==null||u7&&l==="children"&&s==="noscript"||l==="class"||l==="className")){var d=l.toLowerCase();l==="defaultValue"&&"value"in t&&t.value==null?l="value":l==="download"&&u===!0?u="":d==="translate"&&u==="no"?u=!1:d[0]==="o"&&d[1]==="n"?d==="ondoubleclick"?l="ondblclick":d!=="onchange"||s!=="input"&&s!=="textarea"||d7(t.type)?d==="onfocus"?l="onfocusin":d==="onblur"?l="onfocusout":l7.test(l)&&(l=d):d=l="oninput":a&&o7.test(l)?l=l.replace(c7,"-$&").toLowerCase():u===null&&(u=void 0),d==="oninput"&&i[l=d]&&(l="oninputCapture"),i[l]=u}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Vs(t.children).forEach(function(h){h.props.selected=i.value.indexOf(h.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=Vs(t.children).forEach(function(h){h.props.selected=i.multiple?i.defaultValue.indexOf(h.props.value)!=-1:i.defaultValue==h.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",m7)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i})(n),n.$$typeof=a7,FS&&FS(n)};var DS=nt.__r;nt.__r=function(n){DS&&DS(n),n.__c};var VS=nt.diffed;nt.diffed=function(n){VS&&VS(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function g7(n){let e=null,t;return(...s)=>(t=s,e||(e=Promise.resolve().then(()=>(e=null,n(...t)))),e)}class ya extends IA{#t;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof ya||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:ya}}));else if(typeof e=="function"){const s=e;this.uppy.iteratePlugins(i=>{i instanceof s&&(t=i)})}return t}mount(e,t){const s=t.id,i=W$(e);if(i){this.isTargetDOMEl=!0;const u=document.createElement("div");return u.classList.add("uppy-Root"),this.#t=g7(d=>{this.uppy.getPlugin(this.id)&&(OS(this.render(d,u),u),this.afterUpdate())}),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),OS(this.render(this.uppy.getState(),u),u),this.el=u,i.appendChild(u),u.dir=this.opts.direction||DA(u)||"ltr",this.onMount(),this.el}const a=this.getTargetPlugin(e);if(a)return this.uppy.log(`Installing ${s} to ${a.id}`),this.parent=a,this.el=a.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let l=`Invalid target option given to ${s}.`;throw typeof e=="function"?l+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":l+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#t?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}}const y7="4.3.2",x7={version:y7};class v7{static VERSION=x7.version;state={};#t=new Set;getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,this.#e(t,s,e)}subscribe(e){return this.#t.add(e),()=>{this.#t.delete(e)}}#e(...e){this.#t.forEach(t=>{t(...e)})}}function nP(n){const e=n.lastIndexOf(".");return e===-1||e===n.length-1?{name:n,extension:void 0}:{name:n.slice(0,e),extension:n.slice(e+1)}}const LS={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function sP(n){if(n.type)return n.type;const e=n.name?nP(n.name).extension?.toLowerCase():null;return e&&e in LS?LS[e]:"application/octet-stream"}function b7(n){return n.charCodeAt(0).toString(32)}function BS(n){let e="";return n.replace(/[^A-Z0-9]/gi,t=>(e+=`-${b7(t)}`,"/"))+e}function w7(n,e){let t=e||"uppy";return typeof n.name=="string"&&(t+=`-${BS(n.name.toLowerCase())}`),n.type!==void 0&&(t+=`-${n.type}`),n.meta&&typeof n.meta.relativePath=="string"&&(t+=`-${BS(n.meta.relativePath.toLowerCase())}`),n.data.size!==void 0&&(t+=`-${n.data.size}`),n.data.lastModified!==void 0&&(t+=`-${n.data.lastModified}`),t}function S7(n){return!n.isRemote||!n.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(n.remote.provider)}function _7(n,e){if(S7(n))return n.id;const t=sP(n);return w7({...n,type:t},e)}var Qm,zS;function _v(){if(zS)return Qm;zS=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Qm=n,Qm}var Ym,US;function C7(){if(US)return Ym;US=1;var n=typeof Gu=="object"&&Gu&&Gu.Object===Object&&Gu;return Ym=n,Ym}var Xm,$S;function rP(){if($S)return Xm;$S=1;var n=C7(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Xm=t,Xm}var Zm,qS;function j7(){if(qS)return Zm;qS=1;var n=rP(),e=function(){return n.Date.now()};return Zm=e,Zm}var Jm,GS;function N7(){if(GS)return Jm;GS=1;var n=/\s/;function e(t){for(var s=t.length;s--&&n.test(t.charAt(s)););return s}return Jm=e,Jm}var eg,WS;function k7(){if(WS)return eg;WS=1;var n=N7(),e=/^\s+/;function t(s){return s&&s.slice(0,n(s)+1).replace(e,"")}return eg=t,eg}var tg,HS;function iP(){if(HS)return tg;HS=1;var n=rP(),e=n.Symbol;return tg=e,tg}var ng,KS;function T7(){if(KS)return ng;KS=1;var n=iP(),e=Object.prototype,t=e.hasOwnProperty,s=e.toString,i=n?n.toStringTag:void 0;function a(l){var u=t.call(l,i),d=l[i];try{l[i]=void 0;var h=!0}catch{}var f=s.call(l);return h&&(u?l[i]=d:delete l[i]),f}return ng=a,ng}var sg,QS;function A7(){if(QS)return sg;QS=1;var n=Object.prototype,e=n.toString;function t(s){return e.call(s)}return sg=t,sg}var rg,YS;function P7(){if(YS)return rg;YS=1;var n=iP(),e=T7(),t=A7(),s="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function l(u){return u==null?u===void 0?i:s:a&&a in Object(u)?e(u):t(u)}return rg=l,rg}var ig,XS;function E7(){if(XS)return ig;XS=1;function n(e){return e!=null&&typeof e=="object"}return ig=n,ig}var ag,ZS;function M7(){if(ZS)return ag;ZS=1;var n=P7(),e=E7(),t="[object Symbol]";function s(i){return typeof i=="symbol"||e(i)&&n(i)==t}return ag=s,ag}var og,JS;function R7(){if(JS)return og;JS=1;var n=k7(),e=_v(),t=M7(),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(h){if(typeof h=="number")return h;if(t(h))return s;if(e(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=e(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=n(h);var m=a.test(h);return m||l.test(h)?u(h.slice(2),m?2:8):i.test(h)?s:+h}return og=d,og}var lg,e_;function aP(){if(e_)return lg;e_=1;var n=_v(),e=j7(),t=R7(),s="Expected a function",i=Math.max,a=Math.min;function l(u,d,h){var f,m,g,b,S,x,w=0,N=!1,E=!1,C=!0;if(typeof u!="function")throw new TypeError(s);d=t(d)||0,n(h)&&(N=!!h.leading,E="maxWait"in h,g=E?i(t(h.maxWait)||0,d):g,C="trailing"in h?!!h.trailing:C);function A(H){var z=f,G=m;return f=m=void 0,w=H,b=u.apply(G,z),b}function P(H){return w=H,S=setTimeout(j,d),N?A(H):b}function R(H){var z=H-x,G=H-w,Q=d-z;return E?a(Q,g-G):Q}function T(H){var z=H-x,G=H-w;return x===void 0||z>=d||z<0||E&&G>=g}function j(){var H=e();if(T(H))return O(H);S=setTimeout(j,R(H))}function O(H){return S=void 0,C&&f?A(H):(f=m=void 0,b)}function I(){S!==void 0&&clearTimeout(S),w=0,f=x=m=S=void 0}function D(){return S===void 0?b:O(e())}function B(){var H=e(),z=T(H);if(f=arguments,m=this,x=H,z){if(S===void 0)return P(x);if(E)return clearTimeout(S),S=setTimeout(j,d),A(x)}return S===void 0&&(S=setTimeout(j,d)),b}return B.cancel=I,B.flush=D,B}return lg=l,lg}var cg,t_;function O7(){if(t_)return cg;t_=1;var n=aP(),e=_v(),t="Expected a function";function s(i,a,l){var u=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(u="leading"in l?!!l.leading:u,d="trailing"in l?!!l.trailing:d),n(i,a,{leading:u,maxWait:a,trailing:d})}return cg=s,cg}var I7=O7();const F7=Ys(I7);var ug,n_;function D7(){return n_||(n_=1,ug=function(){var e={},t=e._fns={};e.emit=function(l,u,d,h,f,m,g){var b=s(l);b.length&&i(l,b,[u,d,h,f,m,g])},e.on=function(l,u){t[l]||(t[l]=[]),t[l].push(u)},e.once=function(l,u){function d(){u.apply(this,arguments),e.off(l,d)}this.on(l,d)},e.off=function(l,u){var d=[];if(l&&u){var h=this._fns[l],f=0,m=h?h.length:0;for(f;f<m;f++)h[f]!==u&&d.push(h[f])}d.length?this._fns[l]=d:delete this._fns[l]};function s(a){var l=t[a]?t[a]:[],u=a.indexOf(":"),d=u===-1?[a]:[a.substring(0,u),a.substring(u+1)],h=Object.keys(t),f=0,m=h.length;for(f;f<m;f++){var g=h[f];if(g==="*"&&(l=l.concat(t[g])),d.length===2&&d[0]===g){l=l.concat(t[g]);break}}return l}function i(a,l,u){var d=0,h=l.length;for(d;d<h&&l[d];d++)l[d].event=a,l[d].apply(l[d],u)}return e}),ug}var V7=D7();const L7=Ys(V7);let B7="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Cv=(n=21)=>{let e="",t=n|0;for(;t--;)e+=B7[Math.random()*64|0];return e};const z7="4.5.3",U7={version:z7};function $7(n,e){return e.name?e.name:n.split("/")[0]==="image"?`${n.split("/")[0]}.${n.split("/")[1]}`:"noname"}const q7={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var dg,s_;function G7(){return s_||(s_=1,dg=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let s=Math.abs(e);if(t&&(s=-s),s===0)return"0 B";const i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(s)/Math.log(1024)),i.length-1),l=Number(s/1024**a),u=i[a];return`${l>=10||l%1===0?Math.round(l):l.toFixed(1)} ${u}`}),dg}var W7=G7();const ra=Ys(W7);var hg,r_;function H7(){if(r_)return hg;r_=1;function n(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}return n.prototype.match=function(e){var t=!0,s=this.parts,i,a=s.length,l;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(l=(e||"").split(this.separator),i=0;t&&i<a;i++)s[i]!=="*"&&(i<l.length?t=s[i]===l[i]:t=!1);t=t&&l}else if(typeof e.splice=="function")for(t=[],i=e.length;i--;)this.match(e[i])&&(t[t.length]=e[i]);else if(typeof e=="object"){t={};for(var u in e)this.match(u)&&(t[u]=e[u])}return t},hg=function(e,t,s){var i=new n(e,s||/[\/\.]/);return typeof t<"u"?i.match(t):i},hg}var pg,i_;function K7(){if(i_)return pg;i_=1;var n=H7(),e=/[\/\+\.]/;return pg=function(t,s){function i(a){var l=n(a,t,e);return l&&l.length>=2}return s?i(s.split(";")[0]):i},pg}var Q7=K7();const Y7=Ys(Q7),X7={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Is extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0}class Z7{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{const s=e();if(s.restrictions?.allowedFileTypes!=null&&!Array.isArray(s.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return s}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:s,maxNumberOfFiles:i}=this.getOpts().restrictions;if(i&&e.filter(l=>!l.isGhost).length+t.length>i)throw new Is(`${this.getI18n()("youCanOnlyUploadX",{smart_count:i})}`);if(s){const a=[...e,...t].reduce((l,u)=>l+(u.size??0),0);if(a>s)throw new Is(this.getI18n()("aggregateExceedsSize",{sizeAllowed:ra(s),size:ra(a)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:s,allowedFileTypes:i}=this.getOpts().restrictions;if(i&&!i.some(l=>l.includes("/")?e.type?Y7(e.type.replace(/;.*?$/,""),l):!1:l[0]==="."&&e.extension?e.extension.toLowerCase()===l.slice(1).toLowerCase():!1)){const l=i.join(", ");throw new Is(this.getI18n()("youCanOnlyUploadFileTypes",{types:l}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new Is(this.getI18n()("exceedsSize",{size:ra(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(s&&e.size!=null&&e.size<s)throw new Is(this.getI18n()("inferiorSize",{size:ra(s)}),{file:e})}validate(e,t){t.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Is(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new Is(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:s}=this.getOpts().restrictions,i=[];for(const a of s)(!Object.hasOwn(e.meta,a)||e.meta[a]==="")&&i.push(a);return{missingFields:i,error:t}}}function J7(n){if(n==null&&typeof navigator<"u"&&(n=navigator.userAgent),!n)return!0;const e=/Edge\/(\d+\.\d+)/.exec(n);if(!e)return!0;const s=e[1].split(".",2),i=parseInt(s[0],10),a=parseInt(s[1],10);return i<15||i===15&&a<15063||i>18||i===18&&a>=18218}const hd={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};class jv{static VERSION=U7.version;#t=Object.create(null);#e;#n;#s=L7();#r=new Set;#a=new Set;#o=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=q7;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:X7,meta:{},onBeforeFileAdded:(i,a)=>!Object.hasOwn(a,i.id),onBeforeUpload:i=>i,store:new v7,logger:q$,infoTimeout:5e3},s={...t,...e};this.opts={...s,restrictions:{...t.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=G$),this.log(`Using Core v${jv.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...hd,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:J7(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#e=new Z7(()=>this.opts,()=>this.i18n),this.#n=this.store.subscribe((i,a,l)=>{this.emit("state-update",i,a,l),this.updateAll(a)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#_()}emit(e,...t){this.#s.emit(e,...t)}on(e,t){return this.#s.on(e,t),this}once(e,t){return this.#s.once(e,t),this}off(e,t){return this.#s.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([s,i])=>[s,{...t[s],...i}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Cant set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),t=new OA([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s=Object.create(null);Object.keys(t).forEach(i=>{s[i]={...t[i],progress:{...t[i].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:s,...hd})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...hd,files:{}})}addPreProcessor(e){this.#r.add(e)}removePreProcessor(e){return this.#r.delete(e)}addPostProcessor(e){this.#o.add(e)}removePostProcessor(e){return this.#o.delete(e)}addUploader(e){this.#a.add(e)}removeUploader(e){return this.#a.delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(i=>{s[i]={...s[i],meta:{...s[i].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const i={...s[e].meta,...t};s[e]={...s[e],meta:i},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),i=Object.values(e),a=[],l=[],u=[],d=[],h=[],f=[],m=[],g=[],b=[];for(const S of i){const{progress:x}=S;!x.uploadComplete&&x.uploadStarted&&(a.push(S),S.isPaused||g.push(S)),x.uploadStarted||l.push(S),(x.uploadStarted||x.preprocess||x.postprocess)&&u.push(S),x.uploadStarted&&d.push(S),S.isPaused&&h.push(S),x.uploadComplete&&f.push(S),S.error&&m.push(S),(x.preprocess||x.postprocess)&&b.push(S)}return{newFiles:l,startedFiles:u,uploadStartedFiles:d,pausedFiles:h,completeFiles:f,erroredFiles:m,inProgressFiles:a,inProgressNotPausedFiles:g,processingFiles:b,isUploadStarted:d.length>0,isAllComplete:t===100&&f.length===i.length&&b.length===0,isAllErrored:!!s&&m.length===i.length,isAllPaused:a.length!==0&&h.length===a.length,isUploadInProgress:a.length>0,isSomeGhost:i.some(S=>S.isGhost)}}#i(e){for(const l of e)l.isRestriction?this.emit("restriction-failed",l.file,l):this.emit("error",l,l.file),this.log(l,"warning");const t=e.filter(l=>l.isUserFacing),s=4,i=t.slice(0,s),a=t.slice(s);i.forEach(({message:l,details:u=""})=>{this.info({message:l,details:u},"error",this.opts.infoTimeout)}),a.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:a.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#e.validate(t,[e])}catch(s){return s}return null}validateSingleFile(e){try{this.#e.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{this.#e.validateAggregateRestrictions(t,e)}catch(s){return s.message}return null}#c(e){const{missingFields:t,error:s}=this.#e.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:s.message}),this.log(s.message),this.emit("restriction-failed",e,s),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#p(e){let t=!0;for(const s of Object.values(e))this.#c(s)||(t=!1);return t}#u(e){const{allowNewUpload:t}=this.getState();if(t===!1){const s=new Is(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#i([s]),s}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}#d(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,s=sP(t),i=$7(s,t),a=nP(i).extension,l=_7(t,this.getID()),u=t.meta||{};u.name=i,u.type=s;const d=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:l,name:i,extension:a||"",meta:{...this.getState().meta,...u},type:s,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}#l(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#h(e){let{files:t}=this.getState(),s={...t};const i=[],a=[];for(const l of e)try{let u=this.#d(l);const d=t[u.id]?.isGhost;d&&(u={...t[u.id],isGhost:!1,data:l.data},this.log(`Replaced the blob in the restored ghost file: ${u.name}, ${u.id}`));const h=this.opts.onBeforeFileAdded(u,s);if(t=this.getState().files,s={...t,...s},!h&&this.checkIfFileAlreadyExists(u.id))throw new Is(this.i18n("noDuplicates",{fileName:u.name??this.i18n("unnamed")}),{file:l});if(h===!1&&!d)throw new Is("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});typeof h=="object"&&h!==null&&(u=h),this.#e.validateSingleFile(u),s[u.id]=u,i.push(u)}catch(u){a.push(u)}try{this.#e.validateAggregateRestrictions(Object.values(t),i)}catch(l){return a.push(l),{nextFilesState:t,validFilesToAdd:[],errors:a}}return{nextFilesState:s,validFilesToAdd:i,errors:a}}addFile(e){this.#u(e);const{nextFilesState:t,validFilesToAdd:s,errors:i}=this.#h([e]),a=i.filter(u=>u.isRestriction);if(this.#i(a),i.length>0)throw i[0];this.setState({files:t});const[l]=s;return this.emit("file-added",l),this.emit("files-added",s),this.log(`Added file: ${l.name}, ${l.id}, mime type: ${l.type}`),this.#l(),l.id}addFiles(e){this.#u();const{nextFilesState:t,validFilesToAdd:s,errors:i}=this.#h(e),a=i.filter(u=>u.isRestriction);this.#i(a);const l=i.filter(u=>!u.isRestriction);if(l.length>0){let u=`Multiple errors occurred while adding files:
`;if(l.forEach(d=>{u+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:u},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(l,u);{const d=new Error(u);throw d.errors=l,d}}this.setState({files:t}),s.forEach(u=>{this.emit("file-added",u)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(u=>{this.log(`Added file: ${u.name}
 id: ${u.id}
 type: ${u.type}`)}),s.length>0&&this.#l()}removeFiles(e){const{files:t,currentUploads:s}=this.getState(),i={...t},a={...s},l=Object.create(null);e.forEach(f=>{t[f]&&(l[f]=t[f],delete i[f])});function u(f){return l[f]===void 0}Object.keys(a).forEach(f=>{const m=s[f].fileIDs.filter(u);if(m.length===0){delete a[f];return}const{capabilities:g}=this.getState();if(m.length!==s[f].fileIDs.length&&!g.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");a[f]={...s[f],fileIDs:m}});const d={currentUploads:a,files:i};Object.keys(i).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),this.#y();const h=Object.keys(l);h.forEach(f=>{this.emit("file-removed",l[f])}),h.length>5?this.log(`Removed ${h.length} files`):this.log(`Removed files: ${h.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),i=!(t.isPaused||!1);return this.setFileState(e,{isPaused:i}),this.emit("upload-pause",t,i),i}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const i={...e[s],isPaused:!0};e[s]=i}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const i={...e[s],isPaused:!1,error:null};e[s]=i}),this.setState({files:e}),this.emit("resume-all")}#f(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const s=e[t];return s.error&&(!s.missingRequiredMetaFields||s.missingRequiredMetaFields.length===0)})}async#m(){const e=this.#f(),t={...this.getState().files};if(e.forEach(i=>{t[i]={...t[i],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const s=this.#b(e,{forceAllowNewUpload:!0});return this.#C(s)}async retryAll(){const e=await this.#m();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(hd)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=this.#b([e],{forceAllowNewUpload:!0});return this.#C(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#g=(e,t)=>{const s=e?this.getFile(e.id):void 0;if(e==null||!s){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const i={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};s.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...s.progress,...i,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...s.progress,...i}}),this.#y()};#x(){const e=this.#S();let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#y=F7(()=>this.#x(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#x()}#S(){const t=this.getFiles().filter(d=>d.progress.uploadStarted||d.progress.preprocess||d.progress.postprocess);if(t.length===0)return 0;if(t.every(d=>d.progress.uploadComplete))return 1;const s=d=>d.progress.bytesTotal!=null&&d.progress.bytesTotal!==0,i=t.filter(s),a=t.filter(d=>!s(d));if(i.every(d=>d.progress.uploadComplete)&&a.length>0&&!a.every(d=>d.progress.uploadComplete))return null;const l=i.reduce((d,h)=>d+(h.progress.bytesTotal??0),0),u=i.reduce((d,h)=>d+(h.progress.bytesUploaded||0),0);return l===0?0:u/l}#_(){const e=(i,a,l)=>{let u=i.message||"Unknown error";i.details&&(u+=` ${i.details}`),this.setState({error:u}),a!=null&&a.id in this.getState().files&&this.setFileState(a.id,{error:u,response:l})};this.on("error",e),this.on("upload-error",(i,a,l)=>{if(e(a,i,l),typeof a=="object"&&a.message){this.log(a.message,"error");const u=new Error(this.i18n("failedToUpload",{file:i?.name??""}));u.isUserFacing=!0,u.details=a.message,a.details&&(u.details+=` ${a.details}`),this.#i([u])}else this.#i([a])});let t=null;this.on("upload-stalled",(i,a)=>{const{message:l}=i,u=a.map(d=>d.meta.name).join(", ");t||(this.info({message:l,details:u},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${l} ${u}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const s=i=>{const a=i.filter(u=>{const d=u!=null&&this.getFile(u.id);return d||this.log(`Not setting progress for a file that has been removed: ${u?.id}`),d}),l=Object.fromEntries(a.map(u=>[u.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:u.size}}]));this.patchFilesState(l)};this.on("upload-start",s),this.on("upload-progress",this.#g),this.on("upload-success",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const l=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...l,postprocess:this.#o.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:l.bytesTotal},response:a,uploadURL:a.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:a.bytesUploaded||l.bytesTotal}),this.#y()}),this.on("preprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:a}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.preprocess,this.setState({files:a})}),this.on("postprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:a}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.postprocess,this.setState({files:a})}),this.on("restored",()=>{this.#y()}),this.on("dashboard:file-edit-complete",i=>{i&&this.#c(i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#v),window.addEventListener("offline",this.#v),setTimeout(this.#v,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#v=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}const s=new e(this,...t),i=s.id;if(!i)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const a=this.getPlugin(i);if(a){const l=`Already found a plugin named '${a.id}'. Tried to use: '${i}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),s.type in this.#t?this.#t[s.type].push(s):this.#t[s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(const t of Object.values(this.#t)){const s=t.find(i=>i.id===e);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](e){return this.#t[e]}iteratePlugins(e){Object.values(this.#t).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=this.#t[e.type],s=t.findIndex(l=>l.id===e.id);s!==-1&&t.splice(s,1);const a={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(a)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#n(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#v),window.removeEventListener("offline",this.#v))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",s=3e3){const i=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}#w=new Map;registerRequestClient(e,t){this.#w.set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=this.#w.get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?this.#C(e):(this.#j(e),Promise.reject(new Error("Nonexistent upload")))}#b(e,t={}){const{forceAllowNewUpload:s=!1}=t,{allowNewUpload:i,currentUploads:a}=this.getState();if(!i&&!s)throw new Error("Cannot create a new upload: already uploading.");const l=Cv();return this.emit("upload",l,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...a,[l]:{fileIDs:e,step:0,result:{}}}}),l}[Symbol.for("uppy test: createUpload")](...e){return this.#b(...e)}#N(e){const{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#N(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),i={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:i}})}#j(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async#C(e){const t=()=>{const{currentUploads:l}=this.getState();return l[e]};let s=t();const i=[...this.#r,...this.#a,...this.#o];try{for(let l=s.step||0;l<i.length&&s;l++){const u=i[l];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...s,step:l}}});const{fileIDs:d}=s;await u(d,e),s=t()}}catch(l){throw this.#j(e),l}if(s){s.fileIDs.forEach(h=>{const f=this.getFile(h);f?.progress.postprocess&&this.emit("postprocess-complete",f)});const l=s.fileIDs.map(h=>this.getFile(h)),u=l.filter(h=>!h.error),d=l.filter(h=>h.error);this.addResultData(e,{successful:u,failed:d,uploadID:e}),s=t()}let a;return s&&(a=s.result,this.#j(e)),a==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),a={successful:[],failed:[],uploadID:e}),a}async upload(){this.#t.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#f().length>0){const i=await this.#m();if(!(this.getFiles().filter(l=>l.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:e}=this.getState())}const s=this.opts.onBeforeUpload(e);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(e=s,this.setState({files:e})),Promise.resolve().then(()=>this.#e.validateMinNumberOfFiles(e)).catch(i=>{throw this.#i([i]),i}).then(()=>{if(!this.#p(e))throw new Is(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),a=Object.values(i).flatMap(h=>h.fileIDs),l=[];Object.keys(e).forEach(h=>{const f=this.getFile(h);!f.progress.uploadStarted&&a.indexOf(h)===-1&&l.push(f.id)});const u=this.#b(l),d=await this.#C(u);return this.emit("complete",d),d}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}}var eq=0;function $(n,e,t,s,i,a){e||(e={});var l,u,d=e;if("ref"in d)for(u in d={},e)u=="ref"?l=e[u]:d[u]=e[u];var h={type:n,props:d,key:t,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--eq,__i:-1,__u:0,__source:i,__self:a};if(typeof n=="function"&&(l=n.defaultProps))for(u in l)d[u]===void 0&&(d[u]=l[u]);return nt.vnode&&nt.vnode(h),h}const tq="4.3.2",nq={version:tq},a_=300;class sq extends Xn{ref=K$();componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,a_)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,a_)}render(){const{children:e}=this.props;return $("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}}function rq(n,e){return Object.assign(n,e)}function iq(n,e){return n?.key??e}function aq(n,e){const t=n._ptgLinkedRefs||(n._ptgLinkedRefs={});return t[e]||(t[e]=s=>{n.refs[e]=s})}function Al(n){const e={};for(let t=0;t<n.length;t++)if(n[t]!=null){const s=iq(n[t],t.toString(36));e[s]=n[t]}return e}function oq(n,e){n=n||{},e=e||{};const t=l=>Object.hasOwn(e,l)?e[l]:n[l],s={};let i=[];for(const l in n)Object.hasOwn(e,l)?i.length&&(s[l]=i,i=[]):i.push(l);const a={};for(const l in e){if(Object.hasOwn(s,l))for(let u=0;u<s[l].length;u++){const d=s[l][u];a[s[l][u]]=t(d)}a[l]=t(l)}for(let l=0;l<i.length;l++)a[i[l]]=t(i[l]);return a}const lq=n=>n;class oP extends Xn{constructor(e,t){super(e,t),this.refs={},this.state={children:Al(Vs(Vs(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=Al(Vs(e.children)||[]),s=this.state.children;this.setState(a=>({children:oq(a.children,t)}));let i;for(i in t)if(Object.hasOwn(t,i)){const a=s&&Object.hasOwn(s,i);t[i]&&a&&this.currentlyTransitioningKeys[i]?(this.keysToEnter.push(i),this.keysToAbortLeave.push(i)):t[i]&&!a&&!this.currentlyTransitioningKeys[i]&&this.keysToEnter.push(i)}for(i in s)if(Object.hasOwn(s,i)){const a=t&&Object.hasOwn(t,i);s[i]&&!a&&!this.currentlyTransitioningKeys[i]&&this.keysToLeave.push(i)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Al(Vs(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Al(Vs(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s?.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const s=this.refs[e];s?.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const i=Al(Vs(this.props.children)||[]);if(i&&Object.hasOwn(i,e))this.performEnter(e);else{const a=rq({},this.state.children);delete a[e],this.setState({children:a})}}render({childFactory:e,transitionLeave:t,transitionName:s,transitionAppear:i,transitionEnter:a,transitionLeaveTimeout:l,transitionEnterTimeout:u,transitionAppearTimeout:d,component:h,...f},{children:m}){const g=Object.entries(m).map(([b,S])=>{if(!S)return;const x=aq(this,b);return QA(e(S),{ref:x,key:b})}).filter(Boolean);return sc(h,f,g)}}oP.defaultProps={component:"span",childFactory:lq};class cq extends ya{static VERSION=nq.version;constructor(e,t){super(e,t),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}render=e=>$("div",{className:"uppy uppy-Informer",children:$(oP,{children:e.info.map(t=>$(sq,{children:$("p",{role:"alert",children:[t.message," ",t.details&&$("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})});install(){const{target:e}=this.opts;e&&this.mount(e,this)}}var fg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var o_;function uq(){return o_||(o_=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=i(a,s(u)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)e.call(a,u)&&a[u]&&(l=i(l,u));return l}function i(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(fg)),fg.exports}var dq=uq();const Qs=Ys(dq),hq={position:"relative",width:"100%",minHeight:"100%"},pq={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class fq extends Xn{constructor(e){super(e),this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}handleScroll=()=>{this.setState({offset:this.base.scrollTop})};handleResize=()=>{this.resize()};resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:e,rowHeight:t,renderRow:s,overscanCount:i=10,...a}){const{offset:l,height:u}=this.state;let d=Math.floor(l/t),h=Math.floor(u/t);i&&(d=Math.max(0,d-d%i),h+=i);const f=d+h+4,m=e.slice(d,f),g={...hq,height:e.length*t},b={...pq,top:d*t};return $("div",{onScroll:this.handleScroll,...a,children:$("div",{role:"presentation",style:g,children:$("div",{role:"presentation",style:b,children:m.map(s)})})})}}function mq(){return $("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:$("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function l_(n,e,t,s){return n===e?n:s===0?e:n+(e-n)*2**(-s/t)}const gq="4.2.3",yq={version:gq},xq={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},lr={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function vq(n){const e=Math.floor(n/3600)%24,t=Math.floor(n/60)%60,s=Math.floor(n%60);return{hours:e,minutes:t,seconds:s}}function bq(n){const e=vq(n),t=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,i=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${s}${i}`}const wq="",c_=()=>` ${wq} `;function Sq(n){const{newFiles:e,isUploadStarted:t,recoveredState:s,i18n:i,uploadState:a,isSomeGhost:l,startUpload:u}=n,d=Qs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":a===lr.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":l}),h=e&&t&&!s?i("uploadXNewFiles",{smart_count:e}):i("uploadXFiles",{smart_count:e});return $("button",{type:"button",className:d,"aria-label":i("uploadXFiles",{smart_count:e}),onClick:u,disabled:l,"data-uppy-super-focusable":!0,children:h})}function _q(n){const{i18n:e,uppy:t}=n;return $("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:$("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function Cq(n){const{i18n:e,uppy:t}=n;return $("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:$("g",{fill:"none",fillRule:"evenodd",children:[$("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),$("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function jq(n){const{isAllPaused:e,i18n:t,isAllComplete:s,resumableUploads:i,uppy:a}=n,l=t(e?"resume":"pause");function u(){if(!s){if(!i){a.cancelAll();return}if(e){a.resumeAll();return}a.pauseAll()}}return $("button",{title:l,"aria-label":l,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:u,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:$("g",{fill:"none",fillRule:"evenodd",children:[$("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),$("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function Nq(n){const{i18n:e,doneButtonHandler:t}=n;return $("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function lP(){return $("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:$("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function kq(n){const{progress:e}=n,{value:t,mode:s,message:i}=e;return $("div",{className:"uppy-StatusBar-content",children:[$(lP,{}),s==="determinate"?`${Math.round(t*100)}%  `:"",i]})}function Tq(n){const{numUploads:e,complete:t,totalUploadedSize:s,totalSize:i,totalETA:a,i18n:l}=n,u=e>1,d=ra(s);return $("div",{className:"uppy-StatusBar-statusSecondary",children:[u&&l("filesUploadedOfTotal",{complete:t,smart_count:e}),$("span",{className:"uppy-StatusBar-additionalInfo",children:[u&&c_(),i!=null?l("dataUploadedOfTotal",{complete:d,total:ra(i)}):l("dataUploadedOfUnknown",{complete:d}),c_(),a!=null&&l("xTimeLeft",{time:bq(a)})]})]})}function cP(n){const{i18n:e,complete:t,numUploads:s}=n;return $("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:s})})}function Aq(n){const{i18n:e,newFiles:t,startUpload:s}=n,i=Qs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return $("div",{className:"uppy-StatusBar-statusSecondary",children:[$("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),$("button",{type:"button",className:i,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:s,children:e("upload")})]})}function Pq(n){const{i18n:e,supportsUploadProgress:t,totalProgress:s,showProgressDetails:i,isUploadStarted:a,isAllComplete:l,isAllPaused:u,newFiles:d,numUploads:h,complete:f,totalUploadedSize:m,totalSize:g,totalETA:b,startUpload:S}=n,x=d&&a;if(!a||l)return null;const w=e(u?"paused":"uploading");function N(){return!u&&!x&&i?t?$(Tq,{numUploads:h,complete:f,totalUploadedSize:m,totalSize:g,totalETA:b,i18n:e}):$(cP,{i18n:e,complete:f,numUploads:h}):null}return $("div",{className:"uppy-StatusBar-content",title:w,children:[u?null:$(lP,{}),$("div",{className:"uppy-StatusBar-status",children:[$("div",{className:"uppy-StatusBar-statusPrimary",children:t&&s!==0?`${w}: ${s}%`:w}),N(),x?$(Aq,{i18n:e,newFiles:d,startUpload:S}):null]})]})}function Eq(n){const{i18n:e}=n;return $("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:$("div",{className:"uppy-StatusBar-status",children:$("div",{className:"uppy-StatusBar-statusPrimary",children:[$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:$("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function Mq(n){const{error:e,i18n:t,complete:s,numUploads:i}=n;function a(){const l=`${t("uploadFailed")} 

 ${e}`;alert(l)}return $("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:$("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),$("div",{className:"uppy-StatusBar-status",children:[$("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),$("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:a,type:"button",children:"?"})]}),$(cP,{i18n:t,complete:s,numUploads:i})]})]})}function mg(n){const e=[];let t="indeterminate",s;for(const{progress:a}of Object.values(n)){const{preprocess:l,postprocess:u}=a;s==null&&(l||u)&&({mode:t,message:s}=l||u),l?.mode==="determinate"&&e.push(l.value),u?.mode==="determinate"&&e.push(u.value)}const i=e.reduce((a,l)=>a+l/e.length,0);return{mode:t,message:s,value:i}}const{STATE_ERROR:u_,STATE_WAITING:Rq,STATE_PREPROCESSING:gg,STATE_UPLOADING:pd,STATE_POSTPROCESSING:yg,STATE_COMPLETE:fd}=lr;function Oq({newFiles:n,allowNewUpload:e,isUploadInProgress:t,isAllPaused:s,resumableUploads:i,error:a,hideUploadButton:l=void 0,hidePauseResumeButton:u=!1,hideCancelButton:d=!1,hideRetryButton:h=!1,recoveredState:f,uploadState:m,totalProgress:g,files:b,supportsUploadProgress:S,hideAfterFinish:x=!1,isSomeGhost:w,doneButtonHandler:N=void 0,isUploadStarted:E,i18n:C,startUpload:A,uppy:P,isAllComplete:R,showProgressDetails:T=void 0,numUploads:j,complete:O,totalSize:I,totalETA:D,totalUploadedSize:B}){function H(){switch(m){case yg:case gg:{const L=mg(b);return L.mode==="determinate"?L.value*100:g}case u_:return null;case pd:return S?g:null;default:return g}}function z(){switch(m){case yg:case gg:{const{mode:L}=mg(b);return L==="indeterminate"}case pd:return!S;default:return!1}}const G=H(),Q=G??100,X=!a&&n&&(!t&&!s||f)&&e&&!l,q=!d&&m!==Rq&&m!==fd,U=i&&!u&&m===pd,Y=a&&!R&&!h,M=N&&m===fd,W=Qs("uppy-StatusBar-progress",{"is-indeterminate":z()}),J=Qs("uppy-StatusBar",`is-${m}`,{"has-ghosts":w}),de=(()=>{switch(m){case gg:case yg:return $(kq,{progress:mg(b)});case fd:return $(Eq,{i18n:C});case u_:return $(Mq,{error:a,i18n:C,numUploads:j,complete:O});case pd:return $(Pq,{i18n:C,supportsUploadProgress:S,totalProgress:g,showProgressDetails:T,isUploadStarted:E,isAllComplete:R,isAllPaused:s,newFiles:n,numUploads:j,complete:O,totalUploadedSize:B,totalSize:I,totalETA:D,startUpload:A});default:return null}})();return!(X||Y||U||q||M)&&!de||m===fd&&x?null:$("div",{className:J,children:[$("div",{className:W,style:{width:`${Q}%`},role:"progressbar","aria-label":`${Q}%`,"aria-valuetext":`${Q}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":G}),de,$("div",{className:"uppy-StatusBar-actions",children:[X?$(Sq,{newFiles:n,isUploadStarted:E,recoveredState:f,i18n:C,isSomeGhost:w,startUpload:A,uploadState:m}):null,Y?$(_q,{i18n:C,uppy:P}):null,U?$(jq,{isAllPaused:s,i18n:C,isAllComplete:R,resumableUploads:i,uppy:P}):null,q?$(Cq,{i18n:C,uppy:P}):null,M?$(Nq,{i18n:C,doneButtonHandler:N}):null]})]})}const Iq=2e3,Fq=2e3;function Dq(n,e,t,s){if(n)return lr.STATE_ERROR;if(e)return lr.STATE_COMPLETE;if(t)return lr.STATE_WAITING;let i=lr.STATE_WAITING;const a=Object.keys(s);for(let l=0;l<a.length;l++){const{progress:u}=s[a[l]];if(u.uploadStarted&&!u.uploadComplete)return lr.STATE_UPLOADING;u.preprocess&&(i=lr.STATE_PREPROCESSING),u.postprocess&&i!==lr.STATE_PREPROCESSING&&(i=lr.STATE_POSTPROCESSING)}return i}const Vq={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};let Lq=class extends ya{static VERSION=yq.version;#t;#e;#n;#s;constructor(e,t){super(e,{...Vq,...t}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=xq,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}#r(e){if(e.total==null||e.total===0)return null;const t=e.total-e.uploaded;if(t<=0)return null;this.#t??=performance.now();const s=performance.now()-this.#t;if(s===0)return Math.round((this.#s??0)/100)/10;const i=e.uploaded-this.#e;if(this.#e=e.uploaded,i<=0)return Math.round((this.#s??0)/100)/10;const a=i/s,l=this.#n==null?a:l_(a,this.#n,Iq,s);this.#n=l;const u=t/l,d=Math.max(this.#s-s,0),h=this.#s==null?u:l_(u,d,Fq,s);return this.#s=h,this.#t=performance.now(),Math.round(h/100)/10}startUpload=()=>this.uppy.upload().catch((()=>{}));render(e){const{capabilities:t,files:s,allowNewUpload:i,totalProgress:a,error:l,recoveredState:u}=e,{newFiles:d,startedFiles:h,completeFiles:f,isUploadStarted:m,isAllComplete:g,isAllPaused:b,isUploadInProgress:S,isSomeGhost:x}=this.uppy.getObjectOfFilesPerState(),w=u?Object.values(s):d,N=!!t.resumableUploads,E=t.uploadProgress!==!1;let C=null,A=0;h.every(R=>R.progress.bytesTotal!=null&&R.progress.bytesTotal!==0)?(C=0,h.forEach(R=>{C+=R.progress.bytesTotal||0,A+=R.progress.bytesUploaded||0})):h.forEach(R=>{A+=R.progress.bytesUploaded||0});const P=this.#r({uploaded:A,total:C});return Oq({error:l,uploadState:Dq(l,g,u,e.files||{}),allowNewUpload:i,totalProgress:a,totalSize:C,totalUploadedSize:A,isAllComplete:!1,isAllPaused:b,isUploadStarted:m,isUploadInProgress:S,isSomeGhost:x,recoveredState:u,complete:f.length,newFiles:w.length,numUploads:h.length,totalETA:P,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:N,supportsUploadProgress:E,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const e=this.el;DA(e)||(e.dir="ltr")}#a=()=>{const{recoveredState:e}=this.uppy.getState();if(this.#n=null,this.#s=null,e){this.#e=Object.values(e.files).reduce((t,{progress:s})=>t+s.bytesUploaded,0),this.uppy.emit("restore-confirmed");return}this.#t=performance.now(),this.#e=0};install(){const{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",this.#a),this.#t=performance.now(),this.#e=this.uppy.getFiles().reduce((t,s)=>t+s.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",this.#a)}};const Bq=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function zq(n,e,t){const s=Bq.exec(n),i=e.mimeType??s?.[1]??"plain/text";let a;if(s?.[2]!=null){const l=atob(decodeURIComponent(s[3])),u=new Uint8Array(l.length);for(let d=0;d<l.length;d++)u[d]=l.charCodeAt(d);a=[u]}else s?.[3]!=null&&(a=[decodeURIComponent(s[3])]);return new Blob(a,{type:i})}function d_(n){return n.startsWith("blob:")}function h_(n){return n?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(n):!1}function yt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var uP=typeof self<"u"?self:global;const ac=typeof navigator<"u",Uq=ac&&typeof HTMLImageElement>"u",p_=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),dP=uP.Buffer,hP=!!dP,$q=n=>n!==void 0;function pP(n){return n===void 0||(n instanceof Map?n.size===0:Object.values(n).filter($q).length===0)}function mn(n){let e=new Error(n);throw delete e.stack,e}function f_(n){let e=(function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048})(n);return n.jfif.enabled&&(e+=50),n.xmp.enabled&&(e+=2e4),n.iptc.enabled&&(e+=14e3),n.icc.enabled&&(e+=6e3),e}const xg=n=>String.fromCharCode.apply(null,n),m_=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Bs{static from(e,t){return e instanceof this&&e.le===t?e:new Bs(e,void 0,void 0,t)}constructor(e,t=0,s,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){s===void 0&&(s=e.byteLength-t);let a=new DataView(e,t,s);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Bs){s===void 0&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&mn("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,t,s);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else mn("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=Bs){return e instanceof DataView||e instanceof Bs?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||mn("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Bs(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return i=this.getUint8Array(e,t),m_?m_.decode(i):hP?Buffer.from(i).toString("utf8"):decodeURIComponent(escape(xg(i)));var i}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return xg(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)s.push(this.getUint16(e+i));return xg(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function _y(n,e){mn(`${n} '${e}' was not loaded, try using full build of exifr.`)}class Nv extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||_y(this.kind,e),t&&(e in t||(function(s,i){mn(`Unknown ${s} '${i}'.`)})(this.kind,e),t[e].enabled||_y(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var fP=new Nv("file parser"),Fs=new Nv("segment parser"),kv=new Nv("file reader");let qq=uP.fetch;function g_(n,e){return(t=n).startsWith("data:")||t.length>1e4?jy(n,e,"base64"):p_&&n.includes("://")?Cy(n,e,"url",y_):p_?jy(n,e,"fs"):ac?Cy(n,e,"url",y_):void mn("Invalid input argument");var t}async function Cy(n,e,t,s){return kv.has(t)?jy(n,e,t):s?(async function(i,a){let l=await a(i);return new Bs(l)})(n,s):void mn(`Parser ${t} is not loaded`)}async function jy(n,e,t){let s=new(kv.get(t))(n,e);return await s.read(),s}const y_=n=>qq(n).then((e=>e.arrayBuffer())),Ny=n=>new Promise(((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result||new ArrayBuffer),s.onerror=t,s.readAsArrayBuffer(n)})),Tv=new Map,Gq=new Map,Wq=new Map,md=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],mP=["jfif","xmp","icc","iptc","ihdr"],ky=["tiff",...mP],hn=["ifd0","ifd1","exif","gps","interop"],gd=[...ky,...hn],yd=["makerNote","userComment"],gP=["translateKeys","translateValues","reviveValues","multiSegment"],xd=[...gP,"sanitize","mergeOutput","silentErrors"];class yP{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Pl extends yP{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,s,i){if(super(),yt(this,"enabled",!1),yt(this,"skip",new Set),yt(this,"pick",new Set),yt(this,"deps",new Set),yt(this,"translateKeys",!1),yt(this,"translateValues",!1),yt(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=hn.includes(e),this.canBeFiltered&&(this.dict=Tv.get(e)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:a,skip:l}=s;a&&a.length>0&&this.translateTagSet(a,this.pick),l&&l.length>0&&this.translateTagSet(l,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:mn(`Invalid options argument: ${s}`)}applyInheritables(e){let t,s;for(t of gP)s=e[t],s!==void 0&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,i,{tagKeys:a,tagValues:l}=this.dict;for(s of e)typeof s=="string"?(i=l.indexOf(s),i===-1&&(i=a.indexOf(Number(s))),i!==-1&&t.add(Number(a[i]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,mh(this.pick,this.deps)):this.enabled&&this.pick.size>0&&mh(this.pick,this.deps)}}var Fn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},x_=new Map;class Av extends yP{static useCached(e){let t=x_.get(e);return t!==void 0||(t=new this(e),x_.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):mn(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ac?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of md)this[e]=Fn[e];for(e of xd)this[e]=Fn[e];for(e of yd)this[e]=Fn[e];for(e of gd)this[e]=new Pl(e,Fn[e],void 0,this)}setupFromTrue(){let e;for(e of md)this[e]=Fn[e];for(e of xd)this[e]=Fn[e];for(e of yd)this[e]=!0;for(e of gd)this[e]=new Pl(e,!0,void 0,this)}setupFromArray(e){let t;for(t of md)this[t]=Fn[t];for(t of xd)this[t]=Fn[t];for(t of yd)this[t]=Fn[t];for(t of gd)this[t]=new Pl(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,hn)}setupFromObject(e){let t;for(t of(hn.ifd0=hn.ifd0||hn.image,hn.ifd1=hn.ifd1||hn.thumbnail,Object.assign(this,e),md))this[t]=vg(e[t],Fn[t]);for(t of xd)this[t]=vg(e[t],Fn[t]);for(t of yd)this[t]=vg(e[t],Fn[t]);for(t of ky)this[t]=new Pl(t,Fn[t],e[t],this);for(t of hn)this[t]=new Pl(t,Fn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,hn,gd),e.tiff===!0?this.batchEnableWithBool(hn,!0):e.tiff===!1?this.batchEnableWithUserValue(hn,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,hn):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,hn)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let i=t[s];this[s].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,t,s,i=s){if(e&&e.length){for(let l of i)this[l].enabled=!1;let a=v_(e,s);for(let[l,u]of a)mh(this[l].pick,u),this[l].enabled=!0}else if(t&&t.length){let a=v_(t,s);for(let[l,u]of a)mh(this[l].skip,u)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:i,icc:a}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=hn.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of hn)this[a].finalizeFilters()}get onlyTiff(){return!mP.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of ky)this[e].enabled&&!Fs.has(e)&&_y("segment parser",e)}}function v_(n,e){let t,s,i,a,l=[];for(i of e){for(a of(t=Tv.get(i),s=[],t))(n.includes(a[0])||n.includes(a[1]))&&s.push(a[0]);s.length&&l.push([i,s])}return l}function vg(n,e){return n!==void 0?n:e!==void 0?e:void 0}function mh(n,e){for(let t of e)n.add(t)}yt(Av,"default",Fn);class Hq{constructor(e){yt(this,"parsers",{}),yt(this,"output",{}),yt(this,"errors",[]),yt(this,"pushToErrors",(t=>this.errors.push(t))),this.options=Av.useCached(e)}async read(e){this.file=await(function(t,s){return typeof t=="string"?g_(t,s):ac&&!Uq&&t instanceof HTMLImageElement?g_(t.src,s):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Bs(t):ac&&t instanceof Blob?Cy(t,s,"blob",Ny):void mn("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,i]of fP)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),mn("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),pP(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async s=>{let i=await s.parse();s.assignToOutput(e,i)}));this.options.silentErrors&&(t=t.map((s=>s.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=Fs.get("tiff",e);var i;if(t.tiff?i={start:0,type:"tiff"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),l=this.parsers.tiff=new s(a,e,t),u=await l.extractThumbnail();return t.close&&t.close(),u}}class ao{static findPosition(e,t){let s=e.getUint16(t+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,t,s):this.headerLength,a=t+i,l=s-i;return{offset:t,length:s,headerLength:i,start:a,size:l,end:a+l}}static parse(e,t={}){return new this(e,new Av({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Bs?e:new Bs(e)}constructor(e,t={},s){yt(this,"errors",[]),yt(this,"raw",new Map),yt(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=Wq.get(t),i=Gq.get(t),a=Tv.get(t),l=this.options[t],u=l.reviveValues&&!!s,d=l.translateValues&&!!i,h=l.translateKeys&&!!a,f={};for(let[m,g]of e)u&&s.has(m)?g=s.get(m)(g):d&&i.has(m)&&(g=this.translateValue(g,i.get(m))),h&&a.has(m)&&(m=a.get(m)||m),f[m]=g;return f}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}yt(ao,"headerLength",4),yt(ao,"type",void 0),yt(ao,"multiSegment",!1),yt(ao,"canHandle",(()=>!1));function Kq(n){return n===192||n===194||n===196||n===219||n===221||n===218||n===254}function Qq(n){return n>=224&&n<=239}function Yq(n,e,t){for(let[s,i]of Fs)if(i.canHandle(n,e,t))return s}class b_ extends class{constructor(e,t,s){yt(this,"errors",[]),yt(this,"ensureSegmentChunk",(async i=>{let a=i.start,l=i.size||65536;if(this.file.chunked)if(this.file.available(a,l))i.chunk=this.file.subarray(a,l);else try{i.chunk=await this.file.readChunk(a,l)}catch(u){mn(`Couldn't read segment: ${JSON.stringify(i)}. ${u.message}`)}else this.file.byteLength>a+l?i.chunk=this.file.subarray(a,l):i.size===void 0?i.chunk=this.file.subarray(a):mn("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=s}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(Fs.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:s,chunk:i}=t,a=this.options[s];if(a&&a.enabled){let l=this.parsers[s];l&&l.append||l||this.createParser(s,i)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),yt(this,"appSegments",[]),yt(this,"jpegSegments",[]),yt(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Fs.keyList())):(e=e===void 0?Fs.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&Fs.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:i,wanted:a,remaining:l}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((u=>{let d=Fs.get(u),h=this.options[u];return d.multiSegment&&h.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let u=!1;for(;l.size>0&&!u&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=s,h=this.appSegments.some((f=>!this.file.available(f.offset||f.start,f.length||f.size)));if(u=e>d&&!h?!await s.readNextChunk(e):!await s.readNextChunk(d),(e=this.findAppSegmentsInRange(e,s.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let s,i,a,l,u,d,{file:h,findAll:f,wanted:m,remaining:g,options:b}=this;for(;e<t;e++)if(h.getUint8(e)===255){if(s=h.getUint8(e+1),Qq(s)){if(i=h.getUint16(e+2),a=Yq(h,e,i),a&&m.has(a)&&(l=Fs.get(a),u=l.findPosition(h,e),d=b[a],u.type=a,this.appSegments.push(u),!f&&(l.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=u.chunkNumber<u.chunkCount,this.unfinishedMultiSegment||g.delete(a)):g.delete(a),g.size===0)))break;b.recordUnknownSegments&&(u=ao.findPosition(h,e),u.marker=s,this.unknownSegments.push(u)),e+=i+1}else if(Kq(s)){if(i=h.getUint16(e+2),s===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:s}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,s){let i,a,l,u=new Map;for(let d=0;d<t.length;d++)i=t[d],a=i[s],u.has(a)?l=u.get(a):u.set(a,l=[]),l.push(i);return Array.from(u)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,s])=>{let i=Fs.get(t,this.options);return i.handleMultiSegments?{type:t,chunk:i.handleMultiSegments(s)}:s[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}yt(b_,"type","jpeg"),fP.set("jpeg",b_);const Xq=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Zq extends ao{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:i,skip:a}=this.options[t];i=new Set(i);let l=i.size>0,u=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let f=this.chunk.getUint16(e);if(l){if(i.has(f)&&(s.set(f,this.parseTag(e,f,t)),i.delete(f),i.size===0))break}else!u&&a.has(f)||s.set(f,this.parseTag(e,f,t));e+=12}return s}parseTag(e,t,s){let{chunk:i}=this,a=i.getUint16(e+2),l=i.getUint32(e+4),u=Xq[a];if(u*l<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&mn(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&mn(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,l);if(a===2)return(d=(function(h){for(;h.endsWith("\0");)h=h.slice(0,-1);return h})(d=i.getString(e,l)).trim())===""?void 0:d;var d;if(a===7)return i.getUint8Array(e,l);if(l===1)return this.parseTagValue(a,e);{let h=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(l),f=u;for(let m=0;m<l;m++)h[m]=this.parseTagValue(a,e),e+=f;return h}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:mn(`Invalid tiff type ${e}`)}}}class bg extends Zq{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&mn("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&mn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,f_(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,f_(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&s.length===1&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",w_(...e.get(2),e.get(1))),e.set("longitude",w_(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,i={};for(t of hn)if(e=this[t],!pP(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(i,s)}else i[t]=s;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,i]of Object.entries(t))this.assignObjectToOutput(e,s,i)}}function w_(n,e,t,s){var i=n+e/60+t/3600;return s!=="S"&&s!=="W"||(i*=-1),i}yt(bg,"type","tiff"),yt(bg,"headerLength",10),Fs.set("tiff",bg);const Pv={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Pv,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Pv,{tiff:!1,ifd1:!0,mergeOutput:!1});const Jq=Object.assign({},Pv,{firstChunkSize:4e4,ifd0:[274]});async function eG(n){let e=new Hq(Jq);await e.read(n);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const tG=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Dl=!0,Vl=!0;if(typeof navigator=="object"){let n=navigator.userAgent;if(n.includes("iPad")||n.includes("iPhone")){let e=n.match(/OS (\d+)_(\d+)/);if(e){let[,t,s]=e;Dl=Number(t)+.1*Number(s)<13.4,Vl=!1}}else if(n.includes("OS X 10")){let[,e]=n.match(/OS X 10[_.](\d+)/);Dl=Vl=Number(e)<15}if(n.includes("Chrome/")){let[,e]=n.match(/Chrome\/(\d+)/);Dl=Vl=Number(e)<81}else if(n.includes("Firefox/")){let[,e]=n.match(/Firefox\/(\d+)/);Dl=Vl=Number(e)<77}}async function nG(n){let e=await eG(n);return Object.assign({canvas:Dl,css:Vl},tG[e])}class sG extends Bs{constructor(...e){super(...e),yt(this,"ranges",new rG),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(e===0&&this.byteLength===0&&s){let i=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(i)}else{let i=e+t;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let t;t=hP?dP.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class rG{constructor(){yt(this,"list",[])}get length(){return this.list.length}add(e,t,s=0){let i=e+t,a=this.list.filter((l=>S_(e,l.offset,i)||S_(e,l.end,i)));if(a.length>0){e=Math.min(e,...a.map((u=>u.offset))),i=Math.max(i,...a.map((u=>u.end))),t=i-e;let l=a.shift();l.offset=e,l.length=t,l.end=i,this.list=this.list.filter((u=>!a.includes(u)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let s=e+t;return this.list.some((i=>i.offset<=e&&s<=i.end))}}function S_(n,e,t){return n<=e&&e<=t}class iG extends sG{constructor(e,t){super(0),yt(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}kv.set("blob",class extends iG{async readWhole(){this.chunked=!1;let n=await Ny(this.input);this._swapArrayBuffer(n)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(n,e){let t=e?n+e:void 0,s=this.input.slice(n,t),i=await Ny(s);return this.set(i,n,!0)}});const aG="4.2.3",oG={version:aG},lG={strings:{generatingThumbnails:"Generating thumbnails..."}};function cG(n,e,t){try{n.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return n.toBlob?new Promise(s=>{n.toBlob(s,e,t)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>zq(n.toDataURL(e,t),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function uG(n,e){let t=n.width,s=n.height;(e.deg===90||e.deg===270)&&(t=n.height,s=n.width);const i=document.createElement("canvas");i.width=t,i.height=s;const a=i.getContext("2d");return a.translate(t/2,s/2),e.canvas&&(a.rotate(e.rad),a.scale(e.scaleX,e.scaleY)),a.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),i}function dG(n){const e=n.width/n.height,t=5e6,s=4096;let i=Math.floor(Math.sqrt(t*e)),a=Math.floor(t/Math.sqrt(t*e));if(i>s&&(i=s,a=Math.round(i/e)),a>s&&(a=s,i=Math.round(e*a)),n.width>i){const l=document.createElement("canvas");return l.width=i,l.height=a,l.getContext("2d").drawImage(n,0,0,i,a),l}return n}const hG={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class pG extends ya{static VERSION=oG.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(e,t){if(super(e,{...hG,...t}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=lG,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,s){const i=URL.createObjectURL(e.data),a=new Promise((u,d)=>{const h=new Image;h.src=i,h.addEventListener("load",()=>{URL.revokeObjectURL(i),u(h)}),h.addEventListener("error",f=>{URL.revokeObjectURL(i),d(f.error||new Error("Could not create thumbnail"))})}),l=nG(e.data).catch(()=>1);return Promise.all([a,l]).then(([u,d])=>{const h=this.getProportionalDimensions(u,t,s,d.deg),f=uG(u,d),m=this.resizeImage(f,h.width,h.height);return cG(m,this.thumbnailType,80)}).then(u=>URL.createObjectURL(u))}getProportionalDimensions(e,t,s,i){let a=e.width/e.height;if((i===90||i===270)&&(a=e.height/e.width),t!=null){let l=t;return e.width<t&&(l=e.width),{width:l,height:Math.round(l/a)}}if(s!=null){let l=s;return e.height<s&&(l=e.height),{width:Math.round(l*a),height:l}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/a)}}resizeImage(e,t,s){let i=dG(e),a=Math.ceil(Math.log2(i.width/t));a<1&&(a=1);let l=t*2**(a-1),u=s*2**(a-1);const d=2;for(;a--;){const h=document.createElement("canvas");h.width=l,h.height=u,h.getContext("2d").drawImage(i,0,0,l,u),i=h,l=Math.round(l/d),u=Math.round(u/d)}return i}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return h_(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}onFileAdded=e=>{!e.preview&&e.data&&h_(e.type)&&!e.isRemote&&this.addToQueue(e.id)};onCancelRequest=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1)};onFileRemoved=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1),e.preview&&d_(e.preview)&&URL.revokeObjectURL(e.preview)};onRestored=()=>{this.uppy.getFiles().filter(t=>t.isRestored).forEach(t=>{(!t.preview||d_(t.preview))&&this.addToQueue(t.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=e=>{e.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",i,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const t=()=>{e.forEach(s=>{const i=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",i)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),s()}):(t(),s())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}function __(n){if(typeof n=="string"){const e=document.querySelectorAll(n);return e.length===0?null:Array.from(e)}return typeof n=="object"&&FA(n)?[n]:null}const Ul=Array.from;function fG(n){const e=Ul(n.files);return Promise.resolve(e)}function xP(n,e,t,{onSuccess:s}){n.readEntries(i=>{const a=[...e,...i];i.length?queueMicrotask(()=>{xP(n,a,t,{onSuccess:s})}):s(a)},i=>{t(i),s(e)})}function vP(n,e){return n==null?n:{kind:n.isFile?"file":n.isDirectory?"directory":void 0,name:n.name,getFile(){return new Promise((t,s)=>n.file(t,s))},async*values(){const t=n.createReader();yield*await new Promise(i=>{xP(t,[],e,{onSuccess:a=>i(a.map(l=>vP(l,e)))})})},isSameEntry:void 0}}async function*bP(n,e,t=void 0){const s=()=>`${e}/${n.name}`;if(n.kind==="file"){const i=await n.getFile();i!=null?(i.relativePath=e?s():null,yield i):t!=null&&(yield t)}else if(n.kind==="directory")for await(const i of n.values())yield*bP(i,e?s():n.name);else t!=null&&(yield t)}async function*mG(n,e){const t=await Promise.all(Array.from(n.items,async s=>{let i;return i??=vP(typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry(),e),{fileSystemHandle:i,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:i}of t)if(i!=null)try{yield*bP(i,"",s)}catch(a){s!=null?yield s:e(a)}else s!=null&&(yield s)}async function gG(n,e){const t=e?.logDropError??Function.prototype;try{const s=[];for await(const i of mG(n,t))s.push(i);return s}catch{return fG(n)}}const yG="4.4.3",xG={version:yG};function vG(){const n=document.body;return!(!("draggable"in n)||!("ondragstart"in n&&"ondrop"in n)||!("FormData"in window)||!("FileReader"in window))}class wP extends Xn{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""};renderHiddenInput=(e,t)=>$("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t});renderHiddenCameraInput=(e,t,s)=>{const a={photo:"image/*",video:"video/*"}[e];return $("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t===""?"environment":t,accept:a,ref:s})};renderMyDeviceAcquirer=()=>$("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:$("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[$("div",{className:"uppy-DashboardTab-inner",children:$("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:$("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),$("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>$("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:$("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[$("div",{className:"uppy-DashboardTab-inner",children:$("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:$("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),$("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>$("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:$("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[$("div",{className:"uppy-DashboardTab-inner",children:$("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:$("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),$("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(e,t)=>{const s=this.props.acquirers.length;return $("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":s===0,children:e})};renderDropPasteBrowseTagline=e=>{const t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),i=this.props.fileManagerSelectionType,a=i.charAt(0).toUpperCase()+i.slice(1);return $("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${a}`,{browseFiles:t,browseFolders:s,browse:t}):this.props.i18nArray(`dropPaste${a}`,{browseFiles:t,browseFolders:s,browse:t})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=e=>$("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:$("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[$("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),$("div",{className:"uppy-DashboardTab-name",children:e.name})]})});renderAcquirers=e=>{const t=[...e],s=t.splice(e.length-2,e.length);return $($s,{children:[t.map(i=>this.renderAcquirer(i)),$("span",{role:"presentation",style:{"white-space":"nowrap"},children:s.map(i=>this.renderAcquirer(i))})]})};renderSourcesList=(e,t)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:i}=this.props;let a=[];const l="myDevice";t||a.push({key:l,elements:this.renderMyDeviceAcquirer()}),s&&a.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),i&&a.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),a.push(...e.map(f=>({key:f.id,elements:this.renderAcquirer(f)}))),a.length===1&&a[0].key===l&&(a=[]);const d=[...a],h=d.splice(a.length-2,a.length);return $($s,{children:[this.renderDropPasteBrowseTagline(a.length),$("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:f,elements:m})=>$($s,{children:m},f)),$("span",{role:"presentation",style:{"white-space":"nowrap"},children:h.map(({key:f,elements:m})=>$($s,{children:m},f))})]})]})};renderPoweredByUppy(){const{i18nArray:e}=this.props,t=$("span",{children:[$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:$("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),$("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),s=e("poweredBy",{uppy:t});return $("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:s})}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:s}=this.props;return $("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,i=>{this.fileInput=i}),this.renderHiddenInput(!0,i=>{this.folderInput=i}),e&&this.renderHiddenCameraInput("photo",s,i=>{this.mobilePhotoFileInput=i}),t&&this.renderHiddenCameraInput("video",s,i=>{this.mobileVideoFileInput=i}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),$("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&$("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const bG=n=>$("div",{className:Qs("uppy-Dashboard-AddFilesPanel",n.className),"data-uppy-panelType":"AddFiles","aria-hidden":!n.showAddFilesPanel,children:[$("div",{className:"uppy-DashboardContent-bar",children:[$("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18n("addingMoreFiles")}),$("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>n.toggleAddFilesPanel(!1),children:n.i18n("back")})]}),$(wP,{...n})]});function wG(n){const e=n.files[n.fileCardFor],t=()=>{n.uppy.emit("file-editor:cancel",e),n.closeFileEditor()};return $("div",{className:Qs("uppy-DashboardContent-panel",n.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[$("div",{className:"uppy-DashboardContent-bar",children:[$("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18nArray("editing",{file:$("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),$("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:n.i18n("cancel")}),$("button",{className:"uppy-DashboardContent-save",type:"button",onClick:n.saveFileEditor,children:n.i18n("save")})]}),$("div",{className:"uppy-DashboardContent-panelBody",children:n.editors.map(s=>n.uppy.getPlugin(s.id).render(n.state))})]})}function SG(){return $("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:$("g",{fill:"#686DE0",fillRule:"evenodd",children:[$("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),$("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),$("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function _G(){return $("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:$("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function CG(){return $("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:$("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function jG(){return $("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:$("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function NG(){return $("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:$("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function kG(){return $("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:$("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[$("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),$("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function TG(){return $("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:$("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function Ev(n){const e={color:"#838999",icon:kG()};if(!n)return e;const t=n.split("/")[0],s=n.split("/")[1];return t==="text"?{color:"#5a5e69",icon:TG()}:t==="image"?{color:"#686de0",icon:SG()}:t==="audio"?{color:"#068dbb",icon:_G()}:t==="video"?{color:"#19af67",icon:CG()}:t==="application"&&s==="pdf"?{color:"#e25149",icon:jG()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:NG()}:e}function wi(n){const{tagName:e}=n.target;if(e==="INPUT"||e==="TEXTAREA"){n.stopPropagation();return}n.preventDefault(),n.stopPropagation()}function SP(n){const{file:e}=n;if(e.preview)return $("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:s}=Ev(e.type);return $("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[$("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:s}),$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:$("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function AG(n){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:s,form:i,formState:a}=n,l={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(u=>{const d=`uppy-Dashboard-FileCard-input-${u.id}`,h=t.includes(u.id);return $("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[$("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d,children:u.name}),u.render!==void 0?u.render({value:a[u.id],onChange:f=>s(f,u.id),fieldCSSClasses:l,required:h,form:i.id},sc):$("input",{className:l.text,id:d,form:i.id,type:u.type||"text",required:h,value:a[u.id],placeholder:u.placeholder,onInput:f=>s(f.target.value,u.id),"data-uppy-super-focusable":!0})]},u.id)})}function PG(n){const{files:e,fileCardFor:t,toggleFileCard:s,saveFileCard:i,metaFields:a,requiredMetaFields:l,openFileEditor:u,i18n:d,i18nArray:h,className:f,canEditFile:m}=n,g=()=>typeof a=="function"?a(e[t]):a,b=e[t],S=g()??[],x=m(b),w={};S.forEach(T=>{w[T.id]=b.meta[T.id]??""});const[N,E]=fh(w),C=t7(T=>{T.preventDefault(),i(N,t)},[i,N,t]),A=(T,j)=>{E({...N,[j]:T})},P=()=>{s(!1)},[R]=fh(()=>{const T=document.createElement("form");return T.setAttribute("tabindex","-1"),T.id=Cv(),T});return wy(()=>(document.body.appendChild(R),R.addEventListener("submit",C),()=>{R.removeEventListener("submit",C),document.body.removeChild(R)}),[R,C]),$("div",{className:Qs("uppy-Dashboard-FileCard",f),"data-uppy-panelType":"FileCard",onDragOver:wi,onDragLeave:wi,onDrop:wi,onPaste:wi,children:[$("div",{className:"uppy-DashboardContent-bar",children:[$("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:h("editing",{file:$("span",{className:"uppy-DashboardContent-titleFile",children:b.meta?b.meta.name:b.name})})}),$("button",{className:"uppy-DashboardContent-back",type:"button",form:R.id,title:d("finishEditingFile"),onClick:P,children:d("cancel")})]}),$("div",{className:"uppy-Dashboard-FileCard-inner",children:[$("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Ev(b.type).color},children:[$(SP,{file:b}),x&&$("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:T=>{C(T),u(b)},children:d("editImage")})]}),$("div",{className:"uppy-Dashboard-FileCard-info",children:$(AG,{computedMetaFields:S,requiredMetaFields:l,updateMeta:A,form:R,formState:N})}),$("div",{className:"uppy-Dashboard-FileCard-actions",children:[$("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:R.id,children:d("saveChanges")}),$("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:P,form:R.id,children:d("cancel")})]})]})]})}function EG(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),s=Object.keys(e),i=t.length;if(s.length!==i)return!1;for(let a=0;a<i;a++){const l=t[a];if(n[l]!==e[l]||!Object.prototype.hasOwnProperty.call(e,l))return!1}return!0}function MG(n,e="Copy the URL below"){return new Promise(t=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=n,document.body.appendChild(s),s.select();const i=()=>{document.body.removeChild(s),window.prompt(e,n),t()};try{return document.execCommand("copy")?(document.body.removeChild(s),t()):i()}catch{return document.body.removeChild(s),i()}})}function RG({file:n,uploadInProgressOrComplete:e,metaFields:t,canEditFile:s,i18n:i,onClick:a}){return!e&&t&&t.length>0||!e&&s(n)?$("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":i("editFileWithFilename",{file:n.meta.name}),title:i("editFileWithFilename",{file:n.meta.name}),onClick:()=>a(),children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:$("g",{fillRule:"evenodd",children:[$("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),$("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),$("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function OG({i18n:n,onClick:e,file:t}){return $("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":n("removeFile",{file:t.meta.name}),title:n("removeFile",{file:t.meta.name}),onClick:()=>e(),children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[$("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),$("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function IG({file:n,uppy:e,i18n:t}){const s=i=>{MG(n.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>i.target.focus({preventScroll:!0}))};return $("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:i=>s(i),children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:$("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function FG(n){const{uppy:e,file:t,uploadInProgressOrComplete:s,canEditFile:i,metaFields:a,showLinkToFileUploadResult:l,showRemoveButton:u,i18n:d,toggleFileCard:h,openFileEditor:f}=n;return $("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[$(RG,{i18n:d,file:t,uploadInProgressOrComplete:s,canEditFile:i,metaFields:a,onClick:()=>{a&&a.length>0?h(!0,t.id):f(t)}}),l&&t.uploadURL?$(IG,{file:t,uppy:e,i18n:d}):null,u?$(OG,{i18n:d,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const wg="...";function _P(n,e){if(e===0)return"";if(n.length<=e)return n;if(e<=wg.length+1)return`${n.slice(0,e-1)}`;const t=e-wg.length,s=Math.ceil(t/2),i=Math.floor(t/2);return n.slice(0,s)+wg+n.slice(-i)}const DG=(n,e)=>(typeof e=="function"?e():e).filter(i=>i.id===n)[0].name;function CP(n){const{file:e,toggleFileCard:t,i18n:s,metaFields:i}=n,{missingRequiredMetaFields:a}=e;if(!a?.length)return null;const l=a.map(u=>DG(u,i)).join(", ");return $("div",{className:"uppy-Dashboard-Item-errorMessage",children:[s("missingRequiredMetaFields",{smart_count:a.length,fields:l})," ",$("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:s("editFile")})]})}const VG=n=>{const{author:e,name:t}=n.file.meta;function s(){return n.isSingleFile&&n.containerHeight>=350?90:n.containerWidth<=352?35:n.containerWidth<=576?60:e?20:30}return $("div",{className:"uppy-Dashboard-Item-name",title:t,children:_P(t,s())})},LG=n=>{const{author:e}=n.file.meta,t=n.file.remote?.providerName,s="";return e?$("div",{className:"uppy-Dashboard-Item-author",children:[$("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:_P(e.name,13)}),t?$($s,{children:[` ${s} `,t,` ${s} `]}):null]}):null},BG=n=>n.file.size&&$("div",{className:"uppy-Dashboard-Item-statusSize",children:ra(n.file.size)}),zG=n=>n.file.isGhost&&$("span",{children:["  ",$("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>n.toggleAddFilesPanel(!0),children:n.i18n("reSelect")})]}),UG=({file:n,onClick:e})=>n.error?$("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":n.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function $G(n){const{file:e,i18n:t,toggleFileCard:s,metaFields:i,toggleAddFilesPanel:a,isSingleFile:l,containerHeight:u,containerWidth:d}=n;return $("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[$("div",{className:"uppy-Dashboard-Item-fileName",children:[VG({file:e,isSingleFile:l,containerHeight:u,containerWidth:d}),$(UG,{file:e,onClick:()=>alert(e.error)})]}),$("div",{className:"uppy-Dashboard-Item-status",children:[LG({file:e}),BG({file:e}),zG({file:e,toggleAddFilesPanel:a,i18n:t})]}),$(CP,{file:e,i18n:t,toggleFileCard:s,metaFields:i})]})}function qG(n){const{file:e,i18n:t,toggleFileCard:s,metaFields:i,showLinkToFileUploadResult:a}=n,u=e.preview?"rgba(255, 255, 255, 0.5)":Ev(e.type).color;return $("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:u},children:[a&&e.uploadURL&&$("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:$("span",{hidden:!0,children:e.meta.name})}),$(SP,{file:e}),$(CP,{file:e,i18n:t,toggleFileCard:s,metaFields:i})]})}function GG(n){if(!n.isUploaded){if(n.error&&!n.hideRetryButton){n.uppy.retryUpload(n.file.id);return}n.resumableUploads&&!n.hidePauseResumeButton?n.uppy.pauseResume(n.file.id):n.individualCancellation&&!n.hideCancelButton&&n.uppy.removeFile(n.file.id)}}function C_(n){return n.isUploaded?n.i18n("uploadComplete"):n.error?n.i18n("retryUpload"):n.resumableUploads?n.file.isPaused?n.i18n("resumeUpload"):n.i18n("pauseUpload"):n.individualCancellation?n.i18n("cancelUpload"):""}function Sg(n){return $("div",{className:"uppy-Dashboard-Item-progress",children:$("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":C_(n),title:C_(n),onClick:()=>GG(n),children:n.children})})}function vd({children:n}){return $("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:n})}function _g({progress:n}){const e=2*Math.PI*15;return $("g",{children:[$("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),$("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*n})]})}function WG(n){return!n.file.progress.uploadStarted||n.file.progress.percentage===void 0?null:n.isUploaded?$("div",{className:"uppy-Dashboard-Item-progress",children:$("div",{className:"uppy-Dashboard-Item-progressIndicator",children:$(vd,{children:[$("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),$("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):n.recoveredState?null:n.error&&!n.hideRetryButton?$(Sg,{...n,children:$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[$("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),$("path",{d:"M7.9 3H10v2H7.9z"}),$("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),$("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):n.resumableUploads&&!n.hidePauseResumeButton?$(Sg,{...n,children:$(vd,{children:[$(_g,{progress:n.file.progress.percentage}),n.file.isPaused?$("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):$("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[$("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),$("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!n.resumableUploads&&n.individualCancellation&&!n.hideCancelButton?$(Sg,{...n,children:$(vd,{children:[$(_g,{progress:n.file.progress.percentage}),$("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):$("div",{className:"uppy-Dashboard-Item-progress",children:$("div",{className:"uppy-Dashboard-Item-progressIndicator",children:$(vd,{children:$(_g,{progress:n.file.progress.percentage})})})})}class HG extends Xn{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!EG(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,s=!!e.progress.uploadComplete&&!t&&!e.error,i=!!e.progress.uploadStarted||!!t,a=e.progress.uploadStarted&&!e.progress.uploadComplete||t,l=e.error||!1,{isGhost:u}=e;let d=(this.props.individualCancellation||!a)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(d=!0);const h=Qs({"uppy-Dashboard-Item":!0,"is-inprogress":a&&!this.props.recoveredState,"is-processing":t,"is-complete":s,"is-error":!!l,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":u});return $("div",{className:h,id:`uppy_${e.id}`,role:this.props.role,children:[$("div",{className:"uppy-Dashboard-Item-preview",children:[$(qG,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),$(WG,{uppy:this.props.uppy,file:e,error:l,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),$("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[$($G,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),$(FG,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:i,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function KG(n,e){const t=[];let s=[];return n.forEach(i=>{s.length<e?s.push(i):(t.push(s),s=[i])}),s.length&&t.push(s),t}function QG({id:n,i18n:e,uppy:t,files:s,resumableUploads:i,hideRetryButton:a,hidePauseResumeButton:l,hideCancelButton:u,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:f,isSingleFile:m,toggleFileCard:g,handleRequestThumbnail:b,handleCancelThumbnail:S,recoveredState:x,individualCancellation:w,itemsPerRow:N,openFileEditor:E,canEditFile:C,toggleAddFilesPanel:A,containerWidth:P,containerHeight:R}){const T=N===1?71:200,j=Sv(()=>{const I=(B,H)=>Number(s[H].isGhost)-Number(s[B].isGhost),D=Object.keys(s);return x&&D.sort(I),KG(D,N)},[s,N,x]),O=I=>$("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:I.map(D=>$(HG,{uppy:t,id:n,i18n:e,resumableUploads:i,individualCancellation:w,hideRetryButton:a,hidePauseResumeButton:l,hideCancelButton:u,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:h,metaFields:f,recoveredState:x,isSingleFile:m,containerWidth:P,containerHeight:R,toggleFileCard:g,handleRequestThumbnail:b,handleCancelThumbnail:S,role:"listitem",openFileEditor:E,canEditFile:C,toggleAddFilesPanel:A,file:s[D]},D))},I[0]);return m?$("div",{class:"uppy-Dashboard-files",children:O(j[0])}):$(fq,{class:"uppy-Dashboard-files",role:"list",data:j,renderRow:O,rowHeight:T})}function YG({activePickerPanel:n,className:e,hideAllPanels:t,i18n:s,state:i,uppy:a}){const l=Id(null);return $("div",{className:Qs("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${n.id}`,onDragOver:wi,onDragLeave:wi,onDrop:wi,onPaste:wi,children:[$("div",{className:"uppy-DashboardContent-bar",children:[$("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s("importFrom",{name:n.name})}),$("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:s("cancel")})]}),$("div",{ref:l,className:"uppy-DashboardContent-panelBody",children:a.getPlugin(n.id).render(i,l.current)})]})}const or={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function XG(n,e,t,s={}){if(n)return or.STATE_ERROR;if(e)return or.STATE_COMPLETE;if(t)return or.STATE_PAUSED;let i=or.STATE_WAITING;const a=Object.keys(s);for(let l=0;l<a.length;l++){const{progress:u}=s[a[l]];if(u.uploadStarted&&!u.uploadComplete)return or.STATE_UPLOADING;u.preprocess&&i!==or.STATE_UPLOADING&&(i=or.STATE_PREPROCESSING),u.postprocess&&i!==or.STATE_UPLOADING&&i!==or.STATE_PREPROCESSING&&(i=or.STATE_POSTPROCESSING)}return i}function ZG({files:n,i18n:e,isAllComplete:t,isAllErrored:s,isAllPaused:i,inProgressNotPausedFiles:a,newFiles:l,processingFiles:u}){switch(XG(s,t,i,n)){case"uploading":return e("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:u.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:l.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function JG(n){const{i18n:e,isAllComplete:t,hideCancelButton:s,maxNumberOfFiles:i,toggleAddFilesPanel:a,uppy:l}=n;let{allowNewUpload:u}=n;return u&&i&&(u=n.totalFileCount<n.maxNumberOfFiles),$("div",{className:"uppy-DashboardContent-bar",children:[!t&&!s?$("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll(),children:e("cancel")}):$("div",{}),$("div",{className:"uppy-DashboardContent-title",children:$(ZG,{...n})}),u?$("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>a(!0),children:[$("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:$("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),$("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):$("div",{})]})}const eo="uppy-transition-slideDownUp",j_=250;function bd({children:n}){const[e,t]=fh(null),[s,i]=fh(""),a=Id(),l=Id(),u=Id(),d=()=>{i(`${eo}-enter`),cancelAnimationFrame(u.current),clearTimeout(l.current),l.current=void 0,u.current=requestAnimationFrame(()=>{i(`${eo}-enter ${eo}-enter-active`),a.current=setTimeout(()=>{i("")},j_)})},h=()=>{i(`${eo}-leave`),cancelAnimationFrame(u.current),clearTimeout(a.current),a.current=void 0,u.current=requestAnimationFrame(()=>{i(`${eo}-leave ${eo}-leave-active`),l.current=setTimeout(()=>{t(null),i("")},j_)})};return wy(()=>{const f=Vs(n)[0];e!==f&&(f&&!e?d():e&&!f&&!l.current&&h(),t(f))},[n,e]),wy(()=>()=>{clearTimeout(a.current),clearTimeout(l.current),cancelAnimationFrame(u.current)},[]),e?QA(e,{className:Qs(s,e.props.className)}):null}const N_=900,k_=700,Cg=576,T_=330;function e9(n){const e=n.totalFileCount===0,t=n.totalFileCount===1,s=n.containerWidth>Cg,i=n.containerHeight>T_,a=Qs({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":n.disabled,"uppy-Dashboard--animateOpenClose":n.animateOpenClose,"uppy-Dashboard--isClosing":n.isClosing,"uppy-Dashboard--isDraggingOver":n.isDraggingOver,"uppy-Dashboard--modal":!n.inline,"uppy-size--md":n.containerWidth>Cg,"uppy-size--lg":n.containerWidth>k_,"uppy-size--xl":n.containerWidth>N_,"uppy-size--height-md":n.containerHeight>T_,"uppy-Dashboard--isAddFilesPanelVisible":n.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":n.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":n.singleFileFullScreen&&t&&i});let l=1;n.containerWidth>N_?l=5:n.containerWidth>k_?l=4:n.containerWidth>Cg&&(l=3);const u=n.showSelectedFiles&&!e,d=n.recoveredState?Object.keys(n.recoveredState.files).length:null,h=n.files?Object.keys(n.files).filter(g=>n.files[g].isGhost).length:0,f=()=>h>0?n.i18n("recoveredXFiles",{smart_count:h}):n.i18n("recoveredAllFiles");return $("div",{className:a,"data-uppy-theme":n.theme,"data-uppy-num-acquirers":n.acquirers.length,"data-uppy-drag-drop-supported":!n.disableLocalFiles&&vG(),"aria-hidden":n.inline?"false":n.isHidden,"aria-disabled":n.disabled,"aria-label":n.inline?n.i18n("dashboardTitle"):n.i18n("dashboardWindowTitle"),onPaste:n.handlePaste,onDragOver:n.handleDragOver,onDragLeave:n.handleDragLeave,onDrop:n.handleDrop,children:[$("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:n.handleClickOutside}),$("div",{className:"uppy-Dashboard-inner",role:n.inline?void 0:"dialog",style:{width:n.inline&&n.width?n.width:"",height:n.inline&&n.height?n.height:""},children:[n.inline?null:$("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":n.i18n("closeModal"),title:n.i18n("closeModal"),onClick:n.closeModal,children:$("span",{"aria-hidden":"true",children:""})}),$("div",{className:"uppy-Dashboard-innerWrap",children:[$("div",{className:"uppy-Dashboard-dropFilesHereHint",children:n.i18n("dropHint")}),u&&$(JG,{...n}),d&&$("div",{className:"uppy-Dashboard-serviceMsg",children:[$("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:$("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[$("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),$("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),$("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),$("strong",{className:"uppy-Dashboard-serviceMsg-title",children:n.i18n("sessionRestored")}),$("div",{className:"uppy-Dashboard-serviceMsg-text",children:f()})]}),u?$(QG,{id:n.id,i18n:n.i18n,uppy:n.uppy,files:n.files,resumableUploads:n.resumableUploads,hideRetryButton:n.hideRetryButton,hidePauseResumeButton:n.hidePauseResumeButton,hideCancelButton:n.hideCancelButton,showLinkToFileUploadResult:n.showLinkToFileUploadResult,showRemoveButtonAfterComplete:n.showRemoveButtonAfterComplete,metaFields:n.metaFields,toggleFileCard:n.toggleFileCard,handleRequestThumbnail:n.handleRequestThumbnail,handleCancelThumbnail:n.handleCancelThumbnail,recoveredState:n.recoveredState,individualCancellation:n.individualCancellation,openFileEditor:n.openFileEditor,canEditFile:n.canEditFile,toggleAddFilesPanel:n.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:l,containerWidth:n.containerWidth,containerHeight:n.containerHeight}):$(wP,{i18n:n.i18n,i18nArray:n.i18nArray,acquirers:n.acquirers,handleInputChange:n.handleInputChange,maxNumberOfFiles:n.maxNumberOfFiles,allowedFileTypes:n.allowedFileTypes,showNativePhotoCameraButton:n.showNativePhotoCameraButton,showNativeVideoCameraButton:n.showNativeVideoCameraButton,nativeCameraFacingMode:n.nativeCameraFacingMode,showPanel:n.showPanel,activePickerPanel:n.activePickerPanel,disableLocalFiles:n.disableLocalFiles,fileManagerSelectionType:n.fileManagerSelectionType,note:n.note,proudlyDisplayPoweredByUppy:n.proudlyDisplayPoweredByUppy}),$(bd,{children:n.showAddFilesPanel?$(bG,{...n,isSizeMD:s},"AddFiles"):null}),$(bd,{children:n.fileCardFor?$(PG,{...n},"FileCard"):null}),$(bd,{children:n.activePickerPanel?$(YG,{...n},"Picker"):null}),$(bd,{children:n.showFileEditor?$(wG,{...n},"Editor"):null}),$("div",{className:"uppy-Dashboard-progressindicators",children:n.progressindicators.map(g=>n.uppy.getPlugin(g.id).render(n.state))})]})]})]})}const t9={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},jP=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var n9=aP();const s9=Ys(n9);function NP(n,e){if(e){const t=n.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return n}function r9(){let n=!1;return s9((t,s)=>{const i=NP(t,s),a=i.contains(document.activeElement);if(a&&n)return;const l=i.querySelector("[data-uppy-super-focusable]");a&&!l||(l?(l.focus({preventScroll:!0}),n=!0):(i.querySelector(jP)?.focus({preventScroll:!0}),n=!1))},260)}function A_(n,e){const t=e[0];t&&(t.focus(),n.preventDefault())}function i9(n,e){const t=e[e.length-1];t&&(t.focus(),n.preventDefault())}function a9(n){return n.contains(document.activeElement)}function kP(n,e,t){const s=NP(t,e),i=Ul(s.querySelectorAll(jP)),a=i.indexOf(document.activeElement);a9(s)?n.shiftKey&&a===0?i9(n,i):!n.shiftKey&&a===i.length-1&&A_(n,i):A_(n,i)}function o9(n,e,t){e===null||kP(n,e,t)}const P_=9,l9=27;function E_(){const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}const c9={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:mq,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};let u9=class extends ya{static VERSION=xG.version;#t;modalName=`uppy-Dashboard-${Cv()}`;superFocus=r9();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(e,t){const s=t?.autoOpen??null;super(e,{...c9,...t,autoOpen:s}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=t9,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=e=>{const s=this.getPluginState().targets.filter(i=>i.id!==e.id);this.setPluginState({targets:s})};addTarget=e=>{const t=e.id||e.constructor.name,s=e.title||t,i=e.type;if(i!=="acquirer"&&i!=="progressindicator"&&i!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const a={id:t,name:s,type:i},u=this.getPluginState().targets.slice();return u.push(a),this.setPluginState({targets:u}),this.el};hideAllPanels=()=>{const e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))};showPanel=e=>{const{targets:t}=this.getPluginState(),s=t.find(i=>i.type==="acquirer"&&i.id===e);this.setPluginState({activePickerPanel:s,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)};canEditFile=e=>{const{targets:t}=this.getPluginState();return this.#i(t).some(i=>this.uppy.getPlugin(i.id).canEditFile(e))};openFileEditor=e=>{const{targets:t}=this.getPluginState(),s=this.#i(t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),s.forEach(i=>{this.uppy.getPlugin(i.id).selectFile(e)})};closeFileEditor=()=>{const{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{const{targets:e}=this.getPluginState();this.#i(e).forEach(s=>{this.uppy.getPlugin(s.id).save()}),this.closeFileEditor()};openModal=()=>{const{promise:e,resolve:t}=E_();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const s=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",s,!1),t()};this.el.addEventListener("animationend",s,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e};closeModal=e=>{const t=e?.manualClose??!0,{isHidden:s,isClosing:i}=this.getPluginState();if(s||i)return;const{promise:a,resolve:l}=E_();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const u=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",u,!1),l()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),l();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),a};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})};handleSystemDarkModeChange=e=>{const t=e.matches;this.uppy.log(`[Dashboard] Dark mode is ${t?"on":"off"}`),this.setDarkModeCapability(t)};toggleFileCard=(e,t)=>{const s=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",s):this.uppy.emit("dashboard:file-edit-complete",s),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};addFiles=e=>{const t=e.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||s.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(s){this.uppy.log(s)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(e=>{const t=e[0],{width:s,height:i}=t.contentRect;this.setPluginState({containerWidth:s,containerHeight:i,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;!e.areInsidesReadyToBeVisible&&!t&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=e=>{const t=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],s=this.#t??Ul(this.el.querySelectorAll(t)).filter(i=>!i.classList.contains("uppy-Dashboard-close"));for(const i of s)i.tagName==="A"?i.setAttribute("aria-disabled",e):i.disabled=e;e?this.#t=s:this.#t=null,this.dashboardIsDisabled=e};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=e=>{this.isModalOpen()&&(!e.state||!e.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()};handleKeyDownInModal=e=>{e.keyCode===l9&&this.requestCloseModal(),e.keyCode===P_&&kP(e,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=e=>{this.uppy.iteratePlugins(s=>{s.type==="acquirer"&&s.handleRootPaste?.(e)});const t=Ul(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))};handleInputChange=e=>{e.preventDefault();const t=Ul(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))};handleDragOver=e=>{e.preventDefault(),e.stopPropagation();const t=()=>{let l=!0;return this.uppy.iteratePlugins(u=>{u.canHandleRootDrop?.(e)&&(l=!0)}),l},s=()=>{const{types:l}=e.dataTransfer;return l.some(u=>u==="Files")},i=t(),a=s();if(!i&&!a||this.opts.disabled||this.opts.disableLocalFiles&&(a||!i)||!this.uppy.getState().allowNewUpload){e.dataTransfer.dropEffect="none";return}e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e)};handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)};handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(a=>{a.type==="acquirer"&&a.handleRootDrop?.(e)});let t=!1;const s=a=>{this.uppy.log(a,"error"),t||(this.uppy.info(a.message,"error"),t=!0)};this.uppy.log("[Dashboard] Processing dropped files");const i=await gG(e.dataTransfer,{logDropError:s});i.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(i)),this.opts.onDrop(e)};handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};handleKeyDownInInline=e=>{e.keyCode===P_&&o9(e,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)};handleComplete=({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()};handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};#e=()=>{if(this.opts.disableThumbnailGenerator)return;const e=600,t=this.uppy.getFiles();if(t.length===1){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s?.setOptions({thumbnailWidth:e});const i={...t[0],preview:void 0};s?.requestThumbnail(i).then(()=>{s?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#n=e=>{const t=e[0],{metaFields:s}=this.getPluginState(),i=s&&s.length>0,a=this.canEditFile(t);i&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,t.id):a&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const e=__(this.opts.trigger);e?e.forEach(t=>t.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#u),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#e),this.uppy.on("file-removed",this.#e),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#n)};removeEvents=()=>{const e=__(this.opts.trigger);!this.opts.inline&&e&&e.forEach(t=>t.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#u),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#e),this.uppy.off("file-removed",this.#e),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#n)};superFocusOnEachUpdate=()=>{const e=this.el.contains(document.activeElement),t=document.activeElement===document.body||document.activeElement===null,s=this.uppy.getState().info.length===0,i=!this.opts.inline;s&&(i||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)};#s=e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}};#r=e=>{const t=this.uppy.getPlugin(e.id);return typeof t.isSupported!="function"?!0:t.isSupported()};#a=e=>e.filter(t=>t.type==="acquirer"&&this.#r(t)).map(this.#s);#o=e=>e.filter(t=>t.type==="progressindicator").map(this.#s);#i=e=>e.filter(t=>t.type==="editor").map(this.#s);render=e=>{const t=this.getPluginState(),{files:s,capabilities:i,allowNewUpload:a}=e,{newFiles:l,uploadStartedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:f,inProgressNotPausedFiles:m,processingFiles:g,isUploadStarted:b,isAllComplete:S,isAllPaused:x}=this.uppy.getObjectOfFilesPerState(),w=this.#a(t.targets),N=this.#o(t.targets),E=this.#i(t.targets);let C;return this.opts.theme==="auto"?C=i.darkMode?"dark":"light":C=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),e9({state:e,isHidden:t.isHidden,files:s,newFiles:l,uploadStartedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:f,inProgressNotPausedFiles:m,processingFiles:g,isUploadStarted:b,isAllComplete:S,isAllPaused:x,totalFileCount:Object.keys(s).length,totalProgress:e.totalProgress,allowNewUpload:a,acquirers:w,theme:C,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:N,editors:E,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})};#c=()=>{const{plugins:e}=this.opts;e.forEach(t=>{const s=this.uppy.getPlugin(t);s?s.mount(this,s):this.uppy.log(`[Uppy] Dashboard could not find plugin '${t}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#p=()=>{this.uppy.iteratePlugins(this.#u)};#u=e=>{const t=["acquirer","editor"];e&&!e.opts?.target&&t.includes(e.type)&&(this.getPluginState().targets.some(i=>e.id===i.id)||e.mount(this,e))};#d(){const{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:s,hideCancelButton:i,showProgressDetails:a,hideProgressAfterFinish:l,locale:u,doneButtonHandler:d}=this.opts;return{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:s,hideCancelButton:i,showProgressDetails:a,hideAfterFinish:l,locale:u,doneButtonHandler:d}}#l(){const{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:s,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:s,waitForThumbnailsBeforeUpload:i,lazy:!i}}#h(){return{}}setOptions(e){super.setOptions(e),this.uppy.getPlugin(this.#f())?.setOptions(this.#d()),this.uppy.getPlugin(this.#m())?.setOptions(this.#l())}#f(){return`${this.id}:StatusBar`}#m(){return`${this.id}:ThumbnailGenerator`}#g(){return`${this.id}:Informer`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:s,allowMultipleUploadBatches:i}=this.uppy.opts;(s||i)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:a}=this.opts;a&&this.mount(a,this),this.opts.disableStatusBar||this.uppy.use(Lq,{id:this.#f(),target:this,...this.#d()}),this.opts.disableInformer||this.uppy.use(cq,{id:this.#g(),target:this,...this.#h()}),this.opts.disableThumbnailGenerator||this.uppy.use(pG,{id:this.#m(),...this.#l()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const l=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#c(),this.#p(),this.initEvents()};uninstall=()=>{if(!this.opts.disableInformer){const t=this.uppy.getPlugin(`${this.id}:Informer`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableStatusBar){const t=this.uppy.getPlugin(`${this.id}:StatusBar`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableThumbnailGenerator){const t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t&&this.uppy.removePlugin(t)}const{plugins:e}=this.opts;e.forEach(t=>{const s=this.uppy.getPlugin(t);s&&s.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}};const d9=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],h9=/^(aria-|data-)/,TP=n=>Object.fromEntries(Object.entries(n).filter(([e])=>h9.test(e)||d9.includes(e)));function p9(n,e){const t=TP(n);return Object.keys(n).some(s=>!Object.hasOwn(t,s)&&n[s]!==e[s])}class f9 extends v.Component{static defaultProps={open:void 0,onRequestClose:void 0};container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(e){const{uppy:t,open:s,onRequestClose:i}=this.props;if(e.uppy!==t)this.uninstallPlugin(e),this.installPlugin();else if(p9(this.props,e)){const{uppy:a,...l}={...this.props,inline:!1,onRequestCloseModal:i};this.plugin.setOptions(l)}e.open&&!s?this.plugin.closeModal():!e.open&&s&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:e=this.container,open:t,onRequestClose:s,uppy:i,...a}=this.props,l={id:"DashboardModal",...a,inline:!1,target:e,open:t,onRequestCloseModal:s};i.use(u9,l),this.plugin=i.getPlugin(l.id),t&&this.plugin.openModal()}uninstallPlugin(e=this.props){const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return v.createElement("div",{className:"uppy-Container",ref:e=>{this.container=e},...TP(this.props)})}}v.createContext({uppy:void 0,status:"init",progress:0});var jg={exports:{}},Ng={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function m9(){if(M_)return Ng;M_=1;var n=oc();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,s=n.useSyncExternalStore,i=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue;return Ng.useSyncExternalStoreWithSelector=function(d,h,f,m,g){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function w(P){if(!N){if(N=!0,E=P,P=m(P),g!==void 0&&S.hasValue){var R=S.value;if(g(R,P))return C=R}return C=P}if(R=C,t(E,P))return R;var T=m(P);return g!==void 0&&g(R,T)?(E=P,R):(E=P,C=T)}var N=!1,E,C,A=f===void 0?null:f;return[function(){return w(h())},A===null?void 0:function(){return w(A())}]},[h,f,m,g]);var x=s(d,b[0],b[1]);return a(function(){S.hasValue=!0,S.value=x},[x]),u(x),x},Ng}var R_;function g9(){return R_||(R_=1,jg.exports=m9()),jg.exports}g9();function AP(n,e){return Object.hasOwn(n,e)}class y9 extends Error{isNetworkError;cause;constructor(e,t){super(e),this.cause=t?.cause,this.cause&&AP(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class x9 extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function v9(...n){return fetch(...n).catch(e=>{throw e.name==="AbortError"?e:new x9(e)})}function b9(n){const t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(n)?.[1];return`${/^http:\/\//i.test(n)?"ws":"wss"}://${t}`}class w9 extends Error{name="UserFacingApiError"}var kg={},Tg,O_;function S9(){if(O_)return Tg;O_=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Tg=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var s=this._timeouts.shift();if(s===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),s=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},s),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var s=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){s._operationTimeoutCb()},s._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,s=0,i=0;i<this._errors.length;i++){var a=this._errors[i],l=a.message,u=(e[l]||0)+1;e[l]=u,u>=s&&(t=a,s=u)}return t},Tg}var I_;function _9(){return I_||(I_=1,(function(n){var e=S9();n.operation=function(t){var s=n.timeouts(t);return new e(s,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)s[i]=t[i];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],l=0;l<s.retries;l++)a.push(this.createTimeout(l,s));return t&&t.forever&&!a.length&&a.push(this.createTimeout(l,s)),a.sort(function(u,d){return u-d}),a},n.createTimeout=function(t,s){var i=s.randomize?Math.random()+1:1,a=Math.round(i*Math.max(s.minTimeout,1)*Math.pow(s.factor,t));return a=Math.min(a,s.maxTimeout),a},n.wrap=function(t,s,i){if(s instanceof Array&&(i=s,s=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var l=0;l<i.length;l++){var u=i[l],d=t[u];t[u]=(function(f){var m=n.operation(s),g=Array.prototype.slice.call(arguments,1),b=g.pop();g.push(function(S){m.retry(S)||(S&&(arguments[0]=m.mainError()),b.apply(this,arguments))}),m.attempt(function(){f.apply(t,g)})}).bind(t,d),t[u].options=s}}})(kg)),kg}var Ag,F_;function C9(){return F_||(F_=1,Ag=_9()),Ag}var j9=C9();const N9=Ys(j9),k9=Object.prototype.toString,T9=n=>k9.call(n)==="[object Error]",A9=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function P9(n){return n&&T9(n)&&n.name==="TypeError"&&typeof n.message=="string"?n.message==="Load failed"?n.stack===void 0:A9.has(n.message):!1}class Ty extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const D_=(n,e,t)=>{const s=t.retries-(e-1);return n.attemptNumber=e,n.retriesLeft=s,n};async function V_(n,e){return new Promise((t,s)=>{e={...e},e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.retries??=10;const i=N9.operation(e),a=()=>{i.stop(),s(e.signal?.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",a,{once:!0});const l=()=>{e.signal?.removeEventListener("abort",a),i.stop()};i.attempt(async u=>{try{const d=await n(u);l(),t(d)}catch(d){try{if(!(d instanceof Error))throw new TypeError(`Non-error was thrown: "${d}". You should only throw errors.`);if(d instanceof Ty)throw d.originalError;if(d instanceof TypeError&&!P9(d))throw d;if(D_(d,u,e),await e.shouldRetry(d)||(i.stop(),s(d)),await e.onFailedAttempt(d),!i.retry(d))throw i.mainError()}catch(h){D_(h,u,e),l(),s(h)}}})})}const E9="4.5.2",M9={version:E9};class R9 extends Error{isAuthError;constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}function O9(n){return n.replace(/\/$/,"")}const L_=10,I9=300*1e3,F9=401;class D9 extends Error{statusCode;constructor({statusCode:e,message:t}){super(t),this.name="HttpError",this.statusCode=e}}async function V9(n){if(n.status===F9)throw new R9;if(n.ok)return n.json();let e=`Failed request with status: ${n.status}. ${n.statusText}`,t;try{t=await n.json(),t.message&&(e=`${e} message: ${t.message}`),t.requestId&&(e=`${e} request-Id: ${t.requestId}`)}catch(s){throw new Error(e,{cause:s})}throw n.status>=400&&n.status<=499&&t.message?new w9(t.message):new D9({statusCode:n.status,message:e})}function L9(n,e,t){const{progress:s,bytesUploaded:i,bytesTotal:a}=e;s&&(n.uppy.log(`Upload progress: ${s}`),n.uppy.emit("upload-progress",t,{uploadStarted:t.progress.uploadStarted??0,bytesUploaded:i,bytesTotal:a}))}class B9{static VERSION=M9.version;#t;uppy;opts;constructor(e,t){this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.#t=t.companionHeaders}setCompanionHeaders(e){this.#t=e}[Symbol.for("uppy test: getCompanionHeaders")](){return this.#t}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return O9(e?.[t]?e[t]:t)}async headers(e=!1){return{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...this.#t}}onReceiveResponse(e){const{headers:t}=e,i=this.uppy.getState().companion||{},a=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==i[a]&&this.uppy.setState({companion:{...i,[a]:t.get("i-am")}})}#e(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}async request({path:e,method:t="GET",data:s,skipPostResponse:i,signal:a}){try{const l=await this.headers(!s),u=await v9(this.#e(e),{method:t,signal:a,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:s?JSON.stringify(s):null});return i||this.onReceiveResponse(u),await V9(u)}catch(l){throw l.isAuthError||l.name==="UserFacingApiError"||l.name==="AbortError"?l:new y9(`Could not ${t} ${this.#e(e)}`,{cause:l})}}async get(e,t){return this.request({...t,path:e})}async post(e,t,s){return this.request({...s,path:e,method:"POST",data:t})}async delete(e,t,s){return this.request({...s,path:e,method:"DELETE",data:t})}async uploadRemoteFile(e,t,s){try{const{signal:i,getQueue:a}=s||{};return await V_(async()=>{const l=this.uppy.getFile(e.id)?.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),this.#s({file:e,queue:a(),signal:i});const d=await a().wrapPromiseFunction(async(...h)=>{try{return await this.#n(...h)}catch(f){if(f.isAuthError)throw new Ty(f);if(f.cause==null)throw f;const m=f.cause,g=()=>[408,409,429,418,423].includes(m.statusCode)||m.statusCode>=500&&m.statusCode<=599&&![501,505].includes(m.statusCode);throw m.name==="HttpError"&&!g()?new Ty(m):m}},{priority:-1})({file:e,postBody:t,signal:i}).abortOn(i);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:d}),this.#s({file:this.uppy.getFile(e.id),queue:a(),signal:i})},{retries:L_,signal:i,onFailedAttempt:l=>this.uppy.log(`Retrying upload due to: ${l.message}`,"warning")})}catch(i){if(i.name==="AbortError")return;throw this.uppy.emit("upload-error",e,i),i}}#n=async({file:e,postBody:t,signal:s})=>{if(e.remote?.url==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(e.remote.url,{...e.remote.body,...t},{signal:s})).token};async#s({file:e,queue:t,signal:s}){let i;const{capabilities:a}=this.uppy.getState();try{return await new Promise((l,u)=>{const d=e.serverToken,h=b9(e.remote.companionUrl);let f,m,g,{isPaused:b}=e;const S=(T,j)=>{if(f==null||f.readyState!==f.OPEN){this.uppy.log(`Cannot send "${T}" to socket ${e.id} because the socket state was ${String(f?.readyState)}`,"warning");return}f.send(JSON.stringify({action:T,payload:j??{}}))};function x(){a.resumableUploads&&S(b?"pause":"resume")}const w=async()=>{m&&m.abort(),m=new AbortController;const T=O=>{this.uppy.setFileState(e.id,{serverToken:null}),m?.abort?.(),u(O)};function j(){clearTimeout(g),!b&&(g=setTimeout(()=>T(new Error("Timeout waiting for message from Companion socket")),I9))}try{await t.wrapPromiseFunction(async()=>{await V_(async()=>new Promise((I,D)=>{f=new WebSocket(`${h}/api/${d}`),j(),f.addEventListener("close",()=>{f=void 0,D(new Error("Socket closed unexpectedly"))}),f.addEventListener("error",H=>{this.uppy.log(`Companion socket error ${JSON.stringify(H)}, closing socket`,"warning"),f?.close()}),f.addEventListener("open",()=>{x()}),f.addEventListener("message",H=>{j();try{const{action:z,payload:G}=JSON.parse(H.data);switch(z){case"progress":{L9(this,G,this.uppy.getFile(e.id));break}case"success":{const Q=G.response?.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:G.url,status:G.response?.status??200,body:Q?JSON.parse(Q):void 0}),m?.abort?.(),l();break}case"error":{const{message:Q}=G.error;throw Object.assign(new Error(Q),{cause:G.error})}default:this.uppy.log(`Companion socket unknown action ${z}`,"warning")}}catch(z){T(z)}});const B=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(g),f&&f.close(),f=void 0};m.signal.addEventListener("abort",()=>{B()})}),{retries:L_,signal:m.signal,onFailedAttempt:()=>{m.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(m.signal)}catch(O){if(m.signal.aborted)return;T(O)}},N=T=>{a.resumableUploads&&(b=T,f&&x())},E=T=>{a.individualCancellation&&T.id===e.id&&(S("cancel"),m?.abort?.(),this.uppy.log(`upload ${e.id} was removed`),l())},C=()=>{S("cancel"),m?.abort?.(),this.uppy.log(`upload ${e.id} was canceled`),l()},A=(T,j)=>{T?.id===e.id&&N(j)},P=()=>N(!0),R=()=>N(!1);this.uppy.on("file-removed",E),this.uppy.on("cancel-all",C),this.uppy.on("upload-pause",A),this.uppy.on("pause-all",P),this.uppy.on("resume-all",R),i=()=>{this.uppy.off("file-removed",E),this.uppy.off("cancel-all",C),this.uppy.off("upload-pause",A),this.uppy.off("pause-all",P),this.uppy.off("resume-all",R)},s.addEventListener("abort",()=>{m?.abort()}),w()})}finally{i?.()}}}class z9{#t;#e=[];constructor(e){this.#t=e}on(e,t){return this.#e.push([e,t]),this.#t.on(e,t)}remove(){for(const[e,t]of this.#e.splice(0))this.#t.off(e,t)}onFilePause(e,t){this.on("upload-pause",(s,i)=>{e===s?.id&&t(i)})}onFileRemove(e,t){this.on("file-removed",s=>{e===s.id&&t(s.id)})}onPause(e,t){this.on("upload-pause",(s,i)=>{e===s?.id&&t(i)})}onRetry(e,t){this.on("upload-retry",s=>{e===s?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#t.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#t.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...s)=>{this.#t.getFile(e)&&t(...s)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#t.getFile(e)&&t()})}}const{AbortController:Pg}=globalThis,PP=(n="Aborted",e)=>{const t=new DOMException(n,"AbortError");return e!=null&&AP(e,"cause")&&Object.defineProperty(t,"cause",{__proto__:null,configurable:!0,writable:!0,value:e.cause}),t};function U9(n){const e=t=>"error"in t&&!!t.error;return n.filter(t=>!e(t))}function $9(n){return n.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function B_(n,e){return n===!0?Object.keys(e):Array.isArray(n)?n:[]}function q9(n){return new Error("Cancelled",{cause:n})}function z_(n){if(n!=null){const e=()=>this.abort(n.reason);n.addEventListener("abort",e,{once:!0});const t=()=>{n.removeEventListener("abort",e)};this.then?.(t,t)}return this}class G9{#t=0;#e=[];#n=!1;#s;#r=1;#a;#o;limit;constructor(e){typeof e!="number"||e===0?this.limit=1/0:this.limit=e}#i(e){this.#t+=1;let t=!1,s;try{s=e()}catch(i){throw this.#t-=1,i}return{abort:i=>{t||(t=!0,this.#t-=1,s?.(i),this.#c())},done:()=>{t||(t=!0,this.#t-=1,this.#c())}}}#c(){queueMicrotask(()=>this.#p())}#p(){if(this.#n||this.#t>=this.limit||this.#e.length===0)return;const e=this.#e.shift();if(e==null)throw new Error("Invariant violation: next is null");const t=this.#i(e.fn);e.abort=t.abort,e.done=t.done}#u(e,t){const s={fn:e,priority:t?.priority||0,abort:()=>{this.#d(s)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=this.#e.findIndex(a=>s.priority>a.priority);return i===-1?this.#e.push(s):this.#e.splice(i,0,s),s}#d(e){const t=this.#e.indexOf(e);t!==-1&&this.#e.splice(t,1)}run(e,t){return!this.#n&&this.#t<this.limit?this.#i(e):this.#u(e,t)}wrapSyncFunction(e,t){return(...s)=>{const i=this.run(()=>(e(...s),queueMicrotask(()=>i.done()),()=>{}),t);return{abortOn:z_,abort(){i.abort()}}}}wrapPromiseFunction(e,t){return(...s)=>{let i;const a=new Promise((l,u)=>{i=this.run(()=>{let d,h;try{h=Promise.resolve(e(...s))}catch(f){h=Promise.reject(f)}return h.then(f=>{d?u(d):(i.done(),l(f))},f=>{d?u(d):(i.done(),u(f))}),f=>{d=q9(f)}},t)});return a.abort=l=>{i.abort(l)},a.abortOn=z_,a}}resume(){this.#n=!1,clearTimeout(this.#s);for(let e=0;e<this.limit;e++)this.#c()}#l=()=>this.resume();pause(e=null){this.#n=!0,clearTimeout(this.#s),e!=null&&(this.#s=setTimeout(this.#l,e))}rateLimit(e){clearTimeout(this.#o),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#a=this.limit-1,this.limit=this.#r,this.#o=setTimeout(this.#h,e))}#h=()=>{if(this.#n){this.#o=setTimeout(this.#h,0);return}this.#r=this.limit,this.limit=Math.ceil((this.#a+this.#r)/2);for(let e=this.#r;e<=this.limit;e++)this.#c();this.#a-this.#r>3?this.#o=setTimeout(this.#h,2e3):this.#r=Math.floor(this.#r/2)};get isPaused(){return this.#n}}const W9="4.3.2",H9={version:W9};function K9({method:n="PUT",CanonicalUri:e="/",CanonicalQueryString:t="",SignedHeaders:s,HashedPayload:i}){const a=Object.keys(s).map(l=>l.toLowerCase()).sort();return[n,e,t,...a.map(l=>`${l}:${s[l]}`),"",a.join(";"),i].join(`
`)}const Mv=new TextEncoder,Rv={name:"HMAC",hash:"SHA-256"};async function Q9(n){const{subtle:e}=globalThis.crypto;return e.digest(Rv.hash,Mv.encode(n))}async function Y9(n){const{subtle:e}=globalThis.crypto;return e.importKey("raw",typeof n=="string"?Mv.encode(n):n,Rv,!1,["sign"])}function U_(n){const e=new Uint8Array(n);let t="";for(let s=0;s<e.length;s++)t+=e[s].toString(16).padStart(2,"0");return t}async function El(n,e){const{subtle:t}=globalThis.crypto;return t.sign(Rv,await Y9(n),Mv.encode(e))}async function X9({accountKey:n,accountSecret:e,sessionToken:t,bucketName:s,Key:i,Region:a,expires:l,uploadId:u,partNumber:d}){const f=`s3.${a}.amazonaws.com`,m=`/${s}/${encodeURI(i).replace(/[;?:@&=+$,#!'()*]/g,O=>`%${O.charCodeAt(0).toString(16).toUpperCase()}`)}`,g="UNSIGNED-PAYLOAD",b=new Date().toISOString().replace(/[-:]|\.\d+/g,""),S=b.slice(0,8),x=`${S}/${a}/s3/aws4_request`,w=new URL(`https://${f}${m}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",g),w.searchParams.set("X-Amz-Credential",`${n}/${x}`),w.searchParams.set("X-Amz-Date",b),w.searchParams.set("X-Amz-Expires",l),w.searchParams.set("X-Amz-Security-Token",t),w.searchParams.set("X-Amz-SignedHeaders","host"),d&&w.searchParams.set("partNumber",d),u&&w.searchParams.set("uploadId",u),w.searchParams.set("x-id",d&&u?"UploadPart":"PutObject");const N=K9({CanonicalUri:m,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:f},HashedPayload:g}),E=U_(await Q9(N)),C=["AWS4-HMAC-SHA256",b,x,E].join(`
`),A=await El(`AWS4${e}`,S),P=await El(A,a),R=await El(P,"s3"),T=await El(R,"aws4_request"),j=U_(await El(T,C));return w.searchParams.set("X-Amz-Signature",j),w}const Z9=1024*1024,$_={getChunkSize(n){return Math.ceil(n.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(n){throw n}};function J9(n){if(typeof n=="string")return parseInt(n,10);if(typeof n=="number")return n;throw new TypeError("Expected a number")}const Dd=Symbol("pausing upload, not an actual error");class eW{options;#t=new Pg;#e=[];#n=[];#s;#r;#a=!1;#o;#i;#c;#p;#u=e=>e?.cause===Dd?null:this.#o(e);#d=1e4;#l=5*Z9;constructor(e,t){this.options={...$_,...t},this.options.getChunkSize??=$_.getChunkSize,this.#s=e,this.#r=t.file,this.#i=this.options.onSuccess,this.#o=this.options.onError,this.#c=this.options.shouldUseMultipart,this.#p=t.uploadId&&t.key,this.#h()}#h(){const e=this.#s.size,t=typeof this.#c=="function"?this.#c(this.#r):!!this.#c;if(t&&e>this.#l){let s=Math.max(this.options.getChunkSize(this.#s),this.#l),i=Math.floor(e/s);i>this.#d&&(i=this.#d,s=e/this.#d),this.#e=Array(i);for(let a=0,l=0;a<e;a+=s,l++){const u=Math.min(e,a+s),d=()=>{const h=a;return this.#s.slice(h,u)};if(this.#e[l]={getData:d,onProgress:this.#g(l),onComplete:this.#x(l),shouldUseMultipart:t},this.#p){const h=a+s>e?e-a:s;this.#e[l].setAsUploaded=()=>{this.#e[l]=null,this.#n[l].uploaded=h}}}}else this.#e=[{getData:()=>this.#s,onProgress:this.#g(0),onComplete:this.#x(0),shouldUseMultipart:t}];this.#n=this.#e.map(()=>({uploaded:0}))}#f(){this.options.companionComm.uploadFile(this.#r,this.#e,this.#t.signal).then(this.#i,this.#u),this.#a=!0}#m(){this.options.companionComm.resumeUploadFile(this.#r,this.#e,this.#t.signal).then(this.#i,this.#u)}#g=e=>t=>{if(!t.lengthComputable)return;this.#n[e].uploaded=J9(t.loaded);const s=this.#n.reduce((i,a)=>i+a.uploaded,0);this.options.onProgress(s,this.#s.size)};#x=e=>t=>{this.#e[e]=null,this.#n[e].etag=t,this.#n[e].done=!0;const s={PartNumber:e+1,ETag:t};this.options.onPartComplete(s)};#y(){this.#t.abort(),this.options.companionComm.abortFileUpload(this.#r).catch(e=>this.options.log(e))}start(){this.#a?(this.#t.signal.aborted||this.#t.abort(Dd),this.#t=new Pg,this.#m()):this.#p?(this.options.companionComm.restoreUploadFile(this.#r,{uploadId:this.options.uploadId,key:this.options.key}),this.#m()):this.#f()}pause(){this.#t.abort(Dd),this.#t=new Pg}abort(e){e?.really?this.#y():this.pause()}[Symbol.for("uppy test: getChunkState")](){return this.#n}}function Tn(n){if(n?.aborted)throw PP("The operation was aborted",{cause:n.reason})}function tW(n){const e=new URL(n);return e.search="",e.hash="",e.href}class nW{#t;#e=new WeakMap;#n;#s;#r;#a;#o;#i;#c;#p;#u;#d;#l;constructor(e,t,s,i){this.#i=e,this.#u=s,this.#l=i,this.setOptions(t)}setOptions(e){const t=this.#i;"abortMultipartUpload"in e&&(this.#t=t.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&(this.#n=t.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&(this.#s=t.wrapPromiseFunction(e.signPart)),"listParts"in e&&(this.#a=t.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&(this.#p=t.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e&&(this.#c=e.retryDelays??[]),"uploadPartBytes"in e&&(this.#d=t.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&(this.#r=t.wrapPromiseFunction(e.getUploadParameters))}async#h(e,t){const s=this.#i,i=e?.source?.status;if(i==null)return!1;if(i===403&&e.message==="Request has expired"){if(!s.isPaused){if(s.limit===1||this.#o==null){const a=t.next();if(a==null||a.done)return!1;this.#o=a.value}s.rateLimit(0),await new Promise(a=>setTimeout(a,this.#o))}}else if(i===429){if(!s.isPaused){const a=t.next();if(a==null||a.done)return!1;s.rateLimit(a.value)}}else{if(i>400&&i<500&&i!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)s.isPaused||(s.pause(),window.addEventListener("online",()=>{s.resume()},{once:!0}));else{const a=t.next();if(a==null||a.done)return!1;await new Promise(l=>setTimeout(l,a.value))}}return!0}async getUploadId(e,t){let s;for(;s=this.#e.get(e.data),s!=null;)try{return await s}catch{}const i=this.#n(this.#l(e),t),a=()=>{i.abort(t.reason),this.#e.delete(e.data)};return t.addEventListener("abort",a,{once:!0}),this.#e.set(e.data,i),i.then(async l=>{t.removeEventListener("abort",a),this.#u(e,l),this.#e.set(e.data,l)},()=>{t.removeEventListener("abort",a),this.#e.delete(e.data)}),i}async abortFileUpload(e){const t=this.#e.get(e.data);if(t==null)return;this.#e.delete(e.data),this.#u(e,Object.create(null));let s;try{s=await t}catch{return}await this.#t(this.#l(e),s)}async#f(e,t,s){const{method:i="POST",url:a,fields:l,headers:u}=await this.#r(this.#l(e),{signal:s}).abortOn(s);let d;const h=t.getData();if(i.toUpperCase()==="POST"){const S=new FormData;Object.entries(l).forEach(([x,w])=>S.set(x,w)),S.set("file",h),d=S}else d=h;const{onProgress:f,onComplete:m}=t,g=await this.#d({signature:{url:a,headers:u,method:i},body:d,size:h.size,onProgress:f,onComplete:m,signal:s}).abortOn(s),b=l?.key;return this.#u(e,{key:b}),{...g,location:g.location??tW(a),bucket:l?.bucket,key:b}}async uploadFile(e,t,s){if(Tn(s),t.length===1&&!t[0].shouldUseMultipart)return this.#f(e,t[0],s);const{uploadId:i,key:a}=await this.getUploadId(e,s);Tn(s);try{const l=await Promise.all(t.map((u,d)=>this.uploadChunk(e,d+1,u,s)));return Tn(s),await this.#p(this.#l(e),{key:a,uploadId:i,parts:l,signal:s},s).abortOn(s)}catch(l){throw l?.cause!==Dd&&l?.name!=="AbortError"&&this.abortFileUpload(e),l}}restoreUploadFile(e,t){this.#e.set(e.data,t)}async resumeUploadFile(e,t,s){if(Tn(s),t.length===1&&t[0]!=null&&!t[0].shouldUseMultipart)return this.#f(e,t[0],s);const{uploadId:i,key:a}=await this.getUploadId(e,s);Tn(s);const l=await this.#a(this.#l(e),{uploadId:i,key:a,signal:s},s).abortOn(s);Tn(s);const u=await Promise.all(t.map((d,h)=>{const f=h+1,m=l.find(({PartNumber:g})=>g===f);return m==null?this.uploadChunk(e,f,d,s):(d?.setAsUploaded?.(),{PartNumber:f,ETag:m.ETag})}));return Tn(s),this.#p(this.#l(e),{key:a,uploadId:i,parts:u,signal:s},s).abortOn(s)}async uploadChunk(e,t,s,i){Tn(i);const{uploadId:a,key:l}=await this.getUploadId(e,i),u=this.#c.values(),d=this.#c.values(),h=()=>{const f=u.next();return f==null||f.done?null:f.value};for(;;){Tn(i);const f=s.getData(),{onProgress:m,onComplete:g}=s;let b;try{b=await this.#s(this.#l(e),{uploadId:a,key:l,partNumber:t,body:f,signal:i}).abortOn(i)}catch(S){const x=h();if(x==null||i.aborted)throw S;await new Promise(w=>setTimeout(w,x));continue}Tn(i);try{return{PartNumber:t,...await this.#d({signature:b,body:f,size:f.size,onProgress:m,onComplete:g,signal:i}).abortOn(i)}}catch(S){if(!await this.#h(S,d))throw S}}}}function to(n){if(n?.error){const e=new Error(n.message);throw Object.assign(e,n.error),e}return n}function q_(n){const e=n.Expiration;if(e){const t=Math.floor((new Date(e)-Date.now())/1e3);if(t>9)return t}}function G_({meta:n,allowedMetaFields:e,querify:t=!1}){const s=e??Object.keys(n);return n?Object.fromEntries(s.filter(i=>n[i]!=null).map(i=>{const a=t?`metadata[${i}]`:i,l=String(n[i]);return[a,l]})):{}}const sW={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:(n=>(n.size||0)>100*1024*1024),retryDelays:[0,1e3,3e3,5e3]};class Ov extends IA{static VERSION=H9.version;#t;#e;requests;uploaderEvents;uploaders;constructor(e,t){super(e,{...sW,uploadPartBytes:Ov.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...t}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",this.#n(t);const s={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:t?.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:t?.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(s))this.opts[i]==null&&(this.opts[i]=s[i].bind(this));this.requests=this.opts.rateLimitedQueue??new G9(this.opts.limit),this.#t=new nW(this.requests,this.opts,this.#o,this.#i),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return this.#e}#n(e){e==null||!("endpoint"in e||"companionUrl"in e||"headers"in e||"companionHeaders"in e||"cookiesRule"in e||"companionCookiesRule"in e)||("companionUrl"in e&&!("endpoint"in e)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in e&&!("headers"in e)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in e&&!("cookiesRule"in e)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in e?this.#e=new B9(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule}):("headers"in e&&this.#d(),"cookiesRule"in e&&(this.#e.opts.companionCookiesRule=e.cookiesRule)))}setOptions(e){this.#t.setOptions(e),super.setOptions(e),this.#n(e)}resetUploaderReferences(e,t){this.uploaders[e]&&(this.uploaders[e].abort({really:t?.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}#s(e){if(!this.#e)throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${e}\` implementation.`)}createMultipartUpload(e,t){this.#s("createMultipartUpload"),Tn(t);const s=B_(this.opts.allowedMetaFields,e.meta),i=G_({meta:e.meta,allowedMetaFields:s});return this.#e.post("s3/multipart",{filename:e.name,type:e.type,metadata:i},{signal:t}).then(to)}listParts(e,{key:t,uploadId:s,signal:i},a){i??=a,this.#s("listParts"),Tn(i);const l=encodeURIComponent(t);return this.#e.get(`s3/multipart/${encodeURIComponent(s)}?key=${l}`,{signal:i}).then(to)}completeMultipartUpload(e,{key:t,uploadId:s,parts:i,signal:a},l){a??=l,this.#s("completeMultipartUpload"),Tn(a);const u=encodeURIComponent(t),d=encodeURIComponent(s);return this.#e.post(`s3/multipart/${d}/complete?key=${u}`,{parts:i.map(({ETag:h,PartNumber:f})=>({ETag:h,PartNumber:f}))},{signal:a}).then(to)}#r;async#a(e){if(Tn(e?.signal),this.#r==null){const{getTemporarySecurityCredentials:t}=this.opts;t===!0?(this.#s("getTemporarySecurityCredentials"),this.#r=this.#e.get("s3/sts",e).then(to)):this.#r=t(e),this.#r=await this.#r,setTimeout(()=>{this.#r=null},(q_(this.#r.credentials)||0)*500)}return this.#r}async createSignedURL(e,t){const s=await this.#a(t),i=q_(s.credentials)||604800,{uploadId:a,key:l,partNumber:u}=t;return{method:"PUT",expires:i,fields:{},url:`${await X9({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:i,bucketName:s.bucket,Region:s.region,Key:l??`${crypto.randomUUID()}-${e.name}`,uploadId:a,partNumber:u})}`,headers:{"Content-Type":e.type}}}signPart(e,{uploadId:t,key:s,partNumber:i,signal:a}){if(this.#s("signPart"),Tn(a),t==null||s==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const l=encodeURIComponent(s);return this.#e.get(`s3/multipart/${encodeURIComponent(t)}/${i}?key=${l}`,{signal:a}).then(to)}abortMultipartUpload(e,{key:t,uploadId:s,signal:i}){this.#s("abortMultipartUpload");const a=encodeURIComponent(t),l=encodeURIComponent(s);return this.#e.delete(`s3/multipart/${l}?key=${a}`,void 0,{signal:i}).then(to)}getUploadParameters(e,t){this.#s("getUploadParameters");const{meta:s}=e,{type:i,name:a}=s,l=B_(this.opts.allowedMetaFields,e.meta),u=G_({meta:s,allowedMetaFields:l,querify:!0}),d=new URLSearchParams({filename:a,type:i,...u});return this.#e.get(`s3/params?${d}`,t)}static async uploadPartBytes({signature:{url:e,expires:t,headers:s,method:i="PUT"},body:a,size:l=a.size,onProgress:u,onComplete:d,signal:h}){if(Tn(h),e==null)throw new Error("Cannot upload to an undefined URL");return new Promise((f,m)=>{const g=new XMLHttpRequest;g.open(i,e,!0),s&&Object.keys(s).forEach(x=>{g.setRequestHeader(x,s[x])}),g.responseType="text",typeof t=="number"&&(g.timeout=t*1e3);function b(){g.abort()}function S(){h?.removeEventListener("abort",b)}h?.addEventListener("abort",b),g.upload.addEventListener("progress",x=>{u(x)}),g.addEventListener("abort",()=>{S(),m(PP())}),g.addEventListener("timeout",()=>{S();const x=new Error("Request has expired");x.source={status:403},m(x)}),g.addEventListener("load",()=>{if(S(),g.status===403&&g.responseText.includes("<Message>Request has expired</Message>")){const C=new Error("Request has expired");C.source=g,m(C);return}if(g.status<200||g.status>=300){const C=new Error("Non 2xx");C.source=g,m(C);return}u?.({loaded:l,lengthComputable:!0});const x=g.getAllResponseHeaders().trim().split(/[\r\n]+/),w={__proto__:null};for(const C of x){const A=C.split(": "),P=A.shift(),R=A.join(": ");w[P]=R}const{etag:N,location:E}=w;if(i.toUpperCase()==="POST"&&E==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),N==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}d?.(N),f({...w,ETag:N})}),g.addEventListener("error",x=>{S();const w=new Error("Unknown error");w.source=x.target,m(w)}),g.send(a)})}#o=(e,{key:t,uploadId:s})=>{const i=this.uppy.getFile(e.id);i!=null&&this.uppy.setFileState(e.id,{s3Multipart:{...i.s3Multipart,key:t,uploadId:s}})};#i=e=>this.uppy.getFile(e.id)||e;#c(e){return new Promise((t,s)=>{const i=(h,f)=>{const m=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",m,{uploadStarted:m.progress.uploadStarted??0,bytesUploaded:h,bytesTotal:f})},a=h=>{this.uppy.log(h),this.uppy.emit("upload-error",e,h),this.resetUploaderReferences(e.id),s(h)},l=h=>{const f={body:{...h},status:200,uploadURL:h.location};this.resetUploaderReferences(e.id),this.uppy.emit("upload-success",this.#i(e),f),h.location&&this.uppy.log(`Download ${e.name} from ${h.location}`),t(void 0)},u=new eW(e.data,{companionComm:this.#t,log:(...h)=>this.uppy.log(...h),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:i,onError:a,onSuccess:l,onPartComplete:h=>{this.uppy.emit("s3-multipart:part-uploaded",this.#i(e),h)},file:e,shouldUseMultipart:this.opts.shouldUseMultipart,...e.s3Multipart});this.uploaders[e.id]=u;const d=new z9(this.uppy);this.uploaderEvents[e.id]=d,d.onFileRemove(e.id,h=>{u.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${h} was removed`)}),d.onCancelAll(e.id,()=>{u.abort(),this.resetUploaderReferences(e.id,{abort:!0}),t(`upload ${e.id} was canceled`)}),d.onFilePause(e.id,h=>{h?u.pause():u.start()}),d.onPauseAll(e.id,()=>{u.pause()}),d.onResumeAll(e.id,()=>{u.start()}),u.start()})}#p(e){return{...e.remote?.body,protocol:"s3-multipart",size:e.data.size,metadata:e.meta}}#u=async e=>{if(e.length===0)return;const t=this.uppy.getFilesByIds(e),s=U9(t),i=$9(s);this.uppy.emit("upload-start",i);const a=s.map(u=>{if(u.isRemote){const d=()=>this.requests;this.#l(!1);const h=new AbortController,f=g=>{g.id===u.id&&h.abort()};this.uppy.on("file-removed",f);const m=this.uppy.getRequestClientForFile(u).uploadRemoteFile(u,this.#p(u),{signal:h.signal,getQueue:d});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",f)},{priority:-1})(),m}return this.#c(u)}),l=await Promise.allSettled(a);return this.#l(!0),l};#d=()=>{this.#e?.setCompanionHeaders(this.opts.headers)};#l=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,resumableUploads:e}})};#h=()=>{this.#l(!0)};install(){this.#l(!0),this.uppy.addPreProcessor(this.#d),this.uppy.addUploader(this.#u),this.uppy.on("cancel-all",this.#h)}uninstall(){this.uppy.removePreProcessor(this.#d),this.uppy.removeUploader(this.#u),this.uppy.off("cancel-all",this.#h)}}function rW({maxNumberOfFiles:n=1,maxFileSize:e=10485760,onGetUploadParameters:t,onComplete:s,buttonClassName:i,children:a}){const[l,u]=v.useState(!1),[d]=v.useState(()=>new jv({restrictions:{maxNumberOfFiles:n,maxFileSize:e,allowedFileTypes:["audio/*",".mp3",".wav",".m4a",".ogg",".flac"]},autoProceed:!1}).use(Ov,{shouldUseMultipart:!1,getUploadParameters:t}).on("complete",h=>{s?.(h),u(!1)}));return r.jsxs("div",{children:[r.jsx(ne,{onClick:()=>u(!0),className:i,children:a}),r.jsx(f9,{uppy:d,open:l,onRequestClose:()=>u(!1),proudlyDisplayPoweredByUppy:!1,note:"Upload audio files (MP3, WAV, M4A, OGG, FLAC) up to 50MB"})]})}function iW(){const[n,e]=v.useState([{id:"1",type:"ai",content:`Hello! I'm your AI assistant for CodedSwitch Studio. I can help you with:
 Code translation and optimization
 Music composition suggestions
 Beat pattern generation
 Vulnerability scanning insights
 Lyric writing assistance
 Song analysis and insights

Upload a song below to get AI-powered analysis, or ask me anything!`,timestamp:new Date(Date.now()-12e4)}]),[t,s]=v.useState(null),[i,a]=v.useState(!1),[l,u]=v.useState(null),[d,h]=v.useState({}),[f,m]=v.useState(0),[g,b]=v.useState(0),[S,x]=v.useState("grok"),{messages:w,addMessage:N}=z$(),E=v.useContext(Ca);v.useEffect(()=>{if(w.length>0){const M=w[w.length-1];e(W=>{if(!W.some(de=>de.id===M.id)){const de={id:M.id,type:"ai",content:M.content,timestamp:M.timestamp};return[...W,de]}return W})}},[w]);const[C,A]=v.useState(""),{toast:P}=yn(),{initialize:R,isInitialized:T}=tr(),{data:j,isLoading:O}=Ti({queryKey:["/api/songs"],initialData:[]}),I=gt({mutationFn:async M=>(await ot("POST","/api/songs/upload",M)).json(),onSuccess:M=>{Dy.invalidateQueries({queryKey:["/api/songs"]}),h({}),P({title:"Song Uploaded",description:`${M.name} has been added to your library!`}),Q(M)},onError:()=>{P({title:"Upload Failed",description:"Failed to save your song. Please try again.",variant:"destructive"})}}),D=gt({mutationFn:async M=>(await ot("POST","/api/assistant/chat",M)).json(),onSuccess:M=>{const W={id:Date.now().toString(),type:"ai",content:M.response,timestamp:new Date};e(J=>[...J,W])},onError:()=>{P({title:"Failed to Send Message",description:"Unable to get AI response. Please try again.",variant:"destructive"})}}),B=()=>{if(!C.trim())return;const M={id:Date.now().toString(),type:"user",content:C,timestamp:new Date};e(W=>[...W,M]),D.mutate({message:C,context:"CodeTune Studio",aiProvider:S}),A("")},H=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),B())},z=async()=>{try{const M=await ot("POST","/api/objects/upload",{});if(!M.ok){const J=await M.json().catch(()=>({error:"Unknown error",temporary:!1}));if(console.error("Upload URL generation failed:",J),M.status===503||J.temporary){const de=J.retryAfter||300,ce=Math.ceil(de/60);throw P({title:"Upload Service Temporarily Down",description:`The file upload service is temporarily unavailable. Please try again in ${ce} minute${ce>1?"s":""}.`,variant:"destructive",duration:8e3}),new Error(`Service temporarily unavailable (retry in ${ce} minutes)`)}throw P({title:"Upload Service Error",description:"Unable to connect to upload service. Please refresh the page and try again.",variant:"destructive"}),new Error(J.error||"Failed to generate upload URL")}const W=await M.json();if(!W.uploadURL)throw P({title:"Upload Configuration Error",description:"Server did not provide upload URL. Please contact support if this persists.",variant:"destructive"}),new Error("No upload URL received from server");return console.log(" Upload URL received successfully"),{method:"PUT",url:W.uploadURL}}catch(M){throw console.error("Upload parameters error:",M),M instanceof Error&&M.message.includes("temporarily unavailable")||P({title:"Upload Setup Failed",description:"Unable to initialize file upload. Please refresh and try again.",variant:"destructive"}),M}},G=M=>{if(console.log(" Upload complete result:",M),M.successful&&M.successful.length>0){const W=M.successful[0],J=W.uploadURL;console.log(" Uploaded file details:",{name:W.name,size:W.size,type:W.type,uploadURL:J});const de=W.name||`Uploaded Song ${Date.now()}`,ce=de.split(".").pop()?.toLowerCase()||"unknown",pe=W.size||0,F=W.type||"";let L=ce;F.includes("audio/")&&(L=F.split("/")[1]||ce);const re={name:de,fileSize:pe,format:L==="unknown"?F||"audio":L,mimeType:F};if(console.log(" Processed file info:",re),h(re),J){const oe={songURL:J,name:re.name,fileSize:re.fileSize,format:re.format,mimeType:re.mimeType};console.log(" Sending song data:",oe),I.mutate(oe)}}},Q=async M=>{try{const J=await(await ot("POST","/api/songs/analyze",{songId:M.id,songURL:M.originalUrl,songName:M.name})).json();P({title:"Song Analysis Complete",description:`AI analyzed ${M.name} successfully!`}),E.setCurrentCodeMusic?.({...J,source:"uploaded_song",originalSong:M});const de=` **Song Analysis Complete: ${M.name}**

 **Musical Properties:**
 BPM: ${J.estimatedBPM}
 Key: ${J.keySignature} 
 Genre: ${J.genre}
 Mood: ${J.mood}

 **Song Structure:**
${Object.entries(J.structure).map(([pe,F])=>` ${pe}: ${F}`).join(`
`)}

 **Instruments Detected:**
${J.instruments.join(", ")}

 **AI Analysis Notes:**
${J.analysis_notes}

This analysis has been saved and can be used with other studio tools for remixing, layering, and composition inspiration!`,ce={id:Date.now().toString(),type:"ai",content:de,timestamp:new Date};e(pe=>[...pe,ce])}catch{P({title:"Analysis Failed",description:"Could not analyze the song. Please try again.",variant:"destructive"})}},X=async M=>{l&&(l.pause(),l.src="");try{const W=M.accessibleUrl;console.log(" Using accessible URL:",W);const J=new Audio;J.addEventListener("error",de=>{console.error("Audio playback error:",de),P({title:"Playback Error",description:`Cannot play ${M.name}`,variant:"destructive"}),a(!1),s(null)}),J.addEventListener("loadedmetadata",()=>{console.log(` Song loaded: ${M.name}, duration: ${J.duration}s`),b(J.duration)}),J.addEventListener("timeupdate",()=>{m(J.currentTime)}),J.addEventListener("ended",()=>{a(!1),s(null),m(0)}),J.src=W,J.load(),await new Promise((de,ce)=>{const pe=()=>{J.removeEventListener("canplaythrough",pe),J.removeEventListener("error",F),de(void 0)},F=L=>{J.removeEventListener("canplaythrough",pe),J.removeEventListener("error",F),ce(new Error("Audio loading failed"))};J.addEventListener("canplaythrough",pe),J.addEventListener("error",F)}),await J.play(),u(J),s(M),a(!0),P({title:"Now Playing",description:`Playing ${M.name}`})}catch(W){console.error("Audio playback error:",W instanceof Error?W.message:"Unknown error"),P({title:"Playback Failed",description:`Cannot play ${M.name}. The file may be corrupted or unsupported.`,variant:"destructive"}),a(!1),s(null)}},q=M=>{const W=Math.floor(M/60),J=Math.floor(M%60);return`${W}:${J.toString().padStart(2,"0")}`},U=M=>M<1024?M+" B":M<1024*1024?Math.round(M/1024)+" KB":Math.round(M/(1024*1024))+" MB",Y=[{icon:"fas fa-magic",label:"Generate Beat Pattern",action:"Generate a hip-hop beat pattern for me"},{icon:"fas fa-code",label:"Optimize My Code",action:"Help me optimize this JavaScript code for better performance"},{icon:"fas fa-music",label:"Compose Melody",action:"Compose a melody in C major scale"},{icon:"fas fa-shield-alt",label:"Security Analysis",action:"Analyze my code for security vulnerabilities"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Music & Code Assistant"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(ne,{onClick:()=>{R(),P({title:"Audio Initialized",description:"The audio engine has started."})},className:"bg-studio-accent hover:bg-blue-500",disabled:T,children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),T?"Audio Ready":"Start Audio"]})})]}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(_i,{className:"w-5 h-5"}),"Upload Song for AI Analysis"]}),r.jsx("div",{className:"text-xs text-gray-400",children:"Supported: MP3, WAV, M4A, OGG (Max 50MB)"})]}),r.jsx("div",{className:"mb-3",children:r.jsx(Rc,{value:S,onValueChange:x})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(rW,{maxNumberOfFiles:1,maxFileSize:50485760,onGetUploadParameters:z,onComplete:G,buttonClassName:"bg-studio-accent hover:bg-blue-500",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_i,{className:"w-4 h-4"}),"Upload Audio File"]})}),I.isPending&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full"}),r.jsx("span",{className:"text-sm",children:"Processing upload..."})]})]})]})]}),r.jsx(_s,{className:"flex-1 p-6",children:r.jsxs("div",{className:"flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(_s,{className:"flex-1 bg-studio-panel border border-gray-600 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"space-y-4",children:[n.map(M=>r.jsxs("div",{className:`flex space-x-3 ${M.type==="user"?"justify-end":""}`,children:[M.type==="ai"&&r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-studio-accent to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:"fas fa-robot text-white text-sm"})}),r.jsxs("div",{className:`flex-1 ${M.type==="user"?"max-w-md":""}`,children:[r.jsx("div",{className:`rounded-lg p-3 ${M.type==="user"?"bg-studio-accent text-white":"bg-gray-700"}`,children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.content})}),r.jsxs("div",{className:`text-xs text-gray-400 mt-1 ${M.type==="user"?"text-right":""}`,children:[M.type==="ai"?"AI Assistant":"You","  ",M.timestamp.toLocaleTimeString()]})]}),M.type==="user"&&r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-xs font-bold text-white",children:"CT"})})]},M.id)),D.isPending&&r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-studio-accent to-blue-500 rounded-full flex items-center justify-center",children:r.jsx("i",{className:"fas fa-robot text-white text-sm"})}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-3",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(vt,{value:C,onChange:M=>A(M.target.value),onKeyDown:H,placeholder:"Ask me anything about music production or coding...",className:"bg-studio-panel border-gray-600 pr-12",disabled:D.isPending}),r.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-studio-accent",children:r.jsx("i",{className:"fas fa-microphone"})})]}),r.jsx(ne,{onClick:B,disabled:D.isPending||!C.trim(),className:"bg-studio-accent hover:bg-blue-500",children:r.jsx("i",{className:"fas fa-paper-plane"})})]})]}),j&&j.length>0&&r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsx(Ee,{className:"pb-3",children:r.jsxs(Ae,{className:"text-lg flex items-center gap-2",children:[r.jsx(Mt,{className:"w-5 h-5"}),"Uploaded Songs (",j.length,")"]})}),r.jsx(je,{className:"space-y-3",children:j.map(M=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-600",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-sm truncate",children:M.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[r.jsx("span",{children:U(M.fileSize)}),r.jsx("span",{className:"capitalize",children:M.format}),M.duration&&r.jsx("span",{children:q(M.duration)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ne,{onClick:()=>X(M),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-600",disabled:t?.id===M.id&&i,children:t?.id===M.id&&i?r.jsx(hc,{className:"w-3 h-3"}):r.jsx(pn,{className:"w-3 h-3"})}),r.jsx(ne,{onClick:()=>Q(M),size:"sm",className:"h-8 px-3 bg-studio-accent hover:bg-blue-500",children:"Analyze"})]})]},M.id))})]}),r.jsxs("div",{className:"w-80 space-y-4",children:[r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Quick Actions"}),r.jsx("div",{className:"space-y-2",children:Y.map((M,W)=>r.jsxs("button",{onClick:()=>{A(M.action),setTimeout(()=>B(),100)},className:"w-full bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-sm text-left transition-colors",children:[r.jsx("i",{className:`${M.icon} mr-2 text-studio-accent`}),M.label]},W))})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Recent Suggestions"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Jazz Chord Progression"}),r.jsx("div",{className:"text-gray-400",children:"Cmaj7 - Am7 - Dm7 - G7"})]}),r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Code Refactor"}),r.jsx("div",{className:"text-gray-400",children:"Use array.map() instead of for loop"})]}),r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsx("div",{className:"font-medium text-studio-accent",children:"Drum Fill"}),r.jsx("div",{className:"text-gray-400",children:"32nd note snare roll at bar end"})]})]})]})]})]})})]})}function aW(){const[n,e]=v.useState("javascript"),[t,s]=v.useState("grok"),[i,a]=v.useState(`// Example vulnerable code
const express = require('express');
const app = express();

app.get('/user/:id', (req, res) => {
    const userId = req.params.id;
    // SQL Injection vulnerability
    const query = \`SELECT * FROM users WHERE id = '\${userId}'\`;
    
    // XSS vulnerability
    res.send(\`<h1>Welcome user \${userId}</h1>\`);
});

// Hardcoded credentials
const API_KEY = "sk-1234567890abcdef";

app.listen(3000);`),[l,u]=v.useState(null),{toast:d}=yn(),h=gt({mutationFn:async x=>(await ot("POST","/api/security/scan",x)).json(),onSuccess:x=>{u(x.results),d({title:"Scan Complete",description:`Found ${x.results.vulnerabilities.length} potential issues.`})},onError:()=>{d({title:"Scan Failed",description:"Failed to scan code for vulnerabilities. Please try again.",variant:"destructive"})}}),{data:f}=Ti({queryKey:["/api/security/scans"]}),m=()=>{if(!i.trim()){d({title:"No Code Provided",description:"Please enter some code to scan.",variant:"destructive"});return}h.mutate({code:i,language:n,aiProvider:t})},g=x=>{switch(x){case"critical":return"bg-red-600";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},b=x=>{switch(x){case"critical":return"fas fa-skull";case"high":return"fas fa-exclamation-triangle";case"medium":return"fas fa-exclamation";case"low":return"fas fa-info-circle";default:return"fas fa-question"}},S=[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"php",label:"PHP"},{value:"cpp",label:"C++"}];return r.jsxs("div",{className:"h-full p-6 flex flex-col space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Code Vulnerability Scanner"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Rc,{value:t,onValueChange:s}),r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:S.map(x=>r.jsx(le,{value:x.value,children:x.label},x.value))})]}),r.jsx(ne,{onClick:m,disabled:h.isPending,className:"bg-studio-accent hover:bg-blue-500",children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-search mr-2"}),"Scan Code"]})}),r.jsxs(ne,{variant:"secondary",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx("i",{className:"fas fa-download mr-2"}),"Export Report"]})]})]}),l&&r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-red-400",children:l.vulnerabilities.filter(x=>x.severity==="critical").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Critical"})]}),r.jsx("i",{className:"fas fa-exclamation-triangle text-red-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-400",children:l.vulnerabilities.filter(x=>x.severity==="high").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"High"})]}),r.jsx("i",{className:"fas fa-exclamation-circle text-orange-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:l.vulnerabilities.filter(x=>x.severity==="medium").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Medium"})]}),r.jsx("i",{className:"fas fa-exclamation text-yellow-400 text-xl"})]})}),r.jsx("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-400",children:l.vulnerabilities.filter(x=>x.severity==="low").length}),r.jsx("div",{className:"text-sm text-gray-400",children:"Low"})]}),r.jsx("i",{className:"fas fa-info-circle text-green-400 text-xl"})]})})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-6",children:[r.jsxs("div",{className:"col-span-2 flex flex-col space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Code to Scan"}),r.jsx(cs,{value:i,onChange:x=>a(x.target.value),className:"flex-1 bg-studio-panel border-gray-600 font-mono text-sm resize-none",placeholder:"Paste your code here to scan for vulnerabilities..."})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-4",children:"Detected Vulnerabilities"}),r.jsx(_s,{className:"h-96",children:l?r.jsx("div",{className:"space-y-3",children:l.vulnerabilities.map((x,w)=>r.jsxs("div",{className:`vulnerability-item vulnerability-${x.severity} rounded-lg p-3`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:`${b(x.severity)} text-white`}),r.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${g(x.severity)} text-white`,children:x.severity.toUpperCase()})]}),r.jsxs("span",{className:"text-xs text-gray-300",children:["Line ",x.line]})]}),r.jsx("h4",{className:"font-medium text-white mb-1",children:x.type}),r.jsx("p",{className:"text-sm text-gray-200 mb-2",children:x.description}),r.jsx("p",{className:"text-xs text-gray-300",children:x.recommendation})]},w))}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"fas fa-shield-alt text-4xl mb-4"}),r.jsx("p",{children:"Scan results will appear here"})]})})})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-4",children:"AI Recommendations"}),r.jsxs("div",{className:"space-y-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded",children:[r.jsx("div",{className:"font-medium text-red-400 mb-2",children:"Immediate Action Required"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Implement parameterized queries"}),r.jsx("li",{children:" Add output escaping for XSS protection"}),r.jsx("li",{children:" Remove hardcoded credentials"})]})]}),r.jsxs("div",{className:"p-3 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded",children:[r.jsx("div",{className:"font-medium text-yellow-400 mb-2",children:"Security Improvements"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Upgrade to bcrypt for passwords"}),r.jsx("li",{children:" Implement CSRF protection"}),r.jsx("li",{children:" Add rate limiting"})]})]}),r.jsxs("div",{className:"p-3 bg-blue-900 bg-opacity-30 border border-blue-600 rounded",children:[r.jsx("div",{className:"font-medium text-blue-400 mb-2",children:"Best Practices"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:" Enable security headers"}),r.jsx("li",{children:" Regular dependency updates"}),r.jsx("li",{children:" Implement logging & monitoring"})]})]}),r.jsxs(ne,{className:"w-full bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"Auto-Fix Issues"]})]})]})]})]})}function oW(){const n=v.useContext(Ca),[e,t]=v.useState("My Awesome Track"),[s,i]=v.useState(`[Verse 1]
Started from the bottom of the code base,
Debugging through the night at my own pace,
Functions calling functions in this digital space,
Building something greater than the human race.

[Pre-Chorus]
Binary dreams and electric thoughts,
Creating melodies from the code I've wrought.

[Chorus]
We're translating hearts to algorithms,
Making music from the syntax we're writing,
Every loop and every variable's a rhythm,
In this digital symphony we're designing.

[Verse 2]
Type here or use AI generation...`);v.useEffect(()=>{n.setCurrentLyrics(s)},[s,n]),v.useEffect(()=>{n.currentLyrics&&n.currentLyrics!==s&&i(n.currentLyrics)},[n.currentLyrics]);const[a,l]=v.useState("hip-hop"),[u,d]=v.useState("ABAB"),[h,f]=v.useState("technology, coding"),[m,g]=v.useState("upbeat"),[b,S]=v.useState(""),[x,w]=v.useState([]),[N,E]=v.useState(!1),[C,A]=v.useState([5]),[P,R]=v.useState([5]),[T,j]=v.useState("grok");v.useEffect(()=>{const F=n.currentPattern&&Object.keys(n.currentPattern).length>0&&Object.values(n.currentPattern).some(we=>Array.isArray(we)&&we.some(te=>te===!0)),L=n.currentMelody&&n.currentMelody.length>0,re=n.currentCodeMusic&&Object.keys(n.currentCodeMusic).length>0;let oe=!1;try{const we=localStorage.getItem("generatedMusicData");if(we){const te=JSON.parse(we);oe=te?.beatPattern&&Object.values(te.beatPattern).some(fe=>Array.isArray(fe)&&fe.some(ve=>ve===!0))}}catch{}E(!!(F||L||re||oe))},[n.currentPattern,n.currentMelody,n.currentCodeMusic]);const{toast:O}=yn(),{initialize:I,isInitialized:D}=tr(),B=gt({mutationFn:async F=>{const L=["hip-hop","pop","rock","country","R&B","folk","reggae","electronic","jazz","blues"],re=["upbeat","melancholic","energetic","romantic","rebellious","peaceful","intense","nostalgic"],oe=["love","freedom","success","struggle","dreams","technology","nature","friendship"],we=L[Math.floor(Math.random()*L.length)],te=re[Math.floor(Math.random()*re.length)],fe=oe[Math.floor(Math.random()*oe.length)];return(await ot("POST","/api/lyrics/generate",{theme:`${F.theme}, ${fe}`,genre:we,mood:te,complexity:F.complexity,aiProvider:F.aiProvider})).json()},onSuccess:F=>{i(F.content||F),t(`${a} Song ${Date.now()}`),n.setCurrentLyrics(F.content||F),O({title:"Lyrics Generated",description:"AI has created unique lyrics for you."})},onError:()=>{O({title:"Generation Failed",description:"Failed to generate lyrics. Please try again.",variant:"destructive"})}});gt({mutationFn:async F=>(await ot("POST","/api/lyrics",F)).json(),onSuccess:()=>{n.setCurrentLyrics(s),O({title:"Lyrics Saved",description:"Your lyrics have been saved successfully."})}});const H=gt({mutationFn:async F=>(await ot("POST","/api/music/generate-from-lyrics",F)).json(),onSuccess:F=>{console.log(" Music generated from lyrics:",F),F.beatPattern&&(console.log(" Setting beat pattern:",F.beatPattern),n.setCurrentPattern(F.beatPattern)),F.melody&&(console.log(" Setting melody:",F.melody),n.setCurrentMelody(F.melody)),F.codeMusic&&(console.log(" Setting code music:",F.codeMusic),n.setCurrentCodeMusic(F.codeMusic)),E(!0),localStorage.setItem("generatedMusicData",JSON.stringify({beatPattern:F.beatPattern,melody:F.melody,codeMusic:F.codeMusic,timestamp:Date.now()})),O({title:"Music Generated from Lyrics",description:"Beat pattern and melody created! Check the Beat Maker or Melody Composer tabs to see and edit your generated music."})},onError:()=>{O({title:"Music Generation Failed",description:"Failed to generate music from lyrics. Please try again.",variant:"destructive"})}}),z=gt({mutationFn:async F=>(await ot("POST","/api/master",F)).json(),onSuccess:F=>{O({title:"Song Mastered",description:"Your song has been professionally mastered and optimized!"}),F.masteredSettings&&console.log("Mastered settings applied:",F.masteredSettings)},onError:()=>{O({title:"Mastering Failed",description:"Failed to master the song. Please try again.",variant:"destructive"})}}),G=gt({mutationFn:async F=>(await ot("POST","/api/lyrics/rhymes",F)).json(),onSuccess:F=>{const L=F.rhymes.map(re=>({word:re,type:"perfect"}));w(L)}}),Q=gt({mutationFn:async F=>(await ot("POST","/api/lyrics/generate-beat",F)).json(),onSuccess:F=>{O({title:"Beat Pattern Generated",description:"AI has analyzed your lyrics and generated a matching beat pattern."}),console.log("Generated beat pattern:",F.beatPattern)},onError:()=>{O({title:"Beat Generation Failed",description:"Failed to generate beat from lyrics. Please try again.",variant:"destructive"})}}),{data:X}=Ti({queryKey:["/api/lyrics"]}),q=()=>{if(!h.trim()){O({title:"No Theme Provided",description:"Please enter a theme for the lyrics.",variant:"destructive"});return}B.mutate({theme:h,genre:a,mood:m,aiProvider:T,complexity:C[0]})},U=()=>{b.trim()&&G.mutate({word:b.trim()})},Y=F=>{const L=document.querySelector("textarea");if(L){const re=L.selectionStart,oe=L.selectionEnd,we=s.substring(0,re)+F+s.substring(oe);i(we),setTimeout(()=>{L.focus(),L.setSelectionRange(re+F.length,re+F.length)},0)}},M=F=>{const L=document.querySelector("textarea");if(L){const re=s.indexOf(`[${F.charAt(0).toUpperCase()+F.slice(1)}]`);re!==-1&&(L.focus(),L.setSelectionRange(re,re),L.scrollTop=re/s.length*L.scrollHeight)}},W=s.split(/\s+/).filter(F=>F.length>0).length,J=s.split(`
`).length,de=[{value:"hip-hop",label:"Hip-Hop"},{value:"pop",label:"Pop"},{value:"rock",label:"Rock"},{value:"r&b",label:"R&B"},{value:"country",label:"Country"},{value:"electronic",label:"Electronic"}],ce=[{value:"upbeat",label:"Upbeat"},{value:"melancholic",label:"Melancholic"},{value:"energetic",label:"Energetic"},{value:"romantic",label:"Romantic"},{value:"introspective",label:"Introspective"}],pe=[{value:"AABB",label:"AABB (Couplets)"},{value:"ABAB",label:"ABAB (Alternating)"},{value:"ABCB",label:"ABCB (Ballad)"},{value:"FREE",label:"Free Verse"}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Lyric Lab"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(ne,{onClick:()=>{I(),O({title:"Audio Initialized",description:"The audio engine has started."})},disabled:D,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),D?"Audio Ready":"Start Audio"]})})]})}),r.jsx(_s,{className:"flex-1 p-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"col-span-2 bg-studio-panel border border-gray-600 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-700 px-4 py-2 border-b border-gray-600 flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:"Lyric Editor"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[r.jsxs("span",{children:["Words: ",W]}),r.jsxs("span",{children:["Lines: ",J]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ne,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-undo"})}),r.jsx(ne,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-redo"})}),r.jsx(ne,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:r.jsx("i",{className:"fas fa-spell-check"})})]})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx(vt,{value:e,onChange:F=>t(F.target.value),placeholder:"Song Title",className:"mb-4 bg-gray-700 border-gray-600 font-semibold text-lg"}),r.jsx(cs,{value:s,onChange:F=>i(F.target.value),className:"h-96 bg-transparent border-none resize-none font-mono text-sm leading-relaxed focus:outline-none",placeholder:"Start writing your lyrics here..."})]}),x.length>0&&r.jsxs("div",{className:"p-4 bg-gray-800 border-t border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Rhyme Suggestions"}),r.jsxs("span",{className:"text-xs text-gray-400",children:['For: "',b,'"']})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:x.slice(0,8).map((F,L)=>r.jsx("button",{onClick:()=>Y(F.word),className:"px-2 py-1 bg-studio-accent bg-opacity-20 text-studio-accent rounded text-xs hover:bg-opacity-30 transition-colors",children:F.word},L))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Song Structure"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>M("intro"),children:[r.jsx("span",{children:"Intro"}),r.jsx("span",{className:"text-gray-400",children:"8 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-studio-accent bg-opacity-20 rounded cursor-pointer",onClick:()=>M("verse 1"),children:[r.jsx("span",{children:"Verse 1"}),r.jsx("span",{className:"text-gray-400",children:"16 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>M("pre-chorus"),children:[r.jsx("span",{children:"Pre-Chorus"}),r.jsx("span",{className:"text-gray-400",children:"8 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600",onClick:()=>M("chorus"),children:[r.jsx("span",{children:"Chorus"}),r.jsx("span",{className:"text-gray-400",children:"16 bars"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600 rounded cursor-pointer hover:bg-gray-500",children:[r.jsx("span",{className:"text-gray-400",children:"+ Add Section"}),r.jsx("i",{className:"fas fa-plus text-gray-400"})]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Rhyme Scheme"}),r.jsx("div",{className:"space-y-3",children:pe.map(F=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",name:"rhyme",value:F.value,checked:u===F.value,onChange:L=>d(L.target.value),className:"text-studio-accent"}),r.jsx("label",{className:"text-sm cursor-pointer",onClick:()=>d(F.value),children:F.label})]},F.value))})]}),N&&r.jsxs("div",{className:"bg-green-900 bg-opacity-30 border border-green-500 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-green-400",children:"Generated Music Ready"}),r.jsx("i",{className:"fas fa-check-circle text-green-400"})]}),r.jsx("p",{className:"text-sm text-green-300 mb-3",children:"Your lyrics have been transformed into music! Check these tabs:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(ne,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToTab",{detail:"beatmaker"})),size:"sm",className:"bg-green-600 hover:bg-green-500 text-xs",children:[r.jsx("i",{className:"fas fa-drum mr-1"}),"View Beat"]}),r.jsxs(ne,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToTab",{detail:"melody"})),size:"sm",className:"bg-blue-600 hover:bg-blue-500 text-xs",children:[r.jsx("i",{className:"fas fa-music mr-1"}),"View Melody"]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"AI Generation"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(vt,{value:h,onChange:F=>f(F.target.value),placeholder:"Theme or concept...",className:"bg-gray-700 border-gray-600"}),r.jsxs(Ye,{value:a,onValueChange:l,children:[r.jsx(He,{children:r.jsx(Xe,{placeholder:"Select genre..."})}),r.jsx(Ke,{children:de.map(F=>r.jsx(le,{value:F.value,children:F.label},F.value))})]}),r.jsxs(Ye,{value:m,onValueChange:g,children:[r.jsx(He,{children:r.jsx(Xe,{placeholder:"Select mood..."})}),r.jsx(Ke,{children:ce.map(F=>r.jsx(le,{value:F.value,children:F.label},F.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{children:["Lyric Complexity: ",C[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(me,{value:C,onValueChange:A,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{children:["Beat Complexity: ",P[0],"/10"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Simple"}),r.jsx(me,{value:P,onValueChange:R,max:10,min:1,step:1,className:"flex-1"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Complex"})]})]}),r.jsx("div",{className:"mb-4",children:r.jsx(Rc,{value:T,onValueChange:j})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ne,{onClick:q,disabled:B.isPending,className:"w-full bg-studio-accent hover:bg-blue-500",children:B.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"AI Generate Lyrics"]})}),r.jsx(ne,{onClick:()=>H.mutate({lyrics:s,genre:a,mood:m,title:e,complexity:P[0]}),disabled:H.isPending||!s.trim(),className:"w-full bg-purple-600 hover:bg-purple-500",children:H.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Creating Music..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-music mr-2"}),"Generate Music from Lyrics"]})}),r.jsx(ne,{onClick:()=>z.mutate({pattern:n.currentPattern,melody:n.currentMelody,lyrics:n.currentLyrics||s,codeMusic:n.currentCodeMusic,bpm:n.bpm,genre:a}),disabled:z.isPending||!n.currentPattern&&!n.currentMelody,className:"w-full bg-orange-600 hover:bg-orange-500",children:z.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Mastering..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-sliders-h mr-2"}),"Master Full Song"]})})]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Rhyme Dictionary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(vt,{value:b,onChange:F=>S(F.target.value),placeholder:"Enter word to find rhymes...",className:"bg-gray-700 border-gray-600",onKeyDown:F=>F.key==="Enter"&&U()}),r.jsx(ne,{onClick:U,disabled:G.isPending,size:"sm",className:"bg-studio-accent hover:bg-blue-500",children:r.jsx("i",{className:"fas fa-search"})})]}),G.isPending&&r.jsx("div",{className:"text-center py-4",children:r.jsx("i",{className:"fas fa-spinner animate-spin text-studio-accent"})})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Lyric Analysis"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tempo Suggestion:"}),r.jsx("span",{className:"text-studio-accent",children:a==="hip-hop"?"80-90 BPM":a==="pop"?"120-130 BPM":a==="rock"?"110-140 BPM":a==="r&b"?"70-100 BPM":a==="electronic"?"128-140 BPM":"90-120 BPM"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Syllable Density:"}),r.jsxs("span",{className:"text-studio-accent",children:[Math.round(s.split(/\s+/).length/J*10)/10," words/line"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Rhythm Style:"}),r.jsx("span",{className:"text-studio-accent",children:W/J>8?"Fast Flow":W/J>5?"Medium Flow":"Slow Flow"})]}),r.jsxs(ne,{onClick:()=>Q.mutate({lyrics:s,genre:a}),disabled:Q.isPending||!s.trim(),className:"w-full bg-green-600 hover:bg-green-500",size:"sm",children:[r.jsx("i",{className:"fas fa-drum mr-2"}),"Analyze & Generate Beat"]})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Word Bank"}),r.jsx("div",{className:"space-y-2 text-xs max-h-32 overflow-y-auto",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:["algorithm","digital","syntax","binary","electric","function","variable","execute"].map(F=>r.jsx("button",{onClick:()=>Y(F),className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600 cursor-pointer transition-colors",children:F},F))})})]})]})]})})]})}function lW(){const{toast:n}=yn(),{playDrumSound:e,initialize:t,isInitialized:s}=tr(),[i,a]=v.useState("full-song"),[l,u]=v.useState(""),[d,h]=v.useState({genre:"pop",mood:"uplifting",duration:180,style:"modern",instruments:["piano","guitar","bass","drums"],vocals:!0,bpm:120,key:"C Major"}),[f,m]=v.useState(""),[g,b]=v.useState({style:"pop",lyrics:"",melody:!0,harmonies:!0,adLibs:!1}),[S,x]=v.useState(""),[w,N]=v.useState({genre:"pop",energy:"medium",instruments:["piano","guitar","bass","drums"],complexity:5}),[E,C]=v.useState("pop"),[A,P]=v.useState(["rock"]),[R,T]=v.useState(""),[j,O]=v.useState(""),[I,D]=v.useState("pop"),[B,H]=v.useState("uplifting"),[z,G]=v.useState(""),[Q,X]=v.useState("javascript"),[q,U]=v.useState("algorithmic"),[Y,M]=v.useState(null),W=gt({mutationFn:async({code:se,language:at,musicStyle:ln})=>await ot("POST","/api/audio/code-to-music",{code:se,language:at,musicStyle:ln}),onSuccess:se=>{n({title:"Code Translated to Music!",description:se.professional?"Professional analysis complete":"AI analysis complete - deploy cloud for .wav generation"})},onError:se=>{n({title:"Translation Failed",description:se.message,variant:"destructive"})}}),[J,de]=v.useState(null),[ce,pe]=v.useState(null),[F,L]=v.useState(null),[re,oe]=v.useState(null),[we,te]=v.useState(!1),[fe,ve]=v.useState(""),[he,Ce]=v.useState("rhymes"),Le=gt({mutationFn:async se=>{const ln=await(await ot("POST","/api/audio/generate-song",se)).json();return console.log(" Parsed API response:",ln),ln},onSuccess:se=>{console.log(" Setting generated song:",se);const at=se.song||se;de(at),n({title:"AI Song Generated",description:"Your complete song with AI beat and melody is ready!"})},onError:se=>{n({title:"Generation Failed",description:se.message||"Failed to generate AI song",variant:"destructive"})}}),ze=gt({mutationFn:async se=>await(await ot("POST","/api/beats/generate",se)).json(),onSuccess:se=>{L(se),n({title:"AI Beat Generated",description:"Your unique AI beat is ready to use!"})},onError:se=>{n({title:"Beat Generation Failed",description:se.message||"Failed to generate AI beat",variant:"destructive"})}}),qe=gt({mutationFn:async se=>await(await ot("POST","/api/melodies/generate",se)).json(),onSuccess:se=>{n({title:"AI Melody Generated",description:"Your AI-enhanced melody is ready!"})},onError:se=>{n({title:"Melody Generation Failed",description:se.message||"Failed to generate AI melody",variant:"destructive"})}});gt({mutationFn:se=>ot("POST","/api/audio/generate-song",se),onSuccess:se=>{de(se.song),n({title:"Professional Song Generated! ",description:`Studio-quality ${se.song?.metadata?.duration||180}s song created successfully`})},onError:se=>{n({title:"Generation Failed",description:se.response?.data?.error||"Failed to generate professional song",variant:"destructive"})}});const et=gt({mutationFn:se=>ot("POST","/api/audio/add-vocals",se),onSuccess:se=>{n({title:"Vocals Added Successfully! ",description:"Professional vocal arrangement layered onto instrumental"})},onError:se=>{n({title:"Vocal Addition Failed",description:se.response?.data?.error||"Failed to add vocals",variant:"destructive"})}}),ke=gt({mutationFn:async se=>await ot("POST","/api/audio/generate-lyrics",se),onSuccess:se=>{console.log(" Lyrics data received:",se),pe(se.lyrics),n({title:"Professional Lyrics Generated! ",description:"ReMi-level sophisticated lyrics created"})},onError:se=>{console.error(" Lyrics generation error:",se),n({title:"Lyric Generation Failed",description:se.response?.data?.error||"Failed to generate lyrics",variant:"destructive"})}}),it=gt({mutationFn:async se=>await ot("POST","/api/audio/professional-song",se),onSuccess:se=>{console.log(" Full song generation success!",se),de(se.song),n({title:"Professional Song Generated!",description:`${se.metadata?.duration||240}s song with vocals, melody & full arrangement created`})},onError:se=>{console.error(" Full song generation error:",se),n({title:"Song Generation Failed",description:se?.message||"Could not generate professional song",variant:"destructive"})}});gt({mutationFn:async se=>await ot("POST","/api/audio/blend-genres",se),onSuccess:se=>{console.log(" Genre fusion success:",se),n({title:"Genre Fusion Complete!",description:`Successfully blended ${se.genreFusion?.primaryElements?.length||0} genre elements`})},onError:se=>{console.error(" Genre fusion error:",se),n({title:"Genre Fusion Failed",description:se?.message||"Could not blend genres",variant:"destructive"})}});const lt=gt({mutationFn:async se=>await ot("POST","/api/audio/generate-beat-from-lyrics",se),onSuccess:se=>{console.log(" Full rap instrumental success! Data:",se),L(se.beat),n({title:"Rap Instrumental Complete! ",description:`Full ${se.isFullInstrumental?"rap-ready instrumental":"beat pattern"} created - BPM: ${se.bpm||"Unknown"}`})},onError:se=>{console.error(" Rap instrumental generation error:",se),n({title:"Instrumental Generation Failed",description:se?.message||"Could not generate rap instrumental from lyrics",variant:"destructive"})}}),Sn=gt({mutationFn:async se=>(await ot("POST","/api/audio/lyric-helper",se)).json(),onSuccess:se=>{oe(se.helper),n({title:"Lyric Helper Ready!",description:`Found ${he} for "${fe}"`})},onError:se=>{n({title:"Lyric Helper Failed",description:se?.message||"Could not get lyric suggestions",variant:"destructive"})}}),Kr=()=>{Le.mutate({prompt:l,lyrics:g.lyrics||ce?.content||ce?.text,options:{genre:d.genre,mood:d.mood,duration:d.duration,style:d.style,bpm:d.bpm,key:d.key,complexity:5}})},ja=()=>{const se=g.lyrics||ce?.content||ce?.text;ze.mutate({style:d.genre,lyrics:se,bpm:d.bpm,complexity:5})},Bo=()=>{const se=g.lyrics||ce?.content||ce?.text;qe.mutate({scale:d.key,style:d.genre,complexity:5,lyrics:se,beatData:F})},zi=async()=>{if(console.log(" Play button clicked, generatedSong exists:",!!J),console.log(" Audio initialized:",s),!J){n({title:"No Song Available",description:"Generate a song first before playing",variant:"destructive"});return}if(!s){console.log(" Initializing audio engine...");try{await t(),console.log(" Audio engine initialized successfully")}catch(se){console.error(" Audio initialization failed:",se),n({title:"Audio Setup Failed",description:"Could not initialize audio. Try clicking again.",variant:"destructive"});return}}try{console.log(" Playing generated song...",J),console.log(" Song structure check:",{hasBeat:!!J.beat,hasDrums:!!J.beat?.drums,drumKeys:J.beat?.drums?Object.keys(J.beat.drums):"none",songKeys:Object.keys(J)});let se=!1,at=null,ln=120;if(J.beat?.drums?(se=!0,at=J.beat.drums,ln=J.beat.bpm||120,console.log(" Found drums in beat.drums structure")):J.drums&&(se=!0,at=J.drums,console.log(" Found drums in direct drums structure")),se||(console.log(" No drum patterns found, creating default pattern to blend with melody"),se=!0,at={kick:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],snare:[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],hihat:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}),ln=J.beat?.bpm||J.metadata?.bpm||J.songStructure?.intro?.bpm||120,se&&at){const Nt=at,js=60/ln/4;console.log(" Starting blended playback of drums and melody");let xn=0;const Fc=()=>{xn>=16&&(xn=0),Nt.kick?.[xn]&&e("kick",.8),Nt.snare?.[xn]&&e("snare",.7),Nt.hihat?.[xn]&&e("hihat",.4),Nt.bass?.[xn]&&e("bass",.6),Nt.perc?.[xn]&&e("perc",.5),xn++};console.log(" Creating COMPLETE SONG with vocals and beat that matches the lyrics"),console.log(" Playing generated song with realistic audio");const Dc=setInterval(Fc,js*1e3);if(Nt.shaker||Nt.tambourine){console.log(" Adding percussion elements");let Qr=0;setInterval(()=>{Qr>=16&&(Qr=0),Nt.shaker?.[Qr]&&e("perc",.3),Nt.tambourine?.[Qr]&&e("perc",.4),Qr++},js*1e3)}setTimeout(()=>{clearInterval(Dc)},js*1e3*64),n({title:" COMPLETE SONG with MATCHING BEAT",description:"Vocals + Beat that matches the lyrics: Intro  Build  Verse  Chorus  Verse  Chorus  Outro"})}else{console.log(" No drums found in generated song, trying fallback"),console.log(" Available song data:",Object.keys(J)),console.log(" Playing fallback test sound...");try{await e("kick",.8),console.log(" Test kick sound played successfully"),n({title:"Playing Test Sound",description:"No drum pattern found, played test kick instead"})}catch(Nt){console.error(" Test sound failed:",Nt),n({title:"Audio Error",description:"Could not play any audio. Check browser permissions.",variant:"destructive"})}}}catch(se){console.error("Error playing song:",se),n({title:"Playback Error",description:"Failed to play the generated song",variant:"destructive"})}},Na=async()=>{if(!F||!s){s||await t();return}try{console.log(" Playing generated beat...",F);const se=F.fullBeat||F;if(se?.drums){const at=se.drums,Nt=60/(F.bpm||se.bpm||120)/4;let Jn=0;const xn=setInterval(()=>{Jn>=16&&(Jn=0),at.kick?.[Jn]&&e("kick",.8),at.snare?.[Jn]&&e("snare",.7),at.hihat?.[Jn]&&e("hihat",.4),at.bass?.[Jn]&&e("bass",.6),at.perc?.[Jn]&&e("perc",.5),Jn++},Nt*1e3);setTimeout(()=>{clearInterval(xn)},Nt*1e3*16),n({title:"Playing AI Beat",description:"Generated beat pattern is now playing!"})}}catch(se){console.error("Error playing beat:",se),n({title:"Playback Error",description:"Failed to play the generated beat",variant:"destructive"})}},Ui=()=>{if(!J){n({title:"No Song to Download",description:"Generate a song first before downloading",variant:"destructive"});return}try{const se={metadata:{title:J.metadata?.title||"AI Generated Song",genre:d.genre,bpm:J.metadata?.bpm||d.bpm,key:d.key,duration:J.metadata?.duration||d.duration,generatedAt:new Date().toISOString()},song:J,lyrics:ce,beat:F},at=new Blob([JSON.stringify(se,null,2)],{type:"application/json"}),ln=URL.createObjectURL(at),Nt=document.createElement("a");Nt.href=ln,Nt.download=`${se.metadata.title.replace(/\s+/g,"_")}_${Date.now()}.json`,document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt),URL.revokeObjectURL(ln),n({title:"Song Downloaded",description:"Your AI-generated song data has been saved"})}catch(se){console.error(" Download error:",se),n({title:"Download Failed",description:"Could not download the song",variant:"destructive"})}},jr=(se,at)=>{const ln=ce?.content||j;Sn.mutate({word:se,type:at,context:ln})},bp=()=>{if(!ce){n({title:"No Lyrics Found",description:"Generate lyrics first to create a full song",variant:"destructive"});return}const se=ce.content||ce.text||"";it.mutate({prompt:`Create a complete professional song with these lyrics: "${se.slice(0,500)}..."`,options:{genre:I,mood:B,duration:240,style:d.style,instruments:d.instruments,vocals:!0,bpm:d.bpm,key:d.key}})},zo=["pop","rock","hip-hop","electronic","classical","jazz","blues","country","reggae","funk","soul","r&b","folk","indie","alternative","metal","ambient","house","techno","trance","dubstep","latin","world","experimental"],Uo=["uplifting","energetic","melancholic","romantic","aggressive","peaceful","mysterious","playful","dark","bright","emotional","calm","intense","dreamy"],wp=["C Major","D Major","E Major","F Major","G Major","A Major","B Major","C Minor","D Minor","E Minor","F Minor","G Minor","A Minor","B Minor"];return r.jsxs("div",{className:"space-y-6 p-4 h-full overflow-y-auto",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(Yu,{className:"w-6 h-6 text-yellow-500"}),r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Professional Studio"}),r.jsx(Yu,{className:"w-6 h-6 text-yellow-500"})]}),r.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"AI-Powered Beat Generation  Electronic Music Creation  Code-Music Translation"}),r.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[r.jsx(Pe,{variant:"secondary",className:"bg-purple-900 text-purple-200 text-xs",children:"Web Audio API"}),r.jsx(Pe,{variant:"secondary",className:"bg-blue-900 text-blue-200 text-xs",children:"Electronic Beats"}),r.jsx(Pe,{variant:"secondary",className:"bg-green-900 text-green-200 text-xs",children:"Mixing Controls"}),r.jsx(Pe,{variant:"secondary",className:"bg-orange-900 text-orange-200 text-xs",children:"Code Translation"})]})]}),r.jsxs(Bi,{value:i,onValueChange:a,className:"space-y-4",children:[r.jsxs(Hr,{className:"grid grid-cols-2 md:grid-cols-5 w-full",children:[r.jsxs(dt,{value:"full-song",className:"text-xs",children:[r.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Full Song"]}),r.jsxs(dt,{value:"code-music",className:"text-xs",children:[r.jsx(en,{className:"w-3 h-3 mr-1"}),"CodeMusic"]}),r.jsxs(dt,{value:"add-vocals",className:"text-xs",children:[r.jsx(jd,{className:"w-3 h-3 mr-1"}),"Add Vocals"]}),r.jsxs(dt,{value:"genre-blend",className:"text-xs",children:[r.jsx(Kn,{className:"w-3 h-3 mr-1"}),"Genre Mix"]}),r.jsxs(dt,{value:"lyrics",className:"text-xs",children:[r.jsx(Xu,{className:"w-3 h-3 mr-1"}),"Pro Lyrics"]})]}),r.jsx(ht,{value:"full-song",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsx(Ee,{className:"pb-3",children:r.jsxs(Ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Mt,{className:"w-5 h-5"}),"Generate Studio-Quality Song (Up to 8 Minutes)"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"song-prompt",children:"Creative Prompt"}),r.jsx(cs,{id:"song-prompt",placeholder:"Describe your song idea... (e.g., 'An uplifting pop anthem about overcoming challenges')",value:l,onChange:se=>u(se.target.value),className:"mt-1",rows:3,"data-testid":"input-song-prompt"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Genre"}),r.jsxs(Ye,{value:d.genre,onValueChange:se=>h({...d,genre:se}),children:[r.jsx(He,{"data-testid":"select-genre",className:"h-9",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:zo.map(se=>r.jsx(le,{value:se,children:se},se))})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Mood"}),r.jsxs(Ye,{value:d.mood,onValueChange:se=>h({...d,mood:se}),children:[r.jsx(He,{"data-testid":"select-mood",className:"h-9",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:Uo.map(se=>r.jsx(le,{value:se,children:se},se))})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Key"}),r.jsxs(Ye,{value:d.key,onValueChange:se=>h({...d,key:se}),children:[r.jsx(He,{"data-testid":"select-key",className:"h-9",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:wp.map(se=>r.jsx(le,{value:se,children:se},se))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(Ne,{children:["Duration: ",d.duration,"s (",Math.floor(d.duration/60),":",String(d.duration%60).padStart(2,"0"),")"]}),r.jsx(me,{value:[d.duration],onValueChange:([se])=>h({...d,duration:se}),min:30,max:480,step:30,className:"mt-2","data-testid":"slider-duration"})]}),r.jsxs("div",{children:[r.jsxs(Ne,{children:["BPM: ",d.bpm]}),r.jsx(me,{value:[d.bpm],onValueChange:([se])=>h({...d,bpm:se}),min:60,max:180,step:5,className:"mt-2","data-testid":"slider-bpm"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zs,{id:"vocals",checked:d.vocals,onCheckedChange:se=>h({...d,vocals:se}),"data-testid":"switch-vocals"}),r.jsx(Ne,{htmlFor:"vocals",children:"Include Vocals"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ne,{onClick:Kr,disabled:!l&&!g.lyrics||Le.isPending,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700","data-testid":"button-generate-song",children:Le.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Generating AI Song with Beat & Melody..."]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"w-4 h-4"}),"Generate Complete AI Song"]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ne,{onClick:ja,disabled:ze.isPending,variant:"outline",className:"border-purple-500 text-purple-300 hover:bg-purple-900","data-testid":"button-generate-beat",children:ze.isPending?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-purple-400 border-t-transparent rounded-full"}),"AI Beat"]}):r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(en,{className:"w-3 h-3"}),"AI Beat Only"]})}),r.jsx(ne,{onClick:Bo,disabled:qe.isPending,variant:"outline",className:"border-blue-500 text-blue-300 hover:bg-blue-900","data-testid":"button-generate-melody",children:qe.isPending?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-blue-400 border-t-transparent rounded-full"}),"AI Melody"]}):r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mt,{className:"w-3 h-3"}),"AI Melody Only"]})})]})]}),F&&r.jsx(ge,{className:"mt-4 bg-purple-900/20 border-purple-500/30",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(en,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-purple-400 font-medium",children:"AI Beat Generated!"})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Style:"})," ",F.fullBeat?.metadata?.style||"AI Generated"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"BPM:"})," ",F.bpm||F.fullBeat?.bpm||"Unknown"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"AI Generated:"})," ",F.aiGenerated?"Yes":"No"]})]}),r.jsx("div",{className:"flex gap-2 mt-3",children:r.jsxs(ne,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",onClick:Na,"data-testid":"button-play-beat",children:[r.jsx(pn,{className:"w-3 h-3 mr-1"}),"Preview Beat"]})})]})}),(J||J?.song&&J.success)&&r.jsx(ge,{className:"mt-4 bg-green-900/20 border-green-500/30",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(en,{className:"w-4 h-4 text-green-400"}),r.jsx("span",{className:"text-green-400 font-medium",children:"Song Generated Successfully!"})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Title:"})," ",J.title||"Professional Composition"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Duration:"})," ",J.metadata?.duration||d.duration," seconds"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Quality:"})," Studio Professional (44.1kHz equivalent)"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Genre:"})," ",d.genre,"  ",r.jsx("strong",{children:"Mood:"})," ",d.mood]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsxs(ne,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:zi,"data-testid":"button-play-song",children:[r.jsx(pn,{className:"w-3 h-3 mr-1"}),"Play"]}),r.jsxs(ne,{size:"sm",variant:"outline",children:[r.jsx(ql,{className:"w-3 h-3 mr-1"}),"Download"]})]})]})})]})]})}),r.jsx(ht,{value:"code-music",className:"space-y-4",children:r.jsxs(ge,{className:"bg-gradient-to-br from-purple-900/20 to-blue-900/20 border-purple-500/30",children:[r.jsxs(Ee,{children:[r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-5 h-5 text-purple-400"}),"Code  Music Translation"]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Bidirectional translation between code and music using AI"})]}),r.jsxs(je,{className:"space-y-4",children:[Y&&r.jsxs("div",{className:`p-3 rounded-lg border ${Y.status==="connected"?"bg-green-900/20 border-green-500/30 text-green-400":Y.status==="not_configured"?"bg-yellow-900/20 border-yellow-500/30 text-yellow-400":"bg-red-900/20 border-red-500/30 text-red-400"}`,children:[r.jsxs("div",{className:"text-sm font-medium",children:[Y.status==="connected"&&" Cloud MusicGen Connected",Y.status==="not_configured"&&" Cloud MusicGen Not Configured",Y.status!=="connected"&&Y.status!=="not_configured"&&" Cloud MusicGen Offline"]}),r.jsx("div",{className:"text-xs mt-1",children:Y.message||(Y.status==="connected"?"Professional .wav generation available":"AI analysis available, deploy cloud for professional generation")})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Code Input"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ye,{value:Q,onValueChange:X,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"javascript",children:"JavaScript"}),r.jsx(le,{value:"python",children:"Python"}),r.jsx(le,{value:"java",children:"Java"}),r.jsx(le,{value:"cpp",children:"C++"}),r.jsx(le,{value:"rust",children:"Rust"}),r.jsx(le,{value:"go",children:"Go"})]})]}),r.jsxs(Ye,{value:q,onValueChange:U,children:[r.jsx(He,{className:"w-32",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"algorithmic",children:"Algorithmic"}),r.jsx(le,{value:"ambient",children:"Ambient"}),r.jsx(le,{value:"electronic",children:"Electronic"}),r.jsx(le,{value:"classical",children:"Classical"}),r.jsx(le,{value:"jazz",children:"Jazz"})]})]})]}),r.jsx("textarea",{value:z,onChange:se=>G(se.target.value),placeholder:"Paste your code here...",className:"w-full h-32 p-3 bg-black/50 border border-gray-600 rounded-lg text-white font-mono text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ne,{onClick:()=>W.mutate({code:z,language:Q,musicStyle:q}),disabled:!z||W.isPending,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:W.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Translating..."]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"w-4 h-4"}),"Code  Music"]})}),r.jsx(ne,{onClick:async()=>{try{const se=await ot("POST","/api/audio/bidirectional-test",{code:z,language:Q});n({title:"Test Simulation Ready",description:"Deploy cloud MusicGen for full testing"})}catch(se){n({title:"Test Failed",description:se.message,variant:"destructive"})}},disabled:!z,variant:"outline",className:"border-green-500 text-green-300 hover:bg-green-900",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4"}),"Bidirectional Test"]})})]}),Y?.status==="not_configured"&&r.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[r.jsx("div",{className:"text-blue-400 text-sm font-medium mb-1",children:"Ready for Professional Generation"}),r.jsxs("div",{className:"text-xs text-blue-300",children:["Your system supports code-music translation. Deploy cloud MusicGen for professional .wav generation. See ",r.jsx("code",{children:"MUSICGEN_SETUP_COMPLETE.md"})," for setup instructions."]})]})]})]})}),r.jsx(ht,{value:"add-vocals",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsx(Ee,{className:"pb-3",children:r.jsxs(Ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(jd,{className:"w-5 h-5"}),"Add Professional Vocals to Instrumental"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"instrumental-data",children:"Instrumental Track Data"}),r.jsx(cs,{id:"instrumental-data",placeholder:"Paste your instrumental track data or upload file...",value:f,onChange:se=>m(se.target.value),className:"mt-1",rows:3,"data-testid":"input-instrumental-data"})]}),r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"lyrics-input",children:"Custom Lyrics (Optional)"}),r.jsx(cs,{id:"lyrics-input",placeholder:"Enter custom lyrics or leave blank for AI-generated lyrics...",value:g.lyrics,onChange:se=>b({...g,lyrics:se.target.value}),className:"mt-1",rows:3,"data-testid":"input-custom-lyrics"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zs,{id:"melody-vocals",checked:g.melody,onCheckedChange:se=>b({...g,melody:se}),"data-testid":"switch-melody"}),r.jsx(Ne,{htmlFor:"melody-vocals",className:"text-sm",children:"Lead Melody"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zs,{id:"harmonies",checked:g.harmonies,onCheckedChange:se=>b({...g,harmonies:se}),"data-testid":"switch-harmonies"}),r.jsx(Ne,{htmlFor:"harmonies",className:"text-sm",children:"Harmonies"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zs,{id:"adlibs",checked:g.adLibs,onCheckedChange:se=>b({...g,adLibs:se}),"data-testid":"switch-adlibs"}),r.jsx(Ne,{htmlFor:"adlibs",className:"text-sm",children:"Ad-Libs"})]})]}),r.jsx(ne,{onClick:()=>et.mutate({instrumentalData:JSON.parse(f||"{}"),vocalOptions:g}),disabled:!f||et.isPending,className:"w-full bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700","data-testid":"button-add-vocals",children:et.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Adding Professional Vocals..."]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jd,{className:"w-4 h-4"}),"Add Professional Vocals"]})})]})]})}),r.jsxs(ht,{value:"lyrics",className:"space-y-4",children:[r.jsxs(ge,{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border-yellow-500/30",children:[r.jsxs(Ee,{className:"pb-3",children:[r.jsxs(Ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Yu,{className:"w-5 h-5 text-yellow-400"}),"Professional Advanced Features"]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Generate beats from lyrics and get real-time lyric assistance"})]}),r.jsxs(je,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"advanced-lyrics",children:"Enter Lyrics or Word for Analysis"}),r.jsx(vt,{id:"advanced-lyrics",placeholder:"Enter lyrics to generate beat OR word for rhymes/synonyms...",value:fe,onChange:se=>ve(se.target.value),className:"mt-1","data-testid":"input-advanced-lyrics"})]}),r.jsx(ne,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium py-3 mb-4",onClick:bp,disabled:!ce||it.isPending,"data-testid":"button-generate-full-song-from-lyrics",children:it.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),r.jsx("span",{children:"Generating Full Professional Song..."})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"w-4 h-4"}),r.jsx("span",{children:"Generate Complete Song with Melody & Vocals (Professional)"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsx(ne,{variant:"outline",className:"border-purple-500/30 hover:bg-purple-900/20",onClick:()=>{fe&&lt.mutate({lyrics:fe,options:{style:"hip-hop",genre:"rap",energy:B}})},disabled:!fe||lt.isPending,"data-testid":"button-generate-beat-from-lyrics",children:lt.isPending?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-white border-t-transparent rounded-full"}),r.jsx("span",{children:"Analyzing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Generate Rap Instrumental"]})}),r.jsxs(ne,{variant:"outline",className:"border-blue-500/30 hover:bg-blue-900/20",onClick:()=>{fe&&jr(fe,"rhymes")},disabled:!fe||Sn.isPending,"data-testid":"button-find-rhymes",children:[r.jsx(Kn,{className:"w-3 h-3 mr-1"}),"Find Rhymes"]}),r.jsxs(ne,{variant:"outline",className:"border-green-500/30 hover:bg-green-900/20",onClick:()=>{fe&&jr(fe,"synonyms")},disabled:!fe||Sn.isPending,"data-testid":"button-find-synonyms",children:[r.jsx(Xu,{className:"w-3 h-3 mr-1"}),"Find Synonyms"]})]}),it.isSuccess&&J&&r.jsx(ge,{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 border-purple-500/50",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Mt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-purple-400 font-medium text-lg",children:"Professional Song Generated!"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm mb-4",children:[r.jsxs("div",{className:"bg-purple-900/30 p-2 rounded",children:[r.jsx("div",{className:"text-purple-300 font-medium",children:"Duration"}),r.jsxs("div",{className:"text-white",children:[J.metadata?.duration||240,"s"]})]}),r.jsxs("div",{className:"bg-blue-900/30 p-2 rounded",children:[r.jsx("div",{className:"text-blue-300 font-medium",children:"Quality"}),r.jsx("div",{className:"text-white",children:"Studio (44.1kHz)"})]}),r.jsxs("div",{className:"bg-green-900/30 p-2 rounded",children:[r.jsx("div",{className:"text-green-300 font-medium",children:"Instruments"}),r.jsx("div",{className:"text-white",children:J.songStructure?Object.keys(J.songStructure).length:"Full Band"})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsx("strong",{children:"Song Structure:"})," ",J.songStructure?Object.keys(J.songStructure).join("  ").replace(/([A-Z])/g," $1"):"Intro  Verse  Chorus  Verse  Chorus  Bridge  Final Chorus  Outro"]}),r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsx("strong",{children:"Chord Progression:"})," ",J.chordProgression?.join(" - ")||"Complex Multi-Section Progressions"]}),r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsx("strong",{children:"Vocals:"})," ",J.vocals?"Lead Vocals + Harmonies + Ad-libs":"Instrumental"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ne,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",onClick:()=>zi(),disabled:!J,"data-testid":"button-play-full-song",children:[r.jsx(pn,{className:"w-3 h-3 mr-1"}),"Play Complete Song"]}),r.jsxs(ne,{size:"sm",variant:"outline",className:"border-green-500/30 hover:bg-green-900/20",onClick:async()=>{console.log(" Test button clicked, isInitialized:",s);try{s||(console.log(" Initializing audio..."),await t(),console.log(" Audio initialized successfully")),console.log(" Playing test kick..."),e("kick",.8),console.log(" Test kick command sent"),n({title:"Audio Test",description:"Test kick drum sound played"})}catch(se){console.error(" Test button error:",se),n({title:"Audio Test Failed",description:`Error: ${se?.message||"Unknown error"}`,variant:"destructive"})}},"data-testid":"button-test-audio",children:[r.jsx(Ai,{className:"w-3 h-3 mr-1"}),"Test Audio"]}),r.jsxs(ne,{size:"sm",variant:"outline",className:"border-purple-500/30",onClick:()=>Ui(),disabled:!J,"data-testid":"button-download-song",children:[r.jsx(ql,{className:"w-3 h-3 mr-1"}),"Download Song Data"]})]})]})}),lt.isSuccess&&r.jsx(ge,{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 border-purple-500/50",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Mt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-purple-400 font-medium text-lg",children:lt.data?.isFullInstrumental?"Full Rap Instrumental Created!":"Beat Pattern Generated!"}),lt.data?.rapReady&&r.jsx(Pe,{className:"bg-green-600 text-white",children:"RAP READY"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-300 mb-3",children:[r.jsxs("div",{className:"bg-gray-800/50 p-2 rounded",children:[r.jsx("strong",{children:"BPM:"})," ",lt.data?.bpm||F?.bpm||"N/A"]}),r.jsxs("div",{className:"bg-gray-800/50 p-2 rounded",children:[r.jsx("strong",{children:"Key:"})," ",lt.data?.key||"C Minor"]})]}),lt.data?.isFullInstrumental&&r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsx("div",{className:"text-sm",children:r.jsx("strong",{className:"text-green-400",children:"Full Arrangement Includes:"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsx("div",{children:" Drum Kit (Kick, Snare, Hi-Hat)"}),r.jsx("div",{children:" Bass Line (808s & Sub Bass)"}),r.jsx("div",{children:" Melodic Elements (Piano, Strings)"}),r.jsx("div",{children:" Chord Progression"})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[r.jsx("strong",{children:"Structure:"})," Intro  Verse  Hook  Verse  Bridge  Outro"]})]}),r.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:[r.jsx("strong",{children:"Analysis:"})," ",lt.data?.metadata?.syllableCount||0," syllables analyzed across ",lt.data?.metadata?.lineCount||0," lines"]}),r.jsxs(ne,{size:"sm",className:"mt-3 w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:()=>Na(),"data-testid":"button-play-rap-instrumental",children:[r.jsx(pn,{className:"w-4 h-4 mr-2"}),lt.data?.isFullInstrumental?"Play Rap Instrumental":"Play Beat Pattern"]})]})}),Sn.isSuccess&&r.jsx(ge,{className:"bg-blue-900/20 border-blue-500/30",children:r.jsxs(je,{className:"pt-3",children:[r.jsx("div",{className:"text-blue-400 font-medium mb-2",children:"Lyric Helper Results:"}),r.jsx("div",{className:"space-y-1",children:Sn.data?.helper?.suggestions?.slice(0,6).map((se,at)=>r.jsxs("div",{className:"text-gray-300 text-sm",children:[" ",se]},at))})]})})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{className:"pb-3",children:r.jsxs(Ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Xu,{className:"w-5 h-5"}),"ReMi-Level Lyric Generation"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"lyrics-theme",children:"Song Theme"}),r.jsx(vt,{id:"lyrics-theme",placeholder:"e.g., 'Overcoming adversity', 'Love and loss', 'Innovation and technology'",value:j,onChange:se=>O(se.target.value),className:"mt-1","data-testid":"input-lyrics-theme"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Genre"}),r.jsxs(Ye,{value:I,onValueChange:D,children:[r.jsx(He,{className:"h-9",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:zo.map(se=>r.jsx(le,{value:se,children:se},se))})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Mood"}),r.jsxs(Ye,{value:B,onValueChange:H,children:[r.jsx(He,{className:"h-9",children:r.jsx(Xe,{})}),r.jsx(Ke,{children:Uo.map(se=>r.jsx(le,{value:se,children:se},se))})]})]})]}),r.jsx(ne,{onClick:()=>ke.mutate({theme:j,genre:I,mood:B,songStructure:{sections:["verse","chorus","verse","chorus","bridge","chorus"]}}),disabled:!j||ke.isPending,className:"w-full bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700","data-testid":"button-generate-lyrics",children:ke.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Generating Professional Lyrics..."]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xu,{className:"w-4 h-4"}),"Generate ReMi-Level Lyrics"]})}),(ke.isSuccess||ce)&&r.jsx(ge,{className:"mt-4 bg-green-900/20 border-green-500/30",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(en,{className:"w-4 h-4 text-green-400"}),r.jsx("span",{className:"text-green-400 font-medium",children:"Professional Lyrics Generated!"})]}),r.jsx("div",{className:"bg-gray-800 p-4 rounded-lg text-sm max-h-64 overflow-y-auto",children:r.jsx("pre",{className:"whitespace-pre-wrap text-gray-200 font-mono",children:ce?.content||ce?.text||ke.data?.lyrics?.content||"Loading lyrics..."})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-400",children:[r.jsx(Yu,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Professional Advanced Tools"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[r.jsxs(ne,{size:"sm",variant:"outline",className:"border-purple-500/30 hover:bg-purple-900/20",onClick:()=>{const se=ce?.content||ce?.text||ke.data?.lyrics?.content||"";console.log(" Generating beat from lyrics:",se.slice(0,100)+"..."),lt.mutate({lyrics:se,options:{style:"hip-hop",genre:I,energy:B}})},disabled:lt.isPending,"data-testid":"button-generate-beat-from-lyrics",children:[r.jsx(Mt,{className:"w-3 h-3 mr-1"}),lt.isPending?"Generating...":"Generate Beat from Lyrics"]}),r.jsxs(ne,{size:"sm",variant:"outline",className:"border-blue-500/30 hover:bg-blue-900/20",onClick:()=>te(!0),"data-testid":"button-lyric-helper",children:[r.jsx(Kn,{className:"w-3 h-3 mr-1"}),"Lyric Helper (Rhymes/Synonyms)"]})]}),(lt.isSuccess||F)&&r.jsx(ge,{className:"mt-3 bg-purple-900/20 border-purple-500/30",children:r.jsxs(je,{className:"pt-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Mt,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-purple-400 font-medium",children:"Beat Generated from Lyrics!"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-300",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"BPM:"})," ",lt.data?.bpm||F?.bpm||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Energy:"})," ",lt.data?.analysis?.energyLevel||F?.analysis?.energyLevel||"Medium"]})]}),r.jsxs(ne,{size:"sm",className:"mt-2 bg-purple-600 hover:bg-purple-700",onClick:()=>Na(),children:[r.jsx(pn,{className:"w-3 h-3 mr-1"}),"Play Beat Pattern"]})]})})]})]})}),we&&r.jsx(ge,{className:"mt-4 bg-blue-900/20 border-blue-500/30",children:r.jsxs(je,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-blue-400 font-medium",children:"Real-time Lyric Helper"})]}),r.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>te(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[r.jsx(vt,{placeholder:"Enter word for help...",value:fe,onChange:se=>ve(se.target.value),"data-testid":"input-helper-word"}),r.jsxs(Ye,{value:he,onValueChange:Ce,children:[r.jsx(He,{"data-testid":"select-helper-type",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"rhymes",children:"Find Rhymes"}),r.jsx(le,{value:"synonyms",children:"Find Synonyms"}),r.jsx(le,{value:"syllables",children:"Syllable Match"})]})]})]}),r.jsx(ne,{size:"sm",onClick:()=>jr(fe,he),disabled:!fe||Sn.isPending,className:"w-full bg-blue-600 hover:bg-blue-700","data-testid":"button-get-lyric-help",children:Sn.isPending?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-white border-t-transparent rounded-full"}),"Getting Suggestions..."]}):`Get ${he==="rhymes"?"Rhymes":he==="synonyms"?"Synonyms":"Syllable Matches"}`}),re&&r.jsxs("div",{className:"bg-gray-800 p-3 rounded text-sm",children:[r.jsxs("div",{className:"text-blue-400 font-medium mb-2",children:['Suggestions for "',fe,'":']}),r.jsx("div",{className:"space-y-2",children:re.suggestions?.map((se,at)=>r.jsxs("div",{className:"text-gray-300",children:[" ",se]},at))})]})]})]})})]})]})]}),r.jsx(ht,{value:"genre-blend",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsxs(Ee,{className:"pb-3",children:[r.jsxs(Ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Kn,{className:"w-5 h-5"}),"Advanced Genre Fusion"]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Blend multiple genres seamlessly with AI-powered fusion techniques"})]}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Primary Genre"}),r.jsxs(Ye,{defaultValue:"electronic",children:[r.jsx(He,{className:"h-9",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"electronic",children:"Electronic"}),r.jsx(le,{value:"pop",children:"Pop"}),r.jsx(le,{value:"rock",children:"Rock"}),r.jsx(le,{value:"hip-hop",children:"Hip-Hop"}),r.jsx(le,{value:"jazz",children:"Jazz"}),r.jsx(le,{value:"classical",children:"Classical"}),r.jsx(le,{value:"reggae",children:"Reggae"}),r.jsx(le,{value:"country",children:"Country"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Secondary Genre"}),r.jsxs(Ye,{defaultValue:"jazz",children:[r.jsx(He,{className:"h-9",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"jazz",children:"Jazz"}),r.jsx(le,{value:"classical",children:"Classical"}),r.jsx(le,{value:"ambient",children:"Ambient"}),r.jsx(le,{value:"world",children:"World Music"}),r.jsx(le,{value:"funk",children:"Funk"}),r.jsx(le,{value:"latin",children:"Latin"}),r.jsx(le,{value:"blues",children:"Blues"}),r.jsx(le,{value:"experimental",children:"Experimental"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Fusion Balance"}),r.jsxs("div",{className:"px-2 py-3",children:[r.jsx(me,{defaultValue:[50],max:100,min:0,step:5,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"Primary Dominant"}),r.jsx("span",{children:"Equal Balance"}),r.jsx("span",{children:"Secondary Dominant"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{htmlFor:"fusion-concept",children:"Fusion Concept"}),r.jsx(cs,{id:"fusion-concept",placeholder:"e.g., 'Electronic-jazz fusion with sophisticated harmonies and digital textures, maintaining jazz improvisation over electronic beats'",className:"mt-1",rows:3})]}),r.jsxs(ne,{className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",size:"lg",children:[r.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Generate Genre Fusion"]})]})]})})]})]})}function cW(){const[n,e]=v.useState(75),[t,s]=v.useState([{id:"kick",name:"KICK",volume:80,pan:0,muted:!1,solo:!1,eq:{high:0,mid:2,low:5},sends:{reverb:10,delay:5},level:65},{id:"snare",name:"SNARE",volume:75,pan:0,muted:!1,solo:!1,eq:{high:3,mid:1,low:-2},sends:{reverb:25,delay:15},level:80},{id:"hihat",name:"HI-HAT",volume:60,pan:25,muted:!1,solo:!1,eq:{high:4,mid:0,low:-6},sends:{reverb:20,delay:30},level:45},{id:"melody",name:"MELODY",volume:85,pan:-15,muted:!1,solo:!1,eq:{high:1,mid:3,low:0},sends:{reverb:40,delay:20},level:70},{id:"codebeat",name:"CODEBEAT",volume:70,pan:10,muted:!1,solo:!1,eq:{high:2,mid:1,low:1},sends:{reverb:60,delay:50},level:60}]),[i,a]=v.useState({reverb:{type:"hall",roomSize:35,damping:60,wetDry:25,volume:70},delay:{time:40,feedback:30,mix:20,volume:65},compressor:{threshold:70,ratio:50,attack:30,volume:80}}),{toast:l}=yn(),{initialize:u,isInitialized:d}=tr(),[h,f]=v.useState(!1),m=(C,A)=>{s(P=>P.map(R=>R.id===C?{...R,...A}:R))},g=(C,A,P)=>{s(R=>R.map(T=>T.id===C?{...T,eq:{...T.eq,[A]:P}}:T))},b=(C,A,P)=>{s(R=>R.map(T=>T.id===C?{...T,sends:{...T.sends,[A]:P}}:T))},S=C=>{m(C,{muted:!t.find(A=>A.id===C)?.muted})},x=C=>{const A=t.find(P=>P.id===C);m(C,{solo:!A?.solo})},w=()=>{s(C=>C.map(A=>({...A,volume:Math.max(20,Math.min(100,A.volume+(Math.random()-.5)*10)),pan:Math.max(-50,Math.min(50,A.pan+(Math.random()-.5)*20))})))},N=()=>{e(75),s(t.map(C=>({...C,volume:C.id==="kick"?80:C.id==="snare"?75:C.id==="hihat"?60:C.id==="melody"?70:65,pan:C.id==="hihat"?10:C.id==="melody"?-5:C.id==="codebeat"?5:0,hi:0,mid:0,lo:0,reverb:0,delay:0,muted:!1,solo:!1})))},E=()=>{f(!h)};return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Professional Mixer"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(ne,{onClick:()=>{u(),l({title:"Audio Initialized",description:"The audio engine has started."})},className:"bg-studio-accent hover:bg-blue-500",disabled:d,children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),"Start Audio"]}),r.jsxs(ne,{onClick:w,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"AI Auto-Mix"]}),r.jsxs(ne,{onClick:N,variant:"secondary",className:"bg-gray-700 hover:bg-gray-600",children:[r.jsx("i",{className:"fas fa-undo mr-2"}),"Reset"]}),r.jsx(ne,{onClick:E,className:h?"bg-green-500 hover:bg-green-400":"bg-gray-700 hover:bg-gray-600",children:h?"Studio Linked":"Link Studio"})]})]})}),r.jsx(_s,{className:"flex-1 p-6",children:r.jsxs("div",{className:"flex space-x-4 min-w-max pb-4",children:[t.map(C=>r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-3 w-24 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-center",children:C.name}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"EQ"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"HI"}),r.jsx("div",{className:"w-12",children:r.jsx(me,{value:[C.eq.high],onValueChange:([A])=>g(C.id,"high",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} high EQ control`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"MD"}),r.jsx("div",{className:"w-12",children:r.jsx(me,{value:[C.eq.mid],onValueChange:([A])=>g(C.id,"mid",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} mid EQ control`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"LO"}),r.jsx("div",{className:"w-12",children:r.jsx(me,{value:[C.eq.low],onValueChange:([A])=>g(C.id,"low",A),min:-12,max:12,step:1,className:"h-1","aria-label":`${C.name} low EQ control`})})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"SEND"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"RV"}),r.jsx("div",{className:"w-12",children:r.jsx(me,{value:[C.sends.reverb],onValueChange:([A])=>b(C.id,"reverb",A),min:0,max:100,step:1,className:"h-1","aria-label":`${C.name} reverb send level`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"DL"}),r.jsx("div",{className:"w-12",children:r.jsx(me,{value:[C.sends.delay],onValueChange:([A])=>b(C.id,"delay",A),min:0,max:100,step:1,className:"h-1","aria-label":`${C.name} delay send level`})})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center mb-1",children:"PAN"}),r.jsx(me,{value:[C.pan],onValueChange:([A])=>m(C.id,{pan:A}),min:-50,max:50,step:1,className:"w-full h-1","aria-label":`${C.name} pan control`}),r.jsx("div",{className:"text-xs text-center mt-1",children:C.pan===0?"CENTER":C.pan>0?`R+${C.pan}`:`L${C.pan}`})]}),r.jsx("div",{className:"flex-1 flex justify-center mb-4",children:r.jsx("div",{className:"w-6 bg-gray-700 rounded-full relative overflow-hidden",children:r.jsx("div",{className:"meter-bar absolute bottom-0 w-full rounded-full transition-all duration-200",style:{height:`${C.level}%`}})})}),r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"VOL"}),r.jsx("div",{className:"relative h-32 w-6 bg-gray-700 rounded-full mx-auto",children:r.jsx("div",{className:"absolute w-6 h-3 bg-studio-accent rounded-full cursor-pointer transition-all",style:{bottom:`${C.volume}%`,transform:"translateY(50%)"},role:"slider","aria-label":`${C.name} volume fader`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":C.volume,tabIndex:0,onMouseDown:A=>{const R=A.currentTarget.parentElement.getBoundingClientRect(),T=O=>{const I=O.clientY-R.top,D=Math.max(0,Math.min(100,100-I/R.height*100));m(C.id,{volume:D})},j=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",j)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",j)}})}),r.jsxs("div",{className:"text-xs font-mono mt-2",children:[C.volume>75?`+${Math.round((C.volume-75)/3)}`:`-${Math.round((75-C.volume)/3)}`,"dB"]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{onClick:()=>x(C.id),className:`w-full text-xs py-1 font-bold ${C.solo?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-gray-700 hover:bg-yellow-500 hover:text-black"}`,children:"SOLO"}),r.jsx(ne,{onClick:()=>S(C.id),className:`w-full text-xs py-1 ${C.muted?"bg-red-600 hover:bg-red-500":"bg-gray-700 hover:bg-red-600"}`,children:"MUTE"})]})]},C.id)),r.jsxs("div",{className:"bg-studio-panel border-2 border-studio-accent rounded-lg p-4 w-32 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-sm font-bold mb-4 text-center text-studio-accent",children:"MASTER"}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center",children:"MASTER EQ"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"HIGH"}),r.jsx("div",{className:"w-16",children:r.jsx(me,{value:[1],min:-12,max:12,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"MID"}),r.jsx("div",{className:"w-16",children:r.jsx(me,{value:[0],min:-12,max:12,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"LOW"}),r.jsx("div",{className:"w-16",children:r.jsx(me,{value:[2],min:-12,max:12,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"VOLUME"}),r.jsx("div",{className:"relative h-40 w-8 bg-gray-700 rounded-full",children:r.jsx("div",{className:"absolute w-8 h-4 bg-studio-accent rounded-full cursor-pointer transition-all",style:{bottom:`${n}%`,transform:"translateY(50%)"},onMouseDown:C=>{const P=C.currentTarget.parentElement.getBoundingClientRect(),R=j=>{const O=j.clientY-P.top,I=Math.max(0,Math.min(100,100-O/P.height*100));e(I)},T=()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",T)}})}),r.jsxs("div",{className:"text-sm font-mono mt-4 text-studio-accent",children:[n>75?`+${Math.round((n-75)/3)}`:`-${Math.round((75-n)/3)}`,"dB"]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"text-xs text-gray-400 text-center mb-2",children:"VU METER"}),r.jsx("div",{className:"flex justify-center space-x-1",children:[1,1,.8,.6,.6,.4,0,0].map((C,A)=>r.jsx("div",{className:`w-1 h-8 rounded ${A<2?"bg-green-500":A<4?"bg-yellow-400":A<6?"bg-orange-500":"bg-red-500"}`,style:{opacity:C}},A))})]})]}),r.jsxs("div",{className:"bg-studio-panel border border-gray-600 rounded-lg p-4 w-64 flex flex-col flex-shrink-0",children:[r.jsx("div",{className:"text-sm font-medium mb-4 text-center",children:"Effects Rack"}),r.jsxs("div",{className:"mb-6 p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"REVERB"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Room Size"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.reverb.roomSize],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,roomSize:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Damping"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.reverb.damping],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,damping:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Wet/Dry"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.reverb.wetDry],onValueChange:([C])=>a(A=>({...A,reverb:{...A.reverb,wetDry:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"mb-6 p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"DELAY"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Time"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.delay.time],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,time:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Feedback"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.delay.feedback],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,feedback:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Mix"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.delay.mix],onValueChange:([C])=>a(A=>({...A,delay:{...A.delay,mix:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]}),r.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[r.jsx("div",{className:"text-xs font-medium mb-2 text-studio-accent",children:"COMPRESSOR"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Threshold"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.compressor.threshold],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,threshold:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Ratio"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.compressor.ratio],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,ratio:C}})),min:0,max:100,step:1,className:"h-1"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs",children:"Attack"}),r.jsx("div",{className:"w-20",children:r.jsx(me,{value:[i.compressor.attack],onValueChange:([C])=>a(A=>({...A,compressor:{...A.compressor,attack:C}})),min:0,max:100,step:1,className:"h-1"})})]})]})]})]})]})})]})}function uW(){const[n,e]=v.useState("electronic"),[t,s]=v.useState([5]),[i,a]=v.useState([]),[l,u]=v.useState(!1),[d,h]=v.useState(null),{toast:f}=yn(),{playFrequency:m,initialize:g,isInitialized:b}=tr(),S=v.useContext(Ca),x=gt({mutationFn:async A=>{const P=["electronic","orchestral","jazz","rock","ambient","world","cinematic","experimental"],R=[3,4,5,6,7,8],T=P[Math.floor(Math.random()*P.length)],j=R[Math.floor(Math.random()*R.length)];return(await ot("POST","/api/layers/generate",{...A,style:T,complexity:j})).json()},onSuccess:A=>{A.layers&&(a(A.layers),S.setCurrentLayers?.(A.layers)),f({title:"Layers Generated",description:`AI created ${A.layers?.length||0} ${A.approach} ${A.primaryInstrument} layers!`})},onError:()=>{f({title:"Generation Failed",description:"Failed to generate dynamic layers. Please try again.",variant:"destructive"})}}),w=()=>({beatPattern:S.currentPattern,melody:S.currentMelody,lyrics:S.currentLyrics,codeMusic:S.currentCodeMusic,bpm:120,timestamp:Date.now()}),N=()=>{const A=w();x.mutate({arrangement:A,style:n,complexity:t[0]})},E=async A=>{b||await g(),u(!0),h(A.instrument);for(const R of A.notes)setTimeout(()=>{m(R.frequency,R.duration,A.instrument,R.velocity)},R.start*1e3);const P=Math.max(...A.notes.map(R=>R.start+R.duration));setTimeout(()=>{u(!1),h(null)},P*1e3)},C=async()=>{b||await g(),u(!0),i.forEach(P=>{P.notes.forEach(R=>{setTimeout(()=>{m(R.frequency,R.duration,P.instrument,R.velocity*P.volume)},R.start*1e3)})});const A=Math.max(...i.flatMap(P=>P.notes.map(R=>R.start+R.duration)));setTimeout(()=>{u(!1)},A*1e3)};return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-600 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-2xl font-heading font-bold",children:"AI Dynamic Layering"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(ne,{onClick:g,disabled:b,className:"bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-power-off mr-2"}),b?"Audio Ready":"Start Audio"]}),r.jsxs("div",{className:"text-xs text-gray-400 px-2",children:[r.jsx("div",{children:"Intelligent instrument layering"}),r.jsx("div",{children:"Analyzes your arrangement and adds complementary parts"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{children:"Target Style"}),r.jsxs(Ye,{value:n,onValueChange:e,children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"orchestral",children:"Orchestral (Strings, Brass, Woodwinds)"}),r.jsx(le,{value:"electronic",children:"Electronic (Synths, Pads, Piano)"}),r.jsx(le,{value:"jazz",children:"Jazz (Piano, Trumpet, Saxophone)"}),r.jsx(le,{value:"rock",children:"Rock (Guitar, Organ, Strings)"}),r.jsx(le,{value:"ambient",children:"Ambient (Pads, Harp, Choir)"}),r.jsx(le,{value:"world",children:"World (Ethnic Instruments, Flute)"}),r.jsx(le,{value:"cinematic",children:"Cinematic (Full Orchestra)"}),r.jsx(le,{value:"experimental",children:"Experimental (Mixed Instruments)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{children:["Complexity: ",t[0],"/10"]}),r.jsx(me,{value:t,onValueChange:s,max:10,min:1,step:1,className:"w-full"})]}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx(ne,{onClick:N,disabled:x.isPending,className:"bg-studio-accent hover:bg-blue-500 flex-1",children:x.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-layer-group mr-2"}),"Generate Layers"]})}),i.length>0&&r.jsxs(ne,{onClick:C,disabled:l||!b,className:"bg-green-600 hover:bg-green-500",children:[r.jsx("i",{className:`fas ${l?"fa-stop":"fa-play"} mr-2`}),l?"Stop":"Play All"]})]})]})]}),r.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-center",children:r.jsxs("div",{className:"max-w-md",children:[r.jsx("i",{className:"fas fa-layer-group text-6xl text-gray-600 mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Layers Generated"}),r.jsx("p",{className:"text-gray-400 mb-6",children:'Click "Generate Layers" to have AI analyze your current arrangement and add intelligent instrumental layers with piano, violin, guitar, flute, trumpet, and other melodic instruments.'}),r.jsxs("div",{className:"text-sm text-gray-500 space-y-2",children:[r.jsx("p",{children:r.jsx("strong",{children:"Current Arrangement:"})}),r.jsxs("p",{children:[" Beats: ",S.currentPattern?"Available":"None"]}),r.jsxs("p",{children:[" Melody: ",S.currentMelody?.length?`${S.currentMelody.length} notes`:"None"]}),r.jsxs("p",{children:[" Lyrics: ",S.currentLyrics?"Available":"None"]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:r.jsx("strong",{children:"Available Instruments:"})}),r.jsx("div",{className:"flex flex-wrap gap-1 text-xs",children:["Piano","Violin","Guitar","Flute","Trumpet","Saxophone","Organ","Harp","Cello","Synthesizer","Ambient Pads","Choir"].map(A=>r.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded",children:A},A))})]})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Generated Layers (",i.length,")"]}),r.jsxs(Pe,{variant:"secondary",children:[n," style"]})]}),r.jsx("div",{className:"grid gap-4",children:i.map((A,P)=>r.jsxs(ge,{className:`border-gray-600 ${d===A.instrument?"ring-2 ring-blue-500":""}`,children:[r.jsx(Ee,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ae,{className:"text-base",children:A.instrument}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Pe,{variant:"outline",children:A.type}),r.jsxs(ne,{size:"sm",onClick:()=>E(A),disabled:l||!b,className:"bg-green-600 hover:bg-green-500",children:[r.jsx("i",{className:`fas ${l&&d===A.instrument?"fa-stop":"fa-play"} mr-1`}),l&&d===A.instrument?"Stop":"Play"]})]})]})}),r.jsx(je,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Volume:"}),r.jsxs("div",{className:"font-semibold",children:[Math.round(A.volume*100),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Pan:"}),r.jsx("div",{className:"font-semibold",children:A.pan===0?"Center":A.pan>0?`${Math.round(A.pan*100)}% R`:`${Math.round(Math.abs(A.pan)*100)}% L`})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Notes:"}),r.jsx("div",{className:"font-semibold",children:A.notes.length})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Role:"}),r.jsx("div",{className:"font-semibold text-xs",children:A.role})]})]}),(Array.isArray(A.effects)?A.effects.length>0:A.effects)&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Effects:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Array.isArray(A.effects)?A.effects:A.effects?[A.effects]:[]).map((R,T)=>r.jsx(Pe,{variant:"secondary",className:"text-xs",children:R},T))})]}),r.jsx(gp,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Note Preview (first 3):"}),A.notes.slice(0,3).map((R,T)=>r.jsxs("div",{className:"text-xs font-mono bg-gray-800 p-2 rounded",children:[Math.round(R.frequency),"Hz  ",R.start,"s  ",R.duration,"s  ",Math.round(R.velocity*100),"%"]},T)),A.notes.length>3&&r.jsxs("div",{className:"text-xs text-gray-500",children:["+",A.notes.length-3," more notes..."]})]})]})})]},P))})]})})]})}function dW(){const[n,e]=v.useState(null),[t,s]=v.useState([]),[i,a]=v.useState(!1),[l,u]=v.useState(!1),[d,h]=v.useState(null),[f,m]=v.useState(new Set),[g,b]=v.useState({inputDevice:"all",velocitySensitivity:[100],channelMode:"multi",activeChannel:1,noteRange:{min:21,max:108},sustainPedal:!0,pitchBend:!0,modulation:!0,autoConnect:!0,currentInstrument:"piano"}),{playNote:S}=tr(),x=v.useCallback(O=>{b(I=>({...I,...O}))},[]),w=v.useCallback(O=>{const I=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],D=Math.floor(O/12)-1;return{note:I[O%12],octave:D}},[]),N=v.useCallback(O=>({piano:"piano-keyboard",guitar:"strings-guitar",bass:"bass-electric",violin:"strings-violin",flute:"flute-concert",trumpet:"horns-trumpet",organ:"piano-organ"})[g.currentInstrument||"piano"]||"piano-keyboard",[g.currentInstrument]),E=v.useCallback((O,I,D)=>{const{note:B,octave:H}=w(O),z=I/127;m(X=>new Set(Array.from(X).concat(O))),h({note:O,velocity:I,channel:D});const G=N(D);S(B,H,2,G,z,!0)},[w,S,N]),C=v.useCallback((O,I)=>{m(D=>{const B=new Set(Array.from(D));return B.delete(O),B})},[]),A=v.useCallback(O=>{const[I,D,B]=O.data,H=I&15,z=I&240;if(z===144||z===128)z===144&&B>0?E(D,B,H):C(D,H);else if(z===176){const G=D,Q=B;switch(console.log(` MIDI Control Change: CC${G} = ${Q} (Channel ${H+1})`),G){case 1:console.log(` Modulation: ${Math.round(Q/127*100)}%`);break;case 7:console.log(` Volume: ${Math.round(Q/127*100)}%`);break;case 10:console.log(` Pan: ${Math.round(Q/127*100)}%`);break;case 11:console.log(` Expression: ${Math.round(Q/127*100)}%`);break;case 64:console.log(` Sustain: ${Q>63?"ON":"OFF"}`);break;case 74:console.log(` Filter: ${Math.round(Q/127*100)}%`);break;default:console.log(` Custom Control CC${G}: ${Q}`);break}}else if(z===224){const Q=((B<<7|D)-8192)/8192*2;console.log(` Pitch Bend: ${Q.toFixed(2)} semitones`)}},[E,C]),P=v.useCallback(O=>{for(const I of O.inputs.values())I.onmidimessage=A},[A]),R=v.useCallback(O=>{const I=[];for(const D of O.inputs.values())I.push({id:D.id,name:D.name||"Unknown Input",manufacturer:D.manufacturer||"Unknown",connection:"input",state:D.state});for(const D of O.outputs.values())I.push({id:D.id,name:D.name||"Unknown Output",manufacturer:D.manufacturer||"Unknown",connection:"output",state:D.state});s(I)},[]),T=v.useCallback(async()=>{if(!navigator.requestMIDIAccess){a(!1);return}try{a(!0);const O=await navigator.requestMIDIAccess();e(O),u(!0),O.onstatechange=()=>{R(O)},R(O),P(O)}catch{a(!1)}},[R,P]),j=v.useCallback(()=>{n&&R(n)},[n,R]);return v.useEffect(()=>{T()},[T]),{isSupported:i,isConnected:l,connectedDevices:t,lastNote:d,activeNotes:f,initializeMIDI:T,refreshDevices:j,settings:g,updateSettings:x}}function hW(){const{isSupported:n,isConnected:e,connectedDevices:t,lastNote:s,activeNotes:i,initializeMIDI:a,refreshDevices:l,settings:u,updateSettings:d}=dW(),[h,f]=v.useState(!1),[m,g]=v.useState(!1);return n?r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"text-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"fas fa-keyboard mr-2"}),"MIDI Controller",e&&r.jsx(Pe,{variant:"secondary",className:"ml-2 bg-green-600 text-white",children:"Connected"})]}),r.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>f(!h),children:[h?"Hide":"Show"," Details"]})]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-4 mb-4",children:[r.jsxs("h3",{className:"text-green-400 font-semibold mb-2 flex items-center",children:[r.jsx("i",{className:"fas fa-check-circle mr-2"}),"Controller Connected! Quick Setup Guide:"]}),r.jsxs("div",{className:"text-sm text-green-200 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"1. Play Notes:"})," Your controller is already playing piano - try pressing keys!"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"2. Change Instrument:"}),' Click the gear  button below, then use "Current Instrument" dropdown']}),r.jsxs("p",{children:[r.jsx("strong",{children:"3. Record Melodies:"}),' Go to "Melody Composer" tab to record your playing']}),r.jsxs("p",{children:[r.jsx("strong",{children:"4. Control Beats:"}),' Use "Beat Maker" tab - some controllers can trigger drums']}),r.jsxs("p",{children:[r.jsx("strong",{children:"5. Live Performance:"})," All tabs work with your controller for real-time control"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[e?r.jsxs(ne,{onClick:l,variant:"outline",className:"flex-1",children:[r.jsx("i",{className:"fas fa-sync mr-2"}),"Refresh Devices"]}):r.jsxs(ne,{onClick:a,className:"flex-1 bg-studio-accent hover:bg-blue-500",children:[r.jsx("i",{className:"fas fa-plug mr-2"}),"Connect MIDI"]}),r.jsx(ne,{onClick:()=>g(!m),variant:"outline",className:"px-3",children:r.jsx("i",{className:"fas fa-cog"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-300",children:"Status:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-sm",children:e?`Ready (${t.length} devices)`:"Not connected"})]})]}),t.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:["Connected Devices (",t.length,")"]}),r.jsx(_s,{className:"h-24",children:r.jsx("div",{className:"space-y-1",children:t.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-200",children:b.name}),r.jsx("div",{className:"text-gray-400",children:b.manufacturer})]}),r.jsx(Pe,{variant:b.state==="connected"?"default":"secondary",className:"text-xs",children:b.state})]},b.id))})})]}),e&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Activity"}),i.size>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Playing Notes:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:[...i].map(b=>r.jsx(Pe,{variant:"default",className:"bg-studio-accent text-xs",children:b},b))})]}),s&&r.jsx("div",{className:"p-2 bg-gray-800 rounded text-xs",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Last Note:"}),r.jsxs("span",{className:"text-gray-200",children:["Note ",s.note,"  Ch ",s.channel+1,"  Vel ",s.velocity]})]})}),i.size===0&&!s&&r.jsxs("div",{className:"text-center py-3 text-gray-500 text-sm",children:[r.jsx("i",{className:"fas fa-music mb-1"}),r.jsx("div",{children:"Play your MIDI controller to see activity"})]})]}),h&&e&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Channel Mapping"}),r.jsx(_s,{className:"h-32",children:r.jsx("div",{className:"space-y-1 text-xs",children:[{ch:1,instrument:"Piano"},{ch:2,instrument:"Guitar"},{ch:3,instrument:"Bass"},{ch:4,instrument:"Violin"},{ch:5,instrument:"Flute"},{ch:6,instrument:"Trumpet"},{ch:7,instrument:"Organ"},{ch:8,instrument:"Synth"},{ch:10,instrument:"Drums"}].map(b=>r.jsxs("div",{className:"flex justify-between p-1 bg-gray-800 rounded",children:[r.jsxs("span",{className:"text-gray-400",children:["Channel ",b.ch,":"]}),r.jsx("span",{className:"text-gray-200",children:b.instrument})]},b.ch))})}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Set your MIDI controller to different channels to play different instruments"})]}),m&&r.jsxs("div",{className:"space-y-4 border-t border-gray-600 pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center",children:[r.jsx("i",{className:"fas fa-cog mr-2"}),"MIDI Settings"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{className:"text-sm text-gray-300",children:"Input Device"}),r.jsxs(Ye,{value:u?.inputDevice,onValueChange:b=>d({inputDevice:b}),children:[r.jsx(He,{className:"bg-gray-800 border-gray-600",children:r.jsx(Xe,{placeholder:"Select MIDI input device"})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"all",children:"All Connected Devices"}),t.filter(b=>b.connection==="input"||b.connection==="input/output").map(b=>r.jsxs(le,{value:b.id,children:[b.name," (",b.manufacturer,")"]},b.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{className:"text-sm text-gray-300",children:["Velocity Sensitivity: ",u?.velocitySensitivity?.[0]||100,"%"]}),r.jsx(me,{value:u?.velocitySensitivity||[100],onValueChange:b=>d({velocitySensitivity:b}),max:200,min:50,step:10,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[r.jsx("span",{children:"Less sensitive"}),r.jsx("span",{children:"More sensitive"})]})]}),r.jsxs("div",{className:"space-y-2 bg-blue-900/20 border border-blue-600 rounded-lg p-3",children:[r.jsx(Ne,{className:"text-sm text-blue-300 font-semibold",children:" Current Instrument"}),r.jsxs(Ye,{value:u?.currentInstrument||"piano",onValueChange:b=>d({currentInstrument:b}),children:[r.jsx(He,{className:"bg-gray-800 border-gray-600",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"piano",children:" Piano"}),r.jsx(le,{value:"guitar",children:" Guitar"}),r.jsx(le,{value:"violin",children:" Violin"}),r.jsx(le,{value:"flute",children:" Flute"}),r.jsx(le,{value:"trumpet",children:" Trumpet"}),r.jsx(le,{value:"bass",children:" Bass"}),r.jsx(le,{value:"organ",children:" Organ"})]})]}),r.jsx("div",{className:"text-xs text-blue-200",children:"This changes the instrument sound for your MIDI controller"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{className:"text-sm text-gray-300",children:"MIDI Channel Mode"}),r.jsxs(Ye,{value:u?.channelMode,onValueChange:b=>d({channelMode:b}),children:[r.jsx(He,{className:"bg-gray-800 border-gray-600",children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"omni",children:"Omni (All Channels)"}),r.jsx(le,{value:"multi",children:"Multi-Channel Instruments"}),r.jsx(le,{value:"single",children:"Single Channel"})]})]})]}),u?.channelMode==="single"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ne,{className:"text-sm text-gray-300",children:["Active Channel: ",u?.activeChannel||1]}),r.jsx(me,{value:[u?.activeChannel||1],onValueChange:b=>d({activeChannel:b[0]}),max:16,min:1,step:1,className:"w-full"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ne,{className:"text-sm text-gray-300",children:"Note Range"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xs text-gray-400",children:"Lowest Note"}),r.jsx(me,{value:[u?.noteRange?.min||21],onValueChange:b=>d({noteRange:{...u?.noteRange,min:b[0]}}),max:127,min:0,step:1,className:"w-full","aria-label":"Lowest MIDI note range"}),r.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Note ",u?.noteRange?.min||21]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xs text-gray-400",children:"Highest Note"}),r.jsx(me,{value:[u?.noteRange?.max||108],onValueChange:b=>d({noteRange:{...u?.noteRange,max:b[0]}}),max:127,min:0,step:1,className:"w-full","aria-label":"Highest MIDI note range"}),r.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Note ",u?.noteRange?.max||108]})]})]})]}),r.jsx(gp,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ne,{className:"text-sm text-gray-300",children:"Advanced Options"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ne,{className:"text-sm text-gray-400",children:"Enable Sustain Pedal"}),r.jsx(zs,{checked:u?.sustainPedal!==!1,onCheckedChange:b=>d({sustainPedal:b}),"aria-label":"Enable sustain pedal support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ne,{className:"text-sm text-gray-400",children:"Enable Pitch Bend"}),r.jsx(zs,{checked:u?.pitchBend!==!1,onCheckedChange:b=>d({pitchBend:b}),"aria-label":"Enable pitch bend support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ne,{className:"text-sm text-gray-400",children:"Enable Modulation"}),r.jsx(zs,{checked:u?.modulation!==!1,onCheckedChange:b=>d({modulation:b}),"aria-label":"Enable modulation wheel support"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ne,{className:"text-sm text-gray-400",children:"Auto-connect New Devices"}),r.jsx(zs,{checked:u?.autoConnect!==!1,onCheckedChange:b=>d({autoConnect:b}),"aria-label":"Auto-connect new MIDI devices"})]})]}),r.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>d({}),className:"w-full text-xs",children:[r.jsx("i",{className:"fas fa-undo mr-2"}),"Reset to Default Settings"]})]}),e&&t.length===0&&r.jsxs("div",{className:"text-center py-4 text-gray-500",children:[r.jsx("i",{className:"fas fa-search text-2xl mb-2"}),r.jsx("p",{className:"text-sm mb-2",children:"No MIDI devices detected"}),r.jsx("p",{className:"text-xs mb-3",children:"Make sure your MIDI controller is connected and powered on"}),r.jsxs(ne,{size:"sm",variant:"outline",onClick:l,children:[r.jsx("i",{className:"fas fa-sync mr-2"}),"Scan for Devices"]})]}),h&&r.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:[r.jsx("i",{className:"fas fa-question-circle mr-2"}),"Troubleshooting"]}),r.jsxs("div",{className:"space-y-2 text-xs text-gray-400",children:[r.jsx("div",{children:" Ensure your MIDI device is connected via USB or MIDI cable"}),r.jsx("div",{children:" Check that your device is powered on and recognized by your system"}),r.jsx("div",{children:" Try refreshing devices if your controller doesn't appear"}),r.jsx("div",{children:" Some devices may require specific drivers or software"}),r.jsx("div",{children:" Web MIDI works best in Chrome, Edge, or Opera browsers"})]})]})]})]}):r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"text-gray-200 flex items-center",children:[r.jsx("i",{className:"fas fa-keyboard mr-2"}),"MIDI Controller"]})}),r.jsx(je,{children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-500 text-2xl mb-2"}),r.jsx("p",{className:"text-gray-400 mb-3",children:"Web MIDI API not supported in this browser"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Try using Chrome, Edge, or Opera for MIDI support"})]})})]})}var Iv="Progress",Fv=100,[pW,dK]=En(Iv),[fW,mW]=pW(Iv),EP=v.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:i,getValueLabel:a=gW,...l}=n;(i||i===0)&&!W_(i)&&console.error(yW(`${i}`,"Progress"));const u=W_(i)?i:Fv;s!==null&&!H_(s,u)&&console.error(xW(`${s}`,"Progress"));const d=H_(s,u)?s:null,h=gh(d)?a(d,u):void 0;return r.jsx(fW,{scope:t,value:d,max:u,children:r.jsx(Me.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":gh(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":OP(d,u),"data-value":d??void 0,"data-max":u,...l,ref:e})})});EP.displayName=Iv;var MP="ProgressIndicator",RP=v.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,i=mW(MP,t);return r.jsx(Me.div,{"data-state":OP(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});RP.displayName=MP;function gW(n,e){return`${Math.round(n/e*100)}%`}function OP(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function gh(n){return typeof n=="number"}function W_(n){return gh(n)&&!isNaN(n)&&n>0}function H_(n,e){return gh(n)&&!isNaN(n)&&n<=e&&n>=0}function yW(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Fv}\`.`}function xW(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Fv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var IP=EP,vW=RP;const Dv=v.forwardRef(({className:n,value:e,...t},s)=>r.jsx(IP,{ref:s,className:Ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:r.jsx(vW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Dv.displayName=IP.displayName;function bW(){const[n,e]=v.useState([]),[t,s]=v.useState(null);v.useEffect(()=>{const d=localStorage.getItem("codeMusic_metrics");if(d)try{e(JSON.parse(d))}catch(f){console.error("Failed to load metrics:",f)}const h=f=>{const m=f.detail;e(g=>{const b=[m,...g].slice(0,50);return localStorage.setItem("codeMusic_metrics",JSON.stringify(b)),b})};return window.addEventListener("codeMusic_metricsUpdate",h),()=>{window.removeEventListener("codeMusic_metricsUpdate",h)}},[]);const a=(()=>{if(n.length===0)return null;const d=n.length,h=n.reduce((x,w)=>x+w.performance.generationTimeMs,0)/d,f=n.filter(x=>x.performance.fallbackUsed).length/d*100,m=n.reduce((x,w)=>(x[w.language]=(x[w.language]||0)+1,x),{}),g=Object.entries(m).sort((x,w)=>w[1]-x[1])[0],b=n.reduce((x,w)=>x+w.musicGeneration.instruments.length,0)/d,S=n.reduce((x,w)=>(x[w.performance.quality]=(x[w.performance.quality]||0)+1,x),{});return{totalSessions:d,avgGenerationTime:Math.round(h),fallbackRate:Math.round(f*10)/10,topLanguage:g?g[0]:"N/A",avgInstruments:Math.round(b*10)/10,qualityDistribution:S}})(),l=d=>{switch(d){case"excellent":return"bg-green-500";case"good":return"bg-blue-500";case"fair":return"bg-yellow-500";case"poor":return"bg-red-500";default:return"bg-gray-500"}},u=d=>d<1e3?`${d}ms`:`${(d/1e3).toFixed(1)}s`;return r.jsxs("div",{className:"flex flex-col h-full bg-studio-bg text-white",children:[r.jsx("div",{className:"flex-none p-6 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-studio-accent",children:"Performance Metrics"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"AI Code-to-Music generation analytics and performance insights"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Pe,{variant:"outline",className:"border-studio-accent text-studio-accent",children:[n.length," Sessions"]}),r.jsx(Pe,{variant:"outline",className:"border-green-500 text-green-500",children:"Live Tracking"})]})]})}),r.jsx(_s,{className:"flex-1 p-6",children:a?r.jsxs(Bi,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(Hr,{className:"grid grid-cols-3 w-full bg-studio-panel",children:[r.jsx(dt,{value:"overview",children:"Overview"}),r.jsx(dt,{value:"sessions",children:"Sessions"}),r.jsx(dt,{value:"analysis",children:"Analysis"})]}),r.jsxs(ht,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(ge,{className:"bg-studio-panel border-gray-600",children:r.jsxs(Ee,{className:"pb-2",children:[r.jsx(rn,{children:"Total Sessions"}),r.jsx(Ae,{className:"text-2xl text-studio-accent",children:a.totalSessions})]})}),r.jsx(ge,{className:"bg-studio-panel border-gray-600",children:r.jsxs(Ee,{className:"pb-2",children:[r.jsx(rn,{children:"Avg Generation Time"}),r.jsx(Ae,{className:"text-2xl text-blue-400",children:u(a.avgGenerationTime)})]})}),r.jsx(ge,{className:"bg-studio-panel border-gray-600",children:r.jsxs(Ee,{className:"pb-2",children:[r.jsx(rn,{children:"Fallback Rate"}),r.jsxs(Ae,{className:"text-2xl text-yellow-400",children:[a.fallbackRate,"%"]})]})}),r.jsx(ge,{className:"bg-studio-panel border-gray-600",children:r.jsxs(Ee,{className:"pb-2",children:[r.jsx(rn,{children:"Top Language"}),r.jsx(Ae,{className:"text-2xl text-green-400",children:a.topLanguage})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Quality Distribution"}),r.jsx(rn,{children:"AI generation quality metrics"})]}),r.jsx(je,{className:"space-y-3",children:Object.entries(a.qualityDistribution).map(([d,h])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${l(d)}`}),r.jsx("span",{className:"capitalize",children:d})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-400",children:h}),r.jsx(Dv,{value:h/a.totalSessions*100,className:"w-20 h-2"})]})]},d))})]}),r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Performance Trends"}),r.jsx(rn,{children:"Recent generation statistics"})]}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Avg Instruments per Track"}),r.jsx("span",{className:"text-studio-accent font-mono",children:a.avgInstruments})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"AI Success Rate"}),r.jsxs("span",{className:"text-green-400 font-mono",children:[Math.round((100-a.fallbackRate)*10)/10,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Most Recent Quality"}),r.jsx(Pe,{className:`${l(n[0]?.performance.quality||"fair")} text-white`,children:n[0]?.performance.quality||"N/A"})]})]})]})]})]}),r.jsx(ht,{value:"sessions",className:"space-y-4",children:r.jsx("div",{className:"space-y-4",children:n.slice(0,20).map((d,h)=>r.jsx(ge,{className:"bg-studio-panel border-gray-600 cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>s(t?.session===d.session?null:d),children:r.jsxs(je,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${l(d.performance.quality)}`}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[d.language,"  ",d.musicGeneration.instruments.length," instruments"]}),r.jsx("div",{className:"text-sm text-gray-400",children:new Date(d.timestamp).toLocaleString()})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(Pe,{variant:"outline",className:"border-blue-400 text-blue-400",children:[d.musicGeneration.totalNotes," notes"]}),r.jsx("span",{className:"text-sm text-gray-400",children:u(d.performance.generationTimeMs)}),d.performance.fallbackUsed&&r.jsx(Pe,{variant:"outline",className:"border-yellow-400 text-yellow-400",children:"Fallback"})]})]}),t?.session===d.session&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-600 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Code Complexity"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Lines:"}),r.jsx("span",{children:d.codeComplexity.lines})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Functions:"}),r.jsx("span",{children:d.codeComplexity.functions})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Classes:"}),r.jsx("span",{children:d.codeComplexity.classes})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Music Analysis"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Rhythm Complexity:"}),r.jsx("span",{children:d.musicGeneration.rhythmComplexity.toFixed(1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Harmonic Diversity:"}),r.jsx("span",{children:d.musicGeneration.harmonicDiversity.toFixed(1)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Avg Note Duration:"}),r.jsxs("span",{children:[d.musicGeneration.averageNoteDuration.toFixed(2),"s"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Instrument Distribution"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(d.musicGeneration.noteDistribution).map(([f,m])=>r.jsxs(Pe,{variant:"outline",className:"border-purple-400 text-purple-400",children:[f,": ",m]},f))})]})]})]})},d.session))})}),r.jsx(ht,{value:"analysis",className:"space-y-6",children:r.jsxs(ge,{className:"bg-studio-panel border-gray-600",children:[r.jsxs(Ee,{children:[r.jsx(Ae,{children:"Advanced Analytics"}),r.jsx(rn,{children:"Deep insights into code-to-music generation patterns"})]}),r.jsx(je,{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("i",{className:"fas fa-chart-line text-gray-400 text-3xl mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Advanced analytics coming soon..."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Will include trend analysis, pattern recognition, and optimization suggestions"})]})})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-xl"})}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Data Yet"}),r.jsx("p",{className:"text-gray-400",children:"Generate some music from code to see performance metrics here"})]})})]})}const wW=[{id:"kick",name:"Kick",volume:.8,muted:!1,solo:!1,effects:{filter:{cutoff:100,resonance:0,type:"lowpass"},distortion:{drive:0,tone:50},reverb:{size:30,decay:40,wet:0},delay:{time:.25,feedback:0,wet:0}}},{id:"snare",name:"Snare",volume:.7,muted:!1,solo:!1,effects:{filter:{cutoff:80,resonance:10,type:"highpass"},distortion:{drive:15,tone:60},reverb:{size:50,decay:60,wet:20},delay:{time:.125,feedback:0,wet:0}}},{id:"hhc",name:"Hi-Hat C",volume:.6,muted:!1,solo:!1,effects:{filter:{cutoff:90,resonance:5,type:"highpass"},distortion:{drive:0,tone:70},reverb:{size:20,decay:30,wet:10},delay:{time:.125,feedback:0,wet:0}}},{id:"hho",name:"Hi-Hat O",volume:.5,muted:!1,solo:!1,effects:{filter:{cutoff:85,resonance:8,type:"highpass"},distortion:{drive:0,tone:75},reverb:{size:40,decay:50,wet:15},delay:{time:.25,feedback:0,wet:0}}},{id:"clap",name:"Clap",volume:.6,muted:!1,solo:!1,effects:{filter:{cutoff:70,resonance:5,type:"bandpass"},distortion:{drive:10,tone:55},reverb:{size:60,decay:70,wet:25},delay:{time:.25,feedback:10,wet:5}}},{id:"crash",name:"Crash",volume:.4,muted:!1,solo:!1,effects:{filter:{cutoff:95,resonance:2,type:"highpass"},distortion:{drive:0,tone:80},reverb:{size:80,decay:90,wet:40},delay:{time:.5,feedback:15,wet:10}}},{id:"tom",name:"Tom",volume:.7,muted:!1,solo:!1,effects:{filter:{cutoff:60,resonance:15,type:"lowpass"},distortion:{drive:5,tone:45},reverb:{size:40,decay:50,wet:15},delay:{time:.25,feedback:0,wet:0}}},{id:"perc",name:"Perc",volume:.5,muted:!1,solo:!1,effects:{filter:{cutoff:75,resonance:8,type:"bandpass"},distortion:{drive:8,tone:65},reverb:{size:30,decay:40,wet:12},delay:{time:.375,feedback:8,wet:3}}}];function SW(){const[n,e]=v.useState(!1),[t,s]=v.useState(120),[i,a]=v.useState(0),[l,u]=v.useState(16),[d,h]=v.useState(0),[f,m]=v.useState(0),[g,b]=v.useState(()=>wW.map(T=>({...T,pattern:Array(16).fill(null).map(()=>({active:!1,velocity:100,probability:100,swing:0,retrigger:1,filter:50,distortion:0}))}))),[S,x]=v.useState({compressor:{threshold:-12,ratio:4,attack:3,release:100},eq:{low:0,mid:0,high:0},reverb:{size:50,decay:50,wet:20},limiter:{threshold:-1,release:50}}),w=v.useRef(),{toast:N}=yn(),E=async()=>{try{if(await od.initialize(),n)od.stop(),e(!1),w.current&&clearInterval(w.current);else{const T={kick:g[0].pattern.map(j=>j.active),snare:g[1].pattern.map(j=>j.active),hihat:g[2].pattern.map(j=>j.active),openhat:g[3].pattern.map(j=>j.active),clap:g[4].pattern.map(j=>j.active),crash:g[5].pattern.map(j=>j.active),tom:g[6].pattern.map(j=>j.active),perc:g[7].pattern.map(j=>j.active)};await od.playBeat(T,[],t),e(!0),w.current=setInterval(()=>{h(j=>(j+1)%l)},60/t/4*1e3)}}catch{N({title:"Playback Error",description:"Failed to start audio playback",variant:"destructive"})}},C=(T,j)=>{b(O=>O.map((I,D)=>D===T?{...I,pattern:I.pattern.map((B,H)=>H===j?{...B,active:!B.active}:B)}:I))},A=(T,j,O)=>{b(I=>I.map((D,B)=>B===T?{...D,pattern:D.pattern.map((H,z)=>z===j?{...H,velocity:O}:H)}:D))},P=T=>{b(j=>j.map((O,I)=>I===T?{...O,pattern:O.pattern.map(D=>({...D,active:Math.random()>.7,velocity:60+Math.random()*40,probability:70+Math.random()*30}))}:O))},R=T=>{b(j=>j.map((O,I)=>I===T?{...O,pattern:O.pattern.map(D=>({...D,active:!1}))}:O))};return v.useEffect(()=>()=>{w.current&&clearInterval(w.current)},[]),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:r.jsx(po,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Advanced Sequencer"}),r.jsx("p",{className:"text-muted-foreground",children:"Professional multi-layered beat production"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Pe,{variant:"secondary",className:"bg-orange-500/10 text-orange-500",children:[r.jsx(en,{className:"h-3 w-3 mr-1"}),"CO Producer"]}),r.jsx(Pe,{variant:"secondary",children:"32-Step"}),r.jsx(Pe,{variant:"secondary",children:"Multi-FX"})]})]}),r.jsxs(Bi,{defaultValue:"sequencer",className:"w-full",children:[r.jsxs(Hr,{className:"grid w-full grid-cols-4",children:[r.jsx(dt,{value:"sequencer",children:"Sequencer"}),r.jsx(dt,{value:"modulation",children:"Modulation"}),r.jsx(dt,{value:"effects",children:"Effects"}),r.jsx(dt,{value:"mixer",children:"Mixer"})]}),r.jsxs(ht,{value:"sequencer",children:[r.jsxs(ge,{className:"mb-6",children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(pn,{className:"h-5 w-5"}),"Transport"]})}),r.jsx(je,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{onClick:E,className:`w-16 h-16 rounded-full ${n?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:n?r.jsx(hc,{className:"h-6 w-6"}):r.jsx(pn,{className:"h-6 w-6"})}),r.jsx(ne,{variant:"outline",onClick:()=>{od.stop(),e(!1)},children:r.jsx(ua,{className:"h-4 w-4"})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["BPM: ",t]}),r.jsx(me,{value:[t],onValueChange:T=>s(T[0]),min:60,max:200,step:1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Swing: ",i,"%"]}),r.jsx(me,{value:[i],onValueChange:T=>a(T[0]),min:0,max:50,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Pattern Length"}),r.jsxs(Ye,{value:l.toString(),onValueChange:T=>u(parseInt(T)),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"8",children:"8 Steps"}),r.jsx(le,{value:"16",children:"16 Steps"}),r.jsx(le,{value:"32",children:"32 Steps"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{variant:"outline",size:"sm",onClick:()=>P(f),children:r.jsx(Hy,{className:"h-4 w-4"})}),r.jsx(ne,{variant:"outline",size:"sm",onClick:()=>R(f),children:r.jsx(Ch,{className:"h-4 w-4"})})]})]})})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Gg,{className:"h-5 w-5"}),"Step Sequencer Matrix"]})}),r.jsx(je,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-17 gap-1",children:[r.jsx("div",{className:"text-xs text-center font-medium",children:"Track"}),Array.from({length:16},(T,j)=>r.jsx("div",{className:`text-xs text-center font-medium p-1 rounded ${d===j&&n?"bg-orange-500 text-white":j%4===0?"bg-primary/20":"bg-secondary/50"}`,children:j+1},j))]}),g.map((T,j)=>r.jsxs("div",{className:"grid grid-cols-17 gap-1 items-center",children:[r.jsx(ne,{variant:f===j?"default":"outline",size:"sm",className:"text-xs justify-start",onClick:()=>m(j),children:T.name}),T.pattern.slice(0,l).map((O,I)=>r.jsx(ne,{size:"sm",className:`w-8 h-8 p-0 relative ${O.active?"bg-orange-500 hover:bg-orange-600":"bg-secondary hover:bg-secondary/80"}`,onClick:()=>C(j,I),onContextMenu:D=>{D.preventDefault()},children:O.active&&r.jsx("div",{className:"absolute inset-0 bg-white/20 rounded",style:{height:`${O.velocity}%`}})},I))]},T.id))]})})]})]}),r.jsx(ht,{value:"modulation",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Step Modulation"})}),r.jsx(je,{children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-4",children:"Velocity Modulation"}),r.jsx("div",{className:"grid grid-cols-16 gap-1",children:g[f]?.pattern.slice(0,l).map((T,j)=>r.jsxs("div",{className:"space-y-1",children:[r.jsx(me,{orientation:"vertical",value:[T.velocity],onValueChange:O=>A(f,j,O[0]),min:0,max:127,step:1,className:"h-16"}),r.jsx("div",{className:"text-xs text-center",children:j+1})]},j))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-4",children:"Probability"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(me,{value:[g[f]?.pattern[0]?.probability||100],min:0,max:100,step:1,className:"w-full"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Per-step probability controls coming soon"})]})]})]})})})]})}),r.jsx(ht,{value:"effects",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(aj,{className:"h-5 w-5"}),"Track Effects"]})}),r.jsx(je,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:[g[f]?.name," Effects"]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Filter Cutoff"}),r.jsx(me,{value:[g[f]?.effects.filter.cutoff||50],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Distortion Drive"}),r.jsx(me,{value:[g[f]?.effects.distortion.drive||0],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Reverb Send"}),r.jsx(me,{value:[g[f]?.effects.reverb.wet||0],min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Delay Send"}),r.jsx(me,{value:[g[f]?.effects.delay.wet||0],min:0,max:100,step:1})]})]})]})})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Ky,{className:"h-5 w-5"}),"Master Effects"]})}),r.jsx(je,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Compressor Threshold"}),r.jsx(me,{value:[S.compressor.threshold+40],min:0,max:40,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ Low"}),r.jsx(me,{value:[S.eq.low+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ Mid"}),r.jsx(me,{value:[S.eq.mid+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"EQ High"}),r.jsx(me,{value:[S.eq.high+12],min:0,max:24,step:.5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted-foreground",children:"Master Reverb"}),r.jsx(me,{value:[S.reverb.wet],min:0,max:100,step:1})]})]})})]})]})}),r.jsx(ht,{value:"mixer",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Ai,{className:"h-5 w-5"}),"Mixer Console"]})}),r.jsx(je,{children:r.jsx("div",{className:"grid grid-cols-8 gap-4",children:g.map((T,j)=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-xs font-medium text-center",children:T.name}),r.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx(ne,{size:"sm",variant:T.solo?"default":"outline",className:"w-8 h-6 text-xs",onClick:()=>{b(O=>O.map((I,D)=>D===j?{...I,solo:!I.solo}:I))},children:"S"}),r.jsx(ne,{size:"sm",variant:T.muted?"destructive":"outline",className:"w-8 h-6 text-xs",onClick:()=>{b(O=>O.map((I,D)=>D===j?{...I,muted:!I.muted}:I))},children:"M"}),r.jsx(me,{orientation:"vertical",value:[T.volume*100],onValueChange:O=>{b(I=>I.map((D,B)=>B===j?{...D,volume:O[0]/100}:D))},min:0,max:100,step:1,className:"h-32"}),r.jsx("div",{className:"text-xs text-center",children:Math.round(T.volume*100)})]})]},T.id))})})]})})]})]})}function _W(){const[n,e]=v.useState(!1),[t,s]=v.useState({grainSize:50,density:70,position:0,pitch:0,reverse:!1,spread:30,shape:"gaussian",texture:40,feedback:20,modulation:0}),[i,a]=v.useState([{id:"granular1",name:"Granular A",type:"granular",params:{...t},active:!0},{id:"wavetable1",name:"Wavetable B",type:"wavetable",params:{waveform:"complex",modulation:30,harmonics:60},active:!1},{id:"fm1",name:"FM Synthesis",type:"fm",params:{carrier:440,modulator:220,index:40,ratio:2},active:!1},{id:"spectral1",name:"Spectral Engine",type:"spectral",params:{bins:64,morph:50,harmonics:80,phase:0},active:!1}]),[l,u]=v.useState(0),[d,h]=v.useState({macro1:50,macro2:30,macro3:70,macro4:20}),f=v.useRef(null),m=v.useRef(null);v.useEffect(()=>((async()=>{await sp(),m.current=new av({url:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmMRN2O+5cuZbDMAH4Xa9NWuVg4TCz2nz+eTaSkHMV+0zMx5WQ4SFz5+7diLYCtEpOD98IlZNA8VGj6vy/KHCz4+rNDqYyUFJHjH8N2QQAoUcefzzZfJJGMLZLbvfgf7+9eJzO7P2C9AGDq6o8dIpOD99I5ZNBISEy9uy+eHCz5Fr+Hztm0iGDKy18eLYCtEpOD98IlZNA8VGj6vy/KHCz5fr+LyuWwjGC6t2M1pRA0UImHO8Nt5WwwSFTeqze2MSSUIKHzK8tv0KAW6nOJ5cBoFbr/K8+GPTAsTIGPP8d5/XwsRFTqDzeKQSCYGH4Qz"}).toDestination(),f.current=new Ot({type:"sawtooth",frequency:440}).toDestination()})(),()=>{m.current&&m.current.dispose(),f.current&&f.current.dispose()}),[]);const g=async()=>{try{n?(f.current?.stop(),m.current?.stop(),e(!1)):(i[l].type==="granular"?m.current?.start():f.current?.start(),e(!0))}catch(w){console.error("Playback error:",w)}},b=(w,N)=>{if(s(E=>({...E,[w]:N})),m.current)switch(w){case"grainSize":m.current.grainSize=N/1e3;break;case"position":m.current.loopStart=N/100;break;case"pitch":m.current.playbackRate=Math.pow(2,N/12);break;case"reverse":m.current.reverse=N;break}},S=()=>{const w={grainSize:Math.random()*100,density:Math.random()*100,position:Math.random()*100,pitch:(Math.random()-.5)*24,reverse:Math.random()>.5,spread:Math.random()*100,shape:["gaussian","triangle","square"][Math.floor(Math.random()*3)],texture:Math.random()*100,feedback:Math.random()*50,modulation:Math.random()*100};s(w)},x=()=>{s({grainSize:50,density:70,position:0,pitch:0,reverse:!1,spread:30,shape:"gaussian",texture:40,feedback:20,modulation:0})};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center",children:r.jsx(Nd,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Granular Engine"}),r.jsx("p",{className:"text-muted-foreground",children:"Advanced synthesis & texture manipulation"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Pe,{variant:"secondary",className:"bg-purple-500/10 text-purple-500",children:[r.jsx(Kn,{className:"h-3 w-3 mr-1"}),"Spectral"]}),r.jsx(Pe,{variant:"secondary",children:"Multi-Engine"}),r.jsx(Pe,{variant:"secondary",children:"Real-time"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(po,{className:"h-5 w-5"}),"Synthesis Engines"]})}),r.jsxs(je,{className:"space-y-4",children:[i.map((w,N)=>r.jsx(ne,{variant:l===N?"default":"outline",className:"w-full justify-start",onClick:()=>u(N),children:r.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="granular"&&r.jsx(Nd,{className:"h-4 w-4"}),w.type==="wavetable"&&r.jsx(zd,{className:"h-4 w-4"}),w.type==="fm"&&r.jsx(dO,{className:"h-4 w-4"}),w.type==="spectral"&&r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:w.name})]})},w.id)),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(ne,{onClick:g,className:"w-full",children:[n?"Stop":"Play"," Engine"]})})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Nd,{className:"h-5 w-5"}),"Granular Parameters"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Grain Size: ",t.grainSize.toFixed(1),"ms"]}),r.jsx(me,{value:[t.grainSize],onValueChange:w=>b("grainSize",w[0]),min:1,max:200,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Density: ",t.density.toFixed(1),"%"]}),r.jsx(me,{value:[t.density],onValueChange:w=>b("density",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Position: ",t.position.toFixed(1),"%"]}),r.jsx(me,{value:[t.position],onValueChange:w=>b("position",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Pitch: ",t.pitch>0?"+":"",t.pitch.toFixed(1)," st"]}),r.jsx(me,{value:[t.pitch],onValueChange:w=>b("pitch",w[0]),min:-24,max:24,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Spread: ",t.spread.toFixed(1),"%"]}),r.jsx(me,{value:[t.spread],onValueChange:w=>b("spread",w[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Grain Shape"}),r.jsxs(Ye,{value:t.shape,onValueChange:w=>b("shape",w),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"gaussian",children:"Gaussian"}),r.jsx(le,{value:"triangle",children:"Triangle"}),r.jsx(le,{value:"square",children:"Square"}),r.jsx(le,{value:"exponential",children:"Exponential"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ne,{variant:"outline",size:"sm",onClick:S,children:[r.jsx(Hy,{className:"h-4 w-4 mr-1"}),"Random"]}),r.jsxs(ne,{variant:"outline",size:"sm",onClick:x,children:[r.jsx(Ch,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(en,{className:"h-5 w-5"}),"Macro Controls"]})}),r.jsxs(je,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"X/Y Performance Pad"}),r.jsx("div",{className:"relative w-full h-32 bg-secondary rounded-lg border",children:r.jsx("div",{className:"absolute w-4 h-4 bg-primary rounded-full transform -translate-x-2 -translate-y-2 cursor-pointer",style:{left:`${d.macro1}%`,top:`${100-d.macro2}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:["X: ",d.macro1]}),r.jsxs("span",{children:["Y: ",d.macro2]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 1: Texture"}),r.jsx(me,{value:[d.macro1],onValueChange:w=>h(N=>({...N,macro1:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 2: Movement"}),r.jsx(me,{value:[d.macro2],onValueChange:w=>h(N=>({...N,macro2:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 3: Harmonics"}),r.jsx(me,{value:[d.macro3],onValueChange:w=>h(N=>({...N,macro3:w[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Macro 4: Chaos"}),r.jsx(me,{value:[d.macro4],onValueChange:w=>h(N=>({...N,macro4:w[0]})),min:0,max:100,step:1})]})]}),r.jsxs("div",{className:"space-y-3 border-t pt-4",children:[r.jsx("h4",{className:"font-medium",children:"Advanced Effects"}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Spectral Filter"}),r.jsx(me,{value:[t.texture],onValueChange:w=>b("texture",w[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Feedback"}),r.jsx(me,{value:[t.feedback],onValueChange:w=>b("feedback",w[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Modulation"}),r.jsx(me,{value:[t.modulation],onValueChange:w=>b("modulation",w[0]),min:0,max:100,step:1})]})]})]})]})]})]})}function CW(){const[n,e]=v.useState(!1),[t,s]=v.useState({waveform:"sawtooth",position:0,modulation:30,harmonics:60,phase:0,sync:!1,morphing:40,brightness:70,character:50,motion:20}),[i,a]=v.useState([{rate:2,depth:50,shape:"sine",target:"position",sync:!0},{rate:.5,depth:30,shape:"triangle",target:"harmonics",sync:!0},{rate:4,depth:70,shape:"square",target:"brightness",sync:!1},{rate:1,depth:40,shape:"sawtooth",target:"morphing",sync:!0}]),[l,u]=v.useState(0),[d,h]=v.useState({attack:.1,decay:.3,sustain:.7,release:1}),[f,m]=v.useState({type:"lowpass",frequency:2e3,resonance:5,drive:0,slope:24}),g=v.useRef(null),b=v.useRef([]);v.useEffect(()=>((async()=>{await sp(),g.current=new Ot({type:t.waveform,frequency:220});const C=new hp({type:"lowpass",frequency:2e3,Q:5}),A=new Mc({attack:.1,decay:.3,sustain:.7,release:1});g.current.chain(C,A,cU),b.current=i.map((P,R)=>{const T=new iv({frequency:P.rate,type:P.shape,amplitude:P.depth/100});switch(P.target){case"position":T.connect(g.current.frequency);break;case"harmonics":T.connect(C.frequency);break;case"brightness":T.connect(C.Q);break}return P.sync&&T.sync(),T.start(),T})})(),()=>{g.current&&g.current.dispose(),b.current.forEach(C=>C?.dispose())}),[]);const S=async()=>{try{n?(g.current?.stop(),e(!1)):(g.current?.start(),e(!0))}catch(E){console.error("Playback error:",E)}},x=(E,C)=>{if(s(A=>({...A,[E]:C})),g.current)switch(E){case"waveform":g.current.type=C;break;case"harmonics":typeof C=="number"&&(g.current.frequency.value=220*(1+C/1e3));break;case"phase":g.current.phase=typeof C=="number"?C:0;break}},w=(E,C,A)=>{if(a(P=>P.map((R,T)=>T===E?{...R,[C]:A}:R)),b.current[E]){const P=b.current[E];switch(C){case"rate":P.frequency.value=A;break;case"depth":P.amplitude.value=A/100;break;case"shape":P.type=A;break}}},N=()=>{const E=["sine","square","sawtooth","triangle"],C={waveform:E[Math.floor(Math.random()*E.length)],position:Math.random()*100,modulation:Math.random()*100,harmonics:Math.random()*100,phase:Math.random()*360,sync:Math.random()>.5,morphing:Math.random()*100,brightness:Math.random()*100,character:Math.random()*100,motion:Math.random()*100};s(C)};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-lg flex items-center justify-center",children:r.jsx(zd,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Wavetable Oscillator"}),r.jsx("p",{className:"text-muted-foreground",children:"Advanced wavetable synthesis & modulation"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Pe,{variant:"secondary",className:"bg-blue-500/10 text-blue-500",children:[r.jsx(zd,{className:"h-3 w-3 mr-1"}),"Wavetable"]}),r.jsx(Pe,{variant:"secondary",children:"Multi-LFO"}),r.jsx(Pe,{variant:"secondary",children:"Real-time"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Gg,{className:"h-5 w-5"}),"Wavetable Parameters"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Waveform"}),r.jsxs(Ye,{value:t.waveform,onValueChange:E=>x("waveform",E),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"sine",children:"Sine Wave"}),r.jsx(le,{value:"square",children:"Square Wave"}),r.jsx(le,{value:"sawtooth",children:"Sawtooth"}),r.jsx(le,{value:"triangle",children:"Triangle"}),r.jsx(le,{value:"custom",children:"Custom"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Position: ",t.position.toFixed(1),"%"]}),r.jsx(me,{value:[t.position],onValueChange:E=>x("position",E[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Harmonics: ",t.harmonics.toFixed(1),"%"]}),r.jsx(me,{value:[t.harmonics],onValueChange:E=>x("harmonics",E[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Morphing: ",t.morphing.toFixed(1),"%"]}),r.jsx(me,{value:[t.morphing],onValueChange:E=>x("morphing",E[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Brightness: ",t.brightness.toFixed(1),"%"]}),r.jsx(me,{value:[t.brightness],onValueChange:E=>x("brightness",E[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Character: ",t.character.toFixed(1),"%"]}),r.jsx(me,{value:[t.character],onValueChange:E=>x("character",E[0]),min:0,max:100,step:.1})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(ne,{onClick:S,className:"flex-1",children:n?"Stop":"Play"}),r.jsx(ne,{variant:"outline",size:"sm",onClick:N,children:r.jsx(Hy,{className:"h-4 w-4"})})]})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Gg,{className:"h-5 w-5"}),"LFO Modulation"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select LFO"}),r.jsx("div",{className:"grid grid-cols-4 gap-1",children:i.map((E,C)=>r.jsx(ne,{size:"sm",variant:l===C?"default":"outline",onClick:()=>u(C),children:C+1},C))})]}),i[l]&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Shape"}),r.jsxs(Ye,{value:i[l].shape,onValueChange:E=>w(l,"shape",E),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"sine",children:"Sine"}),r.jsx(le,{value:"triangle",children:"Triangle"}),r.jsx(le,{value:"square",children:"Square"}),r.jsx(le,{value:"sawtooth",children:"Sawtooth"}),r.jsx(le,{value:"noise",children:"Noise"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Rate: ",i[l].rate.toFixed(2)," Hz"]}),r.jsx(me,{value:[i[l].rate],onValueChange:E=>w(l,"rate",E[0]),min:.1,max:20,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Depth: ",i[l].depth,"%"]}),r.jsx(me,{value:[i[l].depth],onValueChange:E=>w(l,"depth",E[0]),min:0,max:100,step:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Target"}),r.jsxs(Ye,{value:i[l].target,onValueChange:E=>w(l,"target",E),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"position",children:"Position"}),r.jsx(le,{value:"harmonics",children:"Harmonics"}),r.jsx(le,{value:"brightness",children:"Brightness"}),r.jsx(le,{value:"morphing",children:"Morphing"}),r.jsx(le,{value:"character",children:"Character"})]})]})]})]})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(aj,{className:"h-5 w-5"}),"Filter & Effects"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter Type"}),r.jsxs(Ye,{value:f.type,onValueChange:E=>m(C=>({...C,type:E})),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"lowpass",children:"Low Pass"}),r.jsx(le,{value:"highpass",children:"High Pass"}),r.jsx(le,{value:"bandpass",children:"Band Pass"}),r.jsx(le,{value:"notch",children:"Notch"}),r.jsx(le,{value:"allpass",children:"All Pass"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Cutoff: ",f.frequency," Hz"]}),r.jsx(me,{value:[f.frequency],onValueChange:E=>m(C=>({...C,frequency:E[0]})),min:20,max:2e4,step:1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Resonance: ",f.resonance.toFixed(1)]}),r.jsx(me,{value:[f.resonance],onValueChange:E=>m(C=>({...C,resonance:E[0]})),min:.1,max:30,step:.1})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted-foreground",children:["Drive: ",f.drive,"%"]}),r.jsx(me,{value:[f.drive],onValueChange:E=>m(C=>({...C,drive:E[0]})),min:0,max:100,step:1})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Envelope (ADSR)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Attack: ",d.attack,"s"]}),r.jsx(me,{value:[d.attack],onValueChange:E=>h(C=>({...C,attack:E[0]})),min:.001,max:5,step:.001})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Decay: ",d.decay,"s"]}),r.jsx(me,{value:[d.decay],onValueChange:E=>h(C=>({...C,decay:E[0]})),min:.001,max:5,step:.001})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Sustain: ",d.sustain]}),r.jsx(me,{value:[d.sustain],onValueChange:E=>h(C=>({...C,sustain:E[0]})),min:0,max:1,step:.01})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs text-muted-foreground",children:["Release: ",d.release,"s"]}),r.jsx(me,{value:[d.release],onValueChange:E=>h(C=>({...C,release:E[0]})),min:.001,max:10,step:.001})]})]})]})]})]})]})]})}const K_=["Heavy synths and ambient guitars with a cyberpunk vibe, 100 BPM, C minor.","Intense and suspenseful movie trailer score with big percussion hits and chilling strings.","Dreamy lo-fi hip hop with vinyl crackle, warm pads, and mellow jazz chords, 85 BPM.","Aggressive trap beats with 808s, dark atmosphere, and industrial elements, 140 BPM.","Uplifting house music with piano melodies, vocal chops, and four-on-the-floor kicks, 128 BPM.","Cinematic orchestral composition with epic brass, soaring strings, and thunderous timpani.","Retro synthwave with nostalgic arpeggios, neon atmosphere, and driving basslines, 120 BPM.","Experimental ambient textures with granular synthesis, field recordings, and evolving drones.","Jazzy neo-soul with smooth Rhodes, walking basslines, and laid-back grooves, 90 BPM.","Hard-hitting drill beats with sliding 808s, hi-hat rolls, and menacing melodies, 150 BPM."];function jW(){const[n,e]=v.useState(""),[t,s]=v.useState(4),[i,a]=v.useState([]),[l,u]=v.useState("musicgen"),[d,h]=v.useState(null),[f,m]=v.useState([75]),{toast:g}=yn(),b=Fy(),S=gt({mutationFn:async j=>{const O=await fetch("/api/packs/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:j,count:t,aiProvider:l})});if(!O.ok)throw new Error(`Pack generation failed: ${O.statusText}`);return O.json()},onSuccess:j=>{a(j.packs||[]),g({title:"Sample packs generated!",description:`Created ${j.packs?.length||0} unique sample packs`})},onError:j=>{g({title:"Generation failed",description:j.message,variant:"destructive"})}}),x=gt({mutationFn:async j=>{const O={name:j.title,genre:j.genre,mood:j.metadata.mood,description:j.description,generatedSamples:j.samples.map(D=>({name:D.name,type:D.type==="loop"?"drums":D.type==="oneshot"?"bass":"melody",category:D.type,audioData:w(D),description:`${D.type} sample from ${j.title}`,bpm:j.bpm,key:j.key,duration:D.duration}))},I=await fetch("/api/sample-packs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!I.ok)throw new Error(`Failed to add pack: ${I.statusText}`);return await I.json()},onSuccess:()=>{g({title:" Pack Added to Library",description:"Sample pack successfully added to your Sample Library!"}),b.invalidateQueries({queryKey:["/api/samples"]}),b.invalidateQueries({queryKey:["/api/sample-packs"]})},onError:j=>{g({title:" Failed to Add Pack",description:j.message,variant:"destructive"})}}),w=j=>{const I=Math.min(j.duration/1e3,3),D=Math.floor(44100*I),B=new ArrayBuffer(44+D*2),H=new DataView(B),z=(X,q)=>{for(let U=0;U<q.length;U++)H.setUint8(X+U,q.charCodeAt(U))};z(0,"RIFF"),H.setUint32(4,36+D*2,!0),z(8,"WAVE"),z(12,"fmt "),H.setUint32(16,16,!0),H.setUint16(20,1,!0),H.setUint16(22,1,!0),H.setUint32(24,44100,!0),H.setUint32(28,44100*2,!0),H.setUint16(32,2,!0),H.setUint16(34,16,!0),z(36,"data"),H.setUint32(40,D*2,!0);const G=(j.name||"").toLowerCase();let Q=44;for(let X=0;X<D;X++){const q=X/44100;let U=0;if(G.includes("kick")||G.includes("drum")){const M=Math.exp(-q*12),W=Math.exp(-q*8),J=Math.sin(q*2*Math.PI*(40+20*W)),de=Math.sin(q*2*Math.PI*(80+40*W)),ce=Math.exp(-q*50),pe=Math.sin(q*2*Math.PI*2e3)*ce*.3;U=(J*.8+de*.6+pe)*M*.9}else if(G.includes("snare")){const M=Math.exp(-q*6),W=Math.exp(-q*4),J=Math.sin(q*2*Math.PI*200)*W*.7,de=(Math.random()*2-1)*M*.6,ce=Math.sin(q*2*Math.PI*8e3)*M*.2;U=(J+de+ce)*.8}else if(G.includes("hihat")||G.includes("hat")){const M=Math.exp(-q*20),W=Math.sin(q*2*Math.PI*6e3)*.4,J=Math.sin(q*2*Math.PI*8e3)*.3,de=Math.sin(q*2*Math.PI*1e4)*.2,ce=(Math.random()*2-1)*.5;U=(W+J+de+ce)*M*.6}else if(G.includes("bass")||G.includes("808")||j.type==="oneshot"){const M=Math.exp(-q*1.8),W=Math.exp(-q*3),J=Math.sin(q*2*Math.PI*(35+15*W)),de=Math.sin(q*2*Math.PI*(65+25*W)),ce=Math.sin(q*2*Math.PI*(130+50*W))*.4,pe=(J*.9+de*.7+ce)*M;U=Math.tanh(pe*1.5)*.85}else if(G.includes("vocal")||G.includes("voice")){const M=Math.exp(-q*.8),W=1+.04*Math.sin(q*2*Math.PI*5.5),J=Math.sin(q*2*Math.PI*730*W)*.8,de=Math.sin(q*2*Math.PI*1090*W)*.5,ce=Math.sin(q*2*Math.PI*2440*W)*.25,pe=Math.sin(q*2*Math.PI*3400*W)*.1,F=(Math.random()*2-1)*M*.05;U=(J+de+ce+pe+F)*M*.7}else if(j.type==="loop"||G.includes("loop")){const M=q*4%1;let W=0;if(M<.1||M>.5&&M<.6){const de=Math.exp(-(M%.5)*20);W+=Math.sin(M*2*Math.PI*60)*de*.8}if(M>.2&&M<.3||M>.7&&M<.8){const de=Math.exp(-((M-.25)%.5)*15);W+=(Math.sin(M*2*Math.PI*200)*.6+(Math.random()*2-1)*.4)*de}const J=Math.exp(-(M*8%.125)*40);W+=(Math.random()*2-1)*J*.2,U=W*.6}else{const M=1+.03*Math.sin(q*2*Math.PI*5),W=Math.exp(-q*.8),J=Math.sin(q*2*Math.PI*440*M),de=Math.sin(q*2*Math.PI*880*M)*.3,ce=Math.sin(q*2*Math.PI*1320*M)*.15;U=(J+de+ce)*W*.6}U=Math.tanh(U*1.2)*.8;const Y=Math.max(-32767,Math.min(32767,U*32767));H.setInt16(Q,Y,!0),Q+=2}return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(B))))},N=()=>{if(!n.trim()){g({title:"No prompt entered",description:"Please describe the sample pack you want to create",variant:"destructive"});return}S.mutate(n)},E=()=>{const j=K_[Math.floor(Math.random()*K_.length)];e(j)},C=async j=>{try{const O=new(window.AudioContext||window.webkitAudioContext);if(O.state==="suspended"&&await O.resume(),d===j.id){h(null);return}h(j.id),await A(j,O),g({title:`Playing "${j.title}"`,description:`${j.genre}  ${j.bpm} BPM  ${j.key}`}),setTimeout(()=>{h(null)},8e3)}catch(O){console.error("Playback error:",O),g({title:"Playback failed",description:"Could not preview sample pack",variant:"destructive"}),h(null)}},A=async(j,O)=>{console.log(` Playing AI-generated pack: "${j.title}"`),console.log(` Pack contains ${j.samples.length} samples:`,j.samples.map(D=>D.name)),j.samples.some(D=>D.audioUrl)?await P(j):await R(j)},P=async j=>{console.log(` Playing real MusicGen audio for "${j.title}"`);for(const O of j.samples)if(O.audioUrl)try{const I=new Audio(O.audioUrl);I.volume=.7,console.log(` Playing real AI audio: "${O.name}"`),setTimeout(()=>{d&&I.play().catch(D=>{console.error(`Failed to play audio for ${O.name}:`,D)})},0),setTimeout(()=>{I.pause(),I.remove()},(O.duration||8)*1e3)}catch(I){console.error(`Error playing real audio for ${O.name}:`,I)}},R=async(j,O)=>{console.log(` Synthesizing AI-designed samples for "${j.title}"`),await Dr.initialize();const I=8,D=60/j.bpm/4,B=[];j.samples.forEach((H,z)=>{const G=H.name.toLowerCase();let Q="piano",X=["C","D","E","G","A"],q=[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],U=.6;H.aiData&&(X=H.aiData.notes||X,q=H.aiData.pattern||q,U=H.aiData.intensity||U,console.log(` Using AI-generated data for "${H.name}":`,{notes:X.slice(0,3),pattern:q.slice(0,8),intensity:U})),G.includes("kick")||G.includes("drum")?Q="kick":G.includes("snare")?Q="snare":G.includes("hat")||G.includes("hihat")?Q="hihat":G.includes("lead")||G.includes("synth")?Q="lead-synth":G.includes("bass")?Q="bass":G.includes("pad")||G.includes("atmospheric")?Q="pad":G.includes("violin")?Q="violin":G.includes("flute")?Q="flute-concert":G.includes("guitar")?Q="guitar-acoustic":G.includes("piano")&&(Q="piano"),B.push({sample:H,startTime:z*.5,instrument:Q,notes:X,pattern:q,intensity:U})}),console.log(` Playing ${B.length} AI-designed samples with intelligent patterns`),B.forEach(({sample:H,startTime:z,instrument:G,notes:Q,pattern:X,intensity:q})=>{setTimeout(()=>{if(!d)return;console.log(` Starting AI pattern for "${H.name}" as ${G}`);let U=0;const Y=Math.floor(I*1e3/(D*1e3)),M=async()=>{if(!d)return;const W=U%X.length;if(X[W])if(G==="kick"||G==="snare"||G==="hihat")await Dr.playDrumSound(G,q);else{const J=U%Q.length,de=Q[J],ce=G==="violin"?5:4,pe=Math.min(H.duration||1,2);await Dr.playNote(de,ce,pe,G,q)}U++,U<Y&&setTimeout(()=>M(),D*1e3)};M()},z*1e3)})},T=j=>{g({title:`Downloading "${j.title}"`,description:`${j.samples.length} samples  ${j.genre}  ${j.key}`}),console.log("Downloading pack:",j)};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b bg-gradient-to-r from-emerald-500/10 to-teal-500/10",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-lg flex items-center justify-center",children:r.jsx(Bl,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Pack Generator"}),r.jsx(Pe,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:"Beta"})]}),r.jsx("p",{className:"text-xl text-muted-foreground mt-1",children:"Enter a prompt, listen to the previews, then download your favorite pack."})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Pe,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:[r.jsx(Kn,{className:"h-3 w-3 mr-1"}),"AI Powered"]}),r.jsx(Pe,{variant:"secondary",children:"Real-time"}),r.jsx(Pe,{variant:"secondary",children:"High Quality"})]})]})})}),r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-8",children:[r.jsxs(ge,{className:"bg-gradient-to-br from-emerald-500/5 to-teal-500/5 border-emerald-200/20",children:[r.jsx(Ee,{children:r.jsx(Ae,{className:"text-emerald-700 dark:text-emerald-300",children:"Examples of prompts:"})}),r.jsxs(je,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Heavy synths and ambient guitars with a cyberpunk vibe, 100 BPM, C minor."})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Intense and suspenseful movie trailer score with big percussion hits and chilling strings."})]})]})]}),r.jsxs(ge,{className:"border-2 border-emerald-200/30",children:[r.jsx(Ee,{children:r.jsx(Ae,{className:"text-emerald-600",children:"Enter Prompt"})}),r.jsxs(je,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(cs,{placeholder:"Describe anything...",value:n,onChange:j=>e(j.target.value),rows:4,className:"resize-none text-lg border-emerald-200/50 focus:border-emerald-400 bg-emerald-50/30 dark:bg-emerald-950/30"}),r.jsxs(ne,{variant:"outline",onClick:E,className:"border-emerald-200 text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-950/50",children:[r.jsx(oO,{className:"h-4 w-4 mr-2"}),"Try a Random Prompt"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Number of Packs"}),r.jsxs(Ye,{value:t.toString(),onValueChange:j=>s(parseInt(j)),children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"1",children:"1 Pack"}),r.jsx(le,{value:"2",children:"2 Packs"}),r.jsx(le,{value:"4",children:"4 Packs"}),r.jsx(le,{value:"6",children:"6 Packs"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Provider"}),r.jsxs(Ye,{value:l,onValueChange:u,children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsxs(Ke,{children:[r.jsx(le,{value:"structure",children:" AI Structure Generator"}),r.jsx(le,{value:"musicgen",children:" MusicGen AI (Real Audio)"}),r.jsx(le,{value:"grok",children:" Grok AI (Premium)"}),r.jsx(le,{value:"intelligent",children:" Basic (Free)"}),r.jsx(le,{value:"openai",disabled:!0,children:" OpenAI (Configure API key)"}),r.jsx(le,{value:"gemini",disabled:!0,children:" Gemini (Configure API key)"}),r.jsx(le,{value:"anthropic",disabled:!0,children:" Anthropic (Configure API key)"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Preview Volume: ",f[0],"%"]}),r.jsx(me,{value:f,onValueChange:m,max:100,min:0,step:1})]})]}),r.jsx(ne,{onClick:N,disabled:S.isPending||!n.trim(),className:"w-full h-12 text-lg bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700",children:S.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ca,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating ",t," New Packs..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Kn,{className:"mr-2 h-5 w-5"}),"Generate ",t," New Packs"]})})]})]}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Generated Sample Packs"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(j=>r.jsxs(ge,{className:"border-emerald-200/30 hover:border-emerald-300/50 transition-colors",children:[r.jsx(Ee,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx(Ae,{className:"text-lg",children:j.title}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.description})]}),r.jsx(Pe,{variant:"outline",className:"text-emerald-600 border-emerald-200",children:j.genre})]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"BPM:"}),r.jsx("p",{className:"font-medium",children:j.bpm})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Key:"}),r.jsx("p",{className:"font-medium",children:j.key})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Samples:"}),r.jsx("p",{className:"font-medium",children:j.samples.length})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Instruments:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Array.isArray(j.metadata.instruments)?j.metadata.instruments:typeof j.metadata.instruments=="string"?j.metadata.instruments.split(",").map(O=>O.trim()):["Unknown"]).map((O,I)=>r.jsx(Pe,{variant:"secondary",className:"text-xs",children:O},I))})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Samples:"}),r.jsxs("div",{className:"space-y-1 mt-1",children:[j.samples.slice(0,3).map(O=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{children:O.name}),r.jsx(Pe,{variant:"outline",className:"text-xs",children:O.type})]},O.id)),j.samples.length>3&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",j.samples.length-3," more samples"]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(j),className:"flex-1",children:d===j.id?r.jsxs(r.Fragment,{children:[r.jsx(hc,{className:"h-4 w-4 mr-1"}),"Stop"]}):r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"h-4 w-4 mr-1"}),"Preview"]})}),r.jsxs(ne,{onClick:()=>T(j),size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(ql,{className:"h-4 w-4 mr-1"}),"Download"]}),r.jsxs(ne,{onClick:()=>x.mutate(j),size:"sm",variant:"outline",disabled:x.isPending,className:"border-blue-500 text-blue-600 hover:bg-blue-50","data-testid":`button-add-to-library-${j.id}`,children:[x.isPending?r.jsx(ca,{className:"h-4 w-4 mr-1 animate-spin"}):r.jsx(aO,{className:"h-4 w-4 mr-1"}),"Add to Library"]})]})]})]},j.id))})]}),r.jsxs(ge,{className:"bg-muted/30",children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(lO,{className:"h-5 w-5"}),"Pro Tips"]})}),r.jsx(je,{className:"space-y-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Be Specific"}),r.jsx("p",{className:"text-muted-foreground",children:"Include BPM, key, genre, and mood for better results"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Use Musical Terms"}),r.jsx("p",{className:"text-muted-foreground",children:"Mention instruments, scales, and production techniques"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Describe the Vibe"}),r.jsx("p",{className:"text-muted-foreground",children:'Add emotional context like "aggressive", "dreamy", or "nostalgic"'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"Reference Styles"}),r.jsx("p",{className:"text-muted-foreground",children:"Mention genres, artists, or movie soundtracks for inspiration"})]})]})})]})]})]})}class NW{constructor(){this.audioContext=null,this.masterBus=null,this.masterCompressor=null,this.masterLimiter=null,this.masterAnalyzer=null,this.channels=new Map,this.sendReturns=new Map,this.isInitialized=!1,this.sampleRate=44100,this.bufferSize=256,this.reverbBuffers=new Map,this.convolutionNodes=new Map,this.spectrumAnalyzer=null,this.spectrumData=null}async initialize(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sampleRate=this.audioContext.sampleRate,console.log(" Professional Audio Engine - Initializing"),console.log(`   Sample Rate: ${this.sampleRate}Hz`),console.log(`   Buffer Size: ${this.bufferSize}`),this.audioContext.state==="suspended"&&await this.resumeAudioContext(),await this.createMasterBus(),await this.createDefaultSends(),await this.generateReverbImpulses(),this.initializeSpectrumAnalyzer(),this.isInitialized=!0,console.log(" Professional Audio Engine - Ready")}catch(e){throw console.error("Failed to initialize Professional Audio Engine:",e),e}}async resumeAudioContext(){if(!this.audioContext)return;const e=async()=>{if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume(),console.log(" Audio context resumed")}catch(t){console.error("Failed to resume audio context:",t)}document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0)};document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0);try{await this.audioContext.resume()}catch{console.log("Audio context needs user interaction")}}async createMasterBus(){this.audioContext&&(this.masterBus=this.audioContext.createGain(),this.masterBus.gain.value=.8,this.masterCompressor=this.audioContext.createDynamicsCompressor(),this.masterCompressor.threshold.value=-18,this.masterCompressor.knee.value=12,this.masterCompressor.ratio.value=3,this.masterCompressor.attack.value=.008,this.masterCompressor.release.value=.2,this.masterLimiter=this.audioContext.createDynamicsCompressor(),this.masterLimiter.threshold.value=-1,this.masterLimiter.knee.value=0,this.masterLimiter.ratio.value=20,this.masterLimiter.attack.value=.001,this.masterLimiter.release.value=.05,this.masterAnalyzer=this.audioContext.createAnalyser(),this.masterAnalyzer.fftSize=2048,this.masterAnalyzer.smoothingTimeConstant=.8,this.masterBus.connect(this.masterCompressor),this.masterCompressor.connect(this.masterLimiter),this.masterLimiter.connect(this.masterAnalyzer),this.masterAnalyzer.connect(this.audioContext.destination),console.log(" Master bus created with professional processing chain"))}async createDefaultSends(){if(!this.audioContext)return;const e=await this.createSendReturn("hall","Hall Reverb","reverb");this.sendReturns.set("hall",e);const t=await this.createSendReturn("delay","Stereo Delay","delay");this.sendReturns.set("delay",t);const s=await this.createSendReturn("chorus","Vintage Chorus","chorus");this.sendReturns.set("chorus",s),console.log(" Default send returns created")}async createSendReturn(e,t,s){if(!this.audioContext||!this.masterBus)throw new Error("Audio context not initialized");const i=this.audioContext.createGain(),a=this.audioContext.createGain(),l=await this.createEffect(s);return i.connect(l.node),l.node.connect(a),a.connect(this.masterBus),{id:e,name:t,input:i,output:a,effect:l.effect,wetLevel:.5,return:.8}}async createEffect(e){if(!this.audioContext)throw new Error("Audio context not initialized");let t,s;switch(e){case"reverb":t=await this.createHallReverb(),s={id:"hall_reverb",name:"Hall Reverb",type:"reverb",bypass:!1,parameters:{roomSize:.7,decay:3.5,damping:.3,predelay:.02,wetLevel:.4}};break;case"delay":t=this.createStereoDelay(),s={id:"stereo_delay",name:"Stereo Delay",type:"delay",bypass:!1,parameters:{time:.25,feedback:.35,highCut:8e3,lowCut:200,wetLevel:.3}};break;case"chorus":t=this.createVintageChorus(),s={id:"vintage_chorus",name:"Vintage Chorus",type:"chorus",bypass:!1,parameters:{rate:.8,depth:.4,feedback:.1,mix:.5}};break;default:t=this.audioContext.createGain(),s={id:"bypass",name:"Bypass",type:"filter",bypass:!0,parameters:{}}}return{node:t,effect:s}}async createHallReverb(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createConvolver();if(!this.reverbBuffers.has("hall")){const t=this.generateHallImpulse(3.5,.3);this.reverbBuffers.set("hall",t)}return e.buffer=this.reverbBuffers.get("hall"),this.convolutionNodes.set("hall",e),e}createStereoDelay(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createGain(),t=this.audioContext.createGain(),s=this.audioContext.createDelay(1),i=this.audioContext.createDelay(1),a=this.audioContext.createGain(),l=this.audioContext.createGain(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.createBiquadFilter();return s.delayTime.value=.25,i.delayTime.value=.375,a.gain.value=.35,l.gain.value=.35,u.type="lowpass",u.frequency.value=8e3,u.Q.value=.707,d.type="highpass",d.frequency.value=200,d.Q.value=.707,e.connect(s),e.connect(i),s.connect(d),d.connect(u),u.connect(a),a.connect(s),i.connect(d),l.connect(i),s.connect(t),i.connect(t),e.delayOutput=t,e}createVintageChorus(){if(!this.audioContext)throw new Error("Audio context not initialized");const e=this.audioContext.createGain(),t=this.audioContext.createGain(),s=this.audioContext.createGain(),i=this.audioContext.createGain(),a=this.audioContext.createDelay(.05),l=this.audioContext.createOscillator(),u=this.audioContext.createGain(),d=this.audioContext.createGain();return l.type="sine",l.frequency.value=.8,u.gain.value=.005,a.delayTime.value=.02,d.gain.value=.1,s.gain.value=.5,i.gain.value=.5,e.connect(i),e.connect(a),l.connect(u),u.connect(a.delayTime),a.connect(s),a.connect(d),d.connect(a),i.connect(t),s.connect(t),l.start(),e}generateHallImpulse(e,t){if(!this.audioContext)throw new Error("Audio context not initialized");const s=this.sampleRate*e,i=this.audioContext.createBuffer(2,s,this.sampleRate);for(let a=0;a<2;a++){const l=i.getChannelData(a);for(let u=0;u<s;u++){const d=u/this.sampleRate,h=Math.exp(-d*(5/e)),f=1-d/e*t;let m=0;m+=(Math.random()*2-1)*h*f,m+=Math.sin(d*440*Math.PI*2)*h*.1,m+=Math.sin(d*660*Math.PI*2)*h*.05,l[u]=m}}return i}async generateReverbImpulses(){const e=[{name:"hall",decay:3.5,damping:.3},{name:"room",decay:1.2,damping:.5},{name:"plate",decay:2.8,damping:.1},{name:"spring",decay:.8,damping:.7}];for(const t of e){const s=this.generateHallImpulse(t.decay,t.damping);this.reverbBuffers.set(t.name,s)}console.log(" Reverb impulses generated for all room types")}initializeSpectrumAnalyzer(){!this.audioContext||!this.masterAnalyzer||(this.spectrumAnalyzer=this.masterAnalyzer,this.spectrumData=new Uint8Array(this.spectrumAnalyzer.frequencyBinCount),console.log(" Spectrum analyzer initialized"))}createMixerChannel(e,t){if(!this.audioContext||!this.masterBus)throw new Error("Audio engine not initialized");const s=this.audioContext.createGain(),i=this.audioContext.createGain(),a=this.audioContext.createStereoPanner(),l=this.audioContext.createBiquadFilter(),u=this.audioContext.createBiquadFilter(),d=this.audioContext.createBiquadFilter(),h=this.audioContext.createBiquadFilter();l.type="lowshelf",l.frequency.value=100,l.gain.value=0,u.type="peaking",u.frequency.value=400,u.Q.value=1,u.gain.value=0,d.type="peaking",d.frequency.value=2500,d.Q.value=1,d.gain.value=0,h.type="highshelf",h.frequency.value=8e3,h.gain.value=0;const f=this.audioContext.createDynamicsCompressor();f.threshold.value=-24,f.knee.value=6,f.ratio.value=4,f.attack.value=.01,f.release.value=.25;const m=this.audioContext.createAnalyser();m.fftSize=256,m.smoothingTimeConstant=.3;const g={};Array.from(this.sendReturns.keys()).forEach(S=>{const x=this.audioContext.createGain();x.gain.value=0,g[S]=x,i.connect(x),x.connect(this.sendReturns.get(S).input)}),s.connect(l),l.connect(u),u.connect(d),d.connect(h),h.connect(f),f.connect(a),a.connect(i),i.connect(m),m.connect(this.masterBus);const b={id:e,name:t,input:s,output:i,volume:.8,pan:0,muted:!1,solo:!1,eq:{lowShelf:l,lowMid:u,highMid:d,highShelf:h},compressor:f,effects:[],sends:g,analyzer:m,peakMeter:0,rmsLevel:0};return this.channels.set(e,b),console.log(` Mixer channel created: ${t}`),b}setChannelVolume(e,t){const s=this.channels.get(e);s&&(s.volume=Math.max(0,Math.min(1,t)),s.output.gain.value=s.volume)}setChannelPan(e,t){const s=this.channels.get(e);s&&(s.pan=Math.max(-1,Math.min(1,t)))}setChannelEQ(e,t,s){const i=this.channels.get(e);if(!i)return;const a=Math.max(-15,Math.min(15,s));switch(t){case"low":i.eq.lowShelf.gain.value=a;break;case"lowMid":i.eq.lowMid.gain.value=a;break;case"highMid":i.eq.highMid.gain.value=a;break;case"high":i.eq.highShelf.gain.value=a;break}}setSendLevel(e,t,s){const a=this.channels.get(e)?.sends[t];a&&(a.gain.value=Math.max(0,Math.min(1,s)))}muteChannel(e,t){const s=this.channels.get(e);s&&(s.muted=t,s.output.gain.value=t?0:s.volume)}soloChannel(e,t){const s=this.channels.get(e);if(!s)return;s.solo=t;const i=Array.from(this.channels.values()).filter(a=>a.solo);Array.from(this.channels.values()).forEach(a=>{i.length===0?a.output.gain.value=a.muted?0:a.volume:a.output.gain.value=a.solo&&!a.muted?a.volume:0})}getChannelMeters(e){const t=this.channels.get(e);if(!t)return{peak:0,rms:0};const s=new Uint8Array(t.analyzer.frequencyBinCount);t.analyzer.getByteFrequencyData(s);let i=0,a=0;for(let l=0;l<s.length;l++){const u=s[l]/255;i=Math.max(i,u),a+=u*u}return a=Math.sqrt(a/s.length),t.peakMeter=i,t.rmsLevel=a,{peak:i,rms:a}}getMasterSpectrum(){return!this.spectrumAnalyzer||!this.spectrumData?null:(this.spectrumAnalyzer.getByteFrequencyData(this.spectrumData),new Uint8Array(this.spectrumData))}getChannels(){return Array.from(this.channels.values())}getSendReturns(){return Array.from(this.sendReturns.values())}connectToChannel(e,t){const s=this.channels.get(e);s&&t.connect(s.input)}disconnect(){Array.from(this.channels.values()).forEach(e=>{try{e.input.disconnect(),e.output.disconnect()}catch{}}),this.channels.clear(),this.sendReturns.clear(),this.masterBus&&this.masterBus.disconnect(),console.log(" Professional Audio Engine disconnected")}}const xs=new NW;function kW(){const{toast:n}=yn(),[e,t]=v.useState({channels:[],sends:[],masterLevel:.8,masterMeters:{peak:0,rms:0},spectrum:[],isInitialized:!1}),[s,i]=v.useState(null),[a,l]=v.useState(new Map),[u,d]=v.useState(!1),[h,f]=v.useState("channels"),m=v.useRef(),g=v.useRef(null);v.useEffect(()=>((async()=>{try{await xs.initialize();const O=[{id:"drums",name:"Drums",color:"#ef4444"},{id:"bass",name:"Bass",color:"#8b5cf6"},{id:"keys",name:"Keys",color:"#3b82f6"},{id:"guitar",name:"Guitar",color:"#f59e0b"},{id:"vocals",name:"Vocals",color:"#10b981"},{id:"fx",name:"FX",color:"#ec4899"},{id:"master",name:"Master",color:"#6b7280"}].map(I=>xs.createMixerChannel(I.id,I.name));t({channels:O,sends:xs.getSendReturns(),masterLevel:.8,masterMeters:{peak:0,rms:0},spectrum:[],isInitialized:!0}),n({title:"Professional Audio Engine Initialized",description:"World-class mixing console ready for production"}),b()}catch(j){console.error("Failed to initialize professional audio:",j),n({title:"Audio Initialization Failed",description:"Please check your audio settings and try again",variant:"destructive"})}})(),()=>{S(),xs.disconnect()}),[n]);const b=v.useCallback(()=>{const T=()=>{if(!e.isInitialized)return;const j=new Map;e.channels.forEach(I=>{const D=xs.getChannelMeters(I.id);j.set(I.id,{peak:D.peak,rms:D.rms,spectrum:[]})}),l(j);const O=xs.getMasterSpectrum();if(O){const I=Array.from(O);t(D=>({...D,spectrum:I,masterMeters:{peak:Math.max(...I)/255,rms:Math.sqrt(I.reduce((B,H)=>B+(H/255)**2,0)/I.length)}})),x(I)}m.current=requestAnimationFrame(T)};T()},[e.isInitialized]),S=v.useCallback(()=>{m.current&&cancelAnimationFrame(m.current)},[]),x=T=>{const j=g.current;if(!j)return;const O=j.getContext("2d");if(!O)return;const I=j.width,D=j.height;O.fillStyle="#0f172a",O.fillRect(0,0,I,D);const B=I/T.length;for(let H=0;H<T.length;H++){const z=T[H]/255*D,G=H/T.length*360;O.fillStyle=`hsl(${G}, 70%, 50%)`,O.fillRect(H*B,D-z,B-1,z)}},w=(T,j)=>{xs.setChannelVolume(T,j[0]/100)},N=(T,j)=>{xs.setChannelPan(T,(j[0]-50)/50)},E=(T,j,O)=>{xs.setChannelEQ(T,j,(O[0]-50)/5)},C=(T,j)=>{xs.muteChannel(T,j),t(O=>({...O,channels:O.channels.map(I=>I.id===T?{...I,muted:j}:I)}))},A=(T,j)=>{xs.soloChannel(T,j),t(O=>({...O,channels:O.channels.map(I=>I.id===T?{...I,solo:j}:I)}))},P=(T,j,O)=>{xs.setSendLevel(T,j,O[0]/100)},R=T=>{const j=a.get(T.id)||{peak:0,rms:0},O=s===T.id;return r.jsxs(ge,{className:`w-20 h-full transition-all ${O?"ring-2 ring-blue-500 bg-gray-800":"bg-gray-900"}`,children:[r.jsx(Ee,{className:"p-2 pb-1",children:r.jsx(Ae,{className:"text-xs text-center truncate",children:T.name})}),r.jsxs(je,{className:"p-2 space-y-2",children:[r.jsxs("div",{className:"h-24 bg-gray-800 rounded relative overflow-hidden",children:[r.jsx("div",{className:"absolute bottom-0 left-1 w-2 bg-green-500 transition-all",style:{height:`${j.rms*100}%`}}),r.jsx("div",{className:"absolute bottom-0 right-1 w-2 bg-red-500 transition-all",style:{height:`${j.peak*100}%`}}),r.jsxs("div",{className:"absolute top-1 left-0 right-0 text-center",children:[r.jsx("div",{className:"text-[8px] text-gray-400",children:"RMS"}),r.jsx("div",{className:"text-[8px] text-gray-400",children:"PK"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"EQ"}),r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[r.jsx(me,{orientation:"vertical",value:[50],onValueChange:I=>E(T.id,"high",I),min:0,max:100,className:"h-8","data-testid":`eq-high-${T.id}`}),r.jsx(me,{orientation:"vertical",value:[50],onValueChange:I=>E(T.id,"highMid",I),min:0,max:100,className:"h-8","data-testid":`eq-highmid-${T.id}`}),r.jsx(me,{orientation:"vertical",value:[50],onValueChange:I=>E(T.id,"lowMid",I),min:0,max:100,className:"h-8","data-testid":`eq-lowmid-${T.id}`}),r.jsx(me,{orientation:"vertical",value:[50],onValueChange:I=>E(T.id,"low",I),min:0,max:100,className:"h-8","data-testid":`eq-low-${T.id}`})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"SENDS"}),r.jsx("div",{className:"flex justify-between",children:e.sends.slice(0,3).map((I,D)=>r.jsx(me,{orientation:"vertical",value:[0],onValueChange:B=>P(T.id,I.id,B),min:0,max:100,className:"h-6 w-3","data-testid":`send-${I.id}-${T.id}`},I.id))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:"PAN"}),r.jsx(me,{value:[50],onValueChange:I=>N(T.id,I),min:0,max:100,className:"w-full","data-testid":`pan-${T.id}`})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(ne,{size:"sm",variant:T.muted?"destructive":"outline",className:"text-xs px-1 py-0 h-6",onClick:()=>C(T.id,!T.muted),"data-testid":`mute-${T.id}`,children:"M"}),r.jsx(ne,{size:"sm",variant:T.solo?"default":"outline",className:"text-xs px-1 py-0 h-6",onClick:()=>A(T.id,!T.solo),"data-testid":`solo-${T.id}`,children:"S"})]}),r.jsx("div",{className:"h-32 flex justify-center",children:r.jsx(me,{orientation:"vertical",value:[T.volume*100],onValueChange:I=>w(T.id,I),min:0,max:100,className:"h-full","data-testid":`volume-${T.id}`})}),r.jsx("div",{className:"text-[8px] text-gray-400 text-center",children:Math.round(T.volume*100)})]})]},T.id)};return e.isInitialized?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-heading font-bold text-white flex items-center gap-2",children:[r.jsx(Ky,{className:"h-6 w-6 text-blue-500"}),"Professional Mixer"]}),r.jsx("p",{className:"text-gray-400",children:"World-class mixing console with real-time processing"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Pe,{variant:"outline",className:"text-green-400 border-green-400",children:[r.jsx(fO,{className:"h-3 w-3 mr-1"}),"Live"]}),r.jsx(ne,{variant:u?"destructive":"default",onClick:()=>d(!u),"data-testid":"transport-play",children:u?r.jsx(ua,{className:"h-4 w-4"}):r.jsx(pn,{className:"h-4 w-4"})})]})]}),r.jsxs(Bi,{value:h,onValueChange:f,children:[r.jsxs(Hr,{className:"grid w-full grid-cols-4",children:[r.jsx(dt,{value:"channels",children:"Channels"}),r.jsx(dt,{value:"sends",children:"Send Returns"}),r.jsx(dt,{value:"master",children:"Master Section"}),r.jsx(dt,{value:"analyzer",children:"Spectrum"})]}),r.jsx(ht,{value:"channels",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Ai,{className:"h-5 w-5"}),"Channel Strips"]})}),r.jsx(je,{children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4",children:e.channels.map(R)})})]})}),r.jsx(ht,{value:"sends",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Nd,{className:"h-5 w-5"}),"Send Returns & Effects"]})}),r.jsx(je,{className:"space-y-4",children:e.sends.map(T=>r.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium",children:T.name}),r.jsx(Pe,{variant:"secondary",children:T.effect?.type})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Return Level"}),r.jsx(me,{value:[T.return*100],onValueChange:j=>{},min:0,max:100})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Wet Level"}),r.jsx(me,{value:[T.wetLevel*100],onValueChange:j=>{},min:0,max:100})]})]})]},T.id))})]})}),r.jsx(ht,{value:"master",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(vO,{className:"h-5 w-5"}),"Master Section"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Level"}),r.jsx(me,{value:[e.masterLevel*100],onValueChange:T=>t(j=>({...j,masterLevel:T[0]/100})),min:0,max:100,"data-testid":"master-volume"})]}),r.jsx("div",{className:"h-32 bg-gray-800 rounded p-2 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"MASTER METERS"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("div",{className:"w-4 h-24 bg-gray-700 rounded overflow-hidden",children:r.jsx("div",{className:"w-full bg-green-500 transition-all",style:{height:`${e.masterMeters.rms*100}%`,marginTop:`${100-e.masterMeters.rms*100}%`}})}),r.jsx("div",{className:"w-4 h-24 bg-gray-700 rounded overflow-hidden",children:r.jsx("div",{className:"w-full bg-red-500 transition-all",style:{height:`${e.masterMeters.peak*100}%`,marginTop:`${100-e.masterMeters.peak*100}%`}})})]})]})})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(jh,{className:"h-5 w-5"}),"Master Processing"]})}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Compressor"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Threshold"}),r.jsx(me,{value:[82],min:0,max:100})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Ratio"}),r.jsx(me,{value:[30],min:0,max:100})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Master Limiter"}),r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Ceiling"}),r.jsx(me,{value:[99],min:0,max:100})]})]})]})]})]})}),r.jsx(ht,{value:"analyzer",className:"space-y-4",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Uy,{className:"h-5 w-5"}),"Real-time Spectrum Analyzer"]})}),r.jsxs(je,{children:[r.jsx("canvas",{ref:g,width:800,height:300,className:"w-full border border-gray-700 rounded bg-gray-900"}),r.jsx("div",{className:"mt-2 text-center text-sm text-gray-400",children:"Professional spectrum analysis with real-time frequency visualization"})]})]})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(en,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-500"}),r.jsx("div",{children:"Initializing Professional Audio Engine..."}),r.jsx("div",{className:"text-sm text-gray-400",children:"Loading world-class mixing console"})]})})}function TW(){const[n,e]=v.useState([{id:"intro",name:"Intro",duration:16,measures:4,instruments:["piano","strings"],dynamics:"soft",tempo:120,key:"C Major",description:"Atmospheric opening with gentle piano and strings"}]),[t,s]=v.useState({title:"",artist:"",genre:"",bpm:120,key:"C Major",duration:"3:00",format:"WAV"}),[i,a]=v.useState({mixing:"Professional stereo balance",mastering:"Commercial loudness standards",effects:"Studio-grade reverb and compression",style:"modern",professionalGrade:!0}),[l,u]=v.useState("C - Am - F - G"),[d,h]=v.useState(null),[f,m]=v.useState(!1),g=["piano","guitar","bass","drums","strings","vocals","synth","horn","full_band","reduced"],b=["soft","moderate","powerful","intimate","climactic","decrescendo"],S=()=>{const C={id:`section_${Date.now()}`,name:"New Section",duration:16,measures:4,instruments:["piano"],dynamics:"moderate",description:"New song section"};e([...n,C])},x=C=>{e(n.filter(A=>A.id!==C))},w=(C,A)=>{e(n.map(P=>P.id===C?{...P,...A}:P))},N=()=>{const C=document.createElement("input");C.type="file",C.accept=".json,.txt",C.onchange=A=>{const P=A.target.files?.[0];if(P){const R=new FileReader;R.onload=T=>{try{const j=T.target?.result,O=JSON.parse(j);if(O.intro||O.verse1||O.chorus){const I=Object.entries(O).map(([D,B])=>({id:D,name:D.charAt(0).toUpperCase()+D.slice(1),duration:B.duration||16,measures:B.measures||4,instruments:Array.isArray(B.instruments)?B.instruments:["piano"],vocals:B.vocals||!1,dynamics:B.dynamics||"moderate",tempo:B.tempo||120,key:B.key||"C Major",description:B.description||""}));e(I)}}catch(j){console.error("Error parsing file:",j)}},R.readAsText(P)}},C.click()},E=()=>{const C={metadata:t,structure:n.reduce((T,j)=>(T[j.id]=j,T),{}),chordProgression:l,productionNotes:i},A=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),P=URL.createObjectURL(A),R=document.createElement("a");R.href=P,R.download=`${t.title||"song"}_structure.json`,R.click(),URL.revokeObjectURL(P)};return r.jsxs("div",{className:"h-screen bg-gray-900 text-white p-6 overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Gy,{className:"h-8 w-8 text-blue-500"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Song Structure Manager"}),r.jsx(Pe,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Professional Arrangement Tool"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ne,{onClick:N,variant:"outline",className:"flex items-center gap-2","data-testid":"button-import",children:[r.jsx(_i,{className:"h-4 w-4"}),"Import"]}),r.jsxs(ne,{onClick:E,variant:"outline",className:"flex items-center gap-2","data-testid":"button-export",children:[r.jsx(ql,{className:"h-4 w-4"}),"Export"]}),r.jsxs(ne,{onClick:S,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2","data-testid":"button-add-section",children:[r.jsx(pO,{className:"h-4 w-4"}),"Add Section"]})]})]}),r.jsxs(Bi,{defaultValue:"structure",className:"space-y-6",children:[r.jsxs(Hr,{className:"grid w-full grid-cols-4",children:[r.jsx(dt,{value:"structure",children:"Song Structure"}),r.jsx(dt,{value:"metadata",children:"Metadata"}),r.jsx(dt,{value:"chords",children:"Chord Progression"}),r.jsx(dt,{value:"production",children:"Production Notes"})]}),r.jsx(ht,{value:"structure",className:"space-y-4",children:r.jsxs(ge,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Mt,{className:"h-5 w-5"}),"Song Sections"]}),r.jsx("div",{className:"grid gap-4",children:n.map((C,A)=>r.jsxs(ge,{className:"p-4 bg-gray-750 border-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-sm font-bold",children:A+1}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-lg",children:C.name}),r.jsxs("div",{className:"flex gap-2 text-sm text-gray-400",children:[r.jsxs("span",{children:[C.duration,"s"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[C.measures," measures"]}),r.jsx("span",{children:""}),r.jsx("span",{className:"capitalize",children:C.dynamics})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Sx,{children:[r.jsx(_x,{asChild:!0,children:r.jsx(ne,{size:"sm",variant:"outline",className:"border-gray-600",children:r.jsx(yO,{className:"h-4 w-4"})})}),r.jsxs(Wh,{className:"bg-gray-800 border-gray-600 text-white max-w-2xl",children:[r.jsx(Hh,{children:r.jsxs(Kh,{children:["Edit Section: ",C.name]})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Section Name"}),r.jsx(vt,{value:C.name,onChange:P=>w(C.id,{name:P.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Duration (seconds)"}),r.jsx(vt,{type:"number",value:C.duration,onChange:P=>w(C.id,{duration:parseInt(P.target.value)||16}),className:"bg-gray-700 border-gray-600"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Measures"}),r.jsx(vt,{type:"number",value:C.measures,onChange:P=>w(C.id,{measures:parseInt(P.target.value)||4}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Dynamics"}),r.jsxs(Ye,{value:C.dynamics,onValueChange:P=>w(C.id,{dynamics:P}),children:[r.jsx(He,{className:"bg-gray-700 border-gray-600",children:r.jsx(Xe,{})}),r.jsx(Ke,{className:"bg-gray-800 border-gray-600",children:b.map(P=>r.jsx(le,{value:P,children:P},P))})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Instruments"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map(P=>r.jsx(Pe,{variant:C.instruments.includes(P)?"default":"outline",className:"cursor-pointer",onClick:()=>{const R=C.instruments.includes(P)?C.instruments.filter(T=>T!==P):[...C.instruments,P];w(C.id,{instruments:R})},children:P},P))})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Description"}),r.jsx(cs,{value:C.description,onChange:P=>w(C.id,{description:P.target.value}),className:"bg-gray-700 border-gray-600",rows:3})]})]})]})]}),r.jsx(ne,{size:"sm",variant:"outline",onClick:()=>x(C.id),className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white",children:r.jsx(xO,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.instruments.map(P=>r.jsx(Pe,{variant:"secondary",className:"text-xs",children:P},P)),C.vocals&&r.jsx(Pe,{variant:"default",className:"text-xs bg-green-600",children:"Vocals"})]}),r.jsx("p",{className:"text-sm text-gray-300",children:C.description})]})]},C.id))})]})}),r.jsx(ht,{value:"metadata",className:"space-y-4",children:r.jsxs(ge,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Song Metadata"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Title"}),r.jsx(vt,{value:t.title,onChange:C=>s({...t,title:C.target.value}),placeholder:"Song Title",className:"bg-gray-700 border-gray-600","data-testid":"input-song-title"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Artist"}),r.jsx(vt,{value:t.artist,onChange:C=>s({...t,artist:C.target.value}),placeholder:"Artist Name",className:"bg-gray-700 border-gray-600","data-testid":"input-song-artist"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Genre"}),r.jsxs(Ye,{value:t.genre,onValueChange:C=>s({...t,genre:C}),children:[r.jsx(He,{className:"bg-gray-700 border-gray-600",children:r.jsx(Xe,{placeholder:"Select Genre"})}),r.jsxs(Ke,{className:"bg-gray-800 border-gray-600",children:[r.jsx(le,{value:"hip-hop",children:"Hip Hop"}),r.jsx(le,{value:"pop",children:"Pop"}),r.jsx(le,{value:"rock",children:"Rock"}),r.jsx(le,{value:"electronic",children:"Electronic"}),r.jsx(le,{value:"jazz",children:"Jazz"}),r.jsx(le,{value:"classical",children:"Classical"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"BPM"}),r.jsx(vt,{type:"number",value:t.bpm,onChange:C=>s({...t,bpm:parseInt(C.target.value)||120}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Key"}),r.jsx(vt,{value:t.key,onChange:C=>s({...t,key:C.target.value}),placeholder:"C Major",className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Duration"}),r.jsx(vt,{value:t.duration,onChange:C=>s({...t,duration:C.target.value}),placeholder:"3:00",className:"bg-gray-700 border-gray-600"})]})]})]})}),r.jsx(ht,{value:"chords",className:"space-y-4",children:r.jsxs(ge,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chord Progression"}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Main Progression"}),r.jsx(vt,{value:l,onChange:C=>u(C.target.value),placeholder:"C - Am - F - G",className:"bg-gray-700 border-gray-600 mt-2","data-testid":"input-chord-progression"})]})]})}),r.jsx(ht,{value:"production",className:"space-y-4",children:r.jsxs(ge,{className:"p-6 bg-gray-800 border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Production Notes"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Mixing"}),r.jsx(vt,{value:i.mixing,onChange:C=>a({...i,mixing:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Mastering"}),r.jsx(vt,{value:i.mastering,onChange:C=>a({...i,mastering:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Effects"}),r.jsx(vt,{value:i.effects,onChange:C=>a({...i,effects:C.target.value}),className:"bg-gray-700 border-gray-600"})]}),r.jsxs("div",{children:[r.jsx(Ne,{children:"Style"}),r.jsxs(Ye,{value:i.style,onValueChange:C=>a({...i,style:C}),children:[r.jsx(He,{className:"bg-gray-700 border-gray-600",children:r.jsx(Xe,{})}),r.jsxs(Ke,{className:"bg-gray-800 border-gray-600",children:[r.jsx(le,{value:"modern",children:"Modern"}),r.jsx(le,{value:"vintage",children:"Vintage"}),r.jsx(le,{value:"lo-fi",children:"Lo-Fi"}),r.jsx(le,{value:"professional",children:"Professional"})]})]})]})]})]})})]})]})}function AW(){const[n,e]=v.useState(!1),[t,s]=v.useState(!1),[i,a]=v.useState(!1);v.useEffect(()=>{const u=/iPad|iPhone|iPod/.test(navigator.userAgent);e(u),u&&(()=>{try{new(window.AudioContext||window.webkitAudioContext)().state==="suspended"?a(!0):s(!0)}catch{console.warn("AudioContext not supported")}})()},[]);const l=async()=>{try{const u=new(window.AudioContext||window.webkitAudioContext);u.state==="suspended"&&await u.resume();const d=u.createOscillator(),h=u.createGain();d.connect(h),h.connect(u.destination),h.gain.setValueAtTime(0,u.currentTime),d.frequency.setValueAtTime(440,u.currentTime),d.start(u.currentTime),d.stop(u.currentTime+.1),s(!0),a(!1)}catch(u){console.error("Failed to enable audio:",u)}};return!n||t||!i?null:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx(ge,{className:"w-full max-w-md",children:r.jsxs(je,{className:"p-6 text-center",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(gO,{className:"h-12 w-12 mx-auto mb-2 text-blue-500"}),r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Enable Audio"}),r.jsx("p",{className:"text-sm text-gray-600",children:"iOS requires user interaction to enable audio. Tap the button below to activate audio for the music studio."})]}),r.jsxs(ne,{onClick:l,className:"w-full",children:[r.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Enable Audio"]})]})})})}function PW({activeTab:n,onTabChange:e}){const t=[{id:"beatmaker",icon:"fas fa-drum",label:"Beats"},{id:"musicmixer",icon:"fas fa-sliders-h",label:"Studio"},{id:"melody",icon:"fas fa-music",label:"Melody"},{id:"professionalmixer",icon:"fas fa-mixing-board",label:"Pro"},{id:"assistant",icon:"fas fa-robot",label:"AI"},{id:"midi",icon:"fas fa-piano",label:"MIDI"}];return r.jsx("div",{className:"mobile-nav md:hidden",children:t.map(s=>r.jsxs("button",{onClick:()=>e(s.id),className:`mobile-nav-item ${n===s.id?"active":""}`,title:s.label,children:[r.jsx("i",{className:`${s.icon} text-sm mb-1`}),r.jsx("span",{className:"text-[10px]",children:s.label})]},s.id))})}const Ca=v.createContext({currentPattern:{},currentMelody:[],currentLyrics:"",currentCodeMusic:{},currentLayers:[],isPlaying:!1,bpm:120,playMode:"current",setPlayMode:n=>{},activeTab:"beatmaker",currentPlaylist:null,setCurrentPlaylist:n=>{},currentPlaylistIndex:0,setCurrentPlaylistIndex:n=>{},setCurrentPattern:n=>{},setCurrentMelody:n=>{},setCurrentLyrics:n=>{},setCurrentCodeMusic:n=>{},setCurrentLayers:n=>{},playCurrentAudio:()=>Promise.resolve(),stopCurrentAudio:()=>{},playFullSong:()=>Promise.resolve(),stopFullSong:()=>{}});function ut(){const[n]=vh(),e=X=>X.includes("/code-translator")?"translator":X.includes("/beat-studio")?"beatmaker":X.includes("/melody-composer")?"melody":X.includes("/codebeat-studio")?"codebeat":X.includes("/music-studio")?"musicmixer":X.includes("/pro-console")?"mixer":X.includes("/song-uploader")||X.includes("/ai-assistant")?"assistant":X.includes("/vulnerability-scanner")?"security":X.includes("/lyric-lab")?"lyrics":X.includes("/mix-studio")?"mixer":X.includes("/pack-generator")?"pack-generator":X.includes("/advanced-sequencer")?"advanced-sequencer":X.includes("/granular-engine")?"granular-engine":X.includes("/wavetable-oscillator")?"wavetable-oscillator":X.includes("/song-structure")?"song-structure":"beatmaker",[t,s]=v.useState(()=>e(n));v.useEffect(()=>{s(e(n))},[n]);const[i,a]=v.useState({}),[l,u]=v.useState([]),[d,h]=v.useState(""),[f,m]=v.useState({}),[g,b]=v.useState([]),[S,x]=v.useState(!1),[w,N]=v.useState(120),[E,C]=v.useState("current"),[A,P]=v.useState(null),[R,T]=v.useState(0),{initialize:j,isInitialized:O}=tr();v.useEffect(()=>{const X=q=>{const U=q.detail;s(U)};return window.addEventListener("navigateToTab",X),()=>{window.removeEventListener("navigateToTab",X)}},[]);const I=async()=>{switch(O||await j(),console.log(` Playing current tool only: ${t}`),t){case"beatmaker":console.log(" Playing beat pattern only:",i);break;case"melody":console.log(" Playing melody only:",l),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("playCurrentMelody"));break;case"codebeat":console.log(" Playing code-to-music only:",f);break;case"lyrics":console.log(" Playing lyrics only:",d);break;case"assistant":if(console.log(" Playing uploaded song:",A),A&&A.songs&&A.songs.length>0){const X=A.songs[R];console.log(" Playing playlist song:",X)}break;default:console.log(" Playing default audio for:",t);break}x(!0)},D=()=>{x(!1)},B=X=>({translator:"Code Translator",beatmaker:"Beat Maker",melody:"Melody Composer",codebeat:"Code to Music",musiccode:"Music to Code",assistant:"Song Uploader & AI Assistant",security:"Security Scanner",lyrics:"Lyric Lab",musicmixer:"Music Studio",professionalmixer:"Professional Audio Console",mixer:"Mixer",layers:"Dynamic Layering",midi:"MIDI Controller",metrics:"Performance Metrics","advanced-sequencer":"Advanced Sequencer","granular-engine":"Granular Engine","wavetable-oscillator":"Wavetable Oscillator","pack-generator":"Pack Generator","song-structure":"Song Structure Manager"})[X]||"Beat Maker",G={currentPattern:i,currentMelody:l,currentLyrics:d,currentCodeMusic:f,currentLayers:g,isPlaying:S,bpm:w,playMode:E,setPlayMode:C,activeTab:t,currentPlaylist:A,setCurrentPlaylist:P,currentPlaylistIndex:R,setCurrentPlaylistIndex:T,setCurrentPattern:a,setCurrentMelody:u,setCurrentLyrics:h,setCurrentCodeMusic:m,setCurrentLayers:b,playCurrentAudio:I,stopCurrentAudio:D,playFullSong:async()=>{O||await j(),console.log(" Playing ALL tools combined:"),console.log("- Beat Pattern:",i),console.log("- Melody:",l),console.log("- Lyrics:",d),console.log("- Code Music:",f),console.log("- Layers:",g),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("playAllTools",{detail:{pattern:i,melody:l,lyrics:d,codeMusic:f,layers:g,playlist:A,playlistIndex:R,bpm:w}})),x(!0)},stopFullSong:()=>{x(!1)}},Q=()=>{switch(t){case"translator":return r.jsx(HU,{});case"beatmaker":return r.jsx(hS,{onBeatGenerated:X=>a(X)});case"melody":return r.jsx(C$,{});case"codebeat":return r.jsx(V$,{});case"musiccode":return r.jsx(L$,{});case"assistant":return r.jsx(iW,{});case"security":return r.jsx(aW,{});case"lyrics":return r.jsx(oW,{});case"musicmixer":return r.jsx(lW,{});case"professionalmixer":return r.jsx(kW,{});case"mixer":return r.jsx(cW,{});case"layers":return r.jsx(uW,{});case"midi":return r.jsx(hW,{});case"metrics":return r.jsx(bW,{});case"advanced-sequencer":return r.jsx(SW,{});case"granular-engine":return r.jsx(_W,{});case"wavetable-oscillator":return r.jsx(CW,{});case"pack-generator":return r.jsx(jW,{});case"song-structure":return r.jsx(TW,{});default:return r.jsx(hS,{})}};return r.jsx(B$,{children:r.jsx(Ca.Provider,{value:G,children:r.jsxs("div",{className:"h-screen flex bg-studio-bg text-white",children:[r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(_D,{}),r.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto pb-16 md:pb-0",children:r.jsx("div",{className:"min-w-[1600px] p-3 md:p-6 studio-content",children:Q()})}),r.jsx(WU,{currentTool:B(t),activeTab:t})]}),r.jsx(PW,{activeTab:t,onTabChange:X=>s(X)}),r.jsx(AW,{})]})})})}var Eg={exports:{}},Mg,Q_;function EW(){if(Q_)return Mg;Q_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mg=n,Mg}var Rg,Y_;function MW(){if(Y_)return Rg;Y_=1;var n=EW();function e(){}function t(){}return t.resetWarningCache=e,Rg=function(){function s(l,u,d,h,f,m){if(m!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Rg}var X_;function RW(){return X_||(X_=1,Eg.exports=MW()()),Eg.exports}var OW=RW();const Vt=Ys(OW);function Z_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function J_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z_(Object(t),!0).forEach(function(s){FP(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Vd(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vd=function(e){return typeof e}:Vd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(n)}function FP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IW(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function FW(n,e){if(n==null)return{};var t=IW(n,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function DW(n,e){return VW(n)||LW(n,e)||BW(n,e)||zW()}function VW(n){if(Array.isArray(n))return n}function LW(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var s=[],i=!0,a=!1,l,u;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(s.push(l.value),!(e&&s.length===e));i=!0);}catch(d){a=!0,u=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw u}}return s}}function BW(n,e){if(n){if(typeof n=="string")return eC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eC(n,e)}}function eC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function zW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rs=function(e,t,s){var i=!!s,a=_t.useRef(s);_t.useEffect(function(){a.current=s},[s]),_t.useEffect(function(){if(!i||!e)return function(){};var l=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,l),function(){e.off(t,l)}},[i,t,e,a])},UW=function(e){var t=_t.useRef(e);return _t.useEffect(function(){t.current=e},[e]),t.current},yh=function(e){return e!==null&&Vd(e)==="object"},tC="[object Object]",$W=function n(e,t){if(!yh(e)||!yh(t))return e===t;var s=Array.isArray(e),i=Array.isArray(t);if(s!==i)return!1;var a=Object.prototype.toString.call(e)===tC,l=Object.prototype.toString.call(t)===tC;if(a!==l)return!1;if(!a&&!s)return e===t;var u=Object.keys(e),d=Object.keys(t);if(u.length!==d.length)return!1;for(var h={},f=0;f<u.length;f+=1)h[u[f]]=!0;for(var m=0;m<d.length;m+=1)h[d[m]]=!0;var g=Object.keys(h);if(g.length!==u.length)return!1;var b=e,S=t,x=function(N){return n(b[N],S[N])};return g.every(x)},qW=function(e,t,s){return yh(e)?Object.keys(e).reduce(function(i,a){var l=!yh(t)||!$W(e[a],t[a]);return s.includes(a)?(l&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):l?J_(J_({},i||{}),{},FP({},a,e[a])):i},null):null},DP=_t.createContext(null);DP.displayName="ElementsContext";var GW=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};Vt.any,Vt.object;Vt.func.isRequired;var VP=_t.createContext(null);VP.displayName="CheckoutSdkContext";var WW=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},HW=_t.createContext(null);HW.displayName="CheckoutContext";Vt.any,Vt.shape({fetchClientSecret:Vt.func.isRequired,elementsOptions:Vt.object}).isRequired;var nC=function(e){var t=_t.useContext(VP),s=_t.useContext(DP);if(t&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?WW(t,e):GW(s,e)},KW=["mode"],QW=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Qt=function(e,t){var s="".concat(QW(e),"Element"),i=function(d){var h=d.id,f=d.className,m=d.options,g=m===void 0?{}:m,b=d.onBlur,S=d.onFocus,x=d.onReady,w=d.onChange,N=d.onEscape,E=d.onClick,C=d.onLoadError,A=d.onLoaderStart,P=d.onNetworksChange,R=d.onConfirm,T=d.onCancel,j=d.onShippingAddressChange,O=d.onShippingRateChange,I=nC("mounts <".concat(s,">")),D="elements"in I?I.elements:null,B="checkoutSdk"in I?I.checkoutSdk:null,H=_t.useState(null),z=DW(H,2),G=z[0],Q=z[1],X=_t.useRef(null),q=_t.useRef(null);rs(G,"blur",b),rs(G,"focus",S),rs(G,"escape",N),rs(G,"click",E),rs(G,"loaderror",C),rs(G,"loaderstart",A),rs(G,"networkschange",P),rs(G,"confirm",R),rs(G,"cancel",T),rs(G,"shippingaddresschange",j),rs(G,"shippingratechange",O),rs(G,"change",w);var U;x&&(e==="expressCheckout"?U=x:U=function(){x(G)}),rs(G,"ready",U),_t.useLayoutEffect(function(){if(X.current===null&&q.current!==null&&(D||B)){var M=null;if(B)switch(e){case"payment":M=B.createPaymentElement(g);break;case"address":if("mode"in g){var W=g.mode,J=FW(g,KW);if(W==="shipping")M=B.createShippingAddressElement(J);else if(W==="billing")M=B.createBillingAddressElement(J);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":M=B.createExpressCheckoutElement(g);break;case"currencySelector":M=B.createCurrencySelectorElement();break;case"taxId":M=B.createTaxIdElement(g);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else D&&(M=D.create(e,g));X.current=M,Q(M),M&&M.mount(q.current)}},[D,B,g]);var Y=UW(g);return _t.useEffect(function(){if(X.current){var M=qW(g,Y,["paymentRequest"]);M&&"update"in X.current&&X.current.update(M)}},[g,Y]),_t.useLayoutEffect(function(){return function(){if(X.current&&typeof X.current.destroy=="function")try{X.current.destroy(),X.current=null}catch{}}},[]),_t.createElement("div",{id:h,className:f,ref:q})},a=function(d){nC("mounts <".concat(s,">"));var h=d.id,f=d.className;return _t.createElement("div",{id:h,className:f})},l=t?a:i;return l.propTypes={id:Vt.string,className:Vt.string,onChange:Vt.func,onBlur:Vt.func,onFocus:Vt.func,onReady:Vt.func,onEscape:Vt.func,onClick:Vt.func,onLoadError:Vt.func,onLoaderStart:Vt.func,onNetworksChange:Vt.func,onConfirm:Vt.func,onCancel:Vt.func,onShippingAddressChange:Vt.func,onShippingRateChange:Vt.func,options:Vt.object},l.displayName=s,l.__elementType=e,l},Yt=typeof window>"u",YW=_t.createContext(null);YW.displayName="EmbeddedCheckoutProviderContext";Qt("auBankAccount",Yt);Qt("card",Yt);Qt("cardNumber",Yt);Qt("cardExpiry",Yt);Qt("cardCvc",Yt);Qt("fpxBank",Yt);Qt("iban",Yt);Qt("idealBank",Yt);Qt("p24Bank",Yt);Qt("epsBank",Yt);Qt("payment",Yt);Qt("expressCheckout",Yt);Qt("currencySelector",Yt);Qt("paymentRequestButton",Yt);Qt("linkAuthentication",Yt);Qt("address",Yt);Qt("shippingAddress",Yt);Qt("paymentMethodMessaging",Yt);Qt("affirmMessage",Yt);Qt("afterpayClearpayMessage",Yt);Qt("taxId",Yt);var XW="basil",LP="https://js.stripe.com",ZW="".concat(LP,"/").concat(XW,"/stripe.js"),JW=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,eH=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var tH=function(e){return JW.test(e)||eH.test(e)},nH=function(){for(var e=document.querySelectorAll('script[src^="'.concat(LP,'"]')),t=0;t<e.length;t++){var s=e[t];if(tH(s.src))return s}return null},sC=function(e){var t="",s=document.createElement("script");s.src="".concat(ZW).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(s),s},Ml=null,wd=null,Sd=null,sH=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},rH=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},iH=function(e){return Ml!==null?Ml:(Ml=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=nH();if(!(i&&e)){if(!i)i=sC(e);else if(i&&Sd!==null&&wd!==null){var a;i.removeEventListener("load",Sd),i.removeEventListener("error",wd),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=sC(e)}}Sd=rH(t,s),wd=sH(s),i.addEventListener("load",Sd),i.addEventListener("error",wd)}catch(l){s(l);return}}),Ml.catch(function(t){return Ml=null,Promise.reject(t)}))},Rl,aH=function(){return Rl||(Rl=iH(null).catch(function(e){return Rl=null,Promise.reject(e)}),Rl)};Promise.resolve().then(function(){return aH()}).catch(function(n){console.warn(n)});function rC(){const[n,e]=v.useState(""),[t,s]=v.useState(!0),[i,a]=v.useState("pro");return v.useEffect(()=>{ot("POST","/api/create-subscription",{tier:i}).then(l=>l.json()).then(l=>{e(l.clientSecret),s(!1)}).catch(l=>{console.error("Subscription creation failed:",l),s(!1)})},[i]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:r.jsxs(ge,{className:"w-full max-w-md bg-gray-800/50 border-gray-700",children:[r.jsxs(Ee,{className:"text-center",children:[r.jsx(Ae,{className:"text-white",children:"Payment Setup Required"}),r.jsx(rn,{className:"text-gray-400",children:"Configure your Stripe keys to enable subscriptions"})]}),r.jsxs(je,{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsx("p",{children:"To enable payments, you need to:"}),r.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[r.jsx("li",{children:"Set up your Stripe account"}),r.jsx("li",{children:"Create Basic ($10) and Pro ($39.99) products"}),r.jsx("li",{children:"Add your Stripe keys to environment variables"})]})]}),r.jsx(ne,{onClick:()=>window.location.href="/studio",className:"w-full","data-testid":"button-back-studio",children:"Back to Studio"})]})]})})}function oH(){const[n,e]=v.useState(!1),[t,s]=v.useState(null),i=async()=>{e(!0),s(null);try{const l=await(await ot("POST","/api/test-circular-translation",{})).json();s(l)}catch(a){console.error("Test failed:",a),s({totalTests:0,passedTests:0,averageAccuracy:0,results:[],timestamp:new Date().toISOString(),success:!1,message:"Test execution failed"})}finally{e(!1)}};return r.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Circular Translation Testing"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"Real accuracy testing for code  music  code conversion"})]}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx(ne,{onClick:i,disabled:n,size:"lg",className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-run-tests",children:n?r.jsxs(r.Fragment,{children:[r.jsx(ca,{className:"mr-2 h-5 w-5 animate-spin"}),"Running Tests..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"mr-2 h-5 w-5"}),"Run Circular Translation Tests"]})})}),t&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ge,{className:"bg-gray-900 border-gray-700",children:[r.jsxs(Ee,{children:[r.jsx(Ae,{className:"text-white",children:"Test Results Summary"}),r.jsxs(rn,{children:["Completed at ",new Date(t.timestamp).toLocaleString()]})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-400","data-testid":"text-total-tests",children:t.totalTests}),r.jsx("div",{className:"text-gray-400",children:"Total Tests"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-400","data-testid":"text-passed-tests",children:t.passedTests}),r.jsx("div",{className:"text-gray-400",children:"Passed Tests"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-3xl font-bold text-yellow-400","data-testid":"text-average-accuracy",children:[t.averageAccuracy.toFixed(1),"%"]}),r.jsx("div",{className:"text-gray-400",children:"Average Accuracy"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{children:"Success Rate"}),r.jsxs("span",{children:[(t.passedTests/t.totalTests*100).toFixed(1),"%"]})]}),r.jsx(Dv,{value:t.passedTests/t.totalTests*100,className:"h-3"})]}),t.message&&r.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded text-sm","data-testid":"text-message",children:t.message})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Individual Test Results"}),t.results.map((a,l)=>r.jsxs(ge,{className:"bg-gray-900 border-gray-700",children:[r.jsx(Ee,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ae,{className:"text-white flex items-center gap-2",children:[a.passed?r.jsx(nO,{className:"h-5 w-5 text-green-400"}):r.jsx(rj,{className:"h-5 w-5 text-red-400"}),a.testName]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{variant:a.passed?"default":"destructive",children:a.passed?"PASSED":"FAILED"}),r.jsxs(Pe,{variant:"outline",children:[a.similarityScore.toFixed(1),"% accuracy"]})]})]})}),r.jsxs(je,{children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium mb-2",children:"Original Code"}),r.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm overflow-x-auto",children:r.jsx("code",{children:a.originalCode})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium mb-2",children:"Regenerated Code"}),r.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm overflow-x-auto",children:r.jsx("code",{children:a.regeneratedCode})})]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Structural Matches:"}),r.jsxs("span",{className:"ml-2 text-white",children:[a.structuralMatches,"/",a.totalStructuralElements]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Similarity Score:"}),r.jsxs("span",{className:"ml-2 text-white",children:[a.similarityScore.toFixed(2),"%"]})]})]}),a.errors&&a.errors.length>0&&r.jsxs("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-700 rounded",children:[r.jsx("h5",{className:"text-red-400 font-medium mb-2",children:"Errors:"}),r.jsx("ul",{className:"text-red-300 text-sm space-y-1",children:a.errors.map((u,d)=>r.jsxs("li",{children:[" ",u]},d))})]})]})]},l))]})]})]})})}var vp="Checkbox",[lH,hK]=En(vp),[cH,Vv]=lH(vp);function uH(n){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:i,disabled:a,form:l,name:u,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:m}=n,[g,b]=mr({prop:t,defaultProp:i??!1,onChange:d,caller:vp}),[S,x]=v.useState(null),[w,N]=v.useState(null),E=v.useRef(!1),C=S?!!l||!!S.closest("form"):!0,A={checked:g,disabled:a,setChecked:b,control:S,setControl:x,name:u,form:l,value:f,hasConsumerStoppedPropagationRef:E,required:h,defaultChecked:ki(i)?!1:i,isFormControl:C,bubbleInput:w,setBubbleInput:N};return r.jsx(cH,{scope:e,...A,children:dH(m)?m(A):s})}var BP="CheckboxTrigger",zP=v.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...s},i)=>{const{control:a,value:l,disabled:u,checked:d,required:h,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:S}=Vv(BP,n),x=We(i,f),w=v.useRef(d);return v.useEffect(()=>{const N=a?.form;if(N){const E=()=>m(w.current);return N.addEventListener("reset",E),()=>N.removeEventListener("reset",E)}},[a,m]),r.jsx(Me.button,{type:"button",role:"checkbox","aria-checked":ki(d)?"mixed":d,"aria-required":h,"data-state":WP(d),"data-disabled":u?"":void 0,disabled:u,value:l,...s,ref:x,onKeyDown:Se(e,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Se(t,N=>{m(E=>ki(E)?!0:!E),S&&b&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})})});zP.displayName=BP;var Lv=v.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:i,defaultChecked:a,required:l,disabled:u,value:d,onCheckedChange:h,form:f,...m}=n;return r.jsx(uH,{__scopeCheckbox:t,checked:i,defaultChecked:a,disabled:u,required:l,onCheckedChange:h,name:s,form:f,value:d,internal_do_not_use_render:({isFormControl:g})=>r.jsxs(r.Fragment,{children:[r.jsx(zP,{...m,ref:e,__scopeCheckbox:t}),g&&r.jsx(GP,{__scopeCheckbox:t})]})})});Lv.displayName=vp;var UP="CheckboxIndicator",$P=v.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...i}=n,a=Vv(UP,t);return r.jsx(Mn,{present:s||ki(a.checked)||a.checked===!0,children:r.jsx(Me.span,{"data-state":WP(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});$P.displayName=UP;var qP="CheckboxBubbleInput",GP=v.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:l,required:u,disabled:d,name:h,value:f,form:m,bubbleInput:g,setBubbleInput:b}=Vv(qP,n),S=We(t,b),x=Bh(a),w=Ph(s);v.useEffect(()=>{const E=g;if(!E)return;const C=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(C,"checked").set,R=!i.current;if(x!==a&&P){const T=new Event("click",{bubbles:R});E.indeterminate=ki(a),P.call(E,ki(a)?!1:a),E.dispatchEvent(T)}},[g,x,a,i]);const N=v.useRef(ki(a)?!1:a);return r.jsx(Me.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??N.current,required:u,disabled:d,name:h,value:f,form:m,...e,tabIndex:-1,ref:S,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GP.displayName=qP;function dH(n){return typeof n=="function"}function ki(n){return n==="indeterminate"}function WP(n){return ki(n)?"indeterminate":n?"checked":"unchecked"}const HP=v.forwardRef(({className:n,...e},t)=>r.jsx(Lv,{ref:t,className:Ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:r.jsx($P,{className:Ve("flex items-center justify-center text-current"),children:r.jsx($y,{className:"h-4 w-4"})})}));HP.displayName=Lv.displayName;function hH(){const{toast:n}=yn(),[e,t]=v.useState(""),[s,i]=v.useState(""),[a,l]=v.useState(""),[u,d]=v.useState(""),[h,f]=v.useState([180]),[m,g]=v.useState([120]),[b,S]=v.useState("C Major"),[x,w]=v.useState(""),[N,E]=v.useState(!0),[C,A]=v.useState({piano:!1,guitar:!1,bass:!1,drums:!1,synth:!1,strings:!1,pads:!1,brass:!1}),[P,R]=v.useState(null),T=["An uplifting pop anthem about conquering challenges","A moody synthwave track for late-night coding","Energetic rock song with powerful chorus and catchy riff"],j=["Hip-Hop","Pop","Rock","Electronic","Jazz","Classical","R&B","Country","Blues","Reggae","Folk","Indie"],O=["Dark","Uplifting","Energetic","Chill","Melancholic","Aggressive","Dreamy","Mysterious","Romantic","Epic"],I=["C Major","G Major","D Major","A Major","E Major","B Major","F# Major","C# Major","F Major","Bb Major","Eb Major","Ab Major","Db Major","Gb Major","Cb Major"],D=gt({mutationFn:async()=>{const z=Object.keys(C).filter(X=>C[X]),G={songDescription:e,genre:s,mood:a,aiProvider:u,duration:h[0],bpm:m[0],key:b,style:x,includeVocals:N,instruments:z},Q=await fetch("/api/music/generate-complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!Q.ok)throw new Error("Failed to generate song");return Q.json()},onSuccess:z=>{R(z),n({title:" Professional Song Generated!",description:"Your complete song structure is ready to explore"})},onError:z=>{n({title:"Generation Failed",description:z.message,variant:"destructive"})}}),B=z=>{const G=Math.floor(z/60),Q=z%60;return`${G}:${Q.toString().padStart(2,"0")}`},H=(z,G)=>{A(Q=>({...Q,[z]:G}))};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b border-border",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Pro Audio"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate studio-quality songs using the Grok provider"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{variant:"secondary",children:"Studio-Grade"}),r.jsx(Pe,{variant:"secondary",children:"Grok Only"}),r.jsx(Pe,{variant:"secondary",children:"Up to 8 minutes"})]})]})})}),r.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:P?r.jsxs("div",{className:"space-y-6",children:[r.jsx(ge,{children:r.jsx(Ee,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ae,{className:"text-xl",children:P.title}),r.jsx("p",{className:"text-muted-foreground mt-1",children:P.description})]}),r.jsx(ne,{onClick:()=>R(null),variant:"outline",children:"Generate Another Song"})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(Bi,{defaultValue:"structure",className:"space-y-4",children:[r.jsxs(Hr,{className:"grid w-full grid-cols-4",children:[r.jsx(dt,{value:"structure",children:"Song Structure"}),r.jsx(dt,{value:"chords",children:"Chord Progression"}),r.jsx(dt,{value:"production",children:"Production Notes"}),r.jsx(dt,{value:"features",children:"Audio Features"})]}),r.jsx(ht,{value:"structure",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Song Structure"})}),r.jsx(je,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-96 font-mono",children:JSON.stringify(P.structure,null,2)})})]})}),r.jsx(ht,{value:"chords",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Chord Progression"})}),r.jsx(je,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:P.chordProgression?.map((z,G)=>r.jsx(Pe,{variant:"secondary",className:"text-base px-3 py-1",children:z},G))})})]})}),r.jsx(ht,{value:"production",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Production Notes"})}),r.jsx(je,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-64 font-mono",children:JSON.stringify(P.productionNotes,null,2)})})]})}),r.jsx(ht,{value:"features",children:r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Audio Features"})}),r.jsx(je,{children:r.jsx("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-auto max-h-64 font-mono",children:JSON.stringify(P.audioFeatures,null,2)})})]})})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{className:"text-sm",children:"Metadata"})}),r.jsxs(je,{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:["Duration: ",B(P.metadata.duration)]}),r.jsxs("div",{children:["Key: ",P.metadata.key]}),r.jsxs("div",{children:["BPM: ",P.metadata.bpm]}),r.jsxs("div",{children:["Format: ",P.metadata.format]})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{className:"text-sm",children:"Chord Progression"})}),r.jsx(je,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:P.chordProgression?.slice(0,8).map((z,G)=>r.jsx(Pe,{variant:"secondary",className:"text-xs",children:z},G))})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ne,{variant:"outline",size:"sm",className:"w-full",children:"Export Structure"}),r.jsx(ne,{variant:"outline",size:"sm",className:"w-full",children:"Save Project"})]})]})]})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Generation Parameters"})}),r.jsxs(je,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Song Description"}),r.jsx(cs,{value:e,onChange:z=>t(z.target.value),placeholder:"Describe your song idea...",className:"min-h-[100px] resize-none"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Genre"}),r.jsxs(Ye,{value:s,onValueChange:i,children:[r.jsx(He,{children:r.jsx(Xe,{placeholder:"Select genre"})}),r.jsx(Ke,{children:j.map(z=>r.jsx(le,{value:z,children:z},z))})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Mood"}),r.jsxs(Ye,{value:a,onValueChange:l,children:[r.jsx(He,{children:r.jsx(Xe,{placeholder:"Select mood"})}),r.jsx(Ke,{children:O.map(z=>r.jsx(le,{value:z,children:z},z))})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"AI Provider"}),r.jsxs(Ye,{value:u,onValueChange:d,children:[r.jsx(He,{children:r.jsx(Xe,{placeholder:"No AI providers available"})}),r.jsx(Ke,{children:r.jsx(le,{value:"grok",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"h-4 w-4"}),"xAI Grok"]})})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"mb-2 block font-medium",children:["Duration (",B(h[0]),")"]}),r.jsx(me,{value:h,onValueChange:f,max:480,min:30,step:30,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs(Ne,{className:"mb-2 block font-medium",children:["BPM (",m[0],")"]}),r.jsx(me,{value:m,onValueChange:g,max:200,min:60,step:5,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Key"}),r.jsxs(Ye,{value:b,onValueChange:S,children:[r.jsx(He,{children:r.jsx(Xe,{})}),r.jsx(Ke,{children:I.map(z=>r.jsx(le,{value:z,children:z},z))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Style (Optional)"}),r.jsx(vt,{value:x,onChange:z=>w(z.target.value),placeholder:"e.g. modern, vintage, lo-fi"})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-2 block font-medium",children:"Vocals"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[r.jsx(zs,{checked:N,onCheckedChange:E}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Include lead vocals"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ne,{className:"mb-3 block font-medium",children:"Instruments"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(C).map(([z,G])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(HP,{checked:G,onCheckedChange:Q=>H(z,Q)}),r.jsx("span",{className:"text-sm capitalize",children:z})]},z))})]})]})]}),r.jsxs(ge,{children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Example Prompts"})}),r.jsx(je,{className:"space-y-3",children:T.map((z,G)=>r.jsx(ne,{variant:"outline",className:"w-full text-left h-auto p-3",onClick:()=>t(z),children:z},G))})]}),r.jsx("div",{className:"text-center",children:r.jsx(ne,{onClick:()=>D.mutate(),disabled:D.isPending||!e.trim(),size:"lg",className:"min-w-64 h-12",children:D.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ca,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating Professional Song..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mt,{className:"mr-2 h-5 w-5"}),"Generate Professional Song"]})})})]})})]})}function pH(){return r.jsx(hH,{})}class fH{constructor(){this.synth=null,this.isInitialized=!1,this.currentSequence=null,this.trackInstruments={},this.drumKit={}}async playSequencer(e){await this.initialize();try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose()),this.setBpm(e.bpm);const t=e.bars*e.stepsPerBar,s={};for(const a of e.tracks){const l=Array(t).fill(!1);for(const u of a.clips)for(let d=0;d<u.length;d++){const h=u.start+d;h>=0&&h<t&&(l[h]=l[h]||!!u.steps[d]?.active)}s[a.id]=l}const i=Array.from({length:t},(a,l)=>l);this.currentSequence=new Ni((a,l)=>{const u=e.tracks.some(d=>d.solo);for(const d of e.tracks){const h=d.id;if(!s[h]?.[l]||d.mute||u&&!d.solo)continue;const m=this.trackInstruments[h]||this.drumKit.hihat,g=this.getAIPatternForInstrument(h,l);g?m.triggerAttackRelease(g.note||this.getDefaultNote(h),g.duration||this.getDefaultDuration(h),a,g.velocity||.8):this.triggerHardcodedPattern(h,m,a)}},i,"16n"),this.currentSequence.loop=!0,this.currentSequence.start(0),An.start()}catch(t){console.warn("Failed to play sequencer:",t)}}getAIPatternForInstrument(e,t){return null}getDefaultNote(e){return{kick:"C1",snare:"8n",hhc:220,hho:200,tom1:"G1",tom2:"F1",tom3:"D1",ride:260,crash:220}[e]||220}getDefaultDuration(e){return{kick:"8n",snare:"8n",hhc:"16n",hho:"8n",tom1:"8n",tom2:"8n",tom3:"8n",ride:"4n",crash:"2n"}[e]||"16n"}triggerHardcodedPattern(e,t,s){switch(e){case"kick":t.triggerAttackRelease("C1","8n",s);break;case"snare":t.triggerAttackRelease("8n",s);break;case"hhc":t.triggerAttackRelease(220,"16n",s,.9);break;case"hho":t.triggerAttackRelease(200,"8n",s,.9);break;case"tom1":t.triggerAttackRelease("G1","8n",s);break;case"tom2":t.triggerAttackRelease("F1","8n",s);break;case"tom3":t.triggerAttackRelease("D1","8n",s);break;case"ride":t.triggerAttackRelease(260,"4n",s,1);break;case"crash":t.triggerAttackRelease(220,"2n",s,1);break;default:this.drumKit.hihat.triggerAttackRelease(220,"16n",s,.8)}}async initialize(){if(!this.isInitialized)try{console.log("Initializing Tone.js audio context..."),await sp(),console.log("Tone.js started, audio context state:",os().state),this.synth=this.synth??new ec().toDestination(),this.drumKit={kick:new dr({pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}}).toDestination(),snare:new tc({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}}).toDestination(),hihat:new Ls({envelope:{attack:.001,decay:.15,release:.02},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination()},this.trackInstruments={kick:this.drumKit.kick,snare:this.drumKit.snare,hhc:new Ls({envelope:{attack:.001,decay:.12,release:.02},harmonicity:5,modulationIndex:30,resonance:5e3,octaves:1.5}).toDestination(),hho:new Ls({envelope:{attack:.001,decay:.45,release:.08},harmonicity:5,modulationIndex:30,resonance:4e3,octaves:1.5}).toDestination(),tom1:new dr({octaves:4,envelope:{attack:.001,decay:.4,sustain:.01,release:.2}}).toDestination(),tom2:new dr({octaves:4,envelope:{attack:.001,decay:.5,sustain:.01,release:.25}}).toDestination(),tom3:new dr({octaves:4,envelope:{attack:.001,decay:.6,sustain:.01,release:.3}}).toDestination(),ride:new Ls({envelope:{attack:.001,decay:1.2,release:.2},resonance:7e3}).toDestination(),crash:new Ls({envelope:{attack:.001,decay:1.8,release:.3},resonance:6e3}).toDestination()};try{this.drumKit.hihat.volume.value=6,this.trackInstruments.hhc.volume.value=6,this.trackInstruments.hho.volume.value=6,this.trackInstruments.ride.volume.value=6,this.trackInstruments.crash.volume.value=6}catch{}console.log("Drum kit created:",Object.keys(this.drumKit)),this.isInitialized=!0}catch(e){throw console.error("Audio initialization failed:",e),e}}setBpm(e){try{An.bpm.value=e}catch{}}async playNote(e,t="8n"){await this.initialize();try{if(!this.synth)return;this.synth.triggerAttackRelease(e,t)}catch(s){console.warn("Failed to play note:",s)}}async playMelody(e,t=120){await this.initialize();try{An.bpm.value=t;const s=new Ni((i,a)=>{this.synth&&this.synth.triggerAttackRelease(Yz(a,"midi").toNote(),"8n",i)},e,"8n");s.start(),An.start(),setTimeout(()=>{s.stop(),An.stop(),s.dispose()},e.length*(60/t)*.5*1e3)}catch(s){console.warn("Failed to play melody:",s)}}async playBeat(e,t,s=120){await this.initialize();try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose()),An.bpm.value=s,console.log("Playing beat pattern:",e),this.currentSequence=new Ni((i,a)=>{a%4===0&&(this.drumKit.kick.triggerAttackRelease("C1","8n",i),console.log("Playing kick at step",a)),(a===4||a===12)&&(this.drumKit.snare.triggerAttackRelease("8n",i),console.log("Playing snare at step",a)),this.drumKit.hihat.triggerAttackRelease(220,"16n",i,.8),e[a]===1&&a%4!==0&&a!==4&&a!==12&&this.drumKit.kick.triggerAttackRelease("C2","16n",i+.1)},Array.from({length:16},(i,a)=>a),"16n"),this.currentSequence.start(),An.start(),this.currentSequence.loop=!0}catch(i){console.warn("Failed to play beat:",i)}}stop(){try{this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose(),this.currentSequence=null),An.stop(),An.cancel()}catch(e){console.warn("Failed to stop audio:",e)}}dispose(){try{this.stop(),this.synth&&(this.synth.dispose(),this.synth=null),Object.values(this.drumKit).forEach(e=>e.dispose()),this.isInitialized=!1}catch(e){console.warn("Failed to dispose audio:",e)}}}const Og=new fH,mH=["JavaScript","TypeScript","Python","Java","C#","C++","Go","Rust","PHP","Ruby","Swift","Kotlin","Dart","Scala"];function gH(){const[n,e]=v.useState(""),[t,s]=v.useState(""),[i,a]=v.useState(null),[l,u]=v.useState(!1),[d,h]=v.useState(!1),[f,m]=v.useState([75]),[g,b]=v.useState("openai"),{toast:S}=yn(),x=gt({mutationFn:async R=>(await ot("POST","/api/code/convert-to-music",R)).json(),onSuccess:R=>{a(R),S({title:"Code converted to music!",description:`Created a musical composition in ${R.key} at ${R.tempo} BPM`})},onError:R=>{S({title:"Conversion failed",description:R.message,variant:"destructive"})}}),w=()=>{if(!n.trim()){S({title:"No code provided",description:"Please enter some code to convert",variant:"destructive"});return}if(!t){S({title:"No language selected",description:"Please select the programming language",variant:"destructive"});return}x.mutate({code:n,language:t,aiProvider:g})},N=async()=>{try{await Og.initialize(),h(!0),S({title:"Audio ready",description:"Audio system initialized successfully"})}catch{S({title:"Audio initialization failed",description:"Please check your browser audio settings",variant:"destructive"})}},E=async()=>{if(!d){S({title:"Audio not ready",description:"Click 'Start Audio' first to enable sound",variant:"destructive"});return}if(i)if(l)Og.stop(),u(!1);else try{await Og.playMelody(i.melody,i.tempo),u(!0),setTimeout(()=>{u(!1)},i.melody.length*(60/i.tempo)*.5*1e3)}catch{S({title:"Playback failed",description:"Could not play the generated music",variant:"destructive"})}},C={JavaScript:`function fibonacci(n) {
  if (n <= 1) return n;
  let a = 0, b = 1;
  for (let i = 2; i <= n; i++) {
    [a, b] = [b, a + b];
  }
  return b;
}

// Recursive pattern creates ascending melody
// Loop structure adds rhythmic complexity`,Python:`import random

def generate_pattern(size):
    pattern = []
    for i in range(size):
        if i % 2 == 0:
            pattern.append(random.choice([1, 2, 3]))
        else:
            pattern.append(0)
    return pattern

# Conditional logic creates syncopated rhythm
# Random elements add harmonic variation`,Java:`public class MelodyGenerator {
    private int[] notes = {60, 62, 64, 65, 67, 69, 71, 72};
    
    public void playScale() {
        for (int note : notes) {
            System.out.println("Playing note: " + note);
            Thread.sleep(250);
        }
    }
}

// Object structure maps to chord progressions
// Array iteration creates melodic sequences`},A=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],P=R=>{const T=Math.floor(R/12)-1,j=R%12;return`${A[j]}${T}`};return r.jsx("div",{className:"min-h-screen bg-background text-foreground pt-16",children:r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"flex-1 ml-64 p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(en,{className:"text-white h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold",children:["Code",r.jsx("span",{className:"text-purple-400",children:"Beat"})," Studio"]}),r.jsx("p",{className:"text-muted-foreground",children:"Transform your code into musical compositions with AI magic"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Pe,{variant:"secondary",children:"Revolutionary"}),r.jsx(Pe,{variant:"secondary",children:"Code Analysis"}),r.jsx(Pe,{variant:"secondary",children:"Musical Mapping"}),r.jsx(Pe,{variant:"secondary",children:"AI-Powered"})]})]}),r.jsxs(ge,{className:"bg-card border-border mb-6",children:[r.jsx(Ee,{children:r.jsxs(Ae,{className:"flex items-center",children:[r.jsx(oo,{className:"mr-2 h-5 w-5 text-purple-400"}),"Code Input",r.jsx(Z5,{className:"mx-4 h-5 w-5 text-purple-400"}),r.jsx(Mt,{className:"mr-2 h-5 w-5 text-pink-400"}),"Music Output"]})}),r.jsx(je,{children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Programming Language"}),r.jsxs(Ye,{value:t,onValueChange:s,children:[r.jsx(He,{className:"bg-background border-border",children:r.jsx(Xe,{placeholder:"Select language"})}),r.jsx(Ke,{children:mH.map(R=>r.jsx(le,{value:R,children:R},R))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Provider"}),r.jsx(Rc,{value:g,onValueChange:b})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Source Code"}),r.jsx(cs,{value:n,onChange:R=>e(R.target.value),placeholder:"Enter your code here...",className:"min-h-64 font-mono bg-background border-border resize-none"})]}),t&&C[t]&&r.jsx(ne,{variant:"outline",size:"sm",onClick:()=>e(C[t]),children:"Load Example Code"})]}),r.jsx("div",{className:"space-y-4",children:i?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(ge,{className:"bg-background border-border",children:r.jsxs(je,{className:"p-4",children:[!d&&r.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-purple-400",children:"Audio Setup Required"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to enable audio playback"})]}),r.jsxs(ne,{onClick:N,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx(Ai,{className:"mr-2 h-4 w-4"}),"Start Audio"]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ne,{onClick:E,disabled:!d,className:"w-12 h-12 rounded-full bg-purple-600/20 hover:bg-purple-600/30 disabled:opacity-50",children:l?r.jsx(hc,{className:"h-5 w-5 text-purple-400"}):r.jsx(pn,{className:"h-5 w-5 text-purple-400"})}),r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"text-foreground",children:"Generated Composition"}),r.jsxs("div",{className:"text-muted-foreground text-xs",children:[i.tempo," BPM  ",i.key]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(me,{value:f,onValueChange:m,max:100,min:0,className:"w-20"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ge,{className:"bg-background border-border",children:r.jsxs(je,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"Musical Key"}),r.jsx(Pe,{variant:"outline",className:"text-purple-400",children:i.key})]})}),r.jsx(ge,{className:"bg-background border-border",children:r.jsxs(je,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2 text-pink-400",children:"Tempo"}),r.jsxs(Pe,{variant:"outline",className:"text-pink-400",children:[i.tempo," BPM"]})]})})]}),r.jsx(ge,{className:"bg-background border-border",children:r.jsxs(je,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Melody Pattern"}),r.jsx("div",{className:"grid grid-cols-8 gap-1",children:i.melody.slice(0,16).map((R,T)=>r.jsx("div",{className:"p-2 bg-purple-600/20 rounded text-center text-xs font-mono",title:`MIDI Note ${R}`,children:P(R)},T))})]})}),i.rhythm&&r.jsx(ge,{className:"bg-background border-border",children:r.jsxs(je,{className:"p-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Rhythm Pattern"}),r.jsx("div",{className:"grid grid-cols-16 gap-1",children:i.rhythm.slice(0,16).map((R,T)=>r.jsx("div",{className:`w-4 h-4 rounded ${R?"bg-purple-400":"bg-border"}`},T))})]})})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(ne,{variant:"outline",className:"flex-1",children:[r.jsx(ql,{className:"h-4 w-4 mr-2"}),"Export MIDI"]}),r.jsxs(ne,{variant:"outline",className:"flex-1",children:[r.jsx(mO,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}):r.jsx("div",{className:"min-h-64 bg-background border border-dashed border-border rounded-lg flex items-center justify-center text-muted-foreground",children:"Your musical composition will appear here"})})]})})]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(ne,{onClick:w,disabled:x.isPending,className:"px-8 py-3 bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white font-semibold",size:"lg",children:x.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ca,{className:"mr-2 h-5 w-5 animate-spin"}),"Converting Code to Music..."]}):r.jsxs(r.Fragment,{children:[r.jsx(en,{className:"mr-2 h-5 w-5"}),"Transform Code to Music"]})})}),i&&r.jsxs(ge,{className:"bg-card border-border mb-6",children:[r.jsx(Ee,{children:r.jsx(Ae,{children:"Conversion Analysis"})}),r.jsx(je,{children:r.jsx("div",{className:"prose prose-invert max-w-none",children:r.jsx("p",{className:"text-muted-foreground",children:i.description})})})]}),r.jsxs(ge,{className:"bg-purple-500/10 border-purple-500/20",children:[r.jsx(Ee,{children:r.jsx(Ae,{className:"text-purple-400",children:" How CodeBeat Fusion Works"})}),r.jsx(je,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"1. Code Analysis"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Analyzes code structure and complexity"}),r.jsx("li",{children:" Identifies patterns and loops"}),r.jsx("li",{children:" Maps function calls to melodic phrases"}),r.jsx("li",{children:" Converts variables to harmonic elements"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-pink-400",children:"2. Musical Mapping"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Conditional statements  chord changes"}),r.jsx("li",{children:" Loops  repeating musical patterns"}),r.jsx("li",{children:" Function depth  musical octaves"}),r.jsx("li",{children:" Code complexity  rhythmic density"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2 text-purple-400",children:"3. Composition"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Generates MIDI note sequences"}),r.jsx("li",{children:" Creates rhythmic patterns"}),r.jsx("li",{children:" Assigns appropriate tempo and key"}),r.jsx("li",{children:" Produces playable musical output"})]})]})]})})]})]})})})}function iC(){const n=typeof window<"u"&&window.location.pathname.endsWith("/success");return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 p-4",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs(ge,{className:"bg-gray-800/50 border-purple-500/20",children:[r.jsx(Ee,{className:"text-center space-y-2",children:n?r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{className:"text-white flex items-center justify-center",children:[r.jsx(sO,{className:"h-6 w-6 text-green-400 mr-2"}),"Subscription Activated"]}),r.jsx(rn,{className:"text-gray-300",children:"Thanks for upgrading! Your subscription will be reflected shortly."})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{className:"text-white flex items-center justify-center",children:[r.jsx(rj,{className:"h-6 w-6 text-red-400 mr-2"}),"Checkout Canceled"]}),r.jsx(rn,{className:"text-gray-300",children:"No changes were made. You can retry the checkout anytime."})]})}),r.jsxs(je,{className:"flex items-center justify-center gap-3 pb-8",children:[r.jsx(ne,{onClick:()=>window.location.href="/studio",children:"Go to Studio"}),!n&&r.jsx(ne,{variant:"secondary",onClick:()=>window.location.href="/billing",children:"Try Again"})]})]})})})}const yH=()=>{const[n]=vh(),e=v.useRef(n);v.useEffect(()=>{n!==e.current&&(e.current=n)},[n])};function xH(){return yH(),r.jsxs(yC,{children:[r.jsx(Qe,{path:"/",component:x2}),r.jsx(Qe,{path:"/dashboard",component:bD}),r.jsx(Qe,{path:"/music-studio",component:ut}),r.jsx(Qe,{path:"/song-uploader",component:ut}),r.jsx(Qe,{path:"/beat-studio",component:ut}),r.jsx(Qe,{path:"/melody-composer",component:ut}),r.jsx(Qe,{path:"/unified-studio",component:ut}),r.jsx(Qe,{path:"/code-translator",component:ut}),r.jsx(Qe,{path:"/codebeat-studio",component:ut}),r.jsx(Qe,{path:"/lyric-lab",component:ut}),r.jsx(Qe,{path:"/vulnerability-scanner",component:ut}),r.jsx(Qe,{path:"/ai-assistant",component:ut}),r.jsx(Qe,{path:"/mix-studio",component:ut}),r.jsx(Qe,{path:"/pro-console",component:ut}),r.jsx(Qe,{path:"/midi-controller",component:ut}),r.jsx(Qe,{path:"/advanced-sequencer",component:ut}),r.jsx(Qe,{path:"/granular-engine",component:ut}),r.jsx(Qe,{path:"/wavetable-oscillator",component:ut}),r.jsx(Qe,{path:"/pack-generator",component:ut}),r.jsx(Qe,{path:"/song-structure",component:ut}),r.jsx(Qe,{path:"/billing",component:rC}),r.jsx(Qe,{path:"/billing/success",component:iC}),r.jsx(Qe,{path:"/billing/cancel",component:iC}),r.jsx(Qe,{path:"/settings",component:ut}),r.jsx(Qe,{path:"/studio",component:ut}),r.jsx(Qe,{path:"/subscribe",component:rC}),r.jsx(Qe,{path:"/test-circular",component:oH}),r.jsx(Qe,{component:vD})]})}function kn({children:n}){return r.jsxs("div",{className:"flex h-screen",children:[r.jsx(yD,{}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(fD,{}),r.jsx("main",{className:"flex-1 overflow-x-auto overflow-y-auto",children:r.jsx("div",{className:"min-w-[1400px] w-full h-full",children:n})})]})]})}function vH(){return v.useEffect(()=>{console.warn("Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID")},[]),r.jsx(LR,{client:Dy,children:r.jsxs(BI,{children:[r.jsx(n4,{}),r.jsxs(yC,{children:[r.jsx(Qe,{path:"/",component:x2}),r.jsx(Qe,{path:"/music-studio",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/song-uploader",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/beat-studio",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/melody-composer",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/code-translator",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/codebeat-studio",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/lyric-lab",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/vulnerability-scanner",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/ai-assistant",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/mix-studio",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/pro-console",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/midi-controller",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/song-structure",children:r.jsx(kn,{children:r.jsx(ut,{})})}),r.jsx(Qe,{path:"/pro-audio",children:r.jsx(kn,{children:r.jsx(pH,{})})}),r.jsx(Qe,{path:"/codebeat-studio-direct",children:r.jsx(kn,{children:r.jsx(gH,{})})}),r.jsx(Qe,{path:"*",children:r.jsx(kn,{children:r.jsx(xH,{})})})]})]})})}XM.createRoot(document.getElementById("root")).render(r.jsx(vH,{}));
